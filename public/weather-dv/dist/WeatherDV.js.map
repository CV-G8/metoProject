{
  "version": 3,
  "sources": [
    "../engine-cli/node_modules/browser-pack/_prelude.js",
    "node_modules/@mesh-3d/core/Source/CameraUtils.js",
    "node_modules/@mesh-3d/core/Source/GeometryUtils.js",
    "node_modules/@mesh-3d/core/Source/IEffect.js",
    "node_modules/@mesh-3d/core/Source/IRenderable.js",
    "node_modules/@mesh-3d/core/Source/MeshVisualizer.js",
    "node_modules/@mesh-3d/core/Source/RendererUtils.js",
    "node_modules/@mesh-3d/core/Source/polyfill.js",
    "node_modules/@mesh-3d/core/Source/webgl/CesiumCommands.js",
    "node_modules/@mesh-3d/core/Source/webgl/CesiumRenderStates.js",
    "node_modules/@mesh-3d/core/Source/webgl/CesiumShaderPrograms.js",
    "node_modules/@mesh-3d/core/Source/webgl/CesiumVertextArrays.js",
    "node_modules/@mesh-3d/core/Source/webgl/ConstantMap.js",
    "node_modules/@mesh-3d/core/Source/webgl/DDSTexture.js",
    "node_modules/@mesh-3d/core/Source/webgl/ShaderUtils.js",
    "node_modules/@mesh-3d/core/Source/webgl/Shaders/extension_lights_pars.glsl.js",
    "node_modules/@mesh-3d/core/Source/webgl/Shaders/extention_lights_fragment_begin.glsl.js",
    "node_modules/@mesh-3d/core/Source/webgl/TextureUtils.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLCapabilities.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLClipping.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLCubeMaps.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLExtensions.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLGeometries.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLLights.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLMaterials.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLMorphtargets.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLProgram.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLPrograms.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLProperties.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderItem.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderItems.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderList.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderState.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderStates.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderTargets.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLRenderer.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLShadowMap.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLTextures.js",
    "node_modules/@mesh-3d/core/Source/webgl/WebGLUniforms.js",
    "node_modules/@mesh-3d/core/index.js",
    "node_modules/@mesh-3d/earth/Source/Earth.js",
    "node_modules/@mesh-3d/earth/Source/environments/LocalSkyBox.js",
    "node_modules/@mesh-3d/earth/Source/geometries/ExtrudedPolygonGeometry.js",
    "node_modules/@mesh-3d/earth/Source/geometries/GeoPolygonGeometry.js",
    "node_modules/@mesh-3d/earth/Source/geometries/GeoPolylineGeometry.js",
    "node_modules/@mesh-3d/earth/Source/geometries/SolidWireframeGeometry.js",
    "node_modules/@mesh-3d/earth/Source/geometries/VectorPolygonGeometry.js",
    "node_modules/@mesh-3d/earth/Source/index.js",
    "node_modules/@mesh-3d/earth/Source/interactive/getLine.js",
    "node_modules/@mesh-3d/earth/Source/interactive/getPoint.js",
    "node_modules/@mesh-3d/earth/Source/interactive/getPolyline.js",
    "node_modules/@mesh-3d/earth/Source/interactive/getRactangle.js",
    "node_modules/@mesh-3d/earth/Source/interactive/getRactangleCornersWC.js",
    "node_modules/@mesh-3d/earth/Source/interactive/index.js",
    "node_modules/@mesh-3d/earth/Source/interactive/pickPosition.js",
    "node_modules/@mesh-3d/earth/Source/layers/ILayer.js",
    "node_modules/@mesh-3d/earth/Source/layers/imagery/ImageTileLayer.js",
    "node_modules/@mesh-3d/earth/Source/layers/imagery/TiandituLayer.js",
    "node_modules/@mesh-3d/earth/Source/layers/imageryLayersOrderByZIndex.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/C3DTilesLayer.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/GeoMesh.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/GeoPolygonMesh.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/GeoPolylineMesh.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/GeoWaterMesh.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/OsgbLayer.js",
    "node_modules/@mesh-3d/earth/Source/layers/object3d/Water.js",
    "node_modules/@mesh-3d/earth/Source/layers/vector/Vector2dLayer.js",
    "node_modules/@mesh-3d/earth/Source/layers/vector/Vector3DStandardProvider.js",
    "node_modules/@mesh-3d/earth/Source/layers/vector/Vector3DWireframeProvider.js",
    "node_modules/@mesh-3d/earth/Source/layers/vector/Vector3dLayer.js",
    "node_modules/@mesh-3d/earth/Source/materials/SolidWireframeMaterial.js",
    "node_modules/@mesh-3d/earth/index.js",
    "node_modules/@mesh-3d/renderable/Source/3dtiles/Batched3DModel3DTileContentEx.js",
    "node_modules/@mesh-3d/renderable/Source/3dtiles/Cesium3DTileExtension.js",
    "node_modules/@mesh-3d/renderable/Source/3dtiles/Instanced3DModel3DTileContentEx.js",
    "node_modules/@mesh-3d/renderable/Source/BuildingVector3DLoader.js",
    "node_modules/@mesh-3d/renderable/Source/CameraHelper.js",
    "node_modules/@mesh-3d/renderable/Source/CesiumRTCHelper.js",
    "node_modules/@mesh-3d/renderable/Source/IContentProvider.js",
    "node_modules/@mesh-3d/renderable/Source/LODUtils.js",
    "node_modules/@mesh-3d/renderable/Source/PagedLOD.js",
    "node_modules/@mesh-3d/renderable/Source/PagedLODQueue.js",
    "node_modules/@mesh-3d/renderable/Source/PagedLODState.js",
    "node_modules/@mesh-3d/renderable/Source/QuadtreeLOD.js",
    "node_modules/@mesh-3d/renderable/Source/QuadtreeLODUtil.js",
    "node_modules/@mesh-3d/renderable/Source/QuadtreeNode.js",
    "node_modules/@mesh-3d/renderable/Source/QuatreeContentSet.js",
    "node_modules/@mesh-3d/renderable/Source/TaskList.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/bmp-js/lib/decoder.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/exporters/DRACOExporter.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/exporters/GLTFExporter.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/loaders/BMPLoader.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/loaders/DDSLoader.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/loaders/DRACOLoader.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/loaders/GLTFLoader.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/loaders/RGBELoader.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/loaders/TGALoader.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Common/Base64Encoder.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Common/Constants.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Common/DataTypes.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Common/Log.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/ArrayTableEnum.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/AttributeBinding.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/CenterMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/CullFace_FaceMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/EnumToString.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/GLEnum.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/ImageType.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/Material_ColorMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/ObjectData_Variance.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/PrimitiveMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/PrimitiveTableEnum.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/RangeMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/ShadeModel_Mode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/StateAttribute_Value.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/StateSet_RenderBinMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/StateSet_RenderingHint.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/Texture_InternalFormatMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/Texture_ShadowCompareFunc.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/Texture_ShadowTextureMode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Enum/Transform_ReferenceFrame.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Input/AsciiStreamOperator.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Input/BinaryStreamOperator.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Input/InputStream.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Input/ReadFile.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Input/StreamOperator.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/BufferData.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/CullFace.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/DefaultUserDataContainer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Drawable.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Geode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Geometry.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Group.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Image.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/LOD.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Material.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/MatrixTransform.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Node.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Object.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/OsgArray.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/PagedLOD.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/ShadeModel.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/StateAttribute.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/StateSet.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Texture.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Texture2D.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/Transform.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/OsgTypes/UserDataContainer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/Associate.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/BaseSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/EnumSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/ImageSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/MatrixSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/ObjectCallbackSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/ObjectSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/ObjectWrapper.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/ObjectWrapperManager.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/PropByValSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/UserSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/Serializer/VectorSerializer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/CullFace.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Drawable.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Geode.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Geometry.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Group.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/LOD.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Material.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/MatrixTransform.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Node.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Object.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/PagedLOD.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/ShadeModel.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/StateAttribute.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/StateSet.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Texture.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Texture2D.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/Transform.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/UserDataContainer.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/TypeSerializers/_SerializerInitiator.js",
    "node_modules/@mesh-3d/renderable/Source/ThirdParty/osg-serializer-js/Source/index.js",
    "node_modules/@mesh-3d/renderable/Source/model/MeshVisModel.js",
    "node_modules/@mesh-3d/renderable/Source/model/MeshVisModelUtil.js",
    "node_modules/@mesh-3d/renderable/Source/model/OSGLoader.js",
    "node_modules/@mesh-3d/renderable/Source/model/VISMExporter.js",
    "node_modules/@mesh-3d/renderable/Source/model/VISMLoader.js",
    "node_modules/@mesh-3d/renderable/Source/model/parseOsg.js",
    "node_modules/@mesh-3d/renderable/Source/releaseResources.js",
    "node_modules/@mesh-3d/renderable/index.js",
    "node_modules/@mesh-3d/utils/Source/BufferUtlils.js",
    "node_modules/@mesh-3d/utils/Source/GenericWorker.js",
    "node_modules/@mesh-3d/utils/Source/ImageUtils.js",
    "node_modules/@mesh-3d/utils/Source/MathUtils.js",
    "node_modules/@mesh-3d/utils/Source/ObjectUtil.js",
    "node_modules/@mesh-3d/utils/Source/Path.js",
    "node_modules/@mesh-3d/utils/Source/StringUtil.js",
    "node_modules/@mesh-3d/utils/Source/computeArea.js",
    "node_modules/@mesh-3d/utils/Source/defineProperty.js",
    "node_modules/@mesh-3d/utils/Source/determinant.js",
    "node_modules/@mesh-3d/utils/Source/esExtends.js",
    "node_modules/@mesh-3d/utils/Source/geojsonHelper.js",
    "node_modules/@mesh-3d/utils/Source/isTypedArray.js",
    "node_modules/@mesh-3d/utils/Source/lineBufferDir3.js",
    "node_modules/@mesh-3d/utils/Source/matrix4LookAt.js",
    "node_modules/@mesh-3d/utils/Source/mergeBuffers.js",
    "node_modules/@mesh-3d/utils/Source/parseDefines.js",
    "node_modules/@mesh-3d/utils/Source/saver.js",
    "node_modules/@mesh-3d/utils/Source/stringToArrayBuffer.js",
    "node_modules/@mesh-3d/utils/Source/traverse.js",
    "node_modules/@mesh-3d/utils/Source/triangulate.js",
    "node_modules/@mesh-3d/utils/index.js",
    "node_modules/@turf/along/dist/es/index.js",
    "node_modules/@turf/bearing/dist/es/index.js",
    "node_modules/@turf/destination/dist/es/index.js",
    "node_modules/@turf/distance/dist/es/index.js",
    "node_modules/@turf/helpers/dist/es/index.js",
    "node_modules/@turf/invariant/dist/es/index.js",
    "node_modules/@turf/line-offset/dist/es/index.js",
    "node_modules/@turf/meta/dist/es/index.js",
    "node_modules/base64-js/index.js",
    "src/HfsFileLoader.js",
    "src/index.js",
    "src/layers/GeoGridLayer.js",
    "src/layers/IHfsFileLayer.js",
    "src/layers/MicapsECLayer.js",
    "src/layers/MicapsUpAirLayer.js",
    "src/layers/PUPRadarLayer.js",
    "src/layers/SateCloudLayer.js",
    "src/layers/SurfLayer.js",
    "src/layers/SwanRadarLayer.js",
    "src/layers/VectorLayerGroup.js",
    "src/rasterSampler.js",
    "src/splitLine.js",
    "src/terrainSampler.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/assertThisInitialized.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/asyncToGenerator.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/classCallCheck.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/createClass.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/defineProperty.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/get.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/getPrototypeOf.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/inherits.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/interopRequireDefault.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/setPrototypeOf.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/superPropBase.js",
    "../engine-cli/node_modules/@babel/runtime/helpers/typeof.js",
    "../engine-cli/node_modules/@babel/runtime/regenerator/index.js",
    "../engine-cli/node_modules/base64-js/index.js",
    "../engine-cli/node_modules/buffer/index.js",
    "../engine-cli/node_modules/ieee754/index.js",
    "../engine-cli/node_modules/regenerator-runtime/runtime.js"
  ],
  "names": [],
  "mappings": "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;AACA;AACA;AACA;AACA;AACA;AACA;;ACrCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACjBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACTA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACfA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrBA;AACA;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;ACtJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACjvDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACrFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA",
  "file": "generated.js",
  "sourceRoot": "",
  "sourcesContent": [
    "(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()",
    "import polyfill from  \"./polyfill.js\";\n\n\n/**\n * 相机工具，转换cesium和threejs相机，仅做参数映射，不考虑两个引擎的差异。也即是以cesium相机为主，换到threejs相机只是为了语法上的需要\n */\nclass CameraUtils {\n\n    /**\n     * \n     * @param {THREE.PerspectiveCamera|Cesium.Camera} camera\n     * @param {THREE.Matrix4} mirrorMatrixWorld \n     * @param {THREE.PerspectiveCamera} [mirrorCamera] \n     */\n    static getMirrorCamera(camera, mirrorMatrixWorld, mirrorCamera, up) {\n        if (camera instanceof Cesium.Camera) {\n            camera = this.toPerspectiveCamera3js(camera)\n        }\n\n        var { Vector3, Matrix4, PerspectiveCamera } = THREE;\n        var mirrorWorldPosition = new Vector3();\n        var cameraWorldPosition = new Vector3();\n        var rotationMatrix = new Matrix4();\n        var normal = new Vector3();\n        var view = new Vector3();\n        var lookAtPosition = new Vector3();\n        var target = new Vector3();\n\n        var scope = {\n            matrixWorld: mirrorMatrixWorld\n        }\n        mirrorCamera = mirrorCamera || new PerspectiveCamera();\n        // mirrorCamera.copy(camera);\n\n        mirrorWorldPosition.setFromMatrixPosition(scope.matrixWorld)\n        cameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n        rotationMatrix.extractRotation(scope.matrixWorld)\n\n        normal.set(0, 0, 1);\n        normal.applyMatrix4(rotationMatrix);\n\n        view.subVectors(mirrorWorldPosition, cameraWorldPosition);\n\n        // Avoid rendering when mirror is facing away\n\n        // if (view.dot(normal) > 0) return;\n\n        view.reflect(normal).negate();\n        view.add(mirrorWorldPosition);\n\n        rotationMatrix.extractRotation(camera.matrixWorld);\n\n        lookAtPosition.set(0, 0, 1);\n        lookAtPosition.applyMatrix4(rotationMatrix);\n        lookAtPosition.add(cameraWorldPosition);\n\n        target.subVectors(mirrorWorldPosition, lookAtPosition);\n        target.reflect(normal).negate();\n        target.add(mirrorWorldPosition);\n\n        mirrorCamera.position.copy(view);\n        mirrorCamera.up.set(0, 1, 0);\n        mirrorCamera.up.applyMatrix4(rotationMatrix);\n        mirrorCamera.up.reflect(normal);\n        mirrorCamera.lookAt(target);\n\n        mirrorCamera.updateMatrixWorld();\n        mirrorCamera.far = camera.far;\n        mirrorCamera.near = camera.near;\n        mirrorCamera.fov = camera.fov;\n        mirrorCamera.focus = camera.focus;\n        mirrorCamera.updateProjectionMatrix()\n\n        mirrorCamera.projectionMatrix.copy(camera.projectionMatrix);\n\n        return mirrorCamera;\n    }\n\n    /**\n     * \n     * @param {THREE.Camera} camera3js \n     * @return {Cesium.Camera}\n     */\n    static getCameraFromCache(camera3js) {\n        return cameraMap.get(camera3js);\n    }\n\n    /**\n     * \n     * @param {THREE.Camera} camera3js \n     * @return {THREE.Frustum}\n     */\n    static getFrustum3js(camera3js) {\n        if (!camera3js.isCamera) camera3js = cameraMap.get(camera3js);\n        return frustumMap.get(camera3js);\n    }\n\n    /**\n     * cesium相机转threejs相机\n     * @param {Cesium.Camera} camera  \n     * @param {THREE.PerspectiveCamera} [camera3js] \n     * @param {{\n     *  matrix:Cesium.Matrix4,\n     *  inverseMatrix:Cesium.Matrix4\n     * }} [referenceFrame] \n     * @returns {THREE.PerspectiveCamera} camera3js\n     */\n    static toPerspectiveCamera3js(camera, camera3js, referenceFrame) {\n\n        referenceFrame = referenceFrame || camera._referenceFrame;\n        var frustum = camera.frustum;\n        if (!camera3js) {\n            if (cameraMap.has(camera)) {\n                camera3js = cameraMap.get(camera);\n            }\n            else {\n                camera3js = new THREE.PerspectiveCamera();\n                cameraMap.set(camera, camera3js);\n            }\n        }\n\n        camera3js.aspect = frustum.aspectRatio;\n        camera3js.near = frustum.near;\n        camera3js.far = frustum.far;\n        camera3js.fov = Cesium.Math.toDegrees(frustum.fovy);\n\n        camera3js.updateProjectionMatrix();\n\n        // var cvm =  camera.viewMatrix;\n        // var civm = camera.inverseViewMatrix;\n        // camera3js.matrixWorld.set(\n        //   civm[0], civm[4], civm[8 ], civm[12],\n        //   civm[1], civm[5], civm[9 ], civm[13],\n        //   civm[2], civm[6], civm[10], civm[14],\n        //   civm[3], civm[7], civm[11], civm[15]\n        // );\n        // camera3js.matrixWorldInverse.set(\n        //   cvm[0], cvm[4], cvm[8 ], cvm[12],\n        //   cvm[1], cvm[5], cvm[9 ], cvm[13],\n        //   cvm[2], cvm[6], cvm[10], cvm[14],\n        //   cvm[3], cvm[7], cvm[11], cvm[15]\n        // );\n\n        convertMatrixFromCameraCesium(camera, camera3js, referenceFrame);\n\n        return camera3js;\n    }\n\n    /**\n     * cesium相机转threejs相机\n     * @param {Cesium.Camera} camera  \n     * @param {THREE.OrthographicCamera} [camera3js] \n     * @param {{\n        *  matrix:Cesium.Matrix4,\n        *  inverseMatrix:Cesium.Matrix4\n        * }} [referenceFrame] \n        * @returns {THREE.OrthographicCamera} camera3js\n        */\n    static toOrthographicCamera3js(camera, camera3js, referenceFrame) {\n\n        referenceFrame = referenceFrame || camera._referenceFrame;\n        var frustum = camera.frustum;\n        if (!camera3js) {\n            if (cameraMap.has(camera)) {\n                camera3js = cameraMap.get(camera);\n            }\n            else {\n                camera3js = new THREE.OrthographicCamera();\n                cameraMap.set(camera, camera3js);\n            }\n        }\n\n        var w = camera.frustum.width, h = w / frustum.aspectRatio;\n        camera3js.right = w / 2;\n        camera3js.left = -w / 2;\n        camera3js.top = h / 2;\n        camera3js.bottom = -h / 2;\n\n        camera3js.near = frustum.near;\n        camera3js.far = frustum.far;\n\n        // let w = camera3js.right - camera3js.left,\n        // h = camera3js.top - camera3js.bottom;\n\n        // frustum.aspectRatio = w / h;\n        // frustum.near = camera3js.near;\n        // frustum.far = camera3js.far;\n        // frustum.width = w;\n\n        camera3js.updateProjectionMatrix();\n\n\n        // var cvm =  camera.viewMatrix;\n        // var civm = camera.inverseViewMatrix;\n        // camera3js.matrixWorld.set(\n        //   civm[0], civm[4], civm[8 ], civm[12],\n        //   civm[1], civm[5], civm[9 ], civm[13],\n        //   civm[2], civm[6], civm[10], civm[14],\n        //   civm[3], civm[7], civm[11], civm[15]\n        // );\n        // camera3js.matrixWorldInverse.set(\n        //   cvm[0], cvm[4], cvm[8 ], cvm[12],\n        //   cvm[1], cvm[5], cvm[9 ], cvm[13],\n        //   cvm[2], cvm[6], cvm[10], cvm[14],\n        //   cvm[3], cvm[7], cvm[11], cvm[15]\n        // );\n\n        convertMatrixFromCameraCesium(camera, camera3js, referenceFrame);\n\n        return camera3js;\n    }\n\n\n    /**\n     * threejs's PerspectiveCamera=>cesium's camera\n     * @param {THREE.PerspectiveCamera} camera3js \n      * @param {Cesium.Scene} scene\n     * @param {{\n     *  matrix:Cesium.Matrix4,\n     *  inverseMatrix:Cesium.Matrix4\n     * }} [referenceFrame] \n      * @param {Cesium.Camera} [camera]\n     * @returns {Cesium.Camera} camera  \n     */\n    static fromPerspectiveCamera3js(camera3js, scene, referenceFrame, camera) {\n        const _Cesium = Cesium;\n\n        updateFrustum3js(camera3js);\n\n        referenceFrame = referenceFrame || camera3js._referenceFrame;\n\n        if (!camera) {\n            if (cameraMap.has(camera3js)) {\n                camera = cameraMap.get(camera3js);\n            }\n            else {\n                camera = new _Cesium.Camera(scene);\n                camera.frustum.xOffset = 0;\n                camera.frustum.yOffset = 0;\n                cameraMap.set(camera3js, camera);\n            }\n        }\n\n        //frustum\n        let frustum = camera.frustum;\n        let fovy = _Cesium.Math.toRadians(camera3js.fov);\n\n        frustum.aspectRatio = camera3js.aspect;\n        frustum.near = camera3js.near;\n        frustum.far = camera3js.far;\n        frustum.fov = Math.atan(Math.tan(fovy * 0.5) * frustum.aspectRatio) * 2.0;\n\n        //viewMatrix,inverseViewMatrix,position,direction\n\n        convertMatrixFromCamera3js(camera3js, camera, referenceFrame);\n\n        return camera;\n    }\n\n    /**\n     * threejs's PerspectiveCamera=>cesium's camera\n     * @param {THREE.OrthographicCamera} camera3js \n     * @param {Cesium.Scene} scene\n     * @param {{\n        *  matrix:Cesium.Matrix4,\n        *  inverseMatrix:Cesium.Matrix4\n        * }} [referenceFrame] \n      * @param {Cesium.Camera} [camera]\n        * @returns {Cesium.Camera} camera  \n        */\n    static fromOrthographicCamera3js(camera3js, scene, referenceFrame, camera) {\n        const { Camera, OrthographicFrustum } = Cesium;\n\n        updateFrustum3js(camera3js);\n\n        referenceFrame = referenceFrame || camera3js._referenceFrame;\n\n        if (!camera) {\n            if (cameraMap.has(camera3js)) {\n                camera = cameraMap.get(camera3js);\n            }\n            else {\n                camera = new Camera(scene);\n                camera.frustum = new OrthographicFrustum()\n                cameraMap.set(camera3js, camera);\n            }\n        }\n\n        //frustum\n        /**\n         * @type {Cesium.OrthographicFrustum}\n         * @private\n         */\n        let frustum = camera.frustum;\n        let w = camera3js.right - camera3js.left,\n            h = camera3js.top - camera3js.bottom;\n\n        frustum.aspectRatio = w / h;\n        frustum.near = camera3js.near || 1e-16;\n        frustum.far = camera3js.far;\n        frustum.width = w;\n\n        //viewMatrix,inverseViewMatrix,position,direction\n\n        convertMatrixFromCamera3js(camera3js, camera, referenceFrame);\n\n        return camera;\n    }\n}\n\n\nvar cvm, civm, _cacheCameraTarget, _cacheCameraRotationMatrix, _cacheCameraRotationMatrix4;\nvar cameraMap = new WeakMap(), frustumMap = new WeakMap();\nvar _cacheCameraPosition, _cacheCameraDirection;\nvar _cacheDirInverse = {\n    x: 0, y: 1, z: 0\n};\nvar _cacheCameraProjScreenMatrix, _cacheCameraViewMatrix, _cacheCameraInverseViewMatrix;\n\nfunction _getCacheCamera3jsProjScreenMatrix(camera) {\n\n    if (!_cacheCameraProjScreenMatrix) _cacheCameraProjScreenMatrix = new THREE.Matrix4();\n    _cacheCameraProjScreenMatrix.multiplyMatrices(camera.projectionMatrix, camera.matrixWorldInverse);\n\n    return _cacheCameraProjScreenMatrix;\n}\n\n\n\n/**\n * \n * @param {THREE.PerspectiveCamera|THREE.OrthographicCamera} camera3js \n * @param {Cesium.Camera} camera \n * @param {*} referenceFrame \n * @private\n */\nfunction convertMatrixFromCamera3js(camera3js, camera, referenceFrame) {\n    const { Matrix4, Cartesian3, Matrix3 } = Cesium;\n\n    polyfill();\n\n    //viewMatrix&inverseViewMatrix\n\n    let matrixWorld = camera3js.matrixWorld.elements,\n        matrixWorldInverse = camera3js.matrixWorldInverse.elements;\n\n    //  setMatrix\n\n    if (!_cacheCameraViewMatrix) {\n        _cacheCameraViewMatrix = new Matrix4()\n        _cacheCameraInverseViewMatrix = new Matrix4()\n        _cacheCameraPosition = new Cartesian3();\n        _cacheCameraDirection = new Cartesian3();\n    }\n\n    if (referenceFrame && referenceFrame.matrix) {\n        camera3js.modelMatrix = Matrix4.multiply(referenceFrame.matrix, matrixWorld, camera3js.modelMatrix || new Matrix4());\n\n        Matrix4.clone(camera3js.modelMatrix, _cacheCameraInverseViewMatrix);\n        Matrix4.inverse(camera3js.modelMatrix, _cacheCameraViewMatrix);\n    } else {\n        Matrix4.clone(matrixWorldInverse, _cacheCameraViewMatrix);\n        Matrix4.clone(matrixWorld, _cacheCameraInverseViewMatrix);\n    }\n\n    //position and direction\n    // Matrix4.getTranslation(_cacheCameraInverseViewMatrix, camera.position);\n    // var rotMat = new Matrix3();\n    // Matrix4.getMatrix3(_cacheCameraInverseViewMatrix, rotMat);\n    // Matrix3.getColumn(rotMat, 0, camera.direction);\n    // Matrix3.getColumn(rotMat, 2, camera.up);\n    // Cartesian3.cross(camera.direction, camera.up, camera.right);\n    // camera._adjustOrthographicFrustum(true);\n\n    Matrix4.getTranslation(_cacheCameraInverseViewMatrix, _cacheCameraPosition);\n    if (camera3js.isOrthographicCamera || !Cartesian3.equals(Cartesian3.ZERO, _cacheCameraPosition)) {\n        Matrix4.multiplyByPoint(_cacheCameraInverseViewMatrix, _cacheDirInverse, _cacheCameraDirection)\n        Cartesian3.subtract(_cacheCameraDirection, _cacheCameraPosition, _cacheCameraDirection);\n        _cacheCameraPosition.clone(camera.position);\n        _cacheCameraDirection.clone(camera.direction);\n    }\n\n    // Cartesian3.cross(camera.direction, camera.up, camera.right);\n\n    Matrix4.clone(_cacheCameraViewMatrix, camera.viewMatrix);\n    Matrix4.clone(_cacheCameraInverseViewMatrix, camera.inverseViewMatrix);\n\n    //custom projectionMatrix\n    if (!Matrix4.equals(camera.frustum.projectionMatrix, camera3js.projectionMatrix.elements)) {\n        let customCamera = camera.customCamera || {}\n        customCamera.projectionMatrix = Matrix4.clone(\n            camera3js.projectionMatrix.elements, customCamera.projectionMatrix\n        );\n        camera.customCamera = customCamera;\n    } else {\n        camera.customCamera = undefined\n    }\n\n}\n\n/**\n * \n * @param {*} camera \n * @param {THREE.Camera} camera3js \n * @param {*} referenceFrame\n * @private \n */\nfunction convertMatrixFromCameraCesium(camera, camera3js, referenceFrame) {\n    const Matrix4 = Cesium.Matrix4;\n    const matrixWorld = camera3js.matrixWorld;\n    const inverseViewMatrix = camera.inverseViewMatrix;\n\n    polyfill();\n\n    if (Matrix4.equals(inverseViewMatrix, camera3js.modelMatrix)) {\n        return;\n    }\n\n    if (referenceFrame) {\n        if (!referenceFrame.inverseMatrix) {\n            let inverseMatrix = new Matrix4()\n            referenceFrame.inverseMatrix = Matrix4.inverse(referenceFrame.matrix, inverseMatrix);\n        }\n        matrixWorld.multiplyMatrices(referenceFrame.inverseMatrix, inverseViewMatrix)\n\n    } else {\n        matrixWorld.copy(inverseViewMatrix)\n    }\n\n    matrixWorld.decompose(camera3js.position, camera3js.quaternion, camera3js.scale);\n    camera3js.updateMatrixWorld();\n\n    camera3js.modelMatrix = Matrix4.clone(inverseViewMatrix, camera3js.modelMatrix)\n\n    //custom projectionMatrix\n    if (camera.customCamera) {\n        var customCamera = camera.customCamera;\n        if (customCamera.projectionMatrix) {\n            camera3js.projectionMatrix.copy(customCamera.projectionMatrix);\n            camera3js.projectionMatrixInverse.invert(camera3js.projectionMatrix)\n        }\n    }\n\n    //update frustum \n    updateFrustum3js(camera3js);\n\n}\n\nfunction updateFrustum3js(camera3js) {\n    var frustum3js = frustumMap.get(camera3js);\n    if (!frustum3js) {\n        frustum3js = new THREE.Frustum();\n        frustumMap.set(camera3js, frustum3js);\n    }\n\n    var projScreenMatrix = _getCacheCamera3jsProjScreenMatrix(camera3js);\n    frustum3js.setFromProjectionMatrix(projScreenMatrix);\n\n}\n\nexport default CameraUtils;",
    "﻿\n// import { CSG } from '../util/CSG.js' \n// import { simplify_three } from './MeshEditor/ThirdParty/modify.js';\n// import subdivUVNormalized from './TexturePacker.js';\n\n/**\n * \n * @param {Cesium.Cartesian3} pa \n * @param {Cesium.Cartesian3} pb \n * @param {Cesium.Cartesian3} pc \n * @returns {number}\n */\nfunction computeArea(pa, pb, pc) {\n\n    if (!pa || !pb || !pc) {\n        console.warn(pa, pb, pc);\n        return 0;\n    }\n    const Cartesian3 = Cesium.Cartesian3\n    let a = Cartesian3.distance(pa, pb);\n    let b = Cartesian3.distance(pb, pc);\n    let c = Cartesian3.distance(pa, pc);\n\n    let p = (a + b + c) / 2, S = Math.sqrt(p * (p - a) * (p - b) * (p - c))\n    return S;\n}\n\n/**\n*\n*@constructor \n*/\nfunction GeometryUtils() { }\n\nfunction getAttrs(geo) {\n    var attrNames = [];\n\n    for (var name in geo.attributes) {\n        if (geo.attributes.hasOwnProperty(name) && geo.attributes[name]) {\n            attrNames.push(name);\n        }\n    }\n    return attrNames\n}\n\nvar Matrix3, Matrix4, Cartesian3, Cartesian2, BoundingSphere, GeometryAttribute, ComponentDatatype;\n\nvar scratchPosition;//= new Cesium.Cartesian3();\nvar scratchMatrix4;//= new Cesium.Matrix4();\nvar scratchRotation;//= new Cesium.Matrix3();\nvar scratchOffset;//= new Cesium.Cartesian3();\nvar _scratchCB, _scratchAB;\nvar constantsHasInit = false;\nfunction initConstants$GeometryUtils() {\n    if (constantsHasInit) return;\n    constantsHasInit = true;\n\n    const _Cesium = Cesium;\n    Matrix3 = _Cesium.Matrix3;\n    Matrix4 = _Cesium.Matrix4;\n    Cartesian3 = _Cesium.Cartesian3;\n    Cartesian2 = _Cesium.Cartesian2;\n    BoundingSphere = _Cesium.BoundingSphere;\n    GeometryAttribute = _Cesium.GeometryAttribute;\n    ComponentDatatype = _Cesium.ComponentDatatype;\n\n    scratchPosition = new Cartesian3();\n    scratchMatrix4 = new Matrix4();\n    scratchRotation = new Matrix3();\n    scratchOffset = new Cartesian3();\n    _scratchCB = new Cartesian3();\n    _scratchAB = new Cartesian3();\n\n}\n/**\n * \n * @param {THREE.BufferGeometry} bufferGeometry3js \n * @param {number}materialIndexOrGroupIndex\n * @param {boolean}[groupOptimized]\n * @returns {THREE.BufferGeometry}\n */\nfunction extractGeometry(bufferGeometry3js, materialIndexOrGroupIndex, groupOptimized) {\n    const geometry = bufferGeometry3js;\n    const srcAttributes = geometry.attributes;\n    const newGeometry = new THREE.BufferGeometry();\n\n    var indices = genGeometryIndices(bufferGeometry3js, materialIndexOrGroupIndex, groupOptimized);\n\n    for (const name in srcAttributes) {\n        const attribute = srcAttributes[name];\n        const itemSize = attribute.itemSize;\n        const srcArray = attribute.array;\n        const normalized = attribute.normalized;\n        const dstArray = new srcArray.constructor(indices.length * itemSize);\n        var idx = 0;\n        for (let i = 0; i < indices.length; i++) {\n            const ptr = indices[i] * itemSize;\n            for (let j = 0; j < itemSize; j++) {\n                dstArray[idx++] = srcArray[ptr + j];\n            }\n        }\n        const newAttribute = new THREE.BufferAttribute(dstArray, itemSize, normalized)\n        newGeometry.setAttribute(name, newAttribute);\n    }\n\n    indices = null;\n\n    return newGeometry;\n\n}\nGeometryUtils.extractGeometry = extractGeometry\n\n/**\n * \n * @param {THREE.BufferGeometry} bufferGeometry3js \n * @param {number}materialIndexOrGroupIndex\n * @param {boolean}[groupOptimized]\n * @returns {number[]}\n */\nfunction genGeometryIndices(bufferGeometry3js, materialIndexOrGroupIndex, groupOptimized) {\n    const geometry = bufferGeometry3js;\n    const position = geometry.attributes.position;\n    const groups = geometry.groups;\n    const drawRange = geometry.drawRange;\n\n    var index = geometry.index, indices = [], vertCount = position.count;\n\n    if (index) {\n        // indexed buffer geometry\n\n        if (groups && groups.length > 0) {\n\n            for (let i = 0, il = groups.length; i < il; i++) {\n\n                const group = groups[i];\n                if (!groupOptimized) {\n                    if (i != materialIndexOrGroupIndex) continue;\n                }\n                else if (group.materialIndex != materialIndexOrGroupIndex) continue;\n\n                const start = Math.max(group.start, drawRange.start);\n                const end = Math.min(index.count, (group.start + group.count), (drawRange.start + drawRange.count));\n\n                for (let j = start, jl = end; j < jl; j += 3) {\n\n                    const a = index.getX(j);\n                    const b = index.getX(j + 1);\n                    const c = index.getX(j + 2);\n\n                    indices.push(a, b, c);\n                }\n\n            }\n\n        } else {\n\n            const start = Math.max(0, drawRange.start);\n            const end = Math.min(index.count, (drawRange.start + drawRange.count));\n\n            for (let i = start, il = end; i < il; i += 3) {\n\n                const a = index.getX(i);\n                const b = index.getX(i + 1);\n                const c = index.getX(i + 2);\n\n                indices.push(a, b, c);\n            }\n\n        }\n\n    } else {\n        // non-indexed buffer geometry\n\n        if (groups && groups.length > 0) {\n\n            for (let i = 0, il = groups.length; i < il; i++) {\n\n                const group = groups[i];\n                if (!groupOptimized) {\n                    if (i != materialIndexOrGroupIndex) continue;\n                }\n                else if (group.materialIndex != materialIndexOrGroupIndex) continue;\n\n                const start = Math.max(group.start, drawRange.start);\n                const end = Math.min(position.count, (group.start + group.count), (drawRange.start + drawRange.count));\n\n                for (let j = start, jl = end; j < jl; j += 3) {\n\n                    const a = j;\n                    const b = j + 1;\n                    const c = j + 2;\n\n                    indices.push(a, b, c);\n                }\n\n            }\n\n        } else {\n\n            const start = Math.max(0, drawRange.start);\n            const end = Math.min(position.count, (drawRange.start + drawRange.count));\n\n            for (let i = start, il = end; i < il; i += 3) {\n\n                const a = i;\n                const b = i + 1;\n                const c = i + 2;\n\n                indices.push(a, b, c);\n\n            }\n\n        }\n\n    }\n\n    if (vertCount > 65535) indices = new Uint32Array(indices);\n    else if (vertCount > 255) indices = new Uint16Array(indices);\n    else indices = new Uint8Array(indices);\n\n    return indices;\n}\nGeometryUtils.genGeometryIndices = genGeometryIndices;\n\n/**\n * \n * @param {THREE.BufferGeometry} bufferGeometry3js \n * @param {number}materialIndexOrGroupIndex\n * @param {boolean}[groupOptimized]\n * @param {Cesium.BoundingSphere}[boundingSphere]\n * @returns {{boundingSphere:Cesium.BoundingSphere,indices:number[]}}\n */\nfunction computeBoundingSphereAndIndices(bufferGeometry3js, materialIndexOrGroupIndex, groupOptimized, boundingSphere) {\n    initConstants$GeometryUtils();\n    const geometry = bufferGeometry3js;\n    const position = geometry.attributes.position;\n    const positions = position.array;\n    const PositionTypeCtor = positions.constructor;\n    const groups = geometry.groups;\n    const drawRange = geometry.drawRange;\n\n    var index = geometry.index, indices = [], vertCount = position.count;\n\n    if (!groups || groups.length <= 1 || typeof materialIndexOrGroupIndex != 'number') {\n\n        if (!geometry.boundingSphere) geometry.computeBoundingSphere();\n        boundingSphere = BoundingSphere.clone(geometry.boundingSphere, boundingSphere);\n        indices = index && index.array;\n    }\n    else {\n\n        indices = []\n\n        if (index) {\n            // indexed buffer geometry\n\n            for (let i = 0, il = groups.length; i < il; i++) {\n\n                const group = groups[i];\n                if (!groupOptimized) {\n                    if (i != materialIndexOrGroupIndex) continue;\n                }\n                else if (group.materialIndex != materialIndexOrGroupIndex) continue;\n\n                const start = Math.max(group.start, drawRange.start);\n                const end = Math.min(index.count, (group.start + group.count), (drawRange.start + drawRange.count));\n\n                for (let j = start, jl = end; j < jl; j++) {\n\n                    indices.push(index.getX(j));\n                }\n\n            }\n\n            var points = [];\n            for (let i = 0; i < indices.length; i++) {\n                var index = indices[i];\n                var p = Cartesian3.unpack(position.array, index * 3)\n                points.push(p);\n            }\n            boundingSphere = BoundingSphere.fromPoints(points, boundingSphere);\n        }\n        else {\n            // non-indexed buffer geometry \n\n            var boundingSpheres = [];\n\n            for (let i = 0, il = groups.length; i < il; i++) {\n\n                const group = groups[i];\n                if (!groupOptimized) {\n                    if (i != materialIndexOrGroupIndex) continue;\n                }\n                else if (group.materialIndex != materialIndexOrGroupIndex) continue;\n\n                const start = Math.max(group.start, drawRange.start);\n                const end = Math.min(position.count, (group.start + group.count), (drawRange.start + drawRange.count));\n\n                const byteOffset = start * position.itemSize * PositionTypeCtor.BYTES_PER_ELEMENT;\n                const arrayLength = (end - start) * position.itemSize;\n                const vertices = new PositionTypeCtor(positions.buffer, byteOffset, arrayLength);\n\n                var groupBoundingSphere = BoundingSphere.fromVertices(vertices)\n                boundingSpheres.push(groupBoundingSphere)\n\n                for (let j = start, jl = end; j < jl; j++) {\n                    indices.push(j);\n                }\n\n            }\n\n            if (boundingSpheres.length > 0) {\n\n                if (boundingSpheres.length == 1) boundingSphere = BoundingSphere.clone(boundingSpheres[0], boundingSphere)\n                else {\n                    boundingSphere = BoundingSphere.fromBoundingSpheres(boundingSpheres, boundingSphere);\n                }\n            }\n\n        }\n\n    }\n\n    if (indices && !indices.buffer) {\n\n        if (vertCount > 65535) indices = new Uint32Array(indices);\n        else if (vertCount > 255) indices = new Uint16Array(indices);\n        else indices = new Uint8Array(indices);\n\n    }\n\n    return { indices, boundingSphere };\n}\nGeometryUtils.computeBoundingSphereAndIndices = computeBoundingSphereAndIndices\n\n/**\n*点绕x轴旋转，修改顶点坐标\n*@param {Cesium.Cartesian3}point\n*@param {Number}angle 弧度\n*/\nGeometryUtils.pointRotateX = function (point, angle) {\n    initConstants$GeometryUtils();\n    // const { Matrix3, Matrix4, Cartesian3 } = Cesium;\n    Matrix3.fromRotationX(angle, scratchRotation);\n    Matrix4.fromRotationTranslation(scratchRotation, Cartesian3.ZERO, scratchMatrix4);\n    Matrix4.multiplyByPoint(scratchMatrix4, point, point);\n}\n\n/**\n*点绕y轴旋转，修改顶点坐标\n*@param {Cesium.Cartesian3}point\n*@param {Number}angle 弧度\n*/\nGeometryUtils.pointRotateY = function (point, angle) {\n    initConstants$GeometryUtils();\n\n    Matrix3.fromRotationY(angle, scratchRotation);\n    Matrix4.fromRotationTranslation(scratchRotation, Cartesian3.ZERO, scratchMatrix4);\n    Matrix4.multiplyByPoint(scratchMatrix4, point, point);\n}\n\n/**\n*点绕z轴旋转，修改顶点坐标\n*@param {Cesium.Cartesian3}point\n*@param {Number}angle 弧度\n*/\nGeometryUtils.pointRotateZ = function (point, angle) {\n    initConstants$GeometryUtils();\n\n    Matrix3.fromRotationZ(angle, scratchRotation);\n    Matrix4.fromRotationTranslation(scratchRotation, Cartesian3.ZERO, scratchMatrix4);\n    Matrix4.multiplyByPoint(scratchMatrix4, point, point);\n}\n\n/**\n*绕x轴旋转，修改顶点坐标\n*@param {Cesium.Geometry}geometry\n*@param {Number}angle 弧度\n*/\nGeometryUtils.rotateX = function (geometry, angle) {\n    initConstants$GeometryUtils();\n\n    var positions = geometry.attributes.position.values;\n\n    Matrix3.fromRotationX(angle, scratchRotation);\n    Matrix4.fromRotationTranslation(scratchRotation, Cartesian3.ZERO, scratchMatrix4);\n\n    for (var i = 0; i < positions.length; i += 3) {\n        scratchPosition.x = positions[i];\n        scratchPosition.y = positions[i + 1];\n        scratchPosition.z = positions[i + 2];\n        Matrix4.multiplyByPoint(scratchMatrix4, scratchPosition, scratchPosition);\n        positions[i] = scratchPosition.x;\n        positions[i + 1] = scratchPosition.y;\n        positions[i + 2] = scratchPosition.z;\n    }\n\n}\n/**\n*绕y轴旋转，修改顶点坐标\n*@param {Cesium.Geometry}geometry\n*@param {Number}angle 弧度\n*/\nGeometryUtils.rotateY = function (geometry, angle) {\n    initConstants$GeometryUtils();\n\n    var positions = geometry.attributes.position.values;\n\n    Matrix3.fromRotationY(angle, scratchRotation);\n    Matrix4.fromRotationTranslation(scratchRotation, Cartesian3.ZERO, scratchMatrix4);\n\n    for (var i = 0; i < positions.length; i += 3) {\n        scratchPosition.x = positions[i];\n        scratchPosition.y = positions[i + 1];\n        scratchPosition.z = positions[i + 2];\n        Matrix4.multiplyByPoint(scratchMatrix4, scratchPosition, scratchPosition);\n        positions[i] = scratchPosition.x;\n        positions[i + 1] = scratchPosition.y;\n        positions[i + 2] = scratchPosition.z;\n    }\n\n}\n\n/**\n*绕z轴旋转，修改顶点坐标\n*@param {Cesium.Geometry}geometry\n*@param {Number}angle 弧度\n*/\nGeometryUtils.rotateZ = function (geometry, angle) {\n    initConstants$GeometryUtils();\n\n    var positions = geometry.attributes.position.values;\n\n    Matrix3.fromRotationZ(angle, scratchRotation);\n    Matrix4.fromRotationTranslation(scratchRotation, Cartesian3.ZERO, scratchMatrix4);\n\n    for (var i = 0; i < positions.length; i += 3) {\n        scratchPosition.x = positions[i];\n        scratchPosition.y = positions[i + 1];\n        scratchPosition.z = positions[i + 2];\n        Matrix4.multiplyByPoint(scratchMatrix4, scratchPosition, scratchPosition);\n        positions[i] = scratchPosition.x;\n        positions[i + 1] = scratchPosition.y;\n        positions[i + 2] = scratchPosition.z;\n    }\n\n}\n\n/**\n * \n * @param {number[]} positions \n * @param {number} index \n * @returns {boolean}\n */\nGeometryUtils.isValidVertex = function (positions, index) {\n    index = index * 3;\n    return !isNaN(positions[index])//x\n        && !isNaN(positions[index + 1])//y\n        && !isNaN(positions[index + 2])//z\n}\n\n/**\n * \n * @param {number[]} positions \n * @param {number} a \n * @param {number} b \n * @param {number} c\n * @returns {boolean}\n */\nGeometryUtils.isValidTriangle = function (positions, a, b, c) {\n    let result = this.isValidVertex(positions, a)\n        && this.isValidVertex(positions, b)\n        && this.isValidVertex(positions, c);\n\n    a = Cartesian3.unpack(positions, a * 3);\n    b = Cartesian3.unpack(positions, b * 3);\n    c = Cartesian3.unpack(positions, c * 3);\n    var ba = Cartesian3.subtract(b, a, new Cartesian3())\n    var ca = Cartesian3.subtract(c, a, new Cartesian3())\n    var n = Cartesian3.cross(ba, ca, new Cartesian3())\n    if (Cartesian3.equals(n, Cartesian3.ZERO)) {\n        debugger\n        result = false;\n    }\n    return result;\n}\n\n/**\n * 删除位置坐标有NaN的顶点，返回新的几何体\n * @param {THREE.BufferGeometry} geometry \n * @returns {THREE.BufferGeometry} newGeometry\n */\nGeometryUtils.removeInvalidVertices = function (geometry) {\n    if (!geometry.isBufferGeometry) {\n        console.warn('unsupport geometry type');\n        return geometry\n    }\n    let newGeometry = geometry.clone(),\n        srcAttributes = geometry.attributes,\n        dstAttributes = newGeometry.attributes;\n\n    let attrNames = [];\n\n    for (const name in dstAttributes) {\n        if (dstAttributes.hasOwnProperty(name) && dstAttributes[name]) {\n            const att = dstAttributes[name];\n            let srcType = att.array.constructor;\n            att.array = [];\n            att.array._srcType = srcType;\n            attrNames.push(name);\n        }\n    }\n\n    function addVertex(index) {\n        attrNames.forEach(name => {\n            let src = srcAttributes[name], dst = dstAttributes[name];\n            let itemSize = src.itemSize,\n                start = itemSize * index;\n\n            for (let i = 0; i < itemSize; i++) {\n                dst.array.push(src.array[start + i])\n            }\n\n        })\n    }\n\n    function addTriangle(a, b, c) {\n\n        addVertex(a)\n        addVertex(b)\n        addVertex(c)\n    }\n\n    let positions = geometry.attributes.position, vertexCount = positions.count;\n\n    positions = positions.array || positions.values;\n\n    if (geometry.index) {\n        let indices = geometry.index.array;\n        for (let i = 0; i < indices.length; i += 3) {\n            const a = indices[i], b = indices[i + 1], c = indices[i + 2];\n            if (this.isValidTriangle(positions, a, b, c)) {\n                addTriangle(a, b, c)\n            }\n        }\n\n    } else {\n\n        for (let i = 0; i < vertexCount; i += 3) {\n            const a = i, b = i + 1, c = i + 2;\n            if (this.isValidTriangle(positions, a, b, c)) {\n                addTriangle(a, b, c)\n            }\n        }\n    }\n\n    for (const name in dstAttributes) {\n        if (dstAttributes.hasOwnProperty(name) && dstAttributes[name]) {\n            const att = dstAttributes[name];\n            let srcType = att.array._srcType;\n            att.array = new srcType(att.array);\n            att.count = att.array.length / att.itemSize;\n            delete att.array._srcType;\n\n        }\n    }\n\n    return newGeometry;\n}\n\n/**\n * 将几何体强制使用索引，以期减少几何内存占用，如果几何体的groups.length大于1，则返回undefined\n * @param {THREE.BufferGeometry} geometry \n * @param {boolean}[removeUv2=false]\n * @param {boolean}[removeUv3=true]\n * @returns {undefined|THREE.BufferGeometry} newGeometry\n */\nGeometryUtils.forceIndices = function (geometry, removeUv2, removeUv3) {\n    if (typeof THREE == 'undefined') {\n        throw new Error('强制索引功能依赖threejs，但是上下文未找到THREE模块 ')\n    }\n\n    if (geometry.index) {\n        console.warn('该几何已有索引');\n        return\n    }\n\n    if (geometry.groups && geometry.groups.length > 1) {\n        console.warn('该几何无法强制使用索引');\n        return;\n    }\n\n    if (typeof removeUv3 == 'undefined') removeUv3 = true;\n\n    let indices = [], map = new Map();\n    let srcAttributes = geometry.attributes\n    let positions = srcAttributes.position;\n    let srcCount = positions.count;\n    positions = positions.array;\n\n    let newGeometry = geometry.clone(),\n        dstAttributes = newGeometry.attributes,\n        attrNames = [];\n\n\n    for (const name in dstAttributes) {\n        if ((removeUv3 && name == 'uv3')\n            || (removeUv2 && name == 'uv2')) {\n            delete dstAttributes[name]\n            continue;\n        }\n\n        if (dstAttributes.hasOwnProperty(name) && dstAttributes[name]) {\n            const att = dstAttributes[name];\n            let srcType = att.array.constructor;\n            att.array = [];\n            att.array._srcType = srcType;\n            attrNames.push(name);\n        }\n    }\n\n    let newIndex = 0;\n    function addVertex(index) {\n\n        let code = [positions[index * 3], positions[index * 3 + 1], positions[index * 3 + 2]].join(',')\n        if (dstAttributes.uv) {\n            let uv = srcAttributes.uv.array;\n            code += ',' + [uv[index * 2], uv[index * 2 + 1]].join(',')\n        }\n        if (dstAttributes.uv2) {\n            let uv2 = srcAttributes.uv2.array;\n            code += ',' + [uv2[index * 2], uv2[index * 2 + 1]].join(',')\n        }\n\n        if (!map.has(code)) {\n            attrNames.forEach(name => {\n                let src = srcAttributes[name], dst = dstAttributes[name];\n                let itemSize = src.itemSize,\n                    start = itemSize * index;\n\n                for (let i = 0; i < itemSize; i++) {\n                    dst.array.push(src.array[start + i])\n                }\n\n            });\n\n            map.set(code, newIndex);\n            newIndex++;\n        }\n\n        return map.get(code)\n    }\n\n    for (let i = 0; i < srcCount; i++) {\n        let idx = addVertex(i);\n        indices.push(idx);\n    }\n    if (newIndex > 65535) {\n        indices = new Uint32Array(indices)\n    } else if (newIndex > 255) {\n        indices = new Uint16Array(indices)\n    } else {\n        indices = new Uint8Array(indices);\n    }\n\n    map.clear();\n\n    newGeometry.groups = [{\n        start: 0, count: Infinity, materialIndex: 0\n    }];\n    newGeometry.index = new THREE.BufferAttribute(indices, 1, false)\n\n    for (const name in dstAttributes) {\n        if (dstAttributes.hasOwnProperty(name) && dstAttributes[name]) {\n            const att = dstAttributes[name];\n            let srcType = att.array._srcType;\n            att.array = new srcType(att.array);\n            att.count = att.array.length / att.itemSize;\n            delete att.array._srcType;\n\n        }\n    }\n    return newGeometry\n\n}\n\nfunction minmax(arr, offset, stride) {\n    offset = offset || 0;\n    stride = stride || 1;\n    let min = Number.MAX_VALUE, max = -Number.MAX_VALUE;\n    for (let i = offset; i < arr.length; i += stride) {\n        const v = arr[i];\n        if (isNaN(v) || v == Infinity || v == -Infinity) continue;\n        min = Math.min(min, v);\n        max = Math.max(max, v);\n    }\n    return { min, max }\n}\n\n/**\n * \n * @param {THREE.BufferGeometry} geometry \n * @returns {THREE.BufferGeometry}geometry\n */\nGeometryUtils.clampToIndices = function (geometry) {\n    if (geometry.index) {\n        // geometry = geometry.clone();\n        let index = geometry.index.array;\n        let { max } = minmax(index);\n\n        let atts = geometry.attributes;\n        for (const key in atts) {\n            if (atts.hasOwnProperty(key)) {\n                let { array, itemSize, count } = atts[key];\n                if (count == max + 1) continue;\n\n                let end = itemSize * (max + 1) * array.constructor.BYTES_PER_ELEMENT;\n                let buffer = array.buffer.slice(0, end);\n                array = new array.constructor(buffer);\n                atts[key].array = array;\n            }\n        }\n    }\n    return geometry\n}\n/**\n * \n * @param {Cesium.Geometry|THREE.BufferGeometry} geometry \n * @returns {boolean}\n */\nGeometryUtils.computeSurfaceArea = function (geometry) {\n    if (!(geometry instanceof Cesium.Geometry) && !geometry.isBufferGeometry) {\n        console.warn('unsupport geometry type');\n        return -1;\n    }\n    let positions = geometry.attributes.position;\n    let indices = geometry.indices || geometry.index;\n    if (indices) indices = indices.array || indices;\n\n    positions = positions.array || positions.values;\n    positions = Cartesian3.unpackArray(positions);\n\n    let area = 0;\n    if (indices) {\n\n        for (let i = 0; i < indices.length; i += 3) {\n            const a = indices[i], b = indices[i + 1], c = indices[i + 2];\n            area += computeArea(positions[a], positions[b], positions[c])\n\n        }\n    } else {\n        for (let i = 0; i < positions.length; i += 3) {\n            const a = positions[i], b = positions[i + 1], c = positions[i + 2];\n            area += computeArea(a, b, c)\n\n        }\n    }\n    return area;\n}\n\n/**\n * \n * @param {THREE.BufferGeometry} a \n * @param {THREE.BufferGeometry} b \n * @returns {boolean}\n */\nGeometryUtils.geometryEquals = function (a, b) {\n    a = a.attributes.position.array;\n    b = b.attributes.position.array;\n\n    let eq = a.length == b.length;\n    if (eq) {\n        let l = a.length;\n        for (let i = 0; i < l; i++) {\n            if (a[i] != b[i]) {\n                eq = false;\n                break;\n            }\n        }\n    }\n\n    return eq;\n}\n\n/**\n * \n * @param {THREE.Geometry} geometry \n * @param {number} simplifyFactor \n * @param {{\n        agressiveness: number,\n        update: number,\n        recompute: boolean\n * }}[options]\n */\nGeometryUtils.simplify = function (geometry, simplifyFactor, options) {\n    if (typeof THREE == 'undefined') {\n        throw new Error('模型简化功能依赖threejs，但是上下文未找到THREE模块 ')\n    }\n    if (!simplifyFactor) {\n        throw new Error('缺少参数simplifyFactor')\n    }\n\n    let srcCount = geometry.attributes.position.count;\n    let target_count = simplifyFactor * srcCount;\n\n    geometry = simplify_three(geometry, target_count, options)\n\n    let dstCount = geometry.attributes.position.count;\n\n    let delt = dstCount - srcCount\n    if (delt < 0) {\n\n        let positions = geometry.attributes.position.array;\n        let isValid = true;\n        for (let i = 0; i < dstCount; i++) {\n            if (!this.isValidVertex(positions, i)) {\n                isValid = false;\n                break;\n            }\n        }\n        if (!isValid) {\n            geometry = GeometryUtils.removeInvalidVertices(geometry)\n        }\n    }\n\n    return geometry;\n}\n// GeometryUtils.subdivUVNormalized = subdivUVNormalized;\nvar triangulate = (function () {\n    //src:http://turfjs.org/docs/#tin\n\n    var Triangle = /** @class */ (function () {\n        function Triangle(a, b, c) {\n            this.a = a;\n            this.b = b;\n            this.c = c;\n            var A = b.x - a.x;\n            var B = b.y - a.y;\n            var C = c.x - a.x;\n            var D = c.y - a.y;\n            var E = A * (a.x + b.x) + B * (a.y + b.y);\n            var F = C * (a.x + c.x) + D * (a.y + c.y);\n            var G = 2 * (A * (c.y - b.y) - B * (c.x - b.x));\n            var dx;\n            var dy;\n            // If the points of the triangle are collinear, then just find the\n            // extremes and use the midpoint as the center of the circumcircle.\n            this.x = (D * E - B * F) / G;\n            this.y = (A * F - C * E) / G;\n            dx = this.x - a.x;\n            dy = this.y - a.y;\n            this.r = dx * dx + dy * dy;\n        }\n        return Triangle;\n    }());\n    function byX(a, b) {\n        return b.x - a.x;\n    }\n    function dedup(edges) {\n        var j = edges.length;\n        var a;\n        var b;\n        var i;\n        var m;\n        var n;\n        outer: while (j) {\n            b = edges[--j];\n            a = edges[--j];\n            i = j;\n            while (i) {\n                n = edges[--i];\n                m = edges[--i];\n                if ((a === m && b === n) || (a === n && b === m)) {\n                    edges.splice(j, 2);\n                    edges.splice(i, 2);\n                    j -= 2;\n                    continue outer;\n                }\n            }\n        }\n    }\n    /**\n     * \n     * @param {(Cesium.Cartesian2|THREE.Vector2)[]} vertices \n     */\n    function triangulate(vertices) {\n        // Bail if there aren't enough vertices to form any triangles.\n        if (vertices.length < 3) {\n            return [];\n        }\n        // Ensure the vertex array is in order of descending X coordinate\n        // (which is needed to ensure a subquadratic runtime), and then find\n        // the bounding box around the points.\n        vertices.sort(byX);\n        var i = vertices.length - 1;\n        var xmin = vertices[i].x;\n        var xmax = vertices[0].x;\n        var ymin = vertices[i].y;\n        var ymax = ymin;\n        var epsilon = 1e-12;\n        var a;\n        var b;\n        var c;\n        var A;\n        var B;\n        var G;\n        while (i--) {\n            if (vertices[i].y < ymin) {\n                ymin = vertices[i].y;\n            }\n            if (vertices[i].y > ymax) {\n                ymax = vertices[i].y;\n            }\n        }\n        // Find a supertriangle, which is a triangle that surrounds all the\n        // vertices. This is used like something of a sentinel value to remove\n        // cases in the main algorithm, and is removed before we return any\n        // results.\n        // Once found, put it in the \"open\" list. (The \"open\" list is for\n        // triangles who may still need to be considered; the \"closed\" list is\n        // for triangles which do not.)\n        var dx = xmax - xmin;\n        var dy = ymax - ymin;\n        var dmax = (dx > dy) ? dx : dy;\n        var xmid = (xmax + xmin) * 0.5;\n        var ymid = (ymax + ymin) * 0.5;\n        var open = [\n            new Triangle({\n                __sentinel: true,\n                x: xmid - 20 * dmax,\n                y: ymid - dmax,\n            }, {\n                __sentinel: true,\n                x: xmid,\n                y: ymid + 20 * dmax,\n            }, {\n                __sentinel: true,\n                x: xmid + 20 * dmax,\n                y: ymid - dmax,\n            })\n        ];\n        var closed = [];\n        var edges = [];\n        var j;\n        // Incrementally add each vertex to the mesh.\n        i = vertices.length;\n        while (i--) {\n            // For each open triangle, check to see if the current point is\n            // inside it's circumcircle. If it is, remove the triangle and add\n            // it's edges to an edge list.\n            edges.length = 0;\n            j = open.length;\n            while (j--) {\n                // If this point is to the right of this triangle's circumcircle,\n                // then this triangle should never get checked again. Remove it\n                // from the open list, add it to the closed list, and skip.\n                dx = vertices[i].x - open[j].x;\n                if (dx > 0 && dx * dx > open[j].r) {\n                    closed.push(open[j]);\n                    open.splice(j, 1);\n                    continue;\n                }\n                // If not, skip this triangle.\n                dy = vertices[i].y - open[j].y;\n                if (dx * dx + dy * dy > open[j].r) {\n                    continue;\n                }\n                // Remove the triangle and add it's edges to the edge list.\n                edges.push(open[j].a, open[j].b, open[j].b, open[j].c, open[j].c, open[j].a);\n                open.splice(j, 1);\n            }\n            // Remove any doubled edges.\n            dedup(edges);\n            // Add a new triangle for each edge.\n            j = edges.length;\n            while (j) {\n                b = edges[--j];\n                a = edges[--j];\n                c = vertices[i];\n                // Avoid adding colinear triangles (which have error-prone\n                // circumcircles)\n                A = b.x - a.x;\n                B = b.y - a.y;\n                G = 2 * (A * (c.y - b.y) - B * (c.x - b.x));\n                if (Math.abs(G) > epsilon) {\n                    open.push(new Triangle(a, b, c));\n                }\n            }\n        }\n        // Copy any remaining open triangles to the closed list, and then\n        // remove any triangles that share a vertex with the supertriangle.\n        Array.prototype.push.apply(closed, open);\n        i = closed.length;\n        while (i--) {\n            if (closed[i].a.__sentinel ||\n                closed[i].b.__sentinel ||\n                closed[i].c.__sentinel) {\n                closed.splice(i, 1);\n            }\n        }\n        return closed;\n    }\n    return triangulate;\n})();\nGeometryUtils.triangulate = triangulate;\n\n/**\n * \n * @param {Cesium.Cartesian3} p1 \n * @param {Cesium.Cartesian3} p2 \n * @param {Cesium.Cartesian3} p3 \n * @param {Cesium.Cartesian3} [result] \n */\nfunction computeNormal(pA, pB, pC, result, normalized) {\n    initConstants$GeometryUtils();\n    if (!result) {\n        result = new Cartesian3()\n    }\n    Cartesian3.subtract(pC, pB, _scratchCB);\n    Cartesian3.subtract(pA, pB, _scratchAB);\n    Cartesian3.cross(_scratchCB, _scratchAB, result);\n    var magnitude = Cartesian3.magnitude(result);\n    if (magnitude != 0 && normalized != false) Cartesian3.normalize(result, result);\n    return result;\n}\nGeometryUtils.computeNormal = computeNormal\n\n/**\n*\n*@param {Cesium.Geometry}geometry\n*/\nGeometryUtils.computeVertexNormals = function (geometry) {\n    initConstants$GeometryUtils()\n\n    // const _Cesium = Cesium;\n    var indices = geometry.indices;\n    var attributes = geometry.attributes;\n\n    if (attributes.position) {\n\n        var positions = attributes.position.values;\n\n        var il = indices ? indices.length : positions.length / 3;\n\n        if (attributes.normal === undefined) {\n            attributes.normal = new GeometryAttribute({\n                componentDatatype: ComponentDatatype.FLOAT,\n                componentsPerAttribute: 3,\n                values: new Float32Array(positions.length)\n            })\n\n        } else {\n\n            // reset existing normals to zero\n\n            var array = attributes.normal.values;\n\n            if (!indices) {\n                for (var i = 0; i < il; i++) {\n\n                    array[i] = 0;\n\n                }\n            } else {\n                var pi;\n                for (var i = 0; i < il; i++) {\n                    pi = indices[i]\n                    array[pi * 3] = 0;\n                    array[pi * 3 + 1] = 0;\n                    array[pi * 3 + 2] = 0;\n\n                }\n            }\n\n        }\n\n        var normals = attributes.normal.values;\n\n        var vA, vB, vC;\n\n        var pA = new Cartesian3(), pB = new Cartesian3(), pC = new Cartesian3();\n        var cb = new Cartesian3(), ab = new Cartesian3();\n\n        for (var i = 0; i < il; i += 3) {\n\n            vA = indices ? indices[i + 0] * 3 : i * 3;\n            vB = indices ? indices[i + 1] * 3 : (i + 1) * 3;\n            vC = indices ? indices[i + 2] * 3 : (i + 2) * 3;\n\n            Cartesian3.fromArray(positions, vA, pA);\n            Cartesian3.fromArray(positions, vB, pB);\n            Cartesian3.fromArray(positions, vC, pC);\n\n            Cartesian3.subtract(pC, pB, cb);\n            Cartesian3.subtract(pA, pB, ab);\n            Cartesian3.cross(cb, ab, cb);\n\n            normals[vA] += cb.x;\n            normals[vA + 1] += cb.y;\n            normals[vA + 2] += cb.z;\n\n            normals[vB] += cb.x;\n            normals[vB + 1] += cb.y;\n            normals[vB + 2] += cb.z;\n\n            normals[vC] += cb.x;\n            normals[vC + 1] += cb.y;\n            normals[vC + 2] += cb.z;\n\n        }\n\n        normalizeNormals(geometry);\n\n        attributes.normal.needsUpdate = true;\n\n    }\n\n    return geometry;\n}\nfunction normalizeNormals(geometry) {\n\n    var normals = geometry.attributes.normal.values;\n\n    var x, y, z, n;\n\n    for (var i = 0; i < normals.length; i += 3) {\n\n        x = normals[i];\n        y = normals[i + 1];\n        z = normals[i + 2];\n\n        n = 1.0 / Math.sqrt(x * x + y * y + z * z);\n\n        normals[i] = x * n;\n        normals[i + 1] = y * n;\n        normals[i + 2] = z * n;\n    }\n\n}\n\n/**\n*合并两个或两个以上图形类型（primitiveType），属性数量、名称以及属性值的类型（GeometryAttribute的componentDatatype、componentsPerAttribute等）都一致的几何体\n*@param {Array<Cesium.Geometry>}geometries \n*@return {Cesium.Geometry}\n*/\nGeometryUtils.mergeGeometries = function (geometries) {\n    if (!geometries || !geometries.length) {\n        throw new Error(\"缺少geometries参数\");\n    }\n\n    if (geometries.length == 1) {\n        return geometries[0];\n    }\n    var geometriesAttrs = [];\n\n    var lengthChanged = false;\n    var primitiveTypeChanged = false;\n    var primitiveType = geometries[0].primitiveType;\n    for (var i = 0; i < geometries.length; i++) {\n\n        geometriesAttrs[i] = getAttrs(geometries[i]);\n        if (i > 0) {\n            if (primitiveType != geometries[i].primitiveType) {\n                primitiveTypeChanged = true;\n                break;\n            }\n            var lastGeoAttrs = geometriesAttrs[i - 1];\n            lengthChanged = lastGeoAttrs.length != geometriesAttrs[i].length;\n            if (!lengthChanged) {\n\n                for (var j = 0; j < lastGeoAttrs.length; j++) {\n                    if (lastGeoAttrs[j] != geometriesAttrs[i][j]) {\n                        lengthChanged = true;\n                        break;\n                    }\n\n                }\n            }\n        }\n        primitiveType = geometries[i].primitiveType;\n        if (lengthChanged || primitiveTypeChanged) {\n            break;\n        }\n    }\n    if (primitiveTypeChanged) {\n        throw new Error(\"待合并的几何体中primitiveType属性不完全一致\");\n    }\n    if (lengthChanged) {\n        throw new Error(\"待合并的几何体中属性数量和和名称不完全一致\");\n    }\n    return mergeGeometries(geometries);\n\n}\n\nfunction mergeGeometries(geometries) {\n    if (geometries.length == 1) return geometries[0];\n    var attrNames = [];\n    var valueArrs = [];\n    var valueTypes = [];\n    var valueConstructors = [];\n    var valueComponents = [];\n    var valueNormalizes = [];\n    var valueOffsets = [];\n    var indices = [];\n    var primitiveType;\n    var indexOffst = 0;\n\n    var componentCounts = [];\n\n    var geometry = geometries[0];\n    primitiveType = geometry.primitiveType;\n    for (const attrName in geometry.attributes) {\n        if (geometry.attributes.hasOwnProperty(attrName) && geometry.attributes[attrName]) {\n            const attr = geometry.attributes[attrName];\n            attrNames.push(attrName);\n\n            // valueArrs.push([]);\n\n            valueComponents.push(attr.componentsPerAttribute);\n            valueTypes.push(attr.componentDatatype);\n            valueConstructors.push(attr.values.constructor);\n            valueNormalizes.push(attr.normalize);\n\n            componentCounts.push(0);\n            valueOffsets.push(0);\n        }\n    }\n    for (let i = 0; i < geometries.length; i++) {\n        const geometry = geometries[i];\n        for (let j = 0; j < attrNames.length; j++) {\n            const attrName = attrNames[j];\n            componentCounts[j] += geometry.attributes[attrName].values.length\n        }\n    }\n\n    for (let j = 0; j < attrNames.length; j++) {\n        valueArrs.push(new valueConstructors[j](componentCounts[j]));\n    }\n\n    if (!geometries[0].indices) {\n        indices = null;\n    }\n\n    for (let i = 0; i < geometries.length; i++) {\n        const geometry = geometries[i];\n        for (let ai = 0; ai < attrNames.length; ai++) {\n            var attrName = attrNames[ai];\n            var valueArr = valueArrs[ai];\n            var attrValues = geometry.attributes[attrName].values;\n            valueArr.set(attrValues, valueOffsets[ai]);\n            valueOffsets[ai] += attrValues.length;\n        }\n\n        if (geometry.indices) {\n            for (let j = 0; j < geometry.indices.length; j++) {\n                const index = geometry.indices[j];\n                indices.push(index + indexOffst);\n            }\n\n            indexOffst += geometry.attributes.position.values.length / 3;\n        }\n    }\n\n    var attributes = {};\n    for (let i = 0; i < attrNames.length; i++) {\n        const attrName = attrNames[i];\n        attributes[attrName] = {\n            values: valueArrs[i],\n            componentsPerAttribute: valueComponents[i],\n            componentDatatype: valueTypes[i],\n            normalize: valueNormalizes[i]\n        }\n    }\n\n    if (indices) {\n        var vertexCount = valueArrs[0] / valueComponents[0];\n        if (vertexCount < 65535) {\n            indices = new Uint16Array(indices);\n        } else {\n            indices = new Uint32Array(indices);\n        }\n    }\n\n    geometry = new Cesium.Geometry({\n        attributes: attributes,\n        indices: indices,\n        primitiveType: primitiveType\n    })\n    return geometry;\n}\n\n/**\n * \n * @param {Cesium.Geometry[]} geometries \n * @returns {Cesium.Geometry}\n */\nGeometryUtils.mergeGroupedGeometries = function (geometries) {\n    const _Cesium = Cesium;\n\n    let attributes = GeometryUtils.cloneGeometryAttributes(geometries[0].attributes);\n\n    for (const name in attributes) {\n        if (attributes.hasOwnProperty(name)) {\n            const attribute = attributes[name];\n            let componentsPerAttribute = attribute.componentsPerAttribute;\n            let componentDatatype = attribute.componentDatatype;\n            let values = [];\n\n            geometries.forEach((geometry) => {\n                let srcAttribute = geometry.attributes[name];\n                let srcValues = srcAttribute.values;\n\n                for (let i = 0; i < geometry.indices.length; i++) {\n                    const vi = geometry.indices[i];\n                    for (let j = 0; j < componentsPerAttribute; j++) {\n                        values.push(srcValues[vi * componentsPerAttribute + j])\n                    }\n                }\n            })\n\n            attributes[name].values = _Cesium.ComponentDatatype.createTypedArray(\n                componentDatatype, values\n            );\n\n        }\n\n    }\n\n    return new _Cesium.Geometry({\n        attributes: attributes,\n        primitiveType: geometries[0].primitiveType\n    })\n}\n\n/**\n * \n * @param {THREE.BufferGeometry[]} geometries \n * @returns {THREE.BufferGeometry}\n */\nfunction mergeGeometries3js(geometries) {\n    const _THREE = THREE;\n    var newGeometry = geometries[0].clone();\n    var newAttributes = newGeometry.attributes;\n    for (const name in newAttributes) {\n        const newAttribute = newAttributes[name];\n        var count = 0, aLength = 0;\n        for (let i = 0; i < geometries.length; i++) {\n            const geom = geometries[i];\n            const att = geom.attributes[name]\n            count += att.count\n            aLength += att.array.length;\n        }\n        newAttribute.count = count;\n        newAttribute.array = new newAttribute.array.constructor(aLength);\n        var array = newAttribute.array, offset = 0;\n        for (let i = 0; i < geometries.length; i++) {\n            const geom = geometries[i];\n            const att = geom.attributes[name], currArr = att.array;\n            array.set(currArr, offset);\n            offset += currArr.length;\n        }\n    }\n    //\n    var indexList = [], newIndexLen = 0;\n    for (let i = 0; i < geometries.length; i++) {\n        const geom = geometries[i];\n        var indices = genGeometryIndices(geom, 0, true);\n        indexList.push(indices);\n        newIndexLen += indices.length;\n    }\n    var newIndices, vertCount = newAttributes.position.count, newIndexCtor;\n    if (vertCount > 65535) {\n        newIndices = new Uint32Array(newIndexLen)\n        newIndexCtor = _THREE.Uint32BufferAttribute\n    } else if (vertCount > 255) {\n        newIndices = new Uint16Array(newIndexLen)\n        newIndexCtor = _THREE.Uint16BufferAttribute\n    } else {\n        newIndices = new Uint8Array(newIndexLen)\n        newIndexCtor = _THREE.Uint8BufferAttribute\n    }\n    var offset = 0, ptr = 0, removeIndex = true, prevIndex = -1;\n    for (let i = 0; i < indexList.length; i++) {\n        const index = indexList[i];\n        for (let j = 0; j < index.length; j++) {\n            var currIdx = index[j] + offset;\n            newIndices[ptr++] = currIdx;\n            if (currIdx - prevIndex != 1) {\n                removeIndex = false\n            }\n            prevIndex = currIdx\n        }\n        offset += geometries[i].attributes.position.count;\n    }\n    if (removeIndex) {\n        newGeometry.index = null;\n    }\n    else {\n        newGeometry.setIndex(new newIndexCtor(newIndices, 1, false));\n    }\n    newGeometry.computeBoundingSphere();\n    newGeometry.computeBoundingBox();\n    return newGeometry;\n}\nGeometryUtils.mergeGeometries3js = mergeGeometries3js;\n\n/**\n*\n*@param {Cesium.Geometry}geometry\n*@param {Cesium.Cartesian3}offset\n*/\nGeometryUtils.translate = function (geometry, offset) {\n    initConstants$GeometryUtils()\n    if (Array.isArray(offset)) {\n        scratchOffset.x = offset[0];\n        scratchOffset.y = offset[1];\n        scratchOffset.z = offset[2];\n    } else {\n        Cartesian3.clone(offset, scratchOffset);\n    }\n\n    for (var i = 0; i < geometry.attributes.position.values.length; i += 3) {\n        geometry.attributes.position.values[i] += scratchOffset.x;\n        geometry.attributes.position.values[i + 1] += scratchOffset.y;\n        geometry.attributes.position.values[i + 2] += scratchOffset.z;\n    }\n    //if (geometry.attributes.normal) {\n    //    Cesium.GeometryPipeline.computeNormal(geometry);\n    //}\n}\n\n/**\n*\n*@param {TypeArray} array\n*@return {Cesium.ComponentDatatype}  \n*/\nGeometryUtils.getAttributeComponentType = function (array) {\n    const ComponentDatatype = Cesium.ComponentDatatype;\n    var attributeComponentType = ComponentDatatype.SHORT;\n    if (array instanceof Int8Array) {\n        attributeComponentType = ComponentDatatype.BYTE;\n\n    } else if (array instanceof Uint8Array || array instanceof Uint8ClampedArray) {\n        attributeComponentType = ComponentDatatype.UNSIGNED_BYTE;\n\n    } else if (array instanceof Int16Array) {\n        attributeComponentType = ComponentDatatype.SHORT;\n\n    } else if (array instanceof Uint16Array) {\n        attributeComponentType = ComponentDatatype.UNSIGNED_SHORT;\n\n    } else if (array instanceof Int32Array) {\n        attributeComponentType = ComponentDatatype.INT;\n\n    } else if (array instanceof Uint32Array) {\n        attributeComponentType = ComponentDatatype.UNSIGNED_INT;\n\n    } else if (array instanceof Float32Array) {\n        attributeComponentType = ComponentDatatype.FLOAT;\n\n    } else if (array instanceof Float64Array) {\n        attributeComponentType = ComponentDatatype.DOUBLE;\n\n    }\n\n    return attributeComponentType;\n\n}\n\n/**\n * \n * @param {{[key:string]:Cesium.GeometryAttribute}} srcAttributes \n * @returns {{[key:string]:Cesium.GeometryAttribute}} newAttributes\n */\nGeometryUtils.cloneGeometryAttributes = function (srcAttributes) {\n\n    let attributes = {};\n    for (const name in srcAttributes) {\n        if (srcAttributes.hasOwnProperty(name) && srcAttributes[name]) {\n            let srcAttribute = srcAttributes[name];\n\n            attributes[name] = {\n                componentDatatype: srcAttribute.componentDatatype,\n                componentsPerAttribute: srcAttribute.componentsPerAttribute,\n                normalize: srcAttribute.normalize,\n                values: []\n            }\n\n        }\n    }\n    return attributes;\n}\n\n/**\n * \n * @param {Cesium.Geometry} geometry \n * @returns {Cesium.Geometry}\n */\nGeometryUtils.cloneGeometry = function (geometry) {\n    let attributes = this.cloneGeometryAttributes(geometry.attributes);\n    for (const key in attributes) {\n        if (attributes.hasOwnProperty(key)) {\n            const attribute = attributes[key];\n            const values = geometry.attributes[key].values;\n            attribute.values = new values.constructor(values);\n        }\n    }\n\n    let indices = geometry.indices ? new geometry.indices.constructor(geometry.indices) : undefined;\n    let newGeometry = new Cesium.Geometry({\n        attributes: attributes,\n        indices: indices,\n        primitiveType: geometry.primitiveType,\n        boundingSphere: geometry.boundingSphere ? geometry.boundingSphere.clone() : undefined\n    })\n    return newGeometry;\n}\n\n/**\n*\n*@param {Object}geometry\n*@return {Boolean}\n*/\nGeometryUtils.isGeometry3js = function (geometry) {\n    return (typeof THREE !== 'undefined' && geometry.isBufferGeometry)\n        || (geometry.attributes && geometry.attributes.position && geometry.index)\n        || (geometry.vertices && geometry.faces);\n}\n\n/**\n *\n * @param {THREE.BufferGeometry}geometry \n * @param {THREE.Mesh} object\n * @private\n */\nGeometryUtils.parseBufferGeometry3js = function (geometry, object) {\n    // var start = new Date();\n    const { GeometryAttribute, PrimitiveType, Geometry } = Cesium;\n\n    var attributes = {};\n    if (!geometry.attributes.normal) {\n        geometry.computeVertexNormals();\n    }\n\n    for (var attrName in geometry.attributes) {\n\n        if (geometry.attributes.hasOwnProperty(attrName)) {\n            var attr = geometry.getAttribute(attrName);\n            if (attr && attr.array.length > 0) {\n\n                attributes[attrName] = new GeometryAttribute({\n                    componentDatatype: GeometryUtils.getAttributeComponentType(attr.array),\n                    componentsPerAttribute: attr.itemSize,\n                    values: attr.array,\n                    normalize: attr.normalized\n                });\n\n            }\n\n        }\n    }\n    var indices;\n    var primitiveType = PrimitiveType.TRIANGLES;\n    if (typeof geometry.GeometryMode != 'undefined') {\n        primitiveType = geometry.GeometryMode;\n    }\n    if (!geometry.index) {\n\n        var ptCount = attributes.position.values.length / 3\n\n        if (geometry.groups && geometry.groups.length) {\n            indices = [];\n            geometry.groups.forEach(function (group) {\n                if (group.start + group.count > ptCount) {\n                    console.warn('group.count>ptCount');\n                }\n                for (var i = 0; i < group.count && i + group.start < ptCount; i++) {\n                    indices.push(i + group.start);\n                }\n            })\n\n        } else if (object.isLine) {\n\n            if (object.isLineSegments) {\n                primitiveType = PrimitiveType.LINES;\n            }\n            else if (object.isLineLoop) {\n                primitiveType = PrimitiveType.LINE_LOOP;\n            } else {\n                primitiveType = PrimitiveType.LINE_STRIP;\n            }\n\n        } else if (object.isPoints) {\n            primitiveType = PrimitiveType.POINTS;\n        }\n\n        if (indices) {\n            if (ptCount > 65535) {\n                indices = new Uint32Array(indices);\n            } else {\n                indices = new Uint16Array(indices);\n            }\n        }\n    } else {\n        indices = geometry.index.array;\n    }\n    var cesGeometry = new Geometry({\n        attributes: attributes,\n        indices: indices,\n        primitiveType: primitiveType\n    });\n    if (geometry.boundingSphere) {\n        cesGeometry.boundingSphere = BoundingSphere.clone(geometry.boundingSphere)\n    }\n    return cesGeometry;\n}\n\n/**\n*\n*@param {THREE.Geometry}geometry3js\n*@return {Cesium.Geometry} \n*/\nGeometryUtils.fromGeometry3js = function (geometry3js, object, useCesiumNormal) {\n\n    if (geometry3js.attributes && (geometry3js.index || geometry3js.groups.length)) {\n\n    } else {\n\n        if (!geometry3js.isBufferGeometry) {\n            geometry3js = new THREE.BufferGeometry().fromGeometry(geometry3js);\n        }\n\n        if (!geometry3js.attributes.normal && !useCesiumNormal && geometry3js.computeVertexNormals) {\n            geometry3js.computeVertexNormals();\n        }\n    }\n\n    var _Cesium = Cesium;\n    var geometry = GeometryUtils.parseBufferGeometry3js(geometry3js, object);\n    if (\n        useCesiumNormal && !geometry.attributes.normal &&\n        geometry.primitiveType == _Cesium.PrimitiveType.TRIANGLES) {\n        _Cesium.GeometryPipeline.computeNormal(geometry);\n    }\n    return geometry;\n\n}\n\n/**\n * \n * @param {Cesium.Geometry} geometry \n * @param {THREE.BufferGeometry} [result]\n * @returns {THREE.BufferGeometry} result\n */\nGeometryUtils.toBufferGeometry3js = function (geometry, result) {\n    const { BufferGeometry, BufferAttribute, Sphere } = THREE;\n\n    if (!result) result = new BufferGeometry();\n    let attributes = geometry.attributes;\n\n    for (const name in attributes) {\n        if (attributes.hasOwnProperty(name) && attributes[name]) {\n            const attribute = attributes[name];\n            var array = attribute.values;\n            if (array instanceof Float64Array) {\n                array = new Float32Array(array);\n            }\n            let attribute3js = new BufferAttribute(\n                array, attribute.componentsPerAttribute, attribute.normalize);\n            result.setAttribute(name, attribute3js);\n        }\n    }\n\n    if (attributes.st) {\n        result.attributes.uv = result.attributes.st;\n        result.deleteAttribute('st');\n    }\n\n    if (geometry.indices) {\n        let attribute3js = new BufferAttribute(\n            geometry.indices, 1, false);\n        result.setIndex(attribute3js)\n    }\n\n    if (geometry.boundingSphere) {\n        let bs = geometry.boundingSphere\n        if (!result.boundingSphere) result.boundingSphere = new Sphere()\n        result.boundingSphere.center.copy(bs.center)\n        result.boundingSphere.radius = bs.radius;\n    }\n\n    return result;\n\n}\n\n/**\n*\n*@param {Cesium.Geometry}geometry\n*@return {THREE.Geometry} \n*/\nGeometryUtils.toGeometry3js = function (geometry) {\n    if (typeof THREE === 'undefined') {\n        throw new Error(\"THREE 未加载\");\n    }\n    const { Geometry, Vector3, Face3 } = THREE;\n\n    var positions = geometry.attributes.position.values;\n    var positionIdx = 0;\n\n    var geometry3js = new Geometry();\n\n    for (var i = 0; i < positions.length; i += 3) {\n        positionIdx = i * 3;\n        geometry3js.vertices.push(\n            new Vector3(positions[positionIdx], positions[positionIdx + 2], positions[positionIdx + 1])\n        );\n    }\n\n    for (var i = 0; i < geometry.indices.length; i += 3) {\n        var idx1 = geometry.indices[i];\n        var idx2 = geometry.indices[i + 1];\n        var idx3 = geometry.indices[i + 2];\n        geometry3js.faces.push(new Face3(idx1, idx2, idx3));\n    }\n\n    return geometry3js;\n}\n\n/**\n*@param {Cesium.Geometry|THREE.Geometry}geometry\n*@param {Cesium.Cartesian3}[offset]\n*@return {CSG}\n*/\nGeometryUtils.toCSG = function (geometry, offset) {\n    if (!(typeof THREE === 'undefined')) {\n        if (geometry.isBufferGeometry) {\n            return GeometryUtils._toCSG3js(geometry, offset);\n        }\n    }\n    const _Cesium = Cesium;\n\n    if (!offset) {\n        offset = { x: 0, y: 0, z: 0 };\n    }\n    if (!geometry.attributes.normal) {\n        geometry = _Cesium.GeometryPipeline.computeNormal(geometry);\n    }\n    if (geometry.primitiveType !== _Cesium.PrimitiveType.TRIANGLES) {\n        throw new Error(\"暂不支持此类几何体\");\n    }\n    if (!CSG) {\n        throw new Error('CSG 库未加载。请从 https://github.com/evanw/csg.js 获取');\n    }\n    var faceCount = geometry.indices.length / 3;\n    var polygons = [], vertices = [];\n    var positions = geometry.attributes.position.values;\n    var normals = geometry.attributes.normal.values;\n    var normalIdx = 0, positionIdx = 0;\n\n    for (var i = 0; i < geometry.indices.length; i += 3) {\n        vertices = [];\n\n        var idx1 = geometry.indices[i];\n        var idx2 = geometry.indices[i + 1];\n        var idx3 = geometry.indices[i + 2];\n\n        positionIdx = idx1 * 3;\n        normalIdx = idx1 * 3;\n\n        vertices.push(new CSG.Vertex(\n            [positions[positionIdx++] + offset.x, positions[positionIdx++] + offset.y, positions[positionIdx++] + offset.z],\n            [normals[normalIdx++], normals[normalIdx++], normals[normalIdx++]]\n        ));\n\n        positionIdx = idx2 * 3;\n        normalIdx = idx2 * 3;\n        vertices.push(new CSG.Vertex(\n            [positions[positionIdx++] + offset.x, positions[positionIdx++] + offset.y, positions[positionIdx++] + offset.z],\n            [normals[normalIdx++], normals[normalIdx++], normals[normalIdx++]]\n        ));\n\n        positionIdx = idx3 * 3;\n        normalIdx = idx3 * 3;\n        vertices.push(new CSG.Vertex(\n            [positions[positionIdx++] + offset.x, positions[positionIdx++] + offset.y, positions[positionIdx++] + offset.z],\n            [normals[normalIdx++], normals[normalIdx++], normals[normalIdx++]]\n        ));\n        polygons.push(new CSG.Polygon(vertices));\n    }\n    return CSG.fromPolygons(polygons);\n}\n/**\n*@param {CSG}csg_model\n*@param {Boolean}[toGeometry3js=false]\n*@return {Cesium.Geometry|THREE.Geometry}\n*/\nGeometryUtils.fromCSG = function (csg_model, toGeometry3js) {\n    if (!(typeof THREE === 'undefined') && toGeometry3js) {\n        return GeometryUtils._fromCSG3js(csg_model);\n    }\n\n    var i, j, vertices,\n        polygons = csg_model.toPolygons();\n\n    if (!CSG) {\n        throw new Error('CSG 库未加载。请从 https://github.com/evanw/csg.js 获取');\n    }\n\n    const { GeometryAttribute, PrimitiveType, Geometry } = Cesium;\n\n    var positions = [];\n    var normals = [];\n    var indices = [];\n\n    for (i = 0; i < polygons.length; i++) {\n\n        // Vertices\n        vertices = [];\n        for (j = 0; j < polygons[i].vertices.length; j++) {\n            vertices.push(getGeometryVertice(positions, normals, polygons[i].vertices[j].pos, polygons[i].plane.normal));\n        }\n        if (vertices[0] === vertices[vertices.length - 1]) {\n            vertices.pop();\n        }\n\n        for (var j = 2; j < vertices.length; j++) {\n            indices.push(vertices[0], vertices[j - 1], vertices[j]);\n        }\n    }\n\n    positions = new Float32Array(positions);\n    normals = new Float32Array(normals);\n\n    indices = new Int32Array(indices);\n    var attributes = {};\n    attributes.position = new GeometryAttribute({\n        componentDatatype: ComponentDatatype.FLOAT,\n        componentsPerAttribute: 3,\n        values: positions\n    });\n    attributes.normal = new GeometryAttribute({\n        componentDatatype: ComponentDatatype.FLOAT,\n        componentsPerAttribute: 3,\n        values: normals\n    });\n\n    var cesGeometry = new Geometry({\n        attributes: attributes,\n        indices: indices,\n        primitiveType: PrimitiveType.TRIANGLES\n    });\n\n    return cesGeometry;\n}\n\nGeometryUtils._toCSG3js = function (three_model, offset, rotation) {\n    if (typeof THREE === 'undefined') {\n        throw new Error(\"THREE 未加载\");\n    }\n\n    var i, geometry, polygons, vertices, rotation_matrix;\n\n    if (!CSG) {\n        throw 'CSG library not loaded. Please get a copy from https://github.com/evanw/csg.js';\n    }\n\n    const { Mesh, Geometry, Euler, Vector3, Matrix4, Face3, Face4 } = THREE;\n    const { Vertex, Polygon } = CSG.Vertex;\n\n    if (three_model instanceof Mesh) {\n        geometry = three_model.geometry;\n        offset = offset || three_model.position;\n        rotation = rotation || three_model.rotation;\n    } else if (three_model instanceof Geometry) {\n        geometry = three_model;\n        offset = offset || new Vector3(0, 0, 0);\n        rotation = rotation || new Euler(0, 0, 0);\n    } else if (three_model.isBufferGeometry) {\n        geometry = new Geometry().fromBufferGeometry(three_model);\n        offset = offset || new Vector3(0, 0, 0);\n        rotation = rotation || new Euler(0, 0, 0);\n    } else {\n        throw 'Model type not supported.';\n    }\n    rotation_matrix = new Matrix4().makeRotationFromEuler(rotation);\n\n    var polygons = [];\n    const faces = geometry.faces, srcVertices = geometry.vertices;\n    for (i = 0; i < faces.length; i++) {\n\n        const face = faces[i]\n        const { a, b, c, d, normal } = face;\n        const normalArr = [normal.x, normal.y, normal.z]\n        if (face instanceof Face3) {\n\n\n            vertices = [];\n            vertices.push(new Vertex(srcVertices[a].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            vertices.push(new Vertex(srcVertices[b].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            vertices.push(new Vertex(srcVertices[c].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            polygons.push(new Polygon(vertices));\n\n        } else if (face instanceof Face4) {\n\n            vertices = [];\n            vertices.push(new Vertex(srcVertices[a].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            vertices.push(new Vertex(srcVertices[b].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            vertices.push(new Vertex(srcVertices[d].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            polygons.push(new Polygon(vertices));\n\n            vertices = [];\n            vertices.push(new Vertex(srcVertices[b].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            vertices.push(new Vertex(srcVertices[c].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            vertices.push(new Vertex(srcVertices[d].clone().add(offset).applyMatrix4(rotation_matrix), normalArr));\n            polygons.push(new Polygon(vertices));\n\n        } else {\n            throw 'Model contains unsupported face.';\n        }\n    }\n\n    return CSG.fromPolygons(polygons);\n}\n\nGeometryUtils._fromCSG3js = function (csg_model) {\n    if (typeof THREE === 'undefined') {\n        throw new Error(\"THREE 未加载\");\n    }\n    var i, j, vertices, face,\n        three_geometry = new THREE.Geometry(),\n        polygons = csg_model.toPolygons();\n\n    if (!CSG) {\n        throw 'CSG library not loaded. Please get a copy from https://github.com/evanw/csg.js';\n    }\n\n    const { Vector3, Vector2, Face3 } = THREE;\n\n    for (i = 0; i < polygons.length; i++) {\n\n        // Vertices\n        vertices = [];\n        for (j = 0; j < polygons[i].vertices.length; j++) {\n            vertices.push(GeometryUtils._getGeometryVertice3js(three_geometry, polygons[i].vertices[j].pos));\n        }\n        if (vertices[0] === vertices[vertices.length - 1]) {\n            vertices.pop();\n        }\n\n        for (var j = 2; j < vertices.length; j++) {\n            face = new Face3(vertices[0], vertices[j - 1], vertices[j], new Vector3().copy(polygons[i].plane.normal));\n            three_geometry.faces.push(face);\n            three_geometry.faceVertexUvs[0].push(new Vector2());\n        }\n    }\n\n    three_geometry.computeBoundingBox();\n\n    return three_geometry;\n}\n\nGeometryUtils._getGeometryVertice3js = function (geometry, vertice_position) {\n    var i;\n    for (i = 0; i < geometry.vertices.length; i++) {\n        if (geometry.vertices[i].x === vertice_position.x && geometry.vertices[i].y === vertice_position.y && geometry.vertices[i].z === vertice_position.z) {\n            // Vertice already exists\n            return i;\n        }\n    };\n\n    geometry.vertices.push(new THREE.Vector3(vertice_position.x, vertice_position.y, vertice_position.z));\n    return geometry.vertices.length - 1;\n}\n\n/**\n*@param {Array<Number>}positions\n*@param {Array<Number>}normals\n*@param {Cesium.CSG.Vector}vertice_position\n*@param {Cesium.CSG.Vector}plane_normal\n*@return {Number}\n*@private\n*/\nfunction getGeometryVertice(positions, normals, vertice_position, plane_normal) {\n    var i, idx = 0;\n    for (i = 0; i < positions.length; i += 3) {\n        if (positions[i] === vertice_position.x\n            && positions[i + 1] === vertice_position.y\n            && positions[i + 2] === vertice_position.z) {\n            // Vertice already exists\n            return idx;\n        }\n        idx++;\n    };\n\n    positions.push(vertice_position.x, vertice_position.y, vertice_position.z);\n    normals.push(plane_normal.x, plane_normal.y, plane_normal.z);\n    return idx;\n}\n\n/**\n * \n * @param {THREE.Vec2[]} contour \n * @param {THREE.Vec2[][]} holes \n * @param {THREE.Vec2[]} outVertices \n * @param {number[]} outIndices \n */\nfunction triangulateShape(contour, holes, outVertices, outIndices) {\n    const ShapeUtils = THREE.ShapeUtils;\n    const indices = outIndices, vertices = outVertices;\n    var i, l, shapeHole;\n\n    var indexOffset = vertices.length;\n    //var points = shape.extractPoints(curveSegments);\n\n    var shapeVertices = contour.slice();\n    var shapeHoles = holes.map(hole => {\n        return hole.slice()\n    });\n\n    // check direction of vertices\n\n    if (ShapeUtils.isClockWise(shapeVertices) === false) {\n\n        shapeVertices = shapeVertices.reverse();\n\n    }\n\n    for (i = 0, l = shapeHoles.length; i < l; i++) {\n\n        shapeHole = shapeHoles[i];\n\n        if (ShapeUtils.isClockWise(shapeHole) === true) {\n\n            shapeHoles[i] = shapeHole.reverse();\n\n        }\n\n    }\n\n    var faces = ShapeUtils.triangulateShape(shapeVertices, shapeHoles);\n\n    // join vertices of inner and outer paths to a single array\n\n    for (i = 0, l = shapeHoles.length; i < l; i++) {\n\n        shapeHole = shapeHoles[i];\n        shapeVertices = shapeVertices.concat(shapeHole);\n\n    }\n\n    // vertices, normals, uvs\n\n    for (i = 0, l = shapeVertices.length; i < l; i++) {\n\n        var vertex = shapeVertices[i];\n\n        vertices.push(vertex)//.x, vertex.y, 0);\n        //normals.push(0, 0, 1);\n        //uvs.push(vertex.x, vertex.y); // world uvs\n\n    }\n\n    // incides\n\n    for (i = 0, l = faces.length; i < l; i++) {\n\n        var face = faces[i];\n\n        var a = face[0] + indexOffset;\n        var b = face[1] + indexOffset;\n        var c = face[2] + indexOffset;\n\n        indices.push(a, b, c);\n        //groupCount += 3;\n\n    }\n}\nGeometryUtils.triangulateShape = triangulateShape\n\n/**\n * \n * @param {THREE.BufferGeometry} geometry \n * @returns {number[]}\n */\nfunction genGeometryIndicesAll(geometry) {\n    var index = geometry.index\n    var groups = geometry.groups;\n    var indices;\n    if (index) {\n        indices = index.array;\n    } else {\n        if (groups && groups.length > 1) {\n            indices = [];\n            for (let i = 0; i < groups.length; i++) {\n                var tempIndices = genGeometryIndices(geometry, i, false);\n                for (let j = 0; j < tempIndices.length; j++) {\n                    indices.push(tempIndices[j]);\n                }\n            }\n        } else {\n            indices = genGeometryIndices(geometry, 0, true);\n        }\n    }\n    return indices;\n}\nGeometryUtils.genGeometryIndicesAll = genGeometryIndicesAll;\n\n/**\n * \n * @param {THREE.BufferGeometry} geometry3js \n * @param {object}[options]\n * @param {object}[options.angleEpsilon=1] in degrees\n * @param {object}[options.removeCoplanar=true] \n * @return {THREE.BufferGeometry} \n */\nfunction toOutlineGeometry3js(geometry3js, options = {}) {\n    var _THREE = THREE\n    const { Vector3, BufferGeometry, BufferAttribute, MathUtils } = _THREE;\n    var angleEpsilon = options.angleEpsilon == undefined ? 1 : options.angleEpsilon;\n    angleEpsilon = MathUtils.DEG2RAD * angleEpsilon;\n\n    var removeCoplanar = options.removeCoplanar == undefined ? true : options.removeCoplanar;\n\n    var geometry = geometry3js;\n    var position = geometry.getAttribute('position');\n    var indices = genGeometryIndicesAll(geometry);\n    var A = new Vector3();\n    var B = new Vector3();\n    var C = new Vector3();\n\n    var newVertices = [], newVertexMap = new Map();\n    var edges = [], edgeMap = new Map();\n\n    /**\n     * \n     * @param {THREE.Vector3} v \n     */\n    function addVertex(v) {\n        var key = [v.x, v.y, v.z].join(',');\n        var index = newVertexMap.get(key)\n        if (index == undefined) {\n            index = newVertices.length;\n            newVertexMap.set(key, index);\n            newVertices.push(v.clone());\n        }\n        return index;\n    }\n\n    function pushEdge(edge, triangle) {\n        var edgeCopy = edge.slice()\n        edgeCopy.sort((a, b) => {\n            return a - b;\n        })\n        var key = edgeCopy.join(',');\n        var edgeUnique = edgeMap.get(key);\n        if (!edgeUnique) {\n            edgeUnique = {\n                edge: edgeCopy,\n                triangles: []\n            }\n            edges.push(edgeUnique)\n            edgeMap.set(key, edgeUnique)\n        }\n        edgeUnique.triangles.push(triangle);\n    }\n\n    /**\n     *  \n     * @param {THREE.Vector3} a \n     * @param {THREE.Vector3} b \n     * @param {THREE.Vector3} c \n     */\n    function pushTriangle(a, b, c) {\n        a = addVertex(a)\n        b = addVertex(b)\n        c = addVertex(c)\n        var triangle = { a: a, b: b, c: c }\n        pushEdge([a, b], triangle)\n        pushEdge([b, c], triangle)\n        pushEdge([c, a], triangle)\n    }\n\n    function getVertex(V, v) {\n        V.fromBufferAttribute(position, v);\n    }\n\n    for (let i = 0; i < indices.length; i += 3) {\n        var a = indices[i], b = indices[i + 1], c = indices[i + 2];\n        getVertex(A, a)\n        getVertex(B, b)\n        getVertex(C, c)\n        pushTriangle(A, B, C);\n    }\n\n    var polygon = [];\n    var N = new Vector3()\n\n    for (let i = 0; i < edges.length; i++) {\n        const edgeUnique = edges[i];\n        const triangles = edgeUnique.triangles;\n        if (triangles.length > 1) {\n            var isCoplanar = true;\n            if (removeCoplanar) {\n                triangles.forEach(triangle => {\n                    if (triangle.normal) return;\n                    var { a, b, c } = triangle;\n                    a = newVertices[a]\n                    b = newVertices[b]\n                    c = newVertices[c]\n                    computeNormal(a, b, c, N, false);\n                    triangle.normal = N.clone()\n                })\n                var N0 = triangles[0].normal;\n                for (let j = 1; j < triangles.length; j++) {\n                    const triangle = triangles[j];\n                    var angle = N0.angleTo(triangle.normal);\n                    if (angle > angleEpsilon) {\n                        isCoplanar = false\n                        break;\n                    }\n                }\n            }\n            if (isCoplanar) {\n                continue;\n            }\n        }\n        polygon.push(edgeUnique.edge[0], edgeUnique.edge[1])\n    }\n\n    position = [];\n    polygon.forEach(id => {\n        var v = newVertices[id]\n        position.push(v.x, v.y, v.z);\n    });\n\n    var geometry = new BufferGeometry();\n    position = new BufferAttribute(new Float32Array(position), 3, false);\n    geometry.setAttribute('position', position);\n\n    edges.length = 0;\n    edgeMap.clear()\n    newVertices.length = 0\n    newVertexMap.clear()\n    polygon.length = 0;\n\n    return geometry;\n}\nGeometryUtils.toOutlineGeometry3js = toOutlineGeometry3js;\nexport default GeometryUtils;",
    "/**\n * @constructor\n */\nfunction IEffect() {\n    /**\n     * @type {(THREE.Mesh|THREE.Points|THREE.Line)[]}\n     */\n    this.selected = [];\n};\n\nObject.assign(IEffect.prototype, {\n    isIEffect: true,\n    preUpdate(scene, camera3js, frameState, currentWebglRenderState) {\n        console.warn('IEffect.preRender not implemeted');\n    },\n    postUpdate(scene, camera3js, frameState, currentWebglRenderState) {\n        console.warn('IEffect.postRender not implemeted');\n    }\n})\nexport default IEffect;",
    "import MeshVisualizer from  \"./MeshVisualizer.js\";\n\n\nexport default class IRenderable {\n    constructor() {\n        this.isIRenderable = true;\n        /**\n         * @type {MeshVisualizer}\n         */\n        this.visualizer = null;\n    }\n    /**\n     * \n     * @param {MeshVisualizer} visualizer \n     */\n    onRemoved(visualizer) { }\n    /**\n    * \n    * @param {MeshVisualizer} visualizer \n    */\n    onAdded(visualizer) { }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {(Object3D|THREE.Object3D)[]} renderList \n     */\n    render(frameState, renderList) {\n        throw new Error('IRenderable.render not implemented.')\n    }\n}",
    "\nimport RendererUtils from  \"./RendererUtils.js\";\n \nimport WebGLRenderer from  \"./webgl/WebGLRenderer.js\";\n\nimport TextureUtils from  \"./webgl/TextureUtils.js\";\n\nimport CameraUtils from  \"./CameraUtils.js\";\n\nimport WebGLRenderItem from  \"./webgl/WebGLRenderItem.js\";\n\nimport WebGLRenderStates from  \"./webgl/WebGLRenderStates.js\";\n\nimport WebGLRenderState from  \"./webgl/WebGLRenderState.js\";\n\nimport WebGLRenderItems from  \"./webgl/WebGLRenderItems.js\";\n\nimport WebGLGeometries from  \"./webgl/WebGLGeometries.js\";\n\nimport WebGLLights from  \"./webgl/WebGLLights.js\";\n\nimport IEffect from  \"./IEffect.js\";\n\nimport IRenderable from  \"./IRenderable.js\";\n\nimport polyfill from  \"./polyfill.js\";\n\n\n//Cesium classes\nvar Matrix4;\nvar Matrix3;\nvar Matrix2;\nvar defaultValue;\nvar defined;\nvar Texture;\nvar PixelFormat;\nvar PixelDatatype;\nvar Cartesian3;\nvar Color;\nvar Ray;\nvar Transforms;\nvar Event;\nvar CubeMap;\nvar PrimitiveType;\nvar Intersect, BoundingSphere;\nvar Renderbuffer, Framebuffer, RenderbufferFormat;\n//\n\nvar world2localMatrix;\nvar surfacePointLocal;\nvar rayDir;\nvar pos;\nvar rayOriginLocal;\nvar scratchRay;\n\nvar constantsHasInit$2 = false;\nvar _projScreenMatrix, _vector3;\n\nfunction initConstants$2() {\n    if (constantsHasInit$2) return;\n    constantsHasInit$2 = true;\n\n    const _Cesium = Cesium;\n    Matrix4 = _Cesium.Matrix4;\n    Matrix3 = _Cesium.Matrix3;\n    Matrix2 = _Cesium.Matrix2;\n    defaultValue = _Cesium.defaultValue;\n    defined = _Cesium.defined;\n    Texture = _Cesium.Texture;\n    PixelFormat = _Cesium.PixelFormat;\n    PixelDatatype = _Cesium.PixelDatatype;\n    Cartesian3 = _Cesium.Cartesian3;\n    Color = _Cesium.Color;\n    Ray = _Cesium.Ray;\n    Transforms = _Cesium.Transforms;\n    Event = _Cesium.Event;\n    PrimitiveType = _Cesium.PrimitiveType;\n    CubeMap = Cesium.CubeMap;\n\n    Renderbuffer = _Cesium.Renderbuffer;\n    Framebuffer = _Cesium.Framebuffer;\n    RenderbufferFormat = _Cesium.RenderbufferFormat;\n    Intersect = _Cesium.Intersect;\n    BoundingSphere = _Cesium.BoundingSphere;\n\n    polyfill()\n\n    world2localMatrix = new Matrix4();\n    surfacePointLocal = new Cartesian3();\n    rayDir = new Cartesian3();\n    pos = new Cartesian3();\n    rayOriginLocal = new Cartesian3();\n    scratchRay = new Ray();\n\n    _projScreenMatrix = new Matrix4();\n    _vector3 = new Cartesian3();\n\n}\n\n\nfunction endFrame(object) {\n    var material = object.material;\n\n    object.needsUpdate = false;\n    object.modelMatrixNeedsUpdate = false;\n\n    if (object.instances) {\n        object.instances.forEach((instance) => {\n            instance.modelMatrixNeedsUpdate = false;\n        });\n    }\n\n    if (material.needsUpdate == true)\n        material.needsUpdate = false;\n}\n\n\n/**\n*\n*\n*@param {Object}options\n*@param {Cesium.Matrix4}[options.modelMatrix=Cesium.Matrix4.IDENTITY]\n*@param {Cesium.Cartesian3}[options.position=Cesium.Cartesian3.ZERO] eastNorthUpToFixedFrame\n*@param {Boolean}[options.show=true]\n* \n*@constructor \n*@extends Cesium.Primitive\n*/\nfunction MeshVisualizer(options) {\n    initConstants$2();\n    options = options || {};\n    if (!options.modelMatrix && options.position) {\n        options.modelMatrix = Transforms.eastNorthUpToFixedFrame(options.position);\n    }\n    const scope = this;\n    // Object3D.call(scope, options);\n    scope._modelMatrix = options.modelMatrix ? options.modelMatrix : Matrix4.IDENTITY.clone();\n    scope._children = [];\n\n    scope.isMeshVisualizer = true;\n\n    scope._actualModelMatrix = Matrix4.clone(scope._modelMatrix);\n    scope._actualModelMatrixYup = new Matrix4();\n    scope._actualModelMatrixXup = new Matrix4();\n\n    scope._actualModelMatrixInverse = new Matrix4()\n    scope._actualModelMatrixYupInverse = new Matrix4();\n    scope._actualModelMatrixXupInverse = new Matrix4();\n\n    scope._modelMatrixNeedsUpdate = true;\n\n    scope._ready = true;\n\n    scope._isWireframe = false;\n    scope._debug = false;\n    scope._show = defaultValue(options.show, true);\n\n    scope._center = Matrix4.getTranslation(scope._modelMatrix, new Cartesian3());\n\n    scope._textureCache = {};\n    // scope._uniformMaps = new WeakMap();\n\n\n    //for picking and postprocessing\n    scope._pickIds = [];\n\n    scope.beforeUpdate = new Event();\n    scope.afterUpdate = new Event();\n    scope.beforeDestroy = new Event();\n    scope._scene = options.scene;\n\n    scope.optimizeCommandInit = defaultValue(options.optimizeCommandInit, false);\n    scope.optimizeInitCount = defaultValue(options.optimizeInitCount, 10);\n\n    //   \n    const _THREE = THREE;\n    scope._defaultAmbientLight = new _THREE.AmbientLight('white', 1.);\n    const sunLight = new _THREE.DirectionalLight(Color.WHITE.clone(), 2);\n    sunLight.castShadow = true;\n    sunLight.name = 'sunLight'\n    scope._sunLight = sunLight;\n\n    this.sunLightShadowRange = options.sunLightShadowRange || 500;\n    this.sunLightShadowFar = options.sunLightShadowFar || 10000;\n    this.sunLightShadowSize = options.sunLightShadowSize || 2048;\n\n    scope._sunPositionLC = new Cartesian3();\n    scope._sunTargetPositionLC = new Cartesian3();\n    scope._sunTargetPositionWC = new Cartesian3();\n    scope._sunDirectionLC = new Cartesian3();\n\n    scope.useSunLight = defaultValue(options.useSunLight, false);\n\n    // scope.occlusionCulling = new OcclusionCulling()\n\n    //for threejs \n    scope.renderer = new WebGLRenderer(scope);\n    scope._lights = new WebGLLights();\n\n    scope.maxChangingCount = 10;\n\n    scope.useEncodedPosition = defaultValue(options.useEncodedPosition, false);\n\n    scope.defaultTexture = null;\n    scope.defaultCubeMap = null;\n    scope.defaultShadowMap = null;\n \n    scope._environment = null;\n    scope._environmentChanged = false;\n    scope.environment = options.environment;\n    scope._backgroundMesh = null;\n    scope._background = null;\n    scope._backgroundSize = 1;\n    scope.backgroundIsSkybox = false\n    scope.backgroundVisibleDistance = 1e4;\n    /**\n     * @type {IEffect[]}\n     */\n    scope.effects = [];\n    /**\n     * @type {THREE.PointLight[]}\n     */\n    scope.fixedLights = []\n    /**\n     * @type {THREE.PointLight[]}\n     */\n    scope.partialLights = [];\n    scope._fixedWebGLLights = new WebGLLights();\n    scope._partialWebGLLights = new WebGLLights()\n\n    scope._minRange = defaultValue(options.minRange, 8);\n    scope.isMoonVisible = defaultValue(options.isMoonVisible, true);\n    scope.isSunVisible = defaultValue(options.isSunVisible, true);\n    scope.initBackground();\n\n    scope.updateModelMatrix();\n}\n\n//MeshVisualizer方法\nMeshVisualizer.prototype = {\n\n    //公开接口\n\n    /**\n     * \n     * @param {Cesium.FrameState|Cesium.Scene} frameState \n     * @public\n     */\n    init(frameState) {\n\n        frameState = frameState.frameState || frameState;\n        this.renderer.init(frameState);\n\n        if (!this._scene) {\n            this._scene = frameState.camera._scene;\n        }\n\n        if (!this._onCameraChanged) {\n\n            var timer = null\n            this._onCameraChanged = () => {\n                this._cameraChanged = true;\n\n                if (timer) timer = clearTimeout(timer);\n                timer = setTimeout(() => {\n                    this._cameraChanged = false;\n                }, 2000);\n            }\n            frameState.camera.changed.addEventListener(this._onCameraChanged);\n\n        }\n\n        if (!this.frameState) this._frameState = frameState;\n\n\n        if (!this.defaultTextureImage) {\n            var cv = document.createElement(\"canvas\");\n            this.defaultTextureImage = cv\n            cv.width = 2;\n            cv.height = 2;\n            var ctx = cv.getContext('2d')\n            ctx.fillStyle = 'white';\n            ctx.fillRect(0, 0, 2, 2);\n        }\n\n        if (!this.defaultCubeMap) {\n\n            let defaultTextureImage = this.defaultTextureImage\n            if (!defaultTextureImage) {\n\n                defaultTextureImage = document.createElement(\"canvas\");\n                defaultTextureImage.width = 2;\n                defaultTextureImage.height = 2;\n                this.defaultTextureImage = defaultTextureImage\n            }\n\n            this.defaultCubeMap = new CubeMap({\n                context: frameState.context,\n                source: {\n                    positiveX: defaultTextureImage,\n                    negativeX: defaultTextureImage,\n                    positiveY: defaultTextureImage,\n                    negativeY: defaultTextureImage,\n                    positiveZ: defaultTextureImage,\n                    negativeZ: defaultTextureImage\n                }\n            });\n        }\n\n        if (!this.defaultTexture) {\n            this.defaultTexture = new Texture({\n                context: frameState.context,\n                source: this.defaultTextureImage\n            });\n        }\n        if (this.defaultShadowMap == null) {\n            var cv = document.createElement('canvas')\n            cv.width = 256; cv.height = 256;\n            this.defaultShadowMap = new Texture({\n                context: frameState.context,\n                source: cv\n            });\n        }\n\n        if (!this.defaultFramebuffer) {\n            const width = 256, height = 256, context = frameState.context;\n            var colorTexture = new Texture({\n                context, width, height\n            });\n            var depthRenderbuffer = new Renderbuffer({\n                context,\n                width,\n                height,\n                format: RenderbufferFormat.DEPTH_COMPONENT16\n            });\n            this.defaultFramebuffer = new Framebuffer({\n                context: context,\n                colorTextures: [colorTexture],\n                depthRenderbuffer: depthRenderbuffer\n            })\n        }\n\n        this.initBackground();\n        this.updateEnvironment()\n    },\n    initBackground() {\n        if (typeof THREE != 'undefined' && !this._backgroundMesh) {\n            const _THREE = THREE;\n            const renderer = this.renderer;\n            var defaultTextureImage = this.defaultTextureImage\n            if (!defaultTextureImage) {\n\n                defaultTextureImage = document.createElement(\"canvas\");\n                defaultTextureImage.width = 2;\n                defaultTextureImage.height = 2;\n                this.defaultTextureImage = defaultTextureImage\n            }\n\n            const backgroundMesh = new _THREE.Mesh(\n                new _THREE.BoxBufferGeometry(2, 2, 2),\n                new _THREE.ShaderMaterial({\n                    name: 'BackgroundCubeMaterial',\n                    uniforms: _THREE.UniformsUtils.clone(_THREE.ShaderLib.cube.uniforms),\n                    vertexShader: _THREE.ShaderLib.cube.vertexShader,\n                    fragmentShader: _THREE.ShaderLib.cube.fragmentShader,\n                    side: _THREE.BackSide,\n                    depthTest: false,\n                    depthWrite: false,\n                    fog: false\n                })\n            );\n\n            backgroundMesh.geometry.deleteAttribute('normal');\n            backgroundMesh.geometry.deleteAttribute('uv');\n\n            backgroundMesh.pass = Cesium.Pass.ENVIRONMENT;\n\n            backgroundMesh.frustumCulled = false;\n\n\n            Object.defineProperty(backgroundMesh.material, 'envMap', {\n                get: function () {\n                    return this.uniforms.envMap.value;\n                },\n                set(background) {\n                    if (background) {\n                        background = renderer._cubemaps.get(background);\n                        this.uniforms.envMap.value = background;\n                        this.uniforms.flipEnvMap.value = (background.isCubeTexture && background._needsFlipEnvMap) ? - 1 : 1;\n\n                    }\n                }\n            });\n\n            backgroundMesh.material.uniforms.flipEnvMap.value = 1;\n            var background = this.background || new _THREE.CubeTexture([\n                this.defaultTextureImage, this.defaultTextureImage, this.defaultTextureImage,\n                this.defaultTextureImage, this.defaultTextureImage, this.defaultTextureImage\n            ]);\n            backgroundMesh.material.uniforms.envMap.value = background\n            backgroundMesh.material.uniforms.flipEnvMap.value = (background.isCubeTexture && background._needsFlipEnvMap) ? - 1 : 1;\n\n            backgroundMesh.scale.setScalar(this._backgroundSize)\n            backgroundMesh.visible = !!this.background;\n\n            this._backgroundMesh = backgroundMesh;\n            this._background = null;\n\n        }\n    },\n    updateEnvironment(frameState) {\n        frameState = frameState || this._frameState;\n        if (!frameState) {\n            console.warn('frameState  is required,this function will be called in the next frame');\n            return\n        };\n\n        if (this._environmentChanged && this._environment && this._environment.isTexture) {\n            let uuid = this._environment.uuid;\n            let envMap = this._textureCache[uuid];\n\n            if (!envMap) {\n                let texUniform = TextureUtils.fromTexure3js(this._environment)//, texUniform);\n\n                var createNew = false\n                if (this._environment.isCubeTexture) {\n                    envMap = TextureUtils.createCubeTexture(texUniform, frameState.context)\n                    createNew = true;\n                } else if (!texUniform.isEmptyTextureUniform) {\n                    texUniform.target = Cesium.WebGLConstants.TEXTURE_2D\n                    envMap = TextureUtils.createTexture(texUniform, frameState.context);\n                    createNew = true;\n                }\n\n                if (createNew) {\n                    texUniform.onDispose(() => {\n                        if (!envMap.isDestroyed()) envMap.destroy()\n                        delete this._textureCache[uuid]\n                    })\n                    envMap.__createByVisualizer = true;\n                    this._textureCache[uuid] = envMap;\n                }\n\n            }\n        }\n    },\n\n    /**\n    * \n    *@param {IRenderable|THREE.Object3D}object\n    */\n    add(object) {\n        object.visualizer = this;\n        this._children.push(object);\n        if (object.isIRenderable) {\n            object.onAdded(this);\n        }\n    },\n    /**\n     * 移除mesh，释放由MeshVisualizer创建的内部资源\n     * @param {THREE.Object3D|IRenderable}object\n     * @param {boolean}dispose\n     * @public\n     */\n    remove(object, dispose) {\n\n        const { Pass, destroyObject } = Cesium;\n\n        for (var i = 0; i < this._children.length; i++) {\n            if (this._children[i] == object) {\n\n                this._children.splice(i, 1);\n            }\n        }\n\n        //release drawCommands & pickIds\n        traverseObject3D(object, (object) => {\n\n            if (object.isObject3D) {\n\n                var geometry = object.geometry, material = object.material;\n                if (material && geometry) {\n                    if (dispose) {\n                        var materials = Array.isArray(material) ? material : [material];\n                        materials.forEach(material => material.dispose())\n                        geometry.dispose();\n                        object.dispatchEvent({ type: 'dispose' }, object);\n                    } else {\n                        this.renderer._cesiumVertextArrays.delete(geometry);\n                    }\n                }\n\n            }\n            else {\n                if (dispose && object.isRuntimeMesh) {\n                    object.destroy && object.destroy()\n                }\n\n                if (object.renderItems) {\n\n                    var renderItems = Array.isArray(object.renderItems) ? object.renderItems : [object.renderItems];\n                    renderItems.forEach((renderItem) => {\n                        if (renderItem.destroy) renderItem.destroy()\n                        renderItem.material = null;\n                    });\n                    delete object.renderItems;\n\n                }\n            }\n\n            if (object.pickId || object.pickObject) {\n                let pickId = object.pickId || object.pickObject.pickId;\n                if (pickId) {\n                    let i = this._pickIds.indexOf(pickId)\n                    if (i >= 0) {\n                        this._pickIds.splice(i, 1);\n                    }\n                    delete object.pickId;\n                    pickId.destroy && pickId.destroy()\n                }\n                if (object.pickObject) {\n                    delete object.pickObject.pickId\n                    delete object.pickObject\n                }\n            }\n\n        });\n\n        //remove drawCommands \n        const cesiumScene = this._scene;\n        const frustumCommandsList = cesiumScene._view.frustumCommandsList\n        const passes = [Pass.ENVIRONMENT, Pass.OPAQUE, Pass.TRANSLUCENT, Pass.CESIUM_3D_TILE];\n\n        frustumCommandsList.forEach(frustumCommands => {\n            passes.forEach(pass => {\n                let commandList = frustumCommands.commands[pass];\n                let newCommandList = [];\n                commandList.forEach(command => {\n                    if (command.isDestroyed && command.isDestroyed()) {\n                        return;\n                    }\n                    if (!command.vertexArray.isDestroyed()) newCommandList.push(command)\n                })\n\n                commandList.length = 0;\n                newCommandList.forEach(command => {\n                    commandList.push(command);\n                })\n            })\n        });\n\n        //Destroy released shaders and textures\n        cesiumScene._shaderFrameCount = 199;\n\n        if (object.isIRenderable) {\n            object.onRemoved(this);\n        }\n    },\n    /**\n    *\n    *拾取点，用局部坐标系表达。内部使用Cesium.Scene.pickPosition和MeshVisualizer.worldCoordinatesToLocal实现。\n    * @param {Cesium.Cartesian2}windowPosition\n    * @param {Cesium.Cartesian3}[result]\n    * @return {Cesium.Cartesian3}\n    * @public\n    */\n    pickPosition(windowPosition, result) {\n        if (!this._scene) {\n            return undefined;\n        }\n        surfacePointLocal = this._scene.pickPosition(windowPosition, surfacePointLocal);\n\n        if (!surfacePointLocal) {\n            return undefined;\n        }\n\n        this.worldCoordinatesToLocal(surfacePointLocal, surfacePointLocal);\n        Cartesian3.clone(surfacePointLocal, result);\n        return result;\n    },\n    /**\n    *\n    *创建一条射线，用局部坐标系表达\n    * @param {Cesium.Cartesian2}windowPosition\n    * @param {Cesium.Ray}[result]\n    * @param {Cesium.Cartesian3}[up]\n    * @return {Cesium.Ray}\n    * @public\n    */\n    getPickRay(windowPosition, result, up) {\n        if (!this._scene) {\n            return undefined;\n        }\n        const { Cartesian3, Ray } = Cesium;\n        if (!result) {\n            result = Ray();\n        }\n        this._scene.camera.getPickRay(windowPosition, scratchRay);//ray用于计算小球发射点位置，这里射线的起始点是世界坐标，不能像Threejs那样直接拿来计算，需要转成局部坐标\n        surfacePointLocal = this._scene.pickPosition(windowPosition, surfacePointLocal);//射线和局部场景的交点\n\n        if (!surfacePointLocal) {\n            return undefined;\n        }\n\n        Cartesian3.clone(scratchRay.direction, rayDir);\n\n        //世界坐标转局部坐标\n        this.worldCoordinatesToLocal(scratchRay.origin, rayOriginLocal, up);\n        this.worldCoordinatesToLocal(surfacePointLocal, surfacePointLocal, up);\n\n        Cartesian3.add(rayOriginLocal, rayDir, pos);\n        //计算发射方向\n        Cartesian3.subtract(surfacePointLocal, pos, rayDir);\n        Cartesian3.clone(surfacePointLocal, result.origin);\n        Cartesian3.clone(rayDir, result.direction);\n        return result;\n    },\n    /**\n    *世界坐标到局部坐标\n    * @param {Cesium.Cartesian3}worldCoordinates\n    * @param {Cesium.Cartesian3}[result]\n    * @param {Cesium.Cartesian3}[up]\n    * @return {Cesium.Cartesian3}\n    * @public\n    */\n    worldCoordinatesToLocal(worldCoordinates, result, up) {\n        if (!result) {\n            result = new Cartesian3();\n        }\n        var modelMatrix = this._actualModelMatrix;\n        if (up) {\n            if (up.y) {//y up\n                modelMatrix = this._actualModelMatrixYup;\n            }\n            else if (up.x) {\n                modelMatrix = this._actualModelMatrixXup;\n            }\n        }\n\n        Matrix4.inverseTransformation(modelMatrix, world2localMatrix)\n        Matrix4.multiplyByPoint(world2localMatrix, worldCoordinates, result);\n        return result;\n    },\n    /**\n     *局部坐标到世界坐标\n    * @param {Cesium.Cartesian3}localCoordinates\n    * @param {Cesium.Cartesian3}[result]\n    * @param {Cesium.Cartesian3}[up]\n    * @return {Cesium.Cartesian3}\n    * @public\n    */\n    localToWorldCoordinates(localCoordinates, result, up) {\n        if (!result) {\n            result = new Cartesian3();\n        }\n\n        var modelMatrix = this._actualModelMatrix;\n        if (up) {\n            if (up.y) {//y up\n                modelMatrix = this._actualModelMatrixYup;\n            }\n            else if (up.x) {\n                modelMatrix = this._actualModelMatrixXup;\n\n            }\n        }\n\n        Matrix4.multiplyByPoint(modelMatrix, localCoordinates, result);\n        return result;\n    },\n\n\n    //私有方法\n\n    /**\n     * \n     * @private\n     */\n    computeModelMatrix(object) {\n\n        const needsUpdate = object.modelMatrixNeedsUpdate\n\n        if (needsUpdate) {\n\n            const matrixWorld = object.matrixWorld.elements;\n            const modelMatrix = object.modelMatrix;\n            const scope = this;\n\n            if (object.up.y) {//y up\n                Matrix4.multiply(scope._actualModelMatrixYup, matrixWorld, modelMatrix);\n            }\n            else if (object.up.x) {\n                Matrix4.multiply(scope._actualModelMatrixXup, matrixWorld, modelMatrix);\n\n            } else {//z up\n                Matrix4.multiply(scope._actualModelMatrix, matrixWorld, modelMatrix);\n            }\n\n            if (object.forward && object.forward.z) {\n                // glTF 2.0 has a Z-forward convention that must be adapted here to X-forward.\n                Matrix4.multiplyTransformation(\n                    modelMatrix,\n                    Cesium.Axis.Z_UP_TO_X_UP,\n                    modelMatrix\n                );\n            }\n\n        }\n\n    },\n    /**\n     * @private\n     */\n    updateModelMatrix() {\n        const scope = this;\n        const actualModelMatrix = scope._actualModelMatrix\n        const actualModelMatrixYup = scope._actualModelMatrixYup\n        const actualModelMatrixXup = scope._actualModelMatrixXup\n        //z up\n        // Matrix4.multiply(scope.modelMatrix, scope.matrixWorld, actualModelMatrix);\n        Matrix4.clone(scope.modelMatrix, actualModelMatrix)\n        //y up\n        RendererUtils.yUp2Zup(actualModelMatrix, actualModelMatrixYup);\n        //x up\n        Matrix4.multiplyTransformation(\n            actualModelMatrix,\n            Cesium.Axis.X_UP_TO_Z_UP,\n            actualModelMatrixXup\n        );\n\n        //z up\n        Matrix4.inverse(actualModelMatrix, scope._actualModelMatrixInverse);\n        //y up\n        Matrix4.inverse(actualModelMatrixYup, scope._actualModelMatrixYupInverse);\n        //x up\n        Matrix4.inverse(actualModelMatrixXup, scope._actualModelMatrixXupInverse);\n\n        Matrix4.getTranslation(actualModelMatrix, scope._center)\n    },\n\n    //实现Cesium Primitive接口 \n\n    /**\n     * \n     * @param {THREE.Object3D} object \n     * @param {Cesium.FrameState} frameState \n     * @param {boolean} cameraChanged \n     * @private\n     */\n    computeObjectVisibility(object, frameState, cameraChanged) {\n\n        const { INSIDE, OUTSIDE, INTERSECTING } = Intersect;\n\n        if (object.frustumCulled == false) {\n\n            if (object.isCustomInstancedMesh) {\n\n                const availableInstances = object._availableInstances || [];\n                object._availableInstances = availableInstances\n                availableInstances.length = 0;\n                object.instances.forEach(function (instance) {\n                    availableInstances.push(instance);\n                });\n            }\n\n            object.mvis_visibility = INTERSECTING;\n\n            return;\n        } else if (object.isInstancedMesh || !object.geometry) {\n            debugger\n            return;\n        }\n\n        var modelMatrixNeedsUpdate = object.modelMatrixNeedsUpdate;\n        if (!modelMatrixNeedsUpdate && !cameraChanged) return;\n\n        const { camera, cullingVolume } = frameState;\n\n        const geometry = WebGLGeometries.get(object.geometry);\n        const boundingSphere = geometry.boundingSphere\n        const boundingVolume = geometry.boundingVolume;\n\n        if (object.isCustomInstancedMesh) {\n            const instances = object.instances;\n\n            const availableInstances = object._availableInstances || [];\n            object._availableInstances = availableInstances;\n            availableInstances.length = 0;\n\n            instances.forEach(function (instance) {\n\n                if (!instance.show) return;\n\n                const insBs = instance.boundingSphere\n                insBs.radius = boundingSphere.radius * instance.scale;\n\n                var modelMatrixNeedsUpdate = instance.modelMatrixNeedsUpdate\n                if (modelMatrixNeedsUpdate) {\n                    Matrix4.getTranslation(instance.modelMatrix, insBs.center)\n                }\n\n                instance.mvis_distanceToCamera = camera.distanceToBoundingSphere(insBs)\n\n                instance.mvis_visibility = INSIDE;\n                if (object.maxVisibleDistance && instance.mvis_distanceToCamera > object.maxVisibleDistance) {\n                    instance.mvis_visibility = OUTSIDE;\n                    return;\n                }\n\n                instance.mvis_visibility = cullingVolume.computeVisibility(insBs)\n\n                if (instance.mvis_visibility != OUTSIDE) {\n                    availableInstances.push(instance)\n                }\n            });\n\n        }\n        else {\n\n            if (modelMatrixNeedsUpdate) {\n                const modelMatrix = object.modelMatrix\n                Matrix4.multiplyByPoint(modelMatrix, boundingSphere.center, boundingVolume.center);\n                boundingVolume.radius = boundingSphere.radius * Matrix4.getMaximumScale(object.modelMatrix)\n\n            }\n\n            object.mvis_distanceToCamera = camera.distanceToBoundingSphere(boundingVolume)\n            object.mvis_visibility = INSIDE;\n\n            const range = RendererUtils.computeRange(object.mvis_distanceToCamera, boundingVolume.radius, frameState)\n\n            if (range < this.minRange) {\n                object.mvis_visibility = OUTSIDE;\n            }\n            else if (object.maxVisibleDistance && object.mvis_distanceToCamera > object.maxVisibleDistance) {\n                object.mvis_visibility = OUTSIDE;\n            }\n\n            if (object.mvis_visibility != OUTSIDE) {\n                object.mvis_visibility = cullingVolume.computeVisibility(boundingVolume);\n            }\n\n        }\n\n    },\n\n    /**\n     * \n     * @param {WebGLRenderItem} renderItem \n     * @param {Cesium.FrameState} frameState  \n     * @private\n     */\n    isRenderItemVisible(renderItem, frameState) {\n\n        if (!renderItem.frustumCulled) return true;\n\n        const boundingVolume = renderItem.boundingVolume;\n        const distanceToCamera =\n            // renderItem.z;\n            frameState.camera.distanceToBoundingSphere(boundingVolume);\n        var range = RendererUtils.computeRange(distanceToCamera, boundingVolume.radius, frameState)\n        renderItem.distanceToCamera = distanceToCamera;\n\n        if (range < this.minRange) {\n            return false;\n        }\n\n        if (renderItem.object.mvis_visibility == Intersect.INTERSECTING) {\n            var visibility = frameState.cullingVolume.computeVisibility(boundingVolume)\n            if (visibility == Intersect.OUTSIDE) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    /**\n     * \n     * @param {THREE.Light} light \n     * @param {Cesium.FrameState} frameState \n     * @private\n     */\n    isLightVisible(light, frameState) {\n        var bs = light.boundingSphere\n        if (light.modelMatrixNeedsUpdate || !bs) {\n            if (!bs) {\n                bs = new BoundingSphere();\n                light.boundingSphere = bs\n            }\n            Matrix4.getTranslation(light.modelMatrix, bs.center);\n            bs.radius = light.distance;\n        }\n        if (this._cameraChanged || light.modelMatrixNeedsUpdate) {\n            light._exVisible = frameState.cullingVolume.computeVisibility(bs) != Intersect.OUTSIDE\n        }\n        return light._exVisible;\n    },\n    /**\n     * \n     * @param {THREE.Light} light \n     * @param {Cesium.FrameState} frameState \n     * @private\n     */\n    updateExtensionLight(light, frameState) {\n        if (light.matrixAutoUpdate) {\n            light.updateMatrixWorld();\n        }\n        if (light.modelMatrixNeedsUpdate || !light.boundingSphere) {\n            this.computeModelMatrix(light);\n        }\n        this.isLightVisible(light, frameState);\n        light.modelMatrixNeedsUpdate = false\n    },\n    /**\n     * \n     * @param {THREE.Object3D} object  \n     * @param {Cesium.FrameState} frameState \n     * @param {THREE.PerspectiveCamera} camera3jsLocal \n     * @param {WebGLRenderState} currentWebglRenderState\n     * @param {THREE.Frustum}[frustum3js]\n     * @private\n     */\n    projectObject(object, frameState, camera3jsLocal, currentWebglRenderState, frustum3js) {\n\n        if (!object.isObject3D) return;\n\n        if (!object.show && !object.visible) return;\n\n        if (object.isGroup || object.isScene) {\n\n            const children = object.children;\n            for (let i = 0; i < children.length; i++) {\n\n                this.projectObject(children[i], frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n\n            }\n\n        } else {\n\n            if (object.isLOD) {\n\n                if (object.autoUpdate === true)\n                    object.update(camera3jsLocal);\n\n            }\n            else if (object.isLight) {//light\n\n                if (object.isPointLight) {\n                    this.updateExtensionLight(object, frameState);\n                }\n                else {\n                    this.computeModelMatrix(object);\n                }\n\n                currentWebglRenderState.pushLight(object);\n\n                if (object.target) {//更新灯光锁定目标的模型矩阵，来实现改变光照方向\n                    if (object.target.matrixAutoUpdate) {\n                        object.target.updateMatrixWorld();\n                    }\n\n                    this.computeModelMatrix(object.target);\n                }\n\n                if (object.castShadow) {\n                    currentWebglRenderState.pushShadow(object);\n                }\n\n            } else if (object.isMesh || object.isLine || object.isPoints || object.Sprite) {\n\n                if (!object.isCustomInstancedMesh) this.computeModelMatrix(object);\n\n                //计算mesh和实例的可见性 \n                this.computeObjectVisibility(object, frameState, this._cameraChanged, frustum3js);\n                var visible = object.mvis_visibility != Intersect.OUTSIDE;\n\n                // if (visible && frustum3js && object.isRuntimeMesh != true) {\n                //     var geometry = WebGLGeometries.get(object.geometry);\n                //     var bs = geometry.boundingSphere;\n                //     if (!frustum3js.intersectsSphere(bs)) {\n                //         visible = false\n                //     }\n                // }\n\n                if (!visible || (frameState.passes.pick && (object.allowPick == false || object.material.allowPick == false))) {\n\n                    object.modelMatrixNeedsUpdate = false;\n\n                } else {\n                    currentWebglRenderState.pushRenderable(object);\n                }\n\n            }\n\n            const children = object.children;\n            for (let i = 0; i < children.length; i++) {\n\n                this.projectObject(children[i], frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n\n            }\n\n        }\n\n    },\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {THREE.PerspectiveCamera} camera3jsLocal \n     * @param {WebGLRenderState} currentRenderState \n     * @private\n     */\n    updateBackground(frameState, camera3jsLocal, currentRenderState) {\n        const backgroundMesh = this._backgroundMesh;\n        if (backgroundMesh && backgroundMesh.visible) {\n\n            if (this.backgroundIsSkybox) {\n\n                backgroundMesh.scale.setScalar(1);\n                backgroundMesh.updateMatrixWorld();\n                backgroundMesh.matrixWorld.copyPosition(camera3jsLocal.matrixWorld);\n                var distance = Cartesian3.distance(frameState.camera.positionWC, this._center)\n                if (distance > this.backgroundVisibleDistance) {\n                    backgroundMesh.material.uniforms.opacity.value = 1.0 - (distance - this.backgroundVisibleDistance) / this.backgroundVisibleDistance;\n                } else {\n                    backgroundMesh.material.uniforms.opacity.value = 1;\n                }\n            } else {\n                backgroundMesh.updateMatrixWorld();\n            }\n\n            this.computeModelMatrix(backgroundMesh);\n            this.renderer._webglRenderItems.getAndUpdate(backgroundMesh, frameState, false, currentRenderState, camera3jsLocal);\n\n        }\n    },\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @private\n     */\n    updateSunLight(frameState) {\n\n        if (!this._sunLight) return;\n        const scope = this;\n        var scene = scope._scene\n        var sunLightCesium = scene.light;\n        var sunLight = scope._sunLight;\n\n        var sunLightShadow = sunLight.shadow\n        var shadowCamera = sunLightShadow.camera;\n        var shadowState = frameState.shadowState;\n        var uniformState = frameState.context.uniformState;\n        const sunPositionWC = uniformState._sunPositionWC,\n            sunDirectionWC = uniformState._sunDirectionWC,\n            sunPositionLC = scope._sunPositionLC,\n            sunTargetPositionLC = scope._sunTargetPositionLC,\n            sunTargetPositionWC = scope._sunTargetPositionWC,\n            sunDirectionLC = scope._sunDirectionLC;\n        this.worldCoordinatesToLocal(sunPositionWC, sunPositionLC, { y: 1 });\n        Cartesian3.subtract(sunPositionWC, sunDirectionWC, sunTargetPositionWC);\n        this.worldCoordinatesToLocal(sunTargetPositionWC, sunTargetPositionLC, { y: 1 });\n        Cartesian3.subtract(sunPositionLC, sunTargetPositionLC, sunDirectionLC);\n\n        if (!sunLight) return;\n\n        var sunLightTarget = sunLight.target;\n        Color.clone(sunLight.color, sunLightCesium.color);\n        sunLight.intensity = sunLightCesium.intensity;\n\n        //position,direction\n        var sunLightShadowFar = this.sunLightShadowFar;\n        var sunLightShadowRange = this.sunLightShadowRange;\n        var sunLightShadowSize = this.sunLightShadowSize;\n        sunLight.position.copy(sunPositionLC).normalize().multiplyScalar(sunLightShadowFar);//shadowState.farPlane)\n\n        sunLight.updateMatrixWorld();\n        sunLightTarget.updateMatrixWorld();\n        this.computeModelMatrix(sunLight)\n        this.computeModelMatrix(sunLightTarget);\n\n        //shadow,camera\n        if (sunLightShadowSize != sunLightShadow.mapSize.x) {\n            sunLightShadow.mapSize.set(sunLightShadowSize, sunLightShadowSize)\n            sunLightShadow.__mapVersion = 0;\n        }\n        shadowCamera.left = -sunLightShadowRange;\n        shadowCamera.right = sunLightShadowRange;\n        shadowCamera.top = sunLightShadowRange;\n        shadowCamera.bottom = -sunLightShadowRange;\n        shadowCamera.far = sunLightShadowFar * 2;// shadowState.farPlane ;\n        shadowCamera.near = 0.1//shadowState.nearPlane;\n        shadowCamera.updateProjectionMatrix();\n    },\n\n    /**\n     * \n     * @param {THREE.Scene|MeshVisualizer} scene  \n     * @param {Cesium.FrameState} frameState \n     * @param {THREE.Camera} camera3jsLocal \n     * @param {WebGLRenderState} currentWebglRenderState\n     * @param {THREE.Frustum}[frustum3js]\n     * @private\n     */\n    projectObjects(scene, frameState, camera3jsLocal, currentWebglRenderState, frustum3js) {\n\n        const dynamicRenderables = currentWebglRenderState.dynamicRenderables;\n        //level1\n        scene.children.forEach(object => {\n\n            //IRenderable\n            if (typeof object.render == 'function') {\n                object.render(frameState, dynamicRenderables, this.renderer, camera3jsLocal, currentWebglRenderState);\n            }\n\n            if (!object.visible && !object.show) return;\n\n            if (object.isObject3D) {\n                if (object.matrixAutoUpdate || object.modelMatrixNeedsUpdate) {\n                    object.updateMatrixWorld();\n                    this.computeModelMatrix(object);\n                }\n            }\n\n        });\n\n        // this.updateBackground(frameState, camera3jsLocal);\n        //\n\n        if (scene.isMeshVisualizer) {\n\n            const children = scene.children;\n            for (let i = 0; i < children.length; i++) {\n                this.projectObject(children[i], frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n            }\n\n        } else {\n            this.projectObject(scene, frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n\n        }\n\n        if (this.useSunLight && this._sunLight) {\n            var sunLight = this._sunLight;\n            var children = sunLight.children;\n            for (let i = 0; i < children.length; i++) {\n                this.projectObject(children[i], frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n            }\n            this.projectObject(sunLight.shadow.camera, frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n\n        }\n\n        for (let i = 0; i < dynamicRenderables.length; i++) {\n\n            this.projectObject(dynamicRenderables[i], frameState, camera3jsLocal, currentWebglRenderState, frustum3js);\n\n        }\n\n    },\n\n    /**\n     *  \n     * @param {Cesium.FrameState} frameState \n     * @param {WebGLRenderState} currentRenderState \n     * @param {THREE.Camera}[camera3js]\n     * @param {THREE.Frustum}[frustum3js]\n     * @private \n     */\n    createOrUpdateCommands(frameState, currentRenderState, camera3js, frustum3js) {\n\n        var wireframeChanged = false;\n        var sysWireframe = frameState.camera._scene._globe._surface.tileProvider._debug.wireframe;\n\n        if (sysWireframe != this._sysWireframe) wireframeChanged = true;\n        this._sysWireframe = sysWireframe;\n\n        const camera = frameState.camera, frustum = camera.frustum, cameraChanged = this._cameraChanged;\n\n        Matrix4.multiply(frustum.projectionMatrix, camera.viewMatrix, _projScreenMatrix);\n\n        const webGLRenderList = currentRenderState.renderList,\n            renderables = currentRenderState.renderables;\n        /**\n         * @type {WebGLRenderItems}\n         */\n        const webglRenderItems = this.renderer._webglRenderItems;\n        const optimizeInitCount = this.optimizeInitCount, optimizeCommandInit = this.optimizeCommandInit;\n\n        var loadingCommands = [];\n\n        for (var i = 0, l = renderables.length; i < l; i++) {\n\n            const object = renderables[i];\n\n            //\n            if (optimizeCommandInit && loadingCommands.length >= optimizeInitCount) continue;\n\n            //three.js's object\n\n\n            const renderItems = webglRenderItems.getAndUpdate(object, frameState, sysWireframe, currentRenderState, camera3js);\n\n            const modelMatrixNeedsUpdate = object.modelMatrixNeedsUpdate || this.modelMatrixNeedsUpdate;\n            var visibilityNeedsUpdate = modelMatrixNeedsUpdate || cameraChanged;\n\n            if (renderItems.length == 1) {\n                renderItems[0].visible = true;\n                visibilityNeedsUpdate = false;\n            }\n\n            for (let j = 0, lj = renderItems.length; j < lj; j++) {\n\n                const renderItem = renderItems[j];\n                const boundingVolume = renderItem.boundingVolume;\n                Matrix4.multiplyByPoint(_projScreenMatrix, boundingVolume.center, _vector3);\n                renderItem.z = _vector3.z;\n\n                if (renderItem.material.visible == false) continue;\n\n                if (visibilityNeedsUpdate || renderItem.visible == undefined) {\n                    renderItem.visible = this.isRenderItemVisible(renderItem, frameState, frustum3js);\n                }\n\n                if (renderItem.visible == false) {\n                    continue;\n                }\n\n                // if (frustum3js) {\n                //     if (!frustum3js.intersectsSphere(renderItem.boundingSphere)) {\n                //         continue;\n                //     }\n                // }\n\n                //\n\n                if (!renderItem.loaded) {\n                    if (optimizeCommandInit && loadingCommands.length >= optimizeInitCount) return;\n\n                    loadingCommands.push(renderItem);\n                    renderItem.loaded = true;\n                }\n\n                //\n\n                if (object == this._backgroundMesh) continue;\n                webGLRenderList.push(renderItem);\n            }\n\n        }\n\n        webGLRenderList.sort();\n\n    },\n\n    //for shadowMap\n    /**\n     * \n     * @param {*} scene \n     * @param {*} frameState \n     * @param {*} camera3js  \n     * @returns {WebGLRenderState}\n     * @private\n     */\n    getAndUpdateRenderState(scene, frameState, camera3js, frustum3js) {\n\n        const webglRenderStates = this.renderer._webglRenderStates;\n        const currentRenderState = webglRenderStates.get(scene, frameState.camera);\n        currentRenderState.init();\n\n        this.updateSunLight(frameState);\n        this.updateBackground(frameState, camera3js, currentRenderState);\n        this.projectObjects(scene, frameState, camera3js, currentRenderState, frustum3js);\n        // this.createOrUpdateCommands(frameState,  currentRenderState);\n        return currentRenderState;\n    },\n\n    /**\n    *Cesium Primitive接口方法，渲染程序入口，必须实现才能最终渲染到cesium场景\n    * @param {Cesium.FrameState}frameState\n    * @param {Object3D}[scene]  \n    * @param {Cesium.DrawCommand[]}[renderList]\n    */\n    update(frameState, scene, renderList) {\n        if (frameState.mode !== Cesium.SceneMode.SCENE3D) return;\n        this.init(frameState);\n\n        if (!this._ready || (!scene && !this.show)) {//如果未准备好则不加入渲染队列\n            return;\n        }\n\n        scene = scene || this;\n        if (!scene.geometry && scene.children.length == 0) return;\n\n        const isRenderToRenderTarget = !!renderList;\n        const currentCamera = frameState.camera;\n\n        this.updateSunLight(frameState);\n        if (!isRenderToRenderTarget && frameState.passes.render) {\n            this.mainCamera = currentCamera;\n            this.beforeUpdate.raiseEvent(frameState);\n        }\n\n        /**\n         * @type {WebGLRenderer}\n         * @private\n         */\n        const renderer = this.renderer;\n        const webgglShadowMap = renderer.shadowMap;\n        /**\n         * @type {WebGLRenderStates}\n         */\n        const webglRenderStates = renderer._webglRenderStates;\n        const currentWebglRenderState = webglRenderStates.get(scene, currentCamera);\n        const currentWebglRenderList = currentWebglRenderState.renderList;\n        const backgroundMesh = this._backgroundMesh;\n        const commandList = isRenderToRenderTarget ? renderList : frameState.commandList;\n\n        //\n        if (frameState.passes.offscreen || frameState.passes.depth || frameState.passes.pick) {\n            if (this.mainCamera) webglRenderStates.get(scene, this.mainCamera).getDrawCommands(commandList, frameState);\n            else currentWebglRenderList.getDrawCommands(commandList, frameState);\n            return;\n        };\n\n        currentWebglRenderState.lights = this._lights;\n        currentWebglRenderState.init();\n        renderer._webglRenderItems.changingState.maxChangingCount = this.maxChangingCount;\n\n        if (this._modelMatrixNeedsUpdate) {\n            if (this._backgroundMesh) {\n                this._backgroundMesh.modelMatrixNeedsUpdate = true\n            }\n            this.updateModelMatrix();\n        }\n\n        //\n\n        var camera3js;\n        var referenceFrame = currentCamera._referenceFrame || {\n            matrix: this._actualModelMatrixYup,\n            inverseMatrix: this._actualModelMatrixYupInverse\n        };\n\n        var _localClippingEnabled = false, _clippingEnabled = false;\n        const clipping = renderer._clipping;\n\n\n        if (currentCamera.isOrthographicCamera) {\n            camera3js = CameraUtils.toOrthographicCamera3js(currentCamera, null, referenceFrame);\n        }\n        else {\n            camera3js = CameraUtils.toPerspectiveCamera3js(currentCamera, null, referenceFrame);\n        }\n        if (!currentCamera._referenceFrame)\n            camera3js._referenceFrame = referenceFrame;\n\n        _localClippingEnabled = renderer.localClippingEnabled;\n        _clippingEnabled = clipping.init(renderer.clippingPlanes, _localClippingEnabled, camera3js);\n\n        currentWebglRenderState.clippingEnabled = _clippingEnabled\n        currentWebglRenderState.localClippingEnabled = _localClippingEnabled\n\n        //\n        if (!isRenderToRenderTarget && frameState.passes.render) {\n            scene.children.forEach(object => {\n                //IRenderable\n                if (object.isIRenderable && object.onBeforeRender) {\n                    object.onBeforeRender(frameState, this.renderer, camera3js, currentWebglRenderState);\n                }\n            })\n        }\n\n\n        //\n\n        const frustum3js = isRenderToRenderTarget ? CameraUtils.getFrustum3js(camera3js) : null;\n        this.projectObjects(scene, frameState, camera3js, currentWebglRenderState, frustum3js);\n\n        const dynamicRenderables=currentWebglRenderState.dynamicRenderables\n        const renderables = currentWebglRenderState.renderables;\n        const shadowsArray = currentWebglRenderState.shadowsArray;\n        const lightsArray = currentWebglRenderState.lightsArray\n\n        //onBeforeRender  \n\n        if (_clippingEnabled === true) clipping.beginShadows();\n\n        var camera3js2 = null, oldReferenceFrame = currentCamera._referenceFrame\n\n        if (currentCamera.isOrthographicCamera)\n            camera3js2 = CameraUtils.toOrthographicCamera3js(currentCamera, null, referenceFrame);\n        else\n            camera3js2 = CameraUtils.toPerspectiveCamera3js(currentCamera, null, referenceFrame)\n\n        for (let i = 0; i < renderables.length; i++) {\n            const object = renderables[i];\n\n            if (!object.visible || !object.onBeforeRender || object.onBeforeRender == THREE.Object3D.prototype.onBeforeRender) {\n                continue;\n            }\n\n            var referenceFrame = oldReferenceFrame || {\n                matrix: this._actualModelMatrixYup,\n                inverseMatrix: this._actualModelMatrixYupInverse\n            };\n\n            camera3js2._referenceFrame = referenceFrame;\n\n            object.onBeforeRender(renderer, scene, camera3js2, this._scene);\n\n            camera3js2._referenceFrame = oldReferenceFrame;\n\n        }\n\n        if (this.useSunLight && this._sunLight) {\n            if (this._sunLight.castShadow && !frameState.shadowState.shadowsEnabled) {\n                currentWebglRenderState.pushShadow(this._sunLight);\n            }\n        }\n        //shadowMap \n        if (!webgglShadowMap.enabled) {\n            shadowsArray.length = 0;\n        }\n        if (webgglShadowMap.autoUpdate) {\n            webgglShadowMap.render(shadowsArray, scene, frameState, this);\n        }\n\n        //\n\n        //更新灯光  \n        if (lightsArray.length == 0) currentWebglRenderState.pushLight(this._defaultAmbientLight);\n        if (this.useSunLight && this._sunLight) {\n            currentWebglRenderState.pushLight(this._sunLight);\n        }\n        currentWebglRenderState.setupLights(currentCamera);\n        //light extension:point lights \n        this.fixedLights.forEach(light => {\n            this.updateExtensionLight(light, frameState);\n        });\n        this.partialLights.forEach(light => {\n            this.updateExtensionLight(light, frameState);\n        });\n        this._fixedWebGLLights.setup(this.fixedLights, null, currentCamera, frameState);\n        this._partialWebGLLights.setup(this.partialLights, null, currentCamera, frameState);\n\n        //\n        if (_clippingEnabled === true) clipping.endShadows();\n\n        //\n\n        this.createOrUpdateCommands(frameState, currentWebglRenderState, camera3js, frustum3js);\n\n        //background\n        var backgroundRenderItems;\n        if (backgroundMesh) {\n            this.updateBackground(frameState, camera3js, currentWebglRenderState);\n            backgroundRenderItems = backgroundMesh.renderItems;\n            if (!this.backgroundIsSkybox && backgroundRenderItems) {\n                currentWebglRenderList.push(backgroundRenderItems[0]);\n            }\n        }\n\n        currentWebglRenderList.getDrawCommands(commandList, frameState);\n\n        //effect passes\n        for (let i = 0; i < this.effects.length; i++) {\n            const effect = this.effects[i];\n            if (!effect.enabled || (!effect.preUpdate && !effect.preUpdate)) continue;\n            if (!effect.name) effect.name = 'effect-' + Cesium.createGuid();\n\n            effect.preUpdate(scene, camera3js, frameState, currentWebglRenderState);\n\n            //render effect\n            const effectSelected = effect.selected ? effect.selected : renderables;\n            for (let j = 0; j < effectSelected.length; j++) {\n                const object = effectSelected[j];\n                if (object.isRuntimeMesh) continue;\n\n                const renderItems = object.renderItems;\n                const geometry = WebGLGeometries.get(object.geometry);\n                const objectMaterial = object.material;\n                const isMultiMaterial = Array.isArray(objectMaterial);\n                for (let k = 0; k < renderItems.length; k++) {\n                    const renderItem = renderItems[k];\n                    const materialIndex = renderItem.materialIndex;\n                    const material = isMultiMaterial ? objectMaterial[materialIndex] : objectMaterial;\n\n                    if (object.onBeforeRender) object.onBeforeRender(renderer, scene, camera3js, geometry, material);\n\n                    const drawCommand = renderer._webglRenderItems.getAndUpdateDerived(\n                        object, geometry, material, renderItem, effect.name, frameState, currentWebglRenderState, camera3js\n                    );\n                    if (!drawCommand) continue;\n\n                    if (object.onAfterRender) object.onAfterRender(renderer, scene, camera3js, geometry, material);\n\n                    commandList.push(drawCommand);\n                }\n            }\n            if (effect.postUpdate) effect.postUpdate(scene, camera3js, frameState, currentWebglRenderState);\n        }\n\n        // \n        const environmentState = this._scene._environmentState;\n        const backgroundIsSkybox = this.backgroundIsSkybox && backgroundMesh\n            && backgroundMesh.visible && backgroundMesh.renderItems;\n\n        //BeforeFinalRender\n        if (isRenderToRenderTarget) {\n\n            if (environmentState.isMoonVisible && this.isMoonVisible)\n                commandList.unshift(environmentState.moonCommand)\n\n            if (environmentState.isSunVisible && this.isSunVisible)\n                commandList.unshift(environmentState.sunDrawCommand)\n\n            if (backgroundIsSkybox) {\n                var skyboxCommand = backgroundRenderItems[0].drawCommand;\n                commandList.unshift(skyboxCommand);\n            }\n\n            if (this.mainCamera != currentCamera)\n                currentWebglRenderState.init()\n\n\n        } else {\n\n            for (let i = 0; i < renderables.length; i++) {\n                var object = renderables[i]\n                if (object.onBeforeFinalRender) {\n                    object.onBeforeFinalRender(renderer, scene, camera3js2, this._scene)\n                }\n                endFrame(renderables[i]);\n            }\n            for (let i = 0; i < lightsArray.length; i++) {\n                lightsArray[i].modelMatrixNeedsUpdate = false;\n            }\n\n            if (environmentState.skyAtmosphereCommand && backgroundIsSkybox) {\n                var skyboxCommand = backgroundRenderItems[0].drawCommand;\n                environmentState.isSkyAtmosphereVisible = true;\n                if (backgroundMesh.material.uniforms.opacity.value > 0.5)\n                    environmentState.skyAtmosphereCommand = skyboxCommand;\n            }\n\n            this.afterUpdate.raiseEvent(frameState);\n            \n            //清空渲染对象数组和光影数组\n            renderables.length = 0;\n            dynamicRenderables.length = 0;\n            lightsArray.length = 0\n            shadowsArray.length = 0\n        }\n\n        this._modelMatrixNeedsUpdate = false;\n        this.frameNumber = frameState.frameNumber;\n\n        this._environmentChanged = false;\n    },\n    /**\n    *释放资源\n    */\n    destroy() {\n        this.beforeDestroy.raiseEvent(this);\n        this._ready = false;\n        MeshVisualizer.traverseObject3D(this, (object) => {\n            this.remove(object);\n            object.dispose && object.dispose();\n            object.destroy && object.destroy();\n        }, false);\n\n        this.renderer.dispose()\n\n        for (var i in this._textureCache) {\n            if (this._textureCache.hasOwnProperty(i)) {\n                delete this._textureCache[i];\n            }\n        }\n\n        this._textureCache = {};\n\n        if (this._pickIds) {\n            for (i = 0; i < this._pickIds.length; ++i) {\n                this._pickIds[i].destroy && this._pickIds[i].destroy();\n            }\n        }\n        this._pickIds.splice(0);\n    },\n    traverse(callback) {\n        traverseObject3D(this, callback)\n    }\n};\n \n/**\n*\n*遍历节点\n*@param {Object3D}root\n*@param {MeshVisualizer~TraverseCallback}traverseFunc 访问每个节点时回调该函数，进行相关操作。回调函数包含一个参数，traverseArgs，其中封装了一个属性cancelCurrent，可以通过改变此属性达到终止遍历当前节点的子节点\n*@param {Boolean}visibleOnly visibleOnly为true时仅遍历可见的节点，如果父级节点不可见则不再访问其子节点\n*@private\n*/\nMeshVisualizer.traverse = function (node, traverseFunc, visibleOnly, scratchTraverseArgs) {\n    if (!node) {\n        return;\n    }\n    if (!scratchTraverseArgs) {\n        scratchTraverseArgs = {\n            cancelCurrent: false,\n            cancelAll: false\n        };\n    }\n    scratchTraverseArgs.cancelCurrent = false;\n    if (visibleOnly && (!node.show && !node.visible)) {\n        return;\n    }\n\n    // if (node.isMeshVisModel && !node.visible) return;\n\n    if (!(node instanceof MeshVisualizer)\n        && ((node.geometry && node.material)\n            || node.isLight || node.isGroup\n            || node.isObject3D || node.isScene)\n    ) {\n\n        traverseFunc(node, scratchTraverseArgs);\n    }\n\n    // if (node.isMeshVisModel && node.root) node = node.root;\n\n    const children = node.children;\n    if (children) {\n        for (var i = 0; i < children.length; i++) {\n            if (scratchTraverseArgs.cancelCurrent) {\n                continue;\n            }\n            if (scratchTraverseArgs.cancelAll) {\n                break;\n            }\n            MeshVisualizer.traverse(node.children[i], traverseFunc, visibleOnly, scratchTraverseArgs);\n        }\n    } else if (node.scene) {\n        MeshVisualizer.traverse(node.scene, traverseFunc, visibleOnly, scratchTraverseArgs);\n    }\n}\n\n\nfunction traverseObject3D(node, callback, parent) {\n    if (node.length) {\n        for (let i = 0; i < node.length; i++) {\n            const child = node[i];\n            traverseObject3D(child, callback, node);\n        }\n    }\n    else {\n        callback(node, parent);\n        const children = node.children;\n        if (!children) return;\n        const l = children.length;\n        for (let i = 0; i < l; i++) {\n            const child = children[i];\n            traverseObject3D(child, callback, node);\n        }\n    }\n}\nMeshVisualizer.prototype.traverseObject3D = traverseObject3D\n\n/**\n*\n*@MeshVisualizer~TraverseCallback\n*@param {Mesh|LOD|MeshVisualizer|Object}node\n*@param {Object}traverseArgs\n*@param {Boolean}traverseArgs.cancelCurrent 为true时终止遍历当前节点的子节点\n*@param {Boolean}traverseArgs.cancelAll 为true时终止遍历，退出遍历循环\n*/\n\n\n//MeshVisualizer属性\nObject.defineProperties(MeshVisualizer.prototype, {\n    children: {\n        get() {\n            return this._children;\n        }\n    },\n    /**\n    * @readonly\n    * @type {Cesium.Matrix4}\n    */\n    modelMatrix: {\n        get() {\n            return this._modelMatrix;\n        },\n        set(val) {\n            if (val) {\n                this._modelMatrix = val;\n                // this._matrixWorld.elements = this._modelMatrix\n            }\n        }\n    },\n    sunPositionLC: {\n        get() {\n            return this._sunPositionLC;\n        }\n    },\n    sunDirectionLC: {\n        get() {\n            return this._sunDirectionLC;\n        }\n    },\n\n    background: {\n        get() {\n            return this._background\n        },\n        set(background) {\n            if (background && background.isColor) return;\n            this._background = background;\n\n            const backgroundMesh = this._backgroundMesh;\n            if (backgroundMesh) {\n                if (background) {\n                    const material = backgroundMesh.material;\n                    if (material.envMap != background) {\n                        material.needsUpdate = true;\n                    }\n                    material.envMap = background;\n                    backgroundMesh.visible = true;\n                } else {\n                    backgroundMesh.visible = false;\n                }\n            }\n        }\n    },\n    backgroundSize: {\n        get() {\n            return this._backgroundSize;\n        },\n        set(backgroundSize) {\n            backgroundSize = backgroundSize || 1;\n            this._backgroundSize = backgroundSize;\n            const backgroundMesh = this._backgroundMesh;\n            if (backgroundMesh) {\n                backgroundMesh.scale.setScalar(backgroundSize)\n            }\n        }\n    },\n    backgroundMesh: {\n        get() {\n            return this._backgroundMesh;\n        }\n    },\n\n    /**\n     * @type {THREE.CubeTexture}\n     * @memberof MeshVisualizer.prototype\n     */\n    environment: {\n        get() {\n            return this._environment;\n        },\n        set(val) {\n            const scope = this;\n            const environment = scope._environment;\n            if (val && val.isTexture) {\n                scope._environment = val;\n                scope._environmentChanged = true;\n            } else if (environment) {\n                let uuid = environment.uuid;\n                let envMap = scope._textureCache[uuid];\n                if (envMap && envMap._createByMeshVisualizer) {\n                    envMap.destroy();\n                    delete scope._textureCache[uuid];\n                }\n                scope._environment = val;\n                scope._environmentChanged = true;\n            }\n\n        }\n    },\n    pickIds: {\n        get() {\n            return this._pickIds;\n        }\n    },\n    /**\n     * @type {Cesium.Scene}\n     */\n    scene: {\n        set: function (val) {\n            this._scene = val;\n        },\n        get: function () {\n            return this._scene;\n        }\n    },\n    /**\n     * @type {Cesium.FrameState}\n     */\n    frameState: {\n        get: function () {\n            if (!this._scene) {\n                return undefined;\n            }\n            return this._frameState;\n        }\n    },\n\n    /**\n     * @type {Boolean}\n     */\n    show: {\n        get: function () {\n            return this._show;\n        },\n        set: function (val) {\n            this._show = val;\n        }\n    },\n\n    /**\n     * @type {Boolean}\n     */\n    ready: {\n        get: function () {\n            return this._ready;\n        }\n    },\n    minRange: {\n        get: function () {\n            return this._minRange;\n        },\n        set: function (val) {\n            const scope = this;\n            if (scope._minRange != val) {\n                scope._minRange = val\n                scope._cameraChanged = true;\n                requestAnimationFrame(() => {\n                    scope._cameraChanged = false;\n                })\n            }\n        }\n    }\n});\n\nexport default MeshVisualizer;",
    "﻿\n\nvar yUpToZUp, scratchTranslation, scratchQuaternion, scratchScale, scratchTranslationQuaternionRotationScale, clearCommandScratch;\n\n\n/**\n*\n*@constructor\n*@memberof Cesium\n*/\nfunction RendererUtils() { }\n\n\n/**\n *  \n *  \n * @param {number} distanceToCamera  \n * @param {number} radius  \n * @param {Cesium.FrameState} frameState  \n * @param {number} [progressiveResolutionHeightFraction]  \n * @returns {Number} range:in pixels\n */\nRendererUtils.computeRange = function (distanceToCamera, radius, frameState, progressiveResolutionHeightFraction) {\n\n    var _Cesium = Cesium;\n    var heightFraction = _Cesium.defaultValue(progressiveResolutionHeightFraction, 1.0);\n\n    var camera = frameState.camera;\n    var context = frameState.context;\n    var height = context.drawingBufferHeight * heightFraction;\n\n    var distance = Math.max(distanceToCamera, _Cesium.Math.EPSILON7);\n\n    var sseDenominator = camera.frustum.sseDenominator;\n    var geometricError = radius;\n    var range = (geometricError * height) / (distance * sseDenominator);\n    range /= frameState.pixelRatio;\n    return range;\n\n}\nvar scratchO;\n/**\n * @article https://www.iquilezles.org/www/articles/sphereproj/sphereproj.htm\n * @code http://www.shadertoy.com/view/XdBGzd?\n * @param {Cesium.BoundingSphere} sph sphere in world space\n * @param {Cesium.Matrix4} cam camera matrix (world to camera)\n * @param {float} fl projection (focal length) \n */\nRendererUtils.projectSphere = function (sph, cam, fl) {\n    var _Cesium = Cesium;\n    if (!scratchO) scratchO = new _Cesium.Cartesian4();\n\n    // transform to camera space\n    // vec3  o = (cam*vec4(sph.xyz,1.0)).xyz; \n    var o = _Cesium.Matrix4.multiplyByPoint(cam, sph.center, scratchO);\n    var r2 = sph.radius * sph.radius;\n    var z2 = o.z * o.z;\n    var l2 = _Cesium.Cartesian3.dot(o, o);\n\n    return -Math.PI * fl * fl * r2 * Math.sqrt(Math.abs((l2 - r2) / (r2 - z2))) / (r2 - z2);\n}\n\n/**\n*使用帧缓冲技术，执行渲染命令，渲染到纹理  \n*@param {Cesium.DrawCommand|Array<Cesium.DrawCommand>}drawCommand 渲染命令（集合）\n*@param {Cesium.FrameState}frameState 帧状态对象，可以从Cesium.Scene中获取\n*@param {Cesium.Texture}outpuTexture 将渲染到的目标纹理对象\n*@param {Cesium.Texture}[outputDepthTexture] 可选，输出的深度纹理\n*/\nRendererUtils.renderToTexture = function (drawCommand, frameState, outputTexture, outputDepthTexture) {\n    const { Framebuffer, Texture, PixelFormat, PixelDatatype, ClearCommand, Color } = Cesium;\n\n    var drawCommands = Array.isArray(drawCommand) ? drawCommand : [drawCommand];\n    var context = frameState.context;\n\n    var framebuffer = null, destroy = false;\n    if (outputTexture instanceof Framebuffer) {\n        framebuffer = outputTexture;\n    }\n    if (!framebuffer) {\n        if (!outputDepthTexture\n            || outputDepthTexture.width != outputTexture.width\n            || outputDepthTexture.height != outputTexture.height) {\n            outputDepthTexture = new Texture({\n                context: context,\n                width: outputTexture.width,\n                height: outputTexture.height,\n                pixelFormat: PixelFormat.DEPTH_COMPONENT,\n                pixelDatatype: PixelDatatype.UNSIGNED_SHORT\n            })\n\n        }\n        framebuffer = new Framebuffer({\n            context: context,\n            colorTextures: [outputTexture],\n            destroyAttachments: false,\n            depthTexture: outputDepthTexture\n        });\n        destroy = true;\n    }\n    if (!clearCommandScratch) {\n        clearCommandScratch = new ClearCommand({\n            color: new Color(0.0, 0.0, 0.0, 0.0)\n        });\n    }\n    var clearCommand = clearCommandScratch;\n    clearCommand.framebuffer = framebuffer;\n    clearCommand.renderState = frameState.renderState;\n    clearCommand.execute(context);\n\n    drawCommands.forEach(function (drawCommand) {\n        drawCommand.framebuffer = framebuffer;\n        drawCommand.execute(context);\n    });\n    if (destroy) {\n        framebuffer.destroy();\n    }\n}\n\n/**\n*使用帧缓冲技术，执行渲染命令，渲染到纹理并读取像素值，可以用于实现并行计算  \n*@param {Cesium.DrawCommand|Array<Cesium.DrawCommand>}drawCommand 渲染命令（集合）\n*@param {Cesium.FrameState}frameState 帧状态对象，可以从Cesium.Scene中获取\n*@param {Cesium.Texture}outpuTexture 将渲染到的目标纹理对象\n*@param {Object}[options] \n*@param {Array.<Number>}outputPixels \n*@return {Array.<Number>}outputPixels  输出的像素\n*/\nRendererUtils.renderToPixels = function (drawCommand, frameState, outputTexture, options, pixels) {\n    const { Framebuffer, Texture, PixelFormat, PixelDatatype, ClearCommand, Color } = Cesium;\n\n    var drawCommands = Array.isArray(drawCommand) ? drawCommand : [drawCommand];\n    var context = frameState.context;\n\n    var framebuffer = null, destroy = false;\n    if (outputTexture instanceof Framebuffer) {\n        framebuffer = outputTexture;\n    }\n\n    if (!framebuffer) {\n\n        var outputDepthTexture = new Texture({\n            context: context,\n            width: outputTexture.width,\n            height: outputTexture.height,\n            pixelFormat: PixelFormat.DEPTH_COMPONENT,\n            pixelDatatype: PixelDatatype.UNSIGNED_SHORT\n        })\n\n        framebuffer = new Framebuffer({\n            context: context,\n            colorTextures: [outputTexture],\n            depthTexture: context.depthTexture ? outputDepthTexture : undefined,\n            destroyAttachments: false\n        });\n        destroy = true;\n    }\n    if (!clearCommandScratch) {\n        clearCommandScratch = new ClearCommand({\n            color: new Color(0.0, 0.0, 0.0, 0.0)\n        });\n    }\n    var clearCommand = clearCommandScratch;\n    clearCommand.framebuffer = framebuffer;\n    clearCommand.renderState = frameState.renderState;\n    clearCommand.execute(context);\n\n    drawCommands.forEach(function (drawCommand) {\n        drawCommand.framebuffer = framebuffer;\n        drawCommand.execute(context);\n    });\n    options = options ? options : {};\n\n    pixels = RendererUtils.readPixels(frameState, Object.assign(options, {\n        framebuffer: framebuffer\n    }), pixels);\n    delete options.framebuffer;\n    if (destroy) {\n        framebuffer.destroy();\n    }\n    return pixels;\n}\n\nvar scratchBackBufferArray;\n\n/**\n * Validates a framebuffer.\n * Available in debug builds only.\n * @private\n */\nfunction validateFramebuffer(context) {\n    //>>includeStart('debug', pragmas.debug);\n    if (context.validateFramebuffer) {\n        var gl = context._gl;\n        var status = gl.checkFramebufferStatus(gl.FRAMEBUFFER);\n\n        if (status !== gl.FRAMEBUFFER_COMPLETE) {\n            var message;\n\n            switch (status) {\n                case gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:\n                    message = 'Framebuffer is not complete.  Incomplete attachment: at least one attachment point with a renderbuffer or texture attached has its attached object no longer in existence or has an attached image with a width or height of zero, or the color attachment point has a non-color-renderable image attached, or the depth attachment point has a non-depth-renderable image attached, or the stencil attachment point has a non-stencil-renderable image attached.  Color-renderable formats include GL_RGBA4, GL_RGB5_A1, and GL_RGB565. GL_DEPTH_COMPONENT16 is the only depth-renderable format. GL_STENCIL_INDEX8 is the only stencil-renderable format.';\n                    break;\n                case gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:\n                    message = 'Framebuffer is not complete.  Incomplete dimensions: not all attached images have the same width and height.';\n                    break;\n                case gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:\n                    message = 'Framebuffer is not complete.  Missing attachment: no images are attached to the framebuffer.';\n                    break;\n                case gl.FRAMEBUFFER_UNSUPPORTED:\n                    message = 'Framebuffer is not complete.  Unsupported: the combination of internal formats of the attached images violates an implementation-dependent set of restrictions.';\n                    break;\n            }\n\n            throw new DeveloperError(message);\n        }\n    }\n    //>>includeEnd('debug');\n}\nfunction bindFramebuffer(context, framebuffer) {\n    var _Cesium = Cesium;\n    if (framebuffer !== context._currentFramebuffer) {\n        // this check must use typeof, not defined, because defined doesn't work with undeclared variables.\n        if (typeof WebGLRenderingContext !== 'undefined') {\n            scratchBackBufferArray = [_Cesium.WebGLConstants.BACK];\n        }\n        context._currentFramebuffer = framebuffer;\n        var buffers = scratchBackBufferArray;\n\n        if (_Cesium.defined(framebuffer)) {\n            framebuffer._bind();\n            validateFramebuffer(context);\n\n            // TODO: Need a way for a command to give what draw buffers are active.\n            buffers = framebuffer._getActiveColorAttachments();\n        } else {\n            var gl = context._gl;\n            gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n        }\n\n        if (context.drawBuffers) {\n            context.glDrawBuffers(buffers);\n        }\n    }\n}\n//var pixels;\nvar scratchPixelFormat;\nvar scratchPixelDatatype;\n/**\n * @param {Cesium.FrameState}frameState\n * @param {Object}[readState]\n * @param {number}readState.x\n * @param {number}readState.y\n * @param {number}readState.width\n * @param {number}readState.height\n * @param {Cesium.PixelDatatype}readState.pixelDatatype\n * @param {Cesium.PixelFormat}readState.pixelFormat\n * @param {Cesium.Framebuffer}[readState.framebuffer]\n * @param {ArrayBufferView}pixels\n * @return {ArrayBufferView}\n */\nRendererUtils.readPixels = function (frameState, readState, pixels) {\n    const { DeveloperError, Framebuffer, Texture, PixelFormat, PixelDatatype, ClearCommand, Color } = Cesium;\n\n    var gl = frameState.context._gl;\n\n    readState = readState || {};\n    var x = Math.max(readState.x || 0, 0);\n    var y = Math.max(readState.y || 0, 0);\n    var width = readState.width || gl.drawingBufferWidth;\n    var height = readState.height || gl.drawingBufferHeight;\n    var pixelDatatype = readState.pixelDatatype || PixelDatatype.UNSIGNED_BYTE;\n    var pixelFormat = readState.pixelFormat || PixelFormat.RGBA;\n    var framebuffer = readState.framebuffer || frameState.frameNumber;\n\n    if (width <= 0) {\n        throw new DeveloperError('readState.width must be greater than zero.');\n    }\n\n    if (height <= 0) {\n        throw new DeveloperError('readState.height must be greater than zero.');\n    }\n\n    bindFramebuffer(this, framebuffer);\n    var size = 4;\n    if (pixelFormat == PixelFormat.RGB) {\n        size = 3;\n    } else if (pixelFormat == PixelFormat.ALPHA) {\n        size = 1;\n    }\n\n    if (!pixels) {//|| pixels.length !== size * width * height\n        //|| scratchPixelFormat != pixelFormat || scratchPixelDatatype != pixelDatatype) {\n\n        if (pixelDatatype == PixelDatatype.FLOAT) {\n            pixelDatatype = gl.FLOAT;\n            pixels = new Float32Array(size * width * height);\n        } else if (pixelDatatype == PixelDatatype.UNSIGNED_BYTE) {\n            pixels = new Uint8Array(size * width * height);\n        } else {\n            pixels = new Uint16Array(size * width * height);\n        }\n    }\n    gl.readPixels(x, y, width, height, pixelFormat, pixelDatatype, pixels);\n    scratchPixelFormat = pixelFormat;\n    scratchPixelDatatype = pixelDatatype;\n    return pixels;\n};\n\nvar zUpToYUp;\n/**\n*\n*@param {Cesium.Matrix4}srcMatrix\n*@param {Cesium.Matrix4}dstMatrix\n*@return {Cesium.Matrix4}\n*/\nRendererUtils.yUp2Zup = function (srcMatrix, dstMatrix) {\n    var _Cesium = Cesium;\n    const { Matrix4, Matrix3 } = _Cesium;\n\n    if (!yUpToZUp) {\n        yUpToZUp = Matrix4.fromRotationTranslation(Matrix3.fromRotationX(_Cesium.Math.PI_OVER_TWO));\n        zUpToYUp = Matrix4.inverse(yUpToZUp, new Matrix4());\n    }\n    return Matrix4.multiplyTransformation(srcMatrix, yUpToZUp, dstMatrix);\n}\n\n/**\n*\n*@param {Cesium.Matrix4}srcMatrix\n*@param {Cesium.Matrix4}dstMatrix\n*@return {Cesium.Matrix4}\n*/\nRendererUtils.zUp2YUp = function (srcMatrix, dstMatrix) {\n    var _Cesium = Cesium;\n    const { Matrix4, Matrix3 } = _Cesium;\n\n    if (!yUpToZUp) {\n        yUpToZUp = Matrix4.fromRotationTranslation(Matrix3.fromRotationX(_Cesium.Math.PI_OVER_TWO));\n        zUpToYUp = Matrix4.inverse(yUpToZUp, new Matrix4());\n    }\n    return Matrix4.multiplyTransformation(srcMatrix, zUpToYUp, dstMatrix);\n}\n\n/**\n*平移、旋转或缩放，返回计算之后的模型转换矩阵\n*@param {Cesium.Matrix4}srcModelMatrix\n*@param {Cesium.Cartesian3}[translation=undefined]\n*@param {Object}[rotation=undefined] 旋转参数\n*@param {Cesium.Cartesian3}[rotation.axis] 旋转轴\n*@param {Number}[rotation.angle] 旋转角度\n*@param {Cesium.Cartesian3}[scale] 缩放\n*@param {Cesium.Matrix4}[outModelMatrix] 计算结果矩阵，和返回值一样，但是传递此参数时则返回值不是新创建的Cesium.Matrix4实例\n*@return {Cesium.Matrix4}\n*/\nRendererUtils.computeModelMatrix = function (srcModelMatrix, translation, rotation, scale, outModelMatrix) {\n    if (arguments.length == 0) {\n        return srcModelMatrix;\n    }\n\n    const _Cesium = Cesium;\n    const { Matrix4, Cartesian3, Quaternion } = _Cesium;\n\n    if (!scratchTranslation) scratchTranslation = new Cartesian3();\n    if (!scratchQuaternion) scratchQuaternion = new Quaternion();\n    if (!scratchScale) scratchScale = new Cartesian3();\n    if (!scratchTranslationQuaternionRotationScale) scratchTranslationQuaternionRotationScale = new Matrix4()\n\n    if (!outModelMatrix) {\n        outModelMatrix = new Matrix4();\n    }\n    Matrix4.clone(srcModelMatrix, outModelMatrix);\n\n    if (!translation) {\n        scratchTranslation.x = 0;\n        scratchTranslation.y = 0;\n        scratchTranslation.z = 0;\n    }\n    scratchTranslation.x = translation.x;\n    scratchTranslation.y = translation.y;\n    scratchTranslation.z = translation.z;\n\n    if (!scale) {\n        scratchScale.x = 1;\n        scratchScale.y = 1;\n        scratchScale.z = 1;\n    }\n    scratchScale.x = scale.x;\n    scratchScale.y = scale.y;\n    scratchScale.z = scale.z;\n\n    if (rotation instanceof Quaternion) {\n        Quaternion.clone(rotation, scratchQuaternion);\n    } else {\n        var axis = rotation.axis;\n        var angle = rotation.angle;\n        Quaternion.fromAxisAngle(\n            new Cartesian3(axis.x, axis.y, axis.z),//axis.y=1 y是旋转轴\n            _Cesium.Math.toRadians(angle),\n            scratchQuaternion\n        );\n    }\n\n    //translate,rotate,scale\n\n    Matrix4.fromTranslationQuaternionRotationScale(\n        scratchTranslation, scratchQuaternion,\n        scratchScale, scratchTranslationQuaternionRotationScale);\n\n    Matrix4.multiplyTransformation(\n        outModelMatrix,\n        scratchTranslationQuaternionRotationScale,\n        outModelMatrix);\n    return outModelMatrix;\n}\n\nexport default RendererUtils;\n\n\n",
    "\nlet _polyfilled = false\n/**\n * 处理cesium和threejs的部分差异，增加一些辅助属性。\n * @returns \n * @private\n */\nexport default function polyfill() {\n    if (_polyfilled) return;\n    _polyfilled = true;\n\n    const {\n        Matrix4, Matrix3, Matrix2, Cartesian3, Cartesian2, Quaternion, OrthographicFrustum, Camera, ShaderProgram, defined, createUniform\n    } = Cesium;\n\n    Cartesian3.prototype.set = function (x, y, z) {\n        this.x = x; this.y = y; this.z = z;\n        return this\n    }\n    Cartesian3.prototype.copy = function (src) {\n        this.x = src.x; this.y = src.y; this.z = src.z;\n        return this\n    }\n\n    Cartesian2.prototype.set = function (x, y) {\n        this.x = x; this.y = y;\n        return this\n    }\n    Cartesian2.prototype.copy = function (src) {\n        this.x = src.x; this.y = src.y;\n        return this\n    }\n    Quaternion.prototype.set = function (x, y, z, w) {\n        this.x = x; this.y = y; this.z = z; this.w = w;\n        return this\n    }\n    Quaternion.prototype.copy = function (src) {\n        this.x = src.x; this.y = src.y; this.z = src.z; this.w = src.w;\n        return this\n    }\n\n    if (!OrthographicFrustum.prototype.isOrthographicFrustum) {\n        OrthographicFrustum.prototype.isOrthographicFrustum = true;\n        Object.defineProperties(Camera.prototype, {\n            isOrthographicCamera: {\n                get: function () {\n                    return this.frustum && this.frustum.isOrthographicFrustum == true\n                }\n            }\n        })\n    }\n\n    // 修改Cesium.ShaderProgram.prototype._setUniforms：使cesium支持元素为自定义类型的uniform数组\n\n    ShaderProgram.prototype._setUniforms = function (\n        uniformMap,\n        uniformState,\n        validate\n    ) {\n        var len;\n        var i;\n\n        if (defined(uniformMap)) {\n\n            if (!this._makeSupportStructureUniformsDone) {\n                modifyUniforms(this);\n                this._makeSupportStructureUniformsDone = true;\n            }\n\n            var manualUniforms = this._manualUniforms;\n\n            len = manualUniforms.length;\n            for (i = 0; i < len; ++i) {\n\n                var mu = manualUniforms[i];\n                //>>includeStart('debug', pragmas.debug);\n                if (!uniformMap[mu.name]) {\n                    console.error('uniform ' + mu.name + \" is undefined\");\n                    debugger\n                }\n                //>>includeEnd('debug');\n                mu.value = uniformMap[mu.name]();\n\n            }\n        }\n\n        var automaticUniforms = this._automaticUniforms;\n        len = automaticUniforms.length;\n        for (i = 0; i < len; ++i) {\n            var au = automaticUniforms[i];\n            au.uniform.value = au.automaticUniform.getValue(uniformState);\n        }\n\n        ///////////////////////////////////////////////////////////////////\n\n        // It appears that assigning the uniform values above and then setting them here\n        // (which makes the GL calls) is faster than removing this loop and making\n        // the GL calls above.  I suspect this is because each GL call pollutes the\n        // L2 cache making our JavaScript and the browser/driver ping-pong cache lines.\n        var uniforms = this._uniforms;\n        len = uniforms.length;\n        for (i = 0; i < len; ++i) {\n            uniforms[i].set();\n        }\n\n        if (validate) {\n            var gl = this._gl;\n            var program = this._program;\n\n            gl.validateProgram(program);\n            //>>includeStart('debug', pragmas.debug);\n            // if (!gl.getProgramParameter(program, gl.VALIDATE_STATUS)) {\n            //     throw new _Cesium.DeveloperError(\n            //         \"Program validation failed.  Program info log: \" +\n            //         gl.getProgramInfoLog(program)\n            //     );\n            // }\n            //>>includeEnd('debug');\n        }\n    }; \n    function modifyUniforms(shaderProgram) {\n\n        var sp = shaderProgram, gl = sp._gl;\n        var uniformsByName = sp._uniformsByName;//先获取所有已经定义的uniform，触发内部逻辑，才能取到program\n        var program = sp._program;\n        var numUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n\n        for (var i = 0; i < numUniforms; i++) {\n            var info = gl.getActiveUniform(program, i);\n            var uniformName = info.name;\n            var indexOfBracket = uniformName.indexOf(\"[\");\n            if (indexOfBracket >= 0) {\n                var uniformArray = uniformsByName[uniformName.slice(0, indexOfBracket)];\n                if (defined(uniformArray)) {\n                    continue;\n                }\n\n                if (!uniformsByName[info.name]) {\n                    var loc = gl.getUniformLocation(program, info.name);\n                    var uniform = createUniform(\n                        gl, info, info.name, loc\n                    );\n                    sp._uniformsByName[info.name] = uniform;\n                    sp._uniforms.push(uniform);\n                    sp._manualUniforms.push(uniform);\n\n                }\n            }\n        }\n    }\n\n    //给Cesium的矩阵加上elements，使其能参与threejs的矩阵运算\n    if (!Matrix4.prototype.__patched__) {\n        Matrix4.prototype.__patched__ = true;\n        Object.defineProperties(Matrix4.prototype, {\n            elements: {\n                get() {\n                    return this;\n                }\n            }\n        })\n\n        Object.defineProperties(Matrix3.prototype, {\n            elements: {\n                get() {\n                    return this;\n                }\n            }\n        })\n\n        Object.defineProperties(Matrix2.prototype, {\n            elements: {\n                get() {\n                    return this;\n                }\n            }\n        })\n    }\n\n    if (typeof THREE != 'undefined' && !THREE.Material.prototype.__patched__) {\n\n        const { Material, Color, Object3D } = THREE;\n        Material.prototype.__patched__ = true\n\n        //给threejs 的Material加上一些辅助属性\n        Object.defineProperties(Material.prototype, {\n            renderStateNeedsUpdate: {\n                set() {\n                    this.renderStateVersion++;\n                }\n            },\n            renderStateVersion: {\n                get() {\n                    if (this._renderStateVersion == undefined) this._renderStateVersion = 0;\n                    return this._renderStateVersion;\n                },\n                set(val) {\n                    this._renderStateVersion = val\n                }\n            },\n            autoRefresh: {\n                get() {\n                    if (this._autoRefresh == undefined) this._autoRefresh = true;\n                    return this._autoRefresh;\n                },\n                set(val) {\n                    this._autoRefresh = val;\n                }\n            },\n            translucent: {\n                get() {\n                    if (this._translucent == undefined) this._translucent = false;\n                    return this._translucent;\n                },\n                set(val) {\n                    if (this._translucent != val) {\n                        this._translucent = val;\n                        this.needsUpdate = true;\n                    }\n                }\n            }\n        })\n\n        //给threejs的Color加上red,green,blue,alpha，使其能参与Cesium Color的运算\n        Object.defineProperties(Color.prototype, {\n            red: {\n                get() {\n                    return this.r;\n                },\n                set(val) {\n                    this.r = val;\n                }\n            },\n            green: {\n                get() {\n                    return this.g;\n                },\n                set(val) {\n                    this.g = val;\n                }\n            },\n            blue: {\n                get() {\n                    return this.b;\n                },\n                set(val) {\n                    this.b = val;\n                }\n            },\n            alpha: {\n                get() {\n                    return 1;\n                },\n                set(val) { }\n            }\n        })\n\n        //给Object3D加上一些辅助属性(如modelMatrix等)\n        const emptyInstances = [], emptyInstancedAttributes = [];\n        Object.defineProperties(Object3D.prototype, {\n            modelMatrixNeedsUpdate: {\n                get() {\n                    if (this._modelMatrixNeedsUpdate == undefined) this._modelMatrixNeedsUpdate = true;\n                    return this._modelMatrixNeedsUpdate;\n                },\n                set(val) {\n                    this._modelMatrixNeedsUpdate = val;\n                }\n            },\n            modelMatrix: {\n                get() {\n                    if (this._modelMatrix == undefined) this._modelMatrix = Matrix4.IDENTITY.clone();\n                    return this._modelMatrix;\n                },\n                set(val) {\n                    this._modelMatrix = val;\n                }\n            },\n            maxVisibleDistance: {\n                get() {\n                    if (!this._maxVisibleDistance) this._maxVisibleDistance = Infinity;\n                    return this._maxVisibleDistance;\n                },\n                set(val) {\n                    if (this._maxVisibleDistance != val) {\n                        this._maxVisibleDistance = val;\n                        var len = this.children\n                        for (var i = 0; i < len; i++) {\n                            const child = this.children[i];\n                            if (child._maxVisibleDistance == Infinity) child.maxVisibleDistance = val;\n                        }\n                    }\n                }\n            },\n\n            instances: {\n                get() {\n                    if (!this._instances) this._instances = emptyInstances;\n                    return this._instances;\n                },\n                set(val) {\n                    if (this._instances != val) {\n                        this._instances = val;\n                        var len = this.children.length;\n                        for (var i = 0; i < len; i++) {\n                            const child = this.children[i];\n                            if (child._instances == emptyInstances) child.instances = val;\n                        }\n                        if (val && val.length > 0) {\n                            this._isCustomInstancedMesh = true;\n                        } else {\n                            this._isCustomInstancedMesh = false;\n                        }\n                    }\n\n                }\n            },\n            instancedAttributes: {\n                get() {\n                    if (!this._instancedAttributes) this._instancedAttributes = emptyInstancedAttributes;\n                    return this._instancedAttributes;\n                },\n                set(val) {\n                    if (this._instancedAttributes != val) {\n                        this._instancedAttributes = val;\n                        var len = this.children;\n                        for (var i = 0; i < len; i++) {\n                            const child = this.children[i];\n                            if (child._instancedAttributes == emptyInstancedAttributes) child.instancedAttributes = val;\n                        }\n                    }\n                }\n            },\n            isCustomInstancedMesh: {\n                get() {\n                    if (this._isCustomInstancedMesh == undefined) this._isCustomInstancedMesh = false;\n                    return this._isCustomInstancedMesh;\n                }\n            }\n\n        });\n\n\n        //修改updateMatrixWorld方法，通知对象更新modelMatrix\n        Object3D.prototype._updateMatrixWorld = Object3D.prototype.updateMatrixWorld;\n        Object3D.prototype.updateMatrixWorld = function (force) {\n\n            if (this.matrixAutoUpdate) this.updateMatrix();\n\n            if (this.matrixWorldNeedsUpdate || force) {\n\n                if (this.parent === null) {\n\n                    this.matrixWorld.copy(this.matrix);\n\n                } else {\n\n                    this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n\n                }\n\n                this.matrixWorldNeedsUpdate = false;\n\n                force = true;\n\n                //\n\n                this.modelMatrixNeedsUpdate = true;\n            }\n\n            // update children\n\n            const children = this.children;\n\n            for (let i = 0; i < children.length; i++) {\n\n                children[i].updateMatrixWorld(force);\n\n            }\n\n        }\n\n    }\n\n}",
    "\nimport WebGLGeometries from  \"./WebGLGeometries.js\";\n\nimport GeometryUtils from  \"../GeometryUtils.js\";\n\nimport WebGLRenderItem from  \"./WebGLRenderItem.js\";\n\nimport WebGLLights from  \"./WebGLLights.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\n/**\n * 绘图命令工具，用于生成、更新、销毁Cesium.DrawCommand \n * @param {WebGLRenderer} renderer  \n */\nexport default function CesiumCommands(renderer) {\n\n    const visualizer = renderer._visualizer;\n    const webglUniforms = renderer._uniforms\n    const cesiumRenderStates = renderer._cesiumRenderStates;\n    const cesiumShaderPrograms = renderer._cesiumShaderPrograms\n    const cesiumVertextArrays = renderer._cesiumVertextArrays\n\n    /**\n     *  \n     * @param {THREE.Mesh} mesh3js \n     * @param {WebGLLights}lights\n     * @param {number}[materialIndexOrGroupIndex] \n     * @param {ArrayBufferView}indices\n     * @param {boolean}[groupOptimized]\n     * @returns {WebGLRenderItem}\n    */\n    this.create = function (mesh3js, lights, shadows, materialIndexOrGroupIndex, indices, groupOptimized) {\n        const frameState = visualizer.frameState,\n            context = frameState.context;\n        // const webglUniforms = renderer._uniforms;\n        // const cesiumRenderStates = renderer._cesiumRenderStates\n        const geometry = WebGLGeometries.get(mesh3js.geometry);\n        const groups = geometry.groups;\n        var material3js = mesh3js.material;\n\n        var pickIdStr = 'czm_pickColor';\n        var primitiveType;\n\n        const { defined, Matrix4, PrimitiveType, DrawCommand, Pass } = Cesium;\n\n        //primitiveType\n\n        if (mesh3js.isMesh) {\n\n            if (material3js.wireframe) {\n\n                primitiveType = PrimitiveType.LINES;\n\n            } else {\n\n                primitiveType = PrimitiveType.TRIANGLES;\n\n            }\n\n        }\n        else if (mesh3js.isLine) {\n\n            if (mesh3js.isLineSegments) {\n                primitiveType = PrimitiveType.LINES;\n            }\n            else if (mesh3js.isLineLoop) {\n                primitiveType = PrimitiveType.LINE_LOOP;\n            } else {\n                primitiveType = PrimitiveType.LINE_STRIP;\n            }\n\n        } else if (mesh3js.isPoints) {\n            primitiveType = PrimitiveType.POINTS;\n        } else {\n            primitiveType = PrimitiveType.TRIANGLES;\n        }\n\n        //\n\n        var instances = mesh3js.instances;\n        var availableInstances = mesh3js._availableInstances;\n\n        var drawCommand = new DrawCommand({\n            modelMatrix: instances && instances.length > 0 ? undefined : Matrix4.clone(visualizer.modelMatrix),\n            owner: mesh3js,\n            castShadows: true,\n\n            pickId: pickIdStr,\n\n            receiveShadows: true,\n            primitiveType: primitiveType,\n            cull: false,\n            instanceCount: instances && instances.length > 0 ? availableInstances.length : undefined,\n        });\n\n        //vertexArray\n\n        let vertexArray = cesiumVertextArrays.create(geometry, mesh3js, materialIndexOrGroupIndex, indices, groupOptimized);\n        var attributeLocations = vertexArray._attributeLocations;\n\n        if (vertexArray.instanceCount) {\n            drawCommand.instanceCount = vertexArray.instanceCount;\n        }\n\n        drawCommand.vertexArray = vertexArray;\n\n        //shaderProgram\n        var materialIndex = materialIndexOrGroupIndex, groupIndex = null;\n        if (Array.isArray(material3js)) {\n            //group\n            if (!groupOptimized) {\n                groupIndex = materialIndexOrGroupIndex\n                materialIndex = groups[groupIndex].materialIndex;\n            }\n            material3js = material3js[materialIndex];\n        }\n\n        drawCommand.shaderProgram = cesiumShaderPrograms.get(material3js, attributeLocations, mesh3js, lights, shadows);\n\n        //pass\n\n        var pass = mesh3js.pass;\n        if (typeof pass != 'number' || pass < 0 || pass > Pass.TRANSLUCENT) {\n            pass = material3js.translucent ? Pass.TRANSLUCENT : Pass.CESIUM_3D_TILE\n        }\n        // drawCommand.pass = material3js.translucent ?  Pass.TRANSLUCENT : pass//|| Pass.CESIUM_3D_TILE\n        drawCommand.pass = material3js.translucent ? Pass.TRANSLUCENT : (material3js.stencilWrite ? Pass.CESIUM_3D_TILE_CLASSIFICATION : Pass.CESIUM_3D_TILE)\n        drawCommand._v_pass = material3js.translucent || material3js.transparent ? Pass.TRANSLUCENT : pass//Pass.CESIUM_3D_TILE\n\n        if (!defined(material3js.allowPick)) {\n            material3js.allowPick = true;\n        }\n\n        drawCommand.renderState = cesiumRenderStates.create(material3js, mesh3js);\n        drawCommand._renderStateOptions = material3js._renderStateOptions;\n\n        drawCommand.uniformMap = webglUniforms.getUniformMap(material3js, mesh3js, frameState, lights, shadows);\n\n        if (mesh3js.uniformMapLoadedCallback) {\n            mesh3js.uniformMapLoadedCallback(drawCommand.uniformMap, frameState, mesh3js);\n        }\n\n        return new WebGLRenderItem(drawCommand, material3js, materialIndex, mesh3js, geometry, visualizer, groupIndex);\n    }\n\n\n    /**\n     * \n     * @param {THREE.Mesh} mesh3js \n     * @param {WebGLLights}[lights]\n     * @param {THREE.Light[]}[shadows]\n     * @returns {WebGLRenderItem[]}\n     */\n    this.createArray = function (mesh3js, lights, shadows) {\n\n        var renderItems = [];\n        var geometry = WebGLGeometries.get(mesh3js.geometry, mesh3js.material);\n        var groupsOptimized = geometry.groupsOptimized;\n        //合并材质相同的组，drawCommand数量与material的相同\n        for (let i = 0; i < groupsOptimized.length; i++) {\n\n            const newGroup = groupsOptimized[i];\n            var materialIndex = newGroup.materialIndex;\n            var groupOptimized = true;\n            // const groupIndex = newGroup.groupIndex;\n            // const material = mesh3js.material[materialIndex];\n            // if (material.transparent && !material.translucent) {\n            //     groupOptimized = false;\n            //     materialIndex=groupIndex;\n            // }\n            var boundingSphereAndIndices = GeometryUtils.computeBoundingSphereAndIndices(geometry, materialIndex, groupOptimized);\n            const { boundingSphere, indices } = boundingSphereAndIndices;\n            var renderItem = this.create(mesh3js, lights, shadows, materialIndex, indices, groupOptimized);\n            renderItem.boundingSphere = boundingSphere;\n            renderItems.push(renderItem);\n\n        }\n\n        // //不合并，drawCommand数量与group的相同\n        // var geometry = mesh3js.geometry;\n        // var groups = geometry.groups;\n        // groups.forEach((group) => {\n        //     var renderItem = this.create(mesh3js, frameSate, visualizer, group);\n        //     renderItems.push(renderItem);\n        // }); \n\n        return renderItems;\n    }\n\n    /**\n     * \n     * @param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite} mesh  \n     * @param {THREE.BufferGeometry}geometry\n     */\n    this.update = function (mesh, geometry) {\n\n        const { BoundingSphere, Matrix4 } = Cesium;\n\n        geometry = geometry || mesh.geometry;\n\n        var renderItems = Array.isArray(mesh.renderItems) ? mesh.renderItems : [mesh.renderItems];\n\n        var hasGroup = Array.isArray(mesh.material);\n\n        renderItems.forEach((renderItem) => {\n            var drawCommand = renderItem.drawCommand;\n            var material = renderItem.material || mesh.material;\n\n            if (mesh.isInstancedMesh) {\n                drawCommand.instanceCount = mesh.count;\n            }\n\n            if (mesh.instances && mesh.instances.length) {\n\n                //boundingVolume\n                if (mesh.frustumCulled != false && !drawCommand.boundingVolume) {\n                    var bs = BoundingSphere.clone(mesh._boundingSphere);\n                    drawCommand.boundingVolume = bs;\n                }\n\n                //instanceCount\n\n                drawCommand.instanceCount = mesh._availableInstances.length;\n            }\n            else if (mesh.frustumCulled != false || material.translucent || material.transparent) {\n                //boundingVolume\n\n                var bs = hasGroup && drawCommand.__boundingSphere ? drawCommand.__boundingSphere : geometry.boundingSphere;\n\n                if (!bs) {\n                    if (geometry.computeBoundingSphere) {\n                        geometry.computeBoundingSphere();\n                        bs = geometry.boundingSphere;\n                    }\n                    else {\n                        var positionAttr = geometry.attributes.position\n                        bs = BoundingSphere.fromVertices(positionAttr.values || positionAttr.array);\n                        geometry.boundingSphere = bs;\n                    }\n                }\n\n                if (!drawCommand.boundingVolume) {\n                    drawCommand.boundingVolume = BoundingSphere.clone(bs);\n                }\n\n                if (visualizer._modelMatrixNeedsUpdate || mesh.modelMatrixNeedsUpdate || !drawCommand.boundingVolume._multiplyByModelMatrix) {\n                    Matrix4.multiplyByPoint(mesh.modelMatrix, bs.center, drawCommand.boundingVolume.center);\n                    drawCommand.boundingVolume.radius = bs.radius * Matrix4.getMaximumScale(mesh.modelMatrix)\n                    drawCommand.boundingVolume._multiplyByModelMatrix = true;\n                }\n\n                let instanceCount = geometry.maxInstancedCount || geometry.instanceCount\n                if (instanceCount) {\n                    drawCommand.instanceCount = instanceCount;\n                }\n            }\n\n            //modelMatrix \n            drawCommand.modelMatrix = mesh.modelMatrix;\n        });\n\n        if (hasGroup) {\n\n            renderItems.forEach((renderItem) => {\n                var material = renderItem.material;\n                visualizer.renderer._uniforms.refresh(material, mesh);\n\n            })\n\n        }\n\n    }\n\n}\n\n",
    "\nimport ConstantMap from  \"./ConstantMap.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\n\n/**\n * 渲染状态工具，使用内置的材质或者threejs材质，生成Cesium的RenderState\n * @param {WebGLRenderer} renderer \n */\nexport default function CesiumRenderStates(renderer) {\n    const {\n        RenderState\n    } = Cesium;\n\n    var _renderStateCache = new Map();\n\n    /**\n     * \n     * @param {THREE.Material} material \n     * @param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite} object \n     * @param {boolean} fromCache \n     * @return {Cesium.RenderState}\n     */\n    this.create = function (material, object, fromCache) {\n\n\n        var rs;\n        if (fromCache) {\n            rs = _renderStateCache.get(material)\n            if (!rs) {\n                rs = getRenderState(material, object);\n\n                _renderStateCache.set(material, rs);\n                material.material3js.addEventListener('dispose', () => {\n                    _renderStateCache.delete(material, rs);\n                })\n            }\n        }\n        else {\n            rs = getRenderState(material, object);\n        }\n        return rs;\n    }\n\n    // this.update = function (object) {\n    //     return getRenderState(material, object);\n    // }\n\n    function enableOrDisable(gl, glEnum, enable) {\n        if (enable) {\n            gl.enable(glEnum);\n        } else {\n            gl.disable(glEnum);\n        }\n    }\n    function applyBlendingColor(gl, color) {\n        gl.blendColor(color.red, color.green, color.blue, color.alpha);\n    }\n    /**\n     * \n     * @param {WebGL2RenderingContext} gl \n     * @param {*} renderState \n     * @param {*} passState \n     */\n    function applyBlending(gl, renderState, passState) {\n        var blending = renderState.blending;\n        var enabled = Cesium.defined(passState.blendingEnabled)\n            ? passState.blendingEnabled\n            : blending.enabled;\n\n        enableOrDisable(gl, gl.BLEND, enabled);\n\n        if (enabled) {\n            // applyBlendingColor(gl, blending.color);\n            // gl.blendEquationSeparate(blending.equationRgb, blending.equationAlpha);\n            // gl.blendFuncSeparate(\n            //     blending.functionSourceRgb,\n            //     blending.functionDestinationRgb,\n            //     blending.functionSourceAlpha,\n            //     blending.functionDestinationAlpha\n            // );\n            //    gl.blendFunc( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA ); \n\n            // gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n            // gl.blendFuncSeparate(gl.ONE, gl.ONE, gl.ONE, gl.ONE);\n\n            gl.blendEquation(gl.FUNC_REVERSE_SUBTRACT);\n            gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n        }\n    }\n\n    var scratchViewport;\n\n    function applyViewport(gl, renderState, passState) {\n        var viewport = Cesium.defaultValue(renderState.viewport, passState.viewport);\n        if (!Cesium.defined(viewport)) {\n            if (!scratchViewport) scratchViewport = new Cesium.BoundingRectangle();\n\n            viewport = scratchViewport;\n            viewport.width = passState.context.drawingBufferWidth;\n            viewport.height = passState.context.drawingBufferHeight;\n        }\n\n        passState.context.uniformState.viewport = viewport;\n        gl.viewport(viewport.x, viewport.y, viewport.width, viewport.height);\n    }\n\n    // Cesium.RenderState.__apply = Cesium.RenderState.apply;\n    // Cesium.RenderState.apply = function (gl, renderState, passState) {\n    //     Cesium.RenderState.__apply(gl, renderState, passState);\n\n    //     applyBlending(gl, renderState, passState);\n    //     applyViewport(gl, renderState, passState);\n    // }\n\n\n    // Cesium.RenderState.__partialApply = Cesium.RenderState.partialApply\n    // Cesium.RenderState.partialApply = function (\n    //     gl,\n    //     previousRenderState,\n    //     renderState,\n    //     previousPassState,\n    //     passState,\n    //     clear\n    // ) {\n\n    //     Cesium.RenderState.__partialApply(gl,\n    //         previousRenderState,\n    //         renderState,\n    //         previousPassState,\n    //         passState,\n    //         clear);\n    //     applyBlending(gl, renderState, passState);\n    //     applyViewport(gl, renderState, passState);\n    // }\n\n    /**\n     * \n     * @param {THREE.Material} material3js \n     * @param {boolean} frontFaceCW \n     * @return {Cesium.RenderState}\n     * @private\n     */\n    function getRenderStateOptions(material3js, frontFaceCW) {\n\n        const capabilities = renderer._capabilities,\n            extensions = renderer._extensions;\n\n        const equationToGL = ConstantMap.equationMap;\n        const {\n            WebGLConstants,\n            StencilFunction,\n            StencilOperation,\n            StencilConstants,\n            defined,\n            defaultValue,\n            CullFace,\n            BlendingState\n        } = Cesium;\n        const { MinEquation, MaxEquation, DoubleSide, BackSide,\n            NoBlending, MultiplyBlending, NormalBlending,\n            CustomBlending, AdditiveBlending, SubtractiveBlending\n        } = THREE;\n\n        const factorToGL = ConstantMap.factorMap;\n        const depthFuncMap = ConstantMap.depthFuncMap;\n\n        // const gl = WebGLConstants;\n        //const { MIN, MAX, ZERO, ONE, ONE_MINUS_SRC_ALPHA, SRC_ALPHA, SRC_COLOR, DST_ALPHA, DST_COLOR, ONE_MINUS_SRC_COLOR } = gl;\n\n        //\n\n        var material = material3js;\n        var flipSided = (material.side === BackSide);\n        if (frontFaceCW) flipSided = !flipSided;\n\n        if (capabilities.isWebGL2) {\n            equationToGL[MinEquation] = WebGLConstants.MIN;\n            equationToGL[MaxEquation] = WebGLConstants.MAX;\n        } else {\n\n            var extension = extensions.get('EXT_blend_minmax');\n\n            if (extension !== null) {\n\n                equationToGL[MinEquation] = extension.MIN_EXT;\n                equationToGL[MaxEquation] = extension.MAX_EXT;\n\n            }\n\n        }\n\n        if (!defined(material.side)) {\n            material.side = THREE.DoubleSide;\n        }\n\n        // if (flipSided&&frontFaceCW) debugger\n        // if (material.polygonOffset) debugger\n\n        if (material.onCreateRenderState) {\n            var rs = material.onCreateRenderState();\n            if (rs) return rs;\n        }\n        return {\n\n            frontFace: frontFaceCW && flipSided ? Cesium.WindingOrder.CLOCKWISE : Cesium.WindingOrder.COUNTER_CLOCKWISE,\n            cull: {\n                enabled: material.side != DoubleSide,// defaultValue(cull.enabled, false),\n                face: material.side == BackSide ? CullFace.FRONT : CullFace.BACK,// WebGLConstants.BACK|WebGLConstants.FRONT|WebGLConstants.FRONT_AND_BACK //defaultValue(cull.face, WebGLConstants.BACK),\n            },\n\n            lineWidth: 1,\n            polygonOffset: {\n                enabled: material.polygonOffset,\n                factor: material.polygonOffsetFactor,\n                units: material.polygonOffsetUnits\n            },\n            depthRange: material.depthRange || {\n                near: 0,\n                far: 1\n            },\n            depthTest: {\n                enabled: material.depthTest,\n                func: defaultValue(depthFuncMap[material.depthFunc], WebGLConstants.LEQUAL)\n            },\n            colorMask: {\n                red: material.colorWrite,\n                green: material.colorWrite,\n                blue: material.colorWrite,\n                alpha: material.colorWrite\n            },\n            depthMask: defaultValue(material.depthWrite, true),\n            blending: (function () {\n\n                if (material.blending == NoBlending) {\n                    return BlendingState.DISABLED;\n                }\n\n                const blendEquation = material.blendEquation;\n                const blendEquationAlpha = material.blendEquationAlpha || material.blendEquation;\n\n                if (material.blending !== CustomBlending) {\n                    if (material.premultipliedAlpha) {\n\n                        // return Cesium.BlendingState.ALPHA_BLEND;\n\n                        switch (material.blending) {\n\n                            case NormalBlending:\n\n                                return {\n                                    enabled: true,\n                                    equationRgb: equationToGL[blendEquation],\n                                    equationAlpha: equationToGL[blendEquationAlpha],\n\n                                    functionSourceRgb: WebGLConstants.ONE,\n                                    functionSourceAlpha: WebGLConstants.ONE,\n\n                                    functionDestinationRgb: WebGLConstants.ONE_MINUS_SRC_ALPHA,\n                                    functionDestinationAlpha: WebGLConstants.ONE_MINUS_SRC_ALPHA\n                                }\n                                // gl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n                                break;\n\n                            case AdditiveBlending:\n                                return {\n                                    enabled: true,\n                                    equationRgb: equationToGL[blendEquation],\n                                    equationAlpha: equationToGL[blendEquationAlpha],\n\n                                    functionDestinationAlpha: 1,\n                                    functionDestinationRgb: 1,\n                                    functionSourceAlpha: 1,\n                                    functionSourceRgb: 770\n                                }\n                                // gl.blendFunc( gl.ONE, gl.ONE );\n                                break;\n\n                            case SubtractiveBlending:\n                                return {\n                                    enabled: true,\n                                    equationRgb: equationToGL[blendEquation],\n                                    equationAlpha: equationToGL[blendEquationAlpha],\n\n                                    functionSourceRgb: WebGLConstants.ZERO,\n                                    functionSourceAlpha: WebGLConstants.ONE_MINUS_SRC_COLOR,\n\n                                    functionDestinationRgb: WebGLConstants.ZERO,\n                                    functionDestinationAlpha: WebGLConstants.ONE_MINUS_SRC_ALPHA\n                                }\n                                // gl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n                                break;\n\n                            case MultiplyBlending:\n                                return {\n                                    enabled: true,\n                                    equationRgb: equationToGL[blendEquation],\n                                    equationAlpha: equationToGL[blendEquationAlpha],\n\n                                    functionSourceRgb: WebGLConstants.ZERO,\n                                    functionSourceAlpha: WebGLConstants.ZERO,\n\n                                    functionDestinationRgb: WebGLConstants.SRC_COLOR,\n                                    functionDestinationAlpha: WebGLConstants.SRC_ALPHA\n                                }\n                                // gl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n                                break;\n\n                            default:\n                                console.error('RenderSateUtils: Invalid blending: ', material.blending);\n                                break;\n\n                        }\n\n                    } else {\n\n                        switch (material.blending) {\n\n                            case NormalBlending:\n\n                                return {\n                                    enabled: true,\n                                    // color: new Color(1,1,1,1.),\n                                    equationRgb: equationToGL[blendEquation],\n                                    equationAlpha: equationToGL[blendEquationAlpha],\n\n                                    functionSourceRgb: WebGLConstants.SRC_ALPHA,\n                                    functionSourceAlpha: WebGLConstants.ONE,\n                                    functionDestinationRgb: WebGLConstants.ONE_MINUS_SRC_ALPHA,\n                                    functionDestinationAlpha: WebGLConstants.ONE_MINUS_SRC_ALPHA\n                                }\n\n                                // gl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n                                break;\n\n                            case AdditiveBlending:\n                                return BlendingState.ADDITIVE_BLEND;\n                                break;\n\n                            // case THREE.SubtractiveBlending:\n                            //     return Cesium.BlendingState.PRE_MULTIPLIED_ALPHA_BLEND; \n                            // \t// gl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n                            // \tbreak;\n\n                            // case THREE.MultiplyBlending:\n                            //     return Cesium.BlendingState.PRE_MULTIPLIED_ALPHA_BLEND; \n                            //     return;\n                            // \t// gl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n                            // \tbreak;\n\n                            default:\n                                console.error('RenderSateUtils: Invalid blending: ', material.blending);\n                                break;\n\n                        }\n\n                    }\n\n                    // ADDITIVE_BLEND\n                    // ALPHA_BLEND\n                    // DISABLED: {enabled: false}\n                    // PRE_MULTIPLIED_ALPHA_BLEND: \n\n                } else {\n\n                    return {\n                        enabled: material.blending == NoBlending,\n                        // color: //Color\n                        equationRgb: equationToGL[blendEquation],\n                        equationAlpha: equationToGL[blendEquationAlpha],\n                        functionSourceRgb: factorToGL[material.blendSrc],\n                        functionSourceAlpha: factorToGL[material.blendSrcAlpha],\n                        functionDestinationRgb: factorToGL[material.blendDst],\n                        functionDestinationAlpha: factorToGL[material.blendDstAlpha]\n                    }\n                }\n            })(),\n            stencilMask:\n                material.stencilWrite ?\n                    material.stencilWriteMask ://如果材质设定了开启模板测试，则使用threejs材质设置的模版测试参数\n                    StencilConstants.CESIUM_3D_TILE_MASK,//否则使用3dtiles模板测试参数\n            stencilTest:\n                material.stencilWrite ? {//如果材质设定了开启模板测试，则使用threejs材质设置的模版测试参数\n                    enabled: material.stencilWrite,\n                    frontFunction: material.stencilFunc,\n                    backFunction: material.stencilFunc,\n                    reference: defaultValue(material.stencilRef, 0),\n                    mask: defaultValue(material.stencilFuncMask, ~0),\n                    frontOperation: {\n                        fail: material.stencilFail,\n                        zFail: material.stencilZFail,\n                        zPass: material.stencilZPass\n                    },\n                    backOperation: {\n                        fail: material.stencilFail,\n                        zFail: material.stencilZFail,\n                        zPass: material.stencilZPass\n                    }\n                } :\n                    {//否则使用3dtiles模板测试参数\n                        backFunction: 519,\n                        backOperation: { fail: 7680, zFail: 7680, zPass: 7681 },\n                        enabled: true,\n                        frontFunction: 519,\n                        frontOperation: { fail: 7680, zFail: 7680, zPass: 7681 },\n                        mask: 128,\n                        reference: 128\n                    }\n\n        }\n    }\n\n    /**\n    *\n    *@param {MeshMaterial}material\n    *@param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite}object \n    *@return {Cesium.RenderState}frameState\n    *@private\n    */\n    function getRenderState(material, object) {\n\n        var frontFaceCW =\n            object.matrixWorld.determinant() < 0;\n        // determinant(mesh.matrixWorld.elements) < 0 //(mesh.isMesh && object.matrixWorld.determinant() < 0);\n        let renderStateOpts = getRenderStateOptions(material, frontFaceCW);\n\n        material._renderStateOptions = renderStateOpts;\n\n        var renderState = RenderState.fromCache(renderStateOpts);\n        // var renderState = new RenderState(renderStateOpts);\n\n        return renderState;\n    }\n\n}\n",
    "\nimport ShaderUtils from  \"./ShaderUtils.js\";\n\nimport MeshVisualizer from  \"../MeshVisualizer.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\nimport { unrollLoops } from  \"./WebGLProgram.js\";\n\nimport WebGLPrograms from  \"./WebGLPrograms.js\";\n\nimport WebGLLights from  \"./WebGLLights.js\";\n\nimport extension_lights_pars from  \"./Shaders/extension_lights_pars.glsl.js\";\n\nimport extention_lights_fragment_begin from  \"./Shaders/extention_lights_fragment_begin.glsl.js\";\n\nlet emptyLights = {\n    directional: [],\n    point: [],\n    spot: [],\n    rectArea: [],\n    hemi: [],\n\n    directionalShadowMap: [],\n    pointShadowMap: [],\n    spotShadowMap: []\n}\n \n/**\n * \n * @param {WebGLRenderer} renderer \n */\nexport default function CesiumShaderPrograms(renderer) {\n    const visualizer = renderer._visualizer;\n    const webglUniforms = renderer._uniforms;\n    const properties = renderer._properties;\n\n    const { ShaderSource, ShaderProgram } = Cesium;\n  \n    /**\n     *  \n     * @param {{fragmentShader:string,vertexShader:string}} shader \n     */\n    function appendExtensionLights(shader) {\n        //\n        var fixedWebGLLights = visualizer._fixedWebGLLights;\n        var partialWebGLLights = visualizer._partialWebGLLights;\n        var NUM_STATIC_POINT_LIGHTS = fixedWebGLLights.state.point.length\n        var NUM_PAITIAL_POINT_LIGHTS = partialWebGLLights.state.point.length\n        if (NUM_STATIC_POINT_LIGHTS > 0 || NUM_PAITIAL_POINT_LIGHTS > 0) {\n            var fs = shader.fragmentShader;\n            fs = ShaderUtils.insertAfter(\n                fs, /uniform vec3 lightProbe\\[ 9 \\];/g,\n                extension_lights_pars\n                    .replace(/NUM_STATIC_POINT_LIGHTS/g, NUM_STATIC_POINT_LIGHTS)\n                    .replace(/NUM_PAITIAL_POINT_LIGHTS/g, NUM_PAITIAL_POINT_LIGHTS)\n            );\n            fs = ShaderUtils.insertAfter(\n                fs, /IncidentLight directLight;/g,\n                extention_lights_fragment_begin\n                    .replace(/NUM_STATIC_POINT_LIGHTS/g, NUM_STATIC_POINT_LIGHTS)\n                    .replace(/NUM_PAITIAL_POINT_LIGHTS/g, NUM_PAITIAL_POINT_LIGHTS)\n            );\n            shader.fragmentShader = fs;\n        }\n    }\n\n    /**\n     *  \n     * @param {THREE.Mesh|THREE.Line|THREE.LineLoop|THREE.LineSegments|THREE.Points|THREE.Sprite} object   \n     * @param {WebGLLights} [lights]\n     * @param {THREE.Light[]} [shadows]\n     */\n    function compileShader3js(material3js, object, lights, shadows) {\n\n        //three version >= 0.119.1\n\n        let scene = visualizer; \n        shadows = shadows || null;\n\n        /**\n         * @type {WebGLPrograms}\n         * @private\n         */\n        const programs = renderer._programs;\n\n        var parameters = programs.getParameters(\n            material3js, material3js.lightMap ? emptyLights : lights.state, shadows, scene, object\n        );\n        var uniforms = programs.getUniforms(material3js);\n        parameters.uniforms = uniforms;\n\n        if (typeof material3js.onBeforeCompile == 'function') {\n            material3js.onBeforeCompile(parameters, renderer);\n        }\n\n        if (material3js.isNodeMaterial) {\n            uniforms = parameters.uniforms;\n            parameters = programs.getParameters(\n                material3js, material3js.lightMap ? emptyLights : lights.state, shadows, scene, object\n            );\n            parameters.uniforms = uniforms;\n\n            //\n            var materialProperties = properties.get(material3js)\n            materialProperties.needsLights = material3js.lights;\n            materialProperties.clipping = material3js.clipping;\n        }\n\n        var cacheKey = programs.getProgramCacheKey(parameters);\n        var program = renderer._programs.acquireProgram(parameters, cacheKey);\n        program.uniforms = parameters.uniforms;\n        return program;\n\n    }\n\n    /**\n     * \n     * @param {THREE.Material} material \n     * @param {{[key:string]:number}} attributeLocations \n     * @param {THREE.Mesh|THREE.Line|THREE.LineLoop|THREE.LineSegments|THREE.Points|THREE.Sprite} object  \n     * @returns {Cesium.ShaderProgram}\n     * @private\n     */\n    this.get = function (material3js, attributeLocations, object, lights, shadows) {\n\n        let context = visualizer.frameState.context;\n\n        var instances = object.instances;\n\n        var shader;\n        // var lights = visualizer._lights.state;\n        var scene = visualizer;\n        // var shadows = visualizer._shadowsArray;\n\n        shader = compileShader3js(material3js, object, lights, shadows);\n\n        ShaderUtils.processInstanceShader(object, shader);\n\n        //TODO:\n        //  ShaderUtils.processOcclusionCulling(object, shader);\n\n        let pickIdStr = 'czm_pickColor';\n        let pickColorQualifier = instances && instances.length ? 'varying' : (material3js.pickColorQualifier || 'uniform')\n        let pickColorDefinition = pickColorQualifier + ' vec4 ' + pickIdStr + ';\\n'\n        let logDepthExtension =\n            '#ifdef GL_EXT_frag_depth \\n' +\n            '#extension GL_EXT_frag_depth : enable \\n' +\n            '#endif \\n\\n';\n\n        shader.vertexShader = '\\n\\\n                #define CESIUM_MESH_VISUALIZER\\n\\\n                uniform vec3 u_cameraPositionLC;\\n\\\n                uniform mat4 matrixWorld;\\n\\\n                uniform mat3 normalMatrixWorld;\\n\\\n                uniform mat4 viewMatrixThree;\\n\\\n                uniform mat4 modelViewMatrixInverse;\\n\\\n                uniform mat4 _CesiumModel2ThreeModel;\\n\\\n                uniform mat3 _CesiumNormal2ThreeNormal;\\n\\\n                uniform mat4 _ThreeModel2CesiumModel;\\n\\\n                uniform mat3 _ThreeNormal2CesiumNormal;\\n\\\n                '  + shader.vertexShader;\n\n        var fs = '\\n\\\n                #define CESIUM_MESH_VISUALIZER\\n\\\n                uniform mat4 matrixWorld;\\n\\\n                uniform mat3 normalMatrixWorld;\\n\\\n                uniform mat4 viewMatrixThree;\\n\\\n                uniform mat4 modelViewMatrixInverse;\\n\\\n                uniform mat4 _CesiumModel2ThreeModel;\\n\\\n                uniform mat3 _CesiumNormal2ThreeNormal;\\n\\\n                uniform mat4 _ThreeModel2CesiumModel;\\n\\\n                uniform mat3 _ThreeNormal2CesiumNormal;\\n'+ shader.fragmentShader;\n        shader.fragmentShader = fs;\n        if (visualizer.useEncodedPosition) {\n            ShaderUtils.modifyEncodedPosition(object, shader);\n        }\n        ShaderUtils.modifyShadowWorldPosition(object, shader);\n        ShaderUtils.modifyEnvMapQueryVec(object, shader);\n\n        appendExtensionLights(shader);\n        shader.fragmentShader = unrollLoops(shader.fragmentShader)\n        //\n        if (material3js.onAfterCompile) {\n            material3js.onAfterCompile(shader, renderer);\n        }\n\n        //\n        if (material3js.pickColorQualifier == 'varying') {//&& !material3js.isShaderMaterial) {\n            if (shader.vertexShader.indexOf(pickIdStr) == -1) {\n                var pickColorName = material3js.pickColorName || 'pickColor';\n                shader.vertexShader = ShaderUtils.insertBeforeMain(shader.vertexShader, 'attribute vec4 ' + pickColorName + ';\\n' + 'varying vec4 ' + pickIdStr + ';\\n')\n                shader.vertexShader = ShaderUtils.insertAfterMain(shader.vertexShader, pickIdStr + '=' + pickColorName + ';\\n')\n            }\n        }\n\n        //\n        webglUniforms.set(material3js, shader.uniforms, object, lights, shadows);\n        //\n        var vs = new ShaderSource({\n            sources: [shader.vertexShader]\n        });\n        var fs = new ShaderSource({\n            sources: [pickColorDefinition + shader.fragmentShader, logDepthExtension],\n        });\n\n        var translucent = material3js.translucent || material3js.transparent;\n        if (!translucent && context.fragmentDepth) {\n            fs.defines.push('WRITE_DEPTH');\n        }\n\n        var shaderProgram = ShaderProgram.fromCache({\n            context: context,\n            fragmentShaderSource: fs,\n            vertexShaderSource: vs,\n            attributeLocations: attributeLocations\n        });\n\n        return shaderProgram;\n    }\n\n}\n",
    "\nimport GeometryUtils from  \"../GeometryUtils.js\";\n\nimport WebGLGeometries from  \"./WebGLGeometries.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\n\nfunction WebGLAttributeCache() {\n\n    var _vaAttributes = new WeakMap();\n    this.get = function (geometryAttribute) {\n        return _vaAttributes.get(geometryAttribute);\n    }\n    this.set = function (geometryAttribute, vaAttribute, geometry) {\n\n        function onGeometryDispose() {\n            // _vaAttributes.delete(vaAttribute);\n            _vaAttributes.delete(geometryAttribute);\n            geometry.removeEventListener('dispose', onGeometryDispose)\n        }\n        geometry.addEventListener('dispose', onGeometryDispose);\n        _vaAttributes.set(geometryAttribute, vaAttribute);\n        // _vaAttributes.set(vaAttribute, geometryAttribute);\n    }\n\n    this.delete = function (attribute) {\n        // var cacheVal = _vaAttributes.get(attribute);\n        // _vaAttributes.delete(cacheVal);\n        _vaAttributes.delete(attribute);\n    }\n}\n\n/**\n * 顶点数组工具，使用threejs BufferGeometry和Cesium Geometry，生成、更新DrawCommand的vertexArray\n * @param {WebGLRenderer} renderer \n */\nfunction CesiumVertextArrays(renderer) {\n\n    const {\n        Matrix4,\n        defined,\n        GeometryPipeline,\n        BufferUsage,\n        VertexArray,\n        defaultValue,\n        Cartesian3,\n        Cartesian2,\n        Cartesian4,\n        Color,\n        Buffer,\n        ComponentDatatype,\n        IndexDatatype,\n        BoundingSphere\n    } = Cesium;\n\n    const visualizer = renderer._visualizer;\n\n    let _webglAttributeCache = new WebGLAttributeCache();\n    let scratchMatrix = new Matrix4();\n\n    function getVertexBufferTypedArray(mesh, creating) {\n\n        var instances = creating ? mesh._instances : mesh._availableInstances;\n        var instancesLength = instances.length;\n        var collectionCenter = mesh._center;\n\n        var vertexSizeInFloats = 12;\n\n        var bufferData = mesh._vertexBufferTypedArray;\n        if (!defined(bufferData) || instancesLength * vertexSizeInFloats > bufferData.length) {\n            bufferData = new Float32Array(instancesLength * vertexSizeInFloats);\n        }\n\n        // Hold onto the buffer data so we don't have to allocate new memory every frame.\n        mesh._vertexBufferTypedArray = bufferData;\n\n        for (var i = 0; i < instancesLength; ++i) {\n\n            var modelMatrix = instances[i].modelMatrix;\n\n            // Instance matrix is relative to center\n            var instanceMatrix = Matrix4.clone(modelMatrix, scratchMatrix);\n            instanceMatrix[12] -= collectionCenter.x;\n            instanceMatrix[13] -= collectionCenter.y;\n            instanceMatrix[14] -= collectionCenter.z;\n\n            var offset = i * vertexSizeInFloats;\n\n            // First three rows of the model matrix\n            bufferData[offset + 0] = instanceMatrix[0];\n            bufferData[offset + 1] = instanceMatrix[4];\n            bufferData[offset + 2] = instanceMatrix[8];\n            bufferData[offset + 3] = instanceMatrix[12];\n            bufferData[offset + 4] = instanceMatrix[1];\n            bufferData[offset + 5] = instanceMatrix[5];\n            bufferData[offset + 6] = instanceMatrix[9];\n            bufferData[offset + 7] = instanceMatrix[13];\n            bufferData[offset + 8] = instanceMatrix[2];\n            bufferData[offset + 9] = instanceMatrix[6];\n            bufferData[offset + 10] = instanceMatrix[10];\n            bufferData[offset + 11] = instanceMatrix[14];\n\n        }\n\n        return bufferData;\n    }\n\n    function getPickIdBufferTypedArray(mesh, context, creating) {\n        var i;\n        var instances = creating ? mesh._instances : mesh._availableInstances;\n        var instancesLength = instances.length\n\n        var pickIdBuffer = mesh._pickIdBufferTypedArray;\n        if (!pickIdBuffer || instancesLength * 4 > pickIdBuffer.length) {\n            pickIdBuffer = new Uint8Array(instancesLength * 4);\n        }\n        mesh._pickIdBufferTypedArray = pickIdBuffer;\n\n        for (i = 0; i < instancesLength; ++i) {\n            var instance = instances[i];\n            var pickId = mesh._pickIds[instance.instanceId];\n            if (!pickId) {\n                pickId = context.createPickId(instance);\n                mesh._pickIds[instance.instanceId] = pickId;\n            }\n            var pickColor = pickId.color;\n            var offset = i * 4;\n            pickIdBuffer[offset] = Color.floatToByte(pickColor.red);\n            pickIdBuffer[offset + 1] = Color.floatToByte(pickColor.green);\n            pickIdBuffer[offset + 2] = Color.floatToByte(pickColor.blue);\n            pickIdBuffer[offset + 3] = Color.floatToByte(pickColor.alpha);\n        }\n        return pickIdBuffer;\n    }\n\n    function getInstancedAttribTypedArray(mesh, instancedAttribute, creating) {\n        var i;\n        // var instances = mesh._availableInstances;\n        var instances = creating ? mesh._instances : mesh._availableInstances;\n        var instancesLength = instances.length;\n        var name = instancedAttribute.name;\n        var componentsPerAttribute;\n        var isColorValue = instancedAttribute.default instanceof Color\n        if (typeof instancedAttribute.default == 'number') {\n            componentsPerAttribute = 1;\n        }\n        else if (instancedAttribute.default instanceof Cartesian2) {\n            componentsPerAttribute = 2;\n        }\n        else if (instancedAttribute.default instanceof Cartesian3) {\n            componentsPerAttribute = 3;\n        }\n        else if (instancedAttribute.default instanceof Cartesian4) {\n            componentsPerAttribute = 4;\n        } else if (isColorValue) {\n            componentsPerAttribute = 4;\n        }\n\n        var bufferData = mesh['_' + name + 'BufferTypedArray'];\n        if (!bufferData || instancesLength * componentsPerAttribute > bufferData.length) {\n            if (isColorValue) {\n                bufferData = new Uint8Array(instancesLength * componentsPerAttribute);\n            }\n            else {\n                bufferData = new Float32Array(instancesLength * componentsPerAttribute);\n            }\n        }\n        mesh['_' + name + 'BufferTypedArray'] = bufferData;\n\n        if (isColorValue) {\n            for (i = 0; i < instancesLength; ++i) {\n                var instance = instances[i];\n                var val = instance[name];\n                var offset = i * componentsPerAttribute;\n\n                bufferData[offset] = Color.floatToByte(val.red);\n                bufferData[offset + 1] = Color.floatToByte(val.green);\n                bufferData[offset + 2] = Color.floatToByte(val.blue);\n                bufferData[offset + 3] = Color.floatToByte(val.alpha);\n            }\n        } else if (typeof instancedAttribute.default == 'number') {\n            for (i = 0; i < instancesLength; ++i) {\n                var instance = instances[i];\n                var val = instance[name];\n                bufferData[i] = val;\n            }\n        }\n        else if (instancedAttribute.default instanceof Cartesian2) {\n\n            for (i = 0; i < instancesLength; ++i) {\n                var instance = instances[i];\n                var val = instance[name];\n                var offset = i * componentsPerAttribute;\n                bufferData[offset] = val.x;\n                bufferData[offset + 1] = val.y;\n            }\n        }\n        else if (instancedAttribute.default instanceof Cartesian3) {\n\n            for (i = 0; i < instancesLength; ++i) {\n                var instance = instances[i];\n                var val = instance[name];\n                var offset = i * componentsPerAttribute;\n                bufferData[offset] = val.x;\n                bufferData[offset + 1] = val.y;\n                bufferData[offset + 2] = val.z;\n            }\n        }\n        else if (instancedAttribute.default instanceof Cartesian4) {\n            for (i = 0; i < instancesLength; ++i) {\n                var instance = instances[i];\n                var val = instance[name];\n                var offset = i * componentsPerAttribute;\n                bufferData[offset] = val.x;\n                bufferData[offset + 1] = val.y;\n                bufferData[offset + 2] = val.z;\n                bufferData[offset + 3] = val.w;\n            }\n        }\n        return bufferData;\n\n    }\n\n    function createMeshInstancedAttributes(mesh, context, vertexArrayAttributes, attributeLocations, maxAttribLocation) {\n        var instancedAttributes = mesh.instancedAttributes;\n        instancedAttributes.forEach(function (instancedAttribute) {\n\n            var name = instancedAttribute.name\n            attributeLocations[name] = ++maxAttribLocation\n\n            var buffer = Buffer.createVertexBuffer({\n                context: context,\n                typedArray: getInstancedAttribTypedArray(mesh, instancedAttribute, true),\n                usage: BufferUsage.STATIC_DRAW\n            });\n            instancedAttribute._buffer = buffer;\n\n            var attribute = {\n                index: attributeLocations[instancedAttribute.name],\n                vertexBuffer: buffer,\n                componentsPerAttribute: 4,\n                componentDatatype: ComponentDatatype.FLOAT,\n                normalize: false,\n                offsetInBytes: 0,\n                strideInBytes: 0,\n                instanceDivisor: 1\n            }\n            if (typeof instancedAttribute.default == 'number') {\n                attribute.componentsPerAttribute = 1;\n            }\n            else if (instancedAttribute.default instanceof Cartesian2) {\n                attribute.componentsPerAttribute = 2;\n            }\n            else if (instancedAttribute.default instanceof Cartesian3) {\n                attribute.componentsPerAttribute = 3;\n            }\n            else if (instancedAttribute.default instanceof Cartesian4) {\n                attribute.componentsPerAttribute = 4;\n            } else if (instancedAttribute.default instanceof Color) {\n                attribute.componentDatatype = ComponentDatatype.UNSIGNED_BYTE;\n                attribute.normalize = true;\n                attribute.componentsPerAttribute = 4;\n            }\n\n            vertexArrayAttributes.push(attribute);\n\n        })\n\n        return maxAttribLocation;\n\n    }\n\n    function createInstanceMvMatrixVertexBuffer(mesh, context) {\n        var pickIdBuffer = getPickIdBufferTypedArray(mesh, context, true);\n        mesh._pickIdBuffer = Buffer.createVertexBuffer({\n            context: context,\n            typedArray: pickIdBuffer,\n            usage: BufferUsage.STATIC_DRAW\n        });\n        var vertexBufferTypedArray = getVertexBufferTypedArray(mesh, true);\n        mesh._vertexBuffer = Buffer.createVertexBuffer({\n            context: context,\n            typedArray: vertexBufferTypedArray,\n            usage: BufferUsage.STATIC_DRAW\n        });\n    }\n\n    function copyFromBufferView(vertexBuffer, arrayView, offsetInBytes) {\n        offsetInBytes = offsetInBytes || 0;\n        var gl = vertexBuffer._gl;\n        var target = vertexBuffer._bufferTarget;\n        gl.bindBuffer(target, vertexBuffer._buffer);\n        gl.bufferData(target, arrayView, gl.DYNAMIC_DRAW);\n        gl.bindBuffer(target, null);\n\n    }\n\n    function updateInstanceVertexBuffer(mesh, context) {\n        var vertexBufferTypedArray = getVertexBufferTypedArray(mesh);\n        copyFromBufferView(mesh._vertexBuffer, vertexBufferTypedArray);\n\n        var pickIdBufferTypedArray = getPickIdBufferTypedArray(mesh, context);\n        copyFromBufferView(mesh._pickIdBuffer, pickIdBufferTypedArray);\n\n        var instancedAttributes = mesh.instancedAttributes;\n        instancedAttributes.forEach(function (instancedAttribute) {\n            var bufferTypedArray = getInstancedAttribTypedArray(mesh, instancedAttribute);\n            copyFromBufferView(instancedAttribute._buffer, bufferTypedArray);\n        })\n    }\n\n    function createPickIds(mesh, context) {\n        // PERFORMANCE_IDEA: we could skip the pick buffer completely by allocating\n        // a continuous range of pickIds and then converting the base pickId + batchId\n        // to RGBA in the shader.  The only consider is precision issues, which might\n        // not be an issue in WebGL 2.\n        var instances = mesh._instances;\n        var instancesLength = instances.length;\n        var pickIds = new Array(instancesLength);\n        for (var i = 0; i < instancesLength; ++i) {\n            pickIds[i] = context.createPickId(instances[i]);\n        }\n        return pickIds;\n    }\n\n    //创建实例化mesh所有实例的整体外包围球，并计算中心，因为cesium的实例化渲染传递矩阵是需要这个中心加入运算\n    function createInstanceBoundingSphere(mesh) {\n        var instancesLength = mesh._instances.length;\n        var points = new Array(instancesLength);\n\n        for (var i = 0; i < instancesLength; ++i) {\n\n            points[i] = Matrix4.getTranslation(mesh._instances[i].modelMatrix, new Cartesian3());\n        }\n\n        mesh._boundingSphere = BoundingSphere.fromPoints(points);\n        Cartesian3.clone(mesh._boundingSphere.center, mesh._center);\n    }\n\n    /**\n     * 转换Three.js BufferGeometry的InterleavedBufferAttribute\n     * @param {string} name\n     * @param {THREE.InterleavedBufferAttribute|THREE.InstancedInterleavedBuffer} attribute \n     * @param {{[key:string]:number}}attributeLocations\n     * @param {Cesium.Context}\n     * @private\n     */\n    function createInterleavedAttribute3js(name, attribute, attributeLocations, context) {\n\n\n        var data = attribute.data;\n        var stride = data.stride;\n        var offset = attribute.offset;\n\n        var array = data.array;\n        var bytesPerElement = array.constructor.BYTES_PER_ELEMENT\n\n        var vertexBuffer = Buffer.createVertexBuffer({\n            context: context,\n            typedArray: array,\n            usage: data.usage\n        });\n\n        let vaAttribute = {\n            index: attributeLocations[name],\n            vertexBuffer: vertexBuffer,\n            componentDatatype: GeometryUtils.getAttributeComponentType(array),\n            componentsPerAttribute: attribute.itemSize,\n            normalize: attribute.normalized,\n            offsetInBytes: offset * bytesPerElement,\n            strideInBytes: stride * bytesPerElement\n        };\n\n        if (data && data.isInstancedInterleavedBuffer) {\n            vaAttribute.instanceDivisor = data.meshPerAttribute || 1\n        }\n        return vaAttribute;\n    }\n\n    /**\n     * \n     * @param {string} name \n     * @param {THREE.BufferAttribute|THREE.InstancedBufferAttribute} attribute \n     * @param {{[key:string]:number}} attributeLocations \n     * @param {Cesium.Context} context \n     * @param {Cesium.BufferUsage}bufferUsage\n     * @param {{start:number,count:number}}[group]\n     * @returns {Cesium.VertexArrayAttribute}\n     * @private\n     */\n    function createAttribute3js(name, attribute, attributeLocations, context, bufferUsage, group) {\n\n        try {\n\n            var array = attribute.array;\n            if (array instanceof Uint32Array) {\n                array = new Float32Array(array)\n                console.warn('Mesh3D.CesiumVertextArrays：暂不支持Uint32Array类型顶点数组，已经强制替换为Float32Array（这会增加内存开销）');\n            }\n\n            var vertexBuffer = Buffer.createVertexBuffer({\n                context: context,\n                typedArray: array,\n                usage: attribute.usage || bufferUsage\n            });\n\n            let vaAttribute = {\n                index: attributeLocations[name],\n                vertexBuffer: vertexBuffer,\n                componentDatatype: GeometryUtils.getAttributeComponentType(array),\n                componentsPerAttribute: attribute.itemSize,\n                normalize: attribute.normalized\n            };\n\n            if (attribute.isInstancedBufferAttribute) {\n                vaAttribute.offsetInBytes = 0;\n                vaAttribute.strideInBytes = 0;\n                vaAttribute.instanceDivisor = attribute.meshPerAttribute || 1;\n            }\n\n            return vaAttribute;\n        } catch (err) {\n            debugger\n            throw err\n        }\n    }\n\n    /**\n     * \n     * \n     * @param {object} options\n     * @param {THREE.BufferGeometry} options.geometry \n     * @param {Cesium.Context} options.context \n     * @param {Cesium.BufferUsage} [options.bufferUsage]\n     * @param {{start:number,count:number}}[options.group]\n     * @param {ArrayBufferView}[options.indices]\n     * @returns {Cesium.Buffer}\n     * @private \n     */\n    function createIndexBuffer3js(options) {\n\n\n        // var mesh = options.mesh;\n        // var geometry = mesh.geometry;\n        const geometry = options.geometry;\n        const groups = geometry.groups;\n        const bufferUsage = defaultValue(options.bufferUsage, BufferUsage.DYNAMIC_DRAW);\n        const context = options.context;\n        const group = options.group;\n        const groupOptimized = options.groupOptimized\n\n        //索引buffer\n\n        var indices = options.indices, indexBuffer, index = geometry.index;\n        if (!indices) {\n            if (typeof group != 'undefined' && groups.length > 1) {\n\n                //处理threejs用gl.drawArrays绘制的部分，转成用drawElements绘制\n                indices = GeometryUtils.genGeometryIndices(geometry, group, groupOptimized)\n\n            } else if (index) {\n\n                indices = index.array;\n\n            }\n        }\n\n        if (indices && indices.length > 0) {\n\n            var indexDatatype = IndexDatatype.UNSIGNED_SHORT;\n            if (indices instanceof Uint8Array) indexDatatype = IndexDatatype.UNSIGNED_BYTE;\n            else if (indices instanceof Uint32Array) indexDatatype = IndexDatatype.UNSIGNED_INT;\n\n            indexBuffer = Buffer.createIndexBuffer({\n                context: context,\n                typedArray: indices,\n                usage: bufferUsage,\n                indexDatatype: indexDatatype,\n            });\n\n        }\n\n        return indexBuffer;\n    }\n\n    /**\n     * \n     * \n     * @param {object} options\n     * @param {THREE.BufferGeometry} options.geometry \n     * @param {Cesium.Context} options.context \n     * @param {{[key:string]:number}} options.attributeLocations \n     * @param {Cesium.VertexArrayAttribute[]}[options.vertexArrayAttributes]\n     * @param {{start:number,count:number}}[options.group]\n     * @param {ArrayBufferView}[options.indices]\n     * @param {boolean}[options.useEncodedPosition=false]\n     * @private\n     */\n    function fromBufferGeometry3js(options) {\n\n        const geometry = options.geometry;\n        // const position = geometry.attributes.position;\n        const groups = geometry.groups;\n        // const drawRange = geometry.drawRange;\n        const context = options.context;\n        const attributeLocations = options.attributeLocations;\n        const group = options.group;\n        const groupOptimized = options.groupOptimized;\n        const bufferUsage = defaultValue(options.bufferUsage, BufferUsage.DYNAMIC_DRAW);\n        var vaAttributes = [].concat(options.vertexArrayAttributes || []);\n        var attributes3js = geometry.attributes;\n\n        if (options.useEncodedPosition) {\n            //positionHigh+positionLow\n            attributes3js = Object.assign({}, geometry.attributes);\n            var position = attributes3js.position, positions = position.array;\n            var positionHigh = attributes3js.positionHigh = Object.assign({}, position)\n            var positionLow = attributes3js.positionLow = Object.assign({}, position);\n            positionHigh.array = new Float32Array(positions.length)\n            positionLow.array = new Float32Array(positions.length)\n\n            var encodedResult = { high: 0, low: 0 };\n            var factor = 1e6;\n            positions.forEach((value, i) => {\n                Cesium.EncodedCartesian3.encode(value * factor, encodedResult);\n                positionHigh.array[i] = encodedResult.high\n                positionLow.array[i] = encodedResult.low\n            });\n\n            delete attributes3js.position;\n        }\n\n        //indexBuffer\n\n        var indexBuffer = createIndexBuffer3js({\n            geometry: geometry,\n            context: context,\n            group: group,\n            groupOptimized: groupOptimized,\n            bufferUsage: bufferUsage,\n            indices: options.indices\n        })\n\n        //vertexBuffer\n\n        var instanceCount, vaAttributeFromCache = group && groups.length > 1;\n\n        for (const name in attributes3js) {\n            if (attributes3js.hasOwnProperty(name) && defined(attributes3js[name])) {\n\n                let attribute3js = attributes3js[name],\n                    vaAttribute = vaAttributeFromCache ? _webglAttributeCache.get(attribute3js) : undefined;\n\n                if (!vaAttribute) {\n                    if (attribute3js.isInterleavedBufferAttribute) {\n                        vaAttribute = createInterleavedAttribute3js(name, attribute3js, attributeLocations, context)\n\n                    } else {\n                        vaAttribute = createAttribute3js(name, attribute3js, attributeLocations, context, bufferUsage, group)\n                    }\n\n                    if (vaAttribute.instanceDivisor) {\n                        instanceCount = vaAttribute.instanceDivisor * attribute3js.count;\n                    }\n                    _webglAttributeCache.set(attribute3js, vaAttribute, geometry);\n                }\n\n                vaAttributes.push(vaAttribute);\n\n            }\n        }\n\n        var va = new VertexArray({\n            context: context,\n            attributes: vaAttributes,\n            indexBuffer: indexBuffer\n        });\n        va._attributeLocations = attributeLocations;\n        va.instanceCount = instanceCount;\n\n        attributes3js = null;\n\n        return va;\n\n    }\n\n\n    /**\n     * \n     * \n     * @param {Cesium.Geometry|THREE.BufferGeometry} geometry \n     * @param {Mesh|THREE.Mesh} mesh \n     * @param {Cesium.Context} context \n     * @param {{start:number,count:number}|number}[group] group or materialIndex\n     * @param {ArrayBufferView}[indices]\n     * @param {boolean}[groupOptimized]  \n     */\n    this.create = function (geometry, mesh, group, indices, groupOptimized) {\n\n        const frameSate = visualizer.frameState, context = frameSate.context;\n\n        let useEncodedPosition = visualizer.useEncodedPosition;\n\n        var mesh3js = mesh;\n        var attributes = geometry.attributes;\n        if (mesh3js && useEncodedPosition) {\n            attributes = Object.assign({}, geometry.attributes)\n            attributes.positionHigh = attributes.position\n            attributes.positionLow = attributes.position\n            delete attributes.position;\n        }\n\n        var attributeLocations = GeometryPipeline.createAttributeLocations({ attributes });\n        var maxAttribLocation = 0, instanceCount;\n        var va;\n\n        for (var location in attributeLocations) {\n            if (attributeLocations.hasOwnProperty(location)) {\n                maxAttribLocation = Math.max(maxAttribLocation, attributeLocations[location])\n            }\n        }\n\n        var vertexArrayAttributes;\n        if (mesh._instances && mesh._instances.length) {\n            createInstanceBoundingSphere(mesh);\n\n            vertexArrayAttributes = []\n\n            mesh._pickIds = createPickIds(mesh, context);\n\n            createInstanceMvMatrixVertexBuffer(mesh, context);\n\n            var vertexSizeInFloats = 12;\n            var componentSizeInBytes = ComponentDatatype.getSizeInBytes(ComponentDatatype.FLOAT);\n\n            var instancedAttributes = {\n                czm_modelMatrixRow0: {\n                    index: maxAttribLocation + 1,\n                    vertexBuffer: mesh._vertexBuffer,\n                    componentsPerAttribute: 4,\n                    componentDatatype: ComponentDatatype.FLOAT,\n                    normalize: false,\n                    offsetInBytes: 0,\n                    strideInBytes: componentSizeInBytes * vertexSizeInFloats,\n                    instanceDivisor: 1\n                },\n                czm_modelMatrixRow1: {\n                    index: maxAttribLocation + 2,\n                    vertexBuffer: mesh._vertexBuffer,\n                    componentsPerAttribute: 4,\n                    componentDatatype: ComponentDatatype.FLOAT,\n                    normalize: false,\n                    offsetInBytes: componentSizeInBytes * 4,\n                    strideInBytes: componentSizeInBytes * vertexSizeInFloats,\n                    instanceDivisor: 1\n                },\n                czm_modelMatrixRow2: {\n                    index: maxAttribLocation + 3,\n                    vertexBuffer: mesh._vertexBuffer,\n                    componentsPerAttribute: 4,\n                    componentDatatype: ComponentDatatype.FLOAT,\n                    normalize: false,\n                    offsetInBytes: componentSizeInBytes * 8,\n                    strideInBytes: componentSizeInBytes * vertexSizeInFloats,\n                    instanceDivisor: 1\n                }\n            };\n\n            instancedAttributes.a_pickColor = {\n                index: maxAttribLocation + 4,\n                vertexBuffer: mesh._pickIdBuffer,\n                componentsPerAttribute: 4,\n                componentDatatype: ComponentDatatype.UNSIGNED_BYTE,\n                normalize: true,\n                offsetInBytes: 0,\n                strideInBytes: 0,\n                instanceDivisor: 1\n            };\n\n            for (var location in instancedAttributes) {\n                if (instancedAttributes.hasOwnProperty(location)) {\n                    attributeLocations[location] = ++maxAttribLocation;\n                    vertexArrayAttributes.push(instancedAttributes[location])\n                }\n            }\n\n            maxAttribLocation = createMeshInstancedAttributes(mesh, context, vertexArrayAttributes, attributeLocations, maxAttribLocation);\n\n        } else if (mesh3js.isInstancedMesh) {\n            vertexArrayAttributes = []\n            var instanceMatrix = mesh3js.instanceMatrix,\n                instanceColor = mesh3js.instanceColor;\n\n            var vertexSizeInFloats = 16;\n            var componentSizeInBytes = ComponentDatatype.getSizeInBytes(ComponentDatatype.FLOAT);\n\n            var vertexBuffer = Buffer.createVertexBuffer({\n                context: context,\n                typedArray: instanceMatrix.array,\n                usage: BufferUsage.STATIC_DRAW\n            });\n            var instancedAttributes = {};\n\n            for (let i = 0; i < 4; i++) {\n                var location = 'instanceMatrix' + (i ? i : ''),\n                    index = ++maxAttribLocation;\n                var instancedAttribute = {\n                    index: index,\n                    vertexBuffer: vertexBuffer,\n                    componentsPerAttribute: 4,\n                    componentDatatype: ComponentDatatype.FLOAT,\n                    normalize: false,\n                    offsetInBytes: i * vertexSizeInFloats,\n                    strideInBytes: componentSizeInBytes * vertexSizeInFloats,\n                    instanceDivisor: 1\n                }\n                vertexArrayAttributes.push(instancedAttribute);\n                attributeLocations[location] = index;\n            }\n\n            if (mesh3js.instanceColor) {\n                attributeLocations['instanceColor'] = ++maxAttribLocation;\n                var instanceColor = createAttribute3js('instanceColor', mesh3js.instanceColor, attributeLocations, context, group, BufferUsage.STATIC_DRAW)\n                instanceColor.instanceDivisor = 1;\n                vertexArrayAttributes.push(instanceColor);\n\n            }\n\n            instanceCount = mesh3js.count;\n        }\n\n        if (geometry.isBufferGeometry) {\n\n            va = fromBufferGeometry3js({\n                context: context,\n                geometry: geometry,\n                attributeLocations: attributeLocations,\n                bufferUsage: BufferUsage.STATIC_DRAW,\n                vertexArrayAttributes: vertexArrayAttributes,\n                group: group,\n                indices: indices,\n                groupOptimized: groupOptimized,\n                useEncodedPosition: useEncodedPosition\n            });\n        }\n        else {\n\n            attributes = geometry.attributes;\n            for (const key in attributes) {\n                var attribute = attributes[key]\n                if (!attribute) delete attributes[key]\n                else if (attribute.componentDatatype == ComponentDatatype.DOUBLE) {\n                    attribute.values = new Float32Array(attribute.values)\n                }\n            }\n\n            va = VertexArray.fromGeometry({\n                context: context,\n                geometry: geometry,\n                attributeLocations: attributeLocations,\n                bufferUsage: BufferUsage.STATIC_DRAW,\n                vertexArrayAttributes: vertexArrayAttributes\n            });\n        }\n\n        if (vertexArrayAttributes && vertexArrayAttributes.length) {\n            va._cacehVertexArrayAttributes = vertexArrayAttributes;\n        }\n        va._attributeLocations = attributeLocations;\n        if (instanceCount) va.instanceCount = instanceCount;\n        va._attributes.sort((a, b) => {\n            return a.index - b.index;\n        })\n\n        return va;\n    }\n\n    /**\n     * \n     * @param {Mesh|THREE.Mesh} mesh  \n     * @param {Cesium.DrawCommand} command \n     * @param {THREE.BufferGeometry}[geometry3js]\n     * @param {boolean}[forceUpdate]\n     * @private\n     */\n    this.update = function (mesh, command, geometry3js, forceUpdate) {\n\n        const frameSate = visualizer.frameState, context = frameSate.context;\n\n        var mesh3js = mesh;\n        if (!geometry3js && mesh3js) geometry3js = WebGLGeometries.get(mesh3js.geometry);\n\n        var geometry = mesh.geometry;\n        //更新属性缓冲区\n        var attributes = geometry.attributes;\n\n        var attributes3js = geometry3js && geometry3js.attributes;\n        var va = command.vertexArray;\n        var vaNeedsUpdate = false;\n\n        var morph = false, skinning = false;\n        if (mesh3js) {\n            morph = mesh3js.material.morphTargets || mesh3js.material.morphNormals;\n            skinning = mesh3js.isSkinnedMesh\n        }\n\n        if (!skinning && !morph) {\n\n            for (var name in attributes) {\n                var attribute = attributes[name];\n                if (!attribute) continue;\n\n                // if (morph && (name.includes('morphTarget') || name.includes('morphNormal'))) continue;\n\n                var needsUpdate = forceUpdate || attribute.needsUpdate != false\n\n                if (!attributes3js && needsUpdate == false) continue;\n\n                if (updateVerexAttribute(va, name, (attributes3js && attributes3js[name]) || attribute, needsUpdate)) {\n                    attribute.needsUpdate = false;\n                } else {\n                    vaNeedsUpdate = true;\n                    break;\n                }\n            }\n        }\n\n        //更新索引缓冲区\n        if (!vaNeedsUpdate && geometry.indexNeedsUpdate) {\n            var ib = va.indexBuffer;\n            geometry.indexNeedsUpdate = false;\n            ib.copyFromArrayView(geometry.indices, 0);\n        }\n\n        if (!vaNeedsUpdate && mesh._instances && mesh._instances.length) {\n            updateInstanceVertexBuffer(mesh, context);\n        }\n\n        //重建vertexArray\n        if (vaNeedsUpdate) {\n            var va = command.vertexArray;\n            if (!va.isDestroyed()) {\n                va.destroy();\n\n                if (_webglAttributeCache) {\n                    for (var name in attributes3js) {\n                        if (attributes3js.hasOwnProperty(name) && attributes3js[name]) {\n                            _webglAttributeCache.delete(attributes3js[name])\n                        }\n                    }\n                    debugger\n                }\n            }\n\n            command.vertexArray = this.create(mesh, context);\n            for (var name in attributes) {\n                if (attributes.hasOwnProperty(name) && attributes[name]) {\n                    attributes[name].needsUpdate = false;\n                }\n            }\n            mesh.geometry.indexNeedsUpdate = false;\n\n        } else if (mesh3js && mesh3js.isInstancedMesh) {\n\n            var instanceMatrix = mesh3js.instanceMatrix,\n                instanceColor = mesh3js.instanceColor;\n\n            if (va._attributes[va._attributeLocations['instanceMatrix']].version != instanceMatrix.version) {\n\n                updateVerexAttribute(va, 'instanceMatrix', instanceMatrix);\n            }\n\n            if (instanceColor && va._attributes[va._attributeLocations['instanceColor']].version != instanceColor.version) {\n                updateVerexAttribute(va, 'instanceColor', instanceColor);\n            }\n        }\n\n        return vaNeedsUpdate;\n    }\n\n    /**\n     * \n     * @param {Mesh|THREE.Mesh} mesh \n     * @param {string} attributeName \n     * @param {THREE.BufferAttribute|Cesium.GeometryAttribute}geometryAttribute\n     * @private\n     */\n    this.updateVerexBuffer = function (mesh, attributeName, geometryAttribute) {\n        var renderItems = mesh.renderItems; //(mesh._actualMesh || mesh).command;\n        if (!renderItems) return;\n        if (attributeName == 'position') debugger;\n        renderItems.forEach(renderItem => {\n            if (!renderItem) return;\n            const drawCommand = renderItem.drawCommand;\n            var va = drawCommand.vertexArray;\n            updateVerexAttribute(va, attributeName, geometryAttribute, true)\n        })\n    }\n\n    function updateVerexAttribute(va, name, geometryAttribute, needsUpdate) {\n\n        var attrLocation = va._attributeLocations[name];\n        if (attrLocation == undefined) return false;\n\n        var vaAttr = va._attributes[attrLocation];\n        // needsUpdate = needsUpdate || vaAttr.version != geometryAttribute.version;\n\n        // if (!needsUpdate) return true;\n\n        var vb = vaAttr.vertexBuffer;\n        var arrayView = geometryAttribute.values || geometryAttribute.array;\n\n        var BYTES_PER_ELEMENT = arrayView.constructor.BYTES_PER_ELEMENT;\n        if (vb._sizeInBytes != arrayView.length * BYTES_PER_ELEMENT) {\n            return false\n        }\n\n        vb.copyFromArrayView(arrayView, 0);\n        // vaAttr.version = geometryAttribute.version;\n        return true;\n    }\n\n    /**\n     * \n     * @param {THREE.BufferGeometry} geometry3js \n     */\n    this.delete = function (geometry3js) {\n        if (_webglAttributeCache) {\n            var attributes3js = geometry3js.attributes;\n            for (var name in attributes3js) {\n                if (attributes3js.hasOwnProperty(name) && attributes3js[name]) {\n                    _webglAttributeCache.delete(attributes3js[name])\n                }\n            }\n        }\n    }\n\n}\n\nexport default CesiumVertextArrays;",
    "/**\n * threejs constants=>cesium constants\n */\nclass ConstantMap {\n\n    static init() {\n        if (this.hasInit) return;\n        this.hasInit = true;\n   \n        this._formatsMap = {\n            [THREE.RGBFormat]: Cesium.PixelFormat.RGB,\n            [THREE.RGBAFormat]: Cesium.PixelFormat.RGBA,\n            [THREE.DepthFormat]: Cesium.PixelFormat.DEPTH_COMPONENT,\n            [THREE.AlphaFormat]: Cesium.PixelFormat.ALPHA,\n            [THREE.DepthStencilFormat]: Cesium.PixelFormat.DEPTH_STENCIL,\n            [THREE.LuminanceFormat]: Cesium.PixelFormat.LUMINANCE,\n            [THREE.LuminanceAlphaFormat]: Cesium.PixelFormat.LUMINANCE_ALPHA,\n            [THREE.RGBA_S3TC_DXT1_Format]: Cesium.PixelFormat.RGBA_DXT1,\n            [THREE.RGBA_S3TC_DXT3_Format]: Cesium.PixelFormat.RGBA_DXT3,\n            [THREE.RGBA_S3TC_DXT5_Format]: Cesium.PixelFormat.RGBA_DXT5,\n            [THREE.RGBA_PVRTC_2BPPV1_Format]: Cesium.PixelFormat.RGBA_PVRTC_2BPPV1,\n            [THREE.RGBA_PVRTC_4BPPV1_Format]: Cesium.PixelFormat.RGBA_PVRTC_4BPPV1,\n            [THREE.RGB_S3TC_DXT1_Format]: Cesium.PixelFormat.RGB_DXT1,\n            [THREE.RGB_ETC1_Format]: Cesium.PixelFormat.RGB_ETC1,\n            [THREE.RGB_PVRTC_2BPPV1_Format]: Cesium.PixelFormat.RGB_PVRTC_2BPPV1,\n            [THREE.RGB_PVRTC_4BPPV1_Format]: Cesium.PixelFormat.RGB_PVRTC_4BPPV1\n        }\n\n        this._typesMap = {\n            [THREE.FloatType]: Cesium.PixelDatatype.FLOAT,\n            [THREE.UnsignedByteType]: Cesium.PixelDatatype.UNSIGNED_BYTE,\n            [THREE.HalfFloatType]: Cesium.PixelDatatype.HALF_FLOAT,\n            [THREE.UnsignedIntType]: Cesium.PixelDatatype.UNSIGNED_INT,\n            [THREE.UnsignedInt248Type]: Cesium.PixelDatatype.UNSIGNED_INT_24_8,\n            [THREE.UnsignedShortType]: Cesium.PixelDatatype.UNSIGNED_SHORT,\n            [THREE.UnsignedShort4444Type]: Cesium.PixelDatatype.UNSIGNED_SHORT_4_4_4_4,\n            [THREE.UnsignedShort5551Type]: Cesium.PixelDatatype.UNSIGNED_SHORT_5_5_5_1,\n            [THREE.UnsignedShort565Type]: Cesium.PixelDatatype.UNSIGNED_SHORT_5_6_5\n        }\n\n        this._minFilterMap = {\n            [THREE.LinearFilter]: Cesium.TextureMinificationFilter.LINEAR,\n            [THREE.LinearMipmapLinearFilter]: Cesium.TextureMinificationFilter.LINEAR_MIPMAP_LINEAR,\n            [THREE.NearestMipMapLinearFilter]: Cesium.TextureMinificationFilter.NEAREST_MIPMAP_LINEAR,\n            [THREE.NearestFilter]: Cesium.TextureMinificationFilter.NEAREST,\n            [THREE.LinearMipmapNearestFilter]: Cesium.TextureMinificationFilter.LINEAR_MIPMAP_NEAREST,\n            [THREE.NearestMipmapNearestFilter]: Cesium.TextureMinificationFilter.NEAREST_MIPMAP_NEAREST\n        };\n\n        this._magFilterMap = {\n            [THREE.NearestFilter]: Cesium.TextureMagnificationFilter.NEAREST,\n            [THREE.LinearFilter]: Cesium.TextureMagnificationFilter.LINEAR\n        }\n\n        this._textureWrapMap = {\n            [THREE.ClampToEdgeWrapping]: Cesium.TextureWrap.CLAMP_TO_EDGE,\n            [THREE.MirroredRepeatWrapping]: Cesium.TextureWrap.MIRRORED_REPEAT,\n            [THREE.RepeatWrapping]: Cesium.TextureWrap.REPEAT\n        }\n \n        this._depthFuncMap = {\n            [THREE.NeverDepth]: Cesium.WebGLConstants.NEVER,\n            [THREE.AlwaysDepth]: Cesium.WebGLConstants.ALWAYS,\n            [THREE.LessDepth]: Cesium.WebGLConstants.LESS,\n            [THREE.LessEqualDepth]: Cesium.WebGLConstants.LEQUAL,\n            [THREE.EqualDepth]: Cesium.WebGLConstants.EQUAL,\n            [THREE.GreaterEqualDepth]: Cesium.WebGLConstants.GEQUAL,\n            [THREE.GreaterDepth]: Cesium.WebGLConstants.GREATER,\n            [THREE.NotEqualDepth]: Cesium.WebGLConstants.NOTEQUAL\n        };\n\n        this._factorMap = {\n            [THREE.ZeroFactor]: Cesium.WebGLConstants.ZERO,\n            [THREE.OneFactor]: Cesium.WebGLConstants.ONE,\n            [THREE.SrcColorFactor]: Cesium.WebGLConstants.SRC_COLOR,\n            [THREE.SrcAlphaFactor]: Cesium.WebGLConstants.SRC_ALPHA,\n            [THREE.SrcAlphaSaturateFactor]: Cesium.WebGLConstants.SRC_ALPHA_SATURATE,\n            [THREE.DstColorFactor]: Cesium.WebGLConstants.DST_COLOR,\n            [THREE.DstAlphaFactor]: Cesium.WebGLConstants.DST_ALPHA,\n            [THREE.OneMinusSrcColorFactor]: Cesium.WebGLConstants.ONE_MINUS_SRC_COLOR,\n            [THREE.OneMinusSrcAlphaFactor]: Cesium.WebGLConstants.ONE_MINUS_SRC_ALPHA,\n            [THREE.OneMinusDstColorFactor]: Cesium.WebGLConstants.ONE_MINUS_DST_COLOR,\n            [THREE.OneMinusDstAlphaFactor]: Cesium.WebGLConstants.ONE_MINUS_DST_ALPHA\n        };\n\n        this._equationMap = {\n            [THREE.AddEquation]: Cesium.WebGLConstants.FUNC_ADD,\n            [THREE.SubtractEquation]: Cesium.WebGLConstants.FUNC_SUBTRACT,\n            [THREE.ReverseSubtractEquation]: Cesium.WebGLConstants.FUNC_REVERSE_SUBTRACT,\n            [THREE.MinEquation]: Cesium.WebGLConstants.MIN,\n            [THREE.MaxEquation]: Cesium.WebGLConstants.MAX\n        };\n    }\n\n    static get formatsMap() {\n        this.init();\n        return this._formatsMap;\n    }\n    static get typesMap() {\n        this.init();\n        return this._typesMap;\n    }\n    static get magFilterMap() {\n        this.init();\n        return this._magFilterMap;\n    }\n    static get minFilterMap() {\n        this.init();\n        return this._minFilterMap;\n    }\n    static get textureWrapMap() {\n        this.init();\n        return this._textureWrapMap;\n    }\n    static get depthFuncMap() {\n        this.init();\n        return this._depthFuncMap;\n    }\n    static get factorMap() {\n        this.init();\n        return this._factorMap;\n    }\n    static get equationMap() {\n        this.init();\n        return this._equationMap;\n    }\n}\n\nexport default ConstantMap;",
    "// import Cartesian2 from \"../core/Cartesian2.js\";\n// import Check from \"../core/Check.js\";\n// import createGuid from \"../core/createGuid.js\";\n// import defaultValue from \"../core/defaultValue.js\";\n// import defined from \"../core/defined.js\";\n// import destroyObject from \"../core/destroyObject.js\";\n// import DeveloperError from \"../core/DeveloperError.js\";\n// import CesiumMath from \"../core/Math.js\";\n// import PixelFormat from \"../core/PixelFormat.js\";\n// import WebGLConstants from \"../core/WebGLConstants.js\";\n// import ContextLimits from \"./ContextLimits.js\";\n// import MipmapHint from \"./MipmapHint.js\";\n// import PixelDatatype from \"./PixelDatatype.js\";\n// import Sampler from \"./Sampler.js\";\n// import TextureMagnificationFilter from \"./TextureMagnificationFilter.js\";\n// import TextureMinificationFilter from \"./TextureMinificationFilter.js\";\nvar Cartesian2, Check,\n    createGuid, defaultValue,\n    defined, destroyObject,\n    DeveloperError, CesiumMath,\n    PixelFormat, WebGLConstants,\n    ContextLimits, MipmapHint,\n    PixelDatatype, Sampler,\n    TextureMagnificationFilter, TextureMinificationFilter;\n\nfunction initDeps$DDSTexture() {\n    if (Cartesian2) return;\n    const _Cesium = Cesium;\n\n    Cartesian2 = _Cesium.Cartesian2;\n    Check = _Cesium.Check;\n    createGuid = _Cesium.createGuid;\n    defaultValue = _Cesium.defaultValue;\n    defined = _Cesium.defined;\n    destroyObject = _Cesium.destroyObject;\n    DeveloperError = _Cesium.DeveloperError;\n    CesiumMath = _Cesium.Math;\n    PixelFormat = _Cesium.PixelFormat;\n    WebGLConstants = _Cesium.WebGLConstants;\n    ContextLimits = _Cesium.ContextLimits;\n    MipmapHint = _Cesium.MipmapHint;\n    PixelDatatype = _Cesium.PixelDatatype;\n    Sampler = _Cesium.Sampler;\n    TextureMagnificationFilter = _Cesium.TextureMagnificationFilter;\n    TextureMinificationFilter = _Cesium.TextureMinificationFilter;\n\n}\n\n/**\n * @private\n */\nfunction DDSTexture(options) {\n    initDeps$DDSTexture()\n\n    options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n    //>>includeStart('debug', pragmas.debug);\n    // Check.defined(\"options.context\", options.context);\n    //>>includeEnd('debug');\n\n    var context = options.context;\n    var width = options.width;\n    var height = options.height;\n    var source = options.source;\n\n    if (defined(source)) {\n        if (!defined(width)) {\n            width = defaultValue(source.videoWidth, source.width);\n        }\n        if (!defined(height)) {\n            height = defaultValue(source.videoHeight, source.height);\n        }\n    }\n\n    var pixelFormat = defaultValue(options.pixelFormat, PixelFormat.RGBA);\n    var pixelDatatype = defaultValue(\n        options.pixelDatatype,\n        PixelDatatype.UNSIGNED_BYTE\n    );\n    var internalFormat = pixelFormat;\n\n    var isCompressed = PixelFormat.isCompressedFormat(internalFormat);\n\n    if (context.webgl2) {\n        if (pixelFormat === PixelFormat.DEPTH_STENCIL) {\n            internalFormat = WebGLConstants.DEPTH24_STENCIL8;\n        } else if (pixelFormat === PixelFormat.DEPTH_COMPONENT) {\n            if (pixelDatatype === PixelDatatype.UNSIGNED_SHORT) {\n                internalFormat = WebGLConstants.DEPTH_COMPONENT16;\n            } else if (pixelDatatype === PixelDatatype.UNSIGNED_INT) {\n                internalFormat = WebGLConstants.DEPTH_COMPONENT24;\n            }\n        }\n\n        if (pixelDatatype === PixelDatatype.FLOAT) {\n            switch (pixelFormat) {\n                case PixelFormat.RGBA:\n                    internalFormat = WebGLConstants.RGBA32F;\n                    break;\n                case PixelFormat.RGB:\n                    internalFormat = WebGLConstants.RGB32F;\n                    break;\n                case PixelFormat.RG:\n                    internalFormat = WebGLConstants.RG32F;\n                    break;\n                case PixelFormat.R:\n                    internalFormat = WebGLConstants.R32F;\n                    break;\n            }\n        } else if (pixelDatatype === PixelDatatype.HALF_FLOAT) {\n            switch (pixelFormat) {\n                case PixelFormat.RGBA:\n                    internalFormat = WebGLConstants.RGBA16F;\n                    break;\n                case PixelFormat.RGB:\n                    internalFormat = WebGLConstants.RGB16F;\n                    break;\n                case PixelFormat.RG:\n                    internalFormat = WebGLConstants.RG16F;\n                    break;\n                case PixelFormat.R:\n                    internalFormat = WebGLConstants.R16F;\n                    break;\n            }\n        }\n    }\n\n    //>>includeStart('debug', pragmas.debug);\n    // if (!defined(width) || !defined(height)) {\n    //     throw new DeveloperError(\n    //         \"options requires a source field to create an initialized texture or width and height fields to create a blank texture.\"\n    //     );\n    // }\n\n    // Check.typeOf.number.greaterThan(\"width\", width, 0);\n\n    // if (width > ContextLimits.maximumTextureSize) {\n    //     throw new DeveloperError(\n    //         \"Width must be less than or equal to the maximum texture size (\" +\n    //         ContextLimits.maximumTextureSize +\n    //         \").  Check maximumTextureSize.\"\n    //     );\n    // }\n\n    // Check.typeOf.number.greaterThan(\"height\", height, 0);\n\n    // if (height > ContextLimits.maximumTextureSize) {\n    //     throw new DeveloperError(\n    //         \"Height must be less than or equal to the maximum texture size (\" +\n    //         ContextLimits.maximumTextureSize +\n    //         \").  Check maximumTextureSize.\"\n    //     );\n    // }\n\n    // if (!PixelFormat.validate(pixelFormat)) {\n    //     throw new DeveloperError(\"Invalid options.pixelFormat.\");\n    // }\n\n    // if (!isCompressed && !PixelDatatype.validate(pixelDatatype)) {\n    //     throw new DeveloperError(\"Invalid options.pixelDatatype.\");\n    // }\n\n    // if (\n    //     pixelFormat === PixelFormat.DEPTH_COMPONENT &&\n    //     pixelDatatype !== PixelDatatype.UNSIGNED_SHORT &&\n    //     pixelDatatype !== PixelDatatype.UNSIGNED_INT\n    // ) {\n    //     throw new DeveloperError(\n    //         \"When options.pixelFormat is DEPTH_COMPONENT, options.pixelDatatype must be UNSIGNED_SHORT or UNSIGNED_INT.\"\n    //     );\n    // }\n\n    // if (\n    //     pixelFormat === PixelFormat.DEPTH_STENCIL &&\n    //     pixelDatatype !== PixelDatatype.UNSIGNED_INT_24_8\n    // ) {\n    //     throw new DeveloperError(\n    //         \"When options.pixelFormat is DEPTH_STENCIL, options.pixelDatatype must be UNSIGNED_INT_24_8.\"\n    //     );\n    // }\n\n    // if (pixelDatatype === PixelDatatype.FLOAT && !context.floatingPointTexture) {\n    //     throw new DeveloperError(\n    //         \"When options.pixelDatatype is FLOAT, this WebGL implementation must support the OES_texture_float extension.  Check context.floatingPointTexture.\"\n    //     );\n    // }\n\n    // if (\n    //     pixelDatatype === PixelDatatype.HALF_FLOAT &&\n    //     !context.halfFloatingPointTexture\n    // ) {\n    //     throw new DeveloperError(\n    //         \"When options.pixelDatatype is HALF_FLOAT, this WebGL implementation must support the OES_texture_half_float extension. Check context.halfFloatingPointTexture.\"\n    //     );\n    // }\n\n    // if (PixelFormat.isDepthFormat(pixelFormat)) {\n    //     if (defined(source)) {\n    //         throw new DeveloperError(\n    //             \"When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, source cannot be provided.\"\n    //         );\n    //     }\n\n    //     if (!context.depthTexture) {\n    //         throw new DeveloperError(\n    //             \"When options.pixelFormat is DEPTH_COMPONENT or DEPTH_STENCIL, this WebGL implementation must support WEBGL_depth_texture.  Check context.depthTexture.\"\n    //         );\n    //     }\n    // }\n\n    // if (isCompressed) {\n    //     if (!defined(source) || !defined(source.arrayBufferView)) {\n    //         throw new DeveloperError(\n    //             \"When options.pixelFormat is compressed, options.source.arrayBufferView must be defined.\"\n    //         );\n    //     }\n\n    //     if (PixelFormat.isDXTFormat(internalFormat) && !context.s3tc) {\n    //         throw new DeveloperError(\n    //             \"When options.pixelFormat is S3TC compressed, this WebGL implementation must support the WEBGL_texture_compression_s3tc extension. Check context.s3tc.\"\n    //         );\n    //     } else if (PixelFormat.isPVRTCFormat(internalFormat) && !context.pvrtc) {\n    //         throw new DeveloperError(\n    //             \"When options.pixelFormat is PVRTC compressed, this WebGL implementation must support the WEBGL_texture_compression_pvrtc extension. Check context.pvrtc.\"\n    //         );\n    //     } else if (PixelFormat.isETC1Format(internalFormat) && !context.etc1) {\n    //         throw new DeveloperError(\n    //             \"When options.pixelFormat is ETC1 compressed, this WebGL implementation must support the WEBGL_texture_compression_etc1 extension. Check context.etc1.\"\n    //         );\n    //     }\n\n    //     if (\n    //         PixelFormat.compressedTextureSizeInBytes(\n    //             internalFormat,\n    //             width,\n    //             height\n    //         ) !== source.arrayBufferView.byteLength\n    //     ) {\n    //         throw new DeveloperError(\n    //             \"The byte length of the array buffer is invalid for the compressed texture with the given width and height.\"\n    //         );\n    //     }\n    // }\n    //>>includeEnd('debug');\n\n    // Use premultiplied alpha for opaque textures should perform better on Chrome:\n    // http://media.tojicode.com/webglCamp4/#20\n    var preMultiplyAlpha =\n        options.preMultiplyAlpha ||\n        pixelFormat === PixelFormat.RGB ||\n        pixelFormat === PixelFormat.LUMINANCE;\n    var flipY = defaultValue(options.flipY, true);\n\n    var initialized = true;\n\n    var gl = context._gl;\n    var textureTarget = gl.TEXTURE_2D;\n    var texture = gl.createTexture();\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(textureTarget, texture);\n\n    var unpackAlignment = 4;\n    if (defined(source) && defined(source.arrayBufferView) && !isCompressed) {\n        unpackAlignment = PixelFormat.alignmentInBytes(\n            pixelFormat,\n            pixelDatatype,\n            width\n        );\n    }\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n\n    const floor = Math.floor;\n    if (defined(source)) {\n        if (defined(source.arrayBufferView)) {\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n            // Source: typed array\n            var arrayBufferView = source.arrayBufferView;\n            if (isCompressed) {\n\n                gl.compressedTexImage2D(\n                    textureTarget,\n                    0,\n                    internalFormat,\n                    width,\n                    height,\n                    0,\n                    arrayBufferView\n                );\n\n                if (defined(source.mipLevels)) {\n                    var mipWidth = width;\n                    var mipHeight = height;\n                    for (var i = 0; i < source.mipLevels.length; ++i) {\n                        mipWidth = floor(mipWidth / 2) | 0;\n                        if (mipWidth < 1) {\n                            mipWidth = 1;\n                        }\n                        mipHeight = floor(mipHeight / 2) | 0;\n                        if (mipHeight < 1) {\n                            mipHeight = 1;\n                        }\n                        gl.compressedTexImage2D(\n                            textureTarget,\n                            i + 1,\n                            internalFormat,\n                            mipWidth,\n                            mipHeight,\n                            0,\n                            source.mipLevels[i]\n                        );\n                    }\n                }\n\n            } else {\n                if (flipY) {\n                    arrayBufferView = PixelFormat.flipY(\n                        arrayBufferView,\n                        pixelFormat,\n                        pixelDatatype,\n                        width,\n                        height\n                    );\n                }\n                gl.texImage2D(\n                    textureTarget,\n                    0,\n                    internalFormat,\n                    width,\n                    height,\n                    0,\n                    pixelFormat,\n                    pixelDatatype,\n                    arrayBufferView\n                );\n\n                if (defined(source.mipLevels)) {\n                    var mipWidth = width;\n                    var mipHeight = height;\n                    for (var i = 0; i < source.mipLevels.length; ++i) {\n                        mipWidth = floor(mipWidth / 2) | 0;\n                        if (mipWidth < 1) {\n                            mipWidth = 1;\n                        }\n                        mipHeight = floor(mipHeight / 2) | 0;\n                        if (mipHeight < 1) {\n                            mipHeight = 1;\n                        }\n                        gl.texImage2D(\n                            textureTarget,\n                            i + 1,\n                            internalFormat,\n                            mipWidth,\n                            mipHeight,\n                            0,\n                            pixelFormat,\n                            pixelDatatype,\n                            source.mipLevels[i]\n                        );\n                    }\n                }\n            }\n        } else if (defined(source.framebuffer)) {\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n            // Source: framebuffer\n            if (source.framebuffer !== context.defaultFramebuffer) {\n                source.framebuffer._bind();\n            }\n\n            gl.copyTexImage2D(\n                textureTarget,\n                0,\n                internalFormat,\n                source.xOffset,\n                source.yOffset,\n                width,\n                height,\n                0\n            );\n\n            if (source.framebuffer !== context.defaultFramebuffer) {\n                source.framebuffer._unBind();\n            }\n        } else {\n            // Only valid for DOM-Element uploads\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, preMultiplyAlpha);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\n\n            // Source: ImageData, HTMLImageElement, HTMLCanvasElement, or HTMLVideoElement\n            gl.texImage2D(\n                textureTarget,\n                0,\n                internalFormat,\n                pixelFormat,\n                pixelDatatype,\n                source\n            );\n        }\n    } else {\n        gl.texImage2D(\n            textureTarget,\n            0,\n            internalFormat,\n            width,\n            height,\n            0,\n            pixelFormat,\n            pixelDatatype,\n            null\n        );\n        initialized = false;\n    }\n    gl.bindTexture(textureTarget, null);\n\n    var sizeInBytes;\n    if (isCompressed) {\n        sizeInBytes = PixelFormat.compressedTextureSizeInBytes(\n            pixelFormat,\n            width,\n            height\n        );\n    } else {\n        sizeInBytes = PixelFormat.textureSizeInBytes(\n            pixelFormat,\n            pixelDatatype,\n            width,\n            height\n        );\n    }\n\n    this._id = createGuid();\n    this._context = context;\n    this._textureFilterAnisotropic = context._textureFilterAnisotropic;\n    this._textureTarget = textureTarget;\n    this._texture = texture;\n    this._pixelFormat = pixelFormat;\n    this._pixelDatatype = pixelDatatype;\n    this._width = width;\n    this._height = height;\n    this._dimensions = new Cartesian2(width, height);\n    this._hasMipmap = false;\n    this._sizeInBytes = sizeInBytes;\n    this._preMultiplyAlpha = preMultiplyAlpha;\n    this._flipY = flipY;\n    this._initialized = initialized;\n    this._sampler = undefined;\n\n    this.sampler = defined(options.sampler) ? options.sampler : new Sampler();\n}\n\n/**\n * This function is identical to using the DDSTexture constructor except that it can be\n * replaced with a mock/spy in tests.\n * @private\n */\nDDSTexture.create = function (options) {\n    return new DDSTexture(options);\n};\n\n/**\n * Creates a texture, and copies a subimage of the framebuffer to it.  When called without arguments,\n * the texture is the same width and height as the framebuffer and contains its contents.\n *\n * @param {Object} options Object with the following properties:\n * @param {Context} options.context The context in which the DDSTexture gets created.\n * @param {PixelFormat} [options.pixelFormat=PixelFormat.RGB] The texture's internal pixel format.\n * @param {Number} [options.framebufferXOffset=0] An offset in the x direction in the framebuffer where copying begins from.\n * @param {Number} [options.framebufferYOffset=0] An offset in the y direction in the framebuffer where copying begins from.\n * @param {Number} [options.width=canvas.clientWidth] The width of the texture in texels.\n * @param {Number} [options.height=canvas.clientHeight] The height of the texture in texels.\n * @param {Framebuffer} [options.framebuffer=defaultFramebuffer] The framebuffer from which to create the texture.  If this\n *        parameter is not specified, the default framebuffer is used.\n * @returns {DDSTexture} A texture with contents from the framebuffer.\n *\n * @exception {DeveloperError} Invalid pixelFormat.\n * @exception {DeveloperError} pixelFormat cannot be DEPTH_COMPONENT, DEPTH_STENCIL or a compressed format.\n * @exception {DeveloperError} framebufferXOffset must be greater than or equal to zero.\n * @exception {DeveloperError} framebufferYOffset must be greater than or equal to zero.\n * @exception {DeveloperError} framebufferXOffset + width must be less than or equal to canvas.clientWidth.\n * @exception {DeveloperError} framebufferYOffset + height must be less than or equal to canvas.clientHeight.\n *\n *\n * @example\n * // Create a texture with the contents of the framebuffer.\n * var t = DDSTexture.fromFramebuffer({\n *     context : context\n * });\n *\n * @see Sampler\n *\n * @private\n */\nDDSTexture.fromFramebuffer = function (options) {\n    options = defaultValue(options, defaultValue.EMPTY_OBJECT);\n\n    //>>includeStart('debug', pragmas.debug);\n    // Check.defined(\"options.context\", options.context);\n    //>>includeEnd('debug');\n\n    var context = options.context;\n    var gl = context._gl;\n\n    var pixelFormat = defaultValue(options.pixelFormat, PixelFormat.RGB);\n    var framebufferXOffset = defaultValue(options.framebufferXOffset, 0);\n    var framebufferYOffset = defaultValue(options.framebufferYOffset, 0);\n    var width = defaultValue(options.width, gl.drawingBufferWidth);\n    var height = defaultValue(options.height, gl.drawingBufferHeight);\n    var framebuffer = options.framebuffer;\n\n    //>>includeStart('debug', pragmas.debug);\n    // if (!PixelFormat.validate(pixelFormat)) {\n    //     throw new DeveloperError(\"Invalid pixelFormat.\");\n    // }\n    // if (\n    //     PixelFormat.isDepthFormat(pixelFormat) ||\n    //     PixelFormat.isCompressedFormat(pixelFormat)\n    // ) {\n    //     throw new DeveloperError(\n    //         \"pixelFormat cannot be DEPTH_COMPONENT, DEPTH_STENCIL or a compressed format.\"\n    //     );\n    // }\n    // Check.defined(\"options.context\", options.context);\n    // Check.typeOf.number.greaterThanOrEquals(\n    //     \"framebufferXOffset\",\n    //     framebufferXOffset,\n    //     0\n    // );\n    // Check.typeOf.number.greaterThanOrEquals(\n    //     \"framebufferYOffset\",\n    //     framebufferYOffset,\n    //     0\n    // );\n    // if (framebufferXOffset + width > gl.drawingBufferWidth) {\n    //     throw new DeveloperError(\n    //         \"framebufferXOffset + width must be less than or equal to drawingBufferWidth\"\n    //     );\n    // }\n    // if (framebufferYOffset + height > gl.drawingBufferHeight) {\n    //     throw new DeveloperError(\n    //         \"framebufferYOffset + height must be less than or equal to drawingBufferHeight.\"\n    //     );\n    // }\n    //>>includeEnd('debug');\n\n    var texture = new DDSTexture({\n        context: context,\n        width: width,\n        height: height,\n        pixelFormat: pixelFormat,\n        source: {\n            framebuffer: defined(framebuffer)\n                ? framebuffer\n                : context.defaultFramebuffer,\n            xOffset: framebufferXOffset,\n            yOffset: framebufferYOffset,\n            width: width,\n            height: height,\n        },\n    });\n\n    return texture;\n};\n\nObject.defineProperties(DDSTexture.prototype, {\n    /**\n     * A unique id for the texture\n     * @memberof DDSTexture.prototype\n     * @type {String}\n     * @readonly\n     * @private\n     */\n    id: {\n        get: function () {\n            return this._id;\n        },\n    },\n    /**\n     * The sampler to use when sampling this texture.\n     * Create a sampler by calling {@link Sampler}.  If this\n     * parameter is not specified, a default sampler is used.  The default sampler clamps texture\n     * coordinates in both directions, uses linear filtering for both magnification and minification,\n     * and uses a maximum anisotropy of 1.0.\n     * @memberof DDSTexture.prototype\n     * @type {Object}\n     */\n    sampler: {\n        get: function () {\n            return this._sampler;\n        },\n        set: function (sampler) {\n            var minificationFilter = sampler.minificationFilter;\n            var magnificationFilter = sampler.magnificationFilter;\n\n            var mipmap =\n                minificationFilter ===\n                TextureMinificationFilter.NEAREST_MIPMAP_NEAREST ||\n                minificationFilter ===\n                TextureMinificationFilter.NEAREST_MIPMAP_LINEAR ||\n                minificationFilter ===\n                TextureMinificationFilter.LINEAR_MIPMAP_NEAREST ||\n                minificationFilter === TextureMinificationFilter.LINEAR_MIPMAP_LINEAR;\n\n            var context = this._context;\n            var pixelDatatype = this._pixelDatatype;\n\n            // float textures only support nearest filtering unless the linear extensions are supported, so override the sampler's settings\n            if (\n                (pixelDatatype === PixelDatatype.FLOAT &&\n                    !context.textureFloatLinear) ||\n                (pixelDatatype === PixelDatatype.HALF_FLOAT &&\n                    !context.textureHalfFloatLinear)\n            ) {\n                minificationFilter = mipmap\n                    ? TextureMinificationFilter.NEAREST_MIPMAP_NEAREST\n                    : TextureMinificationFilter.NEAREST;\n                magnificationFilter = TextureMagnificationFilter.NEAREST;\n            }\n\n            var gl = context._gl;\n            var target = this._textureTarget;\n\n            gl.activeTexture(gl.TEXTURE0);\n            gl.bindTexture(target, this._texture);\n            gl.texParameteri(target, gl.TEXTURE_MIN_FILTER, minificationFilter);\n            gl.texParameteri(target, gl.TEXTURE_MAG_FILTER, magnificationFilter);\n            gl.texParameteri(target, gl.TEXTURE_WRAP_S, sampler.wrapS);\n            gl.texParameteri(target, gl.TEXTURE_WRAP_T, sampler.wrapT);\n            if (defined(this._textureFilterAnisotropic)) {\n                gl.texParameteri(\n                    target,\n                    this._textureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,\n                    sampler.maximumAnisotropy\n                );\n            }\n            gl.bindTexture(target, null);\n\n            this._sampler = sampler;\n        },\n    },\n    pixelFormat: {\n        get: function () {\n            return this._pixelFormat;\n        },\n    },\n    pixelDatatype: {\n        get: function () {\n            return this._pixelDatatype;\n        },\n    },\n    dimensions: {\n        get: function () {\n            return this._dimensions;\n        },\n    },\n    preMultiplyAlpha: {\n        get: function () {\n            return this._preMultiplyAlpha;\n        },\n    },\n    flipY: {\n        get: function () {\n            return this._flipY;\n        },\n    },\n    width: {\n        get: function () {\n            return this._width;\n        },\n    },\n    height: {\n        get: function () {\n            return this._height;\n        },\n    },\n    sizeInBytes: {\n        get: function () {\n            if (this._hasMipmap) {\n                return Math.floor((this._sizeInBytes * 4) / 3);\n            }\n            return this._sizeInBytes;\n        },\n    },\n    _target: {\n        get: function () {\n            return this._textureTarget;\n        },\n    },\n});\n\n/**\n * Copy new image data into this texture, from a source {@link ImageData}, {@link HTMLImageElement}, {@link HTMLCanvasElement}, or {@link HTMLVideoElement}.\n * or an object with width, height, and arrayBufferView properties.\n *\n * @param {Object} source The source {@link ImageData}, {@link HTMLImageElement}, {@link HTMLCanvasElement}, or {@link HTMLVideoElement},\n *                        or an object with width, height, and arrayBufferView properties.\n * @param {Number} [xOffset=0] The offset in the x direction within the texture to copy into.\n * @param {Number} [yOffset=0] The offset in the y direction within the texture to copy into.\n *\n * @exception {DeveloperError} Cannot call copyFrom when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.\n * @exception {DeveloperError} Cannot call copyFrom with a compressed texture pixel format.\n * @exception {DeveloperError} xOffset must be greater than or equal to zero.\n * @exception {DeveloperError} yOffset must be greater than or equal to zero.\n * @exception {DeveloperError} xOffset + source.width must be less than or equal to width.\n * @exception {DeveloperError} yOffset + source.height must be less than or equal to height.\n * @exception {DeveloperError} This texture was destroyed, i.e., destroy() was called.\n *\n * @example\n * texture.copyFrom({\n *   width : 1,\n *   height : 1,\n *   arrayBufferView : new Uint8Array([255, 0, 0, 255])\n * });\n */\nDDSTexture.prototype.copyFrom = function (source, xOffset, yOffset) {\n    xOffset = defaultValue(xOffset, 0);\n    yOffset = defaultValue(yOffset, 0);\n\n    //>>includeStart('debug', pragmas.debug);\n    // Check.defined(\"source\", source);\n    // if (PixelFormat.isDepthFormat(this._pixelFormat)) {\n    //     throw new DeveloperError(\n    //         \"Cannot call copyFrom when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.\"\n    //     );\n    // }\n    // if (PixelFormat.isCompressedFormat(this._pixelFormat)) {\n    //     throw new DeveloperError(\n    //         \"Cannot call copyFrom with a compressed texture pixel format.\"\n    //     );\n    // }\n    // Check.typeOf.number.greaterThanOrEquals(\"xOffset\", xOffset, 0);\n    // Check.typeOf.number.greaterThanOrEquals(\"yOffset\", yOffset, 0);\n    // Check.typeOf.number.lessThanOrEquals(\n    //     \"xOffset + source.width\",\n    //     xOffset + source.width,\n    //     this._width\n    // );\n    // Check.typeOf.number.lessThanOrEquals(\n    //     \"yOffset + source.height\",\n    //     yOffset + source.height,\n    //     this._height\n    // );\n    //>>includeEnd('debug');\n\n    var gl = this._context._gl;\n    var target = this._textureTarget;\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(target, this._texture);\n\n    var width = source.width;\n    var height = source.height;\n    var arrayBufferView = source.arrayBufferView;\n\n    var textureWidth = this._width;\n    var textureHeight = this._height;\n    var pixelFormat = this._pixelFormat;\n    var pixelDatatype = this._pixelDatatype;\n\n    var preMultiplyAlpha = this._preMultiplyAlpha;\n    var flipY = this._flipY;\n\n    var unpackAlignment = 4;\n    if (defined(arrayBufferView)) {\n        unpackAlignment = PixelFormat.alignmentInBytes(\n            pixelFormat,\n            pixelDatatype,\n            width\n        );\n    }\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n\n    var uploaded = false;\n    if (!this._initialized) {\n        if (\n            xOffset === 0 &&\n            yOffset === 0 &&\n            width === textureWidth &&\n            height === textureHeight\n        ) {\n            // initialize the entire texture\n            if (defined(arrayBufferView)) {\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n                gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n                if (flipY) {\n                    arrayBufferView = PixelFormat.flipY(\n                        arrayBufferView,\n                        pixelFormat,\n                        pixelDatatype,\n                        textureWidth,\n                        textureHeight\n                    );\n                }\n                gl.texImage2D(\n                    target,\n                    0,\n                    pixelFormat,\n                    textureWidth,\n                    textureHeight,\n                    0,\n                    pixelFormat,\n                    pixelDatatype,\n                    arrayBufferView\n                );\n            } else {\n                // Only valid for DOM-Element uploads\n                gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, preMultiplyAlpha);\n                gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\n\n                gl.texImage2D(\n                    target,\n                    0,\n                    pixelFormat,\n                    pixelFormat,\n                    pixelDatatype,\n                    source\n                );\n            }\n            uploaded = true;\n        } else {\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n            // initialize the entire texture to zero\n            var bufferView = PixelFormat.createTypedArray(\n                pixelFormat,\n                pixelDatatype,\n                textureWidth,\n                textureHeight\n            );\n            gl.texImage2D(\n                target,\n                0,\n                pixelFormat,\n                textureWidth,\n                textureHeight,\n                0,\n                pixelFormat,\n                pixelDatatype,\n                bufferView\n            );\n        }\n        this._initialized = true;\n    }\n\n    if (!uploaded) {\n        if (defined(arrayBufferView)) {\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n            if (flipY) {\n                arrayBufferView = PixelFormat.flipY(\n                    arrayBufferView,\n                    pixelFormat,\n                    pixelDatatype,\n                    width,\n                    height\n                );\n            }\n            gl.texSubImage2D(\n                target,\n                0,\n                xOffset,\n                yOffset,\n                width,\n                height,\n                pixelFormat,\n                pixelDatatype,\n                arrayBufferView\n            );\n        } else {\n            // Only valid for DOM-Element uploads\n            gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, preMultiplyAlpha);\n            gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, flipY);\n\n            gl.texSubImage2D(\n                target,\n                0,\n                xOffset,\n                yOffset,\n                pixelFormat,\n                pixelDatatype,\n                source\n            );\n        }\n    }\n\n    gl.bindTexture(target, null);\n};\n\n/**\n * @param {Number} [xOffset=0] The offset in the x direction within the texture to copy into.\n * @param {Number} [yOffset=0] The offset in the y direction within the texture to copy into.\n * @param {Number} [framebufferXOffset=0] optional\n * @param {Number} [framebufferYOffset=0] optional\n * @param {Number} [width=width] optional\n * @param {Number} [height=height] optional\n *\n * @exception {DeveloperError} Cannot call copyFromFramebuffer when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.\n * @exception {DeveloperError} Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.\n * @exception {DeveloperError} Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.\n * @exception {DeveloperError} Cannot call copyFrom with a compressed texture pixel format.\n * @exception {DeveloperError} This texture was destroyed, i.e., destroy() was called.\n * @exception {DeveloperError} xOffset must be greater than or equal to zero.\n * @exception {DeveloperError} yOffset must be greater than or equal to zero.\n * @exception {DeveloperError} framebufferXOffset must be greater than or equal to zero.\n * @exception {DeveloperError} framebufferYOffset must be greater than or equal to zero.\n * @exception {DeveloperError} xOffset + width must be less than or equal to width.\n * @exception {DeveloperError} yOffset + height must be less than or equal to height.\n */\nDDSTexture.prototype.copyFromFramebuffer = function (\n    xOffset,\n    yOffset,\n    framebufferXOffset,\n    framebufferYOffset,\n    width,\n    height\n) {\n    xOffset = defaultValue(xOffset, 0);\n    yOffset = defaultValue(yOffset, 0);\n    framebufferXOffset = defaultValue(framebufferXOffset, 0);\n    framebufferYOffset = defaultValue(framebufferYOffset, 0);\n    width = defaultValue(width, this._width);\n    height = defaultValue(height, this._height);\n\n    //>>includeStart('debug', pragmas.debug);\n    // if (PixelFormat.isDepthFormat(this._pixelFormat)) {\n    //     throw new DeveloperError(\n    //         \"Cannot call copyFromFramebuffer when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.\"\n    //     );\n    // }\n    // if (this._pixelDatatype === PixelDatatype.FLOAT) {\n    //     throw new DeveloperError(\n    //         \"Cannot call copyFromFramebuffer when the texture pixel data type is FLOAT.\"\n    //     );\n    // }\n    // if (this._pixelDatatype === PixelDatatype.HALF_FLOAT) {\n    //     throw new DeveloperError(\n    //         \"Cannot call copyFromFramebuffer when the texture pixel data type is HALF_FLOAT.\"\n    //     );\n    // }\n    // if (PixelFormat.isCompressedFormat(this._pixelFormat)) {\n    //     throw new DeveloperError(\n    //         \"Cannot call copyFrom with a compressed texture pixel format.\"\n    //     );\n    // }\n\n    // Check.typeOf.number.greaterThanOrEquals(\"xOffset\", xOffset, 0);\n    // Check.typeOf.number.greaterThanOrEquals(\"yOffset\", yOffset, 0);\n    // Check.typeOf.number.greaterThanOrEquals(\n    //     \"framebufferXOffset\",\n    //     framebufferXOffset,\n    //     0\n    // );\n    // Check.typeOf.number.greaterThanOrEquals(\n    //     \"framebufferYOffset\",\n    //     framebufferYOffset,\n    //     0\n    // );\n    // Check.typeOf.number.lessThanOrEquals(\n    //     \"xOffset + width\",\n    //     xOffset + width,\n    //     this._width\n    // );\n    // Check.typeOf.number.lessThanOrEquals(\n    //     \"yOffset + height\",\n    //     yOffset + height,\n    //     this._height\n    // );\n    //>>includeEnd('debug');\n\n    var gl = this._context._gl;\n    var target = this._textureTarget;\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(target, this._texture);\n    gl.copyTexSubImage2D(\n        target,\n        0,\n        xOffset,\n        yOffset,\n        framebufferXOffset,\n        framebufferYOffset,\n        width,\n        height\n    );\n    gl.bindTexture(target, null);\n    this._initialized = true;\n};\n\n/**\n * @param {MipmapHint} [hint=MipmapHint.DONT_CARE] optional.\n *\n * @exception {DeveloperError} Cannot call generateMipmap when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.\n * @exception {DeveloperError} Cannot call generateMipmap when the texture pixel format is a compressed format.\n * @exception {DeveloperError} hint is invalid.\n * @exception {DeveloperError} This texture's width must be a power of two to call generateMipmap().\n * @exception {DeveloperError} This texture's height must be a power of two to call generateMipmap().\n * @exception {DeveloperError} This texture was destroyed, i.e., destroy() was called.\n */\nDDSTexture.prototype.generateMipmap = function (hint) {\n    hint = defaultValue(hint, MipmapHint.DONT_CARE);\n\n    //>>includeStart('debug', pragmas.debug);\n    // if (PixelFormat.isDepthFormat(this._pixelFormat)) {\n    //     throw new DeveloperError(\n    //         \"Cannot call generateMipmap when the texture pixel format is DEPTH_COMPONENT or DEPTH_STENCIL.\"\n    //     );\n    // }\n    // if (PixelFormat.isCompressedFormat(this._pixelFormat)) {\n    //     throw new DeveloperError(\n    //         \"Cannot call generateMipmap with a compressed pixel format.\"\n    //     );\n    // }\n    // if (this._width > 1 && !CesiumMath.isPowerOfTwo(this._width)) {\n    //     throw new DeveloperError(\n    //         \"width must be a power of two to call generateMipmap().\"\n    //     );\n    // }\n    // if (this._height > 1 && !CesiumMath.isPowerOfTwo(this._height)) {\n    //     throw new DeveloperError(\n    //         \"height must be a power of two to call generateMipmap().\"\n    //     );\n    // }\n    // if (!MipmapHint.validate(hint)) {\n    //     throw new DeveloperError(\"hint is invalid.\");\n    // }\n    //>>includeEnd('debug');\n\n    this._hasMipmap = true;\n\n    var gl = this._context._gl;\n    var target = this._textureTarget;\n\n    gl.hint(gl.GENERATE_MIPMAP_HINT, hint);\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(target, this._texture);\n    gl.generateMipmap(target);\n    gl.bindTexture(target, null);\n};\n\nDDSTexture.prototype.isDestroyed = function () {\n    return false;\n};\n\nDDSTexture.prototype.destroy = function () {\n    this._context._gl.deleteTexture(this._texture);\n    return destroyObject(this);\n};\nexport default DDSTexture;\n",
    "﻿ \n/**\n* shader工具，生成、处理顶着色器和片元着色器的代码，处理实例化shader，转换threejs shader\n*@constructor\n*/\nfunction ShaderUtils() { }\n\n/**\n * \n * @param {string} source \n * @param {string} chunck \n */\nexport function insertBeforeMain(source, chunck) {\n    let renamedMain = chunck + \"\\nvoid main()\";\n    return source.replace(/void\\s+main\\s*\\(\\s*(?:void)?\\s*\\)/g, renamedMain);\n}\n\nShaderUtils.insertBeforeMain = insertBeforeMain;\n\n/**\n * \n * @param {string} source \n * @param {string} chunck \n */\nexport function insertAfterMain(source, chunck) {\n    let renamedMain = \"void main(){\\n\" + chunck;\n    return source.replace(/void\\s+main\\s*\\(\\s*(?:void)?\\s*\\)\\s*{/g, renamedMain);\n}\nShaderUtils.insertAfterMain = insertAfterMain;\n/**\n * \n * @param {string} source \n * @param {string} chunck \n */\nexport function appendMain(source, chunck) {\n\n    if (!chunck) return source;\n\n    let start = source.lastIndexOf('}')\n    if (start >= 0 && chunck.length) {\n        let a = source.substring(0, start);\n        let b = source.substring(start);\n        if (chunck[chunck.length - 1] != '\\n')\n            source = a + chunck + '\\n' + b;\n        else source = a + chunck + b;\n    }\n    return source;\n}\nShaderUtils.appendMain = appendMain;\n\n/**\n * \n * @param {string} source \n * @param {string} include\n * @param {string} chunck \n */\nShaderUtils.replaceIncludes = function (source, include, chunck) {\n    return source.replace(include, chunck);\n}\n\n/**\n * \n * @param {string} source \n * @param {RegExp} pattern \n * @param {string} chunck \n * @returns {string}\n */\nexport function insertBefore(source, pattern, chunck) {\n    let regex = pattern;\n    if (typeof pattern == 'string') {\n        regex = new RegExp(pattern, 'g');\n    }\n    let m = regex.exec(source);\n    if (m) {\n        let start = m.index;\n        let a = source.substring(0, start);\n        let b = source.substring(start);\n        source = a + chunck + b;\n    }\n    return source;\n}\nShaderUtils.insertBefore = insertBefore\n\n/**\n * \n * @param {string} source \n * @param {RegExp} pattern \n * @param {string} chunck \n * @returns {string}\n */\nexport function insertAfter(source, pattern, chunck) {\n    let regex = pattern;\n    if (typeof pattern == 'string') {\n        regex = new RegExp(pattern, 'g');\n    }\n    let m = regex.exec(source);\n    if (m) {\n        let start = m.index + m[0].length;\n        let a = source.substring(0, start);\n        let b = source.substring(start);\n        source = a + chunck + b;\n    }\n    return source;\n}\nShaderUtils.insertAfter = insertAfter;\n\n\n\nvar positionRegex = /attribute\\s+vec(?:3|4)\\s+(.*)3DHigh;/g;\n\nShaderUtils._modifyShaderPosition = function (\n    primitive,\n    vertexShaderSource,\n    scene3DOnly\n) {\n    var match;\n\n    var forwardDecl = \"\";\n    var attributes = \"\";\n    var computeFunctions = \"\";\n\n    while ((match = positionRegex.exec(vertexShaderSource)) !== null) {\n        var name = match[1];\n\n        var functionName =\n            \"vec4 czm_compute\" + name[0].toUpperCase() + name.substr(1) + \"()\";\n\n        // Don't forward-declare czm_computePosition because computePosition.glsl already does.\n        if (functionName !== \"vec4 czm_computePosition()\") {\n            forwardDecl += functionName + \";\\n\";\n        }\n\n        if (!defined(primitive.rtcCenter)) {\n            // Use GPU RTE\n            if (!scene3DOnly) {\n                attributes +=\n                    \"attribute vec3 \" +\n                    name +\n                    \"2DHigh;\\n\" +\n                    \"attribute vec3 \" +\n                    name +\n                    \"2DLow;\\n\";\n\n                computeFunctions +=\n                    functionName +\n                    \"\\n\" +\n                    \"{\\n\" +\n                    \"    vec4 p;\\n\" +\n                    \"    if (czm_morphTime == 1.0)\\n\" +\n                    \"    {\\n\" +\n                    \"        p = czm_translateRelativeToEye(\" +\n                    name +\n                    \"3DHigh, \" +\n                    name +\n                    \"3DLow);\\n\" +\n                    \"    }\\n\" +\n                    \"    else if (czm_morphTime == 0.0)\\n\" +\n                    \"    {\\n\" +\n                    \"        p = czm_translateRelativeToEye(\" +\n                    name +\n                    \"2DHigh.zxy, \" +\n                    name +\n                    \"2DLow.zxy);\\n\" +\n                    \"    }\\n\" +\n                    \"    else\\n\" +\n                    \"    {\\n\" +\n                    \"        p = czm_columbusViewMorph(\\n\" +\n                    \"                czm_translateRelativeToEye(\" +\n                    name +\n                    \"2DHigh.zxy, \" +\n                    name +\n                    \"2DLow.zxy),\\n\" +\n                    \"                czm_translateRelativeToEye(\" +\n                    name +\n                    \"3DHigh, \" +\n                    name +\n                    \"3DLow),\\n\" +\n                    \"                czm_morphTime);\\n\" +\n                    \"    }\\n\" +\n                    \"    return p;\\n\" +\n                    \"}\\n\\n\";\n            } else {\n                computeFunctions +=\n                    functionName +\n                    \"\\n\" +\n                    \"{\\n\" +\n                    \"    return czm_translateRelativeToEye(\" +\n                    name +\n                    \"3DHigh, \" +\n                    name +\n                    \"3DLow);\\n\" +\n                    \"}\\n\\n\";\n            }\n        } else {\n            // Use RTC\n            vertexShaderSource = vertexShaderSource.replace(\n                /attribute\\s+vec(?:3|4)\\s+position3DHigh;/g,\n                \"\"\n            );\n            vertexShaderSource = vertexShaderSource.replace(\n                /attribute\\s+vec(?:3|4)\\s+position3DLow;/g,\n                \"\"\n            );\n\n            forwardDecl += \"uniform mat4 u_modifiedModelView;\\n\";\n            attributes += \"attribute vec4 position;\\n\";\n\n            computeFunctions +=\n                functionName +\n                \"\\n\" +\n                \"{\\n\" +\n                \"    return u_modifiedModelView * position;\\n\" +\n                \"}\\n\\n\";\n\n            vertexShaderSource = vertexShaderSource.replace(\n                /czm_modelViewRelativeToEye\\s+\\*\\s+/g,\n                \"\"\n            );\n            vertexShaderSource = vertexShaderSource.replace(\n                /czm_modelViewProjectionRelativeToEye/g,\n                \"czm_projection\"\n            );\n        }\n    }\n\n    return [forwardDecl, attributes, vertexShaderSource, computeFunctions].join(\n        \"\\n\"\n    );\n};\n\nShaderUtils.modifyShaderPosition = function (mesh, shader) {\n    var vs = shader.vertexShader;\n    if (!vs.includes('transformed')) return;\n    vs = vs.replace(\n        'gl_Position = projectionMatrix * mvPosition',\n        'vec4 mvis_positionEC = vec4( transformed, 1.0 );\\n\\\n        #ifdef USE_INSTANCING\\n\\\n            mvis_positionEC = instanceMatrix * mvis_positionEC;\\n\\\n        #endif\\n\\\n        mvis_positionEC=vec4(mvis_positionEC.xyz - u_cameraPositionLC,1.);\\n\\\n        gl_Position = czm_modelViewProjectionRelativeToEye * mvis_positionEC;\\n\\\n        '\n    );\n    shader.vertexShader = vs;\n}\n\n/**\n *  positionHigh+positionLow\n * @param {Mesh} mesh \n * @param {object} shader\n * @param {string} shader.vertexShader\n * @param {string} shader.fragmentShader\n */\nShaderUtils.modifyEncodedPosition = function (mesh, shader) {\n    var vs = shader.vertexShader\n    vs = vs.replace(\n        /attribute\\s?vec3\\s?position\\s?;/g, '\\\n         attribute vec3 positionHigh;\\n\\\n         attribute vec3 positionLow;\\n\\\n         vec3 position;\\n\\\n        ');\n    shader.vertexShader = this.insertAfterMain(vs, 'position=(positionHigh+positionLow)*1e-6;\\n');\n\n}\n\n/**\n * 修改threejs shader中shadowWorldPosition\n * @param {Mesh} mesh \n * @param {object} shader\n * @param {string} shader.vertexShader\n * @param {string} shader.fragmentShader\n */\nShaderUtils.modifyShadowWorldPosition = function (mesh, shader) {\n    var vs = shader.vertexShader\n    if (/vec4\\s?shadowWorldPosition;/g.test(vs)) {\n        vs = vs.replace(\n            /vec4\\s?shadowWorldPosition;/g,\n            'vec4 shadowWorldPosition;\\n\\\n\t\tvec4 worldPositionThree = vec4( transformed, 1.0 );\\n\\\n\t\t#ifdef USE_INSTANCING\\n\\\n\t\t\tworldPositionThree = instanceMatrix * worldPositionThree;\\n\\\n        #endif\\n\\\n        // vec3 transformedNormalThree = objectNormal;\\n\\\n        // #ifdef USE_INSTANCING\\n\\\n        //     mat3 m = mat3( instanceMatrix );\\n\\\n        //     transformedNormalThree /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\\n        //     transformedNormalThree = m * transformedNormalThree;\\n\\\n        // #endif\\n\\\n        // shadowWorldNormal= normalMatrixWorld*transformedNormalThree;\\n\\\n        worldPositionThree=matrixWorld*worldPositionThree;\\n');\n        vs = vs.replace(\n            /shadowWorldPosition\\s?=\\s?worldPosition\\s?\\+\\s?/g,\n            'shadowWorldPosition = worldPositionThree + '\n        );\n    }\n\n    if (vs.includes('#define DISTANCE')) {\n\n        vs = vs.replace(/vWorldPosition\\s?=\\s?worldPosition.xyz\\s?;/g, '\\n\\\n        vec4 worldPositionThree = vec4(transformed, 1.0 );\\n\\\n        #ifdef USE_INSTANCING\\n\\\n            worldPositionThree = instanceMatrix * worldPositionThree;\\n\\\n        #endif\\n\\\n        worldPositionThree = matrixWorld * worldPositionThree;\\n\\\n        vWorldPosition=worldPositionThree.xyz;\\n');\n    }\n\n    shader.vertexShader = vs;\n}\n\n/**\n * 修改threejs shader中环境贴图相关代码\n * @param {Mesh} mesh \n * @param {object} shader\n * @param {string} shader.vertexShader\n * @param {string} shader.fragmentShader\n */\nShaderUtils.modifyEnvMapQueryVec = function (mesh, shader) {\n\n    const Matrix4 = Cesium.Matrix4\n    // if (Matrix4.equals(mesh.modelMatrix, Matrix4.IDENTITY)) return;\n    var fs = shader.fragmentShader;\n    // if (/cameraToVertex\\s?=\\s?normalize\\(\\s?worldPosition.xyz\\s?-\\s?cameraPosition \\);/g.test(shader.vertexShader)) {\n    fs = fs.replace(\n        /textureCube\\s?\\(\\s?envMap\\s?,\\s?vec3\\s?\\(\\s?flipEnvMap\\s?\\*\\s?reflectVec.x\\s?,\\s?reflectVec.yz\\s?\\)\\s\\)/g,\n        ' textureCube( envMap,vec3( flipEnvMap *(_CesiumNormal2ThreeNormal* reflectVec).x, (_CesiumNormal2ThreeNormal*reflectVec).yz ) )'\n    );\n    // }\n\n    fs = fs.replace(\n        /\\(\\s?envMap\\s?,\\s?reflectVec/g,\n        '( envMap,_CesiumNormal2ThreeNormal * reflectVec'\n    );\n\n    // if (/\\(\\s?envMap\\s?,\\s?queryVec/g.test(fs)) {\n    fs = fs.replace(\n        /\\(\\s?envMap\\s?,\\s?queryVec/g,\n        '( envMap,_CesiumNormal2ThreeNormal* queryVec'\n    );\n    // }\n    // if (/\\(\\s?envMap\\s?,\\s?queryReflectVec/g.test(fs)) {\n    fs = fs.replace(\n        /\\(\\s?envMap\\s?,\\s?queryReflectVec/g,\n        '( envMap,_CesiumNormal2ThreeNormal* queryReflectVec'\n    );\n    // }\n\n    // if (/equirectUv\\(\\s?reflectVec\\s?\\)/g.test(fs)) {\n    fs = fs.replace(\n        /equirectUv\\(\\s?reflectVec\\s?\\)/g,\n        'equirectUv( _CesiumNormal2ThreeNormal* reflectVec )'\n    );\n    // }\n\n    // if (/equirectUv\\(\\s?direction\\s?\\)/g.test(fs)) {\n    fs = fs.replace(\n        /equirectUv\\(\\s?direction\\s?\\)/g,\n        'equirectUv( _CesiumNormal2ThreeNormal* direction )'\n    );\n    // }\n\n    if (/textureCubeUV\\s?\\(\\s?envMap\\s?,\\s?reflectVec/g.test(fs)) {\n        fs = fs.replace(\n            /textureCubeUV\\s?\\(\\s?envMap\\s?,\\s?reflectVec/g,\n            'textureCubeUV(envMap, _CesiumNormal2ThreeNormal* reflectVec'\n        );\n\n    }\n    if (/textureCubeUV\\s?\\(\\s?envMap\\s?,\\s?worldNormal/g.test(fs)) {\n\n        fs = fs.replace(\n            /textureCubeUV\\s?\\(\\s?envMap\\s?,\\s?worldNormal/g,\n            'textureCubeUV(envMap, _CesiumNormal2ThreeNormal* worldNormal'\n        );\n\n    }\n    shader.fragmentShader = fs;\n    // console.log(shader.fragmentShader);\n}\n \n\n/**\n * 处理实例化shader代码\n * @param {THREE.Mesh} mesh \n * @param {object} shader\n * @param {string} shader.vertexShader\n * @param {string} shader.fragmentShader\n */\nShaderUtils.processInstanceShader = function (mesh, shader) {\n    if (mesh._instances && mesh._instances.length) {\n\n        var vs = shader.vertexShader;\n        var renamedSource = Cesium.ShaderSource.replaceMain(vs, 'czm_instancing_main');\n        renamedSource = renamedSource.replace(/.*uniform\\s+mat4\\s+modelViewMatrix/g, 'mat4 modelViewMatrix')\n            .replace(/.*uniform\\s+mat4\\s+u_modelViewMatrix/g, 'mat4 u_modelViewMatrix')\n            .replace(/.*uniform\\s+mat4\\s+modelMatrix/g, 'mat4 modelMatrix')\n            .replace(/.*uniform\\s+mat4\\s+u_modelMatrix/g, 'mat4 u_modelMatrix')\n\n        var addFunctionCode = '';\n        var u_mats = [];\n        var getNormalMatrixCode = '';\n        //非threejs instanceMesh实例化渲染，增加计算实例的normalMatrix的glsl代码\n        addFunctionCode = '\\n\\\n        mat3 inverse_mat3(mat3 m)\\n\\\n            {\\n\\\n                float Determinant = \\n\\\n                      m[0][0] * (m[1][1] * m[2][2] - m[2][1] * m[1][2])\\n\\\n                    - m[1][0] * (m[0][1] * m[2][2] - m[2][1] * m[0][2])\\n\\\n                    + m[2][0] * (m[0][1] * m[1][2] - m[1][1] * m[0][2]);\\n\\\n                    \\n\\\n                mat3 Inverse;\\n\\\n                Inverse[0][0] = + (m[1][1] * m[2][2] - m[2][1] * m[1][2]);\\n\\\n                Inverse[1][0] = - (m[1][0] * m[2][2] - m[2][0] * m[1][2]);\\n\\\n                Inverse[2][0] = + (m[1][0] * m[2][1] - m[2][0] * m[1][1]);\\n\\\n                Inverse[0][1] = - (m[0][1] * m[2][2] - m[2][1] * m[0][2]);\\n\\\n                Inverse[1][1] = + (m[0][0] * m[2][2] - m[2][0] * m[0][2]);\\n\\\n                Inverse[2][1] = - (m[0][0] * m[2][1] - m[2][0] * m[0][1]);\\n\\\n                Inverse[0][2] = + (m[0][1] * m[1][2] - m[1][1] * m[0][2]);\\n\\\n                Inverse[1][2] = - (m[0][0] * m[1][2] - m[1][0] * m[0][2]);\\n\\\n                Inverse[2][2] = + (m[0][0] * m[1][1] - m[1][0] * m[0][1]);\\n\\\n                Inverse /= Determinant;\\n\\\n                \\n\\\n                return Inverse;\\n\\\n            }\\n\\\n            \\n\\\n           mat3 transpose (mat3 m) {\\n\\\n            \\n\\\n                float tmp;\\n\\\n                 \\n\\\n                tmp = m[0][ 1 ]; m[0][ 1 ] = m[1][ 0 ]; m[1][ 0 ] = tmp;\\n\\\n                tmp = m[0][ 2 ]; m[0][ 2 ] = m[2][ 0 ]; m[2][ 0 ] = tmp;\\n\\\n                tmp = m[1][ 2 ]; m[1][ 2 ] = m[2][ 1 ]; m[2][ 1 ] = tmp;\\n\\\n                \\n\\\n                return m;\\n\\\n            }\\n\\\n            \\n\\\n            ';\n        renamedSource = renamedSource\n            .replace(/.*uniform\\s+mat3\\s+u_normalMatrix/g, 'mat3 u_normalMatrix')\n            .replace(/.*uniform\\s+mat3\\s+normalMatrix/g, 'mat3 normalMatrix');\n\n        if (!/mat3\\s+normalMatrix/g.test(renamedSource))\n            u_mats.push('mat3 normalMatrix;');\n        if (!/mat3\\s+u_normalMatrix/g.test(renamedSource))\n            u_mats.push('mat3 u_normalMatrix;');\n\n        getNormalMatrixCode = '\\n\\\n                   normalMatrix=mat3(modelViewMatrix);\\n\\\n                   normalMatrix=transpose(inverse_mat3(normalMatrix));\\n\\\n                   u_normalMatrix=normalMatrix;\\n\\\n                ';\n        // \n\n        if (!/mat4\\s+u_modelMatrix/g.test(renamedSource))\n            u_mats.push('mat4 u_modelMatrix;');\n        if (!/mat4\\s+u_modelViewMatrix/g.test(renamedSource))\n            u_mats.push('mat4 u_modelViewMatrix;');\n\n\n        var pickAttribute = 'attribute vec4 a_pickColor;\\n' +\n            'varying vec4 czm_pickColor;\\n';\n        var pickVarying = '    czm_pickColor = a_pickColor;\\n';\n\n        vs = //'mat4 czm_instanced_modelView;\\n' +\n            'attribute vec4 czm_modelMatrixRow0;\\n' +\n            'attribute vec4 czm_modelMatrixRow1;\\n' +\n            'attribute vec4 czm_modelMatrixRow2;\\n' +\n            'uniform mat4 czm_instanced_modifiedModelView;\\n' +\n            // batchIdAttribute +\n            u_mats.join('\\n') +\n            pickAttribute +\n            renamedSource +\n            addFunctionCode +\n            'void main()\\n' +\n            '{\\n' +\n            '    modelMatrix = mat4(czm_modelMatrixRow0.x, czm_modelMatrixRow1.x, czm_modelMatrixRow2.x, 0.0, czm_modelMatrixRow0.y, czm_modelMatrixRow1.y, czm_modelMatrixRow2.y, 0.0, czm_modelMatrixRow0.z, czm_modelMatrixRow1.z, czm_modelMatrixRow2.z, 0.0, czm_modelMatrixRow0.w, czm_modelMatrixRow1.w, czm_modelMatrixRow2.w, 1.0);\\n' +\n            '    modelViewMatrix = czm_instanced_modifiedModelView * modelMatrix;\\n' +\n            '    u_modelMatrix =modelMatrix;\\n' +\n            '    u_modelViewMatrix = modelViewMatrix ;\\n' +\n            // globalVarsMain +\n            getNormalMatrixCode +\n            '    czm_instancing_main();\\n' +\n            pickVarying +\n            '}\\n';\n        shader.vertexShader = vs;\n    }\n}\n\n/**\n * 处理实例化shader代码\n * @param {Mesh|THREE.Mesh} mesh \n * @param {object} shader\n * @param {string} shader.vertexShader\n * @param {string} shader.fragmentShader\n */\nShaderUtils.processOcclusionCulling = function (mesh, shader) {\n    if (mesh.material.transparent) return;\n\n    shader.fragmentShader = Cesium.ShaderSource.replaceMain(shader.fragmentShader, 'mvis_OcclusionCulling');\n    var mvis_OcclusionCulling = '\\n\\\n    uniform sampler2D occlusionCullingMap;\\n\\\n    uniform bool occlusionCullingToggle;\\n\\\n    uniform vec2 occlusionCullingResolution;\\n\\\n    void main(){\\n\\\n        if(occlusionCullingToggle){\\n\\\n            vec4 tPkColor=texture2D(occlusionCullingMap,gl_FragCoord.xy/occlusionCullingResolution);\\n\\\n            if(tPkColor.r!=czm_pickColor.r||tPkColor.g!=czm_pickColor.g||tPkColor.b!=czm_pickColor.b||tPkColor.a!=czm_pickColor.a){\\n\\\n               discard;\\n\\\n            }\\n\\\n            // gl_FragColor=tPkColor;\\n\\\n        }\\n\\\n        else{\\n\\\n            mvis_OcclusionCulling();\\n\\\n        }\\n\\\n    }'\n    shader.fragmentShader += mvis_OcclusionCulling;\n}\n\nexport default ShaderUtils;",
    "export default /*glsl*/ `\n#if NUM_STATIC_POINT_LIGHTS > 0 || NUM_PAITIAL_POINT_LIGHTS > 0\n    struct ExtensionPointLight {\n        vec3 position;\n        vec3 color;\n        vec2 decayDist;\n    };\n\n    #if NUM_STATIC_POINT_LIGHTS > 0 \n        #if defined(OES_texture_float_linear) &&  NUM_STATIC_POINT_LIGHTS>100\n            uniform sampler2D fixedPointLightMap;\n        #else \n            uniform vec3 fixedPointLightPositions[NUM_STATIC_POINT_LIGHTS];\n            uniform vec3 fixedPointLightColors[NUM_STATIC_POINT_LIGHTS];\n            uniform vec2 fixedPointLightDecayDists[NUM_STATIC_POINT_LIGHTS];\n        #endif \n        uniform bool fixedPointLightVisibles[NUM_STATIC_POINT_LIGHTS];\n    #endif\n\n    #if NUM_PAITIAL_POINT_LIGHTS > 0 \n        #if defined(OES_texture_float_linear) &&  NUM_PAITIAL_POINT_LIGHTS>100\n            uniform sampler2D partialPointLightMap;\n        #else \n            uniform vec3 partialPointLightPositions[NUM_PAITIAL_POINT_LIGHTS];\n            uniform vec3 partialPointLightColors[NUM_PAITIAL_POINT_LIGHTS];\n            uniform vec2 partialPointLightDecayDists[NUM_PAITIAL_POINT_LIGHTS];\n        #endif\n        uniform bool partialPointLightVisibles[NUM_PAITIAL_POINT_LIGHTS];\n    #endif\n\n    // directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getExtPointDirectLightIrradiance( const in ExtensionPointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n        vec3 lVector = pointLight.position - geometry.position; \n        float lightDistance = length( lVector );\n\t\tdirectLight.direction = normalize( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.decayDist.y, pointLight.decayDist.x );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n    }\n    void getExtPointDirectLightIrradiance( const in vec4 posDecay,const in vec4 colorDist, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n        vec3 lVector = posDecay.xyz - geometry.position; \n        float lightDistance = length( lVector );\n\t\tdirectLight.direction = normalize( lVector );\n\t\tdirectLight.color = colorDist.rgb;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, colorDist.a, posDecay.w );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n    }\n#endif\n`;",
    "export default /* glsl */ `\n#if ( NUM_STATIC_POINT_LIGHTS > 0 || NUM_PAITIAL_POINT_LIGHTS > 0) && defined( RE_Direct )\n\n    ExtensionPointLight ex_pointLight;\n    vec2 ex_uv1=vec2(0.,0.8);\n    vec2 ex_uv2=vec2(0.,0.4);\n    vec2 ex_uv3=vec2(0.,0.15);\n    #if (NUM_STATIC_POINT_LIGHTS > 0) \n\n        #if defined(OES_texture_float_linear)&&  NUM_STATIC_POINT_LIGHTS>100\n            vec4 ex_fixed_posDecay;\n            vec4 ex_fixed_colorDist;\n            float ex_num=float(NUM_STATIC_POINT_LIGHTS);\n            for ( int i = 0; i < NUM_STATIC_POINT_LIGHTS; i ++ ) {\n                ex_uv1.x=(float(i)+0.5)/ex_num;\n                ex_uv3.x=ex_uv1.x; \n                #if NUM_STATIC_POINT_LIGHTS>200\n                   if(texture2D(fixedPointLightMap, ex_uv3).a==1.){\n                #else \n                  if(fixedPointLightVisibles[i]){ \n                #endif\n                    ex_uv2.x=ex_uv1.x;\n                    ex_fixed_posDecay=texture2D(fixedPointLightMap, ex_uv1);\n                    ex_fixed_colorDist=texture2D(fixedPointLightMap,ex_uv2);\n                    getExtPointDirectLightIrradiance( ex_fixed_posDecay,ex_fixed_colorDist, geometry, directLight );\n                    RE_Direct( directLight, geometry, material, reflectedLight );\n                }\n            }\n        #else\n            for ( int i = 0; i < NUM_STATIC_POINT_LIGHTS; i ++ ) {\n                if(fixedPointLightVisibles[i]){ \n                    ex_pointLight.position = fixedPointLightPositions[ i ];\n                    ex_pointLight.color = fixedPointLightColors[ i ];\n                    ex_pointLight.decayDist= fixedPointLightDecayDists[ i ];\n                    getExtPointDirectLightIrradiance( ex_pointLight, geometry, directLight );\n                    RE_Direct( directLight, geometry, material, reflectedLight );\n                }\n            }\n        #endif\n            \n\t#endif\n    \n    #if (NUM_PAITIAL_POINT_LIGHTS > 0) \n        #if defined(OES_texture_float_linear)&&  NUM_PAITIAL_POINT_LIGHTS>100\n            vec4 ex_partial_posDecay;\n            vec4 ex_partial_colorDist;\n            float ex_num=float(NUM_PAITIAL_POINT_LIGHTS);\n            for ( int i = 0; i < NUM_PAITIAL_POINT_LIGHTS; i ++ ) {\n                   ex_uv1.x=(float( i )+0.5)/ex_num;\n                   ex_uv3.x=ex_uv1.x; \n                #if NUM_PAITIAL_POINT_LIGHTS>200\n                  if(texture2D(partialPointLightMap, ex_uv3).a==1.){\n                #else \n                  if(partialPointLightVisibles[ i ]){ \n                #endif \n                    ex_uv2.x=ex_uv1.x;\n                    ex_partial_posDecay=texture2D(partialPointLightMap, ex_uv1);\n                    ex_partial_colorDist=texture2D(partialPointLightMap,ex_uv2);\n                    getExtPointDirectLightIrradiance( ex_partial_posDecay,ex_partial_colorDist, geometry, directLight );\n                    RE_Direct( directLight, geometry, material, reflectedLight );\n                }\n            }\n        #else\n            for ( int i = 0; i < NUM_PAITIAL_POINT_LIGHTS; i ++ ) {\n                if(partialPointLightVisibles[i]){ \n                    ex_pointLight.position = partialPointLightPositions[ i ];\n                    ex_pointLight.color = partialPointLightColors[ i ];\n                    ex_pointLight.decayDist= partialPointLightDecayDists[ i ];\n                    getExtPointDirectLightIrradiance( ex_pointLight, geometry, directLight );\n                    RE_Direct( directLight, geometry, material, reflectedLight );\n                }\n            }\n        #endif\n            \n    #endif\n     \n#endif\n`;",
    "import ConstantMap from  \"./ConstantMap.js\";\n\nimport DDSTexture from  \"./DDSTexture.js\";\n\n\n/**\n * 纹理相关工具类，实现转换threejs纹理，重采样等功能\n * @class\n */\nfunction TextureUtils() { }\n\n\nTextureUtils.getPixelDataType = function (type3js) {\n\n    return ConstantMap.typesMap[type3js];\n}\n\nTextureUtils.getPixelFormat = function (format3js) {\n\n    return ConstantMap.formatsMap[format3js];\n}\n\nTextureUtils.createTexture = function (textureUniform, context, maximumTextureSize) {\n\n    const { Texture, TextureMinificationFilter, TextureWrap, PixelFormat, WebGLConstants, ContextLimits } = Cesium;\n    const _Math = Cesium.Math;\n\n    let texture = textureUniform;\n    var sampler = texture.sampler;\n\n    var mipmap =\n        (sampler.minificationFilter === TextureMinificationFilter.NEAREST_MIPMAP_NEAREST) ||\n        (sampler.minificationFilter === TextureMinificationFilter.NEAREST_MIPMAP_LINEAR) ||\n        (sampler.minificationFilter === TextureMinificationFilter.LINEAR_MIPMAP_NEAREST) ||\n        (sampler.minificationFilter === TextureMinificationFilter.LINEAR_MIPMAP_LINEAR);\n\n    var requiresNpot = mipmap ||\n        (sampler.wrapS === TextureWrap.REPEAT) ||\n        (sampler.wrapS === TextureWrap.MIRRORED_REPEAT) ||\n        (sampler.wrapT === TextureWrap.REPEAT) ||\n        (sampler.wrapT === TextureWrap.MIRRORED_REPEAT);\n\n    var source = texture.source;\n    let width = texture.width, height = texture.height;\n\n    var npot = source && (!_Math.isPowerOfTwo(source.width) || !_Math.isPowerOfTwo(source.height));\n    if (requiresNpot && npot) {\n        // WebGL requires power-of-two texture dimensions for mipmapping and REPEAT/MIRRORED_REPEAT wrap modes.\n        var canvas = document.createElement('canvas');\n        canvas.width = _Math.nextPowerOfTwo(source.width);\n        canvas.height = _Math.nextPowerOfTwo(source.height);\n        var canvasContext = canvas.getContext('2d');\n        canvasContext.drawImage(source, 0, 0, source.width, source.height, 0, 0, canvas.width, canvas.height);\n        source = canvas;\n        width = canvas.width;\n        height = canvas.height;\n    }\n\n    var tx, pixelFormat = texture.internalFormat || texture.format;\n    var isCompressed = PixelFormat.isCompressedFormat(pixelFormat);\n\n    let textureCtor = isCompressed ? DDSTexture : Texture\n\n    let needsResize = false;\n    maximumTextureSize = maximumTextureSize || ContextLimits.maximumTextureSize;\n\n    if (width > maximumTextureSize) {\n        width = maximumTextureSize;\n        needsResize = true;\n\n        console.warn(\"Mesh3D.TextureUtils:Width should be less than or equal to the maximum texture size (\" +\n            maximumTextureSize +\n            \").  Check maximumTextureSize.\");\n    }\n    if (height > maximumTextureSize) {\n        console.warn(\"Mesh3D.TextureUtils:Height should be less than or equal to the maximum texture size (\" +\n            maximumTextureSize +\n            \").  Check maximumTextureSize.\");\n        height = maximumTextureSize;\n        if (!needsResize) {\n            width = maximumTextureSize * (width / height);\n        }\n        needsResize = true;\n    } else if (needsResize) {\n        height = maximumTextureSize * (height / width);\n    }\n\n    if (needsResize) {\n        console.warn(\"Mesh3D.TextureUtils:Width and height must be less than or equal to the maximum texture size (\" +\n            maximumTextureSize +\n            \").  Check maximumTextureSize.\");\n\n        // if (mipmap) {\n        //     width = _Math.nextPowerOfTwo(width);\n        //     height = _Math.nextPowerOfTwo(height);\n        // }\n\n        var canvas = TextureUtils._resampleImage(source, width, height, mipmap)\n        // document.createElement('canvas');\n        // canvas.width = width;\n        // canvas.height = height;\n        // var canvasContext = canvas.getContext('2d');\n        // canvasContext.drawImage(source, 0, 0, source.width, source.height, 0, 0, canvas.width, canvas.height);\n        source = canvas;\n        width = canvas.width;\n        height = canvas.height;\n    }\n\n    tx = new textureCtor({\n        context: context,\n        source: source,\n        width: width,\n        height: height,\n        pixelFormat: pixelFormat,\n        pixelDatatype: texture.type,\n        sampler: sampler,\n        flipY: texture.flipY,\n        preMultiplyAlpha: texture.preMultiplyAlpha\n    });\n\n    if (mipmap && !isCompressed) {\n        tx.generateMipmap();\n    }\n\n    return tx;\n}\n\nTextureUtils.createCubeTexture = function (textureUniform, context) {\n    let images = textureUniform.value;\n    let cubemap = new Cesium.CubeMap({\n        context: context,\n        source: {\n            positiveX: images[0],\n            negativeX: images[1],\n            positiveY: images[2],\n            negativeY: images[3],\n            positiveZ: images[4],\n            negativeZ: images[5]\n        },\n        pixelFormat: textureUniform.format,\n        pixelDatatype: textureUniform.type,\n        preMultiplyAlpha: textureUniform.preMultiplyAlpha,\n        flipY: textureUniform.flipY//,\n        // sampler: item.sampler ? new Cesium.Sampler(item.sampler) : undefined\n    });\n    return cubemap;\n}\nTextureUtils.fromTexure3js = function (val3js, valCesium) {\n\n    if (val3js.isTexture) {\n        var sampler = {};\n        sampler.minificationFilter = ConstantMap.minFilterMap[val3js.minFilter];\n        sampler.magnificationFilter = ConstantMap.magFilterMap[val3js.magFilter];\n        sampler.wrapS = ConstantMap.textureWrapMap[val3js.wrapS];\n        sampler.wrapT = ConstantMap.textureWrapMap[val3js.wrapT];\n        sampler.maximumAnisotropy = val3js.anisotropy;\n\n        if (!valCesium) {\n            valCesium = {\n                uuid: val3js.uuid\n            };\n\n            valCesium._disposeCallbacks = [];\n            valCesium.onDispose = function (disposeCallback) {\n                if (this._disposeCallbacks.indexOf(disposeCallback) == -1) {\n                    this._disposeCallbacks.push(disposeCallback);\n                }\n            }\n            valCesium.destroy = function () {\n                for (var i = 0; i < this._disposeCallbacks.length; i++) {\n                    var disposeCallback = this._disposeCallbacks[i];\n                    disposeCallback.call(this);\n                }\n\n                this._disposeCallbacks.splice(0);\n            }\n        }\n\n        if (!valCesium.getCacheKey) {\n            valCesium.getCacheKey = function () {\n                var item = this;\n                var cacheKey = !item.uuid && typeof item.value == 'string' ? item.value : item.uuid;\n                if (!cacheKey) {\n                    if (item.value.uuid && (item._value instanceof HTMLImageElement\n                        || item.value instanceof HTMLCanvasElement\n                        || item.value instanceof HTMLVideoElement\n                        || item.value instanceof OffscreenCanvas)\n                    ) {\n                        cacheKey = item._value.uuid;\n                    }\n                }\n                return cacheKey;\n            }\n        }\n\n        valCesium.value = val3js.image;\n        let needsUpdate = valCesium.version != val3js.version;\n        var cacheKey = valCesium.getCacheKey();\n        if (!needsUpdate && valCesium.cacheKey != cacheKey) needsUpdate = true;\n\n        var isEmptyTextureUniform = false;\n        if (val3js.isDataTexture) {\n            valCesium.width = val3js.image.width;\n            valCesium.height = val3js.image.height;\n\n            valCesium.source = {\n                arrayBufferView: val3js.image.data,\n                width: val3js.image.width,\n                height: val3js.image.height\n            }\n            valCesium.needsUpdate = !!val3js.image.data;\n        }\n        else if (val3js.isCompressedTexture) {\n\n            if (!val3js.image.width || !val3js.image.height) {\n\n                var images = val3js.image;\n                if (Array.isArray(images) && images.length > 0 && images[0].width && images[0].width) {\n\n                    if (needsUpdate) {\n\n                        valCesium.value = images;\n                        valCesium.source = [];\n\n                        valCesium.width = images[0].width;\n                        valCesium.height = images[0].height;\n\n                        for (let i = 0; i < images.length; i++) {\n                            const image = images[i];\n                            let mipLevels = [];\n                            for (let i = 1; i < image.mipmaps.length; i++) {\n                                mipLevels.push(image.mipmaps[i].data)\n                            }\n                            var source = {\n                                arrayBufferView: image.mipmaps[0].data,\n                                width: image.width,\n                                height: image.height,\n                                mipLevels: mipLevels\n                            }\n                            valCesium.source.push(source);\n                        }\n                    }\n\n                } else {\n                    valCesium.value = null;\n                    valCesium.source = null;\n                    isEmptyTextureUniform = true;\n                }\n            } else {\n                valCesium.width = val3js.image.width;\n                valCesium.height = val3js.image.height;\n\n                valCesium.value = {\n                    width: val3js.image.width,\n                    height: val3js.image.height,\n                    arrayBufferView: val3js.image.data\n                };\n\n                if (needsUpdate && val3js.mipmaps && val3js.mipmaps.length > 0) {\n                    let mipLevels = [];\n                    for (let i = 1; i < val3js.mipmaps.length; i++) {\n                        mipLevels.push(val3js.mipmaps[i].data)\n                    }\n                    valCesium.source = {\n                        arrayBufferView: val3js.mipmaps[0].data,\n                        width: val3js.image.width,\n                        height: val3js.image.height,\n                        mipLevels: mipLevels\n                    }\n                }\n            }\n        }\n        else if (val3js.isCanvasTexture || val3js.image instanceof ImageData) {\n            valCesium.width = val3js.image.width;\n            valCesium.height = val3js.image.height;\n\n            valCesium.source = val3js.image;\n        }\n        else if (Array.isArray(valCesium.value)) {//hdr CubeTexture\n\n            let images = valCesium.value;\n            var hasEmpty = false;\n            images = images.map(image => {\n                if (!image) hasEmpty = true;\n                if (image.isDataTexture) {\n                    let tex = image;\n                    return {\n                        width: tex.image.width,\n                        height: tex.image.height,\n                        arrayBufferView: tex.image.data\n                    }\n                }\n                return image\n            });\n\n            isEmptyTextureUniform = !images.length && !hasEmpty;\n        } else {\n            isEmptyTextureUniform = true;\n        }\n\n        valCesium.type = ConstantMap.typesMap[val3js.type];\n        valCesium.format = ConstantMap.formatsMap[val3js.format];\n        valCesium.sampler = sampler;\n        valCesium.flipY = val3js.flipY;\n        valCesium.preMultiplyAlpha = val3js.premultiplyAlpha;\n        valCesium.needsUpdate = true;\n        valCesium.isEmptyTextureUniform = isEmptyTextureUniform || !valCesium.value && !valCesium.source;\n        valCesium.version = val3js.version;\n        valCesium.cacheKey = cacheKey;\n        return valCesium;\n    }\n    else {\n        return val3js;\n    }\n}\n/**\n* 初始化给定节点树中第一个没有初始化的纹理（map和lightMap），如果已经全部初始化，则返回true\n* @param {Cesium.FrameState} frameState \n* @param {THREE.Group|THREE.Scene} content \n* @param {Object} textureCache \n* @param {string[]} textureCache \n* @param {string} [uuidPrefix] \n* @param {number} [maximumTextureSize]\n* @param {boolean} [maxMipmapSize=1024]\n* @returns {boolean} ready\n*/\nTextureUtils.initTexture = function (frameState, content, textureCache, textureIds, uuidPrefix, maximumTextureSize, maxMipmapSize) {\n    const { WebGLConstants, Sampler } = Cesium;\n    const LinearFilter = THREE.LinearFilter;\n    let ready = true, textures = [];\n\n    maxMipmapSize = maxMipmapSize || 1024;\n\n    content.traverse(obj => {\n        if (!obj.material) return\n        let material = obj.material;\n        let tex = material.map;\n\n        if (tex) {\n            var img = tex.image\n\n            if (img.width >= maxMipmapSize || img.height >= maxMipmapSize) {\n                tex.minFilter = LinearFilter;\n            }\n            if (uuidPrefix && !tex.uuid.startsWith(uuidPrefix)) {\n                tex.uuid = uuidPrefix + tex.uuid;\n            }\n\n            if (!textureCache[tex.uuid]) textures.push(tex);\n            else {\n                let texCes = textureCache[tex.uuid]\n                texCes.referenceCount = (texCes.referenceCount || 0) + 1;\n                // if ((texCes.width > 2048 || texCes.height > 2048) && texCes.referenceCount > 5) {\n                //     console.log(texCes.referenceCount);\n                // }\n            }\n        }\n\n        if (material.lightMap && !textureCache[material.lightMap.uuid]) {\n            material.lightMap.minFilter = LinearFilter\n            material.lightMap.__isLightMap = true;\n            textures.push(material.lightMap);\n        }\n\n    });\n\n    if (textures.length > 0) {\n        let item = {}, tex = textures.shift();\n\n        TextureUtils.fromTexure3js(tex, item);\n        let image = item.value;\n        let format = WebGLConstants.RGB;\n\n        if (image instanceof HTMLCanvasElement\n            || image instanceof HTMLVideoElement\n            || (image.src && image.src.toLocaleLowerCase().indexOf(\".png\") >= 0)\n        ) {\n            format = WebGLConstants.RGBA;\n        }\n\n        var sampler = item.sampler;\n        let texture = TextureUtils.createTexture({\n            context: frameState.context,\n            source: item.source || image,\n            // target: WebGLConstants.TEXTURE_2D,\n            width: item.width || image.width,\n            height: item.height || image.height,\n            format: item.format || format,\n            flipY: item.flipY,\n            type: item.type,\n            sampler: new Sampler(sampler),\n            preMultiplyAlpha: item.preMultiplyAlpha\n        }, frameState.context, tex.__isLightMap ? undefined : maximumTextureSize);\n\n        delete tex.__isLightMap;\n\n        textureCache[tex.uuid] = texture;\n        ready = textures.length == 0;\n\n        tex.addEventListener('dispose', () => {\n            if (!texture.referenceCount) {\n                if (!texture.isDestroyed || !texture.isDestroyed()) texture.destroy()\n                delete textureCache[tex.uuid];\n            } else {\n                texture.referenceCount--;\n            }\n        });\n        if (textureIds) {\n            textureIds.push(tex.uuid)\n        }\n    }\n\n    return ready;\n}\n\n/**\n * \n * @param {THREE.Mesh} mesh  \n * @param {boolean} [forcePowerOfTwo]  \n * @returns {undefined|THREE.Mesh} newMesh\n */\nTextureUtils.clampToUV = function (mesh, forcePowerOfTwo) {\n    let geometry = mesh.geometry,\n        material = mesh.material,\n        uv = geometry.getAttribute('uv');\n    if (!uv || !material.map || !material.map.image) return;\n\n\n    let minX = Number.MAX_VALUE, maxX = -Number.MAX_VALUE,\n        minY = Number.MAX_VALUE, maxY = -Number.MAX_VALUE;\n    for (let i = 0; i < uv.array.length; i += 2) {\n        const x = uv.array[i], y = uv.array[i + 1];\n        maxX = Math.max(maxX, x);\n        minX = Math.min(minX, x);\n        maxY = Math.max(maxY, y);\n        minY = Math.min(minY, y);\n    }\n\n    let _Math = Cesium.Math;\n    let deltX = maxX - minX, deltY = maxY - minY;\n\n    if ((deltX < 1 || deltY <= 1)\n        && minX >= 0 && _Math.lessThanOrEquals(maxX, 1, _Math.EPSILON2)\n        && minY >= 0 && _Math.lessThanOrEquals(maxY, 1, _Math.EPSILON2)) {\n\n        mesh = mesh.clone();\n        geometry = geometry.clone();\n        material = material.clone();\n        mesh.material = material;\n        mesh.geometry = geometry;\n        uv = uv.clone();\n        geometry.setAttribute('uv', uv);\n\n        for (let i = 0; i < uv.array.length; i += 2) {\n            let x = uv.array[i], y = uv.array[i + 1];\n            x = (x - minX) / deltX;\n            y = (y - minY) / deltY;\n            uv.array[i] = x;\n            uv.array[i + 1] = y;\n        }\n\n        let map = material.map.clone(),\n            image = map.image;\n\n        map.wrapT = map.wrapS = THREE.ClampToEdgeWrapping;\n\n        map.uuid = THREE.Math.generateUUID();\n\n\n        let width = Math.ceil(deltX * image.width),\n            height = Math.ceil(deltY * image.height),\n            x = -Math.floor(minX * image.width),\n            y = -Math.floor(minY * image.height);\n\n        if (forcePowerOfTwo\n            && (\n                !_Math.isPowerOfTwo(width)\n                || !_Math.isPowerOfTwo(height)\n            )) {\n            width = _Math.nextPowerOfTwo(width);\n            height = _Math.nextPowerOfTwo(height);\n        }\n\n        let cv = document.createElement('canvas');\n        cv.width = width;\n        cv.height = height;\n\n        let ctx = cv.getContext('2d');\n        ctx.drawImage(image, x, y);\n        cv.src = image.src;\n\n        map.image = cv;\n        material.map = map;\n        return mesh;\n    }\n\n}\n\n/**\n * \n * @param {THREE.Texture} texture \n * @param {number} scaleFactor  0~1\n * @param {boolean} [forcePowerOfTwo]  \n * @returns {THREE.Texture} texture\n */\nTextureUtils.resampleTexture = function (texture, scaleFactor, forcePowerOfTwo) {\n\n    const source = texture.image;\n    const minFilter = texture.minFilter, { LinearFilter, NearestFilter } = THREE;\n\n    if (!forcePowerOfTwo) {\n        forcePowerOfTwo = minFilter != LinearFilter && minFilter != NearestFilter;\n    }\n    const dstCanvas = this.resampleImage(source, scaleFactor, forcePowerOfTwo)\n\n    texture.width = dstCanvas.width;\n    texture.height = dstCanvas.height;\n    texture.image = dstCanvas;\n\n    return texture;\n\n}\n\n/**\n * \n * @param {HTMLImageElement|HTMLCanvasElement} source \n * @param {number} scaleFactor  0~1\n * @param {boolean} [forcePowerOfTwo]  \n * @returns {HTMLCanvasElement} result\n */\nTextureUtils.resampleImage = function (source, scaleFactor, forcePowerOfTwo) {\n\n    const _Math = Cesium.Math;\n    const srcWidth = source.width, srcHeight = source.height;\n    var width = parseInt(srcWidth * scaleFactor),\n        height = parseInt(srcHeight * scaleFactor);\n\n    var dstCanvas\n    if (scaleFactor != 1) {\n        dstCanvas = this._resampleImage(source, width, height, forcePowerOfTwo); //document.createElement('canvas');\n    } else {\n        if (forcePowerOfTwo) {\n            width = _Math.nextPowerOfTwo(width);\n            height = _Math.nextPowerOfTwo(height);\n        }\n        dstCanvas = document.createElement('canvas');\n        dstCanvas.width = width;\n        dstCanvas.height = height;\n        const destContext = dstCanvas.getContext('2d');\n        destContext.drawImage(source, 0, 0, srcWidth, srcHeight, 0, 0, width, height);\n    }\n\n    return dstCanvas;\n\n}\n\n\n/**\n * \n * @param {HTMLImageElement|HTMLCanvasElement} source \n * @param {number} dstWidth  \n * @param {number} dstHeight  \n * @param {boolean} [forcePowerOfTwo]  \n * @returns {HTMLCanvasElement} result\n */\nTextureUtils._resampleImage = function (source, dstWidth, dstHeight, forcePowerOfTwo) {\n\n    const _Math = Cesium.Math;\n    const srcWidth = source.width, srcHeight = source.height;\n    var width = dstWidth, height = dstHeight;\n\n    const dstCanvas = document.createElement('canvas');\n    if (forcePowerOfTwo) {\n        width = _Math.nextPowerOfTwo(width);\n        height = _Math.nextPowerOfTwo(height);\n    }\n\n    dstCanvas.width = width;\n    dstCanvas.height = height;\n    const dstContext = dstCanvas.getContext('2d');\n\n    var srcCanvas = source, srcContext;\n    if (!(source instanceof HTMLCanvasElement)) {\n        srcCanvas = document.createElement('canvas');\n        srcCanvas.width = srcWidth\n        srcCanvas.height = srcHeight\n        srcContext = srcCanvas.getContext('2d')\n        srcContext.drawImage(source, 0, 0);\n\n    } else {\n        srcContext = srcCanvas.getContext('2d')\n    }\n    const srcImageData = srcContext.getImageData(0, 0, srcWidth, srcHeight)\n\n\n    //nearset\n    const dstImageData = dstContext.getImageData(0, 0, width, height);\n    var dstPtr = 0, scaleX = srcWidth / width, scaleY = srcHeight / height, stride = 4, srcRrow = 0, srcCol = 0, srcPtr = 0;\n    for (let i = 0; i < height; i++) {\n        for (let j = 0; j < width; j++) {\n            srcRrow = parseInt(i * scaleY);\n            srcCol = parseInt(j * scaleX);\n            srcPtr = stride * (srcRrow * srcWidth + srcCol);\n            for (let j = 0; j < stride; j++) {\n                dstImageData.data[dstPtr + j] = srcImageData.data[srcPtr + j]\n            }\n            dstPtr += stride;\n        }\n    }\n    dstContext.putImageData(dstImageData, 0, 0);\n\n    return dstCanvas;\n\n}\n\n/**\n * \n * @param {Cesium.Texture|Cesium.CubeMapFace} destTexture \n * @param {object} source\n */\nTextureUtils.copyFromCompressData = function (destTexture, source) {\n\n    var size = destTexture._size;\n    var pixelFormat = destTexture._pixelFormat;\n    var pixelDatatype = destTexture._pixelDatatype;\n\n    var preMultiplyAlpha = destTexture._preMultiplyAlpha;\n    var flipY = destTexture._flipY;\n\n    /**\n     * @type {WebGLRenderingContext}\n     * @private\n     */\n    var gl = destTexture._gl || destTexture._context._gl;\n    var textureTarget = destTexture._textureTarget;\n    var texture = destTexture._texture;\n    var targetFace = typeof destTexture._targetFace == 'number' ? destTexture._targetFace : textureTarget;\n\n    var width = source.width;\n    var height = source.height;\n    var arrayBufferView = source.arrayBufferView;\n\n    gl.activeTexture(gl.TEXTURE0);\n    gl.bindTexture(textureTarget, texture);\n\n    var unpackAlignment = 4;\n\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n    // Source: typed array\n    var arrayBufferView = source.arrayBufferView;\n    const { PixelFormat, defined } = Cesium;\n    var isCompressed = PixelFormat.isCompressedFormat(pixelFormat);\n    if (isCompressed) {\n        gl.compressedTexImage2D(\n            targetFace,\n            0,//level\n            pixelFormat,\n            width,\n            height,\n            0,\n            arrayBufferView\n        );\n    } else {\n        gl.texImage2D(\n            targetFace,\n            0,\n            pixelFormat,\n            width,\n            height,\n            0,\n            pixelFormat,\n            pixelDatatype,\n            arrayBufferView\n        );\n    }\n    if (defined(source.mipLevels)) {\n        var mipWidth = width;\n        var mipHeight = height;\n        for (var i = 0; i < source.mipLevels.length; ++i) {\n            mipWidth = Math.floor(mipWidth / 2) | 0;\n            if (mipWidth < 1) {\n                mipWidth = 1;\n            }\n            mipHeight = Math.floor(mipHeight / 2) | 0;\n            if (mipHeight < 1) {\n                mipHeight = 1;\n            }\n            if (isCompressed) {\n                gl.compressedTexImage2D(\n                    targetFace,\n                    i + 1,\n                    pixelFormat,\n                    mipWidth,\n                    mipHeight,\n                    0,\n                    source.mipLevels[i]\n                );\n            } else {\n                gl.texImage2D(\n                    targetFace,\n                    i + 1,\n                    pixelFormat,\n                    mipWidth,\n                    mipHeight,\n                    0,\n                    pixelFormat,\n                    pixelDatatype,\n                    source.mipLevels[i]\n                );\n            }\n        }\n    }\n\n    gl.bindTexture(textureTarget, null);\n}\n\nexport default TextureUtils;",
    "\nfunction WebGLCapabilities(gl, extensions, parameters) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif (maxAnisotropy !== undefined) return maxAnisotropy;\n\n\t\tvar extension = extensions.get('EXT_texture_filter_anisotropic');\n\n\t\tif (extension !== null) {\n\n\t\t\tmaxAnisotropy = gl.getParameter(extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT);\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision(precision) {\n\n\t\tif (precision === 'highp') {\n\n\t\t\tif (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.HIGH_FLOAT).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT).precision > 0) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif (precision === 'mediump') {\n\n\t\t\tif (gl.getShaderPrecisionFormat(gl.VERTEX_SHADER, gl.MEDIUM_FLOAT).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT).precision > 0) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tvar isWebGL2 = (typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext) ||\n\t\t(typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext);\n\t/* eslint-enable no-undef */\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision(precision);\n\n\tif (maxPrecision !== precision) {\n\n\t\tconsole.warn('Mesh3D.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.');\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n\tvar maxVertexTextures = gl.getParameter(gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS);\n\tvar maxTextureSize = gl.getParameter(gl.MAX_TEXTURE_SIZE);\n\tvar maxCubemapSize = gl.getParameter(gl.MAX_CUBE_MAP_TEXTURE_SIZE);\n\n\tvar maxAttributes = gl.getParameter(gl.MAX_VERTEX_ATTRIBS);\n\tvar maxVertexUniforms = gl.getParameter(gl.MAX_VERTEX_UNIFORM_VECTORS);\n\tvar maxVaryings = gl.getParameter(gl.MAX_VARYING_VECTORS);\n\tvar maxFragmentUniforms = gl.getParameter(gl.MAX_FRAGMENT_UNIFORM_VECTORS);\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = isWebGL2 || !!extensions.get('OES_texture_float');\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tvar maxSamples = isWebGL2 ? gl.getParameter(gl.MAX_SAMPLES) : 0;\n\n\treturn {\n\n\t\tgl: gl,\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\nexport default WebGLCapabilities;\n",
    "\nfunction WebGLClipping(properties, visualizer) {\n\tlet { Matrix3, Plane, Vector3 } = THREE;\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function (planes, enableLocalClipping, camera) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes(planes, camera, 0);\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes(null);\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function (material, camera, useCache) {\n\n\t\tconst planes = material.clippingPlanes,\n\t\t\tclipIntersection = material.clipIntersection,\n\t\t\tclipShadows = material.clipShadows;\n\n\t\tconst materialProperties = properties.get(material);\n\n\t\tif (!localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && !clipShadows) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif (renderingShadows) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes(null);\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = materialProperties.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes(planes, camera, lGlobal, useCache);\n\n\t\t\tfor (let i = 0; i !== lGlobal; ++i) {\n\n\t\t\t\tdstArray[i] = globalState[i];\n\n\t\t\t}\n\n\t\t\tmaterialProperties.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif (uniform.value !== globalState) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\n\tfunction projectPlanes(planes, camera, dstOffset, skipTransform) {\n\n\t\tconst nPlanes = planes !== null ? planes.length : 0;\n\t\tlet dstArray = null;\n\n\t\tif (nPlanes !== 0) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif (skipTransform !== true || dstArray === null) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix(viewMatrix);\n\n\t\t\t\tif (dstArray === null || dstArray.length < flatSize) {\n\n\t\t\t\t\tdstArray = new Float32Array(flatSize);\n\n\t\t\t\t}\n\n\t\t\t\tfor (let i = 0, i4 = dstOffset; i !== nPlanes; ++i, i4 += 4) {\n\n\t\t\t\t\tplane.copy(planes[i]).applyMatrix4(viewMatrix, viewNormalMatrix);\n\n\t\t\t\t\tplane.normal.toArray(dstArray, i4);\n\t\t\t\t\tdstArray[i4 + 3] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\nexport default WebGLClipping;\n",
    "\nfunction WebGLCubeMaps(renderer) {\n\tif (typeof THREE == 'undefined') {\n\t\treturn {\n\t\t\tget(texture) {\n\t\t\t\treturn texture;\n\t\t\t},\n\t\t\tdispose() { }\n\t\t}\n\t}\n\n\tlet { CubeReflectionMapping, CubeRefractionMapping, EquirectangularReflectionMapping, EquirectangularRefractionMapping, WebGLCubeRenderTarget } = THREE;\n\n\tlet cubemaps = new WeakMap();\n\n\tfunction mapTextureMapping(texture, mapping) {\n\n\t\tif (mapping === EquirectangularReflectionMapping) {\n\n\t\t\ttexture.mapping = CubeReflectionMapping;\n\n\t\t} else if (mapping === EquirectangularRefractionMapping) {\n\n\t\t\ttexture.mapping = CubeRefractionMapping;\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction get(texture) {\n\n\t\tif (texture && texture.isTexture) {\n\n\t\t\tconst mapping = texture.mapping;\n\n\t\t\tif (mapping === EquirectangularReflectionMapping || mapping === EquirectangularRefractionMapping) {\n\n\t\t\t\tif (cubemaps.has(texture)) {\n\n\t\t\t\t\tconst cubemap = cubemaps.get(texture).texture;\n\t\t\t\t\treturn mapTextureMapping(cubemap, texture.mapping);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst image = texture.image;\n\n\t\t\t\t\tif (image && image.height > 0) {\n\n\t\t\t\t\t\t// const currentRenderList = renderer.getRenderList();\n\t\t\t\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\t\t\t\tconst currentRenderState = renderer.renderState//getRenderState();\n\t\t\t\t\t\tconst currentAutoConvertCamera = renderer.autoConvertCamera;\n\n\t\t\t\t\t\tconst renderTarget = new WebGLCubeRenderTarget(image.height / 2);\n\t\t\t\t\t\trenderer.autoConvertCamera = true;\n\n\t\t\t\t\t\trenderTarget.fromEquirectangularTexture(renderer, texture);\n\t\t\t\t\t\tcubemaps.set(texture, renderTarget);\n\n\t\t\t\t\t\trenderer.autoConvertCamera = currentAutoConvertCamera;\n\t\t\t\t\t\trenderer.setRenderTarget(currentRenderTarget);\n\t\t\t\t\t\t// renderer.setRenderList(currentRenderList); \n\t\t\t\t\t\trenderer.renderState = currentRenderState;// renderer.setRenderState(currentRenderState);\n\n\t\t\t\t\t\ttexture.addEventListener('dispose', onTextureDispose);\n\n\t\t\t\t\t\treturn mapTextureMapping(renderTarget.texture, texture.mapping);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// image not yet ready. try the conversion next frame\n\n\t\t\t\t\t\treturn null;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tfunction onTextureDispose(event) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener('dispose', onTextureDispose);\n\n\t\tconst cubemap = cubemaps.get(texture);\n\n\t\tif (cubemap !== undefined) {\n\n\t\t\tcubemaps.delete(texture);\n\t\t\tcubemap.dispose();\n\n\t\t}\n\n\t}\n\n\tfunction dispose() {\n\n\t\tcubemaps = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\nexport default WebGLCubeMaps;\n",
    "function WebGLExtensions(gl) {\n\n\tconst extensions = {};\n\n\treturn {\n\n\t\thas: function (name) {\n\n\t\t\tif (extensions[name] !== undefined) {\n\n\t\t\t\treturn extensions[name] !== null;\n\n\t\t\t}\n\n\t\t\tlet extension;\n\n\t\t\tswitch (name) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension('WEBGL_depth_texture') || gl.getExtension('MOZ_WEBGL_depth_texture') || gl.getExtension('WEBKIT_WEBGL_depth_texture');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension('EXT_texture_filter_anisotropic') || gl.getExtension('MOZ_EXT_texture_filter_anisotropic') || gl.getExtension('WEBKIT_EXT_texture_filter_anisotropic');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension('WEBGL_compressed_texture_s3tc') || gl.getExtension('MOZ_WEBGL_compressed_texture_s3tc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_s3tc');\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension('WEBGL_compressed_texture_pvrtc') || gl.getExtension('WEBKIT_WEBGL_compressed_texture_pvrtc');\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension(name);\n\n\t\t\t}\n\n\t\t\textensions[name] = extension;\n\n\t\t\treturn extension !== null;\n\n\t\t},\n\n\t\tget: function (name) {\n\n\t\t\tif (!this.has(name)) {\n\n\t\t\t\tconsole.warn('Mesh3D.WebGLRenderer: ' + name + ' extension not supported.');\n\n\t\t\t}\n\n\t\t\treturn extensions[name];\n\n\t\t}\n\n\t};\n\n}\n\nexport default WebGLExtensions;\n",
    "\nfunction WebGLGeometries() { }\n\nfunction arrayMax(array) {\n\n    if (array.length === 0) return - Infinity;\n\n    var max = array[0];\n\n    for (var i = 1, l = array.length; i < l; ++i) {\n\n        if (array[i] > max) max = array[i];\n\n    }\n\n    return max;\n\n}\n\n/**\n * @param {THREE.BufferGeometry}geometry\n * @returns {THREE.BufferAttribute}\n */\nWebGLGeometries.getWireframeAttribute = (function () {\n\n    var wireframeAttributes = new WeakMap();\n\n    function updateWireframeAttribute(geometry) {\n\n        var indices = [];\n\n        var geometryIndex = geometry.index;\n        var geometryPosition = geometry.attributes.position;\n        var version = 0;\n\n        if (geometryIndex !== null) {\n\n            var array = geometryIndex.array;\n            version = geometryIndex.version;\n\n            for (var i = 0, l = array.length; i < l; i += 3) {\n\n                var a = array[i + 0];\n                var b = array[i + 1];\n                var c = array[i + 2];\n\n                indices.push(a, b, b, c, c, a);\n\n            }\n\n        } else {\n\n            var array = geometryPosition.array;\n            version = geometryPosition.version;\n\n            for (var i = 0, l = (array.length / 3) - 1; i < l; i += 3) {\n\n                var a = i + 0;\n                var b = i + 1;\n                var c = i + 2;\n\n                indices.push(a, b, b, c, c, a);\n\n            }\n\n        }\n\n        const { Uint32BufferAttribute, Uint16BufferAttribute } = THREE;\n        var attribute = new (arrayMax(indices) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute)(indices, 1);\n        attribute.version = version;\n\n        // attributes.update( attribute, 34963 );\n\n        //\n\n        var previousAttribute = wireframeAttributes.get(geometry);\n\n        if (previousAttribute) previousAttribute.onGeometryDispose(); //attributes.remove( previousAttribute );\n\n        //\n\n        function onGeometryDispose() {\n            wireframeAttributes.delete(geometry);\n            geometry.addEventListener('dispose', onGeometryDispose);\n        }\n        attribute.onGeometryDispose = onGeometryDispose;\n        geometry.addEventListener('dispose', onGeometryDispose);\n\n        wireframeAttributes.set(geometry, attribute);\n\n    }\n\n    /**\n     * @param {THREE.BufferGeometry}geometry\n     * @returns {THREE.BufferAttribute}\n     * @private\n     */\n    function getWireframeAttribute(geometry) {\n\n        var currentAttribute = wireframeAttributes.get(geometry);\n\n        if (currentAttribute) {\n\n            var geometryIndex = geometry.index;\n\n            if (geometryIndex !== null) {\n\n                // if the attribute is obsolete, create a new one\n\n                if (currentAttribute.version < geometryIndex.version) {\n\n                    updateWireframeAttribute(geometry);\n\n                }\n\n            }\n\n        } else {\n\n            updateWireframeAttribute(geometry);\n\n        }\n\n        return wireframeAttributes.get(geometry);\n\n    }\n    return getWireframeAttribute;\n})()\n\n/**\n * \n * @param {THREE.Geometry|THREE.BufferGeometry|THREE.LineSegments|THREE.Points|Cesium.Geometry} geometry \n * @return {THREE.BufferGeometry|Cesium.Geometry}\n */\nWebGLGeometries.get = (function () {\n    var geometries = new WeakMap();\n\n    /**\n     * \n     * @param {THREE.Geometry|THREE.BufferGeometry|THREE.LineSegments|THREE.Points} geometry\n     * @param {THREE.Material[]}[materials]\n     * @return {THREE.BufferGeometry}\n     * @private\n     */\n    function get(geometry, materials) {\n        var bufferGeometry;\n        if (geometry.isBufferGeometry || geometry instanceof Cesium.Geometry) {\n            bufferGeometry = geometry;\n        }\n        else {\n            bufferGeometry = geometries.get(geometry);\n            if (!bufferGeometry) {\n\n                bufferGeometry = new THREE.BufferGeometry()\n                bufferGeometry.fromGeometry(geometry)\n\n                function onGeometryDispose() {\n                    bufferGeometry.dispose();\n                    geometries.delete(geometry);\n                    bufferGeometry.removeEventListener('dispose', onGeometryDispose)\n                }\n                bufferGeometry.addEventListener('dispose', onGeometryDispose)\n\n                geometries.set(geometry, bufferGeometry);\n            }\n        }\n\n        //\n        const BoundingSphere = Cesium.BoundingSphere;\n        if (!bufferGeometry.boundingSphere) {\n\n            if (bufferGeometry.computeBoundingSphere) {\n                bufferGeometry.computeBoundingSphere();\n            } else {\n                var posAttr = bufferGeometry.attributes.position\n                geometry.boundingSphere = BoundingSphere.fromVertices(posAttr.values || posAttr.array);\n            }\n\n        }\n\n        if (!bufferGeometry.boundingVolume) {\n            bufferGeometry.boundingVolume = BoundingSphere.clone(bufferGeometry.boundingSphere)\n        }\n\n        //\n\n        const groups = bufferGeometry.groups;\n\n        if (\n            // materials &&\n            groups && groups.length > 0 && !bufferGeometry.groupsOptimized) {\n\n            var groupsOptimized = [], tempDic = {};\n            var materialIndicesUsed = [];\n            groups.forEach((g, groupIndex) => {\n                var materialIndex = g.materialIndex;\n\n                if (!tempDic[materialIndex]) {\n                    materialIndicesUsed.push(materialIndex);\n                }\n                else {\n                    // var material = materials[materialIndex]\n                    // if (!material.transparent)  \n                    return;\n                }\n\n                groupsOptimized.push({ materialIndex, groupIndex });\n                tempDic[materialIndex] = true;\n            })\n            bufferGeometry.groupsOptimized = groupsOptimized;\n            bufferGeometry.materialIndicesUsed = materialIndicesUsed;\n        }\n\n        return bufferGeometry;\n    }\n\n    return get;\n})()\nexport default WebGLGeometries;",
    "/**\n * 改造threejs WebGLLights\n */\n\nfunction WebGLLights() {\n\n    const {\n        Matrix4, Matrix3, Cartesian3, Color, Texture, PixelDatatype, PixelFormat\n    } = Cesium;\n\n    var cache = new UniformsCache();\n    var shadowCache = new ShadowUniformsCache();\n\n    var extensionState = {\n        point: {\n            positions: [],\n            colors: [],\n            decalDists: [],\n            visibles: [],\n            map: null, array: null\n        }\n    }\n    var state = {\n\n        version: 0,\n\n        hash: {\n            directionalLength: - 1,\n            pointLength: - 1,\n            spotLength: - 1,\n            rectAreaLength: - 1,\n            hemiLength: - 1,\n\n            numDirectionalShadows: - 1,\n            numPointShadows: - 1,\n            numSpotShadows: - 1,\n        },\n\n        ambient: new Color(0, 0, 0, 1),\n        /**\n         * @type {Cesium.Cartesian3}\n         * @private\n         */\n        probe: [],\n        directional: [],\n        directionalShadow: [],\n        directionalShadowMap: [],\n        directionalShadowMatrix: [],\n        spot: [],\n        spotShadow: [],\n        spotShadowMap: [],\n        spotShadowMatrix: [],\n        rectArea: [],\n        /**\n         * @type {{\n         * position:Cesium.Cartesian3,\n         * color:Cesium.Color,\n         * distance:number,\n         * decay:number\n         * }[]}\n         */\n        point: [],\n        pointShadow: [],\n        pointShadowMap: [],\n        pointShadowMatrix: [],\n        hemi: [],\n\n        numDirectionalShadows: - 1,\n        numPointShadows: - 1,\n        numSpotShadows: - 1\n\n    };\n\n    for (var i = 0; i < 9; i++) state.probe.push(new Cartesian3());\n\n    var vector3 = new Cartesian3();\n    var matrix4 = new Matrix4();\n    var matrix42 = new Matrix4();\n    var matrix3 = new Matrix3();\n\n    /**\n     * \n     * @param {Light[]} lights \n     * @param {*} shadows \n     * @param {Cesium.Camera} camera \n     * @param {Cesium.FrameState}frameState\n     * @private\n     */\n    function setup(lights, shadows, camera, frameState) {\n\n        var r = 0, g = 0, b = 0;\n\n        for (var i = 0; i < 9; i++) state.probe[i].set(0, 0, 0);\n\n        var directionalLength = 0;\n        var pointLength = 0;\n        var spotLength = 0;\n        var rectAreaLength = 0;\n        var hemiLength = 0;\n\n        var numDirectionalShadows = 0;\n        var numPointShadows = 0;\n        var numSpotShadows = 0;\n\n        var viewMatrix = camera.viewMatrix// camera.matrixWorldInverse;\n\n        lights.sort(shadowCastingLightsFirst);\n\n        extensionState.point.positions.length = 0\n        extensionState.point.colors.length =\n            extensionState.point.decalDists.length = 0\n\n        for (var i = 0, l = lights.length; i < l; i++) {\n\n            var light = lights[i];\n\n            var color = light.color;//getColor(light.color);\n            var intensity = light.intensity;\n            var distance = light.distance;\n\n            var shadowMap = (light.shadow && light.shadow.map) ? light.shadow.map.texture : null;\n\n            if (light.isAmbientLight) {\n\n                r += color.red * intensity;\n                g += color.green * intensity;\n                b += color.blue * intensity;\n\n            } else if (light.isLightProbe) {//未处理\n\n                for (var j = 0; j < 9; j++) {\n\n                    // state.probe[j].addScaledVector(light.sh.coefficients[j], intensity);\n                    // Cartesian3.add(\n                    //     state.probe[j],\n                    //     Cartesian3.multiplyByScalar(light.sh.coefficients[j],\n                    //         intensity, state.probe[j]));\n\n                    state.probe[j].x = light.sh.coefficients[j].x * intensity\n                    state.probe[j].y = light.sh.coefficients[j].y * intensity\n                    state.probe[j].z = light.sh.coefficients[j].z * intensity\n                }\n\n            } else if (light.isDirectionalLight) {\n\n                var uniforms = cache.get(light);\n\n                Color.multiplyByScalar(color, intensity, uniforms.color); //uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                Matrix4.getTranslation(light.modelMatrix, uniforms.direction);// uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                Matrix4.getTranslation(light.target.modelMatrix, vector3); //vector3.setFromMatrixPosition(light.target.matrixWorld);\n                Cartesian3.subtract(uniforms.direction, vector3, uniforms.direction); //uniforms.direction.sub(vector3);\n                transformDirection(uniforms.direction, viewMatrix);// Cesium.Matrix4.multiplyByPoint(viewMatrix, uniforms.direction, uniforms.direction); //uniforms.direction.transformDirection(viewMatrix);\n\n                uniforms.shadow = light.castShadow;\n\n                if (light.castShadow) {\n\n                    const shadow = light.shadow;\n\n                    const shadowUniforms = shadowCache.get(light);\n\n                    shadowUniforms.shadowBias = shadow.bias;\n                    shadowUniforms.shadowNormalBias = shadow.normalBias;\n                    shadowUniforms.shadowRadius = shadow.radius;\n                    shadowUniforms.shadowMapSize = shadow.mapSize;\n\n                    state.directionalShadow[directionalLength] = shadowUniforms;\n                    state.directionalShadowMap[directionalLength] = shadowMap;\n                    let shadowMatrix = light.shadow.matrix\n                    state.directionalShadowMatrix[directionalLength] = Matrix4.clone(shadowMatrix.elements || shadowMatrix, state.directionalShadowMatrix[directionalLength]);\n\n                    numDirectionalShadows++;\n\n                }\n\n                state.directional[directionalLength] = uniforms;\n\n                directionalLength++;\n\n            } else if (light.isSpotLight) {\n\n                var uniforms = cache.get(light);\n\n                Matrix4.getTranslation(light.modelMatrix, uniforms.position); //uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                Matrix4.multiplyByPoint(viewMatrix, uniforms.position, uniforms.position); //uniforms.position.applyMatrix4(viewMatrix);\n\n                Color.multiplyByScalar(color, intensity, uniforms.color);//uniforms.color.copy(color).multiplyScalar(intensity);\n                uniforms.distance = distance;\n\n                // uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                // vector3.setFromMatrixPosition(light.target.matrixWorld);\n                // uniforms.direction.sub(vector3);\n                // uniforms.direction.transformDirection(viewMatrix);\n\n                Matrix4.getTranslation(light.modelMatrix, uniforms.direction);// uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                Matrix4.getTranslation(light.target.modelMatrix, vector3); //vector3.setFromMatrixPosition(light.target.matrixWorld);\n                Cartesian3.subtract(uniforms.direction, vector3, uniforms.direction); //uniforms.direction.sub(vector3);\n\n                transformDirection(uniforms.direction, viewMatrix); //Cesium.Matrix4.multiplyByPoint(viewMatrix, uniforms.direction, uniforms.direction); //uniforms.direction.transformDirection(viewMatrix);\n\n                uniforms.coneCos = Math.cos(light.angle);\n                uniforms.penumbraCos = Math.cos(light.angle * (1 - light.penumbra));\n                uniforms.decay = light.decay;\n\n                uniforms.shadow = light.castShadow;\n\n                if (light.castShadow) {//未处理\n\n                    const shadow = light.shadow;\n\n                    const shadowUniforms = shadowCache.get(light);\n\n                    shadowUniforms.shadowBias = shadow.bias;\n                    shadowUniforms.shadowNormalBias = shadow.normalBias;\n                    shadowUniforms.shadowRadius = shadow.radius;\n                    shadowUniforms.shadowMapSize = shadow.mapSize;\n\n                    state.spotShadow[spotLength] = shadowUniforms;\n                    state.spotShadowMap[spotLength] = shadowMap;\n\n                    let shadowMatrix = light.shadow.matrix\n                    state.spotShadowMatrix[spotLength] = Matrix4.clone(shadowMatrix.elements || shadowMatrix, state.spotShadowMatrix[spotLength]);\n\n                    numSpotShadows++;\n                }\n\n                state.spot[spotLength] = uniforms;\n\n                spotLength++;\n\n            } else if (light.isRectAreaLight) {\n\n                var uniforms = cache.get(light);\n\n                // (a) intensity is the total visible light emitted\n                //uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n                // (b) intensity is the brightness of the light\n                Color.multiplyByScalar(color, intensity, uniforms.color);//uniforms.color.copy(color).multiplyScalar(intensity);\n\n                Matrix4.getTranslation(light.modelMatrix, uniforms.position);//uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                Matrix4.multiplyByPoint(viewMatrix, uniforms.position, uniforms.position);//uniforms.position.applyMatrix4(viewMatrix);\n\n                // extract local rotation of light to derive width/height half vectors\n                Matrix4.IDENTITY.clone(matrix42);  //matrix42.identity();\n                Matrix4.clone(light.modelMatrix, matrix4);//matrix4.copy(light.matrixWorld);\n                Matrix4.multiply(viewMatrix, matrix4, matrix4);//matrix4.premultiply(viewMatrix);\n                Matrix4.multiplyByMatrix3(matrix42, Matrix4.getMatrix3(matrix4, matrix3), matrix42); //matrix42.extractRotation(matrix4);  \n\n\n                Cartesian3.fromElements(light.width * 0.5, 0.0, 0.0, uniforms.halfWidth);//uniforms.halfWidth.set(light.width * 0.5, 0.0, 0.0);\n                Cartesian3.fromElements(0.0, light.height * 0.5, 0.0, uniforms.halfHeight);//uniforms.halfHeight.set(0.0, light.height * 0.5, 0.0);\n\n                Matrix4.multiplyByPoint(matrix42, uniforms.halfWidth, uniforms.halfWidth);//uniforms.halfWidth.applyMatrix4(matrix42);\n                Matrix4.multiplyByPoint(matrix42, uniforms.halfHeight, uniforms.halfHeight);//uniforms.halfHeight.applyMatrix4(matrix42);\n\n                // TODO (abelnation): RectAreaLight distance?\n                // uniforms.distance = distance;\n\n                state.rectArea[rectAreaLength] = uniforms;\n\n                rectAreaLength++;\n\n            } else if (light.isPointLight) {\n\n                var uniforms = cache.get(light);\n\n                Matrix4.getTranslation(light.modelMatrix, uniforms.position); //uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                Matrix4.multiplyByPoint(viewMatrix, uniforms.position, uniforms.position); //uniforms.position.applyMatrix4(viewMatrix);\n\n                // uniforms.position.setFromMatrixPosition(light.matrixWorld);\n                // uniforms.position.applyMatrix4(viewMatrix);\n\n                Color.multiplyByScalar(color, intensity, uniforms.color); //uniforms.color.copy(light.color).multiplyScalar(light.intensity);\n                uniforms.distance = light.distance;\n                uniforms.decay = light.decay;\n\n                uniforms.shadow = light.castShadow;\n                uniforms.visible = light._exVisible ? 1 : 0;\n\n                var extension = extensionState.point;\n                extension.positions[pointLength] = uniforms.position\n                extension.colors[pointLength] = uniforms.color\n                extension.decalDists[pointLength] = uniforms.decalDist\n                uniforms.decalDist.x = light.decay;\n                uniforms.decalDist.y = light.distance;\n                extension.visibles[pointLength] = uniforms.visible;\n\n                if (light.castShadow) {\n\n                    var shadow = light.shadow;\n\n                    const shadowUniforms = shadowCache.get(light);\n\n                    shadowUniforms.shadowBias = shadow.bias;\n                    shadowUniforms.shadowNormalBias = shadow.normalBias;\n                    shadowUniforms.shadowRadius = shadow.radius;\n                    shadowUniforms.shadowMapSize.copy(shadow.mapSize);\n                    shadowUniforms.shadowCameraNear = shadow.camera.near;\n                    shadowUniforms.shadowCameraFar = shadow.camera.far;\n\n                    state.pointShadow[pointLength] = shadowUniforms;\n                    state.pointShadowMap[pointLength] = shadowMap;\n\n                    let shadowMatrix = light.shadow.matrix\n                    state.pointShadowMatrix[pointLength] = Matrix4.clone(shadowMatrix.elements || shadowMatrix, state.pointShadowMatrix[pointLength]);\n\n                    numPointShadows++;\n\n                }\n\n                state.point[pointLength] = uniforms;\n\n                pointLength++;\n\n            } else if (light.isHemisphereLight) {\n\n                var uniforms = cache.get(light);\n\n                Matrix4.getTranslation(light.modelMatrix, uniforms.direction); //uniforms.direction.setFromMatrixPosition(light.matrixWorld);\n                transformDirection(uniforms.direction, viewMatrix);//uniforms.direction.transformDirection(viewMatrix);\n                Cartesian3.normalize(uniforms.direction, uniforms.direction);// uniforms.direction.normalize();\n\n                Color.multiplyByScalar(color, intensity, uniforms.skyColor);// uniforms.skyColor.copy(light.color).multiplyScalar(intensity);\n                Color.multiplyByScalar(light.groundColor, intensity, uniforms.groundColor);//uniforms.groundColor.copy(light.groundColor).multiplyScalar(intensity);\n\n                state.hemi[hemiLength] = uniforms;\n\n                hemiLength++;\n\n            }\n\n        }\n\n        state.ambient.red = r;\n        state.ambient.green = g;\n        state.ambient.blue = b;\n\n        var hash = state.hash;\n\n        if (hash.directionalLength !== directionalLength ||\n            hash.pointLength !== pointLength ||\n            hash.spotLength !== spotLength ||\n            hash.rectAreaLength !== rectAreaLength ||\n            hash.hemiLength !== hemiLength ||\n            hash.numDirectionalShadows !== numDirectionalShadows ||\n            hash.numPointShadows !== numPointShadows ||\n            hash.numSpotShadows !== numSpotShadows) {\n\n            state.directional.length = directionalLength;\n            state.spot.length = spotLength;\n            state.rectArea.length = rectAreaLength;\n            state.point.length = pointLength;\n            state.hemi.length = hemiLength;\n\n            state.directionalShadowMap.length = numDirectionalShadows;\n            state.pointShadowMap.length = numPointShadows;\n            state.spotShadowMap.length = numSpotShadows;\n            state.directionalShadowMatrix.length = numDirectionalShadows;\n            state.pointShadowMatrix.length = numPointShadows;\n            state.spotShadowMatrix.length = numSpotShadows;\n\n            hash.directionalLength = directionalLength;\n            hash.pointLength = pointLength;\n            hash.spotLength = spotLength;\n            hash.rectAreaLength = rectAreaLength;\n            hash.hemiLength = hemiLength;\n\n            hash.numDirectionalShadows = numDirectionalShadows;\n            hash.numPointShadows = numPointShadows;\n            hash.numSpotShadows = numSpotShadows;\n\n            state.version = nextVersion++;\n\n        }\n\n        updateMap(frameState, 1);\n        updateMap(frameState, 2);\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     */\n    function updateMap(frameState) {\n        var pointLights = extensionState.point;\n        /**\n         * @type {Cesium.Texture}\n         */\n        var map = pointLights['map'];\n        var array = pointLights['array'];\n        var num = state.hash.pointLength\n\n        if (!frameState || !num) return;\n\n        if (!map || pointLights.length != num) {\n            if (map && !map.isDestroyed) map.destroy();\n            pointLights.length = num;\n            var context = frameState.context;\n            var _Cesium = Cesium\n            map = new Texture({\n                context: context,\n                width: num * 2,\n                height: 6,\n                pixelDatatype: PixelDatatype.FLOAT,\n                pixelFormat: PixelFormat.RGBA,\n                sampler: new _Cesium.Sampler({\n                    wrapS: _Cesium.TextureWrap.CLAMP_TO_EDGE,\n                    wrapT: _Cesium.TextureWrap.CLAMP_TO_EDGE,\n                    magnificationFilter: _Cesium.TextureMagnificationFilter.LINEAR,\n                    minificationFilter: _Cesium.TextureMinificationFilter.LINEAR\n                })\n            });\n            pointLights['map'] = map;\n            array = new Float32Array(map.width * map.height * 4);\n            pointLights['array'] = array;\n        }\n\n        num *= 2;\n        for (let i = 0; i < num; i += 2) {\n            var pos = pointLights.positions[i / 2];\n            var decalDist = pointLights.decalDists[i / 2];\n            var color = pointLights.colors[i / 2];\n            var visible = pointLights.visibles[i / 2];\n            //position+decay\n            for (let j = 0; j < 2; j++) {\n                for (let k = 0; k < 2; k++) {\n                    var ptr = (num * j + i + k) * 4;\n                    array[ptr] = pos.x\n                    array[ptr + 1] = pos.y\n                    array[ptr + 2] = pos.z\n                    array[ptr + 3] = decalDist.x;\n                }\n            }\n            //color&distance\n            for (let j = 2; j < 4; j++) {\n                for (let k = 0; k < 2; k++) {\n                    var ptr = (num * j + i + k) * 4;\n                    array[ptr] = color.red\n                    array[ptr + 1] = color.green\n                    array[ptr + 2] = color.blue\n                    array[ptr + 3] = decalDist.y;\n                }\n            }\n            //visible\n            for (let j = 4; j < 6; j++) {\n                for (let k = 0; k < 2; k++) {\n                    var ptr = (num * j + i + k) * 4;\n                    array[ptr] = visible\n                    array[ptr + 1] = visible\n                    array[ptr + 2] = visible\n                    array[ptr + 3] = visible;\n                }\n            }\n        }\n\n        map.copyFrom({\n            width: map.width,\n            height: map.height,\n            arrayBufferView: array\n        })\n    }\n\n    this.setup = setup\n    this.state = state\n    this.uniforms = {\n        ambientLightColor: { value: state.ambient },\n        directionalLights: { value: state.directional },\n        spotLights: { value: state.spot },\n        rectAreaLights: { value: state.rectArea },\n        pointLights: { value: state.point },\n        hemisphereLights: { value: state.hemi },\n        directionalShadowMap: { value: state.directionalShadowMap },\n        directionalShadowMatrix: { value: state.directionalShadowMatrix },\n        spotShadowMap: { value: state.spotShadowMap },\n        spotShadowMatrix: { value: state.spotShadowMatrix },\n        pointShadowMap: { value: state.pointShadowMap },\n        pointShadowMatrix: { value: state.pointShadowMatrix },\n        lightProbe: { value: state.probe }\n\n    };\n\n    this.extensionState = extensionState\n\n}\n\nfunction UniformsCache() {\n\n    var lights = {};\n    const { Cartesian2, Cartesian3, Color } = Cesium;\n    return {\n\n        get: function (light) {\n\n            if (lights[light.id] !== undefined) {\n\n                return lights[light.id];\n\n            }\n\n            var uniforms;\n\n            switch (light.type) {\n\n                case 'DirectionalLight':\n                    uniforms = {\n                        direction: new Cartesian3(),\n                        color: new Color(),\n\n                        shadow: false,\n                        // shadowBias: 0,\n                        // shadowRadius: 1,\n                        // shadowMapSize: new Cesium.Cartesian2()\n                    };\n                    break;\n\n                case 'SpotLight':\n                    uniforms = {\n                        position: new Cartesian3(),\n                        direction: new Cartesian3(),\n                        color: new Color(),\n                        distance: 0,\n                        coneCos: 0,\n                        penumbraCos: 0,\n                        decay: 0,\n\n                        shadow: false,\n                        // shadowBias: 0,\n                        // shadowRadius: 1,\n                        // shadowMapSize: new Cesium.Cartesian2()\n                    };\n                    break;\n\n                case 'PointLight':\n                    uniforms = {\n                        position: new Cartesian3(),\n                        color: new Color(),\n                        distance: 0,\n                        decay: 0,\n\n                        shadow: false,\n                        // shadowBias: 0,\n                        // shadowRadius: 1,\n                        // shadowMapSize: new Cesium.Cartesian2(),\n                        // shadowCameraNear: 1,\n                        // shadowCameraFar: 1000\n\n                        //extension\n                        decalDist: new Cartesian2(),\n                        visible: 1\n                    };\n                    break;\n\n                case 'HemisphereLight':\n                    uniforms = {\n                        direction: new Cartesian3(),\n                        skyColor: new Color(),\n                        groundColor: new Color()\n                    };\n                    break;\n\n                case 'RectAreaLight':\n                    uniforms = {\n                        color: new Color(),\n                        position: new Cartesian3(),\n                        halfWidth: new Cartesian3(),\n                        halfHeight: new Cartesian3()\n                        // TODO (abelnation): set RectAreaLight shadow uniforms\n                    };\n                    break;\n\n            }\n\n            lights[light.id] = uniforms;\n\n            return uniforms;\n\n        }\n\n    };\n\n}\n\nfunction ShadowUniformsCache() {\n\n    const lights = {};\n\n    const { Cartesian3, Color, Cartesian2 } = Cesium;\n    return {\n\n        get: function (light) {\n\n            if (lights[light.id] !== undefined) {\n\n                return lights[light.id];\n\n            }\n\n            let uniforms;\n\n            switch (light.type) {\n\n                case 'DirectionalLight':\n                    uniforms = {\n                        shadowBias: 0,\n                        shadowNormalBias: 0,\n                        shadowRadius: 1,\n                        shadowMapSize: new Cartesian2()\n                    };\n                    break;\n\n                case 'SpotLight':\n                    uniforms = {\n                        shadowBias: 0,\n                        shadowNormalBias: 0,\n                        shadowRadius: 1,\n                        shadowMapSize: new Cartesian2()\n                    };\n                    break;\n\n                case 'PointLight':\n                    uniforms = {\n                        shadowBias: 0,\n                        shadowNormalBias: 0,\n                        shadowRadius: 1,\n                        shadowMapSize: new Cartesian2(),\n                        shadowCameraNear: 1,\n                        shadowCameraFar: 1000\n                    };\n                    break;\n\n                // TODO (abelnation): set RectAreaLight shadow uniforms\n\n            }\n\n            lights[light.id] = uniforms;\n\n            return uniforms;\n\n        }\n\n    };\n\n}\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst(lightA, lightB) {\n\n    return (lightB.castShadow ? 1 : 0) - (lightA.castShadow ? 1 : 0);\n\n}\n\nfunction transformDirection(p, m) {\n\n    // input: THREE.Matrix4 affine matrix\n    // vector interpreted as a direction\n\n    var x = p.x, y = p.y, z = p.z;\n    var e = m;\n\n    p.x = e[0] * x + e[4] * y + e[8] * z;\n    p.y = e[1] * x + e[5] * y + e[9] * z;\n    p.z = e[2] * x + e[6] * y + e[10] * z;\n\n    return Cesium.Cartesian3.normalize(p, p);\n\n}\n\nexport default WebGLLights;\n",
    "\n// import { BackSide } from '../../constants.js';\n\nfunction WebGLMaterials(properties) {\n\tif (typeof THREE == 'undefined') {\n\t\treturn {\n\t\t\trefreshFogUniforms: function () { },\n\t\t\trefreshMaterialUniforms: function () { }\n\t\t}\n\t}\n\n\tlet { BackSide } = THREE;\n\n\t//\n\t\n\tfunction refreshFogUniforms(uniforms, fog) {\n\n\t\tuniforms.fogColor.value.copy(fog.color);\n\n\t\tif (fog.isFog) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if (fog.isFogExp2) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms(uniforms, material, pixelRatio, height) {\n\n\t\tif (material.isMeshBasicMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\n\t\t} else if (material.isMeshLambertMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsLambert(uniforms, material);\n\n\t\t} else if (material.isMeshToonMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsToon(uniforms, material);\n\n\t\t} else if (material.isMeshPhongMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsPhong(uniforms, material);\n\n\t\t} else if (material.isMeshStandardMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\n\t\t\tif (material.isMeshPhysicalMaterial) {\n\n\t\t\t\trefreshUniformsPhysical(uniforms, material);\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard(uniforms, material);\n\n\t\t\t}\n\n\t\t} else if (material.isMeshMatcapMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsMatcap(uniforms, material);\n\n\t\t} else if (material.isMeshDepthMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsDepth(uniforms, material);\n\n\t\t} else if (material.isMeshDistanceMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsDistance(uniforms, material);\n\n\t\t} else if (material.isMeshNormalMaterial) {\n\n\t\t\trefreshUniformsCommon(uniforms, material);\n\t\t\trefreshUniformsNormal(uniforms, material);\n\n\t\t} else if (material.isLineBasicMaterial) {\n\n\t\t\trefreshUniformsLine(uniforms, material);\n\n\t\t\tif (material.isLineDashedMaterial) {\n\n\t\t\t\trefreshUniformsDash(uniforms, material);\n\n\t\t\t}\n\n\t\t} else if (material.isPointsMaterial) {\n\n\t\t\trefreshUniformsPoints(uniforms, material, pixelRatio, height);\n\n\t\t} else if (material.isSpriteMaterial) {\n\n\t\t\trefreshUniformsSprites(uniforms, material);\n\n\t\t} else if (material.isShadowMaterial) {\n\n\t\t\tuniforms.color.value.copy(material.color);\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if (material.isShaderMaterial) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon(uniforms, material) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif (material.color) {\n\n\t\t\tuniforms.diffuse.value.copy(material.color);\n\n\t\t}\n\n\t\tif (material.emissive) {\n\n\t\t\tuniforms.emissive.value.copy(material.emissive).multiplyScalar(material.emissiveIntensity);\n\n\t\t}\n\n\t\tif (material.map) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif (material.alphaMap) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif (material.specularMap) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = properties.get(material).envMap;\n\n\t\tif (envMap) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = (envMap.isCubeTexture && envMap._needsFlipEnvMap) ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n \n\t\t\tconst maxMipLevel = properties.get(envMap).__maxMipLevel;\n\n\t\t\tif (maxMipLevel !== undefined) {\n\n\t\t\t\tuniforms.maxMipLevel.value = maxMipLevel;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (material.lightMap) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif (material.aoMap) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. displacementMap map\n\t\t// 4. normal map\n\t\t// 5. bump map\n\t\t// 6. roughnessMap map\n\t\t// 7. metalnessMap map\n\t\t// 8. alphaMap map\n\t\t// 9. emissiveMap map\n\t\t// 10. clearcoat map\n\t\t// 11. clearcoat normal map\n\t\t// 12. clearcoat roughnessMap map\n\n\t\tlet uvScaleMap;\n\n\t\tif (material.map) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if (material.specularMap) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if (material.displacementMap) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if (material.normalMap) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if (material.bumpMap) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if (material.roughnessMap) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if (material.metalnessMap) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if (material.alphaMap) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if (material.emissiveMap) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t} else if (material.clearcoatMap) {\n\n\t\t\tuvScaleMap = material.clearcoatMap;\n\n\t\t} else if (material.clearcoatNormalMap) {\n\n\t\t\tuvScaleMap = material.clearcoatNormalMap;\n\n\t\t} else if (material.clearcoatRoughnessMap) {\n\n\t\t\tuvScaleMap = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif (uvScaleMap !== undefined) {\n\n\t\t\t// backwards compatibility\n\t\t\tif (uvScaleMap.isWebGLRenderTarget) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif (uvScaleMap.matrixAutoUpdate === true) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy(uvScaleMap.matrix);\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif (material.aoMap) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if (material.lightMap) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif (uv2ScaleMap !== undefined) {\n\n\t\t\t// backwards compatibility\n\t\t\tif (uv2ScaleMap.isWebGLRenderTarget) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif (uv2ScaleMap.matrixAutoUpdate === true) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy(uv2ScaleMap.matrix);\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine(uniforms, material) {\n\n\t\tuniforms.diffuse.value.copy(material.color);\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash(uniforms, material) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints(uniforms, material, pixelRatio, height) {\n\n\t\tuniforms.diffuse.value.copy(material.color);\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif (material.map) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif (material.alphaMap) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif (material.map) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if (material.alphaMap) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif (uvScaleMap !== undefined) {\n\n\t\t\tif (uvScaleMap.matrixAutoUpdate === true) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy(uvScaleMap.matrix);\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites(uniforms, material) {\n\n\t\tuniforms.diffuse.value.copy(material.color);\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif (material.map) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif (material.alphaMap) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif (material.map) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if (material.alphaMap) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif (uvScaleMap !== undefined) {\n\n\t\t\tif (uvScaleMap.matrixAutoUpdate === true) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy(uvScaleMap.matrix);\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert(uniforms, material) {\n\n\t\tif (material.emissiveMap) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong(uniforms, material) {\n\n\t\tuniforms.specular.value.copy(material.specular);\n\t\tuniforms.shininess.value = Math.max(material.shininess, 1e-4); // to prevent pow( 0.0, 0.0 )\n\n\t\tif (material.emissiveMap) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif (material.bumpMap) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif (material.side === BackSide) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif (material.normalMap) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy(material.normalScale);\n\t\t\tif (material.side === BackSide) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon(uniforms, material) {\n\n\t\tif (material.gradientMap) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif (material.emissiveMap) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif (material.bumpMap) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif (material.side === BackSide) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif (material.normalMap) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy(material.normalScale);\n\t\t\tif (material.side === BackSide) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard(uniforms, material) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif (material.roughnessMap) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif (material.metalnessMap) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif (material.emissiveMap) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif (material.bumpMap) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif (material.side === BackSide) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif (material.normalMap) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy(material.normalScale);\n\t\t\tif (material.side === BackSide) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tconst envMap = properties.get(material).envMap;\n\n\t\tif (envMap) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical(uniforms, material) {\n\n\t\trefreshUniformsStandard(uniforms, material);\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif (material.sheen) uniforms.sheen.value.copy(material.sheen);\n\n\t\tif (material.clearcoatMap) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif (material.clearcoatRoughnessMap) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif (material.clearcoatNormalMap) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy(material.clearcoatNormalScale);\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif (material.side === BackSide) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transmission.value = material.transmission;\n\n\t\tif (material.transmissionMap) {\n\n\t\t\tuniforms.transmissionMap.value = material.transmissionMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsMatcap(uniforms, material) {\n\n\t\tif (material.matcap) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif (material.bumpMap) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif (material.side === BackSide) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif (material.normalMap) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy(material.normalScale);\n\t\t\tif (material.side === BackSide) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth(uniforms, material) {\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance(uniforms, material) {\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy(material.referencePosition);\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal(uniforms, material) {\n\n\t\tif (material.bumpMap) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif (material.side === BackSide) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif (material.normalMap) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy(material.normalScale);\n\t\t\tif (material.side === BackSide) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif (material.displacementMap) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\nexport default WebGLMaterials ;\n",
    " \nimport WebGLGeometries from  \"./WebGLGeometries.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\n\nfunction numericalSort(a, b) {\n\n\treturn a[0] - b[0];\n\n}\n\nfunction absNumericalSort(a, b) {\n\n\treturn Math.abs(b[1]) - Math.abs(a[1]);\n\n}\n\n\n/**\n * \n * @param {WebGLRenderingContext} gl \n * @param {WebGLRenderer} renderer \n * @returns \n */\nfunction WebGLMorphtargets(gl,renderer) {\n\n\tconst cesiumVertextArrays=renderer._cesiumVertextArrays\n\tconst influencesList = {};\n\t// const morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor (let i = 0; i < 8; i++) {\n\n\t\tworkInfluences[i] = [i, 0];\n\n\t}\n\n\tfunction update(object, geometry, material, program) {\n\n\t\tgeometry = WebGLGeometries.get(geometry);\n\n\t\tlet uniforms = getUniforms(object);\n\t\tconst morphInfluences = uniforms.morphTargetInfluences;\n\n\t\tlet objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[geometry.id];\n\n\t\tif (influences === undefined) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor (let i = 0; i < length; i++) {\n\n\t\t\t\tinfluences[i] = [i, 0];\n\n\t\t\t}\n\n\t\t\tinfluencesList[geometry.id] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor (let i = 0; i < length; i++) {\n\n\t\t\tconst influence = influences[i];\n\n\t\t\tinfluence[0] = i;\n\t\t\tinfluence[1] = objectInfluences[i];\n\n\t\t}\n\n\t\tinfluences.sort(absNumericalSort);\n\n\t\tfor (let i = 0; i < 8; i++) {\n\n\t\t\tif (i < length && influences[i][1]) {\n\n\t\t\t\tworkInfluences[i][0] = influences[i][0];\n\t\t\t\tworkInfluences[i][1] = influences[i][1];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[i][0] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[i][1] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort(numericalSort);\n\n\t\tlet morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tlet morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor (let i = 0; i < 8; i++) {\n\n\t\t\tconst influence = workInfluences[i];\n\t\t\tconst index = influence[0];\n\t\t\tconst value = influence[1];\n\n\t\t\tif (index !== Number.MAX_SAFE_INTEGER && value) {\n\n\t\t\t\tif (morphTargets && geometry.getAttribute('morphTarget' + i) !== morphTargets[index]) {\n\t\t\t\t\tmorphTargets[index].id = index\n\n\t\t\t\t\tgeometry.setAttribute('morphTarget' + i, morphTargets[index]);\n\n\t\t\t\t}\n\n\t\t\t\tif (morphNormals && geometry.getAttribute('morphNormal' + i) !== morphNormals[index]) {\n\n\t\t\t\t\tgeometry.setAttribute('morphNormal' + i, morphNormals[index]);\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[i] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif (morphTargets && geometry.getAttribute('morphTarget' + i) !== undefined) {\n\n\t\t\t\t\tgeometry.deleteAttribute('morphTarget' + i);\n\n\t\t\t\t}\n\n\t\t\t\tif (morphNormals && geometry.getAttribute('morphNormal' + i) !== undefined) {\n\n\t\t\t\t\tgeometry.deleteAttribute('morphNormal' + i);\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[i] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tuniforms.morphTargetBaseInfluence = morphBaseInfluence;\n\t\tuniforms.morphTargetInfluences = morphInfluences;\n\n\t\tupdateMorphAttribute(uniforms, geometry);\n\n\t\t// program.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\t// program.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\t}\n\n\tvar uniformsCache = new WeakMap();\n\tvar objectCache = new WeakMap();\n\n\tfunction updateMorphAttribute(uniforms, geometry) {\n\t\tvar objects = objectCache.get(uniforms);\n\n\t\tvar attributes = geometry.attributes;\n\t\tfor (const name in attributes) {\n\t\t\tconst attribute = attributes[name];\n\t\t\tif (name.includes('morphTarget') || name.includes('morphNormal')) {\n\n\t\t\t\tobjects.forEach(object => {\n\t\t\t\t\tcesiumVertextArrays.updateVerexBuffer(object, name, attribute);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setObjectCache(uniforms, object) {\n\t\tvar objects = objectCache.get(uniforms);\n\t\tif (!objects) {\n\t\t\tobjects = [];\n\t\t\tobjectCache.set(uniforms, objects);\n\t\t}\n\t\tif (!objects.includes(object)) {\n\t\t\tobjects.push(object);\n\t\t\tobject.geometry.addEventListener('dispose', () => {\n\t\t\t\tvar id = objects.indexOf(object);\n\t\t\t\tif (id >= 0) {\n\t\t\t\t\tobjects.splice(id, 1)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t}\n\tfunction getUniforms(object) {\n\n\t\tvar uniforms = uniformsCache.get(object);\n\t\tif (!uniforms) {\n\t\t\tuniforms = {\n\t\t\t\tmorphTargetBaseInfluence: 1,\n\t\t\t\tmorphTargetInfluences: new Float32Array(8)\n\t\t\t}\n\t\t\tobject.geometry.addEventListener('dispose', () => {\n\t\t\t\tuniformsCache.delete(object);\n\t\t\t})\n\t\t\tuniformsCache.set(object, uniforms);\n\t\t\tsetObjectCache(uniforms, object)\n\t\t}\n\t\treturn uniforms;\n\t}\n\tfunction setUniforms(object, uniforms) {\n\t\tif (uniforms && object) {\n\t\t\tif (uniformsCache.get(object) == uniforms) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tobject.geometry.addEventListener('dispose', () => {\n\t\t\t\tuniformsCache.delete(object);\n\t\t\t})\n\t\t\tuniformsCache.set(object, uniforms);\n\t\t\tsetObjectCache(uniforms, object)\n\t\t}\n\t}\n\n\treturn {\n\t\tsetUniforms: setUniforms,\n\t\tgetUniforms: getUniforms,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport default WebGLMorphtargets;\n",
    "\n// import lights_fragment_begin from './Shaders/lights_fragment_begin.glsl.js';\n// import lights_pars_begin from './Shaders/lights_pars_begin.glsl.js';\n\nlet ShaderChunk3js, NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, VSMShadowMap, ACESFilmicToneMapping, CineonToneMapping, CustomToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, LogLuvEncoding,GLSL3;\n\nlet programIdCount = 0;\n\nvar initDeps$WebGLProgramDone = false;\nfunction initDeps$WebGLProgram(params) {\n\tif (initDeps$WebGLProgramDone) return;\n\tinitDeps$WebGLProgramDone = true;\n\n\tconst _THREE = THREE;\n\tShaderChunk3js = _THREE.ShaderChunk,\n\t\tNoToneMapping = _THREE.NoToneMapping,\n\t\tAddOperation = _THREE.AddOperation,\n\t\tMixOperation = _THREE.MixOperation,\n\t\tMultiplyOperation = _THREE.MultiplyOperation,\n\t\tEquirectangularRefractionMapping = _THREE.EquirectangularRefractionMapping,\n\t\tCubeRefractionMapping = _THREE.CubeRefractionMapping,\n\t\tEquirectangularReflectionMapping = _THREE.EquirectangularReflectionMapping,\n\t\tCubeUVRefractionMapping = _THREE.CubeUVRefractionMapping,\n\t\tCubeUVReflectionMapping = _THREE.CubeUVReflectionMapping,\n\t\tCubeReflectionMapping = _THREE.CubeReflectionMapping,\n\t\tPCFSoftShadowMap = _THREE.PCFSoftShadowMap,\n\t\tPCFShadowMap = _THREE.PCFShadowMap,\n\t\tVSMShadowMap = _THREE.VSMShadowMap,\n\t\tACESFilmicToneMapping = _THREE.ACESFilmicToneMapping,\n\t\tCineonToneMapping = _THREE.CineonToneMapping,\n\t\tCustomToneMapping = _THREE.CustomToneMapping,\n\t\tReinhardToneMapping = _THREE.ReinhardToneMapping,\n\t\tLinearToneMapping = _THREE.LinearToneMapping,\n\t\tGammaEncoding = _THREE.GammaEncoding,\n\t\tRGBDEncoding = _THREE.RGBDEncoding,\n\t\tRGBM16Encoding = _THREE.RGBM16Encoding,\n\t\tRGBM7Encoding = _THREE.RGBM7Encoding,\n\t\tRGBEEncoding = _THREE.RGBEEncoding,\n\t\tsRGBEncoding = _THREE.sRGBEncoding,\n\t\tLinearEncoding = _THREE.LinearEncoding,\n\t\tLogLuvEncoding = _THREE.LogLuvEncoding,\n\t\tGLSL3=THREE.GLSL3;\n\n}\n\n//three\n\nfunction getEncodingComponents(encoding) {\n\n\tswitch (encoding) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn ['Linear', '( value )'];\n\t\tcase sRGBEncoding:\n\t\t\treturn ['sRGB', '( value )'];\n\t\tcase RGBEEncoding:\n\t\t\treturn ['RGBE', '( value )'];\n\t\tcase RGBM7Encoding:\n\t\t\treturn ['RGBM', '( value, 7.0 )'];\n\t\tcase RGBM16Encoding:\n\t\t\treturn ['RGBM', '( value, 16.0 )'];\n\t\tcase RGBDEncoding:\n\t\t\treturn ['RGBD', '( value, 256.0 )'];\n\t\tcase GammaEncoding:\n\t\t\treturn ['Gamma', '( value, float( GAMMA_FACTOR ) )'];\n\t\tcase LogLuvEncoding:\n\t\t\treturn ['LogLuv', '( value )'];\n\t\tdefault:\n\t\t\tconsole.warn('Mesh3D.WebGLProgram: Unsupported encoding:', encoding);\n\t\t\treturn ['Linear', '( value )'];\n\n\t}\n\n}\n\n\nfunction getTexelDecodingFunction(functionName, encoding) {\n\n\tconst components = getEncodingComponents(encoding);\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[0] + 'ToLinear' + components[1] + '; }';\n\n}\n\nfunction getTexelEncodingFunction(functionName, encoding) {\n\n\tconst components = getEncodingComponents(encoding);\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[0] + components[1] + '; }';\n\n}\n\nfunction getToneMappingFunction(functionName, toneMapping) {\n\n\tlet toneMappingName;\n\n\tswitch (toneMapping) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn('Mesh3D.WebGLProgram: Unsupported toneMapping:', toneMapping);\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions(parameters) {\n\n\tconst chunks = [\n\t\t(parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical') ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t(parameters.extensionFragDepth || parameters.logarithmicDepthBuffer) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t(parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t(parameters.extensionShaderTextureLOD || parameters.envMap) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter(filterEmptyLine).join('\\n');\n\n}\n\nfunction generateDefines(defines) {\n\n\tconst chunks = [];\n\n\tfor (const name in defines) {\n\n\t\tconst value = defines[name];\n\n\t\tif (value === false) continue;\n\n\t\tchunks.push('#define ' + name + ' ' + value);\n\n\t}\n\n\treturn chunks.join('\\n');\n\n}\n\n\nfunction filterEmptyLine(string) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums(string, parameters) {\n\n\treturn string\n\t\t.replace(/NUM_DIR_LIGHTS/g, parameters.numDirLights)\n\t\t.replace(/NUM_SPOT_LIGHTS/g, parameters.numSpotLights)\n\t\t.replace(/NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights)\n\t\t.replace(/NUM_POINT_LIGHTS/g, parameters.numPointLights)\n\t\t.replace(/NUM_HEMI_LIGHTS/g, parameters.numHemiLights)\n\t\t.replace(/NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows)\n\t\t.replace(/NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows)\n\t\t.replace(/NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows);\n\n}\n\nfunction replaceClippingPlaneNums(string, parameters) {\n\n\treturn string\n\t\t.replace(/NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes)\n\t\t.replace(/UNION_CLIPPING_PLANES/g, (parameters.numClippingPlanes - parameters.numClipIntersection));\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes(string) { \n\t\n\treturn string.replace(includePattern, includeReplacer);\n \n}\n\nfunction includeReplacer(match, include) {\n\n\tvar string;\n\t// if (include == 'lights_fragment_begin') {\n\t// \tstring = lights_fragment_begin;\n\t// }\n\t// else if (include == 'lights_pars_begin') string = lights_pars_begin;\n\t// else\n\tstring = ShaderChunk3js[include];\n\n\tif (string === undefined) {\n\n\t\tthrow new Error('Can not resolve #include <' + include + '>');\n\n\t}\n\n\treturn resolveIncludes(string);\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start\\s+for\\s*\\(\\s*int\\s+i\\s*=\\s*(\\d+)\\s*;\\s*i\\s*<\\s*(\\d+)\\s*;\\s*i\\s*\\+\\+\\s*\\)\\s*{([\\s\\S]+?)}\\s+#pragma unroll_loop_end/g;\n\nfunction unrollLoops(string) {\n\n\treturn string\n\t\t.replace(unrollLoopPattern, loopReplacer)\n\t\t.replace(deprecatedUnrollLoopPattern, deprecatedLoopReplacer);\n\n}\n\nfunction deprecatedLoopReplacer(match, start, end, snippet) {\n\n\tconsole.warn('Mesh3D.WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.');\n\treturn loopReplacer(match, start, end, snippet);\n\n}\n\nfunction loopReplacer(match, start, end, snippet) {\n\n\tlet string = '';\n\n\tfor (let i = parseInt(start); i < parseInt(end); i++) {\n\n\t\tstring += snippet\n\t\t\t.replace(/\\[\\s*i\\s*\\]/g, '[ ' + i + ' ]')\n\t\t\t.replace(/UNROLLED_LOOP_INDEX/g, i)\n\t\t\t.replace(/\\(\\s*i\\s*\\)/g, ' ' + i + ' ');\n\n\t}\n\n\treturn string;\n\n}\n\nexport {unrollLoops};\n//\n\nfunction generatePrecision(parameters) {\n\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif (parameters.precision === \"highp\") {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if (parameters.precision === \"mediump\") {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if (parameters.precision === \"lowp\") {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine(parameters) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif (parameters.shadowMapType === PCFShadowMap) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if (parameters.shadowMapType === PCFSoftShadowMap) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if (parameters.shadowMapType === VSMShadowMap) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine(parameters) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif (parameters.envMap) {\n\n\t\tswitch (parameters.envMapMode) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine(parameters) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif (parameters.envMap) {\n\n\t\tswitch (parameters.envMapMode) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine(parameters) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif (parameters.envMap) {\n\n\t\tswitch (parameters.combine) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram(renderer, cacheKey, parameters) {\n\tinitDeps$WebGLProgram();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine(parameters);\n\tconst envMapTypeDefine = generateEnvMapTypeDefine(parameters);\n\tconst envMapModeDefine = generateEnvMapModeDefine(parameters);\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine(parameters);\n\n\n\tconst gammaFactorDefine = (renderer.gammaFactor > 0) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions(parameters);\n\n\tconst customDefines = generateDefines(defines);\n\n\n\tlet prefixVertex, prefixFragment;\n\tlet versionString = parameters.glslVersion ? '#version ' + parameters.glslVersion + \"\\n\" : '';\n\n\tif (parameters.isRawShaderMaterial) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter(filterEmptyLine).join('\\n');\n\n\t\tif (prefixVertex.length > 0) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter(filterEmptyLine).join('\\n');\n\n\t\tif (prefixFragment.length > 0) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision(parameters),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.instancingColor ? '#define USE_INSTANCING_COLOR' : '',\n\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t(parameters.useFog && parameters.fog) ? '#define USE_FOG' : '',\n\t\t\t(parameters.useFog && parameters.fogExp2) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t(parameters.normalMap && parameters.objectSpaceNormalMap) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t(parameters.normalMap && parameters.tangentSpaceNormalMap) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t(parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t'\tattribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_INSTANCING_COLOR',\n\n\t\t\t'\tattribute vec3 instanceColor;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter(filterEmptyLine).join('\\n');\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision(parameters),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + (parameters.alphaTest % 1 ? '' : '.0') : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t(parameters.useFog && parameters.fog) ? '#define USE_FOG' : '',\n\t\t\t(parameters.useFog && parameters.fogExp2) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t(parameters.normalMap && parameters.objectSpaceNormalMap) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t(parameters.normalMap && parameters.tangentSpaceNormalMap) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\t\t\tparameters.transmissionMap ? '#define USE_TRANSMISSIONMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors || parameters.instancingColor ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t(parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t((parameters.extensionShaderTextureLOD || parameters.envMap) && parameters.rendererExtensionShaderTextureLod) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t(parameters.toneMapping !== NoToneMapping) ? '#define TONE_MAPPING' : '',\n\t\t\t(parameters.toneMapping !== NoToneMapping) ? ShaderChunk3js['tonemapping_pars_fragment'] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t(parameters.toneMapping !== NoToneMapping) ? getToneMappingFunction('toneMapping', parameters.toneMapping) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk3js['encodings_pars_fragment'], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction('mapTexelToLinear', parameters.mapEncoding) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction('matcapTexelToLinear', parameters.matcapEncoding) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction('envMapTexelToLinear', parameters.envMapEncoding) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction('emissiveMapTexelToLinear', parameters.emissiveMapEncoding) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction('lightMapTexelToLinear', parameters.lightMapEncoding) : '',\n\t\t\tgetTexelEncodingFunction('linearToOutputTexel', parameters.outputEncoding),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter(filterEmptyLine).join('\\n');\n\n\t}\n\n\tvertexShader = resolveIncludes(vertexShader);\n\tvertexShader = replaceLightNums(vertexShader, parameters);\n\tvertexShader = replaceClippingPlaneNums(vertexShader, parameters);\n\n\tfragmentShader = resolveIncludes(fragmentShader);\n\tfragmentShader = replaceLightNums(fragmentShader, parameters);\n\tfragmentShader = replaceClippingPlaneNums(fragmentShader, parameters);\n\n\tvertexShader = unrollLoops(vertexShader);\n\tfragmentShader = unrollLoops(fragmentShader);\n\n\tif (parameters.isWebGL2 && parameters.isRawShaderMaterial !== true) {\n\n\t\t// GLSL 3.0 conversion for built-in materials and ShaderMaterial\n\n\t\tversionString = '#version 300 es\\n';\n\n\t\tprefixVertex = [\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join('\\n') + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#define varying in',\n\t\t\t(parameters.glslVersion === GLSL3) ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\t(parameters.glslVersion === GLSL3) ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join('\\n') + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = versionString + prefixVertex + vertexShader;\n\tconst fragmentGlsl = versionString + prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\n\tthis.vertexShader = vertexGlsl;\n\tthis.fragmentShader = fragmentGlsl;\n\n\treturn this;\n\n}\n\nexport default WebGLProgram;\n",
    "import WebGLProgram from  \"./WebGLProgram.js\";\n\n\nfunction WebGLPrograms(renderer, cubemaps, extensions, capabilities, clipping) {\n\n\tlet { ShaderLib, UniformsUtils, BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, LinearEncoding, ObjectSpaceNormalMap, TangentSpaceNormalMap, NoToneMapping } = THREE;\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\", \"instancingColor\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\", \"transmissionMap\"\n\t];\n\n\tfunction getMaxBones(object) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif (floatVertexTextures) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor((nVertexUniforms - 20) / 4);\n\n\t\t\tconst maxBones = Math.min(nVertexMatrices, bones.length);\n\n\t\t\tif (maxBones < bones.length) {\n\n\t\t\t\tconsole.warn('Mesh3D.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.');\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap(map) {\n\n\t\tlet encoding;\n\n\t\tif (!map) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if (map.isTexture) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if (map.isWebGLRenderTarget) {\n\n\t\t\tconsole.warn(\"Mesh3D.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\");\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters(material, lights, shadows, scene, object) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t// const environment = material.envMap == null ? scene.environment : null;//MeshVisualizer\n\t\tconst envMap = cubemaps.get(material.envMap || environment);\n\n\t\tconst shaderID = shaderIDs[material.type];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? getMaxBones(object) : 0;\n\n\t\tif (material.precision !== null) {\n\n\t\t\tprecision = capabilities.getMaxPrecision(material.precision);\n\n\t\t\tif (precision !== material.precision) {\n\n\t\t\t\tconsole.warn('Mesh3D.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.');\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet vertexShader, fragmentShader;\n\n\t\tif (shaderID) {\n\n\t\t\tconst shader = ShaderLib[shaderID];\n\n\t\t\tvertexShader = shader.vertexShader;\n\t\t\tfragmentShader = shader.fragmentShader;\n\n\t\t} else {\n\n\t\t\tvertexShader = material.vertexShader;\n\t\t\tfragmentShader = material.fragmentShader;\n\n\t\t}\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: material.type,\n\n\t\t\tvertexShader: vertexShader,\n\t\t\tfragmentShader: fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial === true,\n\t\t\tglslVersion: material.glslVersion,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\t\t\tinstancingColor: object.isInstancedMesh === true && object.instanceColor !== null,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: (currentRenderTarget !== null) ? getTextureEncodingFromMap(currentRenderTarget.texture) : renderer.outputEncoding,\n\t\t\tmap: !!material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap(material.map),\n\t\t\tmatcap: !!material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap(material.matcap),\n\t\t\tenvMap: !!envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap(envMap),\n\t\t\tenvMapCubeUV: (!!envMap) && ((envMap.mapping === CubeUVReflectionMapping) || (envMap.mapping === CubeUVRefractionMapping)),\n\t\t\tlightMap: !!material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap(material.lightMap),\n\t\t\taoMap: !!material.aoMap,\n\t\t\temissiveMap: !!material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap(material.emissiveMap),\n\t\t\tbumpMap: !!material.bumpMap,\n\t\t\tnormalMap: !!material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !!material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !!material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !!material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !!material.displacementMap,\n\t\t\troughnessMap: !!material.roughnessMap,\n\t\t\tmetalnessMap: !!material.metalnessMap,\n\t\t\tspecularMap: !!material.specularMap,\n\t\t\talphaMap: !!material.alphaMap,\n\n\t\t\tgradientMap: !!material.gradientMap,\n\n\t\t\tsheen: !!material.sheen,\n\n\t\t\ttransmissionMap: !!material.transmissionMap,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: (material.normalMap && material.vertexTangents),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !!material.map || !!material.bumpMap || !!material.normalMap || !!material.specularMap || !!material.alphaMap || !!material.emissiveMap || !!material.roughnessMap || !!material.metalnessMap || !!material.clearcoatMap || !!material.clearcoatRoughnessMap || !!material.clearcoatNormalMap || !!material.displacementMap || !!material.transmissionMap,\n\t\t\tuvsVertexOnly: !(!!material.map || !!material.bumpMap || !!material.normalMap || !!material.specularMap || !!material.alphaMap || !!material.emissiveMap || !!material.roughnessMap || !!material.metalnessMap || !!material.clearcoatNormalMap || !!material.transmissionMap) && !!material.displacementMap,\n\n\t\t\tfog: !!fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: (fog && fog.isFogExp2),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: (material.skinning || object.isSkinnedMesh) && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: clipping.numPlanes,\n\t\t\tnumClipIntersection: clipping.numIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: (material.depthPacking !== undefined) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.has('EXT_frag_depth'),\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.has('WEBGL_draw_buffers'),\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.has('EXT_shader_texture_lod'),\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey(parameters) {\n\n\t\tconst array = [];\n\n\t\tif (parameters.shaderID) {\n\n\t\t\tarray.push(parameters.shaderID);\n\n\t\t} else {\n\n\t\t\tarray.push(parameters.fragmentShader);\n\t\t\tarray.push(parameters.vertexShader);\n\n\t\t}\n\n\t\tif (parameters.defines !== undefined) {\n\n\t\t\tfor (const name in parameters.defines) {\n\n\t\t\t\tarray.push(name);\n\t\t\t\tarray.push(parameters.defines[name]);\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (parameters.isRawShaderMaterial === false) {\n\n\t\t\tfor (let i = 0; i < parameterNames.length; i++) {\n\n\t\t\t\tarray.push(parameters[parameterNames[i]]);\n\n\t\t\t}\n\n\t\t\tarray.push(renderer.outputEncoding);\n\t\t\tarray.push(renderer.gammaFactor);\n\n\t\t}\n\n\t\tarray.push(parameters.customProgramCacheKey);\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction getUniforms(material) {\n\n\t\tconst shaderID = shaderIDs[material.type];\n\t\tlet uniforms;\n\n\t\tif (shaderID) {\n\n\t\t\tconst shader = ShaderLib[shaderID];\n\t\t\tuniforms = UniformsUtils.clone(shader.uniforms);\n\n\t\t} else {\n\n\t\t\tuniforms = material.uniforms;\n\n\t\t}\n\n\t\treturn uniforms;\n\n\t}\n\n\tfunction acquireProgram(parameters, cacheKey) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\t// for ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t// \tconst preexistingProgram = programs[ p ];\n\n\t\t// \tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t// \t\tprogram = preexistingProgram;\n\t\t// \t\t++ program.usedTimes;\n\n\t\t// \t\tbreak;\n\n\t\t// \t}\n\n\t\t// }\n\n\t\t// if ( program === undefined ) {\n\n\t\tprogram = new WebGLProgram(renderer, cacheKey, parameters)//, bindingStates );\n\t\t// \tprograms.push( program );\n\n\t\t// }\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram(program) {\n\n\t\tif (--program.usedTimes === 0) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf(program);\n\t\t\tprograms[i] = programs[programs.length - 1];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\t// program.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tgetUniforms: getUniforms,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\nexport default WebGLPrograms;\n",
    "function WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get(object, initObject) {\n\n\t\t// return object;\n\n\t\tlet map = properties.get(object);\n\n\t\tif (map === undefined) {\n\n\t\t\tmap = initObject || {};\n\t\t\tproperties.set(object, map);\n\n\t\t\tfunction onMaterialDispose() {\n\t\t\t\tproperties.delete(object);\n\t\t\t\tobject.removeEventListener('dispose', onMaterialDispose)\n\t\t\t}\n\t\t\tobject.addEventListener('dispose', onMaterialDispose)\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove(object) {\n\n\t\tproperties.delete(object);\n\n\t}\n\n\tfunction update(object, key, value) {\n\n\t\tproperties.get(object)[key] = value;\n\n\t}\n\n\tthis.properties = properties\n\tthis.get = get\n\tthis.remove = remove\n\tthis.update = update\n\tthis.dispose = function () {\n\t\tproperties = new WeakMap();\n\t\tthis.properties = properties\n\t}\n\n}\n\n\nexport default WebGLProperties;\n",
    "\nimport MeshVisualizer from  \"../MeshVisualizer.js\";\n\n\nfunction findGroupOrder(object) {\n    if (object.isGroup) {\n        return object.renderOrder;\n    } else if (!object.parent) {\n        return object.renderOrder;\n    }\n    return findGroupOrder(object.parent);\n}\n\n/**\n * \n * @param {Cesium.DrawCommand} drawCommand \n * @param {THREE.Material} material \n * @param {number} materialIndex \n * @param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite} object\n * @param {THREE.BufferGeometry} geometry \n * @param {MeshVisualizer}visualizer\n * @param {number} [groupIndex]\n */\nfunction WebGLRenderItem(drawCommand, material, materialIndex, object, geometry, visualizer, groupIndex) {\n    const { destroyObject, BoundingSphere, DrawCommand, RenderState } = Cesium;\n\n    drawCommand.derivedProperties = {};\n\n    this.id = object ? object.id : 0;\n    this.drawCommand = drawCommand;\n\n    this.material = material || null;\n    this.geometry = geometry;\n    this.materialIndex = materialIndex;\n    this.groupIndex = groupIndex;\n    this.object = object || null;\n    this.groupOrder = object ? findGroupOrder(object) || 0 : 0;\n    this.renderOrder = object ? object.renderOrder || 0 : 0;\n\n    this.visualizer = visualizer;\n    this.currentScene = null;\n    this.currentCamera = null;\n\n    //runtime state\n\n    this.boundingSphere = new BoundingSphere();//local\n    this.boundingVolume = new BoundingSphere();//world\n\n    this.materialVersion = -1;\n    this.renderVersion = -1;\n    this.programCacheKey = null;\n    this.wireframeIndices = null;\n    this.frustumCulled = true;\n    this.z = -1;\n    this.distanceToCamera = -1;\n    this.visible = undefined;\n    this.loaded = false;\n    this.initialized = false;\n\n\n    function destroyDrawCommand(drawCommand, cesiumRenderStateCache) {\n\n        var va = drawCommand.vertexArray, sp = drawCommand.shaderProgram;\n        if (!va.isDestroyed()) va.destroy();\n        if (!sp.isDestroyed || !sp.isDestroyed()) {\n            sp.destroy();\n        }\n        drawCommand.isDestroyed = function returnTrue() {\n            return true\n        };\n        drawCommand.uniformMap = undefined;\n        drawCommand.renderState = RenderState.removeFromCache(drawCommand.renderState)\n        //\n\n        var derivedCommands = drawCommand.derivedCommands;\n        if (!derivedCommands) {\n            return cesiumRenderStateCache.delete(drawCommand);\n        }\n        for (const key in derivedCommands) {\n            if (derivedCommands.hasOwnProperty(key)) {\n                var derivedCommand = derivedCommands[key];\n                derivedCommand = derivedCommand.drawCommand || derivedCommand;\n                if (!derivedCommand.isDestroyed && derivedCommand instanceof DrawCommand) {\n                    derivedCommand.uniformMap = undefined;\n                    destroyDrawCommand(derivedCommand, cesiumRenderStateCache)\n                }\n                derivedCommands[key] = undefined;\n            }\n        }\n\n        cesiumRenderStateCache.delete(drawCommand);\n\n    }\n\n    this.destroy = function () {\n\n        const renderer = visualizer.renderer;\n        renderer._cesiumRenderStateCache.delete(drawCommand);\n        destroyDrawCommand(drawCommand, renderer._cesiumRenderStateCache)\n\n        destroyObject(drawCommand);\n        for (const key in this) {\n            this[key] = null;\n        }\n    }\n}\n\nObject.defineProperties(WebGLRenderItem.prototype, {\n    pass: {\n        get() {\n            return this.drawCommand._v_pass\n        }\n    },\n    renderPass: {\n        get() {\n            return this.drawCommand.pass;\n        }\n    },\n    modelMatrix: {\n        get() {\n            return this.drawCommand.modelMatrix\n        }\n    }\n})\n\nWebGLRenderItem.prototype.update = function (object, drawCommand, geometry, modelMatrixNeedsUpdate) {\n\n    const _Cesium = Cesium;\n    const renderItem = this;\n    const boundingVolume = renderItem.boundingVolume;\n    const { isInstancedMesh, frustumCulled, modelMatrix } = object;\n\n    //instanceCount\n    if (isInstancedMesh) {\n        drawCommand.instanceCount = object.count;\n    } else if (isFinite(geometry.instanceCount)) {\n        drawCommand.instanceCount = geometry.instanceCount;\n    }\n\n    if (drawCommand.instanceCount) {\n        renderItem.frustumCulled = false;\n    } else {\n        renderItem.frustumCulled = frustumCulled;\n    }\n\n    if (object.isCustomInstancedMesh) {\n\n        drawCommand.instanceCount = object._availableInstances.length;\n\n        if (frustumCulled) _Cesium.BoundingSphere.clone(object._boundingSphere, boundingVolume);\n\n    }\n    else if (modelMatrixNeedsUpdate || object.modelMatrixNeedsUpdate || !renderItem.initialized) {\n\n        const boundingSphere = this.boundingSphere;\n        const Matrix4 = _Cesium.Matrix4;\n\n        Matrix4.multiplyByPoint(modelMatrix, boundingSphere.center, boundingVolume.center);\n        boundingVolume.radius = boundingSphere.radius * Matrix4.getMaximumScale(modelMatrix)\n\n        renderItem.initialized = true;\n\n    }\n\n    drawCommand.boundingVolume = frustumCulled ? boundingVolume : undefined;\n    drawCommand.modelMatrix = modelMatrix;\n\n}\n\nexport default WebGLRenderItem;",
    "import GeometryUtils from  \"../GeometryUtils.js\";\n\nimport WebGLGeometries from  \"./WebGLGeometries.js\";\n\nimport WebGLProperties from  \"./WebGLProperties.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\nimport WebGLRenderItem from  \"./WebGLRenderItem.js\";\n\nimport WebGLRenderState from  \"./WebGLRenderState.js\";\n\nconst { computeBoundingSphereAndIndices } = GeometryUtils;\n\nfunction MaterialProperties() {\n    this.fog = null;\n    this.environment = null\n    this.lightsStateVersion = 0;\n    this.numClippingPlanes = 0\n    this.numIntersection = 0\n    this.clippingUniform = { value: [] }\n    this.clippingState = []\n    this.outputEncoding = -1;\n    this.envMap = null;\n    this.version = 0;\n    this.renderVersion = 0;\n    this.wireframe = false;\n}\n\n/**\n * \n * @param {WebGLRenderer} renderer \n */\nfunction WebGLRenderItems(renderer) {\n\n    const { DrawCommand, Cartesian4 } = Cesium;\n\n    const visualizer = renderer._visualizer;\n    const uniforms = renderer._uniforms;\n    const properties = renderer._properties;\n    const cubemaps = renderer._cubemaps;\n    const cesiumRenderStates = renderer._cesiumRenderStates;\n    const cesiumCommands = renderer._cesiumCommands;\n    const cesiumShaderPrograms = renderer._cesiumShaderPrograms\n    const cesiumVertextArrays = renderer._cesiumVertextArrays\n\n    var objectDrawAttributes = new WebGLProperties();\n    var renderItemsCache = new WeakMap();\n    var materialsUsed = new WeakMap();\n\n    //\n    var changingState = {\n        frameNumber: -1,\n        changingCount: 0,\n        maxChangingCount: visualizer.maxChangingCount\n    }\n\n    Object.defineProperties(this, {\n        changingState: {\n            get() {\n                return changingState;\n            }\n        },\n        objectDrawAttributes: {\n            get() {\n                return objectDrawAttributes;\n            }\n        },\n        renderItemsCache: {\n            get() {\n                return renderItemsCache;\n            }\n        },\n        materialsUsed: {\n            get() {\n                return materialsUsed;\n            }\n        }\n    })\n\n    //\n\n    function dispose() {\n\n        objectDrawAttributes = new WebGLProperties();\n        renderItemsCache = new WeakMap();\n        materialsUsed = new WeakMap();\n    }\n\n    /**\n     * \n     * @param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite} object \n     * @param {THREE.Material} objectMaterial \n     * @param {WebGLRenderItem[]} renderItems \n     */\n    function set(object, objectMaterial, renderItems) {\n\n        var commandsSet = renderItemsCache.get(object);\n        var materialSet = materialsUsed.get(object);\n        if (!commandsSet) {\n            commandsSet = new WeakMap();\n            materialSet = [];\n            renderItemsCache.set(object, commandsSet);\n            materialsUsed.set(object, materialSet);\n        }\n\n        commandsSet.useTimes = commandsSet.useTimes || 0;\n\n        function onObjectMaterialDispose() {\n\n            commandsSet.delete(objectMaterial);\n            commandsSet.useTimes--;\n            if (commandsSet.useTimes == 0) {\n                renderItemsCache.delete(object);\n                materialsUsed.delete(object);\n            }\n        }\n\n        renderItems.forEach(function (renderItem) {\n            const material = renderItem.material;\n\n            function onSubMaterialDispose() {\n\n                renderItem.destroy();\n\n                var itemIndex = renderItems.indexOf(renderItem)\n                if (itemIndex >= 0) renderItems.splice(itemIndex, 1);\n\n                if (renderItems.length == 0) onObjectMaterialDispose();\n\n                material.removeEventListener('dispose', onSubMaterialDispose);\n            }\n            material.addEventListener('dispose', onSubMaterialDispose);\n        })\n\n        commandsSet.useTimes++;\n\n        commandsSet.set(objectMaterial, renderItems);\n        materialSet.push(objectMaterial);\n    }\n\n    function updateSkinningAndMorphTargets(object, geometry, material, frameState) {\n        //skinning\n        const objectProperties = properties.get(object);\n        if (object.isSkinnedMesh && objectProperties.skinningFrameNumber != frameState.frameNumber) {\n            objectProperties.skinningFrameNumber = frameState.frameNumber;\n            const skeleton = object.skeleton;\n            skeleton.update();\n            if (skeleton.boneTextureCesium) {\n                skeleton.boneTextureCesium.needsUpdate = true;\n            }\n        }\n        //morph\n        if (object.material.morphTargets || object.material.morphNormals) {\n            if (objectProperties.morphtargetFrameNumber != frameState.frameNumber) {//避免同一帧反复计算morph参数\n                objectProperties.morphtargetFrameNumber = frameState.frameNumber;\n                renderer.morphtargets.update(object, geometry, material);\n            }\n        }\n    }\n\n    //\n\n    function materialNeedsLights(material) {\n\n        return material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n            material.isMeshStandardMaterial || material.isShadowMaterial ||\n            (material.isShaderMaterial && material.lights === true);\n\n    }\n\n    function initMaterial(material, wireframe, lights, shadows, firstTime) {\n\n        const clipping = renderer._clipping;\n        const currentRenderTarget = renderer.getRenderTarget();\n        const fog = visualizer.fog;\n        const environment = material.isMeshStandardMaterial ? visualizer.environment : null;\n        const encoding = (currentRenderTarget === null) ? renderer.outputEncoding : currentRenderTarget.texture.encoding;\n        const envMap = cubemaps.get(material.envMap || environment);\n\n        //initMaterial\n        var materialProperties = properties.get(material, firstTime ? new MaterialProperties() : undefined);\n\n        materialProperties.needsLights = materialNeedsLights(material);\n        materialProperties.fog = fog;\n        materialProperties.environment = environment\n        materialProperties.lightsStateVersion = lights.state.version\n        materialProperties.numClippingPlanes = clipping.numPlanes\n        materialProperties.numIntersection = clipping.numIntersection\n        materialProperties.outputEncoding = encoding\n        materialProperties.envMap = envMap;\n        materialProperties.shadows = shadows.length;\n        materialProperties.wireframe = wireframe;\n        materialProperties.version = material.version;\n        materialProperties.shadowMapType = renderer.shadowMap.type;\n        materialProperties.rendererVersion = renderer.version;\n    }\n\n    //\n \n    /**\n     * 创建`pickId`或者`pickIds`，用于实现点击拾取对象功能\n     * * `pickId` —— 根据对象的`pickObject`创建，允许对象作为一个独立的整体被点击拾取；\n     * * `pickIds` —— 根据对象的`pickObjects`数组创建，允许将对象按材质拆分成多个子部件分别被场景点击拾取，同一次点击只能拾取到一个子部件。\n     * @private\n     */\n     function initPickObject(object, context) {\n        let pickObjects = object.pickObjects, objectMaterial = object.material;\n\n        if (!object.pickObject && !pickObjects && Array.isArray(objectMaterial)) {\n            var materials = objectMaterial;\n            pickObjects = [];\n            for (let materialIndex = 0; materialIndex < materials.length; materialIndex++) {\n                const material = materials[materialIndex];\n                pickObjects.push({\n                    primitive: visualizer,\n                    id: object,\n                    mesh: object,\n                    material: material,\n                    materialIndex: materialIndex\n                })\n            }\n            object.pickObjects = pickObjects;\n        }\n\n        if (pickObjects && pickObjects.length) {\n\n            let pickIds = []\n            for (let i = 0; i < pickObjects.length; i++) {\n                const pickObject = pickObjects[i];\n                var pickId = pickObject.pickId;\n                if (pickId == undefined) {\n                    pickId = context.createPickId(pickObject);\n                }\n\n                const globalPickIds = visualizer._pickIds;\n                if (!globalPickIds.includes(pickId)) {\n                    globalPickIds.push(pickId);\n                }\n\n                pickObject.pickId = pickId;\n                pickIds.push(pickId);\n            }\n            object.pickIds = pickIds;\n\n        } else {\n            var pickObject = object.pickObject ? object.pickObject : {\n                primitive: visualizer,\n                id: object,\n                mesh: object\n            };\n            object.pickObject = pickObject;\n\n            var pickId = pickObject.pickId;\n            if (pickId == undefined) {\n                pickId = context.createPickId(pickObject);\n            }\n\n            const pickIds = visualizer._pickIds;\n            if (!pickIds.includes(pickId)) {\n                pickIds.push(pickId);\n            }\n\n            pickObject.pickId = pickId;\n            object.pickId = pickId;\n        }\n\n    }\n\n    //\n\n    function updateVerexAttribute(vertexArray, name, arrayView) {\n        const attrLocation = vertexArray._attributeLocations[name];\n        const vaAttribute = vertexArray._attributes[attrLocation];\n        const vertexBuffer = vaAttribute.vertexBuffer;\n\n        if (vertexBuffer._sizeInBytes != arrayView.length * arrayView.constructor.BYTES_PER_ELEMENT) {\n            console.warn('Mesh3D.WebGLRenderItems:vertexBuffer [' + name + '] size has changed');\n            return\n        }\n\n        if (arrayView instanceof Uint32Array) {\n            arrayView = new Float32Array(arrayView)\n            console.warn('Mesh3D.WebGLRenderItems：暂不支持Uint32Array类型顶点数组，已经强制替换为Float32Array（这会增加内存开销）');\n        }\n\n        vertexBuffer.copyFromArrayView(arrayView, 0);\n    }\n\n    function updateVertexArray(geometryAttributes, drawAttributes, vertexArrayList, object) {\n\n        const objectMaterial = object.material;\n        var morph = objectMaterial.morphTargets || objectMaterial.morphNormals,\n            skinning = object.isSkinnedMesh\n        const useEncodedPosition = visualizer.useEncodedPosition;\n\n        if (!skinning && !morph) {\n\n            for (const key in geometryAttributes) {\n\n                const drawAttribute = drawAttributes[key];\n                const geometryAttribute = geometryAttributes[key];\n\n                if (drawAttribute.version != geometryAttribute.version) {\n                    const arrayView = geometryAttribute.array;\n\n                    if (key == 'position' && useEncodedPosition) {\n                        debugger\n\n                        var factor = 1e6;\n                        var positionHigh = new Float32Array(arrayView.length);\n                        var positionLow = new Float32Array(arrayView.length);\n                        var encodedResult = { high: 0, low: 0 }\n                        for (let i = 0; i < arrayView.length; i++) {\n                            const value = arrayView[i];\n                            Cesium.EncodedCartesian3.encode(value * factor, encodedResult);\n                            positionHigh[i] = encodedResult.high\n                            positionLow[i] = encodedResult.low\n                        }\n                        for (let i = 0; i < vertexArrayList.length; i++) {\n                            const vertexArray = vertexArrayList[i];\n                            updateVerexAttribute(vertexArray, 'positionHigh', positionHigh);\n                            updateVerexAttribute(vertexArray, 'positionLow', positionLow);\n                        }\n                    }\n                    else {\n                        for (let i = 0; i < vertexArrayList.length; i++) {\n                            const vertexArray = vertexArrayList[i];\n                            updateVerexAttribute(vertexArray, key, arrayView);\n\n                        }\n                    }\n\n                    drawAttribute.version = geometryAttribute.version;\n                }\n\n            }\n\n        }\n\n        if (object.isInstancedMesh) {\n\n            var instanceMatrix = object.instanceMatrix,\n                instanceColor = object.instanceColor;\n\n            if (!drawAttributes.instanceMatrix) drawAttributes.instanceMatrix = { version: -1 }\n            if (instanceColor && !drawAttributes.instanceColor) drawAttributes.instanceColor = { version: -1 }\n\n            if (drawAttributes.instanceMatrix.version != instanceMatrix.version) {\n\n                const arrayView = instanceMatrix.array;\n\n                for (let i = 0; i < vertexArrayList.length; i++) {\n                    const vertexArray = vertexArrayList[i];\n                    updateVerexAttribute(vertexArray, 'instanceMatrix', arrayView);\n                }\n\n                drawAttributes.instanceMatrix.version = instanceMatrix.version\n            }\n\n            if (instanceColor && drawAttributes.instanceColor.version != instanceColor.version) {\n\n                const arrayView = instanceColor.array;\n                for (let i = 0; i < vertexArrayList.length; i++) {\n                    const vertexArray = vertexArrayList[i];\n                    updateVerexAttribute(vertexArray, 'instanceColor', arrayView);\n                }\n\n                drawAttributes.instanceColor.version = instanceColor.version;\n            }\n\n        }\n\n    }\n\n    //\n\n    var _currentCamera3js, _currentMaterialId;\n\n    function updateLocalClipping(material, camera3js, useCache, defaultMaterialProperties) {\n        const clipping = renderer._clipping;\n        useCache = useCache && material.id === _currentMaterialId;\n\n        properties.get(material, defaultMaterialProperties)\n\n        // we might want to call this function with some ClippingGroup\n        // object instead of the material, once it becomes feasible\n        // (#8465, #8379)\n        clipping.setState(material, camera3js, useCache);\n\n        _currentMaterialId = material.id;\n    }\n\n    function updateClippingUniform(material, materialProperties) {\n        materialProperties = materialProperties || properties.get(material)\n        const clipping = renderer._clipping;\n        var clippingPlanes = clipping.uniform.value;\n        var materialClippingPlanes = materialProperties.clippingUniform.value\n        if (clippingPlanes) Cartesian4.unpackArray(clippingPlanes, materialClippingPlanes);\n        else materialClippingPlanes.length = 0;\n\n    }\n\n    /**\n     * \n     * @param {THREE.Mesh|THREE.Line|THREE.Points} object \n     * @param {Cesium.FrameState} frameState \n     * @param {boolean}sysWireframe\n     * @param {WebGLRenderState}currentRenderState\n     * @param {THREE.Camera}camera3js\n     * @returns {WebGLRenderItem[]}\n     */\n    function getAndUpdate(object, frameState, sysWireframe, currentRenderState, camera3js) {\n\n        if (changingState.frameNumber != frameState.frameNumber) {\n            changingState.changingCount = 0;\n            changingState.frameNumber = frameState.frameNumber\n        }\n\n        sysWireframe = !!sysWireframe && !object.isLine && !object.isPoints;\n        var wireframe = sysWireframe;\n\n        const context = frameState.context;\n        const geometry = WebGLGeometries.get(object.geometry, object.material);\n        const groupsOptimized = geometry.groupsOptimized;\n        const materialIndicesUsed = geometry.materialIndicesUsed;\n\n        const programs = renderer._programs;\n        const lights = currentRenderState.lights;\n        const clipping = renderer._clipping;\n        const shadows = currentRenderState.shadowsArray;\n\n        const objectMaterial = object.material;\n        const geometryAttributes = geometry.attributes;\n\n        const objectProperties = properties.get(object);\n        const drawAttributes = objectDrawAttributes.get(object);\n\n        const drawRange = geometry.drawRange;\n\n        if (!geometryAttributes.position.count\n            || objectMaterial.visible == false\n            || drawRange.count == 0) {\n            return [];\n        }\n\n        //clipping\n\n        const camera3jsChanged = camera3js !== _currentCamera3js\n        const _clippingEnabled = currentRenderState.clippingEnabled;\n        const _localClippingEnabled = currentRenderState.localClippingEnabled;\n        var clippingNeedsUpdate = false;\n        if (_clippingEnabled === true) {\n            if (_localClippingEnabled === true || camera3jsChanged) {\n                clippingNeedsUpdate = true;\n            }\n        }\n        _currentCamera3js = camera3js;\n\n\n        //\n\n        updateSkinningAndMorphTargets(object, geometry, objectMaterial, frameState);\n\n        /**\n         * @type {WebGLRenderItem[]}\n         * @private\n         */\n        var renderItems = object.renderItems;\n        if (objectProperties.material != object.material) {\n            var commandsSet = renderItemsCache.get(object);\n            renderItems = commandsSet && commandsSet.get(objectMaterial);\n            objectProperties.material = object.material;\n        }\n\n        var oldIndex = geometry.index\n\n        if (renderItems == undefined) {\n            //create renderItems\n\n            initPickObject(object, context);\n\n            if (Array.isArray(objectMaterial)) {\n\n                materialIndicesUsed.forEach(materialIndex => {\n                    const material = objectMaterial[materialIndex];\n                    if (material.wireframe) wireframe = true;\n                });\n                materialIndicesUsed.forEach(materialIndex => {\n                    const material = objectMaterial[materialIndex];\n                    if (clippingNeedsUpdate) {\n                        updateLocalClipping(material, camera3js, !camera3jsChanged, new MaterialProperties())\n                    }\n                    initMaterial(material, wireframe, lights, shadows, !clippingNeedsUpdate)\n\n                    updateClippingUniform(material);\n                });\n\n                //use wireframe indices\n                if (wireframe) geometry.index = WebGLGeometries.getWireframeAttribute(geometry);\n\n                renderItems = cesiumCommands.createArray(object, lights, shadows);\n\n            } else {\n\n                wireframe = wireframe || !!objectMaterial.wireframe;\n\n                if (wireframe) geometry.index = WebGLGeometries.getWireframeAttribute(geometry);\n\n                if (clippingNeedsUpdate) {\n                    updateLocalClipping(objectMaterial, camera3js, !camera3jsChanged, new MaterialProperties())\n                }\n                initMaterial(objectMaterial, wireframe, lights, shadows, true);\n\n                updateClippingUniform(objectMaterial);\n\n                var renderItem = cesiumCommands.create(object, lights, shadows);\n                renderItem.boundingSphere = geometry.boundingSphere;\n                renderItems = [renderItem];\n\n            }\n\n            if (geometry.index != oldIndex) geometry.index = oldIndex;\n\n            for (let i = 0; i < renderItems.length; i++) {\n\n                const renderItem = renderItems[i];\n                const drawCommand = renderItem.drawCommand;\n                const material = renderItem.material;\n\n                const parameters = programs.getParameters(\n                    material, lights.state, shadows, visualizer, object\n                );\n                const programCacheKey = programs.getProgramCacheKey(parameters);\n\n                if (wireframe) {\n                    renderItem.primitiveType = drawCommand.primitiveType;\n                    drawCommand.primitiveType = Cesium.PrimitiveType.LINES;\n                }\n\n                renderItem.renderVersion = properties.get(material).renderVersion;\n                renderItem.programCacheKey = programCacheKey;\n                renderItem.materialVersion = material.version;\n                renderItem.wireframe = wireframe;\n                renderItem.update(object, drawCommand, geometry, visualizer.modelMatrixNeedsUpdate);\n\n            }\n\n            set(object, objectMaterial, renderItems);\n\n            //\n\n            for (const key in geometryAttributes) {\n                if (geometryAttributes.hasOwnProperty(key)) {\n                    drawAttributes[key] = { version: geometryAttributes[key].version };\n                }\n            }\n\n        } else {\n            //update renderItems\n\n            var attributesChanged = false;\n            for (const key in geometryAttributes) {\n                if (!(key in drawAttributes)) {\n                    attributesChanged = true;\n                    drawAttributes[key] = { version: geometryAttributes[key].version }\n                }\n            }\n            var positionChanged = geometryAttributes.position.version != drawAttributes.position.version;\n            if (positionChanged) geometry.computeBoundingSphere();\n\n            const vaToUpdateList = [];\n\n            const _currentRenderTarget = renderer.getRenderTarget();\n            const fog = visualizer.fog;\n            const encoding = (_currentRenderTarget === null) ? renderer.outputEncoding : _currentRenderTarget.texture.encoding;\n\n            for (let i = 0; i < renderItems.length; i++) {\n\n                const renderItem = renderItems[i];\n\n                const material = renderItem.material;\n                const drawCommand = renderItem.drawCommand;\n                const materialIndex = renderItem.materialIndex;\n                const groupIndex = renderItem.groupIndex;\n\n                const materialProperties = properties.get(material);\n\n                if (clippingNeedsUpdate) {\n                    updateLocalClipping(material, camera3js, !camera3jsChanged)\n                }\n\n                updateClippingUniform(material, materialProperties);\n\n                //\n\n                var materialChanged = false;\n                const environment = material.isMeshStandardMaterial ? visualizer.environment : null;\n                const envMap = cubemaps.get(material.envMap || environment);\n                var renderStateNeedsUpdate = false;\n                if (renderItem.materialVersion == material.version) {\n\n                    if (material.fog && materialProperties.fog !== fog) {\n\n                        materialChanged = true;\n\n                    } else if (materialProperties.environment !== environment) {\n\n                        materialChanged = true;\n\n                    } else if (materialProperties.needsLights && (materialProperties.lightsStateVersion !== lights.state.version)) {\n\n                        materialChanged = true;\n\n                    } else if (materialProperties.numClippingPlanes !== undefined &&\n                        (materialProperties.numClippingPlanes !== clipping.numPlanes ||\n                            materialProperties.numIntersection !== clipping.numIntersection)) {\n\n                        materialChanged = true;\n\n                    } else if (materialProperties.outputEncoding !== encoding) {\n\n                        materialChanged = true;\n\n                    } else if (materialProperties.envMap !== envMap) {\n\n                        materialChanged = true;\n                    }\n                    else if (materialProperties.shadows !== shadows.length) {\n                        materialChanged = true;\n\n                    } else if (materialProperties.shadowMapType != renderer.shadowMap.type) {\n                        materialChanged = true;\n                    } else if (materialProperties.rendererVersion != renderer.version) {\n                        materialChanged = true;\n                    }\n\n                    if (materialChanged) {\n\n                        if (!isFinite(materialProperties.renderVersion)) debugger\n                        materialProperties.renderVersion++;\n\n                    } else {\n                        if (renderItem.renderVersion != materialProperties.renderVersion) {\n\n                            materialChanged = true;\n\n                        }\n\n                        if (renderItem.renderStateVersion != material.renderStateVersion) {\n                            renderItem.renderStateVersion = material.renderStateVersion\n                            renderStateNeedsUpdate = true;\n                        }\n                    }\n\n                } else {\n                    materialChanged = true;\n                }\n\n                wireframe = material.wireframe || sysWireframe;\n\n                if (materialChanged) {\n\n                    if (changingState.maxChangingCount > changingState.changingCount) {\n                        initMaterial(material, wireframe, lights, shadows);\n\n                        const parameters = programs.getParameters(\n                            material, lights.state, shadows, visualizer, object\n                        );\n                        var programCacheKey = programs.getProgramCacheKey(parameters);\n\n                        materialChanged = renderItem.programCacheKey !== programCacheKey\n\n                        renderItem.programCacheKey = programCacheKey;\n                        renderItem.renderVersion = materialProperties.renderVersion;\n                        renderItem.materialVersion = material.version;\n\n                        changingState.changingCount++;\n                    } else {\n                        materialChanged = false;\n                    }\n\n                }\n\n                //update shaderProgram,uniformMap\n\n                const wireframeChanged = renderItem.wireframe != wireframe\n                const geometryChanged = renderItem.geometry != object.geometry;\n                if (attributesChanged || materialChanged || wireframeChanged || geometryChanged) {\n\n                    //wireframe index & boundingSphere\n                    var wireframeIndices = renderItem.wireframeIndices;\n                    if (wireframe && !wireframeIndices) {\n\n                        geometry.index = WebGLGeometries.getWireframeAttribute(geometry);\n\n                        var boundingSphereAndIndices = computeBoundingSphereAndIndices(geometry, material.transparent ? groupIndex : materialIndex, !material.transparent, renderItem.boundingSphere);\n                        wireframeIndices = boundingSphereAndIndices.indices;\n                        renderItem.wireframeIndices = wireframeIndices;\n                        renderItem.boundingSphere = boundingSphereAndIndices.boundingSphere;\n\n                        geometry.index = oldIndex;\n\n                    } else if (positionChanged) {\n                        //boundingSphere \n                        var boundingSphereAndIndices = computeBoundingSphereAndIndices(geometry, material.transparent ? groupIndex : materialIndex, !material.transparent, renderItem.boundingSphere);\n                        renderItem.boundingSphere = boundingSphereAndIndices.boundingSphere;\n                    }\n\n                    //new vertexArray\n                    if (attributesChanged || wireframeChanged || geometryChanged) {\n\n                        //TODO:groups=>release vaAttributeCache \n                        var va = drawCommand.vertexArray;\n                        if (!va.isDestroyed()) {\n\n                            if (i > 0 || wireframeChanged) {\n                                //1、几何属性变化或者使用新几何体时，同一个几何体第二组及以后只更新索引缓冲区（indexBuffer）；\n                                //2、在线框和面两种模式切换时，只更新索引缓冲区（indexBuffer）。\n\n                                var indexBuffer = va._indexBuffer;\n                                if (\n                                    defined(indexBuffer) &&\n                                    !indexBuffer.isDestroyed() &&\n                                    indexBuffer.vertexArrayDestroyable\n                                ) {\n                                    indexBuffer.destroy();\n                                }\n\n                            } else {\n                                va.destroy();\n                            }\n                        }\n\n                        va = cesiumVertextArrays.create(geometry, object, materialIndex, wireframe ? wireframeIndices : undefined)\n                        drawCommand.vertexArray = va;\n\n                    }\n\n                    //new shaderProgram, uniformMap\n                    var shaderProgram = drawCommand.shaderProgram;\n                    if (!shaderProgram.isDestroyed || !shaderProgram.isDestroyed()) shaderProgram.destroy()\n\n                    var attributeLocations = drawCommand.vertexArray._attributeLocations;\n                    shaderProgram = cesiumShaderPrograms.get(material, attributeLocations, object, lights, shadows);\n                    drawCommand.shaderProgram = shaderProgram;\n                    drawCommand.renderState = cesiumRenderStates.create(material, object)\n                    drawCommand.uniformMap = uniforms.getUniformMap(material, object, frameState, lights);\n\n                    //\n\n                    if (wireframe) {\n                        if (renderItem.primitiveType == undefined) renderItem.primitiveType = drawCommand.primitiveType;\n                        drawCommand.primitiveType = Cesium.PrimitiveType.LINES;\n                    } else if (renderItem.primitiveType != undefined) {\n                        drawCommand.primitiveType = renderItem.primitiveType;\n                    }\n\n                    renderItem.wireframe = wireframe;\n\n                }\n                else {\n\n                    if (renderStateNeedsUpdate) {\n                        drawCommand.renderState = cesiumRenderStates.create(material, object)\n                    }\n\n                    uniforms.refresh(material, object);\n\n                    vaToUpdateList.push(drawCommand.vertexArray);\n\n                    //boundingSphere\n                    if (positionChanged) {\n                        var boundingSphereAndIndices = computeBoundingSphereAndIndices(geometry, material.transparent ? groupIndex : materialIndex, !material.transparent, renderItem.boundingSphere);\n                        renderItem.boundingSphere = boundingSphereAndIndices.boundingSphere;\n                    }\n\n                }\n\n                renderItem.update(object, drawCommand, geometry, visualizer.modelMatrixNeedsUpdate);\n\n            }\n\n            updateVertexArray(geometryAttributes, drawAttributes, vaToUpdateList, object);\n        }\n\n        object.renderItems = renderItems;\n\n        return renderItems;\n    }\n\n    /**\n     * \n     * @param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite} object  \n     * @returns {WebGLRenderItem[]}\n     */\n    function get(object) {\n\n        const objectProperties = properties.get(object);\n        const objectMaterial = object.material\n        if (!objectProperties.material) return;\n        if (objectProperties.material == objectMaterial) return object.renderItems;\n\n        var commandsSet = renderItemsCache.get(object);\n        var renderItems = commandsSet && commandsSet.get(objectMaterial);\n\n        return renderItems;\n    }\n\n    /**\n     * \n     * @param {THREE.Mesh|THREE.Line|THREE.Points} object \n     * @param {THREE.Geometry|THREE.BufferGeometry} geometry \n     * @param {THREE.Material} material \n     * @param {WebGLRenderItem} renderItem \n     * @param {string} name \n     * @param {Cesium.FrameState} frameState \n     * @param {WebGLRenderState} [currentRenderState] \n     * @param {THREE.Camera}camera3js\n     * @returns {Cesium.DrawCommand}\n     */\n    function getAndUpdateDerived(object, geometry, material, renderItem, name, frameState, currentRenderState, camera3js) {\n\n        const lights = currentRenderState.lights, shadows = currentRenderState.shadowsArray;\n        geometry = WebGLGeometries.get(geometry);\n        const geometryAttributes = geometry.attributes;\n        const drawAttributes = objectDrawAttributes.get(object);\n        //clipping\n\n        const clipping = renderer._clipping;\n        const camera3jsChanged = camera3js !== _currentCamera3js\n        const _clippingEnabled = currentRenderState.clippingEnabled;\n        const _localClippingEnabled = currentRenderState.localClippingEnabled;\n        var clippingNeedsUpdate = false;\n        if (_clippingEnabled === true) {\n            if (_localClippingEnabled === true || camera3jsChanged) {\n                clippingNeedsUpdate = true;\n            }\n        }\n        _currentCamera3js = camera3js;\n\n        // updateSkinningAndMorphTargets(object, geometry, material, frameState);\n\n        var originalDrawCommand = renderItem.drawCommand;\n        var drawCommand = originalDrawCommand.derivedCommands[name];\n\n        var derivedProperties = originalDrawCommand.derivedProperties\n        var derivedCommandProperties = derivedProperties[name];\n        if (!derivedCommandProperties) {\n            derivedCommandProperties = {};\n            derivedProperties[name] = derivedCommandProperties;\n        }\n\n        var attributeLocations = originalDrawCommand.vertexArray._attributeLocations\n        var commandNeedsUpdate = !drawCommand;\n        if (!commandNeedsUpdate) {\n            if (derivedCommandProperties.materialVersion != renderItem.materialVersion\n                || derivedCommandProperties.renderStateVersion != renderItem.material.renderStateVersion) {\n                commandNeedsUpdate = true;\n                derivedCommandProperties.materialVersion = renderItem.materialVersion\n                derivedCommandProperties.renderStateVersion = renderItem.material.renderStateVersion\n            }\n            else commandNeedsUpdate = drawCommand.vertexArray._attributeLocations != attributeLocations\n            if (commandNeedsUpdate) drawCommand.onMaterialDispose && drawCommand.onMaterialDispose()\n        }\n\n        if (commandNeedsUpdate) {\n\n            if (clippingNeedsUpdate) {\n                updateLocalClipping(material, camera3js, !camera3jsChanged, new MaterialProperties())\n            } else {\n                properties.get(material, new MaterialProperties())\n            }\n\n            updateClippingUniform(material)\n\n            drawCommand = DrawCommand.shallowClone(originalDrawCommand);\n            originalDrawCommand.derivedCommands[name] = drawCommand;\n\n            drawCommand.shaderProgram = cesiumShaderPrograms.get(material, attributeLocations, object, lights, shadows)\n            drawCommand.uniformMap = uniforms.getUniformMap(material, object, frameState, lights);\n            drawCommand.renderState = cesiumRenderStates.create(material, object, false);\n\n            function onMaterialDispose() {\n                drawCommand.shaderProgram.destroy()\n\n                const isDestroyed = originalDrawCommand.isDestroyed;\n                if (!isDestroyed || !isDestroyed()) {\n                    delete originalDrawCommand.derivedCommands[name];\n                }\n\n                material.removeEventListener('dispose', onMaterialDispose)\n            }\n\n            if (material._isShadowDepthMaterial) {\n                object.addEventListener('dispose', onMaterialDispose)\n            } else {\n                material.addEventListener('dispose', onMaterialDispose)\n            }\n\n            drawCommand.onMaterialDispose = onMaterialDispose;\n        } else {\n\n            if (clippingNeedsUpdate) {\n                updateLocalClipping(material, camera3js, !camera3jsChanged, new MaterialProperties())\n            }\n            updateClippingUniform(material);\n\n            if (derivedCommandProperties.numClippingPlanes !== undefined &&\n                (derivedCommandProperties.numClippingPlanes !== clipping.numPlanes ||\n                    derivedCommandProperties.numIntersection !== clipping.numIntersection)) {\n\n                var shaderProgram = drawCommand.shaderProgram;\n                if (!shaderProgram.isDestroyed || !shaderProgram.isDestroyed()) shaderProgram.destroy()\n\n                drawCommand.shaderProgram = cesiumShaderPrograms.get(material, attributeLocations, object, lights, shadows)\n                drawCommand.uniformMap = uniforms.getUniformMap(material, object, frameState, lights);\n                drawCommand.renderState = cesiumRenderStates.create(material, object, false);\n\n            }\n\n            uniforms.refresh(material, object);\n            drawCommand.vertexArray = originalDrawCommand.vertexArray;\n        }\n\n        derivedCommandProperties.numClippingPlanes = clipping.numPlanes;\n        derivedCommandProperties.numIntersection = clipping.numIntersection;\n\n        renderItem.update(object, drawCommand, geometry, visualizer.modelMatrixNeedsUpdate);\n\n        updateVertexArray(geometryAttributes, drawAttributes, [drawCommand.vertexArray], object)\n\n        return drawCommand;\n    }\n\n    /**\n     * \n     * @param {THREE.Mesh|THREE.Line|THREE.Points} object \n     */\n    function remove(object) {\n\n        var materialSet = materialsUsed.get(object);\n        var commandsSet = renderItemsCache.get(object);\n\n        if (materialSet && commandsSet) {\n\n            materialSet.forEach(material => {\n\n                var renderItems = commandsSet.get(material);\n                if (!renderItems) return;\n\n                renderItems.forEach(function (renderItem) {\n\n                    const wireframeIndexBuffer = renderItem.wireframeIndexBuffer\n                    const isDestroyed = wireframeIndexBuffer.isDestroyed;\n                    if (!isDestroyed || !isDestroyed()) wireframeIndexBuffer.destroy();\n                    delete renderItem.wireframeIndexBuffer\n                    delete renderItem.indexBuffer\n                });\n\n            })\n        }\n\n        materialsUsed.delete(object);\n        renderItemsCache.delete(object);\n    }\n\n    this.get = get;\n    this.remove = remove;\n    this.getAndUpdate = getAndUpdate;\n    this.getAndUpdateDerived = getAndUpdateDerived;\n    this.dispose = dispose;\n}\n\nexport default WebGLRenderItems;",
    "import WebGLRenderItem from  \"./WebGLRenderItem.js\";\n\n\nfunction painterSortStable(a, b) {\n\n    if (a.groupOrder !== b.groupOrder) {\n\n        return a.groupOrder - b.groupOrder;\n\n    } else if (a.renderOrder !== b.renderOrder) {\n\n        return a.renderOrder - b.renderOrder;\n\n    }\n    else if (a.material.id !== b.material.id) {\n\n        return a.material.id - b.material.id;\n\n    } else if (a.z !== b.z) {\n\n        return a.z - b.z;\n\n    } else {\n\n        return a.id - b.id;\n\n    }\n\n}\n\nfunction reversePainterSortStable(a, b) {\n\n    if (a.groupOrder !== b.groupOrder) {\n\n        return a.groupOrder - b.groupOrder;\n\n    } else if (a.renderOrder !== b.renderOrder) {\n\n        return a.renderOrder - b.renderOrder;\n\n    } else if (a.z !== b.z) {\n\n        return b.z - a.z;\n\n    } else {\n\n        return a.id - b.id;\n\n    }\n\n}\n\n\nfunction WebGLRenderList() {\n\n    /**\n     * @type {WebGLRenderItem[]}\n     * @private\n     */\n    const environment = []\n    /**\n     * @type {WebGLRenderItem[]}\n     * @private\n     */\n    const opaque = [];\n    /**\n     * @type {WebGLRenderItem[]}\n     * @private\n     */\n    const transparent = [];\n\n    function init() {\n\n        environment.length = 0;\n        opaque.length = 0;\n        transparent.length = 0;\n\n    }\n\n    function push(renderItem) {\n\n        if (renderItem.pass == Cesium.Pass.ENVIRONMENT) environment.push(renderItem)\n        else {\n            const material = renderItem.material;\n            (material.transparent === true || material.translucent ? transparent : opaque).push(renderItem);\n        }\n    }\n\n    function unshift(renderItem) {\n        if (renderItem.pass == Cesium.Pass.ENVIRONMENT) environment.unshift(renderItem)\n        else {\n            const material = renderItem.material;\n            (material.transparent === true || material.translucent ? transparent : opaque).unshift(renderItem);\n        }\n    }\n\n    function sort(customOpaqueSort, customTransparentSort) {\n\n        if (environment.length > 1) environment.sort(customOpaqueSort || painterSortStable);\n        if (opaque.length > 1) opaque.sort(customOpaqueSort || painterSortStable);\n        if (transparent.length > 1) transparent.sort(customTransparentSort || reversePainterSortStable);\n\n    }\n\n    function shouldRender(renderItem, frameState) {\n        var { object, material } = renderItem;\n        if (frameState.passes.pick && object.allowPick == false) return false\n        return object.visible && material.visible;\n    }\n\n    function getDrawCommands(commandList, frameState) {\n\n        for (let i = 0, l = environment.length; i < l; i++) {\n            if (!shouldRender(environment[i], frameState)) continue;\n            commandList.push(environment[i].drawCommand)\n        }\n        for (let i = 0, l = opaque.length; i < l; i++) {\n            if (!shouldRender(opaque[i], frameState))\n                continue\n            commandList.push(opaque[i].drawCommand)\n        }\n        for (let i = 0, l = transparent.length; i < l; i++) {\n            if (!shouldRender(transparent[i], frameState))\n                continue;\n            commandList.push(transparent[i].drawCommand)\n        }\n    }\n\n    function setCurrentScene(currentScene, currentCamera) {\n\n        for (let i = 0, l = environment.length; i < l; i++) {\n            environment[i].currentScene = currentScene\n            environment[i].currentCamera = currentCamera\n        }\n        for (let i = 0, l = opaque.length; i < l; i++) {\n            opaque[i].currentScene = currentScene;\n            opaque[i].currentCamera = currentCamera\n        }\n        for (let i = 0, l = transparent.length; i < l; i++) {\n            transparent[i].currentScene = currentScene;\n            transparent[i].currentCamera = currentCamera\n        }\n    }\n\n    this.environment = environment;\n    this.opaque = opaque;\n    this.transparent = transparent;\n\n    this.init = init;\n    this.push = push;\n    this.unshift = unshift;\n\n    this.sort = sort;\n\n    this.getDrawCommands = getDrawCommands\n    this.setCurrentScene = setCurrentScene;\n\n}\n\nexport default WebGLRenderList;",
    "import WebGLLights from  \"./WebGLLights.js\";\n\nimport WebGLRenderList from  \"./WebGLRenderList.js\";\n\n\n/**\n * @constructor\n */\nfunction WebGLRenderState() {\n\n    const renderList = new WebGLRenderList();\n    const renderables = [];\n    const dynamicRenderables = [];\n    const shadowsArray = []\n    const lightsArray = [];\n    const lights = new WebGLLights();\n\n    function init() {\n        renderList.init();\n        renderables.length = 0;\n        dynamicRenderables.length = 0;\n        lightsArray.length = 0;\n        shadowsArray.length = 0;\n    }\n\n    function pushLight(light) {\n\n        lightsArray.push(light);\n\n    }\n\n    function pushShadow(shadowLight) {\n\n        shadowsArray.push(shadowLight);\n\n    }\n\n    function pushRenderable(object) {\n        renderables.push(object);\n    }\n\n    const scope = this;\n    function setupLights(camera) {\n\n        scope.lights.setup(lightsArray, shadowsArray, camera);\n\n    }\n\n    //for onBeforeRender\n    function setCurrentScene(scene, camera) {\n        renderList.setCurrentScene(scene, camera)\n    }\n\n    function getDrawCommands(commandList,frameState) {\n        renderList.getDrawCommands(commandList,frameState)\n    }\n\n    this.renderList = renderList;\n    this.renderables = renderables;\n    this.dynamicRenderables = dynamicRenderables\n    this.shadowsArray = shadowsArray;\n    this.lightsArray = lightsArray;\n\n    this.lights = lights;\n\n    this.init = init;\n    this.pushRenderable = pushRenderable;\n    this.setupLights = setupLights;\n    this.pushShadow = pushShadow;\n    this.pushLight = pushLight;\n    this.setCurrentScene = setCurrentScene;\n    this.getDrawCommands = getDrawCommands;\n}\n\nexport default WebGLRenderState;",
    "import WebGLRenderState from  \"./WebGLRenderState.js\";\n\n\nfunction WebGLRenderStates() {\n\n    let states = new WeakMap();\n\n    /**\n     * \n     * @param {Object} scene \n     * @param {Object} camera \n     * @returns {WebGLRenderState}\n     */\n    this.get = function get(scene, camera) {\n\n        const cameras = states.get(scene);\n        let state;\n\n        if (cameras === undefined) {\n\n            state = new WebGLRenderState();\n            states.set(scene, new WeakMap());\n            states.get(scene).set(camera, state);\n\n        } else {\n\n            state = cameras.get(camera);\n            if (state === undefined) {\n\n                state = new WebGLRenderState();\n                state.camera = camera;\n                cameras.set(camera, state);\n\n            }\n\n        }\n\n        return state;\n\n    }\n\n    this.dispose = function dispose() {\n\n        states = new WeakMap();\n\n    }\n\n    Object.defineProperties(this, {\n        states: {\n            get: function () {\n                return states;\n            }\n        }\n    })\n\n}\nexport default WebGLRenderStates;",
    "import MeshVisualizer from  \"../MeshVisualizer.js\";\n\nimport ConstantMap from  \"./ConstantMap.js\";\n\nimport TextureUtils from  \"./TextureUtils.js\";\n\n\n/**\n * 处理Threejs RenderTarget\n * @param {MeshVisualizer} visualizer \n */\nexport default function WebGLRenderTargets(visualizer) {\n\n    const { WebGLConstants, Sampler, RenderbufferFormat, Renderbuffer, Framebuffer } = Cesium;\n    /**\n    * @type {Map<THREE.WebGLRenderTarget|THREE.WebGLCubeRenderTarget,Cesium.Framebuffer>}\n    * @private\n    */\n    let fbs = new Map();\n\n    /**\n     * \n     * @param {THREE.WebGLRenderTarget} renderTarget  \n     * @param {Cesium.Texture} colorTexture  \n     * @returns {Cesium.Framebuffer}\n     * @private\n     */\n    function createFramebuffer(renderTarget, colorTexture) {\n\n        const frameState = visualizer.frameState,\n            context = frameState.context;\n\n        var width = renderTarget.width || context.drawingBufferWidth,\n            height = renderTarget.height || context.drawingBufferHeight;\n        if (!colorTexture) {\n            var texParams = TextureUtils.fromTexure3js(renderTarget.texture)\n\n            colorTexture = TextureUtils.createTexture({\n                target: WebGLConstants.TEXTURE_2D,\n                width: width,\n                height: height,\n                format: texParams.format,\n                flipY: texParams.flipY,\n                type: texParams.type,\n                sampler: new Sampler(texParams.sampler),\n                preMultiplyAlpha: texParams.preMultiplyAlpha\n            }, context);\n\n            colorTexture.name = renderTarget.texture.name;\n        }\n\n        var depthTexture;\n        if (renderTarget.depthTexture) {\n\n            let texParams = TextureUtils.fromTexure3js(renderTarget.depthTexture)\n\n            depthTexture = TextureUtils.createTexture({\n                target: WebGLConstants.TEXTURE_2D,\n                width: width,\n                height: height,\n                format: texParams.format,\n                flipY: texParams.flipY,\n                type: texParams.type,\n                sampler: new Sampler(texParams.sampler),\n                preMultiplyAlpha: texParams.preMultiplyAlpha\n            }, context);\n        }\n\n        var depthRenderbuffer, stencilBuffer;\n        if (renderTarget.stencilBuffer) {\n            stencilBuffer = new Renderbuffer({\n                context: context,\n                format: RenderbufferFormat.DEPTH_STENCIL,\n                width: width,\n                height: height\n            });\n        }\n        else if (renderTarget.depthBuffer) {\n\n            depthRenderbuffer = new Renderbuffer({\n                context: context,\n                format: RenderbufferFormat.DEPTH_COMPONENT16,\n                width: width,\n                height: height\n            });\n        }\n\n        let framebuffer = new Framebuffer({\n            context: context,\n            colorTextures: [colorTexture],\n            destroyAttachments: false,\n            depthTexture: depthTexture,\n            depthRenderbuffer: depthRenderbuffer,\n            depthStencilRenderbuffer: stencilBuffer\n        });\n        return framebuffer;\n    }\n\n    /**\n     * \n     * @param {THREE.WebGLRenderTarget|THREE.WebGLCubeRenderTarget} renderTarget\n     */\n    this.set = function (renderTarget) {\n\n        const frameState = visualizer.frameState,\n            context = frameState.context;\n\n        if (fbs.has(renderTarget)) {\n            return;\n        }\n\n        let texture = renderTarget.texture,\n            depthTexture = renderTarget.depthTexture,\n            framebuffers = [];\n\n        if (renderTarget.isWebGLCubeRenderTarget) {\n\n            let format = ConstantMap.formatsMap[texture.format]\n\n            var face = {\n                width: renderTarget.width,\n                height: renderTarget.height,\n                arrayBufferView: new Uint8Array(4 * renderTarget.width * renderTarget.height),\n            };\n\n            let cubeMap = new Cesium.CubeMap({\n                context: context,\n                source: {\n                    positiveX: face,\n                    negativeX: face,\n                    positiveY: face,\n                    negativeY: face,\n                    positiveZ: face,\n                    negativeZ: face\n                },\n                width: renderTarget.width,\n                height: renderTarget.height,\n                pixelDatatype: ConstantMap.typesMap[texture.type],\n                pixelFormat: format,\n                flipY: texture.flipY,\n                preMultiplyAlpha: texture.premultiplyAlpha\n            });\n            visualizer._textureCache[texture.uuid] = cubeMap;\n\n            let cubeFaces = [cubeMap.positiveX, cubeMap.negativeX, cubeMap.positiveY, cubeMap.negativeY, cubeMap.positiveZ, cubeMap.negativeZ]\n            for (let i = 0; i < 6; i++) {\n                var framebuffer = createFramebuffer(renderTarget, cubeFaces[i]);\n                framebuffers.push(framebuffer);\n            }\n        } else {\n            let framebuffer = createFramebuffer(renderTarget);\n            visualizer._textureCache[texture.uuid] = framebuffer.getColorTexture(0);\n\n            if (depthTexture) {\n                debugger\n                visualizer._textureCache[depthTexture.uuid] = framebuffer.depthTexture;\n            }\n\n            framebuffers.push(framebuffer);\n        }\n\n        fbs.set(renderTarget, framebuffers);\n\n        function onDispose() {\n\n            framebuffers.forEach(function (framebuffer) {\n                framebuffer.destroy();\n            });\n            fbs.delete(renderTarget);\n            var textureCesium = visualizer._textureCache[texture.uuid] //= framebuffer.getColorTexture(0);\n            if (textureCesium) {//&& ()) {\n                if (!textureCesium.isDestroyed || !textureCesium.isDestroyed()) textureCesium.destroy();\n                delete visualizer._textureCache[texture.uuid]\n            }\n            renderTarget.removeEventListener('dispose', onDispose);\n        }\n        renderTarget.__onDispose = onDispose\n        renderTarget.addEventListener('dispose', onDispose);\n    }\n\n    /**\n     * \n     * @param {THREE.WebGLRenderTarget|THREE.WebGLCubeRenderTarget} renderTarget  \n     * @returns {Cesium.Framebuffer|Cesium.Framebuffer[]}\n     */\n    this.get = function (renderTarget) {\n        if (!fbs.has(renderTarget)) {\n            this.set(renderTarget)\n        }\n        var framebuffers = fbs.get(renderTarget);\n        return framebuffers;\n    }\n\n    this.dispose = function () {\n\n        fbs.forEach((val, key) => {\n            if (key.__onDispose) {\n                key.__onDispose()\n                delete key.__onDispose\n            }\n        })\n\n        fbs.clear();\n    }\n\n}\n",
    "import WebGLExtensions from  \"./WebGLExtensions.js\";\n\nimport WebGLCapabilities from  \"./WebGLCapabilities.js\";\n\nimport WebGLPrograms from  \"./WebGLPrograms.js\";\n\nimport RendererUtils from  \"../RendererUtils.js\";\n\nimport WebGLMorphtargets from  \"./WebGLMorphtargets.js\";\n\nimport WebGLShadowMap from  \"./WebGLShadowMap.js\";\n\nimport CameraUtils from  \"../CameraUtils.js\";\n\nimport WebGLProperties from  \"./WebGLProperties.js\";\n\nimport WebGLClipping from  \"./WebGLClipping.js\";\n\nimport WebGLCubeMaps from  \"./WebGLCubeMaps.js\";\n\nimport ConstantMap from  \"./ConstantMap.js\";\n\nimport WebGLUniforms from  \"./WebGLUniforms.js\";\n\nimport WebGLMaterials from  \"./WebGLMaterials.js\";\n\nimport WebGLTextures from  \"./WebGLTextures.js\";\n\nimport WebGLRenderItems from  \"./WebGLRenderItems.js\";\n\nimport MeshVisualizer from  \"../MeshVisualizer.js\";\n\nimport WebGLRenderStates from  \"./WebGLRenderStates.js\";\n\nimport WebGLRenderState from  \"./WebGLRenderState.js\";\n\nimport WebGLRenderTargets from  \"./WebGLRenderTargets.js\";\n\nimport CesiumRenderStates from  \"./CesiumRenderStates.js\";\n\nimport CesiumCommands from  \"./CesiumCommands.js\";\n\nimport CesiumShaderPrograms from  \"./CesiumShaderPrograms.js\";\n\nimport CesiumVertextArrays from  \"./CesiumVertextArrays.js\";\n\n\n\nvar clearCommandScratch;\n/**\n * 实现部分threejs WebGLRenderer接口，支持渲染到THREE.WebGLRenderTarget等功能\n */\nclass WebGLRenderer {\n    /**\n     * \n     * @param {MeshVisualizer} visualizer \n     */\n    constructor(visualizer) {\n\n        const {\n            Camera, Matrix4, RenderState, ClearCommand, Color\n        } = Cesium;\n        const _THREE = THREE;\n        const {\n            LinearEncoding, NoToneMapping,\n            Matrix3, Vector3\n        } = _THREE;\n\n\n        function CesiumRenderStateCache() {\n            var list = new WeakMap();\n\n            this.get = function (drawCommand, camera) {\n                var cameras = list.get(drawCommand);\n                if (cameras == undefined) {\n                    cameras = new WeakMap();\n                    list.set(drawCommand, cameras);\n                }\n                var rs = cameras.get(camera);\n                if (rs == undefined) {\n                    rs = new RenderState(drawCommand.renderState);\n                    cameras.set(camera, rs);\n                }\n                return rs;\n            }\n\n            this.delete = function (drawCommand) {\n                list.delete(drawCommand);\n            }\n\n            this.dispose = function () {\n                list = new WeakMap();\n            }\n\n        }\n\n        const scope = this;\n        var colorBuffer = {\n\n            setMask: function (colorMask) {\n\n            },\n\n            setLocked: function (lock) {\n            },\n\n            setClear: function (r, g, b, a, premultipliedAlpha) {\n\n            },\n\n            reset: function () {\n\n            }\n\n        };\n\n\n        var depthBuffer = {\n\n            setTest: function (enabled) {\n\n                const gl = getGL()\n                const glEnum = gl.DEPTH_TEST;\n                if (enabled) {\n                    gl.enable(glEnum);\n                } else {\n                    gl.disable(glEnum);\n                }\n            },\n\n            setMask: function (depthMask) { },\n\n            setFunc: function (depthFunc) { },\n\n            setLocked: function (lock) { },\n\n            setClear: function (depth) { },\n\n            reset: function () { }\n\n        };\n\n\n        var stencilBuffer = {\n\n            setTest: function (stencilTest) { },\n\n            setMask: function (stencilMask) { },\n\n            setFunc: function (stencilFunc, stencilRef, stencilMask) { },\n\n            setOp: function (stencilFail, stencilZFail, stencilZPass) { },\n\n            setLocked: function (lock) { },\n\n            setClear: function (stencil) { },\n\n            reset: function () { }\n\n        };\n\n        this.state = {\n\n            buffers: {\n                color: colorBuffer,\n                depth: depthBuffer,\n                stencil: stencilBuffer\n            },\n            viewport: function (viewport) {\n                getGL().viewport(viewport.x, viewport.y, viewport.width, viewport.height);\n            }\n        }\n        function getGL() {\n            return scope._capabilities.gl;\n        }\n        //\n\n        this._visualizer = visualizer;\n\n        //threejs renderer params \n        this.gammaOutput = false;\n        this.gammaInput = false;\n\n        this._nClipPlanes = 0;\n        this._nClipIntersection = 0;\n        this._currentRenderTarget = null;\n\n\n        // user-defined clipping\n\n        this.clippingPlanes = [];\n        this.localClippingEnabled = false;\n\n        // physically based shading\n\n        this.gammaFactor = 2.0;\t// for backwards compatibility\n\n        this._outputEncoding = null\n\n\n        // physical lights\n\n        this._physicallyCorrectLights = false;\n\n        // tone mapping\n\n        this._toneMapping = null;// NoToneMapping;\n        this.toneMappingExposure = 1.0;\n        this.toneMappingWhitePoint = 1.\n\n        // morphs\n\n        this.maxMorphTargets = 8;\n        this.maxMorphNormals = 4;\n\n\n        this._outputEncoding = LinearEncoding;\n        this._toneMapping = NoToneMapping;\n\n        this.vr = {\n            enabled: false\n        };\n        this.xr = {\n            enabled: false\n        };\n\n        /**\n         * @type {WebGLShadowMap}\n         */\n        this.shadowMap = new WebGLShadowMap(this, null, 16000);\n\n        this._cubemaps = new WebGLCubeMaps(this)\n\n        this._properties = new WebGLProperties();\n\n        this._materials = new WebGLMaterials(this._properties);\n\n        this._textures = new WebGLTextures(visualizer);\n\n        this._uniforms = new WebGLUniforms(this);\n\n        this._cesiumRenderStateCache = new CesiumRenderStateCache()\n        this._cesiumRenderStates = new CesiumRenderStates(this)\n        this._cesiumShaderPrograms=new CesiumShaderPrograms(this)\n        this._cesiumVertextArrays=new CesiumVertextArrays(this)\n        this._cesiumCommands = new CesiumCommands(this)\n\n        const webglRenderItems = this._webglRenderItems = new WebGLRenderItems(this);\n\n        this._webglRenderStates = new WebGLRenderStates();\n\n\n        const webGLRenderTargets = new WebGLRenderTargets(visualizer);\n\n        /**\n         * @type {WebGLClipping}\n         */\n        this._clipping = null;\n        /**\n         * @type {WebGLPrograms}\n         */\n        this._programs = null;\n        /**\n         * @type {WebGLCapabilities}\n         */\n        this._capabilities = null;\n        /**\n         * @type {WebGLExtensions}\n         */\n        this._extensions = null;\n\n        this._pixelRatio = 1.0;\n\n        /**\n         * @type {WebGLMorphtargets}\n         */\n        this.morphtargets = null;\n\n        /**\n         * @type {Boolean}\n         */\n        this.autoClear = true;\n        this.autoClearColor = true\n        this.autoClearDepth = true\n        this.autoClearStencil = true\n\n        this._currentActiveCubeFace = 0;\n        this._currentActiveMipmapLevel = 0;\n\n        this.renderState = null;\n        this.autoConvertCamera = false;\n        this.overrideModelMatrix = null;\n\n        this._clearColor = new _THREE.Color('black')\n        this._clearAlpha = 0;\n        this.isCesiumRenderer = true;\n\n        this.version = 0;\n\n        // \n\n        /**\n         * \n         * @param {Cesium.FrameState} frameState \n         */\n        function init(frameState) {\n            var gl = frameState.context._gl\n\n            if (!this._capabilities) {\n                const extensions = this._extensions = new WebGLExtensions(gl)\n                const capabilities = this._capabilities = new WebGLCapabilities(gl, extensions, {\n\n                });\n                if (capabilities.isWebGL2 === false) {\n\n                    extensions.get('WEBGL_depth_texture');\n                    extensions.get('OES_texture_float');\n                    extensions.get('OES_texture_half_float');\n                    extensions.get('OES_texture_half_float_linear');\n                    extensions.get('OES_standard_derivatives');\n                    extensions.get('OES_element_index_uint');\n                    extensions.get('ANGLE_instanced_arrays');\n\n                }\n                this.shadowMap.maxTextureSize = capabilities.maxTextureSize;\n\n                extensions.get('OES_texture_float_linear');\n\n                this._clipping = new WebGLClipping(this._properties, this._visualizer);\n                this._programs = new WebGLPrograms(this, this._cubemaps, extensions, capabilities, this._clipping);\n\n                this.morphtargets = new WebGLMorphtargets(gl,this);\n            }\n\n            this._pixelRatio = frameState.pixelRatio;\n\n            if (!this._frameState) this._frameState = frameState;\n\n        }\n\n        /**\n         * \n         * @param {THREE.Object3D|MeshVisualizer} scene  \n         * @param {Cesium.Camera|THREE.PerspectiveCamera|THREE.OrthographicCamera} camera\n         * @param {Cesium.FrameState} [frameState] \n         */\n        function render(scene, camera, frameState) {\n            frameState = frameState || this._frameState;\n            if (!scene) {\n                throw new Error('WebGLRenderer.render:缺少参数scene')\n            }\n            if (!frameState) {\n                throw new Error('WebGLRenderer.render:MeshVisualizer未初始化，需要传递参数frameState')\n            }\n\n            /**\n             * @type {THREE.WebGLRenderTarget}\n             * @private\n             */\n            let renderTarget = this._currentRenderTarget;\n            let visualizer = this._visualizer;\n\n            if (!renderTarget) throw new Error('WebGLRenderer.render:未设置renderTarget')\n\n            if (this.autoClear) {\n                this.clear(null, 1, 0);\n            }\n            const framebuffers = webGLRenderTargets.get(renderTarget);\n            const framebuffer = framebuffers[this._currentActiveCubeFace || 0];\n            const context = frameState.context;\n            const us = context.uniformState\n            const globalCamera = frameState.camera;\n            const currentCullingVolume = frameState.cullingVolume\n\n            var referenceFrame;\n            if (this.autoConvertCamera) {\n                referenceFrame = {}\n                referenceFrame.matrix = visualizer._actualModelMatrixYup || visualizer.modelMatrix;\n                referenceFrame.inverseMatrix = visualizer._actualModelMatrixYupInverse || visualizer._actualModelMatrixInverse;\n            }\n\n            let customCamera, camera3js;\n            /**\n             * @type {THREE.Frustum}\n             * @private\n             */\n            // let frustum3js;\n            if (camera && !(camera instanceof Camera)) {\n\n                camera3js = camera;\n                if (camera.isPerspectiveCamera) {\n                    camera = CameraUtils.fromPerspectiveCamera3js(camera, visualizer._scene, referenceFrame);\n\n                }\n                else if (camera.isOrthographicCamera) camera = CameraUtils.fromOrthographicCamera3js(camera, visualizer._scene, referenceFrame);\n                else {\n\n                    visualizer.traverseObject3D(scene, (object) => {\n                        object.currentFrustumCulled = object.frustumCulled;\n                        object.frustumCulled = false;\n                        object.modelMatrixNeesUpdate = false;\n                    })\n\n                    customCamera = {\n                        camera: camera,\n                        _normalMatrix: new Matrix3(),\n                        cameraPosition: new Vector3()\n                    }\n                    globalCamera.customCamera = customCamera;\n                    // console.warn('unsupport camera ' + camera.type);\n                    camera = null;\n                    // return\n                }\n\n                // if (!referenceFrame && !camera3js._referenceFrame)\n                //     frustum3js = CameraUtils.getFrustum3js(camera3js)\n            }\n\n            const currenCamera = camera || globalCamera;\n            const cemeraChanged = currenCamera != globalCamera\n            frameState.camera = currenCamera;\n\n            if (cemeraChanged) {\n                us.update(frameState);\n                // frameState.cullingVolume = currenCamera.frustum.computeCullingVolume(\n                //     currenCamera.position,\n                //     currenCamera.direction,\n                //     currenCamera.up\n                // );\n            }\n\n            if (this.overrideModelMatrix) {\n                visualizer.traverseObject3D(scene, (object) => {\n                    object.currentFrustumCulled = object.frustumCulled;\n                    object.frustumCulled = false;\n                    object.modelMatrix = Matrix4.multiply(object.matrixWorld.elements, this.overrideModelMatrix, object.modelMatrix || new Matrix4());\n                    if (object.up.y) RendererUtils.yUp2Zup(object.modelMatrix, object.modelMatrix)\n                    object.modelMatrixNeesUpdate = false;\n                })\n            }\n\n            //execute drawCommand\n\n            var drawCommands = [];\n            visualizer.update(frameState, scene, drawCommands);\n\n            drawCommands.forEach((drawCommand) => {\n                //\n                if (customCamera) {\n                    let object = drawCommand.owner;\n                    object = object.mesh3js || object;\n\n                    customCamera.modelMatrix = object.matrixWorld.elements;\n\n                    object.modelViewMatrix.multiplyMatrices(customCamera.camera.matrixWorldInverse, object.matrixWorld);\n                    customCamera.modelViewMatrix = object.modelViewMatrix.elements;\n\n                    customCamera.projectionMatrix = customCamera.camera.projectionMatrix.elements;\n\n                    customCamera._normalMatrix.getNormalMatrix(object.modelViewMatrix);\n                    customCamera.normalMatrix = customCamera._normalMatrix.elements;\n\n                    customCamera.cameraPosition.setFromMatrixPosition(customCamera.camera.matrixWorld);\n                }\n\n                //\n\n                let originalRs = drawCommand.renderState;\n                // var rs=this._cesiumRenderStateCache.get(drawCommand,currenCamera);\n                /**\n                 * @type {Cesium.RenderState}\n                 * @private\n                 */\n                let rs = drawCommand.renderState\n                var viewport = renderTarget.viewport;\n                rs = Object.assign({}, rs)\n\n                if (this.renderState) {\n\n                    rs = Object.assign(rs, this.renderState)\n                    // rs = new RenderState(rs);\n                }\n\n                if (viewport) rs.viewport = viewport;\n\n                if (!renderTarget.stencilBuffer) {\n                    rs.stencilTest = { enabled: false }\n                    // rs.stencilTest.enabled = false\n                }\n                if (!renderTarget.depthBuffer && !renderTarget.depthTexture) {\n                    rs.depthTest = { enabled: false }\n                    // rs.depthTest.enabled = false\n                }\n                if (renderTarget.scissorTest) {\n                    var scissor = renderTarget.scissor;\n                    rs.scissorTest = {\n                        enabled: true,\n                        rectangle: { x: scissor.x, y: scissor.y, width: scissor.width, height: scissor.height }\n                    }\n                    // rs.scissorTest.enabled = true\n                    // rs.rectangle = { x: scissor.x, y: scissor.y, width: scissor.width, height: scissor.height }\n                } else {\n                    // rs.scissorTest.enabled = false\n                    rs.scissorTest = {\n                        enabled: false\n                    }\n                }\n\n                rs = new RenderState(rs);\n\n                var oldFramebuffer = drawCommand.framebuffer\n                drawCommand.renderState = rs;\n                drawCommand.framebuffer = framebuffer;\n                drawCommand.execute(context);\n                drawCommand.framebuffer = oldFramebuffer;\n                drawCommand.renderState = originalRs;\n\n            });\n\n            if (globalCamera.customCamera || this.overrideModelMatrix) {\n                visualizer.traverseObject3D(scene, (object) => {\n                    object.frustumCulled = object.currentFrustumCulled;\n                })\n            }\n\n            delete globalCamera.customCamera;\n            frameState.camera = globalCamera;\n\n            if (cemeraChanged) {\n                frameState.cullingVolume = currentCullingVolume;\n                us.update(frameState);\n            }\n\n            // console.log('renderToRenderTarget', drawCommands.length);\n\n            drawCommands.length = 0;\n        }\n\n\n        //for shadowMap\n        /**\n         * \n         * @param {Cesium.Camera|THREE.Camera} camera \n         * @param {THREE.Scene|MeshVisualizer} scene \n         * @param {THREE.BufferGeometry} geometry \n         * @param {THREE.Material} material \n         * @param {THREE.Mesh|THREE.Line|THREE.Points|THREE.Sprite} object \n         * @param {{materialIndex:number,renderItemIndex:number,groupIndex:number}} group \n         * @param {WebGLRenderState} currentWebglRenderState\n         * @param {THREE.Camera}camera3js\n         * @param {string} [passName] \n         * @param {Cesium.FrameState} [frameState] \n         * @private\n         */\n        function renderBufferDirect(camera, scene, geometry, material, object, group, currentWebglRenderState, camera3js, passName, frameState) {\n            frameState = this._frameState || frameState;\n\n            if (!frameState) {\n                throw new Error('WebGLRenderer.renderBufferDirect:MeshVisualizer未初始化，需要传递参数frameState')\n            }\n\n            const renderItems = webglRenderItems.get(object, currentWebglRenderState.camera)\n\n            if (!renderItems) return;\n\n            /**\n             * @type {THREE.WebGLRenderTarget}\n             * @private\n             */\n            let renderTarget = this._currentRenderTarget;\n            let visualizer = this._visualizer, cesScene = visualizer._scene;\n            if (!renderTarget) throw new Error('WebGLRenderer.renderBufferDirect:未设置renderTarget')\n\n            if (this.autoClear) this.clear();\n\n            var framebuffers = webGLRenderTargets.get(renderTarget);\n            var framebuffer = framebuffers[this._currentActiveCubeFace || 0];\n\n            var context = frameState.context;\n            let us = context.uniformState\n            var globalCamera = frameState.camera;\n\n            //copy camera\n            if (camera && !(camera instanceof Camera)) {\n                if (camera.isPerspectiveCamera) camera = CameraUtils.fromPerspectiveCamera3js(camera, null, cesScene);\n                else if (camera.isOrthographicCamera) camera = CameraUtils.fromOrthographicCamera3js(camera, null, cesScene);\n                else {\n                    throw new Error('unsupport camera ' + camera.type);\n                }\n            }\n\n            //save original camera\n            var currenCamera = camera || globalCamera;\n            frameState.camera = currenCamera;\n            //use new camera\n            if (currenCamera !== globalCamera) us.update(frameState);\n\n            //modelMatrix\n            if (object.modelMatrixNeesUpdate || object.needsUpdate) {\n                visualizer.computeModelMatrix(object, frameState);\n            }\n\n            //copy drawCommand\n            const renderItemIndex = renderItems.length > 1 ? group.renderItemIndex : 0;\n            passName = passName ? passName : ['_renderBufferDirect', material.uuid, geometry.uuid, renderItemIndex].join('_');\n            var renderItem = renderItems[renderItemIndex];\n            var drawCommand = webglRenderItems.getAndUpdateDerived(object, geometry, material, renderItem, passName, frameState, currentWebglRenderState, camera3js);\n\n            var renerable = !!drawCommand;\n            // var _frustum=CameraUtils.getFrustum3js(camera);\n            if (renerable && renderItem.frustumCulled) {\n                var boundingVolume = renderItem.boundingVolume;\n                // var distanceToCamera = Cartesian3.distance(boundingVolume.center, currenCamera.positionWC) //currenCamera.distanceToBoundingSphere(boundingVolume);\n                // var range = visualizer._minRange;\n                // if (distanceToCamera > 0) range = RendererUtils.computeRange(distanceToCamera, boundingVolume.radius, frameState)\n                // if (range < visualizer._minRange) {\n                //     debugger\n                //     renerable = false;\n                // } else {\n                // var visibility = frameState.cullingVolume.computeVisibility(boundingVolume)\n                // if (visibility == Intersect.OUTSIDE) {\n                //     renerable = false;\n                // }\n                // }\n            }\n\n            //render\n\n            if (renerable) {\n\n                var oldRS = drawCommand.renderState;\n\n                const viewport = renderTarget.viewport;\n\n                var rs = this._cesiumRenderStateCache.get(drawCommand, currenCamera);\n                // rs = new RenderState(rs)\n                rs.depthMask = true;\n                rs.depthTest.enabled = true;\n                rs.stencilTest.enabled = false;\n                rs.blending.enabled = false\n                rs.viewport = viewport;\n                drawCommand.renderState = rs;\n\n                const gl = context._gl;\n                RenderState.apply(gl, rs, context._defaultPassState);\n\n                drawCommand.framebuffer = framebuffer;\n                drawCommand.execute(context);\n                drawCommand.framebuffer = null;\n                drawCommand.renderState = oldRS\n            }\n\n            //restore camera\n            frameState.camera = globalCamera;\n            if (currenCamera !== globalCamera) us.update(frameState);\n\n        }\n\n        function clear(clearColor, depth, stencil) {\n\n            if (!clearCommandScratch) {\n                clearCommandScratch = new ClearCommand({\n                    color: new Color(0.0, 0.0, 0.0, 0.0)\n                });\n            }\n\n            if (clearColor) {\n                Color.clone(clearColor, clearCommandScratch.color);\n            } else {\n                Color.clone(Color.TRANSPARENT, clearCommandScratch.color);\n            }\n\n            if (this._currentRenderTarget) {\n\n                var framebuffers = webGLRenderTargets.get(this._currentRenderTarget);\n                if (!framebuffers) return;\n\n                var framebuffer = framebuffers[this._currentActiveCubeFace || 0];\n                if (!framebuffer) return\n\n                var frameState = this._frameState;\n                var clearCommand = clearCommandScratch;\n                if (typeof depth == 'number') {\n                    clearCommand.depth = depth;\n                } else {\n                    clearCommand.depth = this.autoClearDepth ? 1 : undefined;\n                }\n                if (typeof stencil == 'number') {\n                    clearCommand.stencil = stencil;\n                } else {\n                    clearCommand.stencil = this.autoClearStencil ? 0 : undefined;\n                }\n\n                clearCommand.framebuffer = framebuffer;\n                clearCommand.renderState = frameState.context._defaultRenderState;\n                clearCommand.execute(frameState.context);\n            }\n        }\n\n\n        /**\n         * \n         * @param {THREE.WebGLRenderTarget|THREE.WebGLRenderTargetCube} renderTarget \n         * @param {number} [activeCubeFace] \n         */\n        function readPixels(renderTarget, activeCubeFace) {\n\n            renderTarget = renderTarget || this._currentRenderTarget;\n            activeCubeFace = activeCubeFace || this._currentActiveCubeFace;\n\n            var framebuffers = webGLRenderTargets.get(renderTarget);\n            if (!framebuffers) return;\n            let framebuffer = framebuffers[activeCubeFace || 0];\n            return RendererUtils.readPixels(this._frameState, {\n                framebuffer: framebuffer,\n                x: 0,\n                y: 0,\n                width: renderTarget.width,\n                height: renderTarget.height\n            });\n        }\n\n        /**\n         * \n         * @param {THREE.WebGLRenderTarget|THREE.WebGLRenderTargetCube} renderTarget \n         * @param {number} [x] \n         * @param {number} [y] \n         * @param {number} [width] \n         * @param {number} [height] \n         * @param {ArrayBufferView} [buffer] \n         * @param {number} [activeCubeFaceIndex] \n         */\n        function readRenderTargetPixels(renderTarget, x, y, width, height, buffer, activeCubeFaceIndex) {\n            renderTarget = renderTarget || this._currentRenderTarget;\n            activeCubeFaceIndex = activeCubeFaceIndex || this._currentActiveCubeFace;\n\n            var texture = renderTarget.texture\n            var framebuffers = webGLRenderTargets.get(renderTarget);\n            if (!framebuffers) return;\n            let framebuffer = framebuffers[activeCubeFaceIndex || 0];\n            return RendererUtils.readPixels(this._frameState, {\n                framebuffer: framebuffer,\n                x: x || 0,\n                y: y || 0,\n                width: width || renderTarget.width,\n                height: height || renderTarget.height,\n                pixelFormat: ConstantMap.formatsMap[texture.format],\n                pixelDatatype: ConstantMap.typesMap[texture.type]\n            }, buffer);\n        }\n\n        function dispose() {\n            webglRenderItems.dispose()\n            webGLRenderTargets.dispose();\n        }\n\n        this.init = init\n        this.render = render;\n        this.renderBufferDirect = renderBufferDirect;\n        this.clear = clear\n        this.readPixels = readPixels\n        this.readRenderTargetPixels = readRenderTargetPixels;\n        this.dispose = dispose;\n\n    }\n\n    get capabilities() { return this._capabilities }\n    get extensions() { return this._extensions }\n\n    set needsUpdate(val) { if (val) this.version++; }\n\n    get outputEncoding() { return this._outputEncoding }\n    set outputEncoding(val) {\n        if (val != this._outputEncoding) {\n            this._outputEncoding = val;\n            this.needsUpdate = true;\n        }\n    }\n\n    get toneMapping() { return this._toneMapping }\n    set toneMapping(val) {\n        if (val != this._toneMapping) {\n            this._toneMapping = val;\n            this.needsUpdate = true;\n        }\n    }\n\n    get physicallyCorrectLights() { return this._physicallyCorrectLights }\n    set physicallyCorrectLights(val) {\n        if (val != this._physicallyCorrectLights) {\n            this._physicallyCorrectLights = val;\n            this.needsUpdate = true;\n        }\n    }\n\n\n    setRenderTarget(renderTarget, activeCubeFace, activeMipmapLevel) {\n\n        this._currentActiveCubeFace = activeCubeFace;\n        this._currentActiveMipmapLevel = activeMipmapLevel;\n\n        if (this._currentRenderTarget != renderTarget) {\n            this._currentRenderTarget = renderTarget;\n        }\n    }\n\n    getClearAlpha() {\n        return this._clearAlpha\n    }\n    setClearAlpha(clearAlpha) {\n        this._clearAlpha = clearAlpha;\n    }\n\n    getClearColor() {\n        return this._clearColor;\n    }\n    setClearColor(clearColor) {\n        if (this._clearColor.isColor) {\n            this._clearColor.set(clearColor);\n        }\n        else {\n            this._clearColor = clearColor;\n        }\n    }\n\n    getRenderTarget() {\n        return this._currentRenderTarget;\n    }\n\n    getActiveCubeFace() {\n        return this._currentActiveCubeFace;\n    }\n    getActiveMipmapLevel() {\n        return this._currentActiveMipmapLevel;\n    }\n\n    /**\n     * @return {WebGLRenderingContext|WebGL2RenderingContext}\n     */\n    getContext() {\n        if (!this._frameState) return;\n        return this._frameState.context._gl;\n    }\n\n    setPixelRatio(pixelRatio) {\n        this._pixelRatio = pixelRatio\n    }\n\n    /**\n     * \n     * @param {THREE.WebGLRenderer} renderer \n     */\n    copy(renderer) {\n\n        this.autoClear = renderer.autoClear;\n        this.autoClearColor = renderer.autoClearColor\n        this.autoClearDepth = renderer.autoClearDepth\n        this.autoClearStencil = renderer.autoClearStencil\n\n        this.shadowMap.enabled = renderer.shadowMap.enabled\n        this.shadowMap.type = renderer.shadowMap.type\n        this.shadowMap.autoUpdate = renderer.shadowMap.autoUpdate\n\n        // this.gammaFactor=renderer.gammaFactor;\n        // this.gammaOutput=renderer.gammaOutput\n\n        this.outputEncoding = renderer.outputEncoding;\n\n\n        // physical lights\n\n        this.physicallyCorrectLights = renderer.physicallyCorrectLights;\n\n        // tone mapping\n\n        this.toneMapping = renderer.toneMapping;\n        this.toneMappingExposure = renderer.toneMappingExposure;\n        // this.toneMappingWhitePoint = renderer.toneMappingWhitePoint\n\n        // morphs\n\n        this.maxMorphTargets = renderer.maxMorphTargets;\n        this.maxMorphNormals = renderer.maxMorphNormals;\n\n        this.clippingPlanes = renderer.clippingPlanes; // GUI sets it to globalPlanes\n        this.localClippingEnabled = renderer.localClippingEnabled;\n\n    }\n\n    //仅保留定义，部分外部依赖可能会调用这些函数\n    compile(scene, camera) { }\n    setSize() { }\n    clearDepth() { }\n\n}\n\nexport default WebGLRenderer;\n",
    "\nimport CameraUtils from  \"../CameraUtils.js\";\n\nimport MeshVisualizer from  \"../MeshVisualizer.js\";\n\nimport WebGLGeometries from  \"./WebGLGeometries.js\";\n\n// import vsm_frag from '../Shaders/vsm_frag.glsl.js';\n// import vsm_vert from '../Shaders/vsm_vert.glsl.js';\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\n\n\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\n\\\nuniform vec2 resolution;\\n\\\nuniform float radius;\\n\\\n#include <packing>\\n\\\nvoid main() {\\n\\\n\tfloat mean = 0.0;\\n\\\n\tfloat squared_mean = 0.0;\\n\\\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\\n\\\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n\\\n\t\t#ifdef HORIZONAL_PASS\\n\\\n\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n\\\n\t\tmean += distribution.x;\\n\\\n\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n\\\n\t\t#else\\n\\\n\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\\n\\\n\t\tmean += depth;\\n\\\n\t\tsquared_mean += depth * depth;\\n\\\n\t\t#endif\\n\\\n\t}\\n\\\n\tmean = mean * HALF_SAMPLE_RATE;\\n\\\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\\n\\\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\\n\\\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n\\\n}\";\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n/**\n * \n * @param {WebGLRenderer} _renderer \n * @param {*} _objects \n * @param {number} maxTextureSize \n */\nfunction WebGLShadowMap(_renderer, _objects, maxTextureSize) {\n\n\tthis.enabled = false;\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\tthis.initialized = false;\n\tif (typeof THREE == 'undefined') {\n\t\tthis.render = function () { }\n\t\treturn;\n\t}\n\n\tlet { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, LinearFilter, PCFShadowMap, VSMShadowMap, RGBADepthPacking, NoBlending,\n\t\tWebGLRenderTarget,\n\t\tMeshDepthMaterial,\n\t\tMeshDistanceMaterial,\n\t\tShaderMaterial,\n\t\tBufferAttribute,\n\t\tBufferGeometry,\n\t\tMesh,\n\t\tVector4,\n\t\tVector2,\n\t\tFrustum\n\t} = THREE;\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial({\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t});\n\tshadowMaterialVertical.autoRefresh = true\n\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\tshadowMaterialHorizonal.autoRefresh = true;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tvar setAttributeFun = fullScreenTri.setAttribute ? 'setAttribute' : 'addAttribute';\n\tfullScreenTri[setAttributeFun](\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array([- 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5]),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh(fullScreenTri, shadowMaterialVertical);\n\n\tconst scope = this;\n\n\n\tObject.defineProperty(this, 'maxTextureSize', {\n\t\tget() { return maxTextureSize },\n\t\tset(val) {\n\t\t\tmaxTextureSize = val;\n\t\t}\n\t})\n\n\tlet _type = PCFShadowMap, mapVersion = 0;\n\tObject.defineProperties(this, {\n\t\tmapNeedsUpdate: {\n\t\t\tset(val) {\n\t\t\t\tif (val) mapVersion++;\n\t\t\t}\n\t\t},\n\t\ttype: {\n\t\t\tget() {\n\t\t\t\treturn _type\n\t\t\t},\n\t\t\tset(val) {\n\t\t\t\tif (val != _type) {\n\t\t\t\t\t_type = val;\n\t\t\t\t\tthis.mapNeedsUpdate = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\n\tvar shadowMapRenderState, shadowMapRenderStateOpts = {\n\t\tblending: {\n\t\t\tenabled: false\n\t\t},\n\t\tscissorTest: {\n\t\t\tenabled: false\n\t\t},\n\t\tdepthTest: {\n\t\t\tenabled: true\n\t\t},\n\t\tdepthMask: true,\n\t\tcolorMask: {\n\t\t\tred: true,\n\t\t\tgreen: true,\n\t\t\tblue: true,\n\t\t\talpha: true\n\t\t},\n\t\tstencilTest: {\n\t\t\tenabled: false\n\t\t}\n\t}\n\n\ttry {\n\t\tshadowMapRenderState = new Cesium.RenderState(shadowMapRenderStateOpts);\n\t} catch (err) {\n\t\tshadowMapRenderState.lineWidth = 0\n\t\tshadowMapRenderState =new Cesium.RenderState(shadowMapRenderStateOpts);\n\t}\n\t\n\t/**\n\t * \n\t * @param {*} lights \n\t * @param {*} scene \n\t * @param {Cesium.FrameState} frameState \n\t * @param {MeshVisualizer} visualizer \n\t */\n\tthis.render = function (lights, scene, frameState, visualizer) {\n\n\t\t// if (scope.enabled === false) return;\n\t\tif (scope.autoUpdate === false && scope.needsUpdate === false) return;\n\n\t\tif (lights.length === 0) return;\n\t\tlights = lights.slice();\n\n\t\tconst uniformState = frameState.context.uniformState;\n\t\tconst camera = frameState.camera;\n\t\tconst currentCullingVolume = frameState.cullingVolume;\n\n\t\tconst currentWebglRenderState = _renderer._webglRenderStates.get(scene, camera);\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\t\tconst autoClear = _renderer.autoClear;\n\t\tconst currentRenderState = _renderer.renderState;\n\t\t_renderer.autoClear = false;\n\t\t/**\n\t\t * @type {Cesium.RenderState}\n\t\t */\n\t\tconst renderState = shadowMapRenderState;\n\t\t_renderer.renderState = renderState;\n\n\t\t//camera reference frame\n\t\tlet _referenceFrame = this._referenceFrame || {};\n\n\t\tthis._referenceFrame = _referenceFrame;\n\t\t_referenceFrame.matrix = visualizer._actualModelMatrixYup || visualizer.modelMatrix;\n\t\t_referenceFrame.inverseMatrix = visualizer._actualModelMatrixYupInverse || visualizer._actualModelMatrixInverse;\n\n\t\t// render depth map\n\n\t\tfor (let i = 0, il = lights.length; i < il; i++) {\n\n\t\t\tconst light = lights[i];\n\t\t\tconst shadow = light.shadow;\n\t\t\tlet shadowCameraCesium, shadowCamera = shadow.camera;\n\n\t\t\tif (shadow.autoUpdate === false && shadow.needsUpdate === false) continue;\n\n\t\t\tif (shadow === undefined) {\n\n\t\t\t\tconsole.warn('Mesh3D.WebGLShadowMap:', light, 'has no shadow.');\n\t\t\t\tcontinue;\n\n\t\t\t}\n\t\t\tif (!shadowCamera.isPerspectiveCamera && !shadowCamera.isOrthographicCamera) {\n\t\t\t\tconsole.warn('Mesh3D.WebGLShadowMap:', light, 'camera is not supported.');\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t_shadowMapSize.copy(shadow.mapSize);\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply(shadowFrameExtents);\n\n\t\t\t_viewportSize.copy(shadow.mapSize);\n\n\t\t\tif (_shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize) {\n\n\t\t\t\tif (_shadowMapSize.x > maxTextureSize) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor(maxTextureSize / shadowFrameExtents.x);\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif (_shadowMapSize.y > maxTextureSize) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor(maxTextureSize / shadowFrameExtents.y);\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//TODO:处理阴影贴图尺寸变化的情况\n\t\t\t// // if (shadow.map && (shadow.map.width != _viewport.width || shadow.map.height != _viewport.height)) {\n\t\t\t// if (shadow.map && (shadow.mapSize.x != _viewport.width || shadow.mapSize.y != _viewport.height)) {\n\t\t\t// \tif (shadow.mapPass) {\n\t\t\t// \t\tshadow.mapPass.texture.dispose();\n\t\t\t// \t\tshadow.mapPass.dispose()\n\t\t\t// \t\tshadow.mapPass = null;\n\t\t\t// \t}\n\t\t\t// \tshadow.map.dispose()\n\t\t\t// \tshadow.map.texture.dispose();\n\t\t\t// \tshadow.map = null;\n\t\t\t// }\n\n\t\t\t/*<<阴影类型type变化时更新阴影贴图 */\n\t\t\tvar mapNeedsUpdate = shadow.__mapVersion != mapVersion;\n\t\t\tif (mapNeedsUpdate) {\n\t\t\t\tif (shadow.mapPass) {\n\t\t\t\t\tshadow.mapPass.texture.dispose();\n\t\t\t\t\tshadow.mapPass.dispose()\n\t\t\t\t\tshadow.mapPass = null;\n\t\t\t\t}\n\t\t\t\tif (shadow.map) {\n\t\t\t\t\tshadow.map.dispose()\n\t\t\t\t\tshadow.map.texture.dispose();\n\t\t\t\t\tshadow.map = null;\n\t\t\t\t}\n\t\t\t\tshadow.__mapVersion = mapVersion;\n\t\t\t}\n\t\t\t/*阴影类型type变化时更新阴影贴图>> */\n\n\t\t\tif (this.type !== VSMShadowMap && shadow.mapPass) {\n\t\t\t\tif (shadow.map) {\n\t\t\t\t\tshadow.map.texture.dispose();\n\t\t\t\t\tshadow.map.dispose()\n\t\t\t\t\tshadow.map = null;\n\t\t\t\t}\n\t\t\t\tshadow.mapPass.dispose()\n\t\t\t\tshadow.mapPass.texture.dispose();\n\t\t\t\tshadow.mapPass = null;\n\t\t\t}\n\n\t\t\tif (shadow.mapPass === null && !shadow.isPointLightShadow && this.type === VSMShadowMap) {\n\n\t\t\t\tif (shadow.map) {\n\t\t\t\t\tshadow.map.texture.dispose();\n\t\t\t\t\tshadow.map.dispose()\n\t\t\t\t}\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat, stencilBuffer: false };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget(_shadowMapSize.x, _shadowMapSize.y, pars);\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget(_shadowMapSize.x, _shadowMapSize.y, pars);\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif (shadow.map === null) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat, stencilBuffer: false };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget(_shadowMapSize.x, _shadowMapSize.y, pars);\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget(shadow.map);\n\t\t\t_renderer.clear(Cesium.Color.WHITE, 1, 0)\n\n\t\t\tif (this.enabled) {\n\n\t\t\t\tconst viewportCount = shadow.getViewportCount();\n\t\t\t\tfor (let vp = 0; vp < viewportCount; vp++) {\n\n\t\t\t\t\tconst viewport = shadow.getViewport(vp);\n\n\t\t\t\t\t_viewport.set(\n\t\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t\t);\n\n\t\t\t\t\tlet currentViewport = shadow.map.viewport;\n\t\t\t\t\tshadow.map.viewport = _viewport;\n\n\t\t\t\t\tshadow.updateMatrices(light, vp);\n\n\t\t\t\t\tif (shadow.camera.isPerspectiveCamera) shadowCameraCesium = CameraUtils.fromPerspectiveCamera3js(shadowCamera, visualizer._scene, _referenceFrame)\n\t\t\t\t\telse if (shadow.camera.isOrthographicCamera) shadowCameraCesium = CameraUtils.fromOrthographicCamera3js(shadowCamera, visualizer._scene, _referenceFrame)\n\n\t\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\t\t//\n\n\t\t\t\t\tframeState.camera = shadowCameraCesium;\n\t\t\t\t\tuniformState.update(frameState);\n\t\t\t\t\t// frameState.cullingVolume = shadowCameraCesium.frustum.computeCullingVolume(\n\t\t\t\t\t// \tshadowCameraCesium.position,\n\t\t\t\t\t// \tshadowCameraCesium.direction,\n\t\t\t\t\t// \tshadowCameraCesium.up\n\t\t\t\t\t// );\n\n\t\t\t\t\t//\n\n\t\t\t\t\t// const currentWebglRenderState = visualizer.getAndUpdateRenderState(scene, frameState, shadowCamera);\n\n\t\t\t\t\trenderState.viewport = _viewport;\n\t\t\t\t\tcurrentWebglRenderState.renderables.forEach(object => {\n\t\t\t\t\t\trenderObject(object, camera, shadowCameraCesium, light, this.type, false, currentWebglRenderState, shadow.camera);\n\t\t\t\t\t});\n\n\t\t\t\t\tframeState.camera = camera;\n\t\t\t\t\tframeState.cullingVolume = currentCullingVolume;\n\t\t\t\t\tuniformState.update(frameState);\n\n\t\t\t\t\tshadow.map.viewport = currentViewport;\n\t\t\t\t\tshadow.camera._referenceFrame = null;\n\t\t\t\t}\n\n\t\t\t\t// do blur pass for VSM\n\n\t\t\t\tif (!shadow.isPointLightShadow && this.type === VSMShadowMap) {\n\n\t\t\t\t\tVSMPass(shadow, camera);\n\n\t\t\t\t}\n\n\t\t\t\tshadow.needsUpdate = false;\n\n\t\t\t\tif (shadow.onCameraChanged) {\n\t\t\t\t\tshadow.onCameraChanged(shadow.map)\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\t_renderer.renderState = currentRenderState;\n\t\t_renderer.autoClear = autoClear;\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget(currentRenderTarget, activeCubeFace, activeMipmapLevel);\n\n\t};\n\n\t//<<2020.10.23\n\tlet VSMPassObjects = new WeakMap();\n\t/**\n\t * \n\t * @param {THREE.Geometry|THREE.BufferGeometry} geometry \n\t * @param {THREE.Material} material \n\t */\n\tfunction getVSMPassMesh(geometry, material) {\n\t\tlet objects = VSMPassObjects.get(geometry)\n\t\tif (objects === undefined) {\n\t\t\tobjects = new WeakMap()\n\t\t\tVSMPassObjects.set(geometry, objects)\n\t\t\tgeometry.addEventListener('dispose', function () {\n\t\t\t\tVSMPassObjects.delete(geometry);\n\t\t\t});\n\t\t}\n\t\tvar object = objects.get(material)\n\t\tif (object == undefined) {\n\t\t\tobject = new Mesh(geometry, material);\n\t\t\tmaterial.addEventListener('dispose', function () {\n\t\t\t\tobjects.delete(material);\n\t\t\t});\n\t\t\tobjects.set(material, object);\n\t\t}\n\n\t\treturn object;\n\t}\n\t//>>2020.10.23\n\n\tfunction VSMPass(shadow, camera) {\n\n\t\tconst Color = Cesium.Color;\n\t\tconst geometry = fullScreenMesh.geometry;\n\t\t//orig:\n\t\t// const geometry = _objects.update(fullScreenMesh);\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\n\t\t_renderer.renderState.depthTest.enabled = false;\n\t\t_renderer.renderState.depthMask = false;\n\t\t_renderer.shadowMap.enabled = false;\n\n\t\t_renderer.setRenderTarget(shadow.mapPass);\n\t\t_renderer.clear(Color.WHITE, 1, 0);\n\n\t\t//orig:\n\t\t// _renderer.renderBufferDirect(camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null);\n\n\t\t//<<2020.10.23\n\t\tlet vsmMesh = getVSMPassMesh(geometry, shadowMaterialVertical);\n\t\tvsmMesh.frustumCulled = false;\n\t\t_renderer.render(vsmMesh, camera);\n\t\t//>>2020.10.23\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget(shadow.map);\n\t\t_renderer.clear(Color.WHITE, 1, 0);\n\n\t\t//<<2020.10.23\n\t\tvsmMesh = getVSMPassMesh(geometry, shadowMaterialHorizonal);\n\t\tvsmMesh.frustumCulled = false;\n\t\t_renderer.render(vsmMesh, camera);\n\t\t//>>2020.10.23\n\t\t_renderer.shadowMap.enabled = true;\n\t\t_renderer.renderState.depthTest.enabled = true;\n\t\t_renderer.renderState.depthMask = true;\n\n\t\t//orig:\n\t\t// _renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant(useMorphing, useSkinning, useInstancing) {\n\n\t\tconst index = useMorphing << 0 //| useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[index];\n\n\t\tif (material === undefined) {\n\n\t\t\tmaterial = new MeshDepthMaterial({\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\t// skinning: useSkinning,\n\n\t\t\t\t//\n\t\t\t\t// depthTest: true,\n\t\t\t\t// depthWrite: true,\n\t\t\t\t// blending: NoBlending,\n\t\t\t\t// stencilWrite: false\n\t\t\t});\n\n\t\t\t_depthMaterials[index] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant(useMorphing, useSkinning, useInstancing) {\n\n\t\tconst index = useMorphing << 0 //| useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[index];\n\n\t\tif (material === undefined) {\n\n\t\t\tmaterial = new MeshDistanceMaterial({\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\t// skinning: useSkinning\n\n\t\t\t\t//\n\t\t\t\t// , depthTest: true,\n\t\t\t\t// depthWrite: true,\n\t\t\t\t// blending: NoBlending,\n\t\t\t\t// stencilWrite: false\n\t\t\t});\n\n\t\t\t_distanceMaterials[index] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial(object, geometry, material, light, shadowCameraNear, shadowCameraFar, type) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif (light.isPointLight === true) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif (customMaterial === undefined) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif (material.morphTargets === true) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\t/*three.js<1.3\n\t\t\tif (object.isSkinnedMesh === true) {\n\n\t\t\t\tif (material.skinning === true) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn('Mesh3D.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object);\n\n\t\t\t\t}\n\n\t\t\t}*/\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant(useMorphing, useSkinning, useInstancing);\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif (_renderer.localClippingEnabled &&\n\t\t\tmaterial.clipShadows === true &&\n\t\t\tmaterial.clippingPlanes.length !== 0) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[keyA];\n\n\t\t\tif (materialsForVariant === undefined) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[keyA] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[keyB];\n\n\t\t\tif (cachedMaterial === undefined) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[keyB] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif (type === VSMShadowMap) {\n\n\t\t\tresult.side = (material.shadowSide !== null) ? material.shadowSide : material.side;\n\n\t\t} else {\n\t\t\tresult.side = (material.shadowSide !== null) ? material.shadowSide : shadowSide[material.side];\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif (light.isPointLight === true && result.isMeshDistanceMaterial === true) {\n\t\t\tresult.referencePosition.setFromMatrixPosition(light.matrixWorld);\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\t\t}\n\t\t//for WebGLUinforms,WebGLRenderItems\n\t\tresult._isShadowDepthMaterial = true\n\n\t\treturn result;\n\n\t}\n\n\tconst shadowMapRenderPassName = 'shadowMap';\n\tfunction renderObject(object, camera, shadowCamera, light, type, recursive, currentWebglRenderState, shadowCamera3js) {\n\n\t\tif (object.visible === false) return;\n\n\t\tconst visible = !object.layers || !camera.layers || object.layers.test(camera.layers);\n\n\t\tif (visible && (object.isMesh || object.isLine || object.isPoints)) {\n\n\t\t\tif ((object.castShadow || (object.receiveShadow && type === VSMShadowMap))) {//} && (!object.frustumCulled || _frustum.intersectsObject(object))) {\n\n\t\t\t\tif (\n\t\t\t\t\t//light.name != \"sunLight\" &&\n\t\t\t\t\tobject.frustumCulled && !_frustum.intersectsObject(object)) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// object.modelViewMatrix.multiplyMatrices(shadowCamera.matrixWorldInverse, object.matrixWorld);\n\n\t\t\t\t//orig:\n\t\t\t\t// const geometry = _objects.update(object);\n\n\t\t\t\tlet geometry = WebGLGeometries.get(object.geometry, object.material);\n\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif (Array.isArray(material)) {\n\n\t\t\t\t\tvar groupsOptimized = geometry.groupsOptimized\n\n\t\t\t\t\tfor (let renderItemIndex = 0; renderItemIndex < groupsOptimized.length; renderItemIndex++) {\n\n\t\t\t\t\t\tconst { materialIndex, groupIndex } = groupsOptimized[renderItemIndex];\n\n\t\t\t\t\t\tconst groupMaterial = material[materialIndex];\n\n\t\t\t\t\t\tif (groupMaterial.visible) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial(object, geometry, groupMaterial, light, shadowCamera3js.near, shadowCamera3js.far, type);\n\t\t\t\t\t\t\t_renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, { materialIndex, groupIndex, renderItemIndex }, currentWebglRenderState, shadowCamera3js, shadowMapRenderPassName + light.uuid);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} else if (material.visible) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial(object, geometry, material, light, shadowCamera3js.near, shadowCamera3js.far, type);\n\n\t\t\t\t\t_renderer.renderBufferDirect(shadowCamera, null, geometry, depthMaterial, object, null, currentWebglRenderState, shadowCamera3js, shadowMapRenderPassName + light.uuid);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\t\tif (recursive == false || !children) return\n\n\t\tfor (let i = 0, l = children.length; i < l; i++) {\n\n\t\t\trenderObject(children[i], camera, shadowCamera, light, type, recursive, currentWebglRenderState, shadowCamera3js);\n\n\t\t}\n\n\t}\n\n}\n\nexport default WebGLShadowMap;\n",
    "import ConstantMap from  \"./ConstantMap.js\";\n\n\nfunction WebGLTextures(visualizer) {\n\n    const {\n        TextureMinificationFilter, TextureWrap,\n        ContextLimits, Sampler,\n        PixelFormat, defined, Texture, CubeMap\n    } = Cesium;\n\n    const _Math = Cesium.Math;\n\n    // var renderer = visualizer.renderer;\n    // var cubemaps = renderer._cubemaps;\n    var textureCache = visualizer._textureCache;\n\n    var textures = new WeakMap();\n    var textureReferences = new WeakMap();\n    var disposeCallbacks = new WeakMap();\n\n    /**\n     * \n     * @param {Cesium.Texture|Cesium.CubeMapFace} destTexture \n     * @param {object} source\n     * @param {ArrayBufferView} source.arrayBufferView\n     * @param {number} source.width\n     * @param {number} source.height\n     * @param {ArrayBufferView[]} source.mipLevels\n     * @private\n     */\n    function uploadTextureData(destTexture, source) {\n\n        var size = destTexture._size;\n        var pixelFormat = destTexture._pixelFormat;\n        var pixelDatatype = destTexture._pixelDatatype;\n\n        var preMultiplyAlpha = destTexture._preMultiplyAlpha;\n        var flipY = destTexture._flipY;\n\n        /**\n         * @type {WebGLRenderingContext}\n         * @private\n         */\n        var gl = destTexture._gl || destTexture._context._gl;\n        var textureTarget = destTexture._textureTarget;\n        var texture = destTexture._texture;\n        var targetFace = typeof destTexture._targetFace == 'number' ? destTexture._targetFace : textureTarget;\n\n        var width = source.width;\n        var height = source.height;\n        var arrayBufferView = source.arrayBufferView;\n\n        gl.activeTexture(gl.TEXTURE0);\n        gl.bindTexture(textureTarget, texture);\n\n        var unpackAlignment = 4;\n\n        gl.pixelStorei(gl.UNPACK_ALIGNMENT, unpackAlignment);\n        gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n        gl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, false);\n\n        // Source: typed array\n        var arrayBufferView = source.arrayBufferView;\n\n        var isCompressed = PixelFormat.isCompressedFormat(pixelFormat);\n        if (isCompressed) {\n            gl.compressedTexImage2D(\n                targetFace,\n                0,//level\n                pixelFormat,\n                width,\n                height,\n                0,\n                arrayBufferView\n            );\n        } else {\n            gl.texImage2D(\n                targetFace,\n                0,\n                pixelFormat,\n                width,\n                height,\n                0,\n                pixelFormat,\n                pixelDatatype,\n                arrayBufferView\n            );\n        }\n\n        if (defined(source.mipLevels)) {\n            var mipWidth = width;\n            var mipHeight = height;\n            for (var i = 0; i < source.mipLevels.length; ++i) {\n                mipWidth = Math.floor(mipWidth / 2) | 0;\n                if (mipWidth < 1) {\n                    mipWidth = 1;\n                }\n                mipHeight = Math.floor(mipHeight / 2) | 0;\n                if (mipHeight < 1) {\n                    mipHeight = 1;\n                }\n                if (isCompressed) {\n                    gl.compressedTexImage2D(\n                        targetFace,\n                        i + 1,\n                        pixelFormat,\n                        mipWidth,\n                        mipHeight,\n                        0,\n                        source.mipLevels[i]\n                    );\n                } else {\n                    gl.texImage2D(\n                        targetFace,\n                        i + 1,\n                        pixelFormat,\n                        mipWidth,\n                        mipHeight,\n                        0,\n                        pixelFormat,\n                        pixelDatatype,\n                        source.mipLevels[i]\n                    );\n                }\n            }\n        }\n\n        gl.bindTexture(textureTarget, null);\n    }\n\n    function convertSampler(texture3js) {\n        var sampler = {};\n\n        sampler.minificationFilter = ConstantMap.minFilterMap[texture3js.minFilter];\n        sampler.magnificationFilter = ConstantMap.magFilterMap[texture3js.magFilter];\n        sampler.wrapS = ConstantMap.textureWrapMap[texture3js.wrapS];\n        sampler.wrapT = ConstantMap.textureWrapMap[texture3js.wrapT];\n        sampler.maximumAnisotropy = texture3js.anisotropy;\n        return new Sampler(sampler);\n    }\n\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     * @param {Cesium.Context} frameState \n     * @private\n     */\n    function createTexture(texture3js, context) {\n        var format = formatsMap[texture3js.format];\n        var type = typesMap[texture3js.type];\n        var preMultiplyAlpha = texture3js.premultiplyAlpha;\n        var flipY = texture3js.flipY;\n        var sampler = convertSampler(texture3js);\n        var image = texture3js.image;\n        var mipmaps = texture3js.mipmaps;\n        var width = image.width;\n        var height = image.height;\n        var hasMipmaps = mipmaps && mipmaps.length > 0;\n\n        //gen mipmap\n\n        var mipmap =\n            (sampler.minificationFilter === TextureMinificationFilter.NEAREST_MIPMAP_NEAREST) ||\n            (sampler.minificationFilter === TextureMinificationFilter.NEAREST_MIPMAP_LINEAR) ||\n            (sampler.minificationFilter === TextureMinificationFilter.LINEAR_MIPMAP_NEAREST) ||\n            (sampler.minificationFilter === TextureMinificationFilter.LINEAR_MIPMAP_LINEAR);\n\n        //PowerOfTwo\n\n        var requiresNpot = mipmap ||\n            (sampler.wrapS === TextureWrap.REPEAT) ||\n            (sampler.wrapS === TextureWrap.MIRRORED_REPEAT) ||\n            (sampler.wrapT === TextureWrap.REPEAT) ||\n            (sampler.wrapT === TextureWrap.MIRRORED_REPEAT);\n\n        var source = image;\n\n        var npot = source && (!_Math.isPowerOfTwo(source.width) || !_Math.isPowerOfTwo(source.height));\n        if (requiresNpot && npot) {\n\n            // WebGL requires power-of-two texture dimensions for mipmapping and REPEAT/MIRRORED_REPEAT wrap modes.\n            var canvas = document.createElement('canvas');\n            canvas.width = _Math.nextPowerOfTwo(source.width);\n            canvas.height = _Math.nextPowerOfTwo(source.height);\n            var canvasContext = canvas.getContext('2d');\n            canvasContext.drawImage(source, 0, 0, source.width, source.height, 0, 0, canvas.width, canvas.height);\n            source = canvas;\n            width = canvas.width;\n            height = canvas.height;\n        }\n\n        //maximumTextureSize\n\n        let needsResize = false;\n        if (width > ContextLimits.maximumTextureSize) {\n            width = ContextLimits.maximumTextureSize;\n            needsResize = true;\n\n            console.warn(\"Mesh3D.WebGLTextures:Width should be less than or equal to the maximum texture size (\" +\n                ContextLimits.maximumTextureSize +\n                \").  Check maximumTextureSize.\");\n        }\n        if (height > ContextLimits.maximumTextureSize) {\n            console.warn(\"Mesh3D.WebGLTextures:Height should be less than or equal to the maximum texture size (\" +\n                ContextLimits.maximumTextureSize +\n                \").  Check maximumTextureSize.\");\n            height = ContextLimits.maximumTextureSize;\n            needsResize = true;\n        }\n\n        if (needsResize) {\n\n            console.warn(\"Mesh3D.WebGLTextures:Width and height must be less than or equal to the maximum texture size (\" +\n                ContextLimits.maximumTextureSize +\n                \").  Check maximumTextureSize.\");\n\n            var canvas = document.createElement('canvas');\n            canvas.width = width;\n            canvas.height = height;\n            var canvasContext = canvas.getContext('2d');\n            canvasContext.drawImage(source, 0, 0, source.width, source.height, 0, 0, canvas.width, canvas.height);\n            source = canvas;\n            width = canvas.width;\n            height = canvas.height;\n        }\n\n        //new Texture\n\n        var texture = new Texture({\n            context: context,\n            source: hasMipmaps ? undefined : source,\n            width: width,\n            height: height,\n            pixelFormat: format,\n            pixelDatatype: type,\n            sampler: sampler,\n            flipY: flipY,\n            preMultiplyAlpha: preMultiplyAlpha\n        });\n\n        if (mipmap) {\n            texture.generateMipmap();\n        }\n\n        return texture;\n    }\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     * @param {Cesium.Context} context \n     * @private\n     */\n    function createDataTexture(texture3js, context) {\n        var format = formatsMap[texture3js.format];\n        var type = typesMap[texture3js.type];\n        var preMultiplyAlpha = texture3js.premultiplyAlpha;\n        var flipY = texture3js.flipY;\n        var sampler = convertSampler(texture3js);\n        var image = texture3js.image;\n        var mipmaps = texture3js.mipmaps;\n        var width = image.width > 1 ? image.width : 1;\n        var height = image.height > 1 ? image.height : 1;\n        var hasMipmaps = mipmaps && mipmaps.length > 0;\n\n        var texture = new Texture({\n            context: context,\n            source: hasMipmaps ? undefined : {\n                arrayBufferView: image.data,\n                width: width,\n                height: height\n            },\n            width: width,\n            height: height,\n            pixelFormat: format,\n            pixelDatatype: type,\n            sampler: sampler,\n            flipY: flipY,\n            preMultiplyAlpha: preMultiplyAlpha\n        });\n\n        if (hasMipmaps) {\n            debugger\n            var source = { width, height };\n            source.arrayBufferView = mipmaps[0].data;\n\n            if (mipmaps.length > 1) {\n                var mipLevels = [];\n                for (let i = 1; i < mipmaps.length; i++) {\n                    mipLevels.push(mipmaps[i].data)\n                }\n                source.mipLevels = mipLevels;\n            }\n\n            texture._pixelFormat = format;\n            uploadTextureData(texture, source);\n            texture._initialized = true;\n        }\n\n        return texture;\n    }\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     * @param {Cesium.Context} context \n     * @private\n     */\n    function createCompressedTexture(texture3js, context) {\n        var format = formatsMap[texture3js.format];\n        var type = typesMap[texture3js.type];\n        var preMultiplyAlpha = texture3js.premultiplyAlpha;\n        var flipY = texture3js.flipY;\n        var sampler = convertSampler(texture3js);\n        var image = texture3js.image;\n        var mipmaps = texture3js.mipmaps;\n        var width = image.width\n        var height = image.height\n        var isCompressed = PixelFormat.isCompressedFormat(format);\n\n        var texture = new Texture({\n            context: context,\n            width: width,\n            height: height,\n            pixelFormat: isCompressed ? PixelFormat.RGBA : format,\n            pixelDatatype: type,\n            sampler: sampler,\n            flipY: flipY,\n            preMultiplyAlpha: preMultiplyAlpha\n        });\n\n        var source = { width, height };\n        source.arrayBufferView = mipmaps[0].data;\n\n        if (mipmaps.length > 1) {\n\n            var mipLevels = [];\n            for (let i = 1; i < mipmaps.length; i++) {\n                mipLevels.push(mipmaps[i].data)\n            }\n            source.mipLevels = mipLevels;\n        }\n\n        texture._pixelFormat = format;\n        uploadTextureData(texture, source);\n        texture._initialized = true;\n\n        return texture;\n    }\n\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     * @param {Cesium.Context} context \n     * @private\n     */\n    function createCubeMap(texture3js, context) {\n\n        var format = formatsMap[texture3js.format];\n        var type = typesMap[texture3js.type];\n        var images = texture3js.image;\n        var mipmaps = texture3js.mipmaps;\n\n        images = images.map(image => {\n            if (image.isDataTexture) {\n                debugger\n                return {\n                    arrayBufferView: image.data,\n                    width: image.data,\n                    height: image.height\n                }\n            }\n            return image;\n        })\n\n        var cubeMap = new CubeMap({\n            context: context,\n            source: {\n                positiveX: images[0],\n                negativeX: images[1],\n                positiveY: images[2],\n                negativeY: images[3],\n                positiveZ: images[4],\n                negativeZ: images[5]\n            },\n            pixelFormat: format,\n            pixelDatatype: type,\n            preMultiplyAlpha: texture3js.preMultiplyAlpha,\n            flipY: texture3js.flipY\n        });\n\n        if (mipmaps && mipmaps.length) {\n            debugger\n        }\n        return cubeMap;\n\n    }\n\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     * @param {Cesium.Context} context \n     * @private\n     */\n    function createCompressedCubeMap(texture3js, context) {\n        var format = formatsMap[texture3js.format];\n        var type = typesMap[texture3js.type];\n        var preMultiplyAlpha = texture3js.premultiplyAlpha;\n        var flipY = texture3js.flipY;\n\n        var images = texture3js.image;\n        var width = images.width || images[0].width\n        var height = images.height || images[0].height\n        var isCompressed = PixelFormat.isCompressedFormat(format);\n\n        var cubemap = new CubeMap({\n            width: width,\n            height: height,\n            context: context,\n            pixelFormat: isCompressed ? PixelFormat.RGBA : format,\n            pixelDatatype: type,\n            preMultiplyAlpha: preMultiplyAlpha,\n            flipY: flipY\n        });\n\n        var faces = [\"positiveX\", \"negativeX\", \"positiveY\", \"negativeY\", \"positiveZ\", \"negativeZ\"]\n        faces.forEach((face, faceId) => {\n\n            var cubeFace = cubemap[face], image = images[faceId],\n                mipmaps = image.mipmaps, source = { width, height };\n\n            source.arrayBufferView = mipmaps[0].data;\n\n            if (mipmaps.length > 1) {\n                var mipLevels = [];\n                for (let i = 1; i < mipmaps.length; i++) {\n                    mipLevels.push(mipmaps[i].data)\n                }\n                source.mipLevels = mipLevels;\n            }\n\n            cubeFace._pixelFormat = format;\n            uploadTextureData(cubeFace, source);\n            cubeFace._initialized = true;\n        });\n\n        return cubemap;\n    }\n\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     * @param {Cesium.Context} context \n     * @private\n     */\n    function createHdrCubeMap(texture3js, context) {\n\n        var format = formatsMap[texture3js.format];\n        var type = typesMap[texture3js.type];\n        var preMultiplyAlpha = texture3js.premultiplyAlpha;\n        var flipY = texture3js.flipY;\n\n        var images = texture3js.image.map(image => {\n            if (image.isDataTexture) {\n                var tex = image;\n                return {\n                    width: tex.image.width,\n                    height: tex.image.height,\n                    arrayBufferView: tex.image.data\n                }\n            }\n            return image;\n        });\n\n        var cubeMap = new CubeMap({\n            context: context,\n            source: {\n                positiveX: images[0],\n                negativeX: images[1],\n                positiveY: images[2],\n                negativeY: images[3],\n                positiveZ: images[4],\n                negativeZ: images[5]\n            },\n            pixelFormat: format,\n            pixelDatatype: type,\n            preMultiplyAlpha: preMultiplyAlpha,\n            flipY: flipY\n        });\n\n        return cubeMap;\n    }\n\n    function isImagesLoaded(texture3js) {\n        var images = texture3js.image, imagesLoaded = true;\n\n        if (!images || !images.length) return false;\n\n        for (let i = 0; i < images.length; i++) {\n            const image = images[i];\n            if (!image) {\n                imagesLoaded = false;\n                break;\n            }\n        }\n\n        return imagesLoaded;\n    }\n\n    this.has = function has(texture3js) {\n        return textures.has(texture3js)\n    }\n\n    /**\n     * \n     * @param {THREE.Texture|THREE.CanvasTexture|THREE.DataTexture|THREE.CubeTexture|THREE.DataTexture3D|THREE.DepthTexture|THREE.VideoTexture|THREE.CompressedTexture} texture3js \n     * @param {Cesium.FrameState} frameState  \n     * @returns {Cesium.Texture|Cesium.CubeMap}\n     */\n    this.get = function get(texture3js, frameState, defaultVal) {\n\n        // if (!texture3js) return defaultVal;\n\n        if (textureCache[texture3js.uuid]) {\n            return textureCache[texture3js.uuid];\n        }\n\n        var context = frameState.context;\n        var texture = textures.get(texture3js);\n\n        if (texture && texture.version != texture3js.version) {\n            texture = this.delete(texture3js);\n        }\n\n        if (!texture) {\n\n            var defaultTexture = visualizer.defaultTexture,\n                defaultCubeMap = visualizer.defaultCubeMap;\n\n            var image = texture3js.image;\n\n            if (texture3js.isCanvasTexture || texture3js.isVideoTexture) {\n\n                if (image) {\n                    texture = createTexture(texture3js, context);\n                } else {\n                    return defaultTexture;\n                }\n\n            } else if (texture3js.isDataTexture) {\n\n                if (image && image.data) {\n\n                    texture = createDataTexture(texture3js, context); \n\n                } else {\n                    return defaultVal || defaultTexture;\n                }\n\n            } else if (texture3js.isCubeTexture) {\n\n                if (image.length == 6 && isImagesLoaded(texture3js)) {\n                    texture = createCubeMap(texture3js, context);\n                } else {\n                    return defaultCubeMap;\n                }\n\n            } else if (texture3js.isCompressedTexture) {\n\n                if (image) {\n\n                    if (Array.isArray(image)) {\n\n                        if (texture3js.mipmaps) {\n                            texture = createCompressedTexture(texture3js, context)\n                        }\n                        else {\n\n                            if (isImagesLoaded(texture3js)) {\n                                texture = createCompressedCubeMap(texture3js, context);\n                            }\n                            else {\n                                return defaultVal || defaultCubeMap;\n                            }\n                        }\n\n                    } else {\n                        texture = createCompressedTexture(texture3js, context)\n                    }\n\n                } else {\n                    return defaultTexture;\n                }\n\n            } else if (Array.isArray(image)) {//hdr CubeTexture\n\n                if (isImagesLoaded(texture3js)) {\n                    texture = createHdrCubeMap(texture3js, context);\n                } else {\n                    return defaultVal || defaultCubeMap;\n                }\n\n            } else if (image && (\n                image instanceof HTMLCanvasElement\n                || image instanceof HTMLVideoElement\n                || image instanceof HTMLImageElement\n                || image instanceof ImageData\n                || image instanceof OffscreenCanvas\n                || image instanceof ImageBitmap\n            )) {\n\n                texture = createTexture(texture3js, context);\n\n            } else {\n\n                return defaultVal || defaultTexture;\n            }\n\n            this.set(texture3js, texture);\n        }\n\n        return texture;\n    }\n\n    this.set = function set(texture3js, texture) {\n        if (!texture || !texture3js) {\n            console.warn('Mesh3D.WebGLTextures:texture3js or texture is empty');\n            return;\n        }\n\n        texture.version = texture3js.version;\n        textures.set(texture3js, texture);\n\n        function disposeCallback() {\n\n            var latestTexture = textures.get(texture3js);\n            if (latestTexture !== undefined) {\n                if (!latestTexture.isDestroyed || !latestTexture.isDestroyed()) latestTexture.destroy();\n                textures.delete(texture3js);\n            }\n\n            texture3js.removeEventListener('dispose', disposeCallback);\n            disposeCallbacks.delete(texture3js);\n        }\n\n        texture3js.addEventListener('dispose', disposeCallback);\n        disposeCallbacks.set(texture3js, disposeCallback);\n    }\n\n    this.delete = function (texture3js) {\n\n        var disposeCallback = disposeCallbacks.get(texture3js);\n        if (disposeCallback) disposeCallback();\n    }\n\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     */\n    this.addReference = function (texture3js) {\n        var reference = textureReferences.get(texture3js) || 0;\n        textureReferences.set(texture3js, ++reference);\n    }\n\n    /**\n     * \n     * @param {THREE.Texture} texture3js \n     */\n    this.removeReference = function (texture3js) {\n        var reference = textureReferences.get(texture3js)\n        if (reference != undefined) {\n            reference--;\n            if (reference == 0) {\n                this.delete(texture3js);\n                textureReferences.delete(texture3js)\n            } else {\n                textureReferences.set(texture3js, reference);\n            }\n        }\n    }\n\n    Object.defineProperties(this, {\n        textures: {\n            get() {\n                return textures;\n            }\n        },\n        textureReferences: {\n            get() {\n                return textureReferences\n            }\n        }\n    })\n\n    if (typeof THREE == 'undefined') return\n\n    const { formatsMap, typesMap } = ConstantMap;\n}\n\nexport default WebGLTextures;",
    "import MeshVisualizer from  \"../MeshVisualizer.js\";\n\nimport WebGLLights from  \"./WebGLLights.js\";\n\nimport WebGLRenderer from  \"./WebGLRenderer.js\";\n\n\nfunction getModifiedModelViewCallback(context, object) {\n    var Matrix4 = Matrix4;\n    return function () {\n        if (!object._rtcTransform) {\n            object._rtcTransform = new Matrix4()\n        }\n        if (!object._rtcModelView) {\n            object._rtcModelView = new Matrix4()\n        }\n        Matrix4.multiplyByTranslation(object.modelMatrix, object._center, object._rtcTransform);\n\n        return Matrix4.multiply(context.uniformState.view, object._rtcTransform, object._rtcModelView);\n    }\n}\n\n/**\n * \n * @param {WebGLRenderer} renderer \n */\nfunction WebGLUniforms(renderer) {\n\n    const { OrthographicFrustum, Texture, Matrix4, Matrix3, Matrix2, Color, Cartesian2, Cartesian3, Cartesian4 } = Cesium;\n\n    /**\n     * @type {MeshVisualizer}\n     * @private\n     */\n    const visualizer = renderer._visualizer;\n    const textures = renderer._textures;\n    const materials = renderer._materials;\n    const properties = renderer._properties;\n\n    var capabilities = renderer._capabilities;\n    var extensions = renderer._extensions;\n\n    const uniformCache = new WeakMap();\n\n    Object.defineProperties(this, {\n        uniforms: {\n            get() {\n                return uniformCache;\n            }\n        }\n    });\n\n    const _THREE = THREE, { DataTexture, UniformsLib,MathUtils } = _THREE;\n    var rectAreaLTC1, rectAreaLTC2;\n\n    //\n\n    function getStructUniformCallback(valObj, name) {\n        return function structPropertyUniformCallback() {\n            return valObj[name];\n        }\n    }\n    function setStructureUniform(name, val, uniformMap) {\n        for (var key in val) {\n            if (val.hasOwnProperty(key)) {\n                var uniformName = name + \".\" + key;\n                uniformMap[uniformName] = getStructUniformCallback(val, key);\n            }\n        }\n    }\n    function isPrimitiveTypeUniform(val) {\n        var type = typeof val\n        if (type == 'undefined' || val == null) return false;\n\n        return (type == 'number'\n            || type == 'boolean'\n            || val instanceof Color\n            || val instanceof Cartesian2\n            || val instanceof Cartesian3\n            || val instanceof Cartesian4\n            || val instanceof Matrix2\n            || val instanceof Matrix3\n            || val instanceof Matrix4\n            || val instanceof Texture\n            || val.isColor\n            || val.isVector2\n            || val.isVector3\n            || val.isVector4\n            || val.isCartesian2\n            || val.isCartesian3\n            || val.isCartesian4\n            || val.isMatrix2\n            || val.isMatrix3\n            || val.isMatrix4\n        );\n    }\n    function isStructureArrayUniform(vals) {\n        if (!Array.isArray(vals) || !vals.length) return false;\n\n        var el0 = vals[0];\n        if (isPrimitiveTypeUniform(el0)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    function setArrayUniform(name, vals, uniformMap) {\n\n        if (!isStructureArrayUniform(vals)) {\n            uniformMap[name] = function () {\n                return vals;\n            }\n        }\n        else {\n            for (var i = 0; i < vals.length; i++) {\n                var val = vals[i];\n                var thisName = name + \"[\" + i + \"]\";\n                if (isStructureArrayUniform(val)) {\n                    setArrayUniform(thisName, val, uniformMap);\n                } else {\n                    setStructureUniform(thisName, val, uniformMap);\n                }\n            }\n        }\n    }\n\n    /////\n\n    //\n\n    var cameraPositionLC = new Cartesian3();\n    function setBuiltinUniforms(material, object, frameState, uniformMap) {\n\n        var pickId = object.pickId, pickIds = object.pickIds;\n        if (pickIds) {\n            let objectMaterial = object.material;\n            var materialIndex = Array.isArray(objectMaterial) ? objectMaterial.indexOf(material) : 0;\n            if (materialIndex != -1) {\n                pickId = pickIds[materialIndex] || pickId\n            }\n        }\n        uniformMap.czm_pickColor = function () {\n            return pickId.color;\n        }\n\n        uniformMap.cameraPosition = function () {\n            var customCamera = frameState.camera.customCamera;\n            if (customCamera && customCamera.cameraPosition) {\n                return customCamera.cameraPosition;\n            }\n            return frameState.camera.position;\n        }\n        uniformMap.u_cameraPosition = uniformMap.cameraPosition;\n\n        uniformMap.cameraPositionLC = function () {\n            var camera = frameState.camera\n            var customCamera = camera.customCamera;\n            if (customCamera && customCamera.cameraPosition) {\n                return customCamera.cameraPosition;\n            }\n            visualizer.worldCoordinatesToLocal(camera.position, cameraPositionLC, object.up);\n            return cameraPositionLC;\n        }\n        uniformMap.u_cameraPositionLC = uniformMap.cameraPositionLC\n\n        //base matrix\n        uniformMap.normalMatrix = function () {\n            var customCamera = frameState.camera.customCamera;\n            if (customCamera && customCamera.normalMatrix) {\n                return customCamera.normalMatrix;\n            }\n            return frameState.context.uniformState.normal;\n        }\n        uniformMap.u_normalMatrix = uniformMap.normalMatrix;\n        uniformMap.projectionMatrix = function () {\n            var customCamera = frameState.camera.customCamera;\n            if (customCamera && customCamera.projectionMatrix) {\n                return customCamera.projectionMatrix;\n            }\n            return frameState.context.uniformState.projection;\n        }\n        uniformMap.u_projectionMatrix = uniformMap.projectionMatrix;\n        uniformMap.modelViewMatrix = function () {\n            var customCamera = frameState.camera.customCamera;\n            if (customCamera && customCamera.modelViewMatrix) {\n                return customCamera.modelViewMatrix;\n            }\n\n            return frameState.context.uniformState.modelView;\n        }\n        uniformMap.u_modelViewMatrix = uniformMap.modelViewMatrix;\n\n        var modelViewMatrixInverse = new Matrix4();\n        uniformMap.modelViewMatrixInverse = function () {\n            var mv = frameState.context.uniformState.modelView;\n            return Matrix4.inverse(mv, modelViewMatrixInverse);\n        }\n\n        //\n        uniformMap.modelMatrix = function () {\n            var customCamera = frameState.camera.customCamera;\n            if (customCamera && customCamera.modelMatrix) {\n                return customCamera.modelMatrix;\n            }\n\n            return frameState.context.uniformState.model;\n        }\n        uniformMap.u_modelMatrix = uniformMap.modelMatrix;\n\n        //\n        var matrixWorld = new Matrix4()\n        uniformMap.matrixWorld = function () {\n            var cesiumModel2ThreeModel = uniformMap._CesiumModel2ThreeModel()\n            return Matrix4.multiply(cesiumModel2ThreeModel, frameState.context.uniformState.model, matrixWorld)\n        }\n        //\n        var normalMatrixWorld = new Matrix3()\n        uniformMap.normalMatrixWorld = function () {\n            var CesiumNormal2ThreeNormal = uniformMap._CesiumNormal2ThreeNormal()\n            return Matrix3.multiply(CesiumNormal2ThreeNormal, frameState.context.uniformState.normal, normalMatrixWorld)\n        }\n\n        //\n        var yup = object.up.y == 1;\n        uniformMap._CesiumModel2ThreeModel = function () {\n\n            if (yup) {\n                return visualizer._actualModelMatrixYupInverse\n            } else {\n                return visualizer._actualModelMatrixInverse;\n            }\n        }\n        uniformMap._ThreeModel2CesiumModel = function () {\n\n            if (yup) {\n                return visualizer._actualModelMatrixYup;\n\n            } else {\n                return visualizer._actualModelMatrix;\n            }\n        }\n\n        var _CesiumNormal2ThreeNormal = new Matrix3();\n        uniformMap._CesiumNormal2ThreeNormal = function () {\n\n            if (yup) {\n                return Matrix4.getMatrix3(visualizer._actualModelMatrixYupInverse, _CesiumNormal2ThreeNormal)\n\n            } else {\n                return Matrix4.getMatrix3(visualizer._actualModelMatrixInverse, _CesiumNormal2ThreeNormal)\n            }\n        }\n\n        var _ThreeNormal2CesiumNormal = new Matrix3();\n        uniformMap._ThreeNormal2CesiumNormal = function () {\n            var up = object.up;\n            if (up.y == 1) {\n                return Matrix4.getMatrix3(that._actualModelMatrixYup, _ThreeNormal2CesiumNormal)\n\n            } else {\n                return Matrix4.getMatrix3(that._actualModelMatrix, _ThreeNormal2CesiumNormal)\n            }\n        }\n\n        //\n\n        uniformMap.viewMatrix = function () {\n            return frameState.context.uniformState.view;\n        }\n        uniformMap.u_viewMatrix = uniformMap.viewMatrix\n        uniformMap.logDepthBufFC = function () {\n            return 2.0 / (Math.log(frameState.camera.frustum.far + 1.0) / Math.LN2)\n        }\n\n        //\n\n        uniformMap.isOrthographic = function () {\n            var camera = frameState.camera\n            var isOrthographic = camera.isOrthographicCamera == true;\n            return isOrthographic;\n        }\n\n        uniformMap.toneMappingExposure = function () {\n            return renderer.toneMappingExposure\n        }\n        uniformMap.toneMappingWhitePoint = function () {\n            return renderer.toneMappingWhitePoint\n        }\n\n        uniformMap.receiveShadow = function () {\n            return object.receiveShadow == true\n        }\n        uniformMap.center = function () {\n            return !!object.center;\n        }\n\n        if (material.uniformStateUsed && material.uniformStateUsed.length) {\n            material.uniformStateUsed.forEach(function (item) {\n                if (!uniformMap[item.glslVarName]) {\n                    if (!frameState.context.uniformState[item.uniformStateName]) {\n                        throw new Error(item.uniformStateName + \"不是Cesium引擎的内置对象\");\n                    }\n                    uniformMap[item.glslVarName] = function () {\n                        return frameState.context.uniformState[item.uniformStateName];\n                    }\n                }\n            });\n        }\n    }\n\n    //\n\n    function setLightsUniforms(material3js, object3js, frameState, uniformMap, uniforms, lights) {\n\n        if (properties.get(material3js).needsLights) {\n\n            var _lights = lights.state;\n\n            var lightUniforms = {};\n            lightUniforms.lightProbe = { value: _lights.probe };\n            lightUniforms.directionalLights = { value: _lights.directional };\n            lightUniforms.directionalLightShadows = { value: _lights.directionalShadow }\n            lightUniforms.spotLights = { value: _lights.spot }\n            lightUniforms.spotLightShadows = { value: _lights.spotShadow }\n            lightUniforms.rectAreaLights = { value: _lights.rectArea }\n            lightUniforms.pointLights = { value: _lights.point }\n            lightUniforms.pointLightShadows = { value: _lights.pointShadow }\n            lightUniforms.hemisphereLights = { value: _lights.hemi }\n\n            function getShadowMapCallback(shadowMapName) {\n                return function () {\n                    let textureArr = _lights[shadowMapName].map(texture3js => {\n                        if (texture3js) return textures.get(texture3js);\n                        else return visualizer.defaultShadowMap;\n                    });\n                    return textureArr\n                }\n            }\n\n            uniformMap.directionalShadowMap = getShadowMapCallback('directionalShadowMap');\n            uniformMap.directionalShadowMatrix = function () { return _lights.directionalShadowMatrix }\n            uniformMap.spotShadowMap = getShadowMapCallback('spotShadowMap');\n            uniformMap.spotShadowMatrix = function () { return _lights.spotShadowMatrix }\n            uniformMap.pointShadowMap = getShadowMapCallback('pointShadowMap');\n            uniformMap.pointShadowMatrix = function () { return _lights.pointShadowMatrix }\n\n            setCommonUniforms(lightUniforms, frameState, uniformMap);\n\n            if (uniforms.ambientLightColor) {\n                if (material3js.lightMap) {\n                    uniformMap.ambientLightColor = function ambientLightColorCallback() {\n                        return Color.BLACK\n                    }\n                }\n                else {\n                    uniformMap.ambientLightColor = function ambientLightColorCallback() {\n                        return _lights.ambient;\n                    }\n                }\n            }\n\n            uniformMap.ltc_1 = function () {\n                var texture = textures.get(rectAreaLTC1, frameState)\n                return texture || visualizer.defaultTexture\n            }\n            uniformMap.ltc_2 = function () {\n                var texture = textures.get(rectAreaLTC2, frameState)\n                return texture || visualizer.defaultTexture\n            }\n\n            //extension:point lights\n\n            var fixedWebGLLights = visualizer._fixedWebGLLights.extensionState;\n            var partialWebGLLights = visualizer._partialWebGLLights.extensionState;\n\n            // if (capabilities.floatFragmentTextures) {\n            uniformMap.fixedPointLightMap = function () {\n                return fixedWebGLLights.point.map\n            }\n            uniformMap.partialPointLightMap = function () {\n                return partialWebGLLights.point.map\n            }\n            // } else {\n            uniformMap.fixedPointLightPositions = function () {\n                return fixedWebGLLights.point.positions;\n            }\n            uniformMap.fixedPointLightColors = function () {\n                return fixedWebGLLights.point.colors;\n            }\n            uniformMap.fixedPointLightDecayDists = function () {\n                return fixedWebGLLights.point.decalDists;\n            }\n            //\n            uniformMap.partialPointLightPositions = function () {\n                return partialWebGLLights.point.positions;\n            }\n            uniformMap.partialPointLightColors = function () {\n                return partialWebGLLights.point.colors;\n            }\n            uniformMap.partialPointLightDecayDists = function () {\n                return partialWebGLLights.point.decalDists;\n            }\n            uniformMap.partialPointLightDecayDists = function () {\n                return partialWebGLLights.point.decalDists;\n            }\n            // }\n            uniformMap.fixedPointLightVisibles = function () {\n                return fixedWebGLLights.point.visibles\n            }\n            uniformMap.partialPointLightVisibles = function () {\n                return partialWebGLLights.point.visibles\n            }\n\n        }\n\n    }\n\n    //\n\n    function setClippingUniforms(material3js, object3js, frameState, uniformMap) {\n        if ((!material3js.isShaderMaterial && !material3js.isRawShaderMaterial) || material3js.clipping === true) {\n\n            // materialProperties.numClippingPlanes = clipping.numPlanes;\n            // materialProperties.numIntersection = clipping.numIntersection;\n            // material.uniforms.clippingPlanes = that.renderer._clipping.uniform;\n\n            var clippingUniform = properties.get(material3js).clippingUniform;\n\n            uniformMap.clippingPlanes = function () {\n                if (clippingUniform) return clippingUniform.value\n                else return [];\n\n            }\n\n        }\n    }\n\n    //\n\n    /**\n     * \n     * @param {*} material3js \n     * @param {THREE.SkinnedMesh|THREE.Mesh|THREE.Points|THREE.Line} object3js \n     * @param {*} frameState \n     * @param {*} uniformMap \n     */\n    function setSkinningUniforms(material3js, object3js, frameState, uniformMap) {\n\n        if (material3js && (material3js.skinning || object3js.isSkinnedMesh)) {\n\n            // skinning uniforms must be set even if material didn't change\n            // auto-setting of texture unit for bone texture must go before other textures\n            // not sure why, but otherwise weird things happen\n\n            var object = object3js;\n\n            uniformMap.bindMatrix = function () {\n                return object.bindMatrix.elements;\n            }\n            uniformMap.bindMatrixInverse = function () {\n                return object.bindMatrixInverse.elements;\n            }\n\n            // p_uniforms.setOptional(_gl, object, 'bindMatrix');\n            // p_uniforms.setOptional(_gl, object, 'bindMatrixInverse');\n\n            var skeleton = object.skeleton;\n\n            if (skeleton) {\n\n                var bones = skeleton.bones;\n\n                if (capabilities.floatVertexTextures) {\n\n                    var boneTextureCesium = skeleton.boneTextureCesium,\n                        boneTexture = skeleton.boneTexture;\n\n                    if (boneTexture === undefined//threejs<1.3\n                        || boneTexture === null\n                    ) {\n\n                        if (skeleton.computeBoneTexture) {\n                            skeleton.computeBoneTexture()\n                            boneTexture = skeleton.boneTexture;\n                        } else {\n                            // layout (1 matrix = 4 pixels)\n                            //      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n                            //  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n                            //       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n                            //       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n                            //       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n                            var size = Math.sqrt(bones.length * 4); // 4 pixels needed for 1 matrix\n                            size =  MathUtils.ceilPowerOfTwo(size);\n                            size = Math.max(size, 4);\n\n                            var boneMatrices = new Float32Array(size * size * 4); // 4 floats per RGBA pixel\n                            boneMatrices.set(skeleton.boneMatrices); // copy current values\n\n                            boneTexture = new DataTexture(boneMatrices, size, size, _THREE.RGBAFormat, _THREE.FloatType);\n\n                            skeleton.boneMatrices = boneMatrices;\n                            skeleton.boneTexture = boneTexture;\n                            skeleton.boneTextureSize = size;\n                        }\n\n                        boneTextureCesium = textures.get(skeleton.boneTexture, frameState);// TextureUtils.fromTexure3js(skeleton.boneTexture);\n                        boneTextureCesium.name = 'boneTexture';\n                        skeleton.boneTextureCesium = boneTextureCesium;\n                    }\n\n                    uniformMap.boneTexture = function () {\n\n                        if (boneTextureCesium.version != boneTexture.version) {\n                            //update \n\n                            var source = boneTexture.image\n                            source.arrayBufferView = source.data;\n                            try {\n                                boneTextureCesium.copyFrom({ source })\n                            } catch (err) {\n                                boneTextureCesium.copyFrom(source)\n                            }\n\n                            boneTextureCesium.version = boneTexture.version;\n                        } else {\n                            boneTextureCesium.version = boneTexture.version;\n                        }\n\n                        return boneTextureCesium;\n                    }\n                    uniformMap.boneTextureSize = function () {\n                        return skeleton.boneTextureSize;\n                    }\n                    // p_uniforms.setValue(_gl, 'boneTexture', skeleton.boneTexture, textures);\n                    // p_uniforms.setValue(_gl, 'boneTextureSize', skeleton.boneTextureSize);\n\n                } else {\n\n                    // p_uniforms.setOptional(_gl, skeleton, 'boneMatrices');\n                    uniformMap.boneMatrices = function () {\n                        return skeleton.boneMatrices.elements;\n                    }\n                }\n\n            }\n        }\n    }\n\n    //\n\n    function setMorphTargetsUniforms(material, object, uniformMap) {\n\n        if (material && (material.morphTargets || material.morphNormals)) {\n\n            // program.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n            // program.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n            var morpTargethUniforms = renderer.morphtargets.getUniforms(object)\n            uniformMap.morphTargetBaseInfluence = function () {\n                return morpTargethUniforms.morphTargetBaseInfluence;\n                // return object.geometry._morphBaseInfluence\n            }\n            uniformMap.morphTargetInfluences = function () {\n                return morpTargethUniforms.morphTargetInfluences;\n                // return object.geometry._morphInfluences\n            }\n        }\n    }\n\n    //\n\n    function getCommonUniformCallback(uniformName, uniform, frameState) {\n\n        var uniformVal = uniform.value;\n        var typeOfVal = typeof uniformVal;\n\n        if (uniform.type == 'f') {\n            return function floatUniformCallbak() {\n                return uniform.value || 0;\n            }\n        }\n        else if (typeOfVal == 'number' || typeOfVal == 'boolean') {\n\n            return function boolOrNumUniformCallbak() {\n                return uniform.value;\n            }\n\n        }\n        else if (!uniformVal) {\n\n            var defaultVal = uniformName == 'envMap' ? visualizer.defaultCubeMap : visualizer.defaultTexture;\n\n            return function nullOrTextureUniformCallback() {\n\n                var texture3js = uniform.value;\n                if (texture3js) {\n                    var texture = textures.get(texture3js, frameState, defaultVal)\n                    return texture;\n                }\n                else {\n                    return defaultVal;\n                }\n\n            }\n\n        } else if (uniformVal.isTexture) {\n            var defaultVal = uniformName == 'envMap' ? visualizer.defaultCubeMap : visualizer.defaultTexture;\n\n            return function textureUniformCallback() {\n\n                var texture = textures.get(uniform.value, frameState, defaultVal)\n                return texture;\n\n            }\n        }\n        else if (uniformVal.isVector2 | uniformVal.isVector3 | uniformVal.isVector4 | uniformVal.isColor) {\n\n            return function vecUniformCallbak() {\n                return uniform.value;\n            }\n\n        } else if (uniformVal.isMatrix2 | uniformVal.isMatrix3 | uniformVal.isMatrix4) {\n\n            return function matrixUniformCallbak() {\n                return uniform.value.elements;\n            }\n\n        }\n        else if (Array.isArray(uniformVal)) {\n\n            if (!uniformVal.length) return;\n\n            if (isPrimitiveTypeUniform(uniformVal[0])) {\n                return function arrayUniformCallback() {\n                    return uniform.value;\n                }\n            }\n        }\n        else {\n            debugger\n        }\n\n    }\n\n    function setCommonUniforms(uniforms, frameState, uniformMap) {\n\n        for (const name in uniforms) {\n            var uniform = uniforms[name];\n            if (uniforms.hasOwnProperty(name) && uniform) {\n\n                var uniformVal = uniform.value;\n\n                var callback = getCommonUniformCallback(name, uniform, frameState)\n                if (callback) {\n                    uniformMap[name] = callback;\n\n                } else if (isStructureArrayUniform(uniformVal)) {\n\n                    setArrayUniform(name, uniformVal, uniformMap);\n\n                } else {\n\n                    setStructureUniform(name, uniformVal, uniformMap)\n                }\n\n            }\n        }\n\n        if (uniforms.datetime) {\n            uniformMap.datetime = function () {\n                return performance.now()\n            }\n        }\n\n    }\n\n    /**\n     * \n     * @param {THREE.Material} material3js \n     * @param {THREE.Mesh} object3js \n     * @param {Cesium.FrameState} frameState \n     * @param {WebGLLights}lights\n     * @return {{[key:string]:()=>Cesium.Texture|Cesium.CubeMap|boolean|number|{x:number,y:number,z?:number,w:number}|number[]|{red:number,green:number,blue:number:alpha:number}}}\n     */\n    this.getUniformMap = function (material3js, object3js, frameState, lights) {\n\n        var uniformMap = {}\n        var context = frameState.context;\n        var uniformsSet = uniformCache.get(material3js);\n        if (!uniformsSet || !uniformsSet.has(object3js)) return uniformMap;\n\n        var uniforms = uniformsSet.get(object3js);\n\n        setCommonUniforms(uniforms, frameState, uniformMap);\n        setBuiltinUniforms(material3js, object3js, frameState, uniformMap)\n        setLightsUniforms(material3js, object3js, frameState, uniformMap, uniforms, lights)\n        setClippingUniforms(material3js, object3js, frameState, uniformMap)\n        setMorphTargetsUniforms(material3js, object3js, uniformMap);\n        setSkinningUniforms(material3js, object3js, frameState, uniformMap);\n\n        if (object3js._instances) {\n            uniformMap.czm_instanced_modifiedModelView = getModifiedModelViewCallback(context, object3js);\n        }\n\n        if (object3js.uniformMapLoadedCallback) {\n            object3js.uniformMapLoadedCallback(uniformMap, frameState, object3js);\n        }\n\n        return uniformMap;\n    }\n\n    /**\n     * \n     * @param {*} material3js \n     * @param {*} uniforms \n     * @param {*} object \n     * @private\n     */\n    this.set = function (material3js, uniforms, object) {\n\n        if (!capabilities) capabilities = renderer.capabilities;\n        if (!extensions) extensions = renderer.extensions;\n\n        var uniformsSet = uniformCache.get(material3js);\n        if (!uniformsSet) {\n            uniformsSet = new WeakMap();\n            uniformsSet.useTimes = 0;\n            uniformCache.set(material3js, uniformsSet);\n        }\n        uniformsSet.useTimes++;\n\n        var oldUniforms = uniformsSet.get(object);\n        if (oldUniforms) {\n            oldUniforms.materialDisposeCallback();\n        }\n\n        function onMaterialDispose() {\n            uniformsSet.delete(object);\n            if (material3js._isShadowDepthMaterial) {\n                object.removeEventListener('dispose', onMaterialDispose)\n            } else {\n                material3js.removeEventListener('dispose', onMaterialDispose);\n            }\n            uniformsSet.useTimes--;\n\n            if (uniformsSet.useTimes == 0) {\n                uniformCache.delete(material3js);\n            }\n\n\n            //remove texture reference\n            for (const key in uniforms) {\n                const uniform = uniforms[key];\n                if (uniforms.hasOwnProperty(key) && uniform) {\n                    var uniformVal = uniform.value;\n                    if (uniformVal && uniformVal.isTexture) {\n                        textures.removeReference(uniformVal)\n                    }\n                }\n            }\n\n        }\n\n        uniforms.materialDisposeCallback = onMaterialDispose;\n        if (material3js._isShadowDepthMaterial) {\n            object.addEventListener('dispose', onMaterialDispose)\n        } else {\n            material3js.addEventListener('dispose', onMaterialDispose);\n        }\n\n        uniformsSet.set(object, uniforms);\n\n        this.refresh(material3js, object);\n\n        //add texture reference\n        for (const key in uniforms) {\n            const uniform = uniforms[key];\n            if (uniforms.hasOwnProperty(key) && uniform) {\n                var uniformVal = uniform.value;\n                if (uniformVal && uniformVal.isTexture) {\n                    textures.addReference(uniformVal)\n                }\n            }\n        }\n\n        //reactLights\n\n        if (capabilities.isWebGL2) {\n\n            // WebGL 2\n\n            rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n            rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n        } else {\n\n            // WebGL 1\n\n            if (extensions.has('OES_texture_float_linear') === true) {\n\n                rectAreaLTC1 = UniformsLib.LTC_FLOAT_1;\n                rectAreaLTC2 = UniformsLib.LTC_FLOAT_2;\n\n            } else if (extensions.has('OES_texture_half_float_linear') === true) {\n\n                rectAreaLTC1 = UniformsLib.LTC_HALF_1;\n                rectAreaLTC2 = UniformsLib.LTC_HALF_2;\n\n            } else {\n\n                console.error('WebGLUniforms: Unable to use RectAreaLight. Missing WebGL extensions.');\n\n            }\n\n        }\n    }\n\n    /**\n     * \n     * @param {THREE.Material} material3js \n     * @param {THREE.Mesh} object \n     * @param {object} [uniforms] \n     */\n    this.refresh = function (material3js, object, uniforms) {\n\n        if (!uniforms) {\n            var uniformsSet = uniformCache.get(material3js);\n            // if (!uniformsSet || !uniformsSet.has(object)) return;\n            uniforms = uniformsSet.get(object);\n            //>>includeStart('debug')\n            // if (!uniforms) {\n            //     debugger\n            // }\n            //>>includeEnd('debug')\n        }\n        if (!uniforms) {\n            return\n        }\n\n        //\n        if (uniforms.version == material3js.version) {\n            if (material3js.autoRefresh == false) return;\n        }\n\n        if (visualizer.fog && uniforms.fogColor) {\n            materials.refreshFogUniforms(uniforms, visualizer.fog)\n        }\n\n        var height = capabilities.gl.canvas.height;\n        var pixelRatio = renderer._pixelRatio;\n\n        materials.refreshMaterialUniforms(uniforms, material3js, pixelRatio, height);\n\n        uniforms.version = material3js.version\n    }\n\n}\n\nexport default WebGLUniforms;",
    "import CameraUtils from  \"./Source/CameraUtils.js\";\n\nimport GeometryUtils from  \"./Source/GeometryUtils.js\";\n\nimport IEffect from  \"./Source/IEffect.js\";\n\nimport IRenderable from  \"./Source/IRenderable.js\";\n\nimport MeshVisualizer from  \"./Source/MeshVisualizer.js\";\n\nimport polyfill from  \"./Source/polyfill.js\";\n\nimport RendererUtils from  \"./Source/RendererUtils.js\";\n\n\nexport {\n    MeshVisualizer,\n    polyfill,\n    GeometryUtils,\n    CameraUtils,\n    IEffect,\n    IRenderable,\n    RendererUtils\n};\nexport default {\n    MeshVisualizer,\n    polyfill,\n    GeometryUtils,\n    CameraUtils,\n    IEffect,\n    IRenderable,\n    RendererUtils\n}",
    "\nimport MeshVisualizer from  \"../../core/Source/MeshVisualizer.js\";\n\nimport ImageTileLayer from  \"./layers/imagery/ImageTileLayer.js\";\n\nimport imageryLayersOrderByZIndex from  \"./layers/imageryLayersOrderByZIndex.js\";\n\n\n/**\n * \n * @param {object} params \n * @param {string|HTMLElement}params.container\n */\nfunction Earth(params) {\n    // CesiumCoreExt();\n    //import Cesium Class\n    const {\n        Camera, Viewer, Cartesian3, Transforms, Matrix4,\n        Rectangle, TileProviderError\n    } = Cesium;\n\n    //get params\n\n    let { container, viewBox } = params;\n    viewBox = viewBox || [70, -1, 140, 60]\n    if (viewBox) {\n        Camera.DEFAULT_VIEW_RECTANGLE = Rectangle.fromDegrees(\n            viewBox[0], viewBox[1], viewBox[2], viewBox[3]\n        );\n    } else {\n        Camera.DEFAULT_VIEW_RECTANGLE = new Rectangle(\n            1.28283693362122, 0.05999788534537946, 2.3577393069441595, 0.9348140736573897\n        );\n    }\n\n    //consts\n    const viewer = new Viewer(container, params);\n    const { homeButton, baseLayerPicker, scene, entities, imageryLayers, postProcessStages } = viewer;\n    const { globe, primitives, camera } = scene;\n    if (baseLayerPicker) {\n        const { imageryProviderViewModels } = baseLayerPicker.viewModel;\n        container = viewer.container;\n        baseLayerPicker.viewModel.selectedImagery = imageryProviderViewModels[imageryProviderViewModels.length - 1];\n    }\n    postProcessStages.fxaa.enabled = true;\n    if (scene.highDynamicRangeSupported && params.highDynamicRange) {\n        scene.highDynamicRange = true;\n    }\n\n    //\n    let globalScene = null;\n    // const globalScene = new MeshVisualizer()\n    // globalScene.init(viewer.scene.frameState);\n    // globalScene.useSunLight = true;\n    // requestAnimationFrame(() => {\n    //     primitives.add(globalScene);\n    // })\n    // \n\n    //\n    var _localScenes = [];\n    var _layers = [];\n\n    function findLayerIndex(pLayer) {\n        var layerIndex = -1;\n        for (let i = 0; i < _layers.length; i++) {\n            const layer = _layers[i];\n            if (layer == pLayer) {\n                layerIndex = i;\n                break;\n            }\n        }\n        return layerIndex;\n    }\n\n    function look(lon, lat, alt, offsetX, offsetY, offsetZ) {\n        if (!viewer || viewer.isDestroyed()) {\n            return;\n        }\n        var center;\n        if (lon instanceof Cartesian3) {\n            center = lon;\n            offsetZ = offsetX;\n            offsetY = alt;\n            offsetX = lat;\n        }\n        else {\n            center = Cartesian3.fromDegrees(lon, lat, alt);\n        }\n\n        var transform = Transforms.eastNorthUpToFixedFrame(center);\n\n        camera.constrainedAxis = Cartesian3.UNIT_Z;\n        camera.lookAtTransform(transform, new Cartesian3(offsetX, offsetY, offsetZ));\n\n        setTimeout(function () {\n            camera.lookAtTransform(Matrix4.IDENTITY);\n        }, 100)\n    }\n    this.look = look;\n\n    this.flyTo = function (target, options) {\n        if (!target) return;\n\n        if (target.boundingSphere) {\n            return viewer.camera.flyToBoundingSphere(target.boundingSphere, options)\n        } else if (target instanceof Cesium.Rectangle\n            || target instanceof Cesium.Cartesian3) {\n            return viewer.camera.flyTo(Object.assign(options || {}, {\n                destination: target\n            }))\n        } else if (target) {\n            return viewer.flyTo(target, options)\n        }\n    }\n\n    /**\n     * \n     * @param {MeshVisualizer} localScene \n     */\n    this.addLocalScene = function (localScene) {\n        localScene = localScene instanceof MeshVisualizer ? localScene : new MeshVisualizer(localScene);\n        localScene.init(viewer.scene.frameState);\n        scene.primitives.add(localScene)\n        _localScenes.push(localScene);\n        return localScene\n    }\n\n    /**\n     * \n     * @param {MeshVisualizer} localScene \n     */\n    this.removeLocalScene = function (localScene) {\n        if (!localScene) return;\n        var i = _localScenes.indexOf(localScene);\n        if (i !== -1) {\n            scene.primitives.remove(localScene)\n            _localScenes.splice(i, 1);\n        }\n    }\n\n    this.addLayer = function addLayer(layer) {\n        if (findLayerIndex(layer) >= 0) {\n            console.warn('图层 `' + layer.name + '` 已经存在，不能重复添加。');\n            return;\n        }\n        layer.load(this);\n        _layers.push(layer);\n        return layer;\n    }\n\n    this.removeLayer = function removeLayer(layer) {\n        var layerIndex = findLayerIndex(layer);\n        if (layerIndex == -1) return false;\n        _layers.splice(layerIndex, 1);\n        layer.unload(this);\n        return true;\n    }\n\n    /**\n     * \n     * @param {ImageTileLayer} imgLayer \n     * @returns {ImageTileLayer}\n     */\n    this.addImageryLayer = function addImageryLayer(imgLayer) {\n        if (!(imgLayer instanceof ImageTileLayer)) {\n            imgLayer = new ImageTileLayer(imgLayer);\n        }\n\n        this.addLayer(imgLayer);\n        imageryLayersOrderByZIndex(imageryLayers)\n        return imgLayer;\n    }\n\n    /**\n     * \n     * @param {ImageTileLayer} imgLayer \n     * @returns {ImageTileLayer}\n     */\n    this.removeImageryLayer = function removeImageryLayer(imgLayer) {\n        if (!this.removeLayer(imgLayer)) return;\n        imageryLayersOrderByZIndex(imageryLayers)\n    }\n\n    this.updateOrder = function updateOrder() {\n        imageryLayersOrderByZIndex(imageryLayers)\n    }\n\n    this.onHomeClick = new Cesium.Event()\n    homeButton.viewModel.command.beforeExecute.addEventListener((evt) => {\n        this.onHomeClick.raiseEvent(evt)\n        // evt.cancel = this.onHomeClick.numberOfListeners > 0;\n    });\n\n    var oldTileProviderErrorHandleError = TileProviderError.handleError;\n    TileProviderError.handleError = function (\n        previousError,\n        provider,\n        event,\n        message,\n        x,\n        y,\n        level,\n        retryFunction,\n        errorDetails\n    ) {\n        if (provider.constructor.name == 'VectorTileImageryProvider') {\n            return;\n        }\n\n        oldTileProviderErrorHandleError(\n            previousError,\n            provider,\n            event,\n            message,\n            x,\n            y,\n            level,\n            retryFunction,\n            errorDetails\n        );\n    }\n\n    var viewRectangle = new Cesium.Rectangle()\n    Object.defineProperties(this, {\n        /**\n         * 获取当前视野中影像图层的最大级别\n         */\n        maxTileLevel: {\n            enumerable: false,\n            get() {\n                var tilesToRender = globe._surface._tilesToRender\n                var maxTileLevel = -1;\n                for (const tile of tilesToRender) {\n                    maxTileLevel = Math.max(tile.level, maxTileLevel)\n                }\n                return maxTileLevel\n            }\n        },\n        /**\n         * 获取当前视野所有可见瓦片的四至范围\n         */\n        viewRectangle: {\n            enumerable: false,\n            get() {\n                var tilesToRender = globe._surface._tilesToRender\n                if (tilesToRender.length == 0) {\n                    Rectangle.clone(Rectangle.MAX_VALUE, viewRectangle)\n                }\n                Rectangle.clone(tilesToRender[0]._rectangle, viewRectangle);\n                for (let i = 1; i < tilesToRender.length; i++) {\n                    const tile = tilesToRender[i]\n                    Rectangle.union(tile._rectangle, viewRectangle, viewRectangle)\n                }\n                return viewRectangle;\n            }\n        },\n        viewer: {\n            enumerable: false,\n            get() {\n                return viewer;\n            }\n        },\n        scene: {\n            enumerable: false,\n            get() {\n                return scene;\n            }\n        },\n        globalScene: {\n            enumerable: false,\n            get() {\n                globalScene = new MeshVisualizer()\n                globalScene.init(viewer.scene.frameState);\n                globalScene.useSunLight = true;\n                primitives.add(globalScene);\n                return globalScene;\n            }\n        },\n        localScenes: {\n            enumerable: false,\n            get() {\n                return _localScenes;\n            }\n        },\n        globe: {\n            enumerable: false,\n            get() {\n                return globe;\n            }\n        },\n        layers: {\n            enumerable: false,\n            get() {\n                return _layers;\n            }\n        },\n        imageryLayers: {\n            enumerable: false,\n            get() {\n                return imageryLayers;\n            }\n        },\n        entities: {\n            enumerable: false,\n            get() {\n                return entities;\n            }\n        },\n        primitives: {\n            enumerable: false,\n            get() {\n                return primitives;\n            }\n        },\n        postProcessStages: {\n            enumerable: false,\n            get() {\n                return postProcessStages\n            }\n        }\n    })\n\n}\n\nexport default Earth;",
    "\nvar LocalSkyBox = function (config) {\n    config = config || {};\n\n    const {\n        BackSide,\n        BoxBufferGeometry,\n        Mesh,\n        ShaderMaterial,\n        Vector3,\n        LinearMipmapLinearFilter,\n        WebGLCubeRenderTarget,\n        CubeCamera,\n        MathUtils\n    } = THREE;\n    const { JulianDate, Event } = Cesium\n\n    var shader = LocalSkyBox.SkyShader;\n\n    function defaultNum(inVal, defaltVal) {\n        return typeof inVal == 'number' ? inVal : defaltVal\n    }\n\n    var material = new ShaderMaterial({\n        name: 'SkyShader',\n        fragmentShader: shader.fragmentShader,\n        vertexShader: shader.vertexShader,\n        uniforms: {\n            \"turbidity\": { value: defaultNum(config.turbidity, 2) },\n            \"rayleigh\": { value: defaultNum(config.rayleigh, 1) },\n            \"mieCoefficient\": { value: defaultNum(config.mieCoefficient, 0.005) },\n            \"mieDirectionalG\": { value: defaultNum(config.mieDirectionalG, 0.8) },\n            \"sunPosition\": { value: new Vector3() },\n            \"up\": { value: new Vector3(0, 1, 0) }\n        },\n        side: BackSide,\n        depthWrite: false\n    });\n\n    var inclination = config.inclination;\n    var azimuth = config.azimuth;\n    var lockCesiumSun = config.lockCesiumSun;\n    var animation = config.animation;\n    var skyNeedsUpdate = true;\n\n    if (typeof animation == 'boolean' && animation) {\n        animation = new LocalSkyBoxAnimation()\n    }\n\n    var skyMesh = new Mesh(new BoxBufferGeometry(1, 1, 1), material);\n\n    skyMesh.modelMatrixNeedsUpdate = false;\n    skyMesh.frustumCulled = false;\n\n    var sun = new Vector3();\n    let renderTarget = new WebGLCubeRenderTarget(512, { generateMipmaps: true, minFilter: LinearMipmapLinearFilter })\n    var cubeCamera = new CubeCamera(0.1, 1, renderTarget);\n\n    var _localScene, beforeUpdateRemoveCb, _currTime;\n    this.update = function () {\n        var localScene = _localScene;\n        if (!localScene) return;\n\n        const _Math = Math;\n        const renderer = localScene.renderer;\n\n        if (lockCesiumSun) {\n            sun.copy(localScene.sunDirectionLC);\n\n            var phi = _Math.acos(sun.x);\n            var theta = _Math.sin(phi)\n            if (theta != 0) {\n                theta = MathUtils.clamp(sun.y / theta, -1, 1);\n                theta = _Math.asin(theta)\n            }\n            \n            inclination = theta / _Math.PI + 0.5;\n            azimuth = phi / (2 * _Math.PI) + 0.5;\n\n            this.sunPositionChanged.raiseEvent(this);\n        } else {\n            const theta = _Math.PI * (inclination - 0.5);\n            const phi = 2 * _Math.PI * (azimuth - 0.5);\n\n            sun.x = _Math.cos(phi);\n            sun.y = _Math.sin(phi) * _Math.sin(theta);\n            sun.z = _Math.sin(phi) * _Math.cos(theta);\n        }\n\n        if (animation) {\n            animation.update(this);\n            this.animationTick.raiseEvent(this)\n        }\n        uniforms[\"sunPosition\"].value.copy(sun);\n\n        cubeCamera.update(renderer, skyMesh);\n        // skyNeedsUpdate = false;\n    }\n\n    this.load = function (localScene) {\n        _localScene = localScene;\n        localScene.background = renderTarget.texture;\n        localScene.backgroundIsSkybox = true;\n        localScene.backgroundVisibleDistance = 1e4;\n        localScene.environment = localScene.background;\n\n        this.update(localScene)\n\n        beforeUpdateRemoveCb = localScene.beforeUpdate.addEventListener((frameState) => {\n            if (skyNeedsUpdate || !_currTime ||\n                (lockCesiumSun && !JulianDate.equals(_currTime, frameState.time))\n            ) {\n                this.update()\n                skyNeedsUpdate = false;\n                _currTime = JulianDate.clone(frameState.time, _currTime)\n            }\n        })\n    }\n\n    this.unload = function () {\n        if (!beforeUpdateRemoveCb) return;\n        _localScene.background = null;\n        _localScene.environment = null;\n        _localScene.backgroundIsSkybox = false;\n        _localScene = null\n        _currTime = null;\n        beforeUpdateRemoveCb();\n    }\n\n    this.animationTick = new Event();\n    this.sunPositionChanged = new Event();\n    const uniforms = material.uniforms;\n    Object.defineProperties(this, {\n        texture: {\n            get() {\n                return renderTarget.texture;\n            }\n        },\n        lockCesiumSun: {\n            get() {\n                return lockCesiumSun\n            },\n            set(val) {\n                lockCesiumSun = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        inclination: {\n            get() {\n                return inclination\n            },\n            set(val) {\n                inclination = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        azimuth: {\n            get() {\n                return azimuth\n            },\n            set(val) {\n                azimuth = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        turbidity: {\n            get() {\n                return uniforms.turbidity.value\n            },\n            set(val) {\n                uniforms.turbidity.value = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        rayleigh: {\n            get() {\n                return uniforms.rayleigh.value\n            },\n            set(val) {\n                uniforms.rayleigh.value = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        mieCoefficient: {\n            get() {\n                return uniforms.mieCoefficient.value\n            },\n            set(val) {\n                uniforms.mieCoefficient.value = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        mieDirectionalG: {\n            get() {\n                return uniforms.mieDirectionalG.value\n            },\n            set(val) {\n                uniforms.mieDirectionalG.value = val;\n                skyNeedsUpdate = true;\n            }\n        },\n        sunPosition: {\n            get() {\n                return uniforms.sunPosition.value\n            },\n            set(val) {\n                uniforms.sunPosition.value.copy(val);\n                skyNeedsUpdate = true;\n            }\n        },\n        animation: {\n            get() {\n                return animation && animation.enabled;\n            },\n            set(val) {\n                if (animation && animation.enabled != val) {\n                    animation.enabled = val;\n                    skyNeedsUpdate = true;\n                }\n            }\n        }\n    })\n\n};\n\n\nLocalSkyBox.SkyShader = {\n\n    // uniforms: {\n    //     \"turbidity\": { value: 2 },\n    //     \"rayleigh\": { value: 1 },\n    //     \"mieCoefficient\": { value: 0.005 },\n    //     \"mieDirectionalG\": { value: 0.8 },\n    //     \"sunPosition\": { value: new Vector3() },\n    //     \"up\": { value: new Vector3(0, 1, 0) }\n    // },\n\n    vertexShader: [\n        'uniform vec3 sunPosition;',\n        'uniform float rayleigh;',\n        'uniform float turbidity;',\n        'uniform float mieCoefficient;',\n        'uniform vec3 up;',\n\n        'varying vec3 vWorldPosition;',\n        'varying vec3 vSunDirection;',\n        'varying float vSunfade;',\n        'varying vec3 vBetaR;',\n        'varying vec3 vBetaM;',\n        'varying float vSunE;',\n\n        // constants for atmospheric scattering\n        'const float e = 2.71828182845904523536028747135266249775724709369995957;',\n        'const float pi = 3.141592653589793238462643383279502884197169;',\n\n        // wavelength of used primaries, according to preetham\n        'const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );',\n        // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n        // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n        'const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );',\n\n        // mie stuff\n        // K coefficient for the primaries\n        'const float v = 4.0;',\n        'const vec3 K = vec3( 0.686, 0.678, 0.666 );',\n        // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n        'const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );',\n\n        // earth shadow hack\n        // cutoffAngle = pi / 1.95;\n        'const float cutoffAngle = 1.6110731556870734;',\n        'const float steepness = 1.5;',\n        'const float EE = 1000.0;',\n\n        'float sunIntensity( float zenithAngleCos ) {',\n        '\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );',\n        '\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );',\n        '}',\n\n        'vec3 totalMie( float T ) {',\n        '\tfloat c = ( 0.2 * T ) * 10E-18;',\n        '\treturn 0.434 * c * MieConst;',\n        '}',\n\n        'void main() {',\n\n        '\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );',\n        '\tvWorldPosition = worldPosition.xyz;',\n\n        '\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );',\n        '\tgl_Position.z = gl_Position.w;', // set z to camera.far\n\n        '\tvSunDirection = normalize( sunPosition );',\n\n        '\tvSunE = sunIntensity( dot( vSunDirection, up ) );',\n\n        '\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );',\n\n        '\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );',\n\n        // extinction (absorbtion + out scattering)\n        // rayleigh coefficients\n        '\tvBetaR = totalRayleigh * rayleighCoefficient;',\n\n        // mie coefficients\n        '\tvBetaM = totalMie( turbidity ) * mieCoefficient;',\n\n        '}'\n    ].join('\\n'),\n\n    fragmentShader: [\n        'varying vec3 vWorldPosition;',\n        'varying vec3 vSunDirection;',\n        'varying float vSunfade;',\n        'varying vec3 vBetaR;',\n        'varying vec3 vBetaM;',\n        'varying float vSunE;',\n\n        'uniform float mieDirectionalG;',\n        'uniform vec3 up;',\n\n        'const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );',\n\n        // constants for atmospheric scattering\n        'const float pi = 3.141592653589793238462643383279502884197169;',\n\n        'const float n = 1.0003;', // refractive index of air\n        'const float N = 2.545E25;', // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n        // optical length at zenith for molecules\n        'const float rayleighZenithLength = 8.4E3;',\n        'const float mieZenithLength = 1.25E3;',\n        // 66 arc seconds -> degrees, and the cosine of that\n        'const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;',\n\n        // 3.0 / ( 16.0 * pi )\n        'const float THREE_OVER_SIXTEENPI = 0.05968310365946075;',\n        // 1.0 / ( 4.0 * pi )\n        'const float ONE_OVER_FOURPI = 0.07957747154594767;',\n\n        'float rayleighPhase( float cosTheta ) {',\n        '\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );',\n        '}',\n\n        'float hgPhase( float cosTheta, float g ) {',\n        '\tfloat g2 = pow( g, 2.0 );',\n        '\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );',\n        '\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );',\n        '}',\n\n        'void main() {',\n\n        // '#ifdef CESIUM_MESH_VISUALIZER',\n        // '\tvec3 direction = normalize( (_CesiumModel2ThreeModel*vec4(vWorldPosition,1.)).xyz - cameraPos );',\n        // '#else', \n        '\tvec3 direction = normalize( vWorldPosition - cameraPos );',\n        // '#endif ',\n\n        // optical length\n        // cutoff angle at 90 to avoid singularity in next formula.\n        '\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );',\n        '\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );',\n        '\tfloat sR = rayleighZenithLength * inverse;',\n        '\tfloat sM = mieZenithLength * inverse;',\n\n        // combined extinction factor\n        '\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );',\n\n        // in scattering\n        '\tfloat cosTheta = dot( direction, vSunDirection );',\n\n        '\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );',\n        '\tvec3 betaRTheta = vBetaR * rPhase;',\n\n        '\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );',\n        '\tvec3 betaMTheta = vBetaM * mPhase;',\n\n        '\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );',\n        '\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );',\n\n        // nightsky\n        '\tfloat theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]',\n        '\tfloat phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]',\n        '\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );',\n        '\tvec3 L0 = vec3( 0.1 ) * Fex;',\n\n        // composition + solar disc\n        '\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );',\n        '\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;',\n\n        '\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );',\n\n        '\tvec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );',\n\n        '\tgl_FragColor = vec4( retColor, 1.0 );',\n\n        '#include <tonemapping_fragment>',\n        '#include <encodings_fragment>',\n\n        '}'\n    ].join('\\n')\n\n};\n\nfunction LocalSkyBoxAnimation(options) {\n    options = options || {};\n    //自变量\n    this.inclinationRange = options.inclinationRange || [0.4913, 0.5509];\n    //因变量\n    this.turbidityRange = options.turbidityRange || [0.01, 0.2];\n    this.rayleighRange = options.rayleighRange || [0.12, 2.4];\n    this.enabled = typeof options.enabled == 'boolean' ? options.enabled : true\n}\n\n/**\n * \n * @param {LocalSkyBox} skyBox \n */\nLocalSkyBoxAnimation.prototype.update = function (skyBox) {\n    if (!this.enabled) return;\n    var inclination = skyBox.inclination;\n    var deltInd = this.inclinationRange[1] - this.inclinationRange[0]\n    var percent = (inclination - this.inclinationRange[0]) / deltInd;\n    if (percent > 1) percent = 1;\n    else if (percent < 0) percent = 0;\n    var turbidity = this.turbidityRange[1] - (this.turbidityRange[1] - this.turbidityRange[0]) * percent\n    skyBox.turbidity = turbidity;\n    skyBox.rayleigh = this.rayleighRange[1] - (this.rayleighRange[1] - this.rayleighRange[0]) * percent\n}\n\nexport { LocalSkyBox, LocalSkyBoxAnimation };\n",
    "import GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\n\nexport default class ExtrudedPolygonGeometry extends Cesium.PolygonGeometry {\n\n    constructor(options) {\n        super(options);\n        this.options = options;\n    }\n\n    get generateExtrudedUvNormal() {\n        return this.options.generateExtrudedUvNormal;\n    }\n    set generateExtrudedUvNormal(val) {\n        this.options.generateExtrudedUvNormal = val;\n    }\n\n    /**\n     * \n     * @param {ExtrudedPolygonGeometry} geometry \n     * @returns {Cesium.Geometry}\n     */\n    static createGeometry(geometry) {\n\n        let PolygonGeometry = Cesium.PolygonGeometry;\n        let options = geometry.options;\n        let generateExtrudedUvNormal = options.generateExtrudedUvNormal;\n        if (generateExtrudedUvNormal) {\n            geometry = this.createGeometryWithExtrudedUvNormal(geometry);\n\n        } else {\n            geometry = PolygonGeometry.createGeometry(geometry);\n        }\n        return geometry;\n    }\n\n    static createGeometryWithExtrudedUvNormal(extrudedPolygonGeometry) {\n        const _Cesium = Cesium;\n        const {\n            PolygonGeometry, GeometryAttribute, ComponentDatatype,\n            Cartesian3, Cartesian2, Geometry,\n            Cartographic, Ellipsoid, BoundingSphere, PrimitiveType\n        } = _Cesium;\n        const EPSILON5 = _Cesium.Math.EPSILON5;\n\n        let minHeight = extrudedPolygonGeometry.options.height || 0;\n\n        let geometry = PolygonGeometry.createGeometry(extrudedPolygonGeometry);\n        geometry = this.createExtrudedUvNormal(geometry, minHeight)\n        return geometry;\n    }\n\n    /**\n     * \n     * @param {*} geometry \n     * @param {*} minHeight \n     * @param {THREE.Vector2|Cesium.Cartesian2} [uvUnit] \n     * @param {boolean}[roundUv]\n     * @param {boolean}[createTopExtrudedUvNormal]\n     * @returns \n     */\n    static createExtrudedUvNormal(geometry, minHeight, uvUnit, roundUv, createTopExtrudedUvNormal, createBottomExtrudedUvNormal) {\n        minHeight = minHeight || 0;\n        const _Cesium = Cesium;\n        const {\n            GeometryAttribute, ComponentDatatype,\n            Cartesian3, Cartesian2, Geometry,\n            Cartographic, Ellipsoid, BoundingSphere, PrimitiveType, defaultValue\n        } = _Cesium;\n        const EPSILON5 = _Cesium.Math.EPSILON5;\n        let newAttributes = GeometryUtils.cloneGeometryAttributes(geometry.attributes);\n        let indices = geometry.indices;\n        let attributes = geometry.attributes;\n        let positions = Cartesian3.unpackArray(attributes.position.values);\n        let normals = Cartesian3.unpackArray(attributes.normal.values);\n        let sts = Cartesian2.unpackArray(attributes.st.values);\n        createTopExtrudedUvNormal = defaultValue(createTopExtrudedUvNormal, true);\n        createBottomExtrudedUvNormal = defaultValue(createBottomExtrudedUvNormal, true);\n\n        let carg0 = new Cartographic(),\n            carg1 = new Cartographic(),\n            carg2 = new Cartographic();\n        let ellipsoid = Ellipsoid.WGS84;\n\n        function makeRoundUv(num) {\n            if (Math.abs(num) < 1 || num % 1 == 0) {\n                return num\n            }\n            if (Math.abs(num) % 1 < 0.5) {\n                return Math.floor(num)\n            } else {\n                return Math.ceil(num)\n            }\n        }\n\n        let newPositions = [], newNormals = [], newSts = [];\n        let extrudedUvs = [], extrudedNormals = [];\n\n        for (let i = 0; i < indices.length; i += 3) {\n            let i0 = indices[i], i1 = indices[i + 1], i2 = indices[i + 2];\n            let p0 = positions[i0], p1 = positions[i1], p2 = positions[i2];\n            let n0 = normals[i0], n1 = normals[i1], n2 = normals[i2];\n            let st0 = sts[i0], st1 = sts[i1], st2 = sts[i2];\n\n            Cartographic.fromCartesian(p0, ellipsoid, carg0);\n            Cartographic.fromCartesian(p1, ellipsoid, carg1);\n            Cartographic.fromCartesian(p2, ellipsoid, carg2);\n\n            newPositions.push(p0, p1, p2);\n            newNormals.push(n0, n1, n2);\n            newSts.push(st0, st1, st2);\n\n            st0 = st0.clone(), st1 = st1.clone(), st2 = st2.clone();\n            extrudedUvs.push(st0, st1, st2);\n\n            let tempVertices = {\n                cartographic: [carg0, carg1, carg2],\n                position: [p0, p1, p2],\n                st: [st0, st1, st2],\n                normal: [0, 0, 0]\n            }\n\n\n            let tops = [], bottoms = [];\n            if (carg0.height - minHeight >= EPSILON5) {\n                tops.push(0);\n            } else {\n                bottoms.push(0);\n            }\n\n            if (carg1.height - minHeight >= EPSILON5) {\n                tops.push(1);\n            } else {\n                bottoms.push(1);\n            }\n\n            if (carg2.height - minHeight >= EPSILON5) {\n                tops.push(2);\n            } else {\n                bottoms.push(2);\n            }\n\n\n            if (tops.length == 2) {\n                /**    \n                 *   ·--·\n                 *   | /\n                 *   |/ \n                 *   ·\n                 */\n\n                let t0 = tops[0], t1 = tops[1], b0 = bottoms[0];\n\n                st0 = tempVertices.st[t0], st1 = tempVertices.st[t1],\n                    st2 = tempVertices.st[b0];\n\n                if (uvUnit) {\n                    carg0 = tempVertices.cartographic[t0], carg1 = tempVertices.cartographic[t1],\n                        carg2 = tempVertices.cartographic[b0];\n\n                    p0 = tempVertices.position[t0], p1 = tempVertices.position[t1],\n                        p2 = tempVertices.position[b0];\n\n                    var h = carg0.height - minHeight, d = Cartesian3.distance(p0, p1);\n\n                    st0.x = 0; st1.x = uvUnit.x ? 1 * d / uvUnit.x : 1; st2.x = 0;\n                    st0.y = uvUnit.y ? 1 * h / uvUnit.y : 1; st1.y = uvUnit.y ? 1 * h / uvUnit.y : 1; st2.y = 0;\n                } else {\n                    st0.x = 0; st1.x = 1; st2.x = 0;\n                    st0.y = 1; st1.y = 1; st2.y = 0;\n                }\n            } else if (bottoms.length == 2) {\n                /**    \n                 *      ·\n                 *     /|\n                 *    / |\n                 *   ·--·\n                 */\n\n                let b0 = bottoms[0], b1 = bottoms[1], t0 = tops[0];\n                st0 = tempVertices.st[b0], st1 = tempVertices.st[b1],\n                    st2 = tempVertices.st[t0];\n\n                if (uvUnit) {\n                    carg0 = tempVertices.cartographic[b0], carg1 = tempVertices.cartographic[b1],\n                        carg2 = tempVertices.cartographic[t0];\n\n                    p0 = tempVertices.position[b0], p1 = tempVertices.position[b1],\n                        p2 = tempVertices.position[t0];\n\n                    var h = carg2.height - minHeight, d = Cartesian3.distance(p0, p1);\n                    st0.x = 0; st1.x = uvUnit.x ? 1 * d / uvUnit.x : 1; st2.x = uvUnit.x ? 1 * d / uvUnit.x : 1;\n                    st0.y = 0; st1.y = 0; st2.y = uvUnit.y ? 1 * h / uvUnit.y : 1;\n                } else {\n                    st0.x = 0; st1.x = 1; st2.x = 1;\n                    st0.y = 0; st1.y = 0; st2.y = 1;\n                }\n\n            } else if (createBottomExtrudedUvNormal && bottoms.length == 3) {//bottom\n\n                tempVertices.normal.fill(-1);\n                st0.x = 0; st1.x = 0; st2.x = 0;\n                st0.y = 0; st1.y = 0; st2.y = 0;\n\n            } else if (createTopExtrudedUvNormal) {//top \n                tempVertices.normal.fill(1);\n\n                if (uvUnit) {\n                    var topY = uvUnit.y ? (carg0.height - minHeight) / uvUnit.y : 1;\n                    st0.x = 1; st1.x = 1; st2.x = 1;\n                    st0.y = 1 * topY; st1.y = 1 * topY; st2.y = 1 * topY;\n                } else {\n                    st0.x = 1; st1.x = 1; st2.x = 1;\n                    st0.y = 1; st1.y = 1; st2.y = 1;\n                }\n            }\n\n            extrudedNormals.push(\n                tempVertices.normal[0], tempVertices.normal[1],\n                tempVertices.normal[2])\n\n        }\n\n        newPositions = Cartesian3.packArray(newPositions, new Float32Array(\n            newPositions.length * 3\n        ));\n        newNormals = Cartesian3.packArray(newNormals, new Float32Array(\n            newNormals.length * 3\n        ));\n        newSts = Cartesian2.packArray(newSts, new Float32Array(\n            newSts.length * 2\n        ));\n\n        extrudedNormals = new Int8Array(extrudedNormals);\n        extrudedUvs = Cartesian2.packArray(extrudedUvs, new Float32Array(\n            extrudedUvs.length * 2\n        ));\n        if (uvUnit && roundUv) {\n            for (let i = 0; i < extrudedUvs.length; i++) {\n                extrudedUvs[i] = makeRoundUv(extrudedUvs[i]);\n            }\n        }\n\n        newAttributes.position.values = newPositions\n        newAttributes.normal.values = newNormals\n        newAttributes.st.values = newSts\n\n        newAttributes.extrudedNormal = new GeometryAttribute({\n            componentDatatype: ComponentDatatype.BYTE,\n            componentsPerAttribute: 1,\n            values: extrudedNormals,\n            normalize: false\n        })\n        newAttributes.extrudedUv = new GeometryAttribute({\n            componentDatatype: ComponentDatatype.FLOAT,\n            componentsPerAttribute: 2,\n            values: extrudedUvs,\n            normalize: false\n        })\n\n        geometry = new Geometry({\n            attributes: newAttributes,\n            primitiveType: PrimitiveType.TRIANGLES,\n            boundingSphere: BoundingSphere.fromVertices(newPositions)\n        })\n        return geometry;\n    }\n\n}\n",
    "import GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\n\nfunction parsePolygon(coordinates, height, extrudedHeight, uvGenerator, closeTop) {\n    const { Cartesian3, PolygonHierarchy, PolygonGeometry } = Cesium\n    var contour = coordinates[0].map(pt => {\n        return Cartesian3.fromDegrees(pt[0], pt[1])\n    });\n\n    var holes = [];\n    for (let i = 1; i < coordinates.length; i++) {\n        var hole = coordinates[i].map(pt => {\n            return Cartesian3.fromDegrees(pt[0], pt[1])\n        });\n        holes.push(new new PolygonHierarchy(hole));\n    }\n    if (typeof closeTop != 'boolean') {\n        closeTop = true;\n    }\n\n    var polygon = new PolygonGeometry({\n        polygonHierarchy: new PolygonHierarchy(contour, holes),\n        extrudedHeight: extrudedHeight,\n        height: height,\n        arcType: Cesium.ArcType.RHUMB,\n        granularity: Cesium.Math.RADIANS_PER_DEGREE * 0.1,\n        closeTop: closeTop,\n        closeBottom:closeTop\n    })\n    var geometry = PolygonGeometry.createGeometry(polygon);\n    if (uvGenerator) {\n        var positions = geometry.attributes.position.values\n        var uvs = uvGenerator.generate(positions)\n        if (uvs.length / 2 == positions.length / 3) {\n            geometry.attributes.st.values = new Float32Array(uvs);\n        } else {\n            console.warn('返回的uv与顶点数量不一致');\n        }\n    }\n    return geometry;\n}\n\n/**\n * \n * @param {object} geometry \n * @param {number} height \n * @param {number} extrudedHeight \n * @param {boolean} [closeTop]\n * @returns {Cesium.Geometry}\n */\nfunction parseGeometry(geometry, height, extrudedHeight, uvGenerator, closeTop) {\n    let type = geometry.type;\n\n    if (type == 'Polygon') {\n        geometry = parsePolygon(geometry.coordinates, height, extrudedHeight, uvGenerator, closeTop);\n\n    } else if (type == 'MultiPolygon') {\n        let geometries = geometry.coordinates.map(polygon => {\n            return parsePolygon(polygon, height, extrudedHeight, uvGenerator, closeTop);\n        });\n        geometry = GeometryUtils.mergeGeometries(geometries);\n\n    } else if (type == 'MultiGeometry') {\n        let geometries = geometry.geometry.map(geometry => {\n            return parseGeometry(geometry, height, extrudedHeight, uvGenerator, closeTop);\n        })\n        geometry = GeometryUtils.mergeGeometries(geometries);\n    }\n\n    return geometry;\n}\n\nexport default class GeoPolygonGeometry {\n    constructor(geojsonGeometry, height, extrudedHeight, uvGenerator) {\n        this.geojsonGeometry = geojsonGeometry;\n        this.height = height;\n        this.extrudedHeight = extrudedHeight;\n        this.uvGenerator = uvGenerator\n    }\n\n    static createGeometry(geoPolygonGeometry) {\n        return parseGeometry(geoPolygonGeometry.geojsonGeometry, geoPolygonGeometry.height, geoPolygonGeometry.extrudedHeight, geoPolygonGeometry.uvGenerator);\n    }\n\n    static fromFeature(feature, height, extrudedHeight, uvGenerator, closeTop) {\n        if (!feature.geometry) {\n            return;\n        }\n        var geometry = parseGeometry(feature.geometry, height, extrudedHeight, uvGenerator, closeTop);\n        return geometry;\n    }\n    static fromFeatures(features, height, extrudedHeight, uvGenerator) {\n        var geometries = []\n        for (let i = 0; i < features.length; i++) {\n            const feature = features[i];\n            if (!feature.geometry) {\n                continue;\n            }\n            var geometry = parseGeometry(feature.geometry, height, extrudedHeight, uvGenerator);\n            geometries.push(geometry);\n        }\n\n        var geometry = GeometryUtils.mergeGeometries(geometries);\n        return geometry;\n    }\n}",
    "import GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\nimport geojsonHelper from  \"../../../utils/Source/geojsonHelper.js\";\n\nimport lineOffset from  \"../../../../@turf/line-offset/dist/es/index.js\";\n\nimport * as turf from  \"../../../../@turf/helpers/dist/es/index.js\";\n\nimport turf_distance from  \"../../../../@turf/distance/dist/es/index.js\";\n\n\n/**\n * \n * @param {geojson.Feature<geojson.LineString>} feature \n * @param {THREE.Vector2|Cesium.Cartesian2}[uvUnit]\n * @constructor\n */\nfunction GeoPolylineGeometry(feature, lineWidth, uvUnit, clampToGround) {\n\n    var line = feature.geometry.coordinates;\n    var line1 = lineOffset(feature, lineWidth / 2, {\n        units: 'meters'\n    }).geometry.coordinates\n    var line2 = lineOffset(feature, - lineWidth / 2, {\n        units: 'meters'\n    }).geometry.coordinates\n\n    var lineCart = [], lineCart1 = [], lineCart2 = []\n    for (let i = 0; i < line.length; i++) {\n        const pt = line[i];\n        const pt1 = line1[i];\n        const pt2 = line2[i];\n\n        lineCart.push(Cesium.Cartesian3.fromDegrees(pt[0], pt[1], clampToGround ? pt[2] : undefined))\n        lineCart1.push(Cesium.Cartesian3.fromDegrees(pt1[0], pt1[1], clampToGround ? pt[2] : undefined))\n        lineCart2.push(Cesium.Cartesian3.fromDegrees(pt2[0], pt2[1], clampToGround ? pt[2] : undefined))\n\n    }\n\n    var distances = [0], d = 0;\n    for (let i = 1; i < line.length; i++) {\n        var p0 = lineCart[i - 1], p1 = lineCart[i];\n        var a = Cesium.Cartesian3.distance(p0, p1);\n        d += a;\n        distances.push(d);\n    }\n\n    d = uvUnit ? uvUnit.x : d;\n    var uvs = [], positions = [], vertices = [];\n    for (let i = 0; i < line.length; i++) {\n        var x = distances[i] / d,\n            p1 = lineCart1[i], p2 = lineCart2[i];\n        uvs.push(x, 0)\n        uvs.push(x, 1);\n        positions.push(p1.x, p1.y, p1.z)\n        positions.push(p2.x, p2.y, p2.z)\n\n        vertices.push(lineCart1[i], lineCart2[i])\n    }\n\n    var indices = []\n    for (let i = 1; i < line.length; i++) {\n\n        const i0 = 2 * (i - 1), i1 = 2 * i - 1, i2 = 2 * i, i3 = 2 * i + 1;\n        const p0 = line1[i - 1];\n        const p1 = line2[i - 1];\n        const p2 = line1[i];\n        const p3 = line2[i];\n\n        var cw = geojsonHelper.isClockWise([p0, p1, p3, p2])\n        if (!cw) {\n            indices.push(i3, i0, i1, i3, i2, i0);\n        } else {\n            indices.push(i0, i3, i1, i0, i2, i3);\n        }\n\n    }\n\n    uvs = new Float32Array(uvs)\n    positions = new Float32Array(positions)\n    var geometry = new THREE.BufferGeometry()\n    geometry.setAttribute('position', new THREE.BufferAttribute(positions, 3, false))\n    geometry.setAttribute('uv', new THREE.BufferAttribute(uvs, 2, false))\n    geometry.setIndex(indices);\n    lineCart = [], lineCart1 = [], lineCart2 = [];\n    return geometry;\n\n}\n\n/**\n * \n * @param {geojson.Feature<geojson.LineString>[]} features \n * @param {number}[epsilon=0.01] 单位是：m/米\n * @returns {geojson.Feature<geojson.LineString>[]}\n */\nGeoPolylineGeometry.union = function (features, epsilon) {\n\n    epsilon = typeof epsilon == 'number' ? epsilon : 0.01;\n    if (epsilon < 0) epsilon = 0;\n    epsilon /= 1000.0;\n    function coordEquals(c1, c2) {\n        var from = turf.point(c1);\n        var to = turf.point(c2);\n        var options = { units: 'kilometers' };\n        var distance = turf_distance(from, to, options);\n        return distance <= epsilon;\n    }\n\n    function getStart(feature) {\n        var coordinates = feature.geometry.coordinates\n        return coordinates[0]\n    }\n    function getStop(feature) {\n        var coordinates = feature.geometry.coordinates\n        return coordinates[coordinates.length - 1]\n    }\n\n    function union(prev, next, reverseNext, reversePrev) {\n        var coordinatesPre = prev.geometry.coordinates.slice()\n        var coordinatesNext = next.geometry.coordinates.slice()\n\n        if (reverseNext) coordinatesNext = coordinatesNext.reverse();\n        if (reversePrev) coordinatesPre = coordinatesPre.reverse();\n\n        coordinatesPre.pop();\n\n        return {\n            type: 'Feature',\n            geometry: {\n                type: 'LineString',\n                coordinates: coordinatesPre.concat(coordinatesNext),\n                properties: Object.assign({}, prev.properties, next.properties)\n            }\n        }\n    }\n\n    var stack = features.slice();\n    var newFeatures = [];\n    do {\n        var feature = stack.pop();\n        var tempStack = stack.slice();\n        var changed = false\n        while (tempStack.length) {\n            var tempFeature = tempStack.pop();\n            var deleted = false;\n            if (coordEquals(getStart(tempFeature), getStop(feature))) {\n                //0-->(0 0)-->0\n                feature = union(feature, tempFeature);\n                deleted = true\n            } else if (coordEquals(getStop(tempFeature), getStart(feature))) {\n                //0<--(0 0)<--0\n                feature = union(tempFeature, feature);\n                deleted = true\n            } else if (coordEquals(getStop(tempFeature), getStop(feature))) {\n                //0-->(0 0)<--0\n                feature = union(tempFeature, feature, true);\n                deleted = true\n            }\n            else if (coordEquals(getStart(tempFeature), getStart(feature))) {\n                //0<--(0 0)-->0\n                feature = union(tempFeature, feature, false, true);\n                deleted = true\n            }\n            if (deleted) {\n                var id = stack.indexOf(tempFeature)\n                stack.splice(id, 1);\n                changed = true;\n            }\n        }\n\n        changed ? stack.push(feature) : newFeatures.push(feature);\n    } while (stack.length);\n    return newFeatures;\n}\n\n/**\n * \n * @param {geojson.Feature<geojson.LineString>} feature \n * @param {number} lineWidth \n * @param {{x:number,y:number}} [uvUnit] \n * @param {boolean} [clampToGround] \n * @returns {THREE.BufferGeometry}\n */\nGeoPolylineGeometry.fromFeature = function (feature, lineWidth, uvUnit, clampToGround) {\n    if (!feature.geometry) {\n        return;\n    }\n    return new GeoPolylineGeometry(feature, lineWidth, uvUnit, clampToGround);\n}\n\n/**\n * \n * @param {geojson.PolylineFeatureCollection} features \n * @param {number} lineWidth \n * @param {object} [options]\n * @param {THREE.Vector2|Cesium.Cartesian2}[options.uvUnit]\n * @param {boolean}[options.union]\n * @param {number}[options.unionEpsilon=0.01] 单位是：m/米\n * @param {boolean}[options.clampToGround]\n * @returns {THREE.BufferGeometry}\n */\nGeoPolylineGeometry.fromFeatures = function (features, lineWidth, options) {\n    const geometries = [];\n\n    try {\n        const union = options.union,\n            unionEpsilon = options.unionEpsilon,\n            uvUnit = options.uvUnit,\n            clampToGround = options.clampToGround;\n        if (union) features = this.union(features, unionEpsilon);\n\n        for (let i = 0; i < features.length; i++) {\n            var g = new GeoPolylineGeometry(features[i], lineWidth, uvUnit, clampToGround)\n            geometries.push(g)\n        }\n        var geometry = GeometryUtils.mergeGeometries3js(geometries)\n        geometry.computeVertexNormals();\n        geometry.computeBoundingSphere();\n\n        return geometry\n    } catch (er) {\n        console.error(er);\n    }\n\n}\nexport default GeoPolylineGeometry;",
    "import GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\n\n\nfunction Vertex(x, y, z, center, id) {\n    this.id = id;\n    center = center || [0, 0, 0, 0]\n    this.position = new THREE.Vector3(x, y, z);\n    this.center = new THREE.Vector4().fromArray(center);\n    /**\n     * @type {Edge[]}\n     */\n    this.edges = [];\n    this.onSharedLine = false\n}\nfunction Edge(v1, v2, id) {\n    this.id = id;\n    this.v1 = v1;\n    this.v2 = v2;\n    this.isShared = false\n    /**\n     * @type {Triangle}\n     */\n    this.triangles = [];\n}\n/**\n * \n * @param {Vertex} a \n * @param {Vertex} b \n * @param {Vertex} c \n */\nfunction Triangle(a, b, c) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.normal = null;\n    this.edges = [];\n    this.vertices = [a, b, c];\n}\nvar centers4 = [\n    [1, 0, 0, 1],\n    [1, 1, 0, 1],\n    [0, 0, 0, 1],\n    [0, 1, 0, 1]\n], centers3 = [\n    [1, 0, 0, 0],\n    [0, 1, 0, 0],\n    [0, 0, 1, 0]\n], centerEmpty = [0, 0, 0, 0]\n\n/**\n * \n * @param {THREE.BufferGeometry|THREE.Geometry} geometry \n * @param {boolean} [quadMode=false] \n * @constructor\n * @extends THREE.BufferGeometry\n */\nexport default function SolidWireframeGeometry(geometry, quadMode) {\n    if (quadMode) return new SolidWireframeGeometry2(geometry);\n    const { BufferGeometry, BufferAttribute } = THREE;\n    if (geometry.isGeometry) {\n        geometry = new BufferGeometry().fromGeometry(geometry)\n    }\n\n    var srcPosition = geometry.attributes.position;\n    var index = GeometryUtils.genGeometryIndicesAll(geometry);\n    var positions = [], centers = [];\n    var _vector3 = new THREE.Vector3()\n    function pushFinalVertex(idx, center) {\n        _vector3.fromBufferAttribute(srcPosition, idx)\n        var { x, y, z } = _vector3;\n        positions.push(x, y, z)\n        centers.push(center[0], center[1], center[2], center[3]);\n    }\n\n    for (let i = 0; i < index.length; i += 3) {\n        var a = index[i], b = index[i + 1], c = index[i + 2];\n        pushFinalVertex(a, centers3[0])\n        pushFinalVertex(b, centers3[1])\n        pushFinalVertex(c, centers3[2]);\n    }\n\n    positions = new Float32Array(positions);\n    centers = new Float32Array(centers);\n    geometry = new THREE.BufferGeometry();\n    geometry.setAttribute('position', new BufferAttribute(positions, 3, false))\n    geometry.setAttribute('center', new BufferAttribute(centers, 4, false))\n\n    return geometry;\n}\n\nfunction SolidWireframeGeometry2(geometry) {\n    const { BufferGeometry, BufferAttribute } = THREE;\n    if (geometry.isGeometry) {\n        geometry = new BufferGeometry().fromGeometry(geometry)\n    }\n\n    var srcPositions = geometry.attributes.position.array;\n    var index = GeometryUtils.genGeometryIndicesAll(geometry);\n    var positions = [], centers = [];\n    function pushFinalVertex(v, center) {\n        var position = v.position;\n        var { x, y, z } = position;\n        positions.push(x, y, z)\n        centers.push(center[0], center[1], center[2], center[3]);\n    }\n\n    /**\n     * @type {Triangle[]}\n     */\n    var triangles = [];\n    /**\n     * @type {Edge[]}\n     */\n    var edges = [];\n    var edgeMap = new Map();\n    /**\n     * @type {Vertex[]}\n     */\n    var vertices = [];\n    var vertexMap = new Map();\n    function pushVertex(srcIdx, center) {\n        var off = srcIdx * 3;\n        var x = srcPositions[off],\n            y = srcPositions[off + 1],\n            z = srcPositions[off + 2];\n        var key = x + ',' + y + ',' + z;\n        var vertex = vertexMap.get(key)\n        if (vertex == undefined) {\n            vertex = new Vertex(x, y, z, center, vertices.length);\n            vertices.push(vertex);\n            vertexMap.set(key, vertex);\n        }\n        return vertex;\n    }\n\n    function pushEdge(a, b, triangle) {\n        var ia = a.id, ib = b.id;\n        var va = a, vb = b;\n        var key = ia > ib ? [ib, a] : [a, b];\n        if (ia > ib) {\n            vb = a; va = b;\n            key = [ib, ia].join(',')\n        } else {\n            key = [ia, ib].join(',')\n        }\n        var edge = edgeMap.get(key)\n        if (edge == undefined) {\n            edge = new Edge(va, vb, edges.length);\n            edges.push(edge);\n            va.edges.push(edge)\n            vb.edges.push(edge)\n            edgeMap.set(key, edge)\n        }\n        edge.triangles.push(triangle);\n        triangle.edges.push(edge);\n        return edge;\n    }\n\n    function pushTriangle(a, b, c) {\n        a = pushVertex(a, [1, 0, 0, 0])\n        b = pushVertex(b, [0, 1, 0, 0])\n        c = pushVertex(c, [0, 0, 1, 0])\n        var triangle = new Triangle(a, b, c);\n        pushEdge(a, b, triangle)\n        pushEdge(b, c, triangle)\n        pushEdge(c, a, triangle)\n        triangles.push(triangle);\n    }\n\n    for (let i = 0; i < index.length; i += 3) {\n        var a = index[i], b = index[i + 1], c = index[i + 2];\n        pushTriangle(a, b, c);\n    }\n\n    var N = new THREE.Vector3()\n    var removeCoplanar = true;\n    var angleEpsilon = 1;\n    for (let i = 0; i < edges.length; i++) {\n        const edge = edges[i];\n        const triangles = edge.triangles;\n        if (triangles.length > 1) {\n            var isCoplanar = true;\n            if (removeCoplanar) {\n                triangles.forEach(triangle => {\n                    if (triangle.normal) return;\n                    var { a, b, c } = triangle;\n                    a = a.position\n                    b = b.position\n                    c = c.position\n                    GeometryUtils.computeNormal(a, b, c, N, false);\n                    triangle.normal = N.clone()\n                })\n                var N0 = triangles[0].normal;\n                for (let j = 1; j < triangles.length; j++) {\n                    const triangle = triangles[j];\n                    var angle = N0.angleTo(triangle.normal);\n                    if (angle > angleEpsilon) {\n                        isCoplanar = false\n                        break;\n                    }\n                }\n            }\n            if (isCoplanar)\n                edge.isShared = true\n        }\n    }\n\n    //\n    var vs = [];\n    for (let i = 0; i < edges.length; i++) {\n        const edge = edges[i];\n        if (edge.isShared) {\n            vs.length = 0;\n            var done = false;\n            var triangles = edge.triangles;\n            triangles.forEach(triangle => {\n                if (triangle._done) done = true;\n            })\n            if (done) continue;\n            triangles.forEach(triangle => {\n                triangle.vertices.forEach(v => {\n                    var vi = vs.indexOf(v);\n                    if (vi == -1) {\n                        vi = vs.length;\n                        vs.push(v)\n                    }\n                    var center = centers4[vi]\n                    pushFinalVertex(v, center)\n                });\n                triangle._done = true\n            })\n        }\n    }\n\n    for (let i = 0; i < triangles.length; i++) {\n        const triangle = triangles[i];\n        if (triangle._done) continue;\n        var { a, b, c } = triangle;\n        pushFinalVertex(a, centers3[0]);\n        pushFinalVertex(b, centers3[1]);\n        pushFinalVertex(c, centers3[2]);\n    }\n\n    positions = new Float32Array(positions);\n    centers = new Float32Array(centers);\n    geometry = new THREE.BufferGeometry();\n    geometry.setAttribute('position', new BufferAttribute(positions, 3, false))\n    geometry.setAttribute('center', new BufferAttribute(centers, 4, false))\n\n    return geometry;\n}",
    "import GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\nconst { triangulateShape } = GeometryUtils;\nfunction VectorPolygonGeometry(contour, holes, height) {\n    this.contour = contour || [];\n    this.holes = holes || [];\n    this.height = height || 0;\n}\n\nVectorPolygonGeometry.createGeometry = function (vectorPolygonGeometry) {\n    const Vector3 = THREE.Vector3;\n    var contour = vectorPolygonGeometry.contour;\n    var holes = vectorPolygonGeometry.holes;\n    var height = vectorPolygonGeometry.height;\n    var vertices = [], indices = [];\n    contour = contour.map(vertex => {\n        return Array.isArray(vertex) ? new Vector3(vertex[0], vertex[1], height) : vertex;\n    });\n    holes = holes.map(hole => {\n        return hole.map(vertex => {\n            return Array.isArray(vertex) ? new Vector3(vertex[0], vertex[1], height) : vertex;\n        })\n    });\n    triangulateShape(contour, holes, vertices, indices);\n    return buildGeometry(vertices, indices);\n}\nfunction buildGeometry(vertices, indices) {\n    const { BufferGeometry, BufferAttribute } = THREE;\n    var positions = new Float32Array(vertices.length * 3), ptr = 0;\n    vertices.forEach(v => {\n        positions[ptr++] = v.x;\n        positions[ptr++] = v.y;\n        positions[ptr++] = v.z;\n    });\n    var geometry = new BufferGeometry();\n    geometry.setAttribute('position', new BufferAttribute(positions, 3, false))\n    geometry.setIndex(indices);\n    geometry.computeVertexNormals();\n    return geometry;\n}\nfunction parsePolygon(polygonCoordinates, height, outVertices, outIndices) {\n    const Vector3 = THREE.Vector3;\n    var contour = polygonCoordinates[0], holes = [];\n    for (let i = 1; i < polygonCoordinates.length; i++) {\n        holes.push(polygonCoordinates[i]);\n    }\n    contour = contour.map(vertex => {\n        return Array.isArray(vertex) ? new Vector3(vertex[0], vertex[1], height) : vertex;\n    });\n    holes = holes.map(hole => {\n        return hole.map(vertex => {\n            return Array.isArray(vertex) ? new Vector3(vertex[0], vertex[1], height) : vertex;\n        })\n    });\n    triangulateShape(contour, holes, outVertices, outIndices);\n}\n\nVectorPolygonGeometry.fromFeature = function (feature, height) {\n    var vertices = [], indices = [];\n    height = height || 0.01;\n    if (!feature.geometry) {\n        return;\n    }\n    var geom = feature.geometry, geomType = geom.type;\n    var coordinates = geom.coordinates;\n    if (geomType == 'Polygon') {\n        parsePolygon(coordinates, height, vertices, indices);\n    } else if (geomType == 'MultiPolygon') {\n        coordinates.forEach(polygon => {\n            parsePolygon(polygon, height, vertices, indices);\n        });\n    }\n    if (!vertices.length) return;\n    return buildGeometry(vertices, indices);\n}\nVectorPolygonGeometry.fromFeatures = function (features, height) {\n    var vertices = [], indices = [];\n    height = height || 0.01;\n    features.forEach(f => {\n        if (!f.geometry) {\n            return;\n        }\n        var geom = f.geometry, geomType = geom.type;\n        var coordinates = geom.coordinates;\n        if (geomType == 'Polygon') {\n            parsePolygon(coordinates, height, vertices, indices);\n        } else if (geomType == 'MultiPolygon') {\n            coordinates.forEach(polygon => {\n                parsePolygon(polygon, height, vertices, indices);\n            });\n        }\n    });\n    if (!vertices.length) return;\n    return buildGeometry(vertices, indices);\n}\nexport default VectorPolygonGeometry;",
    "\nimport Earth from  \"./Earth.js\";\n\nimport GeoPolygonGeometry from  \"./geometries/GeoPolygonGeometry.js\";\n\nimport GeoPolylineGeometry from  \"./geometries/GeoPolylineGeometry.js\";\n\nimport ExtrudedPolygonGeometry from  \"./geometries/ExtrudedPolygonGeometry.js\";\n\nimport SolidWireframeGeometry from  \"./geometries/SolidWireframeGeometry.js\";\n\nimport VectorPolygonGeometry from  \"./geometries/VectorPolygonGeometry.js\";\n\nimport SolidWireframeMaterial from  \"./materials/SolidWireframeMaterial.js\";\n\nimport TiandituLayer, { TiandituImgLayer, TiandituTerLayer, TiandituVecLayer } from  \"./layers/imagery/TiandituLayer.js\";\n\nimport C3DTilesLayer from  \"./layers/object3d/C3DTilesLayer.js\";\n\nimport OsgbLayer from  \"./layers/object3d/OsgbLayer.js\";\n\nimport GeoMesh from  \"./layers/object3d/GeoMesh.js\";\n\nimport GeoPolygonMesh from  \"./layers/object3d/GeoPolygonMesh.js\";\n\nimport GeoPolylineMesh from  \"./layers/object3d/GeoPolylineMesh.js\";\n\nimport GeoWaterMesh from  \"./layers/object3d/GeoWaterMesh.js\";\n\n\nimport Vector2dLayer, {\n    HighlightPolygonLayer, SealandVec2dLayer,\n    HighlightMarkerLayer, LabelVec2dLayer, CountryVec2dLayer\n} from  \"./layers/vector/Vector2dLayer.js\";\n\n// import Vector2RasterLayer from \"./Source/layers/vector/Vector2RasterLayer.js\";\nimport Vector3dLayer from  \"./layers/vector/Vector3dLayer.js\";\n\nimport ImageTileLayer from  \"./layers/imagery/ImageTileLayer.js\";\n\nimport ILayer from  \"./layers/ILayer.js\";\n\nimport { LocalSkyBox, LocalSkyBoxAnimation } from  \"./environments/LocalSkyBox.js\";\n\nimport interactive, {\n    getPoint, getLine, getPolyline, getRactangle, pickPosition\n} from  \"./interactive/index.js\";\n\n\nimport {\n    MeshVisualizer,\n    polyfill,\n    GeometryUtils,\n    CameraUtils,\n    IEffect,\n    IRenderable,\n    RendererUtils\n} from  \"../../core/index.js\";\n\n\nimport {\n    MeshVisModel, MeshVisModelUtil, releaseResources,\n    VISMLoader, OSGLoader, GLTFLoader, DDSLoader, TGALoader, BMPLoader,\n    DRACOLoader, RGBELoader, BmpDecoder, Osg, parseOsg, readOsg,\n    GLTFExporter, DRACOExporter, VISMExporter,\n    PagedLOD, QuadtreeLOD, QuadtreeLODUtil, LODUtils,\n    QuadtreeNode, QuatreeContentSet, BuildingVector3DLoader,\n    CameraHelper\n} from  \"../../renderable/index.js\";\n\n\nimport {\n    computeArea,\n    defineProperty,\n    determinant, esExtends, GenericWorker,\n    geojsonHelper, ImageUtils, isTypedArray,\n    lineBufferDir3, MathUtils, matrix4LookAt,\n    mergeBuffers, parseDefines,\n    decodeGeojson, decodeGeojsonAsync, decodeGeojsonCoords, decodeGeojsonCoordsAsync, decodeObject,\n    encodeGeojson, encodeGeojsonCoords, encodeObject, encodeObjectValues,\n    Path, save, saveArrayBuffer, saveString,\n    stringToArrayBuffer, StringUtil, triangulate,\n    traverse, getPaddedBuffer, getPaddedBufferSize\n} from  \"../../utils/index.js\";\n\n\nexport {\n    Earth, LocalSkyBox, LocalSkyBoxAnimation,\n    ILayer, ImageTileLayer, TiandituLayer, TiandituImgLayer, TiandituTerLayer, TiandituVecLayer,\n    Vector2dLayer, HighlightPolygonLayer, SealandVec2dLayer,\n    HighlightMarkerLayer, LabelVec2dLayer, CountryVec2dLayer,\n    // Vector2RasterLayer\n    Vector3dLayer,\n    C3DTilesLayer, OsgbLayer,\n    GeoMesh, GeoPolygonMesh, GeoPolylineMesh, GeoWaterMesh,\n    GeoPolylineGeometry, GeoPolygonGeometry,\n    ExtrudedPolygonGeometry, SolidWireframeGeometry, VectorPolygonGeometry,\n    SolidWireframeMaterial,\n    interactive, getPoint, getLine, getPolyline, getRactangle, pickPosition\n\n    //core\n    , MeshVisualizer,\n    polyfill,\n    GeometryUtils,\n    CameraUtils,\n    IEffect,\n    IRenderable,\n    RendererUtils\n\n    //renderable\n    , MeshVisModel, MeshVisModelUtil, releaseResources,\n    VISMLoader, OSGLoader, GLTFLoader, DDSLoader, TGALoader, BMPLoader,\n    DRACOLoader, RGBELoader, BmpDecoder, Osg, parseOsg, readOsg,\n    GLTFExporter, DRACOExporter, VISMExporter,\n    PagedLOD, QuadtreeLOD, QuadtreeLODUtil, LODUtils,\n    QuadtreeNode, QuatreeContentSet, BuildingVector3DLoader,\n    CameraHelper\n\n    //utils\n    , computeArea,\n    defineProperty,\n    determinant, esExtends, GenericWorker,\n    geojsonHelper, ImageUtils, isTypedArray,\n    lineBufferDir3, MathUtils, matrix4LookAt,\n    mergeBuffers, parseDefines,\n    decodeGeojson, decodeGeojsonAsync, decodeGeojsonCoords, decodeGeojsonCoordsAsync, decodeObject,\n    encodeGeojson, encodeGeojsonCoords, encodeObject, encodeObjectValues,\n    Path, save, saveArrayBuffer, saveString,\n    stringToArrayBuffer, StringUtil, triangulate,\n    traverse, getPaddedBuffer, getPaddedBufferSize\n}\n",
    "import pickPosition from  \"./pickPosition.js\";\n\n\n/**\n * 通过绘制获取线段\n * @param {Cesium.Viewer} viewer \n * @param {(line:Cesium.Cartographic[],entities:Cesium.Entity[])=>void}callback\n * @param {object}[options]\n * @param {Cesium.Color}[options.lineColor=Color.DARKORANGE]\n * @param {Cesium.Color}[options.pointColor=Color.DARKORANGE]\n * @param {number}[options.pointSize=8]\n * @param {(line:Cesium.Cartographic[])=>void}[options.onMove]\n * @param {(point:Cesium.Cartographic)=>void}[options.onStart]\n * @returns {()=>void} cancelCallback\n */\nexport default function getLine(viewer, callback, options) {\n    if (!callback) throw new Error('缺少callback参数')\n    options = options || {};\n\n    const {\n        ScreenSpaceEventType, CallbackProperty,\n        Color, Cartesian3, HeightReference, Cartographic\n    } = Cesium;\n    const { LEFT_CLICK, MOUSE_MOVE } = ScreenSpaceEventType;\n    const handler = viewer.screenSpaceEventHandler;\n    var lineColor = options.lineColor || Color.DARKORANGE\n    var pointColor = options.pointColor || Color.DARKORANGE\n    var pointSize = options.pointSize || 8\n    var onMove = options.onMove;\n    var onStart = options.onStart;\n\n    //保存之前的鼠标事件监听器\n    var state = {\n        [LEFT_CLICK]: handler.getInputAction(LEFT_CLICK),\n        [MOUSE_MOVE]: handler.getInputAction(MOUSE_MOVE)\n    }\n    var points = [];\n\n    //矩形及其边框entity\n    var lineEntity = viewer.entities.add({\n        show: false,\n        polyline: {\n            positions: new CallbackProperty(() => {\n                return points\n            }, false),\n            show: new CallbackProperty(() => {\n                return lineEntity.show && points.length > 1\n            }, false),\n            clampToGround: true,\n            width: 1.5,\n            material: lineColor\n        }\n    })\n\n    function addPointEntity(idx) {\n        return viewer.entities.add({\n            position: new CallbackProperty(() => {\n                return points[idx]\n            }, false),\n            point: {\n                show: new CallbackProperty(() => {\n                    if (idx == 0) return points.length > 0;\n                    else return points.length > 1;\n                }, false),\n                pixelSize: pointSize,\n                color: pointColor,\n                heightReference: HeightReference.CLAMP_TO_GROUND\n            }\n        })\n    }\n    //线段端点\n    var pointEntities = [\n        addPointEntity(0), addPointEntity(1)\n    ];\n\n    handler.setInputAction(e => {\n        if (points.length == 2) {\n            return end()\n        }\n\n        var p = pickPosition(viewer.scene, e.position)\n        if (!p || Cartesian3.equals(p, points[1])) {\n            return\n        }\n\n        if (points.length == 0) {//第一个点 \n            points[0] = p\n            if (onStart) {\n                onStart(Cartographic.fromCartesian(p))\n            }\n        } else {//斜对角点\n            points[1] = p\n        }\n    }, LEFT_CLICK);\n\n    handler.setInputAction(e => {\n        if (points.length == 0) return;\n        var p = pickPosition(viewer.scene, e.endPosition)\n        if (!p || Cartesian3.equals(p, points[1])) {\n            return;\n        }\n\n        points[1] = p\n        lineEntity.show = true\n        if (onMove) {\n            onMove(points.map(p => {\n                return Cartographic.fromCartesian(p)\n            }));\n        }\n    }, MOUSE_MOVE);\n\n    //恢复之前的鼠标事件监听器\n    function end(cancel) {\n        if(state[LEFT_CLICK])handler.setInputAction(state[LEFT_CLICK], LEFT_CLICK);\n        else handler.removeInputAction(LEFT_CLICK);\n        if (state[MOUSE_MOVE]) handler.setInputAction(state[MOUSE_MOVE], MOUSE_MOVE);\n        else handler.removeInputAction(MOUSE_MOVE);\n\n        viewer.entities.remove(lineEntity);\n        for (let i = 0; i < pointEntities.length; i++) {\n            viewer.entities.remove(pointEntities[i]);\n        }\n        if (!cancel) {\n            var entities = [{\n                polyline: {\n                    positions: points,\n                    clampToGround: true,\n                    width: 1.5,\n                    material: lineColor\n                }\n            }];\n\n            points = points.map(p => {\n                entities.push({\n                    position: p,\n                    point: {\n                        pixelSize: pointSize,\n                        color: pointColor,\n                        heightReference: HeightReference.CLAMP_TO_GROUND\n                    }\n                })\n                return Cartographic.fromCartesian(p)\n            });\n            callback(points, entities)\n        }\n        pointEntities = lineEntity = null;\n        state = points = null;\n    }\n    function cancel() {\n        end(true)\n    }\n    return cancel;\n}\n",
    "\nimport pickPosition from  \"./pickPosition.js\";\n\n\n/**\n * 通过绘制获取点\n * @param {Cesium.Viewer} viewer \n * @param {(point:Cesium.Cartographic)=>void}callback\n * @param {object}[options]\n * @param {object}[options.pointSize=8]\n * @param {Cesium.Color}[options.pointColor=Cesium.Color.DARKORANGE]\n * @param {(point:Cesium.Cartographic)=>void}[options.onMove]\n * @returns {()=>void} cancelCallback\n */\nexport default function getPoint(viewer, callback, options) {\n    if (!callback) throw new Error('缺少callback参数')\n    options = options || {};\n\n    const {\n        ScreenSpaceEventType, CallbackProperty,\n        Color, Cartesian3, HeightReference, Cartographic\n    } = Cesium;\n    const { LEFT_CLICK, MOUSE_MOVE } = ScreenSpaceEventType;\n    const handler = viewer.screenSpaceEventHandler;\n    var pointSize = options.pointSize || 8;\n    var pointColor = options.pointColor || Color.DARKORANGE\n    var onMove = options.onMove;\n\n    //保存之前的鼠标事件监听器\n    var state = {\n        [LEFT_CLICK]: handler.getInputAction(LEFT_CLICK),\n        [MOUSE_MOVE]: handler.getInputAction(MOUSE_MOVE)\n    }\n    var position = new Cartesian3()\n    var positionCarg = new Cartographic()\n    var ellipsoid = viewer.scene.globe.ellipsoid;\n\n    var entity = viewer.entities.add({\n        position: new CallbackProperty(() => {\n            return position\n        }, false),\n        show: false,\n        point: {\n            pixelSize: pointSize,\n            color: Color.fromAlpha(pointColor, 1),\n            outlineColor: pointColor,\n            outlineWidth: 1.5,\n            outline: true,\n            heightReference: HeightReference.CLAMP_TO_GROUND\n        }\n    })\n\n    handler.setInputAction(e => {\n        var p = pickPosition(viewer.scene, e.position)\n        if (!p) {\n            return\n        }\n        position = p;\n        end()\n    }, LEFT_CLICK);\n\n    handler.setInputAction(e => {\n        var p = pickPosition(viewer.scene, e.endPosition)\n        if (!p) {\n            return;\n        }\n        position = p\n        entity.show = true\n        onMove && onMove(Cartographic.fromCartesian(position, ellipsoid, positionCarg));\n    }, MOUSE_MOVE);\n\n    //恢复之前的鼠标事件监听器\n    function end(cancel) {\n        if (state[LEFT_CLICK]) handler.setInputAction(state[LEFT_CLICK], LEFT_CLICK);\n        else handler.removeInputAction(LEFT_CLICK);\n        if (state[MOUSE_MOVE]) handler.setInputAction(state[MOUSE_MOVE], MOUSE_MOVE);\n        else handler.removeInputAction(MOUSE_MOVE);\n\n        viewer.entities.remove(entity);\n\n        if (!cancel) {\n            callback(Cartographic.fromCartesian(position, ellipsoid, positionCarg), {\n                position: position,\n                point: {\n                    pixelSize: pointSize,\n                    color: Color.fromAlpha(pointColor, 1),\n                    outlineColor: pointColor,\n                    outlineWidth: 1.5,\n                    outline: true,\n                    heightReference: HeightReference.CLAMP_TO_GROUND\n                }\n            })\n        }\n        state = entity = position = positionCarg = null;\n    }\n\n    function cancel() {\n        end(true)\n    }\n\n    return cancel;\n}\n",
    "import pickPosition from  \"./pickPosition.js\";\n\n\n/**\n * 通过绘制获取多段线\n * @param {Cesium.Viewer} viewer \n * @param {(line:Cesium.Cartographic[],entities:Cesium.Entity[])=>void}callback\n * @param {object}[options]\n * @param {Cesium.Color}[options.lineColor=Color.DARKORANGE]\n * @param {Cesium.Color}[options.pointColor=Color.DARKORANGE]\n * @param {number}[options.pointSize=8]\n * @param {(line:Cesium.Cartographic[])=>void}[options.onMove]\n * @returns {()=>void} cancelCallback\n */\nexport default function getPolyline(viewer, callback, options) {\n    if (!callback) throw new Error('缺少callback参数')\n    options = options || {};\n\n    const {\n        ScreenSpaceEventType, CallbackProperty,\n        Color, Cartesian3, HeightReference, Cartographic\n    } = Cesium;\n    const { LEFT_CLICK, MOUSE_MOVE, LEFT_DOUBLE_CLICK } = ScreenSpaceEventType;\n    const handler = viewer.screenSpaceEventHandler;\n    var lineColor = options.lineColor || Color.DARKORANGE\n    var pointColor = options.pointColor || Color.DARKORANGE\n    var pointSize = options.pointSize || 8\n    var onMove = options.onMove;\n\n    //保存之前的鼠标事件监听器\n    var state = {\n        [LEFT_CLICK]: handler.getInputAction(LEFT_CLICK),\n        [MOUSE_MOVE]: handler.getInputAction(MOUSE_MOVE),\n        [LEFT_DOUBLE_CLICK]: handler.getInputAction(LEFT_DOUBLE_CLICK)\n    }\n    var points = [], polyline = [];\n\n    //矩形及其边框entity\n    var lineEntity = viewer.entities.add({\n        show: false,\n        polyline: {\n            positions: new CallbackProperty(() => {\n                return points\n            }, false),\n            show: new CallbackProperty(() => {\n                return lineEntity.show && points.length > 1\n            }, false),\n            clampToGround: true,\n            width: 1.5,\n            material: lineColor\n        }\n    })\n    //线段端点\n    var pointEntities = [];\n    function addPoint(point, isEnding) {\n        var pointEntity = viewer.entities.add({\n            position: point,\n            point: {\n                pixelSize: pointSize,\n                color: pointColor,\n                heightReference: HeightReference.CLAMP_TO_GROUND\n            }\n        })\n        pointEntities.push(pointEntity)\n        points.push(point)\n        if (isEnding) {\n            polyline.push(point)\n        }\n    }\n\n    handler.setInputAction(e => {\n        var p = pickPosition(viewer.scene, e.position)\n        if (!p\n            || (points.length == 1 && Cartesian3.equals(p, points[points.length - 1]))\n        ) {\n            return\n        }\n        addPoint(p, true)\n    }, LEFT_CLICK);\n\n    handler.setInputAction(e => {\n        if (points.length == 0) return;\n        var p = pickPosition(viewer.scene, e.endPosition)\n        if (!p || (points.length == 1 && Cartesian3.equals(p, points[points.length - 1]))) {\n            return;\n        }\n        if (polyline.length == points.length) {\n            addPoint(p, false)\n        } else {\n            points[points.length - 1] = p\n        }\n        if (onMove) {\n            onMove(points.map(p => {\n                return Cartographic.fromCartesian(p)\n            }));\n        }\n        lineEntity.show = true\n    }, MOUSE_MOVE);\n\n    handler.setInputAction(() => end(), LEFT_DOUBLE_CLICK)\n\n    //恢复之前的鼠标事件监听器\n    function end(cancel) {\n        if (state[LEFT_CLICK]) {\n            handler.setInputAction(state[LEFT_CLICK], LEFT_CLICK);\n        }\n        else {\n            handler.removeInputAction(LEFT_CLICK);\n        }\n        if (state[MOUSE_MOVE]) {\n            handler.setInputAction(state[MOUSE_MOVE], MOUSE_MOVE);\n        }\n        else {\n            handler.removeInputAction(MOUSE_MOVE);\n        }\n        if (state[LEFT_DOUBLE_CLICK]) {\n            handler.setInputAction(state[LEFT_DOUBLE_CLICK], LEFT_DOUBLE_CLICK);\n        } else {\n            handler.removeInputAction(LEFT_DOUBLE_CLICK);\n        }\n\n        viewer.entities.remove(lineEntity);\n        for (let i = 0; i < pointEntities.length; i++) {\n            viewer.entities.remove(pointEntities[i]);\n        }\n        if (!cancel) {\n            //\n            var entities = [{\n                polyline: {\n                    positions: points,\n                    clampToGround: true,\n                    width: 1.5,\n                    material: lineColor\n                }\n            }];\n            for (const point of points) {\n                entities.push({\n                    position: point,\n                    point: {\n                        pixelSize: pointSize,\n                        color: pointColor,\n                        heightReference: HeightReference.CLAMP_TO_GROUND\n                    }\n                })\n            }\n            //\n            callback(polyline.map(p => {\n                return Cartographic.fromCartesian(p)\n            }), entities)\n        }\n        pointEntities = lineEntity = null;\n        state = points = null;\n    }\n    function cancel() {\n        end(true)\n    }\n\n    return cancel;\n}\n",
    "import getRactangleCornersWC from  \"./getRactangleCornersWC.js\";\n\nimport pickPosition from  \"./pickPosition.js\";\n\n\n/**\n * 通过绘制获取矩形范围\n * @param {Cesium.Viewer} viewer \n * @param {(rectangle:Cesium.Rectangle)=>void}callback\n * @param {object}[options]\n * @param {Cesium.Color}[options.areaColor=Color.DARKORANGE]\n * @param {Cesium.Color}[options.pointColor=Color.DARKORANGE]\n * @param {number}[options.pointSize=8]\n * @param {(rectangle:Cesium.Rectangle)=>void}[options.onMove]\n * @returns {()=>void} cancelCallback\n */\nexport default function getRactangle(viewer, callback, options) {\n    if (!callback) throw new Error('缺少callback参数')\n    options = options || {};\n    \n    const {\n        ScreenSpaceEventType, CallbackProperty,\n        Color, Rectangle,\n        Cartographic, HeightReference\n    } = Cesium;\n    const { LEFT_CLICK, MOUSE_MOVE, LEFT_DOUBLE_CLICK } = ScreenSpaceEventType;\n    const handler = viewer.screenSpaceEventHandler;\n    var areaColor = options.areaColor || Color.DARKORANGE;\n    var pointColor = options.pointColor || Color.DARKORANGE;\n    var pointSize = options.pointSize || 8;\n    var onMove = options.onMove;\n\n    //保存之前的鼠标事件监听器\n    var state = {\n        [LEFT_CLICK]: handler.getInputAction(LEFT_CLICK),\n        [MOUSE_MOVE]: handler.getInputAction(MOUSE_MOVE) \n    }\n    var rectangle = new Rectangle(), points = [], polyline = [];\n\n    //矩形及其边框entity\n    var rectangleEntity = viewer.entities.add({\n        show: false,\n        rectangle: {\n            coordinates: new CallbackProperty(() => {\n                return rectangle\n            }, false),\n            outline: true,\n            fill: true,\n            material: Color.fromAlpha(areaColor, 0.15),\n            show: new CallbackProperty(() => {\n                return rectangleEntity.show && polyline.length > 2\n            }, false)\n        },\n        polyline: {\n            positions: new CallbackProperty(() => {\n                return polyline\n            }, false),\n            show: new CallbackProperty(() => {\n                return rectangleEntity.show && polyline.length > 2\n            }, false),\n            clampToGround: true,\n            width: 1.5,\n            material: areaColor\n        }\n    })\n\n    function addVertEntity(idx) {\n        return viewer.entities.add({\n            position: new CallbackProperty(() => {\n                return polyline[idx]\n            }, false),\n            point: {\n                show: new CallbackProperty(() => {\n                    if (idx == 0) return polyline.length > 0 || points.length > 0;\n                    else return polyline.length > 1;\n                }, false),\n                pixelSize: pointSize,\n                color: pointColor,\n                outlineColor: pointColor,\n                outlineWidth: 1.5,\n                outline: true,\n                heightReference: HeightReference.CLAMP_TO_GROUND\n            }\n        })\n    }\n    //矩形顶点\n    var vertEntities = [\n        addVertEntity(0), addVertEntity(1),\n        addVertEntity(2), addVertEntity(3)\n    ];\n\n    function udpateRectangle() {\n        polyline = getRactangleCornersWC(rectangle);\n        polyline.push(polyline[0])\n        Rectangle.fromCartographicArray(points, rectangle)\n    }\n\n    handler.setInputAction(e => {\n        if (points.length == 2) {\n            points.length = 0;\n            return end()\n        }\n\n        var p = pickPosition(viewer.scene, e.position)\n        if (!p\n            || !(p = Cartographic.fromCartesian(p))\n            || Cartographic.equals(p, points[1])\n        ) {\n            return\n        }\n\n        if (points.length == 0) {//第一个点\n            polyline.length = 0;\n            points[0] = p\n            polyline[0] = Cesium.Cartesian3.fromRadians(p.longitude, p.latitude, p.height)\n        } else {//斜对角点\n            points[1] = p\n            udpateRectangle()\n        }\n    }, LEFT_CLICK);\n\n    handler.setInputAction(e => {\n        if (points.length == 0) return;\n        var p = pickPosition(viewer.scene, e.endPosition)\n        if (!p\n            || !(p = Cartographic.fromCartesian(p))\n            || Cartographic.equals(p, points[1])\n        ) {\n            return;\n        }\n\n        points[1] = p\n        rectangleEntity.show = true\n        udpateRectangle()\n        if (onMove) {\n            onMove(rectangle)\n        }\n    }, MOUSE_MOVE);\n\n    //恢复之前的鼠标事件监听器\n    function end(cancel) {\n        if (state[LEFT_CLICK]) {\n            handler.setInputAction(state[LEFT_CLICK], LEFT_CLICK);\n        }\n        else {\n            handler.removeInputAction(LEFT_CLICK);\n        }\n        if (state[MOUSE_MOVE]) {\n            handler.setInputAction(state[MOUSE_MOVE], MOUSE_MOVE);\n        }\n        else {\n            handler.removeInputAction(MOUSE_MOVE);\n        }\n        \n        viewer.entities.remove(rectangleEntity);\n        for (let i = 0; i < vertEntities.length; i++) {\n            viewer.entities.remove(vertEntities[i]);\n        }\n        if (!cancel) {\n            callback(rectangle)\n        }\n        vertEntities = rectangle = rectangleEntity = null;\n        state = points = polyline = null;\n    }\n\n    function cancel() {\n        end(true)\n    }\n\n    return cancel;\n\n}\n",
    "\n/**\n * 获取矩形四个角的顶点世界坐标\n * @param {Cesium.Rectangle} rectangle \n */\nexport default function getRactangleCornersWC(rectangle) {\n    var points = [\n        Cesium.Rectangle.northwest(rectangle),\n        Cesium.Rectangle.southwest(rectangle),\n        Cesium.Rectangle.southeast(rectangle),\n        Cesium.Rectangle.northeast(rectangle)\n    ].map(p => {\n        return Cesium.Cartesian3.fromRadians(p.longitude, p.latitude, p.height)\n    });\n\n    return points\n}",
    "import getLine from  \"./getLine.js\";\n\nimport getPoint from  \"./getPoint.js\";\n\nimport getPolyline from  \"./getPolyline.js\";\n\nimport getRactangle from  \"./getRactangle.js\";\n\nimport pickPosition from  \"./pickPosition.js\";\n\n\nexport { getPoint, getLine, getPolyline, getRactangle, pickPosition }\nexport default { getPoint, getLine, getPolyline, getRactangle, pickPosition }",
    "\nvar _ray;\n/**\n * 点击拾取坐标，考虑了有无地形的差别\n * @param {Cesium.Scene} scene \n * @param {Cesium.Cartesian2} mousePosition \n * @param {Cesium.Cartesian3} [result]\n * @returns {Cesium.Cartesian3} result\n */\nexport default function pickPosition(scene, mousePosition, result) {\n    const { Ray, Cartesian3, EllipsoidTerrainProvider } = Cesium\n    if (!_ray) _ray = new Ray()\n    if (!result) {\n        result = new Cartesian3()\n    }\n    if (!scene.pickPositionSupported\n        || !scene.globe.depthTestAgainstTerrain\n        || scene.terrainProvider instanceof EllipsoidTerrainProvider\n    ) {\n        if (scene.camera.getPickRay(mousePosition, _ray)) {\n            return scene.globe.pick(_ray, scene, result)\n        }\n    }\n\n    return scene.pickPosition(mousePosition, result)\n}",
    "import Earth from  \"../Earth.js\";\n\n\nexport default class ILayer {\n    /**\n     * \n     * @param {ILayer} params \n     */\n    constructor(params) {\n        params = params || {};\n        const { defaultValue } = Cesium;\n        this.name = defaultValue(params.name, '未命名图层' + (++ILayer.NumUnName));\n        this.parent = defaultValue(params.parent, null);\n        this.zIndex = defaultValue(params.zIndex, 1);\n        this.provider = defaultValue(params.provider, null);\n        this._show = defaultValue(params.show, true);\n    }\n    set show(val) {\n        this._show = val;\n    }\n    get show() {\n        return this._show\n    }\n    /**\n     * \n     * @param {Earth} earth \n     */\n    load(earth) {\n\n    }\n    /**\n     * \n     * @param {Earth} earth \n     */\n    unload(earth) {\n\n    }\n}\nILayer.NumUnName = 0;",
    "\nimport ILayer from  \"../ILayer.js\";\n\n\nexport default class ImageTileLayer extends ILayer {\n    /**\n     * \n     * @param {ImageTileLayer} params \n     */\n    constructor(params) {\n        super(params);\n        this._imageryLayer = null;\n    }\n\n    set show(val) {\n        this._show = val;\n        if (this._imageryLayer) this._imageryLayer.show = val;\n    }\n    get show() {\n        return this._show\n    }\n\n    /**\n     * \n     * @param {Earth} earth \n     */\n    load(earth) {\n        if (!this.provider) {\n            throw new Error('ImageTileLayer#provider is required.')\n        }\n        var imageryLayers = earth.imageryLayers\n        this.provider.zIndex = this.zIndex;\n        this._imageryLayer = imageryLayers.addImageryProvider(this.provider);\n\n    }\n    /**\n     * \n     * @param {Earth} earth \n     */\n    unload(earth) {\n        if (!this._imageryLayer) return;\n        var imageryLayers = earth.imageryLayers\n        imageryLayers.remove(this._imageryLayer);\n\n    }\n}",
    "import ImageTileLayer from  \"./ImageTileLayer.js\";\n\n\nexport function createTdtImageryProvider(params) {\n    var tileMatrixSet = 'w';\n    var host = params.host || 'http://t{s}.tianditu.com/';\n    var subdomains = ['0', '1', '2', '3', '4', '5', '6', '7'];\n\n    if (host[host.length - 1] == '/') {\n        host = host.substr(0, host.length - 1);\n    }\n    var url = host + \"/\" + params.layer + '_' + tileMatrixSet + \"/wmts?service=wmts&request=GetTile&version=1.0.0&LAYER=\" + params.layer + \"&tileMatrixSet=\" + tileMatrixSet + \"&TileMatrix={TileMatrix}&TileRow={TileRow}&TileCol={TileCol}&style=default&format=tiles\";\n    url += '&tk=' + params.appKey;\n\n    let provider = new Cesium.WebMapTileServiceImageryProvider({\n        url: url,\n        layer: params.layer,\n        style: 'default',\n        subdomains: subdomains,\n        tileMatrixSetID: tileMatrixSet,\n        maximumLevel: params.maximumLevel,\n        minimumLevel: params.minimumLevel\n    });\n\n    return provider;\n}\n\nclass TiandituLayer extends ImageTileLayer {\n\n    constructor(params) {\n        params = params || {};\n        params.name = params.name || '天地图图层';\n\n        super(params);\n        this._minimumLevel = params.minimumLevel;\n        this._maximumLevel = params.maximumLevel;\n        this._host = params.host;\n        this._imageLayerName = params.imageLayer;\n        this._labelLayerName = params.labelLayer;\n\n        this._imageLayer = null;\n        this._labelLayer = null;\n    }\n\n    set show(val) {\n        this._show = val;\n        if (this._imageLayer) this._imageLayer.show = this._show;\n        if (this._labelLayer) this._labelLayer.show = this._show;\n    }\n    get show() {\n        return this._show\n    }\n\n    load(earth) {\n\n        var _imageLayer = this._imageLayer,\n            _labelLayer = this._labelLayer;\n        if (!_imageLayer && this._imageLayerName) {\n            _imageLayer = new ImageTileLayer({\n                name: this.name,\n                zIndex: this.zIndex,\n                provider: createTdtImageryProvider({\n                    host: this.host,\n                    appKey: TiandituLayer.AppKey,\n                    layer: this._imageLayerName,\n                    minimumLevel: this._minimumLevel,\n                    maximumLevel: this._maximumLevel\n                })\n            });\n            this._imageLayer = _imageLayer;\n        }\n\n        if (!_labelLayer && this._labelLayerName) {\n            _labelLayer = new ImageTileLayer({\n                name: this.name + \"-注记\",\n                zIndex: this.zIndex + 1,\n                provider: createTdtImageryProvider({\n                    host: this.host,\n                    appKey: TiandituLayer.AppKey,\n                    layer: this._labelLayerName,\n                    minimumLevel: this._minimumLevel,\n                    maximumLevel: this._maximumLevel\n                })\n            });\n            this._labelLayer = _labelLayer;\n        }\n\n        if (_imageLayer) {\n            _imageLayer.show = this._show;\n            _imageLayer.load(earth);\n        }\n\n        if (_labelLayer) {\n            _labelLayer.show = this._show;\n            _labelLayer.load(earth);\n        }\n    }\n\n    unload(earth) {\n        this._imageLayer = this._imageLayer && this._imageLayer.unload(earth);\n        this._labelLayer = this._labelLayer && this._labelLayer.unload(earth);\n    }\n}\n\nTiandituLayer.AppKey = '3669131581c051178afabed885766ac2';\n\nexport class TiandituImgLayer extends TiandituLayer {\n    constructor(params) {\n        params = params || {};\n        params.name = params.name || '天地图影像';\n        params.imageLayer = 'img';\n        params.labelLayer = 'cia';\n        super(params);\n    }\n}\n\nexport class TiandituVecLayer extends TiandituLayer {\n    constructor(params) {\n        params = params || {};\n        params.name = params.name || '天地图矢量';\n        params.imageLayer = 'vec';\n        params.labelLayer = 'cva';\n        super(params);\n    }\n}\n\nexport class TiandituTerLayer extends TiandituLayer {\n    constructor(params) {\n        params = params || {};\n        params.name = params.name || '天地图地形晕渲';\n        params.imageLayer = 'ter';\n        params.labelLayer = 'cta';\n        super(params);\n    }\n}\n\nexport default TiandituLayer;",
    "\nexport default function imageryLayersOrderByZIndex(imageryLayers) {\n    //调整带有index的图层顺序\n\n    var layersHasIndex = [];\n    for (var i = 0; i < imageryLayers.length; i++) {\n        var l = imageryLayers.get(i);\n        if ((l.imageryProvider.zIndex || l.zIndex)) {\n            layersHasIndex.push(l);\n            if (!l.zIndex) {\n                l.zIndex = l.imageryProvider.zIndex;\n            } else if (!l.imageryProvider.zIndex) {\n                l.imageryProvider.zIndex = l.zIndex;\n            }\n        }\n    }\n    if (layersHasIndex && layersHasIndex.length) {\n        layersHasIndex.sort(function (a, b) {\n            if (a.zIndex > b.zIndex) {\n                return 1;\n            } else if (a.zIndex < b.zIndex) {\n                return -1;\n            }\n            else {\n                return 0;\n            }\n        })\n    }\n    layersHasIndex.forEach(function (l) {\n        imageryLayers.raiseToTop(l);\n    });\n\n    if (typeof CesiumVectorTile == 'undefined') return;\n    const defined = Cesium.defined\n    for (var i = 0; i < imageryLayers.length; i++) {\n        var l = imageryLayers.get(i);\n        //调整矢量图层顺序\n        if (!defined(l.imageryProvider.zIndex)\n            && !defined(l.zIndex)\n            && l.imageryProvider instanceof CesiumVectorTile.VectorTileImageryProvider) {\n            imageryLayers.raiseToTop(l);\n        }\n    }\n\n    for (var i = 0; i < imageryLayers.length; i++) {\n        var l = imageryLayers.get(i);\n        //调整矢量图层顺序\n        if (!defined(l.imageryProvider.zIndex)\n            && !defined(l.zIndex)\n            && l.imageryProvider instanceof CesiumVectorTile.VectorTileImageryProvider\n            && (l.imageryProvider._lineOnly || l.imageryProvider._onlyPoint)) {\n            imageryLayers.raiseToTop(l);\n        }\n    }\n}",
    "import Cesium3DTileExtension from  \"../../../../renderable/Source/3dtiles/Cesium3DTileExtension.js\";\n\n// import MeshVisualizer from \"@mesh-3d/core/Source/MeshVisualizer.js\";\nimport Earth from  \"../../Earth.js\";\n\nimport ILayer from  \"../ILayer.js\";\n\n\nexport default class C3DTilesLayer extends ILayer {\n    constructor(params) {\n        super(params);\n        this.renderer = params.renderer || 'Cesium';\n        this.tileset = new Cesium.Cesium3DTileset(params)\n    }\n    /**\n     * \n     * @param {Earth|MeshVisualizer} earth \n     */\n    load(earth) {\n        if (this.renderer == 'Three') {\n            Cesium3DTileExtension.init();\n            var localScene = earth.isMeshVisualizer ? earth : earth.globalScene;\n            localScene.add(this.tileset);\n        } else if (!earth.isMeshVisualizer) {\n            earth.primitives.add(this.tileset);\n        } else {\n            throw new Error('局部场景3d tiles不支持Cesium渲染器')\n        }\n    }\n    /**\n     * \n     * @param {Earth|MeshVisualizer} earth \n     */\n    unload(earth) {\n        if (this.renderer == 'Three') {\n            Cesium3DTileExtension.init();\n            var localScene = earth.isMeshVisualizer ? earth : earth.globalScene;\n            localScene.remove(this.tileset, true);\n        } else if (!earth.isMeshVisualizer) {\n            earth.primitives.remove(this.tileset, true);\n        }\n    }\n}",
    "import IRenderable from  \"../../../../core/Source/IRenderable.js\";\n\nimport geojsonHelper from  \"../../../../utils/Source/geojsonHelper.js\";\n\n\n\nvar scratchTranslationRtc;\nvar CESIUM_RTC_MODELVIEW = function (uniformState, model) {\n    // CESIUM_RTC extension\n    const { Matrix4, defined, Cartesian3 } = Cesium;\n\n    var mvRtc = new Matrix4();\n\n    if (!scratchTranslationRtc) scratchTranslationRtc = new Matrix4();\n    return function () {\n        if (defined(model._rtcCenter)) {\n            Matrix4.getTranslation(uniformState.model, scratchTranslationRtc);\n            Cartesian3.add(\n                scratchTranslationRtc,\n                model._rtcCenter,\n                scratchTranslationRtc\n            );\n            Matrix4.multiplyByPoint(\n                uniformState.view,\n                scratchTranslationRtc,\n                scratchTranslationRtc\n            );\n            return Matrix4.setTranslation(\n                uniformState.modelView,\n                scratchTranslationRtc,\n                mvRtc\n            );\n        }\n        return uniformState.modelView;\n    };\n}\n\nexport default class GeoMesh extends IRenderable {\n\n    constructor(options) {\n        const { when, Resource, Cartesian3, Rectangle, BoundingSphere, defaultValue } = Cesium\n\n        if (!options.url) {\n            throw new Error('GeoMesh#constructor:url is required')\n        }\n\n        super(options);\n\n        this._rtcCenter = null;\n\n        this.url = options.url;\n        this.rectangle = new Rectangle();\n        this.boundingSphere = new BoundingSphere()\n        this.bbox = [-180, -90, 180, 90];\n        this.source = null;\n        this.ready = false;\n        this.show = defaultValue(options.show, true);\n        this._deferred = when.defer()\n        this.readyPromise = this._deferred.promise;\n\n        this._pickIdMap = new Map();\n        this._pickIds = [];\n        this._lazyLoad = defaultValue(options.lazyLoad, false);\n        this._isLoading = false;\n\n        if (!this._lazyLoad) {\n            if (typeof this.url == 'string') {\n                this._isLoading = true;\n                Resource.fetchJson(this.url).then((json) => {\n                    this.onLoad(json)\n                })\n            }\n            else {\n                this.onLoad(this.url);\n            }\n        }\n\n    }\n\n    get pickIds() {\n        return this._pickIds\n    }\n    /**\n    * \n    * @param {Earth|MeshVisualizer} earth \n    */\n    load(earth) {\n        if (this.visualizer) return;\n        earth = earth.isMeshVisualizer ? earth : earth.globalScene;\n        earth.add(this);\n    }\n    /**\n    * \n    * @param {Earth|MeshVisualizer} earth \n    */\n    unload(earth) {\n        if (!this.visualizer) return;\n        earth = earth.isMeshVisualizer ? earth : earth.globalScene;\n        earth.remove(this);\n    }\n    onAdded() {\n        if (this.lazyLoad && !this.ready && !this._isLoading) {\n            if (typeof this.url == 'string') {\n                this._isLoading = true;\n                Resource.fetchJson(this.url).then((json) => {\n                    this.onLoad(json)\n                })\n            }\n            else {\n                this.onLoad(this.url);\n            }\n        }\n    }\n    onRemoved() {\n        const { mesh, visualizer } = this\n        if (mesh && visualizer) {\n            visualizer.remove(mesh, true);\n            this._pickIds.length = 0;\n            this._pickIdMap.clear()\n        }\n    }\n\n    onLoad(json) {\n        const { Rectangle } = Cesium\n        const deferred = this._deferred\n        var bbox = geojsonHelper.calcBBox(json);\n        for (let i = 0; i < 4; i++) {\n            this.bbox[i] = bbox[i];\n        }\n        Rectangle.fromDegrees(bbox[0], bbox[1], bbox[2], bbox[3], this.rectangle);\n\n        try {\n\n            this.source = json;\n            this.initMesh();\n            deferred.resolve(this)\n            this.ready = true;\n        } catch (err) {\n            deferred.reject(err);\n        }\n    }\n\n    setPickId(feature, geometry) {\n\n        const { GeometryAttribute, ComponentDatatype } = Cesium\n        const pickIdMap = this._pickIdMap;\n\n        var pickId = pickIdMap.get(feature);\n        if (!pickId) {\n            var context = this.visualizer.frameState.context\n            pickId = context.createPickId({\n                feature: feature,\n                primitive: this,\n                boundingSphere: geometry.boundingSphere\n            })\n            pickIdMap.set(feature, pickId);\n            this._pickIds.push(pickId);\n        }\n        var positions = geometry.attributes.position;\n        positions = positions.values || positions.array;\n        var ptCount = positions.length / 3;\n\n        var pickColors = [], { red, green, blue, alpha } = pickId.color;\n        for (let i = 0; i < ptCount; i++) {\n            pickColors.push(red, green, blue, alpha)\n        }\n        pickColors = new Float32Array(pickColors);\n\n        if (geometry.isBufferGeometry)\n            geometry.setAttribute('pickColor', new THREE.BufferAttribute(pickColors, 4, false));\n        else {\n            geometry.attributes.pickColor = new GeometryAttribute({\n                componentDatatype: ComponentDatatype.FLOAT,\n                componentsPerAttribute: 4,\n                normalize: false,\n                values: pickColors\n            })\n        }\n        return geometry;\n    }\n\n    initMesh() {\n        var mesh = this.createMesh(this.source);\n\n        if (this._rtcCenter) {\n            mesh.uniformMapLoadedCallback = (uniformMap, frameState, mesh) => {\n                var cesiumRtcModelViewUniform = CESIUM_RTC_MODELVIEW(frameState.context.uniformState, this);\n                uniformMap.modelView = cesiumRtcModelViewUniform;\n                uniformMap.u_modelView = cesiumRtcModelViewUniform;\n                uniformMap.modelViewMatrix = cesiumRtcModelViewUniform;\n                uniformMap.u_modelViewMatrix = cesiumRtcModelViewUniform;\n            }\n        }\n\n        this.mesh = mesh;\n    }\n\n    rtcCenterTransform(geometry, rtcCenter) {\n        var postionAtt = geometry.attributes.position\n        var positions = postionAtt.array || postionAtt.values;\n        for (let i = 0; i < positions.length; i += 3) {\n            var x = positions[i], y = positions[i + 1], z = positions[i + 2];\n            positions[i] = x - rtcCenter.x\n            positions[i + 1] = y - rtcCenter.y\n            positions[i + 2] = z - rtcCenter.z\n        }\n        return geometry;\n    }\n    transformGeometry(geometry, rtcCenter) {\n        if (rtcCenter) {\n            this.rtcCenterTransform(geometry, rtcCenter);\n        } else {\n            var localScene = this.visualizer;\n            let positions = geometry.attributes.position.array;\n            var cartesian3 = { x: 0, y: 0, z: 0 };\n            for (let i = 0; i < positions.length; i += 3) {\n                cartesian3.x = positions[i]\n                cartesian3.y = positions[i + 1]\n                cartesian3.z = positions[i + 2]\n                localScene.worldCoordinatesToLocal(cartesian3, cartesian3, { y: 1 })\n                positions[i] = cartesian3.x\n                positions[i + 1] = cartesian3.y\n                positions[i + 2] = cartesian3.z\n            }\n\n            geometry.computeVertexNormals()\n            geometry.computeBoundingSphere();\n        }\n        return geometry;\n    }\n    createMesh(json) {\n        throw new Error('GeoMesh#createMesh未实现')\n    }\n    createHighlightGeometry(feature) {\n        throw new Error('GeoMesh#createHighlightGeometry未实现')\n    }\n    createHighlightMesh(feature, material) {\n\n        let geometry = this.createHighlightGeometry(feature)\n        if (!geometry.boundingSphere) geometry.computeBoundingSphere();\n\n        var mesh = new THREE.Mesh(geometry, material);\n\n        if (this._rtcCenter) {\n            mesh.uniformMapLoadedCallback = (uniformMap, frameState, mesh) => {\n                var cesiumRtcModelViewUniform = CESIUM_RTC_MODELVIEW(frameState.context.uniformState, this);\n                uniformMap.modelView = cesiumRtcModelViewUniform;\n                uniformMap.u_modelView = cesiumRtcModelViewUniform;\n                uniformMap.modelViewMatrix = cesiumRtcModelViewUniform;\n                uniformMap.u_modelViewMatrix = cesiumRtcModelViewUniform;\n            }\n\n            mesh.up.set(0, 0, 1);\n            mesh.modelMatrixNeedsUpdate = false;\n            mesh.matrixAutoUpdate = false\n        }\n        mesh.receiveShadow = false;\n        mesh.castShadow = false;\n\n        this.transformGeometry(geometry, this._rtcCenter);\n        return mesh;\n    }\n    /**\n     * \n     * @param {Cesium.FrameState} frameSate \n     * @param {(THREE.Object3D|Object3D)[]} renderList \n     * @override IRenderable#render\n     * @returns \n     */\n    render(frameSate, renderList) {\n        if (!this.ready || !this.mesh || !this.show) return;\n        this.pickId = this.mesh.pickId;\n        renderList.push(this.mesh);\n    }\n\n}\n\nGeoMesh.prototype.isGeoMesh = true;\n",
    "\nimport GeometryUtils from  \"../../../../core/Source/GeometryUtils.js\";\n\nimport GeoPolygonGeometry from  \"../../geometries/GeoPolygonGeometry.js\";\n\nimport GeoMesh from  \"./GeoMesh.js\";\n\n\nexport default class GeoPolygonMesh extends GeoMesh {\n\n    constructor(options) {\n        const { MeshBasicMaterial } = THREE;\n        const { defaultValue } = Cesium\n\n        super(options);\n\n        this.useRtcCenter = defaultValue(options.useRtcCenter, true);\n        this.height = options.height || 0;\n        this._material = options.material || new MeshBasicMaterial({ color: 'yellow', opacity: 0.5 })\n        this.uvGenerator = options.uvGenerator;\n        this.needsUpdate = false;\n    }\n\n    set material(val) {\n        this._material = val;\n        if (this.mesh) this.mesh.material = val;\n    }\n    get material() {\n        return this._material;\n    }\n\n    createHighlightGeometry(feature) {\n        const { height, uvGenerator } = this;\n        var geometry = GeoPolygonGeometry.fromFeature(feature, height, null, uvGenerator);\n        geometry = GeometryUtils.toBufferGeometry3js(geometry)\n        return geometry;\n    }\n\n    createMesh(json) {\n        const { BoundingSphere } = Cesium\n        const { Mesh } = THREE;\n        const { material, visualizer } = this;\n\n        var geometries = [], features = json.features;\n        const needsCreatePickId = !!visualizer._frameState && !!visualizer._frameState.context\n\n        for (let i = 0; i < features.length; i++) {\n            const feature = features[i];\n            if (!feature.geometry) {\n                continue;\n            }\n            var tempGeometry = GeoPolygonGeometry.fromFeature(feature, this.height, null, this.uvGenerator);\n            needsCreatePickId && this.setPickId(feature, tempGeometry);\n            geometries.push(tempGeometry);\n        }\n\n        var geometry = GeometryUtils.mergeGeometries(geometries);\n        geometry = GeometryUtils.toBufferGeometry3js(geometry)\n        if (!geometry.boundingSphere) geometry.computeBoundingSphere();\n        BoundingSphere.clone(geometry.boundingSphere, this.boundingSphere);\n\n        material.pickColorQualifier = 'varying';\n        material.pickColorName = 'pickColor';\n\n        //\n        var mesh = new Mesh(geometry, this.material);\n        if (this._rtcCenter) {\n            this._rtcCenter = this.boundingSphere.center;\n            mesh.up.set(0, 0, 1)\n            mesh.modelMatrixNeedsUpdate = false;\n            mesh.matrixAutoUpdate = false\n        } else {\n            this._rtcCenter = null\n        }\n        mesh.receiveShadow = true;\n\n        this.transformGeometry(geometry, this._rtcCenter);\n\n        return mesh;\n    }\n\n    render(frameSate, renderList) {\n        if (this.needsUpdate && this.mesh) {\n            this.visualizer.remove(this.mesh, true);\n            this.initMesh()\n            this.needsUpdate = false\n        }\n        super.render(frameSate, renderList)\n    }\n}\nfunction DefaultUvGenerator(uvUnit) {\n    return {\n        uvUnit: uvUnit ? Object.assign({\n            x: 40, y: 50,\n        }, uvUnit) : {\n            x: 40, y: 50,\n        },\n        generate(positions) {\n            const { Cartesian3, Cartographic } = Cesium\n            var _Math = Cesium.Math;\n            var bbox = [Math.PI, Math.PI / 2, -Math.PI, -Math.PI / 2]\n            positions = Cartesian3.unpackArray(positions);\n            positions = positions.map(p => {\n                var p2 = Cartographic.fromCartesian(p)\n                bbox[0] = Math.min(bbox[0], p2.longitude)\n                // bbox[2] = Math.max(bbox[2], p2.longitude)\n                bbox[1] = Math.min(bbox[1], p2.latitude)\n                // bbox[3] = Math.max(bbox[3], p2.latitude)\n                return p2;\n            });\n            var uvs = []\n            positions.forEach(p => {\n                uvs.push(\n                    (1000 * 110 * _Math.toDegrees(p.longitude - bbox[0])) / this.uvUnit.x,\n                    (2 * 1000 * 110 * _Math.toDegrees(p.latitude - bbox[1])) / this.uvUnit.y\n                )\n            });\n            return uvs;\n\n        }\n    }\n}\nGeoPolygonMesh.DefaultUvGenerator = DefaultUvGenerator;",
    "\nimport GeometryUtils from  \"../../../../core/Source/GeometryUtils.js\";\n\nimport geojsonHelper from  \"../../../../utils/Source/geojsonHelper.js\";\n\nimport GeoPolylineGeometry from  \"../../geometries/GeoPolylineGeometry.js\";\n\nimport GeoMesh from  \"./GeoMesh.js\";\n\n\nexport default class GeoPolylineMesh extends GeoMesh {\n\n    constructor(options) {\n        const { MeshBasicMaterial } = THREE;\n        const { defaultValue } = Cesium;\n        super(options);\n\n\n        this._lineWidth = options.lineWidth || 9;//单位：米\n        this._material = options.material || new MeshBasicMaterial({ color: 'yellow', opacity: 0.5 })\n        this._union = defaultValue(options.union, true);\n        this._unionEpsilon = defaultValue(options.unionEpsilon, 0.01)//单位：米\n        this._uvUnit = options.uvUnit;\n        this._needsUpdate = false;\n        this._clampToGround = defaultValue(options.clampToGround, false)\n        this.useRtcCenter = defaultValue(options.useRtcCenter, true);\n    }\n\n    set clampToGround(val) {\n        if (this._clampToGround != val) {\n            this._clampToGround = val;\n            this._needsUpdate = true;\n        }\n    }\n    get clampToGround() {\n        return this._clampToGround;\n    }\n\n    set material(val) {\n        this._material = val;\n        if (this.mesh) this.mesh.material = val;\n    }\n    get material() {\n        return this._material;\n    }\n\n    set lineWidth(val) {\n        if (this._lineWidth != val) {\n            this._lineWidth = val;\n            this._needsUpdate = true;\n        }\n    }\n    get lineWidth() {\n        return this._lineWidth\n    }\n\n\n    get uvUnit() {\n        return this._uvUnit\n    }\n\n    set uvUnit(val) {\n        if (this._uvUnit != val) {\n            this._uvUnit = val;\n            this._needsUpdate = true;\n        }\n    }\n\n    get union() {\n        return this._union\n    }\n\n    set union(val) {\n        if (this._union != val) {\n            this._union = val;\n            this._needsUpdate = true;\n        }\n    }\n\n\n    get unionEpsilon() {\n        return this._unionEpsilon\n    }\n\n    set unionEpsilon(val) {\n        if (this._unionEpsilon != val) {\n            this._unionEpsilon = val;\n            this._needsUpdate = true;\n        }\n    }\n\n    createHighlightGeometry(feature) {\n        const { uvUnit, clampToGround, lineWidth } = this;\n        var geometry = GeoPolylineGeometry.fromFeature(feature, lineWidth, uvUnit, clampToGround);\n        return geometry;\n    }\n\n    createMesh(json) {\n        const { Cartesian3, BoundingSphere } = Cesium\n        const { ShapeUtils, Mesh, BufferGeometry, BufferAttribute } = THREE;\n\n        var features = [];\n        geojsonHelper.featureEach(json, feature => {\n            var geometry = feature.geometry\n            var geomType = geometry.type\n            if (geomType == 'MultiLineString') {\n                geometry.coordinates.forEach(coordinates => {\n                    var newFeature = {\n                        type: \"Feature\",\n                        geometry: {\n                            type: 'LineString',\n                            coordinates: coordinates\n                        }\n                    }\n                    geojsonHelper.calcBBox(newFeature)\n                    features.push(newFeature);\n                })\n                return\n            }\n            if (geomType != 'LineString') return;\n            features.push(feature);\n        })\n\n        if (features.length == 0) return;\n        const { visualizer, useRtcCenter, material, union, unionEpsilon, uvUnit, clampToGround, lineWidth } = this;\n\n        if (union) {\n            features = GeoPolylineGeometry.union(features, unionEpsilon);\n        }\n\n        const needsCreatePickId = !!visualizer._frameState && !!visualizer._frameState.context\n\n        let geometries = [], geometry;\n        for (let i = 0; i < features.length; i++) {\n            const feature = features[i];\n            if (!feature.geometry) {\n                continue;\n            }\n            var tempGeometry = GeoPolylineGeometry.fromFeature(feature, lineWidth, uvUnit, clampToGround);\n            tempGeometry.computeBoundingSphere()\n            needsCreatePickId && this.setPickId(feature, tempGeometry);\n            geometries.push(tempGeometry);\n        }\n        geometry = GeometryUtils.mergeGeometries3js(geometries);\n\n        geometry.computeBoundingSphere();\n        BoundingSphere.clone(geometry.boundingSphere, this.boundingSphere);\n\n        material.pickColorQualifier = 'varying';\n        material.pickColorName = 'pickColor';\n\n        var mesh = new Mesh(geometry, material);\n\n        if (useRtcCenter) {\n            this._rtcCenter = this.boundingSphere.center;\n            mesh.up.set(0, 0, 1);\n            mesh.modelMatrixNeedsUpdate = false;\n            mesh.matrixAutoUpdate = false\n        } else {\n            this._rtcCenter = null\n        }\n        mesh.receiveShadow = true;\n\n        this.transformGeometry(geometry, this._rtcCenter);\n\n        return mesh;\n    }\n\n\n    render(frameSate, renderList) {\n        if (this._needsUpdate && this.mesh) {\n            this.visualizer.remove(this.mesh, true);\n            this.initMesh()\n            this._needsUpdate = false\n        }\n        super.render(frameSate, renderList)\n    }\n}",
    "import GeometryUtils from  \"../../../../core/Source/GeometryUtils.js\";\n\nimport GeoPolygonGeometry from  \"../../geometries/GeoPolygonGeometry.js\";\n\nimport GeoMesh from  \"./GeoMesh.js\";\n\nimport { Water } from  \"./Water.js\";\n\n\nexport default class GeoWaterMesh extends GeoMesh {\n\n    constructor(options) {\n        const { defaultValue } = Cesium\n        const { TextureLoader, Vector3, RepeatWrapping } = THREE;\n\n        super(options);\n        this.skyBox = options.skyBox;\n        this.waterNormals = options.waterNormals;\n        this.alpha = defaultValue(options.alpha, 0.8);\n        this.clampToGround = defaultValue(options.clampToGround, true);\n        this._terrainProvider = null;\n        this.waterParams = {\n            textureWidth: 1024,\n            textureHeight: 1024,\n            waterNormals: new TextureLoader().load(this.waterNormals, function (texture) {\n                texture.wrapS = texture.wrapT = RepeatWrapping;\n            }),\n            alpha: this.alpha,\n            sunDirection: new Vector3(),\n            sunColor: 0xffffff,\n            waterColor: 0x001e0f,\n            distortionScale: 3.7,\n            fog: false//localScene.fog != undefined\n        }\n\n    }\n\n    createGeomerty(feature, boundingSpheres) {\n        const { Cartesian3, BoundingSphere } = Cesium;\n        const localScene = this.visualizer;\n        let height;\n        if (this.clampToGround && this._terrainProvider &&\n            feature.properties && feature.properties._terrainHeight\n        ) {\n            height = feature.properties._terrainHeight;\n        }\n        var geometry = GeoPolygonGeometry.fromFeature(feature, height)\n\n        boundingSpheres.push(BoundingSphere.clone(geometry.boundingSphere));\n\n        var postions = geometry.attributes.position.values\n\n        for (let i = 0; i < postions.length; i += 3) {\n            var x = postions[i], y = postions[i + 1], z = postions[i + 2];\n            var cart3 = new Cartesian3(x, y, z);\n            localScene.worldCoordinatesToLocal(cart3, cart3, Cartesian3.UNIT_Y)\n            // cart3.y = 0;\n            postions[i] = cart3.x\n            postions[i + 1] = cart3.y\n            postions[i + 2] = cart3.z\n        }\n        geometry = GeometryUtils.toBufferGeometry3js(geometry);\n        geometry.computeBoundingSphere();\n        geometry.computeVertexNormals();\n\n        return geometry;\n    }\n\n    createMesh(json) {\n\n        if (!this.visualizer) return;\n\n        const { Object3D } = THREE;\n        var boundingSpheres = [];\n        var root = new Object3D();\n\n        for (let index = 0; index < json.features.length; index++) {\n            const feature = json.features[index];\n            const waterGeometry = this.createGeomerty(feature, boundingSpheres);\n            var water = new Water(waterGeometry, this.waterParams);\n            root.add(water);\n        }\n\n        Cesium.BoundingSphere.fromBoundingSpheres(boundingSpheres, this.boundingSphere);\n        return root;\n    }\n\n    render(frameSate, renderList) {\n        if (this.ready && !this.mesh) {\n            this.initMesh();\n        }\n        if (!this.ready || !this.mesh || !this.show) return;\n        this.pickId = this.mesh.pickId;\n        renderList.push(this.mesh);\n\n        /**\n         * @type {Cesium.Scene}\n         */\n        const scene = this.visualizer.scene;\n        const { EllipsoidTerrainProvider, Cartographic, sampleTerrainMostDetailed } = Cesium\n\n        var terrainProvider;\n        if (!this.clampToGround || scene.terrainProvider instanceof EllipsoidTerrainProvider) {\n            terrainProvider = null\n        } else {\n            terrainProvider = scene.terrainProvider\n        }\n\n        if (terrainProvider != this._terrainProvider) {\n\n            this._terrainProvider = terrainProvider;\n            if (!terrainProvider) {\n                this.initMesh()\n            }\n            else if (!this._isUpdatingTerrainProperties) {\n                this._isUpdatingTerrainProperties = true;\n                var features = []\n                this.source.features.forEach(feature => {\n                    if (!feature.geometry) return;\n                    features.push(feature);\n                });\n\n                var positions = features.map(feature => {\n                    var bbox = feature.geometry.bbox;\n                    var lon = (bbox[0] + bbox[2]) / 2, lat = (bbox[1] + bbox[3]) / 2;\n                    return Cartographic.fromDegrees(lon, lat)\n                });\n\n                sampleTerrainMostDetailed(terrainProvider, positions).then(() => {\n                    for (let i = 0; i < features.length; i++) {\n                        const feature = features[i];\n                        feature.properties = feature.properties || {};\n                        feature.properties._terrainHeight = positions[i].height;\n                    }\n                    positions.length = 0;\n\n                    this.initMesh();\n\n                    this._isUpdatingTerrainProperties = false;\n                }).otherwise((err) => {\n                    positions.length = 0\n                    console.error(err);\n                })\n            }\n        }\n\n        const skyBox = this.skyBox;\n        const sunPosition = skyBox ? skyBox.sunPosition : this.visualizer._sunPositionLC;\n\n        this.mesh.children.forEach(water => {\n            const waterMaterial = water.material;\n            waterMaterial.uniforms.sunDirection.value.copy(sunPosition).normalize()\n            waterMaterial.uniforms['time'].value += 1.0 / 60.0;\n        })\n\n    }\n}",
    "// import MeshVisualizer from \"../../../core/MeshVisualizer.js\";\nimport PagedLOD from  \"../../../../renderable/Source/PagedLOD.js\";\n\nimport Earth from  \"../../Earth.js\";\n\nimport ILayer from  \"../ILayer.js\";\n\n\nexport default class OsgbLayer extends ILayer {\n    constructor(params) {\n        super(params);\n        params.materialType = params.materialType || 'basic'\n        this.params = params;\n        this._root = new PagedLOD(params);\n    }\n\n    get root() {\n        return this._root;\n    }\n    \n    get ready() {\n        return !!this._root && this._root.ready\n    }\n    get readyPromise() {\n        return this._root && this._root.readyPromise\n    }\n\n    get boundingSphere() {\n        return this._root && this._root.boundingSphere\n    }\n\n    set materialType(val) {\n        let { params, _root } = this\n        if (params.materialType != val) {\n            params.materialType = val;\n            if (_root) _root.materialType = val;\n        }\n    }\n    get materialType() {\n        return this.params.materialType\n    }\n\n    set show(val) {\n        this._show = val;\n        if (this.root) {\n            this.root.show = val\n        }\n    }\n    get show() {\n        return this._show;\n    }\n    reload(earth) {\n        this.unload(earth);\n        this._root = new PagedLOD(this.params);\n        this.load(earth)\n    }\n    /**\n     * \n     * @param {Earth|MeshVisualizer} earth \n     */\n    load(earth) {\n\n        var localScene = earth.isMeshVisualizer ? earth : earth.globalScene;\n        this.root.show = this.show\n        localScene.add(this.root)\n    }\n    /**\n     * \n     * @param {Earth|MeshVisualizer} earth \n     */\n    unload(earth) {\n        var localScene = earth.isMeshVisualizer ? earth : earth.globalScene;\n        let root = this.root;\n        localScene.remove(root, true);\n        this._root = root.destroy()\n    }\n}",
    "\n/**\n * Work based on :\n * http://slayvin.net : Flat mirror for three.js\n * http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nvar Water = function (geometry, options) {\n\n\tconst {\n\t\tColor,\n\t\tFrontSide,\n\t\tLinearEncoding,\n\t\tLinearFilter,\n\t\tMathUtils,\n\t\tMatrix4,\n\t\tMesh,\n\t\tNoToneMapping,\n\t\tPerspectiveCamera,\n\t\tPlane,\n\t\tRGBFormat,\n\t\tShaderMaterial,\n\t\tUniformsLib,\n\t\tUniformsUtils,\n\t\tVector3,\n\t\tVector4,\n\t\tWebGLRenderTarget\n\t} = THREE;\n\n\t// Mesh.call(this, geometry);\n\n\tvar scope = new Mesh(geometry);\n\n\toptions = options || {};\n\n\tvar textureWidth = options.textureWidth !== undefined ? options.textureWidth : 512;\n\tvar textureHeight = options.textureHeight !== undefined ? options.textureHeight : 512;\n\n\tvar clipBias = options.clipBias !== undefined ? options.clipBias : 0.0;\n\tvar alpha = options.alpha !== undefined ? options.alpha : 1.0;\n\tvar time = options.time !== undefined ? options.time : 0.0;\n\tvar normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n\tvar sunDirection = options.sunDirection !== undefined ? options.sunDirection : new Vector3(0.70707, 0.70707, 0.0);\n\tvar sunColor = new Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n\tvar waterColor = new Color(options.waterColor !== undefined ? options.waterColor : 0x7F7F7F);\n\tvar eye = options.eye !== undefined ? options.eye : new Vector3(0, 0, 0);\n\tvar eyeCesium = options.eyeCesium !== undefined ? options.eyeCesium : new Vector3(0, 0, 0);\n\tvar distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n\tvar side = options.side !== undefined ? options.side : FrontSide;\n\tvar fog = options.fog !== undefined ? options.fog : false;\n\n\t//\n\n\tvar mirrorPlane = new Plane();\n\tvar normal = new Vector3();\n\tvar mirrorWorldPosition = new Vector3();\n\tvar cameraWorldPosition = new Vector3();\n\tvar rotationMatrix = new Matrix4();\n\tvar lookAtPosition = new Vector3(0, 0, - 1);\n\tvar clipPlane = new Vector4();\n\n\tvar view = new Vector3();\n\tvar target = new Vector3();\n\tvar q = new Vector4();\n\n\tvar textureMatrix = new Matrix4();\n\tvar textureMatrixCesium = new Matrix4();\n\n\tvar mirrorCamera = new PerspectiveCamera();\n\n\tvar parameters = {\n\t\tminFilter: LinearFilter,\n\t\tmagFilter: LinearFilter,\n\t\tformat: RGBFormat\n\t};\n\n\tvar renderTarget = new WebGLRenderTarget(textureWidth, textureHeight, parameters);\n\n\tif (!MathUtils.isPowerOfTwo(textureWidth) || !MathUtils.isPowerOfTwo(textureHeight)) {\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t}\n\n\tvar mirrorShader = {\n\n\t\tuniforms: UniformsUtils.merge([\n\t\t\tUniformsLib['fog'],\n\t\t\tUniformsLib['lights'],\n\t\t\t{\n\t\t\t\t\"normalSampler\": { value: null },\n\t\t\t\t\"mirrorSampler\": { value: null },\n\t\t\t\t\"alpha\": { value: 1.0 },\n\t\t\t\t\"time\": { value: 0.0 },\n\t\t\t\t\"size\": { value: 1.0 },\n\t\t\t\t\"distortionScale\": { value: 20.0 },\n\t\t\t\t\"textureMatrix\": { value: new Matrix4() },\n\t\t\t\t\"textureMatrixCesium\": { value: new Matrix4() },\n\t\t\t\t\"sunColor\": { value: new Color(0x7F7F7F) },\n\t\t\t\t\"sunDirection\": { value: new Vector3(0.70707, 0.70707, 0) },\n\t\t\t\t\"eye\": { value: new Vector3() },\n\t\t\t\t'eyeCesium': { value: new Vector3() },\n\t\t\t\t\"waterColor\": { value: new Color(0x555555) }\n\t\t\t}\n\t\t]),\n\n\t\tvertexShader: [\n\t\t\t'uniform mat4 textureMatrix;',\n\t\t\t'uniform mat4 textureMatrixCesium;',\n\t\t\t'uniform float time;',\n\n\t\t\t'varying vec4 mirrorCoord;',\n\t\t\t'varying vec4 worldPosition;',\n\n\t\t\t'#include <common>',\n\t\t\t'#include <fog_pars_vertex>',\n\t\t\t'#include <shadowmap_pars_vertex>',\n\t\t\t'#include <logdepthbuf_pars_vertex>',\n\n\t\t\t'void main() {',\n\t\t\t'\tmirrorCoord = modelMatrix * vec4( position, 1.0 );',\n\t\t\t'\tworldPosition = mirrorCoord.xyzw;',\n\n\t\t\t'#ifdef CESIUM_MESH_VISUALIZER',\n\t\t\t'\tmirrorCoord = textureMatrixCesium * vec4( position, 1.0 );',\n\t\t\t'#else',\n\t\t\t'\tmirrorCoord = textureMatrix * mirrorCoord;',\n\t\t\t'#endif',\n\n\t\t\t'\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );',\n\t\t\t'\tgl_Position = projectionMatrix * mvPosition;',\n\n\t\t\t'vec3 transformed = vec3( position );',\n\n\t\t\t'#include <beginnormal_vertex>',\n\t\t\t'#include <defaultnormal_vertex>',\n\t\t\t'#include <logdepthbuf_vertex>',\n\t\t\t'#include <fog_vertex>',\n\t\t\t'#include <shadowmap_vertex>',\n\t\t\t'}'\n\t\t].join('\\n'),\n\n\t\tfragmentShader: [\n\t\t\t'uniform sampler2D mirrorSampler;',\n\t\t\t'uniform float alpha;',\n\t\t\t'uniform float time;',\n\t\t\t'uniform float size;',\n\t\t\t'uniform float distortionScale;',\n\t\t\t'uniform sampler2D normalSampler;',\n\t\t\t'uniform vec3 sunColor;',\n\t\t\t'uniform vec3 sunDirection;',\n\t\t\t'uniform vec3 eye;',\n\t\t\t'#ifdef CESIUM_MESH_VISUALIZER',\n\t\t\t'uniform vec3 eyeCesium;',\n\t\t\t'#endif',\n\t\t\t'uniform vec3 waterColor;',\n\n\t\t\t'varying vec4 mirrorCoord;',\n\t\t\t'varying vec4 worldPosition;',\n\n\t\t\t'vec4 getNoise( vec2 uv ) {',\n\t\t\t'\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);',\n\t\t\t'\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );',\n\t\t\t'\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );',\n\t\t\t'\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );',\n\t\t\t'\tvec4 noise = texture2D( normalSampler, uv0 ) +',\n\t\t\t'\t\ttexture2D( normalSampler, uv1 ) +',\n\t\t\t'\t\ttexture2D( normalSampler, uv2 ) +',\n\t\t\t'\t\ttexture2D( normalSampler, uv3 );',\n\t\t\t'\treturn noise * 0.5 - 1.0;',\n\t\t\t'}',\n\n\t\t\t'void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {',\n\t\t\t'\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );',\n\t\t\t'\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );',\n\t\t\t'\tspecularColor += pow( direction, shiny ) * sunColor * spec;',\n\t\t\t'\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;',\n\t\t\t'}',\n\n\t\t\t'#include <common>',\n\t\t\t'#include <packing>',\n\t\t\t'#include <bsdfs>',\n\t\t\t'#include <fog_pars_fragment>',\n\t\t\t'#include <logdepthbuf_pars_fragment>',\n\t\t\t'#include <lights_pars_begin>',\n\t\t\t'#include <shadowmap_pars_fragment>',\n\t\t\t'#include <shadowmask_pars_fragment>',\n\n\t\t\t'void main() {',\n\n\t\t\t'#include <logdepthbuf_fragment>',\n\n\t\t\t'#ifdef CESIUM_MESH_VISUALIZER',\n\t\t\t'\tvec4 noise = getNoise((_CesiumModel2ThreeModel* worldPosition).xz * size );',\n\t\t\t'#else',\n\t\t\t'\tvec4 noise = getNoise( worldPosition.xz * size );',\n\t\t\t'#endif ',\n\n\t\t\t'\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );',\n\n\t\t\t'\tvec3 diffuseLight = vec3(0.0);',\n\t\t\t'\tvec3 specularLight = vec3(0.0);',\n\n\t\t\t'#ifdef CESIUM_MESH_VISUALIZER',\n\t\t\t'   vec3 worldToEye = eyeCesium-worldPosition.xyz;',\n\t\t\t'#else',\n\t\t\t'\tvec3 worldToEye = eye-worldPosition.xyz;',\n\t\t\t'#endif ',\n\n\t\t\t'\tvec3 eyeDirection = normalize( worldToEye );',\n\n\t\t\t'#ifdef CESIUM_MESH_VISUALIZER',\n\t\t\t'   eyeDirection=_CesiumNormal2ThreeNormal*eyeDirection;',\n\t\t\t'#endif ',\n\t\t\t'\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );',\n\n\t\t\t'\tfloat distance = length(worldToEye);',\n\n\t\t\t'\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;',\n\t\t\t'\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );',\n\n\t\t\t'\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );',\n\t\t\t'\tfloat rf0 = 0.3;',\n\t\t\t'\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );',\n\t\t\t'\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;',\n\t\t\t'\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);',\n\t\t\t'\tvec3 outgoingLight = albedo;',\n\t\t\t'\tgl_FragColor = vec4( outgoingLight, alpha );',\n\n\t\t\t'#include <tonemapping_fragment>',\n\t\t\t'#include <fog_fragment>',\n\t\t\t'}'\n\t\t].join('\\n')\n\n\t};\n\n\tvar material = new ShaderMaterial({\n\t\tfragmentShader: mirrorShader.fragmentShader,\n\t\tvertexShader: mirrorShader.vertexShader,\n\t\tuniforms: UniformsUtils.clone(mirrorShader.uniforms),\n\t\tlights: true,\n\t\tside: side,\n\t\tfog: fog\n\t});\n\n\tmaterial.uniforms[\"mirrorSampler\"].value = renderTarget.texture;\n\tmaterial.uniforms[\"textureMatrix\"].value = textureMatrix;\n\tmaterial.uniforms['textureMatrixCesium'].value = textureMatrixCesium;\n\tmaterial.uniforms[\"alpha\"].value = alpha;\n\tmaterial.uniforms[\"time\"].value = time;\n\tmaterial.uniforms[\"normalSampler\"].value = normalSampler;\n\tmaterial.uniforms[\"sunColor\"].value = sunColor;\n\tmaterial.uniforms[\"waterColor\"].value = waterColor;\n\tmaterial.uniforms[\"sunDirection\"].value = sunDirection;\n\tmaterial.uniforms[\"distortionScale\"].value = distortionScale;\n\n\tmaterial.uniforms[\"eye\"].value = eye;\n\tmaterial.uniforms['eyeCesium'].value = eyeCesium;\n\n\tscope.material = material;\n\n\tscope.onBeforeRender = function (renderer, scene, camera) {\n\t\tif (renderer.isCesiumRenderer) {\n\t\t\tmirrorWorldPosition.setFromMatrixPosition(scope.modelMatrix);\n\t\t\tcameraWorldPosition.setFromMatrixPosition(camera.modelMatrix);\n\t\t\trotationMatrix.extractRotation(scope.modelMatrix);\n\t\t}\n\t\telse {\n\t\t\tmirrorWorldPosition.setFromMatrixPosition(scope.matrixWorld);\n\t\t\tcameraWorldPosition.setFromMatrixPosition(camera.matrixWorld);\n\t\t\trotationMatrix.extractRotation(scope.matrixWorld);\n\t\t}\n\n\t\tnormal.set(0, 0, 1);\n\t\tnormal.applyMatrix4(rotationMatrix);\n\n\t\tview.subVectors(mirrorWorldPosition, cameraWorldPosition);\n\n\t\t// Avoid rendering when mirror is facing away\n\n\t\tif (view.dot(normal) > 0) return;\n\n\t\tview.reflect(normal).negate();\n\t\tview.add(mirrorWorldPosition);\n\n\t\tif (renderer.isCesiumRenderer) rotationMatrix.extractRotation(camera.modelMatrix);\n\t\telse rotationMatrix.extractRotation(camera.matrixWorld);\n\n\t\tlookAtPosition.set(0, 0, - 1);\n\t\tlookAtPosition.applyMatrix4(rotationMatrix);\n\t\tlookAtPosition.add(cameraWorldPosition);\n\n\t\ttarget.subVectors(mirrorWorldPosition, lookAtPosition);\n\t\ttarget.reflect(normal).negate();\n\t\ttarget.add(mirrorWorldPosition);\n\n\t\tmirrorCamera.position.copy(view);\n\t\tmirrorCamera.up.set(0, 1, 0);\n\t\tmirrorCamera.up.applyMatrix4(rotationMatrix);\n\t\tmirrorCamera.up.reflect(normal);\n\t\tmirrorCamera.lookAt(target);\n\n\t\tmirrorCamera.far = camera.far; // Used in WebGLBackground\n\n\t\tmirrorCamera.updateMatrixWorld();\n\t\tmirrorCamera.projectionMatrix.copy(camera.projectionMatrix);\n\n\t\t// Update the texture matrix\n\t\ttextureMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\t\ttextureMatrix.multiply(mirrorCamera.projectionMatrix);\n\t\ttextureMatrix.multiply(mirrorCamera.matrixWorldInverse);\n\n\t\tif (renderer.isCesiumRenderer) {\n\t\t\ttextureMatrixCesium.copy(textureMatrix);\n\t\t\ttextureMatrixCesium.multiply(scope.modelMatrix);\n\t\t}\n\n\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\tmirrorPlane.setFromNormalAndCoplanarPoint(normal, mirrorWorldPosition);\n\t\tmirrorPlane.applyMatrix4(mirrorCamera.matrixWorldInverse);\n\n\t\tclipPlane.set(mirrorPlane.normal.x, mirrorPlane.normal.y, mirrorPlane.normal.z, mirrorPlane.constant);\n\n\t\tvar projectionMatrix = mirrorCamera.projectionMatrix;\n\n\t\tq.x = (Math.sign(clipPlane.x) + projectionMatrix.elements[8]) / projectionMatrix.elements[0];\n\t\tq.y = (Math.sign(clipPlane.y) + projectionMatrix.elements[9]) / projectionMatrix.elements[5];\n\t\tq.z = - 1.0;\n\t\tq.w = (1.0 + projectionMatrix.elements[10]) / projectionMatrix.elements[14];\n\n\t\t// Calculate the scaled plane vector\n\t\tclipPlane.multiplyScalar(2.0 / clipPlane.dot(q));\n\n\t\t// Replacing the third row of the projection matrix\n\t\tprojectionMatrix.elements[2] = clipPlane.x;\n\t\tprojectionMatrix.elements[6] = clipPlane.y;\n\t\tprojectionMatrix.elements[10] = clipPlane.z + 1.0 - clipBias;\n\t\tprojectionMatrix.elements[14] = clipPlane.w;\n\n\n\t\tif (renderer.isCesiumRenderer) eyeCesium.setFromMatrixPosition(camera.modelMatrix);\n\t\telse eye.setFromMatrixPosition(camera.matrixWorld);\n\n\t\t// Render\n\n\t\tif (renderer.outputEncoding !== LinearEncoding) {\n\n\t\t\tconsole.warn('THREE.Water: WebGLRenderer must use LinearEncoding as outputEncoding.');\n\t\t\tscope.onBeforeRender = function () { };\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif (renderer.toneMapping !== NoToneMapping) {\n\n\t\t\tconsole.warn('THREE.Water: WebGLRenderer must use NoToneMapping as toneMapping.');\n\t\t\tscope.onBeforeRender = function () { };\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar currentXrEnabled = renderer.xr.enabled;\n\t\tvar currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\tscope.visible = false;\n\n\t\trenderer.xr.enabled = false; // Avoid camera modification and recursion\n\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\trenderer.setRenderTarget(renderTarget);\n\n\t\trenderer.state.buffers.depth.setMask(true); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\tif (renderer.autoClear === false) renderer.clear();\n\n\t\trenderer.render(scene, mirrorCamera);\n\n\t\tscope.visible = true;\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\trenderer.setRenderTarget(currentRenderTarget);\n\n\t\t// Restore viewport\n\n\t\tvar viewport = camera.viewport;\n\n\t\tif (viewport !== undefined) {\n\n\t\t\trenderer.state.viewport(viewport);\n\n\t\t}\n\n\t};\n\n\treturn scope;\n};\n\nexport { Water };\n",
    "\nimport ImageTileLayer from  \"../imagery/ImageTileLayer.js\";\n\n\nclass Vector2dLayer extends ImageTileLayer {\n    constructor(params) {\n        super(params);\n        this.provider = new CesiumVectorTile.VectorTileImageryProvider(params);\n        if (params.focusAdminNames) {\n            this.provider.focusAdminNames = params.focusAdminNames;\n            this.provider.focusPropertyName = params.focusPropertyName || 'NAME';\n        }\n    }\n    get focusAdminNames() {\n        return this.provider && this.provider.focusAdminNames\n    }\n    set focusAdminNames(val) {\n        this.provider && (this.provider.focusAdminNames = val)\n    }\n\n    get focusPropertyName() {\n        return this.provider && this.provider.focusPropertyName\n    }\n    set focusPropertyName(val) {\n        this.provider && (this.provider.focusPropertyName = val)\n    }\n}\n\nconst DefaultParams = {\n    Sealand: {\n        zIndex: 0,\n        removeDuplicate: false,\n        minimumLevel: 0,\n        defaultStyle: {\n            fill: true,//是否填充海陆颜色\n            outlineColor: 'rgba(138,138,138,1)',//边界颜色\n            fillColor: 'rgba(235,235,235,1)',//陆地颜色\n            backgroundColor: 'rgba(89,129,188,1)'//海区颜色\n        }\n    },\n    SealandDark: {\n        zIndex: 0,\n        removeDuplicate: false,\n        minimumLevel: 0,\n        defaultStyle: {\n            fill: true, //是否填充海陆颜色\n            outlineColor: 'rgba(138,138,138,1)', //边界颜色\n            fillColor: 'rgb(3,3,30)', //陆地颜色 \n            backgroundColor: 'rgb(10,13,44)'//海区颜色\n        }\n    },\n    ChinaBorder: {\n        zIndex: 999,\n        minimumLevel: 0,\n        defaultStyle: {\n            lineWidth: 1.25,\n            outlineColor: 'rgba(88,88,88,1)'\n        }\n    },\n    Province: {\n        zIndex: 998,\n        minimumLevel: 0,\n        removeDuplicate: true,\n        defaultStyle: {\n            lineWidth: 1,\n            //lineDash: [1, 4],\n            fill: true,\n            outline: true,\n            shadowColor: 'white',\n            outlineColor: 'rgba(118,118,118,1)',\n            fillColor: 'rgba(225,225,225, .5)'\n        },\n        styleFilter: function (feature, style) {\n            var highlight = true;\n            if (this.focusAdminNames\n                && this.focusAdminNames.length\n            ) {\n                for (var i = 0; i < this.focusAdminNames.length; i++) {\n                    highlight = feature.properties[this.focusPropertyName]\n                        && feature.properties[this.focusPropertyName].toString().indexOf(this.focusAdminNames[i]) >= 0;\n                    if (highlight) break;\n                }\n            }\n            if (highlight) {\n                style.fill = false;\n                style.outlineColor = Cesium.Color.BLACK;\n                style.fillColor = Cesium.Color.WHITE;\n                style.lineWidth = 1.25;\n                style.lineDash = null;\n            }\n            return style;\n        }\n    },\n    PlaceName: {\n        minimumLevel: 3,\n        zIndex: 999,\n        defaultStyle: {\n            showLabel: true,\n            labelPropertyName: \"name\",\n            showMaker: true,\n            labelOffsetY: -12,\n            fontFamily: 'heiti',\n            pointColor: 'rgba(118,118,118,1)',\n            labelStrokeWidth: 4,\n            fontSize: 12,\n            labelStroke: true,\n            fontColor: 'white',\n            labelStrokeColor: 'rgba(118,118,118,1)'//Cesium.Color.BLACK\n        },\n        styleFilter: function (fc, style, x, y, level) {\n            var highlight = true;\n            if (this.focusAdminNames\n                && this.focusAdminNames.length\n                && fc.properties.province) {\n\n                for (var i = 0; i < this.focusAdminNames.length; i++) {\n                    highlight = fc.properties.province.indexOf(\n                        this.focusAdminNames[i]\n                    ) >= 0;\n                    if (highlight) break;\n                    if (fc.properties.city) {\n                        highlight = fc.properties.city.indexOf(\n                            this.focusAdminNames[i]) >= 0;\n                        if (highlight) break;\n                    }\n                    if (style.labelPropertyName\n                        && typeof fc.properties[style.labelPropertyName] == 'string') {\n\n                        highlight = fc.properties[style.labelPropertyName].indexOf(\n                            this.focusAdminNames[i]) >= 0;\n                        if (highlight) break;\n                    }\n                }\n            }\n\n            if (highlight) {\n                style.pointColor = Cesium.Color.BLACK;\n            }\n            if (fc.properties.adminType == 'province') {\n                if (level > 14) {\n                    style.show = false;\n                }\n                style.showMaker = false;\n                style.labelOffsetY = 0;\n                style.fontSize = 16;\n                if (highlight) {\n                    style.labelStrokeColor = Cesium.Color.fromBytes(160, 99, 57);\n                } else {\n                    style.labelStrokeColor = Cesium.Color.fromBytes(140, 89, 47);\n                }\n            } else {\n\n                if (fc.properties.adminType == 'city') {\n\n                    if (!fc.properties.cityCode.endsWith(\"0100\") && level < 6) {\n                        style.show = false;\n                    } else if (level < 5) {\n                        style.show = false;\n                    }\n                }\n                if (fc.properties.adminType == 'county' && level < 9) {\n                    style.show = false;\n                }\n                if (fc.properties.adminType == 'country') {\n                    style.show = false;\n                }\n\n                if (level > 14) {\n                    style.fontSize = 18;\n                }\n\n                if (highlight) {\n                    style.labelStrokeColor = Cesium.Color.BLACK;\n                }\n            }\n            if (level < 6) {\n                style.fontSize = 9;\n            }\n            if (level > 4) {\n                style.labelPropertyName = \"name\";\n            } else {\n                style.labelPropertyName = \"nameabbrevation\";\n            }\n\n            return style;\n        }\n    }\n}\nVector2dLayer.DefaultParams = DefaultParams\n\nexport class SealandVec2dLayer extends Vector2dLayer {\n    /**\n     * \n     * @param {{\n     * source:string\n     * theme?:'dark'|'light'\n     * }} options \n     */\n    constructor(options) {\n        var theme = options.theme || 'light';\n        var styleOptions = theme == 'dark' ? DefaultParams.SealandDark : DefaultParams.Sealand\n        super(Object.assign({\n            source: options.source\n        }, styleOptions))\n    }\n}\n\nexport class HighlightPolygonLayer extends Vector2dLayer {\n    /**\n     * \n     * @param {{\n     * source:string\n     * focusAdminNames?:string[]\n     * focusPropertyName?:string\n     * theme?:'dark'|'light'\n     * minimumLevel?:number\n     * }} options \n     */\n    constructor(options) {\n        super({\n            source: options.source,\n            focusAdminNames: options.focusAdminNames,\n            focusPropertyName: options.focusPropertyName,\n            minimumLevel: options.minimumLevel || 1,\n            removeDuplicate: true,\n            zIndex: typeof options.zIndex != 'undefined' ? options.zIndex : 998,\n            defaultStyle: {\n                lineWidth: 1,\n                // lineDash: [1, 4],\n                fill: options.theme !== 'dark',\n                outline: true,\n                shadowColor: 'white',\n                outlineColor: 'rgba(118,118,118,1)',\n                fillColor: 'rgba(225,225,225, .5)'\n            },\n            styleFilter: function (feature, style) {\n                var highlight = true;\n                if (this.focusAdminNames\n                    && this.focusAdminNames.length\n                ) {\n                    for (var i = 0; i < this.focusAdminNames.length; i++) {\n                        highlight = feature.properties[this.focusPropertyName]\n                            && feature.properties[this.focusPropertyName].toString().indexOf(this.focusAdminNames[i]) >= 0;\n                        if (highlight) break;\n                    }\n                }\n                if (highlight) {\n                    style.fill = false;\n                    if (options.theme == 'dark') {\n                        style.outlineColor = 'rgb(245,245,245)';\n                    } else {\n                        style.outlineColor = Cesium.Color.BLACK;\n                    }\n                    style.fillColor = Cesium.Color.WHITE;\n                    style.lineWidth = 1.25;\n                    style.lineDash = null;\n                }\n                return style;\n            }\n        })\n    }\n}\n\nexport class HighlightMarkerLayer extends Vector2dLayer {\n    /**\n     * \n     * @param {{\n     * source:string\n     * focusAdminNames?:string[]\n     * focusPropertyName?:string\n     * theme?:'dark'|'light'\n     * }} options \n     */\n    constructor(options) {\n        super({\n            source: options.source,\n            focusAdminNames: options.focusAdminNames,\n            focusPropertyName: options.focusPropertyName,\n            minimumLevel: 3,\n            zIndex: typeof options.zIndex != 'undefined' ? options.zIndex : 999,\n            defaultStyle: {\n                showLabel: true,\n                labelPropertyName: \"name\",\n                showMaker: true,\n                labelOffsetY: -12,\n                fontFamily: 'heiti',\n                pointColor: 'rgba(118,118,118,1)',\n                labelStrokeWidth: 4,\n                fontSize: 12,\n                labelStroke: true,\n                fontColor: 'white',\n                labelStrokeColor: 'rgba(118,118,118,1)'//Cesium.Color.BLACK\n            },\n            styleFilter: function (fc, style, x, y, level) {\n                var highlight = true;\n                if (this.focusAdminNames\n                    && this.focusAdminNames.length\n                    && fc.properties.province) {\n\n                    for (var i = 0; i < this.focusAdminNames.length; i++) {\n                        highlight = fc.properties.province.indexOf(\n                            this.focusAdminNames[i]\n                        ) >= 0;\n                        if (highlight) break;\n                        if (fc.properties.city) {\n                            highlight = fc.properties.city.indexOf(\n                                this.focusAdminNames[i]) >= 0;\n                            if (highlight) break;\n                        }\n                        if (style.labelPropertyName\n                            && typeof fc.properties[style.labelPropertyName] == 'string') {\n\n                            highlight = fc.properties[style.labelPropertyName].indexOf(\n                                this.focusAdminNames[i]) >= 0;\n                            if (highlight) break;\n                        }\n                    }\n                }\n\n                if (highlight) {\n                    if (options.theme == 'dark') {\n                        style.pointColor = Cesium.Color.WHITE;\n                    } else {\n                        style.pointColor = Cesium.Color.BLACK;\n                    }\n                }\n\n                if (fc.properties.adminType == 'province') {\n                    if (level > 14) {\n                        style.show = false;\n                    }\n                    style.showMaker = false;\n                    style.labelOffsetY = 0;\n                    style.fontSize = 16;\n                    if (highlight) {\n                        style.labelStrokeColor = Cesium.Color.fromBytes(160, 99, 57);\n                    } else {\n                        style.labelStrokeColor = Cesium.Color.fromBytes(140, 89, 47);\n                    }\n                } else {\n\n                    if (fc.properties.adminType == 'city') {\n\n                        if (!fc.properties.cityCode.endsWith(\"0100\") && level < 6) {\n                            style.show = false;\n                        } else if (level < 5) {\n                            style.show = false;\n                        }\n                    }\n                    if (fc.properties.adminType == 'county' && level < 9) {\n                        style.show = false;\n                    }\n                    if (fc.properties.adminType == 'country') {\n                        style.show = false;\n                    }\n\n                    if (level > 14) {\n                        style.fontSize = 18;\n                    }\n\n                    if (highlight) {\n                        if (options.theme == 'dark') {\n                            style.labelStrokeColor = 'rgb(10,13,44)';\n                        } else {\n                            style.labelStrokeColor = Cesium.Color.BLACK;\n                        }\n                    }\n                }\n                if (level < 6) {\n                    style.fontSize = 9;\n                }\n                if (level > 4) {\n                    style.labelPropertyName = \"name\";\n                } else {\n                    style.labelPropertyName = \"nameabbrevation\";\n                }\n\n                return style;\n            }\n        })\n    }\n}\n\nexport class LabelVec2dLayer extends Vector2dLayer {\n    /**\n     * \n     * @param {{\n     * source:string\n     * minimumLevel?:number\n     * maximumLevel?: number\n     * }} options \n     */\n    constructor(options) {\n        super({\n            source: options.source,\n            minimumLevel: options.minimumLevel || 12,\n            maximumLevel: options.maximumLevel || 20,\n            zIndex: typeof options.zIndex != 'undefined' ? options.zIndex : 9999,\n            defaultStyle: {\n                showLabel: true,\n                labelPropertyName: \"NAME\",\n                showMarker: false,\n                labelOffsetY: -12,\n                fontFamily: 'heiti',\n                pointColor: 'rgba(118,118,118,1)',\n                labelStrokeWidth: 4,\n                fontSize: 12,\n                labelStroke: true,\n                fontColor: 'white',\n                labelStrokeColor: 'rgba(118,118,118,1)'\n            }\n        })\n    }\n}\n\nexport class CountryVec2dLayer extends Vector2dLayer {\n    /**\n     * \n     * @param {{\n     * source:string\n     * theme?:'dark'|'light'\n     * }} options \n     */\n    constructor(options) {\n        super({\n            source: options.source,\n            zIndex: typeof options.zIndex != 'undefined' ? options.zIndex : 999,\n            minimumLevel: 0,\n            defaultStyle: {\n                lineWidth: 2,\n                outlineColor: options.theme == 'dark' ? 'white' : 'rgba(88,88,88,1)'\n            }\n        })\n    }\n}\nexport default Vector2dLayer;",
    "import GeometryUtils from  \"../../../../core/Source/GeometryUtils.js\";\n\n// import MeshVisualizer from \"../../../core/MeshVisualizer.js\";\nimport ExtrudedPolygonGeometry from  \"../../geometries/ExtrudedPolygonGeometry.js\";\n\nimport GenericWorker from  \"../../../../utils/Source/GenericWorker.js\";\n\nimport GeoPolygonGeometry from  \"../../geometries/GeoPolygonGeometry.js\";\n\n\nfunction getPickId(feature, provider) {\n    var pickIdMap = provider._pickIdMap;\n    var pickId = pickIdMap.get(feature);\n    if (!pickId) {\n        var context = provider.localScene.frameState.context\n        pickId = context.createPickId({\n            feature: feature,\n            primitive: provider.root\n        })\n        pickIdMap.set(feature, pickId);\n        provider.pickIds.push(pickId);\n    }\n    return pickId;\n}\n\nexport default class Vector3DStandardProvider {\n\n    /**\n     * \n     * @param {*} root \n     * @param {*} styleFilter \n     * @param {MeshVisualizer} localScene \n     * @param  {THREE.Vector2|Cesium.Cartesian2}uvUnit\n     * @param  {boolean}[roundUv=false]\n     * @param  {boolean}[useUvUnit=true]\n     */\n    constructor(root, styleFilter, localScene, uvUnit, roundUv, useUvUnit) {\n        const defaultValue = Cesium.defaultValue;\n        this.root = root;\n        this.styleFilter = styleFilter;\n        this.localScene = localScene\n        this.uvUnit = uvUnit;\n        this.roundUv = defaultValue(roundUv, false);\n        this.useUvUnit = defaultValue(useUvUnit, true);\n        this.pickIds = [];\n        this._pickIdMap = new Map();\n        this.terrainProvider = null;\n        this.clampToGround = false;\n        this.receiveShadow = true;\n        this.castShadow = true;\n    }\n\n    destroy() {\n        this._pickIdMap.clear()\n        this.pickIds.splice(0);\n    }\n\n    createMesh(feature, overrideUvUnit, createTopExtrudedUvNormal, createBottomExtrudedUvNormal, closeTop, uvGenerator, rtcCenter) {\n        const { styleFilter } = this\n        const { Mesh } = THREE;\n        const { Cartesian3, Cartographic, defaultValue } = Cesium;\n        const provider = this;\n        /**\n         * @type {MeshVisualizer}\n         */\n        const localScene = provider.localScene;\n        const uvUnit = defaultValue(overrideUvUnit, provider.uvUnit);\n        createTopExtrudedUvNormal = defaultValue(createTopExtrudedUvNormal, true);\n        createBottomExtrudedUvNormal = defaultValue(createBottomExtrudedUvNormal, true);\n        const roundUv = provider.roundUv;\n        const useUvUnit = provider.useUvUnit;\n        const clampToGround = provider.clampToGround;\n        const terrainProvider = provider.terrainProvider;\n\n\n        let style = {\n            useUvUnit: useUvUnit,\n            roundUv: roundUv,\n            receiveShadow: this.receiveShadow,\n            castShadow: this.castShadow\n        };\n\n        styleFilter(feature, style);\n        var extrudedHeight = style.extrudedHeight //|| 1\n        var height = 0\n        if (clampToGround && feature.properties._terrianHeight\n            && terrainProvider) {\n            height = feature.properties._terrianHeight;\n        }\n\n        let geometry = GeoPolygonGeometry.fromFeature(feature, clampToGround ? height : null, height + extrudedHeight, uvGenerator, closeTop);\n\n        if (extrudedHeight) {\n            geometry = ExtrudedPolygonGeometry.createExtrudedUvNormal(geometry, height, style.useUvUnit ? style.uvUnit || uvUnit : null, style.roundUv, createTopExtrudedUvNormal, createBottomExtrudedUvNormal);\n            geometry = GeometryUtils.toBufferGeometry3js(geometry);\n            geometry.attributes.uv = geometry.attributes.extrudedUv\n            geometry.deleteAttribute('extrudedUv');\n            geometry.deleteAttribute('extrudedNormal');\n        } else {\n            geometry = GeometryUtils.toBufferGeometry3js(geometry);\n        }\n\n        if (rtcCenter) {\n\n            let positions = geometry.attributes.position.array;\n            for (let i = 0; i < positions.length; i += 3) {\n                positions[i] -= rtcCenter.x;\n                positions[i + 1] -= rtcCenter.y;\n                positions[i + 2] -= rtcCenter.z;\n            }\n        } else {\n\n            let positions = geometry.attributes.position.array;\n            var cartesian3 = new Cartesian3();\n            var cartographic = new Cartographic()\n            var hs = [], maxY = 0;\n            for (let i = 0; i < positions.length; i += 3) {\n                cartesian3.x = positions[i]\n                cartesian3.y = positions[i + 1]\n                cartesian3.z = positions[i + 2]\n                Cartographic.fromCartesian(cartesian3, null, cartographic);\n                hs.push(cartographic.height - height)\n                localScene.worldCoordinatesToLocal(cartesian3, cartesian3, { y: 1 })\n                positions[i] = cartesian3.x\n                positions[i + 1] = cartesian3.y\n                positions[i + 2] = cartesian3.z\n\n                maxY = Math.max(cartesian3.y, maxY);\n            }\n\n            if (extrudedHeight) {\n                var eps = extrudedHeight * 0.1, id = 0;\n                for (let i = 0; i < hs.length; i++) {\n                    const h = hs[i];\n                    if (h >= eps) {//top\n                        positions[id + 1] = maxY;\n                    }\n                    id += 3;\n                }\n            }\n\n            geometry.computeVertexNormals()\n            geometry.computeBoundingSphere()\n        }\n\n        var mesh = new Mesh(geometry, style.material);\n        return mesh\n\n    }\n    requestContent(contentSet, rtcCenter) {\n        let groups = [], materialMap = new WeakMap();\n        const { root, styleFilter } = this\n        const { Object3D, Mesh, BufferAttribute } = THREE;\n        const { Cartesian3, Cartographic, BoundingSphere, sampleTerrainMostDetailed } = Cesium;\n        const provider = this;\n        /**\n         * @type {MeshVisualizer}\n         */\n        const localScene = provider.localScene;\n        // const uvUnit = provider.uvUnit;\n        // const roundUv = provider.roundUv;\n        // const useUvUnit = provider.useUvUnit;\n        // const clampToGround = provider.clampToGround;\n        // const terrainProvider = provider.terrainProvider;\n        const { uvUnit, roundUv, useUvUnit, clampToGround, terrainProvider,\n            receiveShadow, castShadow } = provider;\n\n        function createContent(content) {\n\n            let group, style = {\n                useUvUnit: useUvUnit,\n                roundUv: roundUv\n            }, feature = content.uri;\n\n            let featureId = feature.properties.featureId;\n            styleFilter(feature, style);\n            var extrudedHeight = style.extrudedHeight //|| 1\n            var height = 0\n            if (provider.clampToGround && feature.properties._terrianHeight\n                && provider.terrainProvider) {\n                height = feature.properties._terrianHeight;\n            }\n\n            let geometry = GeoPolygonGeometry.fromFeature(feature, provider.clampToGround ? height : null, height + extrudedHeight);\n\n            if (extrudedHeight) {\n                geometry = ExtrudedPolygonGeometry.createExtrudedUvNormal(geometry, height, style.useUvUnit ? style.uvUnit || uvUnit : null, style.roundUv);\n                geometry = GeometryUtils.toBufferGeometry3js(geometry);\n                geometry.attributes.uv = geometry.attributes.extrudedUv\n                geometry.deleteAttribute('extrudedUv');\n                geometry.deleteAttribute('extrudedNormal');\n            } else {\n                geometry = GeometryUtils.toBufferGeometry3js(geometry);\n            }\n\n            let ptCount = geometry.attributes.position.count;\n            let batchIds = new Float32Array(ptCount);\n            batchIds.fill(featureId);\n            geometry.setAttribute('batchId', new BufferAttribute(batchIds, 1, false));\n\n            let material = style.material;\n\n            //pickColors\n\n            material.pickColorQualifier = 'varying';\n            material.pickColorName = 'pickColor';\n\n            if (!geometry.boundingSphere) geometry.computeBoundingSphere();\n            var pickId = getPickId(feature, provider);\n            pickId.object.boundingSphere = BoundingSphere.clone(geometry.boundingSphere)\n\n            var pickColors = [], { red, green, blue, alpha } = pickId.color;\n            for (let i = 0; i < ptCount; i++) {\n                pickColors.push(red, green, blue, alpha)\n            }\n            pickColors = new Float32Array(pickColors);\n            geometry.setAttribute('pickColor', new BufferAttribute(pickColors, 4, false));\n\n            if (rtcCenter) {\n\n                let positions = geometry.attributes.position.array;\n                for (let i = 0; i < positions.length; i += 3) {\n                    positions[i] -= rtcCenter.x;\n                    positions[i + 1] -= rtcCenter.y;\n                    positions[i + 2] -= rtcCenter.z;\n                }\n            } else {\n\n                let positions = geometry.attributes.position.array;\n                var cartesian3 = new Cartesian3();\n                var cartographic = new Cartographic()\n                var hs = [], maxY = 0;\n                for (let i = 0; i < positions.length; i += 3) {\n                    cartesian3.x = positions[i]\n                    cartesian3.y = positions[i + 1]\n                    cartesian3.z = positions[i + 2]\n                    Cartographic.fromCartesian(cartesian3, null, cartographic);\n                    hs.push(cartographic.height - height)\n                    localScene.worldCoordinatesToLocal(cartesian3, cartesian3, { y: 1 })\n                    positions[i] = cartesian3.x\n                    positions[i + 1] = cartesian3.y\n                    positions[i + 2] = cartesian3.z\n\n                    maxY = Math.max(cartesian3.y, maxY);\n                }\n\n                if (extrudedHeight) {\n                    var eps = extrudedHeight * 0.1, id = 0;\n                    for (let i = 0; i < hs.length; i++) {\n                        const h = hs[i];\n                        if (h >= eps) {//top\n                            positions[id + 1] = maxY;\n                        }\n                        id += 3;\n                    }\n                }\n\n                geometry.computeVertexNormals()\n                geometry.computeBoundingSphere()\n            }\n\n            if (materialMap.has(material)) {\n                group = materialMap.get(material);\n            } else {\n                group = {\n                    material: material,\n                    geometries: []\n                };\n                groups.push(group)\n                materialMap.set(material, group);\n            }\n            group.geometries.push(geometry);\n        }\n\n\n        let batchList = [], batch = [], batchSize = 100, features = [];\n        batchList.push(batch);\n        contentSet.contain.forEach(content => {\n            if (batch.length > batchSize) {\n                batch = [];\n                batchList.push(batch);\n            }\n            var feature = content.uri;\n            if (feature.properties._terrianHeight == undefined) {\n                features.push(feature);\n            }\n            batch.push(content)\n        });\n        contentSet.intersect.forEach(content => {\n            if (batch.length > batchSize) {\n                batch = [];\n                batchList.push(batch);\n            }\n            var feature = content.uri;\n            if (feature.properties._terrianHeight == undefined) {\n                features.push(feature);\n            }\n            batch.push(content)\n        });\n\n        //贴地情况下，检查各要素中心地形是否有值，如果没有则请求最高分辨率的地形\n        var terrianPromise = null;\n        if (clampToGround && terrainProvider && features.length) {\n            terrianPromise = new Promise((resolve, reject) => {\n                var positions = features.map(feature => {\n                    var bbox = feature.geometry.bbox;\n                    var lon = (bbox[0] + bbox[2]) / 2., lat = (bbox[1] + bbox[3]) / 2.;\n                    return Cartographic.fromDegrees(lon, lat);\n                })\n                sampleTerrainMostDetailed(terrainProvider, positions).then(positions => {\n                    for (let i = 0; i < positions.length; i++) {\n                        const feature = features[i];\n                        feature.properties._terrianHeight = positions[i].height || 0;\n                    }\n                    features.length = 0;\n                    resolve();\n                }).otherwise(err => {\n                    features.length = 0;\n                    reject(err)\n                });\n            })\n        }\n\n        return Promise.all([terrianPromise]).then(() => {\n\n            return new GenericWorker(batchList, batch => {\n                for (let i = 0; i < batch.length; i++) {\n                    const el = batch[i];\n                    try {\n                        createContent(el)\n                    } catch (err) {\n                        console.error(err);\n                    }\n                }\n            }).run().then(() => {\n\n                let object3d = new Object3D();\n                groups.forEach(group => {\n                    let geometry = GeometryUtils.mergeGeometries3js(group.geometries);\n                    let material = group.material;\n                    let mesh = new Mesh(geometry, material);\n\n                    mesh.pickObject = {\n                        id: mesh,\n                        mesh: mesh,\n                        primitive: root\n                    }\n                    mesh.receiveShadow = receiveShadow;\n                    mesh.castShadow = castShadow;\n                    object3d.add(mesh);\n\n                    if (rtcCenter) {\n                        mesh.matrixAutoUpdate = false;\n                        mesh.modelMatrixNeedsUpdate = false;\n                    }\n                    mesh.frustumCulled = false;\n\n                    materialMap.delete(material)\n                });\n\n                if (rtcCenter) {\n                    object3d.matrixAutoUpdate = false;\n                    object3d.modelMatrixNeedsUpdate = false;\n                }\n                object3d.frustumCulled = false;\n\n                groups.splice(0);\n                // contentSet.contain.splice(0)\n                // contentSet.intersect.splice(0)\n                return object3d;\n            });\n\n        })\n\n    }\n}",
    "import GeometryUtils from  \"../../../../core/Source/GeometryUtils.js\";\n\nimport SolidWireframeGeometry from  \"../../geometries/SolidWireframeGeometry.js\";\n\nimport BuildingVector3DLoader from  \"../../../../renderable/Source/BuildingVector3DLoader.js\";\n\nimport GenericWorker from  \"../../../../utils/Source/GenericWorker.js\";\n\n\nexport default class Vector3DWireframeProvider {\n    constructor(root, styleFilter) {\n        this.root = root;\n        this.styleFilter = styleFilter;\n    }\n    requestContent(contentSet, rtcCenter) {\n        let groups = [], materialMap = new WeakMap();\n        const { root, styleFilter } = this\n        const { Object3D, Mesh } = THREE;\n\n        function createContent(content) {\n\n            let group, style = {}, feature = content.uri;\n\n            let featureId = feature.properties.featureId;\n            styleFilter(feature, style);\n            let geometry = BuildingVector3DLoader.parseFeature(feature, featureId, style);\n            let material = style.material;\n\n            if (rtcCenter) {\n                if (!(geometry instanceof Cesium.Geometry)) {\n                    geometry = geometry.constructor.createGeometry(geometry);\n                }\n                geometry = GeometryUtils.toBufferGeometry3js(geometry);\n                geometry = new SolidWireframeGeometry(geometry, true)\n\n                let positions = geometry.attributes.position.array;\n                for (let i = 0; i < positions.length; i += 3) {\n                    positions[i] -= rtcCenter.x;\n                    positions[i + 1] -= rtcCenter.y;\n                    positions[i + 2] -= rtcCenter.z;\n                }\n            } else {\n                geometry = GeometryUtils.toBufferGeometry3js(geometry);\n                geometry = new SolidWireframeGeometry(geometry, true)\n\n            }\n\n\n            if (materialMap.has(material)) {\n                group = materialMap.get(material);\n            } else {\n                group = {\n                    material: material,\n                    geometries: []\n                };\n                groups.push(group)\n                materialMap.set(material, group);\n            }\n            group.geometries.push(geometry);\n        }\n\n        let batchList = [], batch = [], batchSize = 100;\n        batchList.push(batch);\n        contentSet.contain.forEach(content => {\n            if (batch.length > batchSize) {\n                batch = [];\n                batchList.push(batch);\n            }\n            batch.push(content)\n        });\n        contentSet.intersect.forEach(content => {\n            if (batch.length > batchSize) {\n                batch = [];\n                batchList.push(batch);\n            }\n            batch.push(content)\n        });\n\n        return new GenericWorker(batchList, batch => {\n            batch.forEach(createContent);\n        }).run().then(() => {\n\n            let object3d = new Object3D();\n            groups.forEach(group => {\n                let geometry = GeometryUtils.mergeGeometries3js(group.geometries);\n                let material = group.material;\n                let mesh = new Mesh(geometry, material);\n\n                mesh.pickObject = {\n                    id: mesh,\n                    mesh: mesh,\n                    primitive: root\n                }\n                object3d.add(mesh);\n\n                mesh.matrixAutoUpdate = false;\n                mesh.modelMatrixNeedsUpdate = false;\n                mesh.frustumCulled = false;\n\n                materialMap.delete(material)\n            });\n            object3d.matrixAutoUpdate = false;\n            object3d.modelMatrixNeedsUpdate = false;\n            object3d.frustumCulled = false;\n            groups.splice(0);\n            contentSet.contain.splice(0)\n            contentSet.intersect.splice(0)\n            return object3d;\n        });\n    }\n}",
    "// import MeshVisualizer from \"../../../core/MeshVisualizer.js\";\n// import ExtrudeGradientMaterial from \"../../../materials/ExtrudeGradientMaterial.js\";\nimport BuildingVector3DLoader from  \"../../../../renderable/Source/BuildingVector3DLoader.js\";\n\n// import Vector3DGradientProvider from \"./Vector3DGradientProvider.js\";\nimport Vector3DWireframeProvider from  \"./Vector3DWireframeProvider.js\";\n\n\nimport Earth from  \"../../Earth.js\";\n\nimport ILayer from  \"../ILayer.js\";\n\nimport SolidWireframeMaterial from  \"../../materials/SolidWireframeMaterial.js\";\n\nimport Vector3DStandardProvider from  \"./Vector3DStandardProvider.js\";\n\n\nclass Vector3dLayer extends ILayer {\n    /**\n     * \n     * @param {object} params \n     * @param {string} params.url \n     * @param {string} [params.property='Floor'] 用于计算拉伸高度的geojson属性名称\n     * @param {string} [params.scale=4] 拉伸系数\n     * @param {'gradient'|'standard'|'wireframe'} [params.style='gradient'] \n     * @param {THREE.Material} [params.material]\n     * @param {THREE.Vec2|Cesium.Cartesian2} [params.uvUnit]\n     * @param {number} [params.lodMinRange=8]\n     * @param {boolean} [params.debugVolume]\n     */\n    constructor(params) {\n        const { Color, defaultValue, Event } = Cesium;\n\n        // if (params.clampToGround && !params.terrainProvider) {\n        //     throw new Error('Vector3dLayer#constructor:terrainProvider is required when clampToGround is true')\n        // }\n        params.style = params.style || 'standard'\n        super(params);\n        this.url = params.url;\n        this.useRtcCenter = defaultValue(params.useRtcCenter, params.style != 'standard');\n        this._property = params.property || 'Floor'\n        this._scale = typeof params.scale == 'number' ? params.scale : 4\n        this.lodMinRange = params.lodMinRange || 8;\n        this.bottomColor = params.bottomColor || Color.DARKBLUE.clone();\n        this.topColor = params.topColor || Color.CYAN.clone();\n        this.debugVolume = defaultValue(params.debugVolume, false);\n        this.style = params.style;\n        this._styleFilter = params.styleFilter;\n        this._uvUnit = params.uvUnit;\n        this._roundUv = defaultValue(params.roundUv, false);\n        this._lodContentProvider = null;\n        this._material = params.material;\n        this._terrainProvider = null;//params.terrainProvider\n        this._clampToGround = defaultValue(params.clampToGround, false);\n        this._receiveShadow = defaultValue(params.receiveShadow, true);\n        this._castShadow = defaultValue(params.castShadow, true);\n\n        this.root = null;\n        this.onBeforeLoad = new Event();\n        this.onLoading = new Event()\n        this.onLoaded = new Event();\n        this.onDataLoaded = new Event()\n    }\n    get property() {\n        return this._property\n    }\n    set property(val) {\n        if (this._property != val) {\n            this._property = val;\n            this.needsUpdate = true;\n        }\n    }\n    get scale() {\n        return this._scale\n    }\n    set scale(val) {\n        if (this._scale != val) {\n            this._scale = val;\n            this.needsUpdate = true;\n        }\n    }\n\n    get receiveShadow() {\n        return this._receiveShadow\n    }\n    set receiveShadow(val) {\n        if (this._receiveShadow != val) {\n            this._receiveShadow = val;\n            if (this._lodContentProvider) {\n                this._lodContentProvider.receiveShadow = val\n            }\n            this.needsUpdate = true;\n        }\n    }\n    get castShadow() {\n        return this._castShadow\n    }\n    set castShadow(val) {\n        if (this._castShadow != val) {\n            this._castShadow = val;\n            if (this._lodContentProvider) {\n                this._lodContentProvider.castShadow = val\n            }\n            this.needsUpdate = true;\n        }\n    }\n\n    get material() {\n        return this._material;\n    }\n    set material(val) {\n        if (this._material != val) {\n            this._material = val;\n            this.needsUpdate = true;\n        }\n    }\n\n    get contentProvider() {\n        return this._lodContentProvider;\n    }\n\n    set clampToGround(val) {\n        if (this._clampToGround != val) {\n            this._clampToGround = val;\n            if (this._lodContentProvider) {\n                this._lodContentProvider.clampToGround = val\n            }\n            this.needsUpdate = true;\n        }\n    }\n    get clampToGround() {\n        return this._clampToGround;\n    }\n\n    set terrainProvider(val) {\n        if (this._terrainProvider != val) {\n            this._terrainProvider = val;\n            if (this._lodContentProvider) {\n                this._lodContentProvider.terrainProvider = val\n            }\n            this.needsUpdate = true;\n        }\n    }\n    get terrainProvider() {\n        return this._terrainProvider;\n    }\n\n    set roundUv(val) {\n        if (val != this._roundUv) {\n            this._roundUv = val\n            if (this._lodContentProvider) {\n                this._lodContentProvider.roundUv = this._roundUv;\n            }\n            this.needsUpdate = true;\n        }\n    }\n    get roundUv() {\n        return this._roundUv;\n    }\n\n    set uvUnit(val) {\n        if (this._uvUnit != val) {\n            this._uvUnit = val;\n            if (this._lodContentProvider) {\n                this._lodContentProvider.uvUnit = this.uvUnit;\n            }\n            this.needsUpdate = true;\n        }\n\n    }\n    get uvUnit() {\n        return this._uvUnit;\n    }\n\n    set styleFilter(val) {\n        if (this.style != 'standard') return;\n        if (typeof val == 'function' && val != this._styleFilter) {\n            this._styleFilter = val;\n            if (this._lodContentProvider) this._lodContentProvider.styleFilter = val;\n            this.needsUpdate = true;\n        }\n    }\n    get styleFilter() {\n        return this._styleFilter;\n    }\n\n    set needsUpdate(val) {\n        if (val && this.root) {\n            this.root.needsUpdate = true;\n        }\n    }\n    set show(val) {\n        this._show = val;\n        if (this.root) this.root.show = val\n    }\n    get show() {\n        return this._show\n    }\n    get boundingSphere() {\n        if (this.root) {\n            return this.root.boundingSphereWC\n        }\n    }\n\n    /**\n     * \n     * @param {Earth|MeshVisualizer} earth \n     */\n    load(earth) {\n        this.onBeforeLoad.raiseEvent(this);\n\n        var localScene = earth.isMeshVisualizer ? earth : earth.globalScene;\n\n        let material = this.material,\n            contentProviderClass = Vector3DStandardProvider;\n        switch (this.style) {\n            // case 'gradient':\n            //     material = new ExtrudeGradientMaterial({\n            //         useExtrudedUvNormal: true,\n            //         uniforms: {\n            //             bottomColor: this.bottomColor,\n            //             topColor: this.topColor\n            //         }\n            //     })\n            //     contentProviderClass = Vector3DGradientProvider\n            //     break;\n            case 'wireframe':\n                material = new SolidWireframeMaterial({\n                    lineColor: new THREE.Color('white'),\n                    faceColor: new THREE.Color(0x84fa),\n                    lineWidth: 1,\n                    faceOpacity: 0.5,\n                    transparent: true,\n                    depthTest: false\n                })\n                contentProviderClass = Vector3DWireframeProvider\n                break;\n        }\n        this.material = material;\n\n        let styleFilter = this.style == 'standard' && typeof this.styleFilter == 'function' ? this.styleFilter : (feature, style) => {\n            style.extrudedHeight = feature.properties[this.property] * this.scale;\n            style.material = this.material;\n        }\n\n        let lodContentProvider = new contentProviderClass(null, styleFilter, localScene, this.uvUnit, this.roundUv)\n        this._lodContentProvider = lodContentProvider;\n        lodContentProvider.clampToGround = this.clampToGround;\n        lodContentProvider.terrainProvider = this.terrainProvider;\n\n        BuildingVector3DLoader.load(this.url, styleFilter, (progress) => {\n            // console.log('Loading:' + progress.toFixed(1) + '%');\n            this.onLoading.raiseEvent(this, progress);\n        }, geojson => {\n            this.onDataLoaded.raiseEvent(geojson);\n        }, {\n            minRange: this.lodMinRange,\n            debugVolume: true,\n            showDebugVolume: this.debugVolume,\n            debugVolumeColor: Cesium.Color.BLACK,\n            useRtcCenter: this.useRtcCenter,\n            getLodContentProvider: (root, styleFilter) => {\n                lodContentProvider.root = root;\n                return lodContentProvider\n            }\n        }).then(root => {\n            this.root = root;\n            root.show = this.show\n            localScene.add(root);\n            this.onLoaded.raiseEvent(this);\n        })\n\n        /**\n         * @type {Cesium.Scene}\n         */\n        var scene = localScene.scene\n        this._removeBeforeUpdateCb = localScene.beforeUpdate.addEventListener(() => {\n            if (scene.terrainProvider instanceof Cesium.EllipsoidTerrainProvider) {\n                this.terrainProvider = null;\n            } else if (this._terrainProvider != scene.terrainProvider) {\n                this.terrainProvider = scene.terrainProvider;\n            }\n        })\n    }\n\n    /**\n     * \n     * @param {Earth|MeshVisualizer} earth \n     */\n    unload(earth) {\n        let { _removeBeforeUpdateCb, root, _lodContentProvider } = this;\n        if (_removeBeforeUpdateCb)\n            _removeBeforeUpdateCb()\n        if (!root) return;\n        _lodContentProvider.destroy && _lodContentProvider.destroy()\n        this.root = root.destroy();\n    }\n}\nexport default Vector3dLayer",
    "\n/**\n * \n * @param {object} parameters \n * @param {THREE.Color} parameters.lineColor \n * @param {number} parameters.lineOpacity\n * @param {THREE.Color} parameters.faceColor\n * @param {number} parameters.faceOpacity\n * @constructor\n * @extends THREE.ShaderMaterial\n */\nfunction SolidWireframeMaterial(parameters = {}) {\n    const { ShaderMaterial, Color } = THREE;\n    var shader = SolidWireframeMaterial.Shader\n    parameters = Object.assign({\n        uniforms: {\n            \"lineWidth\": { type: \"f\", value: typeof parameters.lineWidth == 'number' ? parameters.lineWidth : 4.0 },\n            \"faceColor\": { type: \"c\", value: parameters.faceColor || new Color(0x222222) },\n            \"faceOpacity\": { type: \"f\", value: typeof parameters.faceOpacity == 'number' ? parameters.faceOpacity : 1.0 },\n            \"lineColor\": { type: \"c\", value: parameters.lineColor || new Color(0xffffff) },\n            \"lineOpacity\": { type: \"f\", value: typeof parameters.lineOpacity == 'number' ? parameters.lineOpacity : 1.0 }\n        },\n        vertexShader: shader.vertexShader,\n        fragmentShader: shader.fragmentShader\n    }, parameters);\n    delete parameters.lineWidth\n    delete parameters.faceColor\n    delete parameters.faceOpacity\n    delete parameters.lineColor\n    delete parameters.lineOpacity\n     \n    var material = new ShaderMaterial(parameters);\n\n    var uniforms = material.uniforms;\n    const defineProperty = Object.defineProperty;\n    function defNumProp(name) {\n        defineProperty(material, name, {\n            get() {\n                return uniforms[name].value\n            },\n            set(val) {\n                uniforms[name].value = val\n            }\n        })\n    }\n    function defColorProp(name) {\n        defineProperty(material, name, {\n            get() {\n                return uniforms[name].value\n            },\n            set(val) {\n                if (val != null && val != undefined)\n                    uniforms[name].value.set(val)\n            }\n        })\n    }\n    defColorProp('lineColor')\n    defColorProp('faceColor')\n    defNumProp('lineWidth')\n    defNumProp('faceOpacity')\n    defNumProp('lineOpacity')\n    return material;\n}\nSolidWireframeMaterial.Shader = {\n    vertexShader: [\n        \"attribute vec4 center;\",\n        \"varying vec4 vCenter;\",\n\n        \"void main() {\",\n        \"   vCenter = center;\",\n        \"   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n        \"}\",\n    ].join('\\n'),\n\n    fragmentShader: [\n        \"#extension GL_OES_standard_derivatives : enable\",\n\n        \"varying vec4 vCenter;\",\n        // control parameter\n        \"uniform float lineWidth;\",\n        \"uniform float faceOpacity;\",\n        \"uniform float lineOpacity;\",\n        \"uniform vec3 faceColor;\",\n        \"uniform vec3 lineColor;\",\n\n        \"float _lineWidth;\",\n        \"float edgeFactorTri() {\",\n        \"   vec3 d = fwidth( vCenter.xyz );\",\n        \"   vec3 a3 = smoothstep( vec3( 0.0 ), d * _lineWidth , vCenter.xyz );\",\n        \"   return min( min( a3.x, a3.y ), a3.z );\",\n        \"}\",\n\n        \"float edgeFactorQuad1() {\",\n        \"   vec2 d = fwidth( vCenter.xy );\",\n        \"   vec2 a2 = smoothstep( vec2( 0.0 ), d * _lineWidth , vCenter.xy );\",\n        \"   return min( a2.x, a2.y );\",\n        \"}\",\n\n        \"float edgeFactorQuad2() {\",\n        \"   vec2 d = fwidth( 1.0 - vCenter.xy );\",\n        \"   vec2 a2 = smoothstep( vec2( 0.0 ), d * _lineWidth , 1.0 - vCenter.xy );\",\n        \"   return min( a2.x, a2.y );\",\n        \"}\",\n\n        \"void main() {\",\n        \"   _lineWidth=lineWidth * czm_pixelRatio;\",\n        \"   vec4 _lineColor=vec4( lineColor , lineOpacity );\",\n        \"   vec4 _faceColor=vec4( faceColor , faceOpacity );\",\n        // \"   if(length(vCenter)==0.)gl_FragColor =_faceColor;\",\n        // \"else\",\n        \"   if ( vCenter.w == 0.0 ) {\",\n        \"       gl_FragColor = mix( _lineColor , _faceColor , edgeFactorTri() );\",\n        \"   } else {\",\n        \"       gl_FragColor = mix( _lineColor, _faceColor, min( edgeFactorQuad1(), edgeFactorQuad2() ) );\",\n        \"   }\",\n        \"}\",\n    ].join('\\n')\n};\n\nexport default SolidWireframeMaterial;",
    "export * from  \"./Source/index.js\";\n",
    "\nimport MeshVisModel from  \"../model/MeshVisModel.js\";\n\n\nvar Cartesian3;\nvar Color;\nvar ComponentDatatype;\nvar defaultValue;\nvar defined;\nvar deprecationWarning;\nvar destroyObject;\nvar DeveloperError;\nvar getStringFromTypedArray;\nvar Matrix4;\nvar RuntimeError;\nvar Cesium3DTileBatchTable;\nvar Cesium3DTileFeature;\nvar Cesium3DTileFeatureTable;\n\nvar initDeps$B3DMTileContentDone = false;\nfunction initDeps$B3DMTileContent() {\n    if (initDeps$B3DMTileContentDone) return;\n    initDeps$B3DMTileContentDone = true;\n\n    const _Cesium = Cesium;\n    Cartesian3 = _Cesium.Cartesian3;\n    Color = _Cesium.Color;\n    ComponentDatatype = _Cesium.ComponentDatatype;\n    defaultValue = _Cesium.defaultValue;\n    defined = _Cesium.defined;\n    deprecationWarning = _Cesium.deprecationWarning;\n    destroyObject = _Cesium.destroyObject;\n    DeveloperError = _Cesium.DeveloperError;\n    getStringFromTypedArray = _Cesium.getStringFromTypedArray;\n    Matrix4 = _Cesium.Matrix4;\n    RuntimeError = _Cesium.RuntimeError;\n    Cesium3DTileBatchTable = _Cesium.Cesium3DTileBatchTable;\n    Cesium3DTileFeature = _Cesium.Cesium3DTileFeature;\n    Cesium3DTileFeatureTable = _Cesium.Cesium3DTileFeatureTable;\n\n    Batched3DModel3DTileContentEx._deprecationWarning = deprecationWarning;\n}\n\n/**\n * Represents the contents of a\n * {@link https://github.com/CesiumGS/3d-tiles/tree/master/specification/TileFormats/Batched3DModel|Batched 3D Model}\n * tile in a {@link https://github.com/CesiumGS/3d-tiles/tree/master/specification|3D Tiles} tileset.\n * <p>\n * Implements the {@link Cesium3DTileContent} interface.\n * </p>\n *\n * @alias Batched3DModel3DTileContentEx\n * @constructor\n *\n * @private\n */\nfunction Batched3DModel3DTileContentEx(\n    tileset,\n    tile,\n    resource,\n    arrayBuffer,\n    byteOffset,\n    visualizer\n) {\n    initDeps$B3DMTileContent();\n\n    this._tileset = tileset;\n    this._tile = tile;\n    this._resource = resource;\n    this._model = undefined;\n    this._batchTable = undefined;\n    this._features = undefined;\n\n    // Populate from gltf when available\n    this._batchIdAttributeName = undefined;\n    this._diffuseAttributeOrUniformName = {};\n\n    this._rtcCenterTransform = undefined;\n    this._contentModelMatrix = undefined;\n\n    this.featurePropertiesDirty = false;\n\n    this._visualizer = visualizer;\n    initialize(this, arrayBuffer, byteOffset, visualizer);\n}\n\n// This can be overridden for testing purposes\nBatched3DModel3DTileContentEx._deprecationWarning = deprecationWarning;\n\nObject.defineProperties(Batched3DModel3DTileContentEx.prototype, {\n    featuresLength: {\n        get: function () {\n            return this._batchTable.featuresLength;\n        },\n    },\n\n    pointsLength: {\n        get: function () {\n            return 0;\n        },\n    },\n\n    trianglesLength: {\n        get: function () {\n            return this._model.trianglesLength;\n        },\n    },\n\n    geometryByteLength: {\n        get: function () {\n            return this._model.geometryByteLength;\n        },\n    },\n\n    texturesByteLength: {\n        get: function () {\n            return this._model.texturesByteLength;\n        },\n    },\n\n    batchTableByteLength: {\n        get: function () {\n            return this._batchTable.memorySizeInBytes;\n        },\n    },\n\n    innerContents: {\n        get: function () {\n            return undefined;\n        },\n    },\n\n    readyPromise: {\n        get: function () {\n            return this._model.readyPromise;\n        },\n    },\n\n    tileset: {\n        get: function () {\n            return this._tileset;\n        },\n    },\n\n    tile: {\n        get: function () {\n            return this._tile;\n        },\n    },\n\n    url: {\n        get: function () {\n            return this._resource.getUrlComponent(true);\n        },\n    },\n\n    batchTable: {\n        get: function () {\n            return this._batchTable;\n        },\n    },\n});\n\nvar sizeOfUint32 = Uint32Array.BYTES_PER_ELEMENT;\n\nfunction getBatchIdAttributeName(gltf) {\n    var batchIdAttributeName = ModelUtility.getAttributeOrUniformBySemantic(\n        gltf,\n        \"_BATCHID\"\n    );\n    if (!defined(batchIdAttributeName)) {\n        batchIdAttributeName = ModelUtility.getAttributeOrUniformBySemantic(\n            gltf,\n            \"BATCHID\"\n        );\n        if (defined(batchIdAttributeName)) {\n            Batched3DModel3DTileContentEx._deprecationWarning(\n                \"b3dm-legacy-batchid\",\n                \"The glTF in this b3dm uses the semantic `BATCHID`. Application-specific semantics should be prefixed with an underscore: `_BATCHID`.\"\n            );\n        }\n    }\n    return batchIdAttributeName;\n}\n\nfunction getVertexShaderCallback(content) {\n    return function (vs, programId) {\n        var batchTable = content._batchTable;\n        var handleTranslucent = !defined(content._tileset.classificationType);\n\n        var gltf = content._model.gltf;\n        if (defined(gltf)) {\n            content._batchIdAttributeName = getBatchIdAttributeName(gltf);\n            content._diffuseAttributeOrUniformName[\n                programId\n            ] = ModelUtility.getDiffuseAttributeOrUniform(gltf, programId);\n        }\n\n        var callback = batchTable.getVertexShaderCallback(\n            handleTranslucent,\n            content._batchIdAttributeName,\n            content._diffuseAttributeOrUniformName[programId]\n        );\n        return defined(callback) ? callback(vs) : vs;\n    };\n}\n\nfunction getFragmentShaderCallback(content) {\n    return function (fs, programId) {\n        var batchTable = content._batchTable;\n        var handleTranslucent = !defined(content._tileset.classificationType);\n\n        var gltf = content._model.gltf;\n        if (defined(gltf)) {\n            content._diffuseAttributeOrUniformName[\n                programId\n            ] = ModelUtility.getDiffuseAttributeOrUniform(gltf, programId);\n        }\n        var callback = batchTable.getFragmentShaderCallback(\n            handleTranslucent,\n            content._diffuseAttributeOrUniformName[programId]\n        );\n        return defined(callback) ? callback(fs) : fs;\n    };\n}\n\nfunction getPickIdCallback(content) {\n    return function () {\n        return content._batchTable.getPickId();\n    };\n}\n\nfunction getClassificationFragmentShaderCallback(content) {\n    return function (fs) {\n        var batchTable = content._batchTable;\n        var callback = batchTable.getClassificationFragmentShaderCallback();\n        return defined(callback) ? callback(fs) : fs;\n    };\n}\n\nfunction createColorChangedCallback(content) {\n    return function (batchId, color) {\n        content._model.updateCommands(batchId, color);\n    };\n}\n\nfunction initialize(content, arrayBuffer, byteOffset, visualizer) {\n    var tileset = content._tileset;\n    var tile = content._tile;\n    var resource = content._resource;\n\n    var byteStart = defaultValue(byteOffset, 0);\n    byteOffset = byteStart;\n\n    var uint8Array = new Uint8Array(arrayBuffer);\n    var view = new DataView(arrayBuffer);\n    byteOffset += sizeOfUint32; // Skip magic\n\n    var version = view.getUint32(byteOffset, true);\n    if (version !== 1) {\n        throw new RuntimeError(\n            \"Only Batched 3D Model version 1 is supported.  Version \" +\n            version +\n            \" is not.\"\n        );\n    }\n    byteOffset += sizeOfUint32;\n\n    var byteLength = view.getUint32(byteOffset, true);\n    byteOffset += sizeOfUint32;\n\n    var featureTableJsonByteLength = view.getUint32(byteOffset, true);\n    byteOffset += sizeOfUint32;\n\n    var featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n    byteOffset += sizeOfUint32;\n\n    var batchTableJsonByteLength = view.getUint32(byteOffset, true);\n    byteOffset += sizeOfUint32;\n\n    var batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n    byteOffset += sizeOfUint32;\n\n    var batchLength;\n\n    // Legacy header #1: [batchLength] [batchTableByteLength]\n    // Legacy header #2: [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]\n    // Current header: [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength]\n    // If the header is in the first legacy format 'batchTableJsonByteLength' will be the start of the JSON string (a quotation mark) or the glTF magic.\n    // Accordingly its first byte will be either 0x22 or 0x67, and so the minimum uint32 expected is 0x22000000 = 570425344 = 570MB. It is unlikely that the feature table JSON will exceed this length.\n    // The check for the second legacy format is similar, except it checks 'batchTableBinaryByteLength' instead\n    if (batchTableJsonByteLength >= 570425344) {\n        // First legacy check\n        byteOffset -= sizeOfUint32 * 2;\n        batchLength = featureTableJsonByteLength;\n        batchTableJsonByteLength = featureTableBinaryByteLength;\n        batchTableBinaryByteLength = 0;\n        featureTableJsonByteLength = 0;\n        featureTableBinaryByteLength = 0;\n        Batched3DModel3DTileContentEx._deprecationWarning(\n            \"b3dm-legacy-header\",\n            \"This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/master/specification/TileFormats/Batched3DModel.\"\n        );\n    } else if (batchTableBinaryByteLength >= 570425344) {\n        // Second legacy check\n        byteOffset -= sizeOfUint32;\n        batchLength = batchTableJsonByteLength;\n        batchTableJsonByteLength = featureTableJsonByteLength;\n        batchTableBinaryByteLength = featureTableBinaryByteLength;\n        featureTableJsonByteLength = 0;\n        featureTableBinaryByteLength = 0;\n        Batched3DModel3DTileContentEx._deprecationWarning(\n            \"b3dm-legacy-header\",\n            \"This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/master/specification/TileFormats/Batched3DModel.\"\n        );\n    }\n\n    var featureTableJson;\n    if (featureTableJsonByteLength === 0) {\n        featureTableJson = {\n            BATCH_LENGTH: defaultValue(batchLength, 0),\n        };\n    } else {\n        var featureTableString = getStringFromTypedArray(\n            uint8Array,\n            byteOffset,\n            featureTableJsonByteLength\n        );\n        featureTableJson = JSON.parse(featureTableString);\n        byteOffset += featureTableJsonByteLength;\n    }\n\n    var featureTableBinary = new Uint8Array(\n        arrayBuffer,\n        byteOffset,\n        featureTableBinaryByteLength\n    );\n    byteOffset += featureTableBinaryByteLength;\n\n    var featureTable = new Cesium3DTileFeatureTable(\n        featureTableJson,\n        featureTableBinary\n    );\n\n    batchLength = featureTable.getGlobalProperty(\"BATCH_LENGTH\");\n    featureTable.featuresLength = batchLength;\n\n    var batchTableJson;\n    var batchTableBinary;\n    if (batchTableJsonByteLength > 0) {\n        // PERFORMANCE_IDEA: is it possible to allocate this on-demand?  Perhaps keep the\n        // arraybuffer/string compressed in memory and then decompress it when it is first accessed.\n        //\n        // We could also make another request for it, but that would make the property set/get\n        // API async, and would double the number of numbers in some cases.\n        var batchTableString = getStringFromTypedArray(\n            uint8Array,\n            byteOffset,\n            batchTableJsonByteLength\n        );\n        batchTableJson = JSON.parse(batchTableString);\n        byteOffset += batchTableJsonByteLength;\n\n        if (batchTableBinaryByteLength > 0) {\n            // Has a batch table binary\n            batchTableBinary = new Uint8Array(\n                arrayBuffer,\n                byteOffset,\n                batchTableBinaryByteLength\n            );\n            // Copy the batchTableBinary section and let the underlying ArrayBuffer be freed\n            batchTableBinary = new Uint8Array(batchTableBinary);\n            byteOffset += batchTableBinaryByteLength;\n        }\n    }\n\n    var colorChangedCallback;\n    if (defined(tileset.classificationType)) {\n        colorChangedCallback = createColorChangedCallback(content);\n    }\n\n    var batchTable = new Cesium3DTileBatchTable(\n        content,\n        batchLength,\n        batchTableJson,\n        batchTableBinary,\n        colorChangedCallback\n    );\n    content._batchTable = batchTable;\n\n    var gltfByteLength = byteStart + byteLength - byteOffset;\n    if (gltfByteLength === 0) {\n        throw new RuntimeError(\"glTF byte length must be greater than 0.\");\n    }\n\n    var gltfView;\n    if (byteOffset % 4 === 0) {\n        gltfView = new Uint8Array(arrayBuffer, byteOffset, gltfByteLength);\n    } else {\n        // Create a copy of the glb so that it is 4-byte aligned\n        Batched3DModel3DTileContentEx._deprecationWarning(\n            \"b3dm-glb-unaligned\",\n            \"The embedded glb is not aligned to a 4-byte boundary.\"\n        );\n        gltfView = new Uint8Array(\n            uint8Array.subarray(byteOffset, byteOffset + gltfByteLength)\n        );\n    }\n\n    var pickObject = {\n        content: content,\n        primitive: tileset,\n    };\n\n    content._rtcCenterTransform = Matrix4.IDENTITY;\n    var rtcCenter = featureTable.getGlobalProperty(\n        \"RTC_CENTER\",\n        ComponentDatatype.FLOAT,\n        3\n    );\n    if (defined(rtcCenter)) {\n        content._rtcCenterTransform = Matrix4.fromTranslation(\n            Cartesian3.fromArray(rtcCenter)\n        );\n    }\n\n    content._contentModelMatrix = Matrix4.multiply(\n        tile.computedTransform,\n        content._rtcCenterTransform,\n        new Matrix4()\n    );\n\n    try {\n\n        const _Cesium = Cesium;\n\n        // if (!defined(tileset.classificationType)) {\n        // PERFORMANCE_IDEA: patch the shader on demand, e.g., the first time show/color changes.\n        // The pick shader still needs to be patched.\n        content._model = new MeshVisModel({\n            dracoDecoderPath: MeshVisModel.DefaultDracoDecoderPath,\n            gltf: gltfView,\n            visualizer: visualizer,\n            cull: false, // The model is already culled by 3D Tiles\n            releaseGltfJson: true, // Models are unique and will not benefit from caching so save memory\n            opaquePass: _Cesium.Pass.CESIUM_3D_TILE, // Draw opaque portions of the model during the 3D Tiles pass\n            basePath: resource,\n            requestType: _Cesium.RequestType.TILES3D,\n            modelMatrix: content._contentModelMatrix,\n            upAxis: tileset._gltfUpAxis,\n            forwardAxis: _Cesium.Axis.X,\n            shadows: tileset.shadows,\n            debugWireframe: tileset.debugWireframe,\n            incrementallyLoadTextures: false,\n            // vertexShaderLoaded: getVertexShaderCallback(content),\n            // fragmentShaderLoaded: getFragmentShaderCallback(content),\n            // uniformMapLoaded: batchTable.getUniformMapCallback(),\n            // pickIdLoaded: getPickIdCallback(content),\n            // addBatchIdToGeneratedShaders: batchLength > 0, // If the batch table has values in it, generated shaders will need a batchId attribute\n            pickObject: pickObject,\n            imageBasedLightingFactor: tileset.imageBasedLightingFactor,\n            lightColor: tileset.lightColor,\n            luminanceAtZenith: tileset.luminanceAtZenith,\n            sphericalHarmonicCoefficients: tileset.sphericalHarmonicCoefficients,\n            specularEnvironmentMaps: tileset.specularEnvironmentMaps,\n        });\n        // } else {\n        //     // This transcodes glTF to an internal representation for geometry so we can take advantage of the re-batching of vector data.\n        //     // For a list of limitations on the input glTF, see the documentation for classificationType of Cesium3DTileset.\n        //     content._model = new ClassificationModel({\n        //         gltf: gltfView,\n        //         cull: false, // The model is already culled by 3D Tiles\n        //         basePath: resource,\n        //         requestType: RequestType.TILES3D,\n        //         modelMatrix: content._contentModelMatrix,\n        //         upAxis: tileset._gltfUpAxis,\n        //         forwardAxis: Axis.X,\n        //         debugWireframe: tileset.debugWireframe,\n        //         vertexShaderLoaded: getVertexShaderCallback(content),\n        //         classificationShaderLoaded: getClassificationFragmentShaderCallback(\n        //             content\n        //         ),\n        //         uniformMapLoaded: batchTable.getUniformMapCallback(),\n        //         pickIdLoaded: getPickIdCallback(content),\n        //         classificationType: tileset._classificationType,\n        //         batchTable: batchTable,\n        //     });\n        // }\n\n    } catch (err) {\n        console.error(err);\n        throw err\n    }\n}\n\nfunction createFeatures(content) {\n    var featuresLength = content.featuresLength;\n    if (!defined(content._features) && featuresLength > 0) {\n        var features = new Array(featuresLength);\n        for (var i = 0; i < featuresLength; ++i) {\n            features[i] = new Cesium3DTileFeature(content, i);\n        }\n        content._features = features;\n    }\n}\n\nBatched3DModel3DTileContentEx.prototype.hasProperty = function (batchId, name) {\n    return this._batchTable.hasProperty(batchId, name);\n};\n\nBatched3DModel3DTileContentEx.prototype.getFeature = function (batchId) {\n    //>>includeStart('debug', pragmas.debug);\n    var featuresLength = this.featuresLength;\n    if (!defined(batchId) || batchId < 0 || batchId >= featuresLength) {\n        throw new DeveloperError(\n            \"batchId is required and between zero and featuresLength - 1 (\" +\n            (featuresLength - 1) +\n            \").\"\n        );\n    }\n    //>>includeEnd('debug');\n\n    createFeatures(this);\n    return this._features[batchId];\n};\n\nBatched3DModel3DTileContentEx.prototype.applyDebugSettings = function (\n    enabled,\n    color\n) {\n    color = enabled ? color : Color.WHITE;\n    if (this.featuresLength === 0) {\n        this._model.color = color;\n    } else {\n        this._batchTable.setAllColor(color);\n    }\n};\n\nBatched3DModel3DTileContentEx.prototype.applyStyle = function (style) {\n    if (this.featuresLength === 0) {\n        var hasColorStyle = defined(style) && defined(style.color);\n        var hasShowStyle = defined(style) && defined(style.show);\n        var model = this._model;\n        model.color = hasColorStyle\n            ? style.color.evaluateColor(undefined, model.color)\n            : Color.clone(Color.WHITE, model.color);\n        model.show = hasShowStyle ? style.show.evaluate(undefined) : true;\n    } else {\n        this._batchTable.applyStyle(style);\n    }\n};\n\nBatched3DModel3DTileContentEx.prototype.update = function (tileset, frameState) {\n\n    // var commandStart = frameState.commandList.length;\n\n    // In the PROCESSING state we may be calling update() to move forward\n    // the content's resource loading.  In the READY state, it will\n    // actually generate commands.\n    this._batchTable.update(tileset, frameState);\n\n    this._contentModelMatrix = Matrix4.multiply(\n        this._tile.computedTransform,\n        this._rtcCenterTransform,\n        this._contentModelMatrix\n    );\n    var model = this._model, tileset = this._tileset;\n    model.modelMatrix = this._contentModelMatrix;\n    model.shadows = tileset.shadows;\n    model.imageBasedLightingFactor = tileset.imageBasedLightingFactor;\n    model.lightColor = tileset.lightColor;\n    model.luminanceAtZenith = tileset.luminanceAtZenith;\n    model.sphericalHarmonicCoefficients = tileset.sphericalHarmonicCoefficients;\n    model.specularEnvironmentMaps = tileset.specularEnvironmentMaps;\n    model.debugWireframe = tileset.debugWireframe;\n\n    // // Update clipping planes\n    // var tilesetClippingPlanes = this._tileset.clippingPlanes;\n    // this._model.clippingPlanesOriginMatrix = this._tileset.clippingPlanesOriginMatrix;\n    // if (defined(tilesetClippingPlanes) && this._tile.clippingPlanesDirty) {\n    //     // Dereference the clipping planes from the model if they are irrelevant.\n    //     // Link/Dereference directly to avoid ownership checks.\n    //     // This will also trigger synchronous shader regeneration to remove or add the clipping plane and color blending code.\n    //     this._model._clippingPlanes =\n    //         tilesetClippingPlanes.enabled && this._tile._isClipped\n    //             ? tilesetClippingPlanes\n    //             : undefined;\n    // }\n\n    // // If the model references a different ClippingPlaneCollection due to the tileset's collection being replaced with a\n    // // ClippingPlaneCollection that gives this tile the same clipping status, update the model to use the new ClippingPlaneCollection.\n    // if (\n    //     defined(tilesetClippingPlanes) &&\n    //     defined(this._model._clippingPlanes) &&\n    //     this._model._clippingPlanes !== tilesetClippingPlanes\n    // ) {\n    //     this._model._clippingPlanes = tilesetClippingPlanes;\n    // }\n\n    this._model.update(frameState);\n\n    // // If any commands were pushed, add derived commands\n    // var commandEnd = frameState.commandList.length;\n    // if (\n    //     commandStart < commandEnd &&\n    //     (frameState.passes.render || frameState.passes.pick) &&\n    //     !defined(tileset.classificationType)\n    // ) {\n    //     this._batchTable.addDerivedCommands(frameState, commandStart);\n    // }\n};\n\nBatched3DModel3DTileContentEx.prototype.isDestroyed = function () {\n    return false;\n};\n\nBatched3DModel3DTileContentEx.prototype.destroy = function () {\n    this._model = this._model && this._model.destroy();\n    this._batchTable = this._batchTable && this._batchTable.destroy();\n    this._visualizer = null;\n    return destroyObject(this);\n};\nexport { Batched3DModel3DTileContentEx };\n",
    "import { Batched3DModel3DTileContentEx } from  \"./Batched3DModel3DTileContentEx.js\";\n\nimport { Instanced3DModel3DTileContentEx } from  \"./Instanced3DModel3DTileContentEx.js\";\n\n\nvar Cesium3DTileExtension = {\n    init() {\n        if (this.__init__) return;\n        this.__init__ = true;\n\n        const { Cesium3DTileContentFactory, Cesium3DTileset } = Cesium;\n\n        Cesium3DTileset.prototype.render = function (frameState, renderList) {\n\n            if (this.__frameNumber != frameState.frameNumber) {\n                this.update(frameState);//调用Cesium3DTileset的udpate方法，以更新_selectedTiles\n                this.__frameNumber = frameState.frameNumber\n            } else {\n                this.__frameNumber = frameState.frameNumber\n            }\n\n            let tileModelCount = 0;\n            //将可见的tile加入MeshVisualizer的渲染队列 \n            for (let i = 0; i < this._selectedTiles.length; i++) {\n                const tile = this._selectedTiles[i];\n                var content = tile.content;\n\n                if (content) {\n\n                    if (content._contents && Array.isArray(content._contents)) {\n\n                        var contents = content._contents;\n                        contents.forEach((subContent) => {\n                            var model = subContent._model || subContent._modelInstanceCollection;\n                            if (model && model.isMeshVisModel) {\n                                renderList.push(model.root);\n                                tileModelCount++;\n                            }\n                        });\n\n                    }\n                    else {\n\n                        var model = content._model || content._modelInstanceCollection;\n                        if (model && model.isMeshVisModel) {\n                            renderList.push(model.root);\n                            tileModelCount++;\n                        }\n                    }\n\n                }\n\n            }\n        }\n\n        //重写 Cesium3DTileContentFactory.b3dm content的创建方法\n\n        Cesium3DTileContentFactory._b3dm = Cesium3DTileContentFactory.b3dm;\n        Cesium3DTileContentFactory.b3dm = function (tileset, tile, resource, arrayBuffer, byteOffset) {\n            var visualizer = tileset.visualizer;\n            if (visualizer) {//使用CesiumMeshVisualizer\n                return new Batched3DModel3DTileContentEx(tileset, tile, resource, arrayBuffer, byteOffset, visualizer);\n            } else {//使用Cesium.Model\n                return Cesium3DTileContentFactory._b3dm(tileset, tile, resource, arrayBuffer, byteOffset);\n            }\n        }\n\n        Cesium3DTileContentFactory._i3dm = Cesium3DTileContentFactory.i3dm;\n        Cesium3DTileContentFactory.i3dm = function (tileset, tile, resource, arrayBuffer, byteOffset) {\n            var visualizer = tileset.visualizer;\n            if (visualizer) {//使用CesiumMeshVisualizer\n                return new Instanced3DModel3DTileContentEx(tileset, tile, resource, arrayBuffer, byteOffset, visualizer);\n            } else {//使用Cesium.Model\n                return Cesium3DTileContentFactory._i3dm(tileset, tile, resource, arrayBuffer, byteOffset);\n            }\n        }\n\n    }\n}\n\nexport default Cesium3DTileExtension;\n",
    "var AttributeCompression;\nvar Cartesian3;\nvar Color;\nvar ComponentDatatype;\nvar defaultValue;\nvar defined;\nvar deprecationWarning;\nvar destroyObject;\nvar DeveloperError;\nvar Ellipsoid;\nvar getStringFromTypedArray;\nvar Matrix3;\nvar Matrix4;\nvar Quaternion;\nvar RequestType;\nvar RuntimeError;\nvar Transforms;\nvar TranslationRotationScale;\nvar Pass;\nvar Axis;\nvar Cesium3DTileBatchTable;\nvar Cesium3DTileFeature;\nvar Cesium3DTileFeatureTable;\n\nimport MeshVisModel from  \"../model/MeshVisModel.js\";\n\n\nvar initDeps$Instanced3DModel3DTileContentExDone = false;\nfunction initDeps$Instanced3DModel3DTileContentEx() {\n  if (initDeps$Instanced3DModel3DTileContentExDone) return;\n  initDeps$Instanced3DModel3DTileContentExDone = true;\n\n  const _Cesium = Cesium;\n\n  AttributeCompression = _Cesium.AttributeCompression;\n  Cartesian3 = _Cesium.Cartesian3;\n  Color = _Cesium.Color;\n  ComponentDatatype = _Cesium.ComponentDatatype\n  defaultValue = _Cesium.defaultValue;\n  defined = _Cesium.defined;\n  deprecationWarning = _Cesium.deprecationWarning;\n  destroyObject = _Cesium.destroyObject;\n  DeveloperError = _Cesium.DeveloperError;\n  Ellipsoid = _Cesium.Ellipsoid;\n  getStringFromTypedArray = _Cesium.getStringFromTypedArray;\n  Matrix3 = _Cesium.Matrix3;\n  Matrix4 = _Cesium.Matrix4;\n  Quaternion = _Cesium.Quaternion;\n  RequestType = _Cesium.RequestType;\n  RuntimeError = _Cesium.RuntimeError;\n  Transforms = _Cesium.Transforms;\n  TranslationRotationScale = _Cesium.TranslationRotationScale;\n  Pass = _Cesium.Pass;\n  Axis = _Cesium.Axis;\n  Cesium3DTileBatchTable = _Cesium.Cesium3DTileBatchTable;\n  Cesium3DTileFeature = _Cesium.Cesium3DTileFeature;\n  Cesium3DTileFeatureTable = _Cesium.Cesium3DTileFeatureTable;\n}\n\n/**\n * Represents the contents of a\n * {@link https://github.com/CesiumGS/3d-tiles/tree/master/specification/TileFormats/Instanced3DModel|Instanced 3D Model}\n * tile in a {@link https://github.com/CesiumGS/3d-tiles/tree/master/specification|3D Tiles} tileset.\n * <p>\n * Implements the {@link Cesium3DTileContent} interface.\n * </p>\n *\n * @alias Instanced3DModel3DTileContentEx\n * @constructor\n *\n * @private\n */\nfunction Instanced3DModel3DTileContentEx(\n  tileset,\n  tile,\n  resource,\n  arrayBuffer,\n  byteOffset,\n  visualizer\n) {\n\n  initDeps$Instanced3DModel3DTileContentEx();\n\n  this._tileset = tileset;\n  this._tile = tile;\n  this._resource = resource;\n  this._modelInstanceCollection = undefined;\n  this._batchTable = undefined;\n  this._features = undefined;\n\n  this.featurePropertiesDirty = false;\n  this._visualizer = visualizer\n  initialize(this, arrayBuffer, byteOffset, visualizer);\n}\n\n// This can be overridden for testing purposes\nInstanced3DModel3DTileContentEx._deprecationWarning = deprecationWarning;\n\nObject.defineProperties(Instanced3DModel3DTileContentEx.prototype, {\n  featuresLength: {\n    get: function () {\n      return this._batchTable.featuresLength;\n    },\n  },\n\n  pointsLength: {\n    get: function () {\n      return 0;\n    },\n  },\n\n  trianglesLength: {\n    get: function () {\n      var model = this._modelInstanceCollection._model;\n      if (defined(model)) {\n        return model.trianglesLength;\n      }\n      return 0;\n    },\n  },\n\n  geometryByteLength: {\n    get: function () {\n      var model = this._modelInstanceCollection._model;\n      if (defined(model)) {\n        return model.geometryByteLength;\n      }\n      return 0;\n    },\n  },\n\n  texturesByteLength: {\n    get: function () {\n      var model = this._modelInstanceCollection._model;\n      if (defined(model)) {\n        return model.texturesByteLength;\n      }\n      return 0;\n    },\n  },\n\n  batchTableByteLength: {\n    get: function () {\n      return this._batchTable.memorySizeInBytes;\n    },\n  },\n\n  innerContents: {\n    get: function () {\n      return undefined;\n    },\n  },\n\n  readyPromise: {\n    get: function () {\n      return this._modelInstanceCollection.readyPromise;\n    },\n  },\n\n  tileset: {\n    get: function () {\n      return this._tileset;\n    },\n  },\n\n  tile: {\n    get: function () {\n      return this._tile;\n    },\n  },\n\n  url: {\n    get: function () {\n      return this._resource.getUrlComponent(true);\n    },\n  },\n\n  batchTable: {\n    get: function () {\n      return this._batchTable;\n    },\n  },\n});\n\nfunction getPickIdCallback(content) {\n  return function () {\n    return content._batchTable.getPickId();\n  };\n}\n\nvar sizeOfUint32 = Uint32Array.BYTES_PER_ELEMENT;\nvar propertyScratch1 = new Array(4);\nvar propertyScratch2 = new Array(4);\n\nfunction initialize(content, arrayBuffer, byteOffset, visualizer) {\n  var byteStart = defaultValue(byteOffset, 0);\n  byteOffset = byteStart;\n\n  var uint8Array = new Uint8Array(arrayBuffer);\n  var view = new DataView(arrayBuffer);\n  byteOffset += sizeOfUint32; // Skip magic\n\n  var version = view.getUint32(byteOffset, true);\n  if (version !== 1) {\n    throw new RuntimeError(\n      \"Only Instanced 3D Model version 1 is supported. Version \" +\n      version +\n      \" is not.\"\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var byteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var featureTableJsonByteLength = view.getUint32(byteOffset, true);\n  if (featureTableJsonByteLength === 0) {\n    throw new RuntimeError(\n      \"featureTableJsonByteLength is zero, the feature table must be defined.\"\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var batchTableJsonByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n  byteOffset += sizeOfUint32;\n\n  var gltfFormat = view.getUint32(byteOffset, true);\n  if (gltfFormat !== 1 && gltfFormat !== 0) {\n    throw new RuntimeError(\n      \"Only glTF format 0 (uri) or 1 (embedded) are supported. Format \" +\n      gltfFormat +\n      \" is not.\"\n    );\n  }\n  byteOffset += sizeOfUint32;\n\n  var featureTableString = getStringFromTypedArray(\n    uint8Array,\n    byteOffset,\n    featureTableJsonByteLength\n  );\n  var featureTableJson = JSON.parse(featureTableString);\n  byteOffset += featureTableJsonByteLength;\n\n  var featureTableBinary = new Uint8Array(\n    arrayBuffer,\n    byteOffset,\n    featureTableBinaryByteLength\n  );\n  byteOffset += featureTableBinaryByteLength;\n\n  var featureTable = new Cesium3DTileFeatureTable(\n    featureTableJson,\n    featureTableBinary\n  );\n  var instancesLength = featureTable.getGlobalProperty(\"INSTANCES_LENGTH\");\n  featureTable.featuresLength = instancesLength;\n\n  if (!defined(instancesLength)) {\n    throw new RuntimeError(\n      \"Feature table global property: INSTANCES_LENGTH must be defined\"\n    );\n  }\n\n  var batchTableJson;\n  var batchTableBinary;\n  if (batchTableJsonByteLength > 0) {\n    var batchTableString = getStringFromTypedArray(\n      uint8Array,\n      byteOffset,\n      batchTableJsonByteLength\n    );\n    batchTableJson = JSON.parse(batchTableString);\n    byteOffset += batchTableJsonByteLength;\n\n    if (batchTableBinaryByteLength > 0) {\n      // Has a batch table binary\n      batchTableBinary = new Uint8Array(\n        arrayBuffer,\n        byteOffset,\n        batchTableBinaryByteLength\n      );\n      // Copy the batchTableBinary section and let the underlying ArrayBuffer be freed\n      batchTableBinary = new Uint8Array(batchTableBinary);\n      byteOffset += batchTableBinaryByteLength;\n    }\n  }\n\n  content._batchTable = new Cesium3DTileBatchTable(\n    content,\n    instancesLength,\n    batchTableJson,\n    batchTableBinary\n  );\n\n  var gltfByteLength = byteStart + byteLength - byteOffset;\n  if (gltfByteLength === 0) {\n    throw new RuntimeError(\n      \"glTF byte length is zero, i3dm must have a glTF to instance.\"\n    );\n  }\n\n  var gltfView;\n  if (byteOffset % 4 === 0) {\n    gltfView = new Uint8Array(arrayBuffer, byteOffset, gltfByteLength);\n  } else {\n    // Create a copy of the glb so that it is 4-byte aligned\n    Instanced3DModel3DTileContentEx._deprecationWarning(\n      \"i3dm-glb-unaligned\",\n      \"The embedded glb is not aligned to a 4-byte boundary.\"\n    );\n    gltfView = new Uint8Array(\n      uint8Array.subarray(byteOffset, byteOffset + gltfByteLength)\n    );\n  }\n\n  var tileset = content._tileset;\n\n  // Create model instance collection\n  var collectionOptions = {\n\n    dracoDecoderPath: MeshVisModel.DefaultDracoDecoderPath,\n    visualizer,//MeshVisualizer\n    instances: new Array(instancesLength),\n    instancedAttributes: [{\n      name: 'batchId',\n      default: 0\n    }],\n    batchTable: content._batchTable,\n    cull: false, // Already culled by 3D Tiles\n    url: undefined,\n    requestType: RequestType.TILES3D,\n    gltf: undefined,\n    basePath: undefined,\n    incrementallyLoadTextures: false,\n    upAxis: tileset._gltfUpAxis,\n    forwardAxis: Axis.X,\n    opaquePass: Pass.CESIUM_3D_TILE, // Draw opaque portions during the 3D Tiles pass\n    // pickIdLoaded: getPickIdCallback(content),\n    imageBasedLightingFactor: tileset.imageBasedLightingFactor,\n    lightColor: tileset.lightColor,\n    luminanceAtZenith: tileset.luminanceAtZenith,\n    sphericalHarmonicCoefficients: tileset.sphericalHarmonicCoefficients,\n    specularEnvironmentMaps: tileset.specularEnvironmentMaps,\n  };\n\n  if (gltfFormat === 0) {\n    var gltfUrl = getStringFromTypedArray(gltfView);\n\n    // We need to remove padding from the end of the model URL in case this tile was part of a composite tile.\n    // This removes all white space and null characters from the end of the string.\n    gltfUrl = gltfUrl.replace(/[\\s\\0]+$/, \"\");\n    collectionOptions.url = content._resource.getDerivedResource({\n      url: gltfUrl,\n    });\n  } else {\n    collectionOptions.gltf = gltfView;\n    collectionOptions.basePath = content._resource.clone();\n  }\n\n  var eastNorthUp = featureTable.getGlobalProperty(\"EAST_NORTH_UP\");\n\n  var rtcCenter;\n  var rtcCenterArray = featureTable.getGlobalProperty(\n    \"RTC_CENTER\",\n    ComponentDatatype.FLOAT,\n    3\n  );\n  if (defined(rtcCenterArray)) {\n    rtcCenter = Cartesian3.unpack(rtcCenterArray);\n  }\n\n  var instances = collectionOptions.instances;\n  var instancePosition = new Cartesian3();\n  var instancePositionArray = new Array(3);\n  var instanceNormalRight = new Cartesian3();\n  var instanceNormalUp = new Cartesian3();\n  var instanceNormalForward = new Cartesian3();\n  var instanceRotation = new Matrix3();\n  var instanceQuaternion = new Quaternion();\n  var instanceScale = new Cartesian3();\n  var instanceTranslationRotationScale = new TranslationRotationScale();\n  var instanceTransform = new Matrix4();\n  for (var i = 0; i < instancesLength; i++) {\n    // Get the instance position\n    var position = featureTable.getProperty(\n      \"POSITION\",\n      ComponentDatatype.FLOAT,\n      3,\n      i,\n      propertyScratch1\n    );\n    if (!defined(position)) {\n      position = instancePositionArray;\n      var positionQuantized = featureTable.getProperty(\n        \"POSITION_QUANTIZED\",\n        ComponentDatatype.UNSIGNED_SHORT,\n        3,\n        i,\n        propertyScratch1\n      );\n      if (!defined(positionQuantized)) {\n        throw new RuntimeError(\n          \"Either POSITION or POSITION_QUANTIZED must be defined for each instance.\"\n        );\n      }\n      var quantizedVolumeOffset = featureTable.getGlobalProperty(\n        \"QUANTIZED_VOLUME_OFFSET\",\n        ComponentDatatype.FLOAT,\n        3\n      );\n      if (!defined(quantizedVolumeOffset)) {\n        throw new RuntimeError(\n          \"Global property: QUANTIZED_VOLUME_OFFSET must be defined for quantized positions.\"\n        );\n      }\n      var quantizedVolumeScale = featureTable.getGlobalProperty(\n        \"QUANTIZED_VOLUME_SCALE\",\n        ComponentDatatype.FLOAT,\n        3\n      );\n      if (!defined(quantizedVolumeScale)) {\n        throw new RuntimeError(\n          \"Global property: QUANTIZED_VOLUME_SCALE must be defined for quantized positions.\"\n        );\n      }\n      for (var j = 0; j < 3; j++) {\n        position[j] =\n          (positionQuantized[j] / 65535.0) * quantizedVolumeScale[j] +\n          quantizedVolumeOffset[j];\n      }\n    }\n    Cartesian3.unpack(position, 0, instancePosition);\n    if (defined(rtcCenter)) {\n      Cartesian3.add(instancePosition, rtcCenter, instancePosition);\n    }\n    instanceTranslationRotationScale.translation = instancePosition;\n\n    // Get the instance rotation\n    var normalUp = featureTable.getProperty(\n      \"NORMAL_UP\",\n      ComponentDatatype.FLOAT,\n      3,\n      i,\n      propertyScratch1\n    );\n    var normalRight = featureTable.getProperty(\n      \"NORMAL_RIGHT\",\n      ComponentDatatype.FLOAT,\n      3,\n      i,\n      propertyScratch2\n    );\n    var hasCustomOrientation = false;\n    if (defined(normalUp)) {\n      if (!defined(normalRight)) {\n        throw new RuntimeError(\n          \"To define a custom orientation, both NORMAL_UP and NORMAL_RIGHT must be defined.\"\n        );\n      }\n      Cartesian3.unpack(normalUp, 0, instanceNormalUp);\n      Cartesian3.unpack(normalRight, 0, instanceNormalRight);\n      hasCustomOrientation = true;\n    } else {\n      var octNormalUp = featureTable.getProperty(\n        \"NORMAL_UP_OCT32P\",\n        ComponentDatatype.UNSIGNED_SHORT,\n        2,\n        i,\n        propertyScratch1\n      );\n      var octNormalRight = featureTable.getProperty(\n        \"NORMAL_RIGHT_OCT32P\",\n        ComponentDatatype.UNSIGNED_SHORT,\n        2,\n        i,\n        propertyScratch2\n      );\n      if (defined(octNormalUp)) {\n        if (!defined(octNormalRight)) {\n          throw new RuntimeError(\n            \"To define a custom orientation with oct-encoded vectors, both NORMAL_UP_OCT32P and NORMAL_RIGHT_OCT32P must be defined.\"\n          );\n        }\n        AttributeCompression.octDecodeInRange(\n          octNormalUp[0],\n          octNormalUp[1],\n          65535,\n          instanceNormalUp\n        );\n        AttributeCompression.octDecodeInRange(\n          octNormalRight[0],\n          octNormalRight[1],\n          65535,\n          instanceNormalRight\n        );\n        hasCustomOrientation = true;\n      } else if (eastNorthUp) {\n        Transforms.eastNorthUpToFixedFrame(\n          instancePosition,\n          Ellipsoid.WGS84,\n          instanceTransform\n        );\n        Matrix4.getMatrix3(instanceTransform, instanceRotation);\n      } else {\n        Matrix3.clone(Matrix3.IDENTITY, instanceRotation);\n      }\n    }\n    if (hasCustomOrientation) {\n      Cartesian3.cross(\n        instanceNormalRight,\n        instanceNormalUp,\n        instanceNormalForward\n      );\n      Cartesian3.normalize(instanceNormalForward, instanceNormalForward);\n      Matrix3.setColumn(\n        instanceRotation,\n        0,\n        instanceNormalRight,\n        instanceRotation\n      );\n      Matrix3.setColumn(\n        instanceRotation,\n        1,\n        instanceNormalUp,\n        instanceRotation\n      );\n      Matrix3.setColumn(\n        instanceRotation,\n        2,\n        instanceNormalForward,\n        instanceRotation\n      );\n    }\n    Quaternion.fromRotationMatrix(instanceRotation, instanceQuaternion);\n    instanceTranslationRotationScale.rotation = instanceQuaternion;\n\n    // Get the instance scale\n    instanceScale = Cartesian3.fromElements(1.0, 1.0, 1.0, instanceScale);\n    var scale = featureTable.getProperty(\n      \"SCALE\",\n      ComponentDatatype.FLOAT,\n      1,\n      i\n    );\n    if (defined(scale)) {\n      Cartesian3.multiplyByScalar(instanceScale, scale, instanceScale);\n    }\n    var nonUniformScale = featureTable.getProperty(\n      \"SCALE_NON_UNIFORM\",\n      ComponentDatatype.FLOAT,\n      3,\n      i,\n      propertyScratch1\n    );\n    if (defined(nonUniformScale)) {\n      instanceScale.x *= nonUniformScale[0];\n      instanceScale.y *= nonUniformScale[1];\n      instanceScale.z *= nonUniformScale[2];\n    }\n    instanceTranslationRotationScale.scale = instanceScale;\n\n    // Get the batchId\n    var batchId = featureTable.getProperty(\n      \"BATCH_ID\",\n      ComponentDatatype.UNSIGNED_SHORT,\n      1,\n      i\n    );\n    if (!defined(batchId)) {\n      // If BATCH_ID semantic is undefined, batchId is just the instance number\n      batchId = i;\n    }\n\n    // Create the model matrix and the instance\n    Matrix4.fromTranslationRotationScale(\n      instanceTranslationRotationScale,\n      instanceTransform\n    );\n    var modelMatrix = instanceTransform.clone();\n    instances[i] = {\n      modelMatrix: modelMatrix,\n      batchId: batchId,\n    };\n  }\n\n  // ModelInstanceCollection\n  content._modelInstanceCollection = new MeshVisModel(\n    collectionOptions\n  );\n}\n\nfunction createFeatures(content) {\n  var featuresLength = content.featuresLength;\n  if (!defined(content._features) && featuresLength > 0) {\n    var features = new Array(featuresLength);\n    for (var i = 0; i < featuresLength; ++i) {\n      features[i] = new Cesium3DTileFeature(content, i);\n    }\n    content._features = features;\n  }\n}\n\nInstanced3DModel3DTileContentEx.prototype.hasProperty = function (batchId, name) {\n  return this._batchTable.hasProperty(batchId, name);\n};\n\nInstanced3DModel3DTileContentEx.prototype.getFeature = function (batchId) {\n  var featuresLength = this.featuresLength;\n  //>>includeStart('debug', pragmas.debug);\n  if (!defined(batchId) || batchId < 0 || batchId >= featuresLength) {\n    throw new DeveloperError(\n      \"batchId is required and between zero and featuresLength - 1 (\" +\n      (featuresLength - 1) +\n      \").\"\n    );\n  }\n  //>>includeEnd('debug');\n\n  createFeatures(this);\n  return this._features[batchId];\n};\n\nInstanced3DModel3DTileContentEx.prototype.applyDebugSettings = function (\n  enabled,\n  color\n) {\n  color = enabled ? color : Color.WHITE;\n  this._batchTable.setAllColor(color);\n};\n\nInstanced3DModel3DTileContentEx.prototype.applyStyle = function (style) {\n  this._batchTable.applyStyle(style);\n};\n\nInstanced3DModel3DTileContentEx.prototype.update = function (\n  tileset,\n  frameState\n) {\n  // var commandStart = frameState.commandList.length;\n\n  // In the PROCESSING state we may be calling update() to move forward\n  // the content's resource loading.  In the READY state, it will\n  // actually generate commands.\n  this._batchTable.update(tileset, frameState);\n  var modelInstanceCollection = this._modelInstanceCollection,\n    tileset = this._tileset;\n  modelInstanceCollection.modelMatrix = this._tile.computedTransform;\n  modelInstanceCollection.shadows = tileset.shadows;\n  modelInstanceCollection.lightColor = tileset.lightColor;\n  modelInstanceCollection.luminanceAtZenith = tileset.luminanceAtZenith;\n  modelInstanceCollection.sphericalHarmonicCoefficients = tileset.sphericalHarmonicCoefficients;\n  modelInstanceCollection.specularEnvironmentMaps = tileset.specularEnvironmentMaps;\n  modelInstanceCollection.debugWireframe = tileset.debugWireframe;\n\n  // var model = this._modelInstanceCollection._model;\n\n  // if (defined(model)) {\n  //   // Update for clipping planes\n  //   var tilesetClippingPlanes = this._tileset.clippingPlanes;\n  //   model.clippingPlanesOriginMatrix = this._tileset.clippingPlanesOriginMatrix;\n  //   if (defined(tilesetClippingPlanes) && this._tile.clippingPlanesDirty) {\n  //     // Dereference the clipping planes from the model if they are irrelevant - saves on shading\n  //     // Link/Dereference directly to avoid ownership checks.\n  //     model._clippingPlanes =\n  //       tilesetClippingPlanes.enabled && this._tile._isClipped\n  //         ? tilesetClippingPlanes\n  //         : undefined;\n  //   }\n\n  //   // If the model references a different ClippingPlaneCollection due to the tileset's collection being replaced with a\n  //   // ClippingPlaneCollection that gives this tile the same clipping status, update the model to use the new ClippingPlaneCollection.\n  //   if (\n  //     defined(tilesetClippingPlanes) &&\n  //     defined(model._clippingPlanes) &&\n  //     model._clippingPlanes !== tilesetClippingPlanes\n  //   ) {\n  //     model._clippingPlanes = tilesetClippingPlanes;\n  //   }\n  // }\n\n  // this._modelInstanceCollection.update(frameState);\n\n  // // If any commands were pushed, add derived commands\n  // var commandEnd = frameState.commandList.length;\n  // if (\n  //   commandStart < commandEnd &&\n  //   (frameState.passes.render || frameState.passes.pick)\n  // ) {\n  //   this._batchTable.addDerivedCommands(frameState, commandStart, false);\n  // }\n};\n\nInstanced3DModel3DTileContentEx.prototype.isDestroyed = function () {\n  return false;\n};\n\nInstanced3DModel3DTileContentEx.prototype.destroy = function () {\n  this._modelInstanceCollection =\n    this._modelInstanceCollection && this._modelInstanceCollection.destroy();\n  this._batchTable = this._batchTable && this._batchTable.destroy();\n  this._visualizer = null;\n  return destroyObject(this);\n};\nexport { Instanced3DModel3DTileContentEx };\n",
    "\nimport GeometryUtils from  \"../../core/Source/GeometryUtils.js\";\n\n// import { geojsonHelper, GenericWorker, traverse } from \"@mesh-3d/utils\";\nimport geojsonHelper from  \"../../utils/Source/geojsonHelper.js\";\n\nimport GenericWorker from  \"../../utils/Source/GenericWorker.js\";\n\nimport traverse from  \"../../utils/Source/traverse.js\";\n\nimport QuadtreeLODUtil from  \"./QuadtreeLODUtil.js\";\n\nimport QuadtreeLOD from  \"./QuadtreeLOD.js\";\n\n\nfunction _getLodContentProvider(root, styleFilter) {\n\n    return {\n        requestContent(contentSet, rtcCenter) {\n            let groups = [], materialMap = new WeakMap();\n\n            function createContent(content) {\n\n                let group, style = {}, feature = content.uri;\n\n                let featureId = feature.properties.featureId;\n                styleFilter(feature, style);\n                let geometry = BuildingVector3DLoader.parseFeature(feature, featureId, style);\n                let material = style.material;\n\n                if (rtcCenter) {\n                    if (!(geometry instanceof Cesium.Geometry)) {\n                        geometry = geometry.constructor.createGeometry(geometry);\n                    }\n                    let positions = geometry.attributes.position.values;\n                    for (let i = 0; i < positions.length; i += 3) {\n                        positions[i] -= rtcCenter.x;\n                        positions[i + 1] -= rtcCenter.y;\n                        positions[i + 2] -= rtcCenter.z;\n                    }\n                }\n\n                if (materialMap.has(material)) {\n                    group = materialMap.get(material);\n                } else {\n                    group = {\n                        material: material,\n                        geometries: []\n                    };\n                    groups.push(group)\n                    materialMap.set(material, group);\n                }\n                group.geometries.push(geometry);\n            }\n\n            let batchList = [], batch = [], batchSize = 100;\n            batchList.push(batch);\n            contentSet.contain.forEach(content => {\n                if (batch.length > batchSize) {\n                    batch = [];\n                    batchList.push(batch);\n                }\n                batch.push(content)\n            });\n            contentSet.intersect.forEach(content => {\n                if (batch.length > batchSize) {\n                    batch = [];\n                    batchList.push(batch);\n                }\n                batch.push(content)\n            });\n\n            return new GenericWorker(batchList, batch => {\n                batch.forEach(createContent);\n            }).run().then(() => {\n\n                let object3d = new THREE.Object3D();\n                groups.forEach(group => {\n                    let geometry = GeometryUtils.mergeGeometries(group.geometries);\n                    geometry = GeometryUtils.toBufferGeometry3js(geometry)\n                    let material = group.material;\n                    let mesh = new THREE.Mesh(geometry, material);\n\n                    mesh.pickObject = {\n                        id: mesh,\n                        mesh: mesh,\n                        primitive: root\n                    }\n                    object3d.add(mesh);\n\n                    mesh.matrixAutoUpdate = false;\n                    mesh.modelMatrixNeedsUpdate = false;\n                    mesh.frustumCulled = false;\n\n                    materialMap.delete(material)\n                });\n                object3d.matrixAutoUpdate = false;\n                object3d.modelMatrixNeedsUpdate = false;\n                object3d.frustumCulled = false;\n                groups.splice(0);\n                contentSet.contain.splice(0)\n                contentSet.intersect.splice(0)\n                return object3d;\n            });\n        }\n    };\n}\n\nexport default class BuildingVector3DLoader {\n\n    /**\n     * \n     * @param {string} url \n     * @returns {Promise<geojson.PolygonFeatureCollection>}\n     */\n    static loadGeojson(url) {\n        return Cesium.Resource.fetchJson(url)\n    }\n\n    /**\n     * \n     * @param {string} url \n     * @param {(feature:geojson.Feature<geojson.Polygon|geojson.MultiPolygon>,style:{\n            height?: number;\n            extrudedHeight?: number;\n            vertexFormat?: VertexFormat;\n            stRotation?: number;\n            ellipsoid?: Ellipsoid;\n            granularity?: number;\n            perPositionHeight?: boolean;\n            closeTop?: boolean;\n            closeBottom?: boolean;\n            arcType?: ArcType;\n            material?:MeshMaterial\n     })=>void}styleFilter\n     * @param {(progress:number)=>void}onProgress\n     * @param {(geojson:geojson.FeatureCollection<geojson.Polygon|geojson.MultiPolygon>)=>void}[onDataLoad]\n     * @param {object}[options]\n     * @param {number}[options.minRange=2]\n     * @param {number}[options.maxLevel=5]\n     * @param {number}[options.zSliceLevel=6]\n     * @returns {Promise<QuadtreeLOD>}\n     */\n    static load(url, styleFilter, onProgress, onDataLoad, options) {\n        if (typeof onDataLoad != 'function') {\n            options = onDataLoad\n            onDataLoad = null;\n        }\n        return this.loadGeojson(url).then((geojson) => {\n            console.time('calcBBox')\n            geojsonHelper.calcBBox(geojson);\n            console.timeEnd('calcBBox')\n            // console.log(geojson);\n            if (typeof onDataLoad == 'function') {\n                onDataLoad(geojson)\n            }\n\n            return this.parse(geojson, styleFilter, onProgress, options);\n\n        })\n    }\n\n    static parse(geojson, styleFilter, onProgress, options) {\n        if (onProgress && typeof onProgress != 'function') {\n            options = onProgress, onProgress = null\n        }\n        if (!onProgress) onProgress = function (progress) { };\n\n        options = options || {};\n        options.useRtcCenter = typeof options.useRtcCenter == 'boolean' ? options.useRtcCenter : true;\n        console.time('process contentSet')\n        const getLodContentProvider = options.getLodContentProvider || _getLodContentProvider;\n        let contentSet = [], rootRectangle, rootMaximumHeight = 0.0, minimumHeight = 0.1;;\n\n        let invalidCount = 0;\n        let batchList = [], batch = [],\n            batchSize = geojson.features && geojson.features.length > 100 ? geojson.features.length / 100 : 100;\n        batchList.push(batch);\n\n        geojsonHelper.featureEach(geojson, (feature, featureId) => {\n            if (!feature.geometry || !feature.geometry.coordinates.length) {\n                invalidCount++\n                return;\n            }\n            if (batch.length > batchSize) {\n                batch = [];\n                batchList.push(batch)\n            }\n\n            batch.push({\n                feature: feature,\n                id: featureId\n            })\n        });\n\n        const { Rectangle, TileBoundingRegion, Color } = Cesium;\n\n        let processWorker = new GenericWorker(batchList, batch => {\n\n            for (let i = 0; i < batch.length; i++) {\n                const taskData = batch[i];\n\n                let feature = taskData.feature,\n                    featureId = taskData.id;\n\n                try {\n                    let bbox = feature.geometry.bbox;\n                    let maximumHeight = feature.properties.Floor * 10;\n\n                    let rectangle = Rectangle.fromDegrees(bbox[0], bbox[1], bbox[2], bbox[3])\n                    let region = new TileBoundingRegion({\n                        rectangle: rectangle,\n                        minimumHeight: minimumHeight,\n                        maximumHeight: maximumHeight\n                    });\n\n                    feature.properties = feature.properties || {};\n                    feature.properties.featureId = featureId;\n                    let content = {\n                        uri: feature,\n                        boundingVolume: {\n                            region: region,\n                            sphere: region.boundingSphere\n                        },\n                        showDebugVolume: false\n                    };\n                    contentSet.push(content);\n\n                    rootMaximumHeight = Math.max(rootMaximumHeight, maximumHeight);\n                    if (!rootRectangle) {\n                        rootRectangle = rectangle.clone()\n                    } else {\n                        Rectangle.union(rootRectangle, rectangle, rootRectangle);\n                    }\n\n                } catch (err) {\n                    console.error(err);\n                    throw err\n                }\n            }\n\n        })\n\n        let totalProgress = 0;\n        return processWorker.run((progress) => {\n            totalProgress = progress * 0.4;\n            onProgress(totalProgress);\n\n        }).then(() => {\n            totalProgress = 40;\n\n            onProgress(totalProgress);\n            // console.timeEnd('process contentSet');\n\n            try {\n                let rootRegion = new TileBoundingRegion({\n                    rectangle: rootRectangle,\n                    minimumHeight: minimumHeight,\n                    maximumHeight: rootMaximumHeight\n                });\n\n                // console.time('QuadtreeLODUtil.create');\n\n                let scale = rootRectangle.width / rootRectangle.height;\n                let xSize = 4, ySize = 4, zSize = 2;\n                if (scale > 1) {\n                    xSize = parseInt(Math.ceil(ySize * scale));\n                } else {\n                    ySize = parseInt(Math.ceil(xSize / scale));\n                }\n\n                var root = QuadtreeLODUtil.create({\n                    rootBoundingVolume: {\n                        region: rootRegion\n                    },\n                    maxLevel: options.maxLevel || 5,\n                    zSliceLevel: options.zSliceLevel || 6,\n                    xSize: xSize,\n                    ySize: ySize,\n                    zSize: zSize,\n                    minRange: options.minRange || 2,\n                    debugVolume: options.debugVolume,\n                    showDebugVolume: options.showDebugVolume,\n                    debugVolumeColor: options.debugVolumeColor || Color.CYAN.clone(),\n                    rtcCenter: options.useRtcCenter && rootRegion.boundingSphere.center,\n                    recursive: false\n                })\n\n                let rootTiles = root.children.slice();\n                let createWorker = new GenericWorker(rootTiles, rootTile => {\n                    rootTile._createLODTreeDelay(true);\n                });\n\n                return createWorker.run((progress) => {\n                    onProgress(progress * 0.2 + totalProgress);\n\n                }).then(() => {\n\n                    totalProgress = 60;\n                    onProgress(totalProgress);\n\n                    // console.timeEnd('QuadtreeLODUtil.create')\n\n                    // console.time('QuadtreeLODUtil.filterContents');\n\n                    //L1\n                    rootTiles = root.children.slice();\n                    let filterL1Worker = new GenericWorker(rootTiles, rootTile => {\n                        QuadtreeLODUtil.filterContents(contentSet, rootTile, false);\n                    })\n\n                    return filterL1Worker.run((progress) => {\n                        onProgress(progress * 0.1 + totalProgress);\n\n                    }).then(() => {//L2~LN\n\n                        totalProgress = 70;\n                        onProgress(totalProgress);\n\n                        let tileList = [];\n                        root.children.forEach(rootTile => {\n                            traverse(rootTile.children, tile => {\n                                tile.refine = 'ADD';\n                                if (tile.level > 0) tileList.push(tile);\n                            })\n                        })\n\n                        tileList.sort((a, b) => {\n                            return a.level - b.level;\n                        })\n\n                        batchList = [];\n                        batch = [];\n                        batchList.push(batch);\n\n                        batchSize = 100;//tileList.length > 20 ? tileList.length / 100 : 20;\n\n                        tileList.forEach(tile => {\n                            if (batch.length > batchSize) {\n                                batch = [];\n                                batchList.push(batch);\n                            }\n                            batch.push(tile);\n                        });\n\n                        let filterWorker = new GenericWorker(batchList, batch => {\n\n                            for (let i = 0; i < batch.length; i++) {\n                                let tile = batch[i];\n                                let currentContentSet = //tile.parent && tile.parent._getContentSetBeforeFilter ? \n                                    tile.parent._getContentSetBeforeFilter() //: contentSet\n                                QuadtreeLODUtil.filterContents(currentContentSet, tile, false);\n                            }\n                        });\n\n                        return filterWorker.run((progress) => {\n                            onProgress(progress * 0.3 + totalProgress);\n\n                        }).then(() => {\n                            totalProgress = 100;\n\n                            // console.timeEnd('QuadtreeLODUtil.filterContents');\n\n                            let lodContentProvider = getLodContentProvider(root, styleFilter)\n\n                            root.children.forEach(child => {\n                                traverse(child, (node) => {\n                                    node.contentProvider = lodContentProvider;\n                                })\n                            });\n                            onProgress(totalProgress);\n                            return root;\n                        })\n                    })\n\n                })\n\n            } catch (e) {\n                console.error(e);\n                throw e\n            }\n        })\n\n    }\n\n    /**\n     * \n     * @param {geojson.Feature<geojson.Polygon|geojson.MultiPolygon>} feature\n     * @param {number}featureId\n     * @param {{\n            height?: number;\n            extrudedHeight?: number;\n            vertexFormat?: VertexFormat;\n            stRotation?: number;\n            ellipsoid?: Ellipsoid;\n            granularity?: number;\n            perPositionHeight?: boolean;\n            closeTop?: boolean;\n            closeBottom?: boolean;\n            arcType?: ArcType;\n     }}style\n     * @returns {Cesium.Geometry} result \n     */\n    static parseFeature(feature, featureId, style) {\n        if (!feature.geometry) return;\n\n        let geometry = this.parseGeometry(feature.geometry, style);\n        let ptCount = geometry.attributes.position.values.length;\n        let batchIds = new Float32Array(ptCount);\n        batchIds.fill(featureId);\n\n        const _Cesium = Cesium;\n        let batchId = new _Cesium.GeometryAttribute({\n            componentDatatype: _Cesium.ComponentDatatype.FLOAT,\n            componentsPerAttribute: 1,\n            values: batchIds\n        });\n        geometry.attributes.batchId = batchId;\n        return geometry;\n    }\n\n    /**\n     * \n     * @param {geojson.Polygon|geojson.MultiPolygon|geojson.MultiGeometry<geojson.Polygon|geojson.MultiPolygon>} geometry \n     */\n    static parseGeometry(geometry, options) {\n        let type = geometry.type;\n\n        if (type == 'Polygon') {\n            geometry = this.parsePolygon(geometry.coordinates, options);\n\n        } else if (type == 'MultiPolygon') {\n            let geometries = geometry.coordinates.map(polygon => {\n                return this.parsePolygon(polygon, options);\n            });\n            geometry = GeometryUtils.mergeGeometries(geometries);\n\n        } else if (type == 'MultiGeometry') {\n            let geometries = geometry.geometry.map(geometry => {\n                return this.parseGeometry(geometry, options);\n            })\n            geometry = GeometryUtils.mergeGeometries(geometries);\n\n        }\n\n        return geometry;\n    }\n\n    /**\n     * \n     * @param {geojson.Polygon} coordinates \n     * @param {{\n        height?: number;\n        extrudedHeight?: number;\n        vertexFormat?: VertexFormat;\n        stRotation?: number;\n        ellipsoid?: Ellipsoid;\n        granularity?: number;\n        perPositionHeight?: boolean;\n        closeTop?: boolean;\n        closeBottom?: boolean;\n        arcType?: ArcType;\n     * }}options\n     * @returns {Cesium.Geometry} result \n     */\n    static parsePolygon(coordinates, options) {\n        const { PolygonHierarchy, PolygonGeometry } = Cesium;\n        let positions = this.transformCoordinates(coordinates[0]), holes = [];\n        for (let i = 1; i < coordinates.length; i++) {\n            var contour = coordinates[i];\n            contour = new PolygonHierarchy(this.transformCoordinates(contour))\n            holes.push(contour);\n        }\n\n        let geometryCls = PolygonGeometry\n        //ExtrudedPolygonGeometry;\n\n        let geometry = new geometryCls(\n            Object.assign({\n                polygonHierarchy: new PolygonHierarchy(\n                    positions, holes\n                ),\n                generateExtrudedUvNormal: true\n            }, options)\n        );\n        geometry = geometryCls.createGeometry(geometry);\n\n        return geometry;\n    }\n\n    static transformCoordinates(contour) {\n\n        var cw = geojsonHelper.isClockWise(contour)\n        contour = contour.map(pt => {\n            return Cesium.Cartesian3.fromDegrees(pt[0], pt[1], pt[2] || 0)\n        })\n        if (!cw) {\n            contour.reverse();\n        }\n        return contour;\n    }\n}\n",
    "import { GeometryUtils } from  \"../../core/index.js\";\n\nimport MeshVisualizer from  \"../../core/Source/MeshVisualizer.js\";\n\nimport CesiumRTCHelper from  \"./CesiumRTCHelper.js\";\n\n\nvar quat;\nvar position;\nvar mat3;\nvar dir;\nvar mat4;\nvar dirInverse = {\n    x: 0, y: 0, z: -1\n}\nvar quat2;\nvar axis = {\n    x: 0, y: 1, z: 0\n};\n\nclass CameraHelper {\n    constructor() {\n        this.visualizer = new MeshVisualizer();\n        /**\n         * @type {WeakMap<Cesium.Camera,Mesh>}\n         */\n        this.cameraMeshes = new WeakMap();\n        this.cameras = [];\n        this.show = true;\n    }\n    update(frameState) {\n        if (!this.show) return;\n        this.visualizer.update(frameState);\n    }\n    removeCamera(camera) {\n        if (this.cameraMeshes.has(camera)) {\n            var mesh = this.cameraMeshes.get(camera);\n            if (this.visualizer.children.indexOf(mesh.frustum) != -1)\n                this.visualizer.remove(mesh.frustum);\n            if (this.visualizer.children.indexOf(mesh.direction) != -1)\n                this.visualizer.remove(mesh.direction);\n            this.cameraMeshes.delete(camera)\n        }\n    }\n    /**\n     * \n     * @param {Cesium.Camera} camera \n     */\n    addCamera(camera, color, dirColor, matrix) {\n        if (this.cameraMeshes.has(camera)) {\n            var mesh = this.cameraMeshes.get(camera);\n            if (this.visualizer.children.indexOf(mesh.frustum) == -1)\n                this.visualizer.add(mesh.frustum);\n            if (this.visualizer.children.indexOf(mesh.direction) == -1)\n                this.visualizer.add(mesh.direction);\n            return;\n        }\n        var geometry = this.createGeometry(camera, matrix);\n\n        var outlineMaterial = new THREE.LineBasicMaterial({\n            color: (color || Cesium.Color.YELLOW).toCssColorString(),\n            side: THREE.DoubleSide\n        });\n        var dirMaterial = new THREE.LineBasicMaterial({\n            color: (dirColor || Cesium.Color.RED).toCssColorString(),\n            side: THREE.DoubleSide\n        });\n        var frustumOutline = new THREE.LineSegments(geometry.frustumOutline, outlineMaterial);\n        var directionLine = new THREE.LineSegments(geometry.direction, dirMaterial);\n\n        directionLine.frustumCulled = false\n        frustumOutline.frustumCulled = false\n\n        directionLine.up.set(0, 0, 1)\n        frustumOutline.up.set(0, 0, 1)\n\n        this.visualizer.add(frustumOutline);\n        this.visualizer.add(directionLine);\n\n        this.cameraMeshes.set(camera, {\n            frustum: frustumOutline,\n            direction: directionLine\n        });\n\n        // camera.changed.addEventListener(()=>{\n        //     this.updateCamera(camera)\n        // })\n        this.cameras.push(camera);\n    }\n\n    createGeometry(camera, matrix) {\n        const { Matrix4, Cartesian3, Quaternion, Matrix3, FrustumOutlineGeometry } = Cesium;\n\n        matrix = matrix || camera.inverseViewMatrix;\n        if (matrix.elements) matrix = matrix.elements;\n\n        mat3 = Matrix4.getMatrix3(matrix, mat3 || new Matrix3());\n        quat = Quaternion.fromRotationMatrix(mat3, quat || new Quaternion());\n        quat2 = Quaternion.fromAxisAngle(axis, Math.PI, quat2);\n        Quaternion.multiply(quat, quat2, quat);\n\n        position = Matrix4.getTranslation(camera.inverseViewMatrix, position || new Cartesian3());\n\n        var frustumOutlineGeometry = new FrustumOutlineGeometry({\n            frustum: camera.frustum,\n            origin: position,\n            orientation: quat\n        });\n\n        //增加观察方向辅助线\n\n        return {\n            direction: GeometryUtils.toBufferGeometry3js(this.createDirGeometry(position, mat3, camera.frustum.far)),\n            frustumOutline: GeometryUtils.toBufferGeometry3js(FrustumOutlineGeometry.createGeometry(frustumOutlineGeometry))\n        };\n    }\n    createDirGeometry(position, rotationMatrix, far) {\n        const { Matrix4, Cartesian3, Geometry, ComponentDatatype } = Cesium;\n\n        mat4 = Matrix4.IDENTITY.clone(mat4);\n        Matrix4.multiplyByMatrix3(mat4, rotationMatrix, mat4);\n        if (!dir) dir = new Cartesian3();\n        Matrix4.multiplyByPoint(mat4, dirInverse, dir);\n        Cartesian3.multiplyByScalar(dir, far || 50000000000, dir);\n        var target = Cartesian3.add(position, dir, dir);\n\n        var positions = new Float32Array(2 * 3);\n        Cartesian3.pack(position, positions, 0);\n        Cartesian3.pack(target, positions, 3);\n        var indices = new Uint8Array([0, 1]);\n        var geometry = new Geometry({\n            attributes: {\n                position: {\n                    componentDatatype: ComponentDatatype.FLOAT,\n                    componentsPerAttribute: 3,\n                    values: positions\n                }\n            },\n            indices: indices\n        })\n        return geometry;\n    }\n    updateCamera(camera, matrix) {\n        var mesh = this.cameraMeshes.get(camera);\n        var geometry = this.createGeometry(camera, matrix);\n        mesh.frustum.geometry = geometry.frustum\n        mesh.frustum.geometry.needsUpdate = true;\n\n        mesh.direction.geometry = geometry.direction\n        mesh.direction.geometry.needsUpdate = true;\n    }\n}\n\nexport default CameraHelper",
    "\nvar scratchTranslationRtc;\nvar CESIUM_RTC_MODELVIEW = function (uniformState, model) {\n    // CESIUM_RTC extension\n    const { Matrix4, defined, Cartesian3 } = Cesium;\n\n    var mvRtc = new Matrix4();\n\n    if (!scratchTranslationRtc) scratchTranslationRtc = new Matrix4();\n    return function () {\n        if (defined(model._rtcCenter)) {\n            Matrix4.getTranslation(uniformState.model, scratchTranslationRtc);\n            Cartesian3.add(\n                scratchTranslationRtc,\n                model._rtcCenter,\n                scratchTranslationRtc\n            );\n            Matrix4.multiplyByPoint(\n                uniformState.view,\n                scratchTranslationRtc,\n                scratchTranslationRtc\n            );\n            return Matrix4.setTranslation(\n                uniformState.modelView,\n                scratchTranslationRtc,\n                mvRtc\n            );\n        }\n        return uniformState.modelView;\n    };\n}\n\nexport default function CesiumRTCHelper(object) {\n    var _rtcCenter = object._rtcCenter;\n    if (!_rtcCenter) {\n\n        var spheres = []\n        function getBoundingSphere(obj) {\n            var { geometry } = obj\n            if (!geometry) return\n            var boundingSphere = geometry.boundingSphere;\n            if (!boundingSphere) {\n                geometry.computeBoundingSphere()\n                boundingSphere = geometry.boundingSphere;\n            }\n            spheres.push(Cesium.BoundingSphere.clone(boundingSphere))\n        }\n\n        object.traverse(getBoundingSphere)\n\n        if (spheres.length) {\n            var allSphere = Cesium.BoundingSphere.fromBoundingSpheres(spheres)\n            object._rtcCenter = _rtcCenter = allSphere.center;\n        }\n    }\n    if (!_rtcCenter) return object;\n\n    function userCenter(obj) {\n        var { geometry } = obj\n        if (!geometry) return\n        var positionAttr = geometry.attributes.position\n        if (!positionAttr) return\n        var positions = positionAttr.array\n        for (let i = 0; i < positions.length; i += 3) {\n            positions[i] -= _rtcCenter.x\n            positions[i + 1] -= _rtcCenter.y\n            positions[i + 2] -= _rtcCenter.z\n        }\n    }\n    object.traverse(userCenter)\n\n    var uniformMapLoadedCallback = function (uniformMap, frameState) {\n        var cesiumRtcModelViewUniform = CESIUM_RTC_MODELVIEW(frameState.context.uniformState, object);\n        uniformMap.modelView = cesiumRtcModelViewUniform;\n        uniformMap.u_modelView = cesiumRtcModelViewUniform;\n        uniformMap.modelViewMatrix = cesiumRtcModelViewUniform;\n        uniformMap.u_modelViewMatrix = cesiumRtcModelViewUniform;\n    }\n\n    object.traverse(child => {\n        if (!child.geometry) return\n        child.uniformMapLoadedCallback = uniformMapLoadedCallback\n    })\n    if (object.geometry) {\n        object.uniformMapLoadedCallback = uniformMapLoadedCallback\n    }\n\n    return object\n}",
    "// import { Object3D } from \"../core/Object3D.js\";\nimport QuadtreeNode from  \"./QuadtreeNode.js\";\n\n\nexport default class IContentProvider {\n    /**\n     * \n     * @param {string|geojson.Feature|geojson.FeatureCollection|QuadtreeNode[]} uri \n     * @param {Cesium.Cartesian3} [rtcCenter] \n     * @returns {THREE.Object3D}\n     */\n    requestContent(uri, rtcCenter) {\n        throw new Error('IContentProvider.requestContent not implemented')\n    }\n}",
    "\nimport WebGLGeometries from  \"../../core/Source/webgl/WebGLGeometries.js\";\n\n\nvar _materialMapParameters = ['map', 'lightMap', 'bumpMap', 'aoMap', 'specularMap', 'alphaMap', 'envMap', 'normalMap', 'emissiveMap', 'displacementMap', 'metalnessMap', 'roughnessMap', 'transmissionMap', 'clearcoatNormalMap', 'clearcoatMap']\n/**\n * \n * @param {THREE.Texture|THREE.BufferGeometry|THREE.Mesh|THREE.MeshPhysicalMaterial} obj \n * @returns {number} in bytes\n */\nexport function memeoryOf(obj) {\n    var mem = 0;\n    if (obj.isTexture) {\n\n        var image = obj.image, pixelSize = 4;//obj.format == 1023 ? 4 : 3;\n        mem = image.width * image.height * pixelSize;\n\n    } else if (obj.isGeometry) {\n\n        var geometry = WebGLGeometries.get(obj);\n        var attributes = geometry.attributes;\n        for (const key in attributes) {\n            if (attributes[key]) {\n                var arrayView = attributes[key].array\n                mem += arrayView.buffer.byteLength;\n            }\n        }\n        if (obj.index) {\n            mem += obj.index.array.buffer.byteLength;\n        }\n\n    } else if (obj.isMesh) {\n\n        var geometryMem = memeoryOf(obj.geometry);\n        var materials = obj.material;\n        if (!Array.isArray(materials)) materials = [materials];\n        var meterialMem = 0;\n        materials.forEach(material => {\n            meterialMem += memeoryOf(material);\n        });\n        mem = meterialMem + geometryMem\n\n    } else if (obj.isMaterial) {\n\n        _materialMapParameters.forEach(name => {\n            var map = obj[name];\n            if (map) mem += memeoryOf(map);\n        })\n\n    } else if (obj.isObject3D) {\n\n        obj.children.forEach(child => {\n            mem += memeoryOf(child);\n        })\n    }\n\n    return mem;\n}\n/**\n * \n * @param {Cesium.AxisAlignedBoundingBox} boundingBox \n * @param {Cesium.Matrix4} modelMatrix \n * @returns {Cesium.TileBoundingRegion}\n */\nexport function boundingBoxToRegion(boundingBox, modelMatrix) {\n    const { Rectangle, Cartographic, Matrix4, Cartesian3, Ellipsoid, TileBoundingRegion } = Cesium;\n\n    var min = boundingBox.minimum, max = boundingBox.maximum;\n    var xs = [min.x, max.x], ys = [min.y, max.y], zs = [min.z, max.z],\n        p = new Cartesian3(0, 0, 0), pWC = new Cartesian3(), pnCart = new Cartographic();\n\n    var minLon = Math.PI * 2, maxLon = -minLon, minLat = Math.PI, maxLat = -minLat,\n        minimumHeight = Number.MAX_VALUE, maximumHeight = -minimumHeight;\n    for (let i = 0; i < xs.length; i++) {\n        p.x = xs[i];\n        for (let j = 0; j < ys.length; j++) {\n            p.y = ys[j];\n            for (let k = 0; k < zs.length; k++) {\n                p.z = zs[k];\n\n                Matrix4.multiplyByPoint(modelMatrix, p, pWC);\n                Cartographic.fromCartesian(pWC, Ellipsoid.WGS84, pnCart);\n\n                minLon = Math.min(pnCart.longitude, minLon)\n                maxLon = Math.max(pnCart.longitude, maxLon)\n                minLat = Math.min(pnCart.latitude, minLat)\n                maxLat = Math.max(pnCart.latitude, maxLat)\n                minimumHeight = Math.min(pnCart.height, minimumHeight)\n                maximumHeight = Math.max(pnCart.height, maximumHeight)\n            }\n        }\n    }\n\n    var rectangle = Rectangle.fromRadians(minLon, minLat, maxLon, maxLat)\n\n    return new TileBoundingRegion({\n        rectangle: rectangle,\n        minimumHeight: minimumHeight,\n        maximumHeight: maximumHeight,\n        ellipsoid: Ellipsoid.WGS84\n    });\n\n}\n\nexport function getSurfacePosition(positionWC) {\n    const _Cesium = Cesium;\n    var positionCartographic = _Cesium.Cartographic.fromCartesian(positionWC);\n    var positionSurface = _Cesium.Cartesian3.fromRadians(positionCartographic.longitude, positionCartographic.latitude, 0)\n    return positionSurface;\n}\n\nvar _scratchTileContainsRay;\n/**\n * \n * @param {{\n * region?:Cesium.TileBoundingRegion\n * boundingSphere?:Cesium.BoundingSphere\n * boundingSphereWC?:Cesium.BoundingSphere\n * }} tile \n * @param {Cesium.Cartesian3} positionSurface \n * @returns {boolean}\n */\nexport function tileContains(tile, positionSurface) {\n    const { Rectangle, Cartographic, Cartesian3, IntersectionTests, Ray } = Cesium;\n\n    if (tile.region) {\n        var positionCartographic = Cartographic.fromCartesian(positionSurface);\n        var rectangle = tile.region.rectangle\n        return Rectangle.contains(rectangle, positionCartographic);\n    } else {\n        if (!_scratchTileContainsRay) _scratchTileContainsRay = new Ray();\n        Cartesian3.clone(positionSurface, _scratchTileContainsRay.position)\n        Cartesian3.normalize(positionSurface, _scratchTileContainsRay.direction);\n        var boundingSphereWC = tile.boundingSphereWC || tile.boundingSphere\n        if (!boundingSphereWC) {\n            return false;\n        }\n        return IntersectionTests.raySphere(_scratchTileContainsRay, boundingSphereWC)\n    }\n}\n\nexport function selectTileLoaded(tile, position, isPositionSurface) {\n    const positionSurface = isPositionSurface ? position : getSurfacePosition(position);\n    const l = tile.children.length;\n\n    if (tileContains(tile, positionSurface)) {\n        var result;\n        for (let i = 0; i < l; i++) {\n            result = selectTileLoaded(tile.children[i], positionSurface, true);\n            if (result) break;\n        }\n        if (!result && tile.isCommandsReady()) {\n            result = tile;\n        }\n        return result;\n    }\n}\n\n/**\n * \n * @param {QuadtreeLOD} lodSet \n * @param {Cesium.Entity[]} entities \n * @param {Cesium.Viewer}viewer\n * @param {boolean}[foreUpdate=false]\n */\nexport function updatePositionClamped(lodSet, entities, viewer, foreUpdate) {\n    // var maxLevel = lodSet.maxLevel || 5\n    entities.forEach(entity => {\n        if (entity.positionClamped && !foreUpdate) return;\n        const positionProperty = entity.position;\n\n        const position = positionProperty.getValue(viewer.clock.currentTime);\n        var tile = selectTileLoaded(lodSet, position)\n        if (tile) {\n            const positionClamped = viewer.scene.clampToHeight(position, entities);\n            if (positionClamped) {\n                // var positionClampedCartographic = Cesium.Cartographic.fromCartesian(positionClamped)\n                // if (positionClampedCartographic.height > 0 || tile.level == maxLevel) {\n                entity.position = positionClamped;\n                entity.positionClamped = positionClamped;\n                // }\n            }\n        }\n    })\n}\n\n/**\n * \n * @param {Cesium.TileBoundingRegion} region \n * @param {number[]} [array]  \n * @param {number} [startIndex]\n */\nexport function packBoundingRegion(region, array, startIndex) {\n    startIndex = startIndex || 0;\n    array = array || [];\n\n    Cesium.Rectangle.pack(region.rectangle, startIndex);\n    array[startIndex + 4] = region.minimumHeight;\n    array[startIndex + 5] = region.maximumHeight;\n    return array;\n\n}\n/**\n *  \n * @param {number[]} [array]  \n * @param {number} [startIndex]\n * @returns {Cesium.TileBoundingRegion}\n */\nexport function unpackBoundingRegion(array, startIndex) {\n    const { Rectangle, TileBoundingRegion } = Cesium;\n\n    startIndex = startIndex || 0;\n    let rectangle = Rectangle.unpack(array, startIndex);\n    let minimumHeight = array[startIndex + 4]\n    let maximumHeight = array[startIndex + 5];\n    let region = new TileBoundingRegion({\n        rectangle: rectangle,\n        minimumHeight: minimumHeight,\n        maximumHeight: maximumHeight\n    });\n    return region;\n\n}\n\n/**\n * \n * @param {Cesium.AxisAlignedBoundingBox} box \n * @param {number[]} [array]  \n * @param {number} [startIndex]\n */\nexport function packBoundingBox(box, array, startIndex) {\n    startIndex = startIndex || 0;\n    array = array || [];\n\n    const Cartesian3 = Cesium.Cartesian3;\n    Cartesian3.pack(box.center, array, startIndex);\n    Cartesian3.pack(box.minimum, array, startIndex + 3);\n    Cartesian3.pack(box.maximum, array, startIndex + 6);\n    return array;\n\n}\n\n/**\n * \n * @param {number[]} array \n * @param {number} [startIndex=0] \n * @param {Cesium.AxisAlignedBoundingBox}[result]\n * @returns {Cesium.AxisAlignedBoundingBox}\n */\nexport function unpackBoundingBox(array, startIndex, result) {\n    startIndex = startIndex || 0;\n\n    const { Cartesian3, AxisAlignedBoundingBox } = Cesium;\n    if (!result) result = new AxisAlignedBoundingBox();\n\n    Cartesian3.unpack(array, startIndex, result.center);\n    Cartesian3.unpack(array, startIndex + 3, result.minimum);\n    Cartesian3.unpack(array, startIndex + 6, result.maximum);\n\n    return result;\n\n}\n\n/**\n * \n * @param {Cesium.BoundingSphere} sphere \n * @param {number[]} [array] \n * @param {number} [startIndex]\n * @returns {number} array\n */\nexport function packBoundingSphere(sphere, array, startIndex) {\n    startIndex = startIndex || 0;\n    if (!array) array = [];\n    Cesium.Cartesian3.pack(sphere.center, array, startIndex);\n    array[startIndex + 3] = sphere.radius;\n    return array;\n}\n/**\n * \n * @param {number[]} array \n * @param {number} [startIndex=0] \n * @param {Cesium.BoundingSphere}[result]\n * @returns {Cesium.BoundingSphere}\n */\nexport function unpackBoundingSphere(array, startIndex, result) {\n    startIndex = startIndex || 0;\n    const { Cartesian3, BoundingSphere } = Cesium;\n    if (!result) result = new BoundingSphere();\n\n    Cartesian3.unpack(array, startIndex, result.center);\n    result.radius = array[startIndex + 3];\n\n    return result;\n}\n\n/**\n * \n * @param {THREE.Group} model \n * @returns {{\n * box:number[]\n * sphere:number[]\n * }}\n */\nexport function computeBoundingVolume(model) {\n\n    const { BoundingSphere, AxisAlignedBoundingBox, Cartesian3, Matrix4 } = Cesium;\n\n    model.updateMatrixWorld(true);\n\n    var vertices = [];\n    model.updateMatrixWorld();\n\n    model.traverse((object) => {\n        if (object.isMesh) {\n            var geometry = object.geometry\n            let positions = geometry.getAttribute('position')\n            if (!positions || positions.count < 3) {\n                debugger\n            }\n            positions = positions.array;\n\n            try {\n\n                positions = Cartesian3.unpackArray(positions)\n                positions.forEach((position) => {\n                    Matrix4.multiplyByPoint(object.matrixWorld.elements, position, position)\n                    vertices.push(position);\n                });\n            } catch (err) {\n                console.error(err);\n            }\n\n        }\n    });\n\n    var box = AxisAlignedBoundingBox.fromPoints(vertices);\n    var bs = BoundingSphere.fromPoints(vertices);\n\n    var boxCenter = box.center;\n    var boxArr = [];\n\n    Cartesian3.pack(boxCenter, boxArr, 0)\n    Cartesian3.pack(box.minimum, boxArr, 3)\n    Cartesian3.pack(box.maximum, boxArr, 6)\n\n    var sphere = [bs.center.x, bs.center.y, bs.center.z, bs.radius];\n\n    return {\n        sphere: sphere,\n        box: boxArr\n    };\n}",
    "\n// import { Path, StringUtil, GenericWorker, traverse } from '@mesh-3d/utils';\nimport Path from  \"../../utils/Source/Path.js\";\n\nimport StringUtil from  \"../../utils/Source/StringUtil.js\";\n\nimport GenericWorker from  \"../../utils/Source/GenericWorker.js\";\n\nimport traverse from  \"../../utils/Source/traverse.js\";\n\n\nimport * as Osg from  \"./ThirdParty/osg-serializer-js/Source/index.js\";\n\nimport { parseOsg, readOsg } from  \"./model/parseOsg.js\";\n\nimport OSGLoader from  \"./model/OSGLoader.js\";\n\nimport IRenderable from  \"../../core/Source/IRenderable.js\";\n\nimport releaseResources from  \"./releaseResources.js\";\n\nimport RendererUtils from  \"../../core/Source/RendererUtils.js\";\n\nimport { packBoundingBox, packBoundingSphere, memeoryOf, boundingBoxToRegion, updatePositionClamped, selectTileLoaded, unpackBoundingSphere, unpackBoundingBox } from  \"./LODUtils.js\";\n\n// import WebGLRenderer from '../core/webgl/WebGLRenderer.js';\nimport { PagedLODQueue, pendingSort } from  \"./PagedLODQueue.js\";\n\nimport PagedLODState from  \"./PagedLODState.js\";\n\nimport GeometryUtils from  \"../../core/Source/GeometryUtils.js\";\n\n\nfunction checkShouldCancel(previousLod, lod) {\n    var shouldCancel = previousLod.root && !previousLod.root._visible\n    if (!shouldCancel) {\n        shouldCancel = previousLod.parent && !previousLod.parent._visible\n    }\n    if (!shouldCancel) {\n        shouldCancel = !previousLod._visible\n    }\n    if (!shouldCancel) {\n        shouldCancel = pendingSort(previousLod, lod) > 0\n    }\n    return shouldCancel\n}\n\n/**\n * \n * @param {PagedLOD} lod \n * @param {string} rootPath\n * @private\n */\nfunction toJSON(lod, rootPath) {\n    var json = {\n        uri: lod.uri.replace(rootPath, '.')\n    }\n    if (lod.localBoundingSphere) {\n        json.sphere = packBoundingSphere(lod.localBoundingSphere)\n    }\n    if (lod.aabbLocal) {\n        json.box = packBoundingBox(lod.aabbLocal)\n    }\n    return json;\n}\n\nvar scratchMatrix3;\n\nfunction updateContentModelMatrix(lod) {\n    if (!lod.boundingSphere) return;\n\n    const { Matrix3, Matrix4, BoundingSphere } = Cesium;\n\n    const tileset = lod.tileset;\n    var modelMatrix = tileset ? tileset.modelMatrix : lod.modelMatrix;\n\n    //boundingSphere\n\n    let uniformScale = Matrix4.getMaximumScale(modelMatrix)\n    const boundingSphere = lod.boundingSphere, localBoundingSphere = lod.localBoundingSphere;\n    boundingSphere.radius *= uniformScale;\n    Matrix4.multiplyByPoint(modelMatrix, localBoundingSphere.center, boundingSphere.center);\n    lod.boundingSphere2d = BoundingSphere.projectTo2D(boundingSphere, null, lod.boundingSphere2d);\n\n    //boudingBox\n    const obb = lod.obb, aabbLocal = lod.aabbLocal;\n    if (obb) {\n        Matrix4.multiplyByPoint(modelMatrix, obb.center, obb.center);\n        if (!scratchMatrix3) scratchMatrix3 = new Matrix3();\n        var rotationScale = Matrix4.getMatrix3(modelMatrix, scratchMatrix3);\n        Matrix3.multiply(rotationScale, obb.halfAxes, obb.halfAxes);\n    }\n    if (lod.aabbLocal) {\n        Matrix4.multiplyByPoint(modelMatrix, aabbLocal.center, lod.aabb.center);\n        lod.region = boundingBoxToRegion(aabbLocal, modelMatrix);\n    }\n\n    //content\n\n    if (!lod.content) return;\n\n    lod.content.traverse((node) => {\n        if (node.isMesh) {\n            node.frustumCulled = false;\n            Matrix4.multiply(modelMatrix, node.matrixWorld.elements, node.modelMatrix)\n        }\n        node.matrixAutoUpdate = false;\n        node.modelMatrixNeedsUpdate = false;\n    });\n\n    if (lod.debugVolume && lod.debugVolume.isObject3D) {\n        lod.debugVolume._modelMatrix = modelMatrix;\n    }\n}\n\n//parse\n//2\nfunction parseOsgb(lod) {\n\n    let osgRoot = lod.osgRoot, promise;\n    if (lod._osgBuffer) {\n\n        osgRoot = Osg.readBuffer(lod._osgBuffer);\n\n        if (!osgRoot) {//osg\n            let osg = new Uint8Array(lod._osgBuffer)\n            osg = THREE.LoaderUtils.decodeText(osg);\n            osgRoot = readOsg(osg);\n            lod.content = parseOsg(osgRoot, false);\n            traverse(lod.content, obj => {\n                obj.castShadow = lod.castShadow\n                obj.receiveShadow = lod.receiveShadow\n            })\n        }\n        lod.osgRoot = osgRoot;\n        lod._osgBuffer = null\n    }\n\n    if (osgRoot) {\n\n        // lod.rangeMode = osgRoot.RangeMode;\n        lod.rangeDataList = osgRoot.RangeDataList;\n        lod.rangeList = osgRoot.RangeList;\n        // lod.centerMode = osgRoot.CenterMode;\n\n        var minHeight = lod.tileset.minHeight\n        if (typeof lod.tileset.minHeight == 'number') {\n            Osg.traverse(osgRoot, osgNode => {\n                if (osgNode.Type !== 'Osg::Geometry') return\n                var vertices = osgNode.VertexArray.Value\n                for (let i = 0; i < vertices.length; i += 3) {\n                    if (vertices[i + 2] < minHeight) {\n                        vertices[i + 2] = minHeight;\n                    }\n                }\n            })\n        }\n\n        if (!lod._isExpired) {\n            computeBoundingVolume(lod);\n        }\n\n        //empty lod\n        if (lod._isEmptyLOD) {\n            promise = Cesium.when.defer()\n            promise.resolve(lod)\n        }\n        else if (osgRoot.Type == 'Osg::PagedLOD' || osgRoot.Type == 'Osg::Geometry') {\n            if (!lod.children[0]) {//first load\n                createRangeDataChild(lod);\n            }\n            promise = parseContent(lod);\n        } else {\n            lod.hasEmbedLOD = true;\n            lod._contentMemorySize = 0;\n            promise = createOrUpdateEmbedLodChildren(lod)\n        }\n\n    } else {\n        promise = Cesium.when.defer()\n        promise.resolve(lod)\n    }\n\n    return promise;\n}\n/**\n * \n * @param {PagedLOD} lod \n * @returns \n */\nfunction parseContent(lod) {\n    const tileset = lod.tileset;\n    const df = Cesium.when.defer();\n    if (lod.content) {\n\n        debugger\n        var mem = memeoryOf(lod.content)\n        tileset._memorySize += mem;\n        lod._contentMemorySize = mem;\n\n        df.resolve(lod);\n\n    }\n    else {\n\n        const loader = lod.loader, tileset = lod.tileset;\n        loader.parse(lod.osgRoot, lod.path, (model) => {\n\n            model.traverse((node) => {\n                if (node.isMesh) {\n                    node.frustumCulled = false;\n                    node.pickObject = {\n                        id: lod,\n                        mesh: node,\n                        primitive: tileset\n                    }\n                    node.material.autoRefresh = false;\n                    node.modelMatrix = Cesium.Matrix4.multiply(tileset.modelMatrix, node.matrixWorld.elements, node.modelMatrix)\n                }\n                node.matrixAutoUpdate = false;\n                node.modelMatrixNeedsUpdate = false;\n            })\n\n            var mem = memeoryOf(model)\n            tileset._memorySize += mem;\n            lod._contentMemorySize = mem;\n\n            lod.content = model;\n            lod.content.osgRoot = null;\n            lod.osgRoot = null;\n\n            updateContentModelMatrix(lod);\n\n            df.resolve(lod);\n\n        }, function (e) {\n            console.error(e);\n            df.reject(e);\n        }, {\n            loadTexture: tileset.loadTexture,\n            materialType: tileset.materialType\n        });\n\n    }\n\n    return df;\n}\n\n\n//2-1\n/**\n * \n * @param {PagedLOD} lod \n */\nfunction computeBoundingSphere(lod) {\n    const { BoundingSphere, Cartesian3, Matrix4 } = Cesium;\n    lod._isEmptyLOD = false;\n\n    if (!lod.tileset) {\n        let boundingSpheres = []\n        lod.children.forEach(child => {\n            if (child._isEmptyLOD) return\n            boundingSpheres.push(child.localBoundingSphere)\n        })\n        lod.localBoundingSphere = BoundingSphere.fromBoundingSpheres(boundingSpheres)\n        lod.boundingSphere = lod.localBoundingSphere.clone();\n\n        return;\n    }\n\n    let osgRoot = lod.osgRoot;\n    if (osgRoot) {\n        let children = osgRoot.Children;\n        var userCenter = osgRoot.UserCenter;\n\n        if (osgRoot.Type == 'Osg::PagedLOD') {\n\n            lod.localBoundingSphere = new BoundingSphere(\n                Cartesian3.fromArray(userCenter.center),\n                userCenter.radius\n            );\n\n        } else if (children && children[0].Type == 'Osg::PagedLOD') {\n\n            let boundingSpheres = [];\n            osgRoot.Children.forEach((osgChild) => {\n                userCenter = osgChild.UserCenter;\n                if (!userCenter) {\n                    return\n                }\n                boundingSpheres.push(new BoundingSphere(\n                    Cartesian3.fromArray(userCenter.center),\n                    userCenter.radius\n                ));\n\n            });\n            if (boundingSpheres.length) {\n                lod.localBoundingSphere = BoundingSphere.fromBoundingSpheres(boundingSpheres)\n            }\n        } else {\n\n            let boundingSpheres = [];\n\n            Osg.traverse(osgRoot, (osgNode) => {\n                if (osgNode.Type == 'Osg::Geometry') {\n                    var vertices = osgNode.VertexArray.Value\n                    boundingSpheres.push(BoundingSphere.fromVertices(vertices));\n                }\n            });\n\n            if (boundingSpheres.length == 0) {\n                lod._isEmptyLOD = true;\n                // throw new Error('cannot compute boundingSphere for node ' + osgRoot);\n            } else {\n                lod.localBoundingSphere = BoundingSphere.fromBoundingSpheres(boundingSpheres)\n            }\n        }\n    }\n\n    if (!lod._isEmptyLOD) {\n        lod.boundingSphere = lod.localBoundingSphere.clone();\n\n        let uniformScale = Matrix4.getMaximumScale(lod.tileset.modelMatrix)\n        lod.boundingSphere.radius *= uniformScale;\n        Matrix4.multiplyByPoint(lod.tileset.modelMatrix, lod.localBoundingSphere.center, lod.boundingSphere.center);\n        lod.boundingSphere2d = BoundingSphere.projectTo2D(lod.boundingSphere);\n    }\n\n}\n\nfunction computeBoundingVolume(lod) {\n    const { Color, AxisAlignedBoundingBox, OrientedBoundingBox, Matrix3, Cartesian3, BoxOutlineGeometry, Transforms, Matrix4 } = Cesium;\n\n    try {\n\n        computeBoundingSphere(lod);\n\n        if (lod._isEmptyLOD) return;\n\n        let osgRoot = lod.osgRoot, transform = lod.tileset.modelMatrix;\n        if (osgRoot) {\n            var vertices = [];\n            Osg.traverse(osgRoot, (node) => {\n                if (node.Type == 'Osg::Geometry') {\n                    var pts = Cartesian3.unpackArray(node.VertexArray.Value);\n                    vertices = vertices.concat(pts);\n                }\n            });\n            if (!vertices.length) return;\n\n            lod.obbLocal = OrientedBoundingBox.fromPoints(vertices);\n            lod.aabbLocal = AxisAlignedBoundingBox.fromPoints(vertices)\n        } else if (!lod.aabbLocal && !lod.obbLocal) {\n            return\n        }\n\n        if (lod.aabbLocal) {\n            lod.aabb = lod.aabbLocal.clone();\n            Matrix4.multiplyByPoint(transform, lod.aabbLocal.center, lod.aabb.center);\n\n            lod.region = boundingBoxToRegion(lod.aabbLocal, transform);\n\n            if (lod.debugVolume) {\n                var boxGeometry = BoxOutlineGeometry.fromAxisAlignedBoundingBox(lod.aabbLocal);\n                boxGeometry = BoxOutlineGeometry.createGeometry(boxGeometry);\n                boxGeometry = GeometryUtils.toBufferGeometry3js(boxGeometry)\n\n                var aabBoxMaterial = new THREE.LineBasicMaterial({\n                    color: 'cyan'\n                });\n                aabBoxMaterial.allowPick = false\n\n                lod.debugVolume = new THREE.LineSegments(boxGeometry, aabBoxMaterial);\n                lod.debugVolume.modelMatrixNeedsUpdate = false;\n                lod.debugVolume._modelMatrix = lod.tileset.modelMatrix;\n            }\n        }\n\n        if (lod.obbLocal) {\n            lod.obb = lod.obbLocal.clone();\n            Matrix4.multiplyByPoint(transform, lod.obb.center, lod.obb.center);\n            if (!scratchMatrix3) scratchMatrix3 = new Matrix3();\n            var rotationScale = Matrix4.getMatrix3(transform, scratchMatrix3);\n            Matrix3.multiply(rotationScale, lod.obb.halfAxes, lod.obb.halfAxes);\n        }\n\n    } catch (err) {\n        debugger\n        throw err\n    }\n}\n\n//2-2\n/**\n * \n * @param {PagedLOD} lod \n */\nfunction createRangeDataChild(lod) {\n\n    var rangeDataList = lod.rangeDataList;\n\n    if (rangeDataList && rangeDataList.length > 0) {//prepare next level \n\n        var childFileName = rangeDataList[1];\n\n        const parent = lod;\n        var childTile = new PagedLOD({\n            tileset: parent.tileset,\n            tileId: childFileName,\n            manager: parent.manager,\n            loader: parent.loader,\n            parent: parent,\n            root: parent.root || parent,\n            uri: parent.path + '/' + childFileName,\n            debugVolume: parent.debugVolume,\n            showDebugVolume: parent.showDebugVolume,\n            minRange: parent.minRange,\n            receiveShadow: parent.receiveShadow,\n            castShadow: parent.castShadow\n        });\n\n        lod.children.push(childTile);\n\n    }\n}\n\n//2-3 \n/**\n *\n * @param {PagedLOD}lod\n * @returns {boolean}\n * @private\n */\nfunction createOrUpdateEmbedLodChildren(lod) {\n\n    var childReadyPromises = [];\n    var osgRoot = lod.osgRoot;\n    osgRoot.Children.forEach((osgChild, index) => {\n        var childTile = lod.children[index];\n        var promise;\n        if (childTile) {//reload \n\n            childTile.osgRoot = osgChild;\n            childTile.state = PagedLODState.LOADING;\n            promise = parseContent(childTile);\n\n        } else {//first load\n\n            var tileId = lod.tileId + \".\" + index;\n            const parent = lod;\n            childTile = new PagedLOD({\n                uri: parent.uri + index,\n                tileId: tileId,\n                parent: parent,\n                manager: parent.manager,\n                loader: parent.loader,\n                tileset: parent.tileset,\n                root: parent.root || parent,\n                debugVolume: parent.debugVolume,\n                showDebugVolume: parent.showDebugVolume,\n                minRange: parent.minRange,\n                isEmbedLOD: true,\n                receiveShadow: parent.receiveShadow,\n                castShadow: parent.castShadow\n            });\n            childTile.state = PagedLODState.LOADING;\n            childTile.osgRoot = osgChild;\n            promise = parseOsgb(childTile)\n\n            lod.children.push(childTile);\n        }\n\n        promise = promise.then(function () {\n            childTile.state = PagedLODState.LOADED;\n            childTile.osgRoot = null;\n            childTile.ready = true;\n            childTile._isExpired = false;\n            childTile.readyPromise.resolve(childTile);\n            return childTile;\n        });\n        childReadyPromises.push(promise);\n    });\n\n    return Cesium.when.all(childReadyPromises, function () {\n        lod.osgRoot = null;\n        return lod;\n    });\n}\n\nfunction initializePagedLODSet(tileset, frameState, renderer, currentWebglRenderState, camera3jsLocal) {\n    tileset.children.forEach(lod => {\n        var content = lod.content;\n        if (!content) {\n            lod._isEmptyLOD = true;\n            return\n        }\n\n        content.traverse(obj => {\n            var material = obj.material;\n            if (material) {\n                var map = material.map;\n                if (map) renderer._textures.get(map, frameState);\n                renderer._webglRenderItems.getAndUpdate(obj, frameState, false, currentWebglRenderState, camera3jsLocal);\n            }\n        });\n        lod.state = PagedLODState.READY;\n    });\n    tileset._initialized = true;\n}\n\nfunction processPagedLODState(lod, frameState, renderer, camera3jsLocal, currentWebglRenderState) {\n    const state = lod.state, tileset = lod.tileset;\n    const webglTextures = renderer._textures, webglRenderItems = renderer._webglRenderItems;\n\n    if (tileset._lodInitializing) {\n        return;\n    }\n\n    if (state == PagedLODState.UNLOADED || state == PagedLODState.EXPIRED) {\n\n        var previousLod = tileset._lodLoading;\n        if (previousLod) {\n            if (previousLod == lod) return;\n\n            if (tileset.optimizeType != 'SpeedFirst') {\n                if (!checkShouldCancel(previousLod, lod)) return\n                previousLod.cancelRequest()\n            }\n        }\n\n        tileset._lodLoading = lod;\n        lod.requestTile().then(() => {\n            if (tileset.optimizeType == 'SpeedFirst') {\n                lod.state = PagedLODState.READY;\n                tileset._shouldRaiseTileLoaded = true;\n            }\n            tileset._lodLoading = null;\n        }).otherwise(err => {\n            console.warn('Failed to load tile:' + tileToLoad.uri);\n            console.error(err);\n            tileset._lodLoading = null;\n        });\n\n    } else {\n        var previousLod = tileset._lodInitializing;\n        if (previousLod) {\n            return\n        }\n\n        const content = lod.content;\n        if (!content) {\n            return\n        } else if (tileset.optimizeType == 'SpeedFirst') {\n            lod.state = PagedLODState.READY;\n            tileset._shouldRaiseTileLoaded = true;\n            tileset._lodInitializing = null;\n            return\n        }\n        tileset._lodInitializing = lod;\n\n        if (state == PagedLODState.LOADED) {\n            lod.state = PagedLODState.TEXTRURE_INITIALIZING;\n            content.traverse(obj => {\n                var material = obj.material;\n                if (material && material.map) {\n                    var map = material.map;\n                    webglTextures.get(map, frameState);\n                }\n            })\n            Cesium.requestAnimationFrame(function () {\n                lod.state = PagedLODState.TEXTRURE_INITIALIZED\n                tileset._lodInitializing = null;\n            })\n\n        } else if (state == PagedLODState.TEXTRURE_INITIALIZED) {\n            lod.state = PagedLODState.RENDER_ITEM_INITIALIZING;\n            content.traverse(obj => {\n                const { geometry, material } = obj\n                if (!geometry || !material) return\n                webglRenderItems.getAndUpdate(obj, frameState, false, currentWebglRenderState, camera3jsLocal);\n\n                //删除顶点数组\n                if (lod.tileset.releaseGeometry) {\n                    var attrs = geometry.attributes\n                    for (const name in attrs) {\n                        if (Object.hasOwnProperty.call(attrs, name)) {\n                            const attr = attrs[name];\n                            attr.array = new attr.array.constructor(0)\n                        }\n                    }\n                }\n            })\n            Cesium.requestAnimationFrame(function () {\n\n                lod.state = PagedLODState.READY;\n                tileset._shouldRaiseTileLoaded = true;\n                tileset._lodInitializing = null;\n            })\n        }\n    }\n\n}\n\n\n/**\n * \n */\nexport default class PagedLOD extends IRenderable {\n    constructor(options) {\n        super(options);\n\n        this.isPagedLOD = true;\n        this.isEmbedLOD = !!options.isEmbedLOD;\n        this.hasEmbedLOD = !!options.hasEmbedLOD;\n\n        this.uri = options.uri;\n        this.path = Path.GetDirectoryName(this.uri);\n\n        this.debugVolume = options.debugVolume;\n        this.showDebugVolume = options.showDebugVolume;\n\n        this.rangeDataList = options.rangeDataList || [];\n        this.rangeList = options.rangeList || [];\n        this.minRange = options.minRange || 8;\n\n        this.boundingSphere = null;\n        this.localBoundingSphere = null;\n        this.aabb = null;\n        this.aabbLocal = null;\n        this.obb = null;\n        this.obbLocal = null;\n        /**\n         * @type {Cesium.TileBoundingRegion}\n         */\n        this.region = null;\n\n        this.state = PagedLODState.UNLOADED;\n\n        /**\n         * @type  {THREE.LoadingManager}\n         */\n        this.manager = options.manager;\n\n        const _Cesium = Cesium, { when, defaultValue, Matrix4, Event } = _Cesium;\n\n        var uriLower = this.uri.toLowerCase()\n        if (uriLower.endsWith('.xml') || uriLower.endsWith('.json')) {\n\n            this.onInitProgress = options.onInitProgress;\n            this.debugVolumeOnly = defaultValue(options.debugVolumeOnly, false)\n            this.ext = options.ext || 'osgb';\n            this.dataDir = options.dataDir || '/Data';\n            this.tilePattern = options.tilePattern || 'Tile_{x}_{y}';\n\n            this.metadata = {};\n\n            this.minX = options.minX || 0;\n            this.maxX = options.maxX || 8;\n            this.minY = options.minY || 0;\n            this.maxY = options.maxY || 8;\n\n            this._transform = options.transform || Matrix4.IDENTITY.clone();\n            this._srsTransform = Matrix4.IDENTITY.clone();\n            this._srsMatrix = Matrix4.IDENTITY.clone();\n            this._computedTransform = Matrix4.IDENTITY.clone();\n\n            this.modelMatrix = Matrix4.IDENTITY.clone();\n\n            this.modelMatrixNeedsUpdate = true;\n            this._memorySize = 0;\n            this.geometryErrorScale = options.geometryErrorScale || 0.75;\n            this.maximumMemorySize = options.maximumMemorySize || 1024 * 1024 * 500;\n\n            this.tileLoaded = new Event();\n            this._shouldRaiseTileLoaded = false;\n            this.queue = new PagedLODQueue(this);\n\n            this.show = defaultValue(options.show, true)\n            this.castShadow = defaultValue(options.castShadow, false)\n            this.receiveShadow = defaultValue(options.receiveShadow, false)\n            this.loadTexture = defaultValue(options.loadTexture, true)\n            this.materialType = defaultValue(options.materialType, 'basic')\n            this.minHeight = options.minHeight;\n            this.releaseGeometry = defaultValue(options.releaseGeometry, true)\n            this.sortType = defaultValue(options.sortType, 'RangeFirst')\n            this.optimizeType = defaultValue(options.optimizeType, 'PerformanceFirst')\n\n            this._level = -1;\n            this.debugSuspendVisit = false\n\n            this.loadMetaData();\n        } else {\n            var { parent, root, tileset, tileId } = options;\n            this._level = (parent || root || tileset)._level + 1;\n            this.parent = parent;\n            this.root = root;\n            this.tileId = tileId;\n            this.tileset = tileset;\n            this._timeStamp = Date.now();\n            this._contentMemorySize = 0;\n            this.castShadow = options.castShadow\n            this.receiveShadow = options.receiveShadow\n        }\n        /**\n         * @type {OSGLoader}\n         */\n        this.loader = options.loader || new OSGLoader(this.manager)\n\n        // this.fileLoader = new THREE.FileLoader(this.manager);\n\n        /**\n         * @type {PagedLOD[]}\n         */\n        this.children = options.children || [];\n\n        this.ready = false;\n        this.readyPromise = when.defer();\n\n    }\n\n    get transform() {\n        return this._transform;\n    }\n    set transform(transform) {\n        if (this.center && !Cesium.Matrix4.equals(transform, this._transform)) {\n            this._transform = transform;\n            this.modelMatrixNeedsUpdate = true;\n        }\n    }\n\n    //initialize\n\n    loadMetaData() {\n\n        let url = this.uri;\n        if (this.manager) url = this.manager.resolveURL(this.uri);\n\n        const { Resource, Cartesian3, Cartographic, Transforms, Matrix4 } = Cesium;\n\n        let tileset = this;\n        function onMetadataLoad() {\n            var metadata = tileset.metadata;\n            tileset.center = Cartesian3.fromDegrees(\n                metadata.srs[0], metadata.srs[1], metadata.srs[2] || 0\n            );\n            tileset.centerCartographic = Cartographic.fromDegrees(\n                metadata.srs[0], metadata.srs[1], metadata.srs[2] || 0\n            );\n\n            tileset._srsModelMatrix = Transforms.eastNorthUpToFixedFrame(tileset.center, Cesium.Ellipsoid.WGS84, tileset._srsMatrix);\n\n            if (metadata.srsOrigin) {\n                let translation = Cartesian3.fromArray(metadata.srsOrigin);\n                tileset._srsTransform = Matrix4.fromTranslation(translation)\n            }\n\n            Matrix4.multiply(tileset._transform, tileset._srsTransform, tileset._computedTransform);\n            Matrix4.multiply(tileset._srsMatrix, tileset._computedTransform, tileset.modelMatrix);\n\n        }\n\n        var promise, metaUri = this.uri.toLowerCase()\n        if (metaUri.endsWith('.xml')) {\n            promise = Resource.fetchXML(url).then((metaDoc) => {\n\n                var modelMetadatas = metaDoc.getElementsByTagName('ModelMetadata');\n                if (modelMetadatas && modelMetadatas.length > 0) {\n                    var modelMetadata = modelMetadatas[0];\n\n                    // \n                    var srsEls = modelMetadata.getElementsByTagName('SRS');\n                    if (srsEls && srsEls.length) {\n\n                        var srsEl = srsEls[0];\n                        var srsText = srsEl.textContent;\n                        var start = srsText.indexOf(':');\n\n                        let parts = srsText.split(':'), name = parts[0];\n\n                        if (name == 'ENU') {\n\n                            var lonlat = srsText.substr(start + 1);\n                            this.metadata.srs = JSON.parse('[' + lonlat + ']');\n                            this.metadata.srs.reverse();\n\n                        } else\n                        // if (name == 'EPSG') {\n                        // } else \n                        {\n                            throw new Error('Unsupport SRS:' + srsText)\n                        }\n                    }\n\n                    //\n\n                    var srsOriginEls = modelMetadata.getElementsByTagName('SRSOrigin');\n                    if (srsOriginEls && srsOriginEls.length) {\n\n                        var srsOriginEl = srsOriginEls[0];\n                        var srsOriginText = srsOriginEl.textContent;\n\n                        if (srsOriginText) {\n                            this.metadata.srsOrigin = JSON.parse('[' + srsOriginText + ']');\n                        }\n                    }\n                } else {\n                    console.warn('metadata  ' + this.url + ' is empty.')\n                }\n\n                onMetadataLoad()\n\n                return this.loadRootTiles()\n            }).otherwise((e) => {\n                console.trace(e)\n                console.warn('metadata ' + url + ' load failed.', e);\n\n                return this.loadRootTiles()\n            })\n        } else {\n            promise = Resource.fetchJson(url).then(tilesetJson => {\n                this.metadata = tilesetJson.metadata\n                this.localBoundingSphere = unpackBoundingSphere(tilesetJson.sphere)\n                this.boundingSphere = this.localBoundingSphere.clone()\n                if (tilesetJson.box) {\n                    this.aabbLocal = unpackBoundingBox(tilesetJson.box)\n                    this.aabb = this.aabbLocal.clone()\n                }\n                if (tilesetJson.transform) {\n                    this.transform = Matrix4.fromArray(tilesetJson.transform, 0, this.transform)\n                }\n                onMetadataLoad()\n\n                updateContentModelMatrix(this);\n\n                this.minX = tilesetJson.minX\n                this.minY = tilesetJson.minY\n                this.maxX = tilesetJson.maxX\n                this.maxY = tilesetJson.maxY\n\n                return this.createRootTiles(tilesetJson);\n            }).otherwise((e) => {\n                console.warn('metadata ' + url + ' load failed.', e);\n                console.error(e)\n            })\n        }\n\n        return promise;\n    }\n\n    /**\n     * 从索引文件中创建根节点\n     * @param {*} tilesetJson \n     * @private\n     */\n    createRootTiles(tilesetJson) {\n        var tileset = this;\n        var parent = tileset, batch = [], batches = [batch];\n        tilesetJson.children.forEach(rootTileJson => {\n            var tileId = rootTileJson.uri.split(/\\//).pop()\n            tileId = tileId.split('.')\n            tileId.pop();\n            tileId = tileId.join('.');\n\n            var uri = rootTileJson.uri\n            if (uri.startsWith('.')) {\n                uri = uri.slice(1)\n            };\n            var rootTile = new PagedLOD({\n                uri: this.path + uri,\n                tileId: tileId,\n                tileset: parent,\n                loader: parent.loader,\n                manager: parent.manager,\n                debugVolume: parent.debugVolume,\n                showDebugVolume: parent.showDebugVolume,\n                minRange: parent.minRange,\n                receiveShadow: parent.receiveShadow,\n                castShadow: parent.castShadow\n            })\n            rootTile.state = PagedLODState.UNLOADED\n\n            rootTile.localBoundingSphere = unpackBoundingSphere(rootTileJson.sphere)\n            rootTile.aabbLocal = unpackBoundingBox(rootTileJson.box)\n\n            if (batch.length > 10) {\n                batch = []\n                batches.push(batch)\n            }\n            batch.push(rootTile)\n            parent.children.push(rootTile)\n        });\n\n        let worker = new GenericWorker(batches, batch => {\n            for (let i = 0; i < batch.length; i++) {\n                const rootTile = batch[i];\n                computeBoundingVolume(rootTile)\n                updateContentModelMatrix(rootTile)\n            }\n        });\n\n        return worker.run(this.onInitProgress).then(() => {\n\n            console.time('first rendering')\n\n            this._initialized = true;\n            this.state = PagedLODState.READY;\n            this.ready = true;\n            this.readyPromise.resolve(this);\n            return this;\n        })\n    }\n    /**\n     * 根据minX,minY,maxX,maxY创建根节点\n     * @private\n     */\n    loadRootTiles() {\n\n        let children = this.children;\n        let allTiles = []\n\n        for (let x = this.minX; x <= this.maxX; x++) {\n            var xNo = StringUtil.paddingStart(x, 3);\n\n            for (let y = this.minY; y <= this.maxY; y++) {\n\n                var yNo = StringUtil.paddingStart(y, 3);\n\n                var tileId = this.tilePattern.replace('{x}', xNo).replace('{y}', yNo);\n                var filePath = this.dataDir + '/' + tileId + '/' + tileId + '.' + this.ext;\n                var url = this.path + filePath;\n                const parent = this;\n                var tile = new PagedLOD({\n                    uri: url,\n                    tileId: tileId,\n                    tileset: parent,\n                    loader: parent.loader,\n                    manager: parent.manager,\n                    debugVolume: parent.debugVolume,\n                    showDebugVolume: parent.showDebugVolume,\n                    minRange: parent.minRange,\n                    receiveShadow: parent.receiveShadow,\n                    castShadow: parent.castShadow\n                });\n\n                allTiles.push(tile);\n            }\n        }\n\n        let worker = new GenericWorker(allTiles, tile => {\n            return new Promise((resolve, reject) => {\n                tile.requestTile().then(tile => {\n                    if (tile && !tile._isEmptyLOD) {\n                        children.push(tile)\n                    }\n                    resolve()\n                }).otherwise((e) => {\n                    console.warn('tile ' + tile.tileId + ' load failed.', e)\n                    resolve()\n                });\n            })\n        });\n\n        return worker.run(this.onInitProgress).then(() => {\n            computeBoundingSphere(this);\n            updateContentModelMatrix(this);\n\n            this.state = PagedLODState.READY;\n            this.ready = true;\n            this.readyPromise.resolve(this);\n            return this;\n        })\n    }\n\n    //1\n    requestTile() {\n        const { when, Resource } = Cesium;\n\n        const lod = this;\n        if (lod.osgRoot) {\n            debugger\n            var df = when.defer();\n            df.resolve(lod);\n            return df;\n        }\n\n        var request = new Cesium.Request()\n        lod._request = request;\n        lod.cancelRequest = function () {\n            // if (request.cancelFunction) {\n            //     request.cancelFunction()\n            //     lod.state = PagedLODState.UNLOADED;\n            // } else {\n            lod.state = PagedLODState.CANCELLED;\n            // }\n        }\n        let url = lod.uri;\n        if (lod.manager) url = lod.manager.resolveURL(lod.uri);\n\n        lod.state = PagedLODState.LOADING;\n\n        function doRequest() {\n            if (lod._osgBuffer) {\n                return Cesium.when(lod._osgBuffer, () => {\n                    return parseOsgb(lod).then(() => {\n                        lod.state = PagedLODState.LOADED\n                        return lod\n                    })\n                })\n            }\n\n            return Resource.fetchArrayBuffer({\n                url: url,\n                request: request\n            }).then((buffer) => {\n                lod._osgBuffer = buffer;\n                lod._osgBufferSize = buffer.byteLength;\n                if (lod.state == PagedLODState.CANCELLED) {\n                    lod.state = PagedLODState.UNLOADED\n                    return lod;\n                }\n                return parseOsgb(lod);\n            })\n        }\n\n        return doRequest().then(() => {\n            if (lod.state == PagedLODState.CANCELLED) {\n                lod.unload()\n                return lod;\n            }\n            if (lod.state == PagedLODState.UNLOADED) return lod;\n\n            if (lod.hasEmbedLOD) {\n                lod.state = PagedLODState.READY;\n            }\n            else {\n                lod.state = PagedLODState.LOADED;\n            }\n            lod.ready = true;\n            lod.readyPromise.resolve(lod);\n            return lod;\n        }).otherwise((e) => {\n            if (lod.state == PagedLODState.UNLOADED) return lod;\n\n            console.error(e);\n            lod.state = PagedLODState.ERROR;\n            lod.ready = false;\n            lod.readyPromise.reject(e);\n            // throw e;\n        });\n\n    }\n\n    //render\n\n    computeDistanceToCamera(frameState) {\n        const { region, boundingSphere } = this;\n        const camera = frameState.camera;\n        var distanceToCamera;\n        if (region) {\n            distanceToCamera = region.distanceToCamera(frameState)\n        } else if (boundingSphere) {\n            distanceToCamera = camera.distanceToBoundingSphere(boundingSphere);\n        } else {\n            return\n        }\n        if (distanceToCamera == 0) {\n            distanceToCamera = Cesium.Cartesian3.distance(boundingSphere.center, camera.positionWC)\n        }\n        this._distanceToCamera = distanceToCamera\n    }\n\n    computeOrderParams(frameState) {\n\n        const { Cartesian3 } = Cesium;\n        /**\n         * @type {Cesium.Camera}\n         */\n        var camera = frameState.camera;\n        var scene = camera._scene\n        var { region, boundingSphere, tileset } = this;\n        tileset = tileset || this;\n\n        var centerWC\n        if (region) {\n            centerWC = Cartesian3.add(region.southwestCornerCartesian, region.northeastCornerCartesian, {})\n            Cartesian3.divideByScalar(centerWC, 2, centerWC)\n        } else if (boundingSphere) {\n            centerWC = boundingSphere.center\n        } else {\n            return\n        }\n\n        if (tileset._cameraHeight < 50 || tileset._cameraPitch > -0.1) {\n            this._radiusPixel = undefined;\n            return\n        }\n        var centerPixel = Cesium.SceneTransforms.wgs84ToWindowCoordinates(scene, centerWC, {})\n        if (centerPixel) {\n            var { x, y } = centerPixel\n            var w = scene.canvas.width / frameState.pixelRatio;\n            var h = scene.canvas.height / frameState.pixelRatio;\n            x = x - w / 2\n            y = y - h / 2\n            if (y < 0) y = - y;\n            this._radiusPixel = (x * x + y * y)\n        }\n    }\n    /**\n     * \n     * @param {Cesium.FrameState} frameState  \n     * @returns {boolean}\n     * @protected\n     */\n    computeVisibility(frameState) {\n\n        const { Intersect } = Cesium;\n        const parent = this.parent, cullingVolume = frameState.cullingVolume;\n        var visibility;\n        if (parent) {\n            if (parent._visibility == Intersect.INSIDE) {\n                visibility = parent._visibility;\n            } else {\n                visibility = cullingVolume.computeVisibility(\n                    this.region ? this.region : this.boundingSphere);\n                // this.boundingSphere);\n            }\n        }\n        else {\n            visibility = cullingVolume.computeVisibility(this.boundingSphere);\n        }\n\n        this._visibility = visibility;\n        this._visible = visibility > Intersect.OUTSIDE;\n\n        if (this._visible) {\n\n            var geometryErrorScale = (this.tileset || this).geometryErrorScale;\n            this.range = RendererUtils.computeRange(this._distanceToCamera, this.boundingSphere.radius, frameState, geometryErrorScale)\n\n            this._visible = this.range > this.minRange;\n        }\n\n        return this._visible;\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {PagedLODQueue}renderQueue\n     * @private\n     */\n    visit(frameState, renderQueue) {\n\n        if (this._isEmptyLOD) return;\n\n        let tileset = this.tileset;\n        if (tileset) {\n            this.minRange = tileset.minRange;\n            this.showDebugVolume = tileset.showDebugVolume;\n        }\n\n        if (this.frameNumber != frameState.frameNumber) {\n            this.computeDistanceToCamera(frameState)\n            this.computeVisibility(frameState);\n        }\n\n        if (this._visible) {\n\n            this.computeOrderParams(frameState)\n\n            const tileset = this.tileset;\n            this._timeStamp = tileset._currentTimeStamp;\n\n            let needLoadChild = this.rangeList && this.rangeList.length > 0;\n            if (needLoadChild) {\n                let nextRange = this.rangeList[1];\n                needLoadChild = this.range > nextRange[0] && this.range <= nextRange[1]\n                if (!needLoadChild) {\n                    if (this.state == PagedLODState.READY) {\n                        return renderQueue.pushRendering(this);\n                    } else {\n                        return renderQueue.pushPending(this);\n                    }\n                }\n            }\n\n            let childrenReady = this.children.length > 0;\n            this.children.forEach(child => {\n                child._timeStamp = tileset._currentTimeStamp;\n\n                if (child.state !== PagedLODState.READY) {\n                    childrenReady = false;\n                    child.computeDistanceToCamera(frameState)\n                    child.computeOrderParams(frameState)\n                    return renderQueue.pushPending(child);\n                }\n\n                var contentReady = true;\n                if (child.hasEmbedLOD) {\n                    child.children.forEach(embedLOD => {\n                        if (embedLOD.state !== PagedLODState.READY) {\n                            contentReady = false;\n                            embedLOD.computeDistanceToCamera(frameState)\n                            embedLOD.computeOrderParams(frameState)\n                            renderQueue.pushPending(embedLOD);\n                        }\n                    });\n                }\n                if (contentReady) {\n                    child.visit(frameState, renderQueue);\n                } else {\n                    childrenReady = false;\n                }\n            });\n\n            if (!childrenReady) {\n                if (this.state == PagedLODState.READY) {\n                    renderQueue.pushRendering(this);\n                }\n                else {\n                    renderQueue.pushPending(this)\n                }\n            }\n        }\n\n        this.frameNumber = frameState.frameNumber;\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {THREE.Object3D[]} renderList \n     * @param {Mesh3D.WebGLRenderer}renderer\n     * @param {THREE.Camera} camera3jsLocal \n     * @param {Mesh3D.WebGLRenderState} currentWebglRenderState\n     */\n    render(frameState, renderList, renderer, camera3jsLocal, currentWebglRenderState) {\n        if (!this.ready || !this.show) return;\n\n        var renderQueue = this.queue, debugSuspendVisit = this.debugSuspendVisit;\n\n        if (!debugSuspendVisit) {\n\n            this._currentTimeStamp = Date.now();\n            if (frameState.frameNumber != this.frameNumber) {\n\n                if (this.modelMatrixNeedsUpdate) {\n                    Cesium.Matrix4.multiply(this._transform, this._srsTransform, this._computedTransform);\n                    Cesium.Matrix4.multiply(this._srsMatrix, this._computedTransform, this.modelMatrix);\n\n                    traverse(this, lod => {\n                        updateContentModelMatrix(lod);\n                    });\n                    this.modelMatrixNeedsUpdate = false;\n                }\n\n                this.computeDistanceToCamera(frameState);\n                this.computeVisibility(frameState);\n                this.computeOrderParams(frameState)\n\n                if (!this._visible) return;\n\n                if (this._shouldRaiseTileLoaded) {\n                    Cesium.requestAnimationFrame(() => {\n                        this.tileLoaded.raiseEvent(this);\n                        this._shouldRaiseTileLoaded = false;\n                    })\n                }\n\n                if (!this._initialized) {\n                    initializePagedLODSet(this, frameState, renderer, currentWebglRenderState, camera3jsLocal);\n                }\n                renderQueue.init();\n\n                //visit\n\n                this._cameraHeight = frameState.camera.positionCartographic.height\n                this._cameraPitch = frameState.camera.pitch\n\n                this.children.forEach(root => {\n                    root.visit(frameState, renderQueue);\n                });\n\n                //\n                renderQueue.sortPendings();\n                var nextPending = renderQueue.shiftPending();\n                if (nextPending) {\n                    processPagedLODState(nextPending, frameState, renderer, camera3jsLocal, currentWebglRenderState);\n                }\n            }\n\n            //unload\n            this._memorySize0 = this._memorySize0 || 0;\n            var maximumMemorySize = this.maximumMemorySize;\n            var memIncreased = this._memorySize - this._memorySize0\n            if (this._memorySize > maximumMemorySize && memIncreased > maximumMemorySize * 0.25) {\n                this.unload();\n                this._memorySize0 = this._memorySize\n            }\n\n        }\n\n        renderQueue.getRenderList(renderList);\n\n        if (renderList.length && !this._rendering) {\n            this._rendering = true\n            console.timeEnd('first rendering')\n        }\n\n        // console.log('renderlist', renderQueue.renerList.length);\n\n        this.frameNumber = frameState.frameNumber;\n\n        // if (!debugSuspendVisit) renderQueue.reset();\n    }\n\n    unload() {\n\n        const tileset = this.tileset;\n        if (!tileset) {\n            let expiredTiles = this.queue.getExpiredList();\n            let stack = expiredTiles.splice(0);\n            while (stack.length > 0) {\n                let expiredTile = stack.pop();\n                expiredTile.unload();\n            };\n            return;\n        }\n\n        if (this._request) {\n            this._request.cancelFunction && this._request.cancelFunction()\n        }\n\n        //\n        if (this.hasEmbedLOD) {\n            var needsUnloadChildren = true;\n            this.children.forEach(child => {\n                if (child._timeStamp == this.tileset._currentTimeStamp) {\n                    needsUnloadChildren = false;\n                }\n            });\n            if (needsUnloadChildren) {\n                this.children.forEach(child => {\n                    child.unload()\n                });\n                this._isExpired = true;\n                this._loading = false;\n                this.state = PagedLODState.EXPIRED;\n            }\n        }\n\n        //\n        var content = this.content;\n        if (!content) return;\n        tileset.visualizer.remove(content, true);\n        releaseResources(content);\n        if (content.osgRoot) {\n            Osg.traverse(content.osgRoot, (node) => {\n                if (node.Type == 'Osg::Geometry') {\n                    destroyObject(node);\n                }\n            });\n            delete content.osgRoot;\n        }\n        this.content = null;\n\n        this._osgBuffer = null;\n        this._isExpired = true;\n        this._loading = false;\n        this.state = PagedLODState.EXPIRED;\n\n        //\n        if (tileset._memorySize > 0) {\n            tileset._memorySize -= this._contentMemorySize;\n        }\n        this._contentMemorySize = 0;\n    }\n\n    destroy() {\n\n        let visualizer = this.visualizer;\n        const destroyObject = Cesium.destroyObject;\n        traverse(this.children, node => {\n            node.unload()\n            if (node.debugVolume) {\n                node.debugVolume = visualizer.remove(node.debugVolume, true);\n            }\n            if (node.osgRoot) {\n                Osg.traverse(node.osgRoot, (node) => {\n                    if (node.Type == 'Osg::Geometry') {\n                        destroyObject(node);\n                    }\n                });\n            }\n        });\n\n        this._renderList && this._renderList.splice(0);\n\n        this.boundingSphere = null;\n        this.localBoundingSphere = null;\n        this.aabb = null;\n        this.aabbLocal = null;\n        this.obb = null;\n        this.obbLocal = null;\n        this.region = null;\n\n        visualizer.remove(this, true);\n        this.visualizer = null;\n        return destroyObject(this)\n    }\n\n    /**\n     * @protected\n     */\n    isCommandsReady() {\n        if (!this.tileset) return false;\n        if (this.state !== PagedLODState.READY) return false;\n        let content = this.content;\n        let ready = undefined;\n        traverse(content, obj => {\n            if (ready == false) return;\n            if (obj.isMesh && obj.visible) {\n                if (ready == undefined) ready = true;\n                let renderItems = obj.renderItems\n                if (!renderItems) ready = false;\n                else {\n                    renderItems.forEach(renderItem => {\n                        if (!renderItem.loaded) ready = false\n                    })\n                }\n            }\n        });\n        return ready;\n    }\n\n    toIndexJSON() {\n        if (this.root) {\n            console.warn('Mesh3D.PagedLOD：只能从根节点导出索引');\n            return;\n        }\n\n        var jsonRoot = toJSON(this, this.path)\n        jsonRoot.metadata = Object.assign({\n            exporter: 'Mesh3D.PagedLOD',\n            datetime: new Date().toLocaleDateString()\n        }, this.metadata);\n        jsonRoot.children = [];\n        delete jsonRoot.uri\n\n        jsonRoot.ext = this.ext\n        jsonRoot.dataDir = this.dataDir\n        jsonRoot.tilePattern = this.tilePattern;\n\n        jsonRoot.minX = this.minX\n        jsonRoot.minY = this.minY\n        jsonRoot.maxX = this.maxX\n        jsonRoot.maxY = this.maxY\n\n        jsonRoot.transform = Cesium.Matrix4.toArray(this.transform)\n\n        this.children.forEach(level0 => {\n            if (level0._isEmptyLOD) return;\n            level0 = toJSON(level0, this.path)\n            jsonRoot.children.push(level0)\n        })\n        return jsonRoot;\n    }\n\n    selectTileLoaded(position) {\n        return selectTileLoaded(this, position);\n    }\n    static updatePositionClamped(lodSet, entities, viewer, foreUpdate) {\n        return updatePositionClamped(lodSet, entities, viewer, foreUpdate)\n    }\n\n}",
    "import traverse from  \"../../utils/Source/traverse.js\";\n\nimport PagedLODState from  \"./PagedLODState.js\";\n\n\nexport function pendingSort(a, b) {\n    //根节点优先\n    if (a._level != b._level) {\n        if (a._level == 0) return -1\n        if (b._level == 0) return 1;\n        if (a.tileset.sortType == 'LevelFirst') {\n            return a._level - b._level\n        }\n    }\n\n    //根节点距相机近者优先\n    if (a.root && b.root && a.root != b.root) {\n        if (a.root._radiusPixel != b.root._radiusPixel) {\n            return a.root._radiusPixel - b.root._radiusPixel;\n        }\n        if (a.root._level != b.root._level) {\n            return a.parent._level - b.parent._level;\n        }\n        return a.root._distanceToCamera - b.root._distanceToCamera;\n    }\n    //父级距相机近者优先\n    if (a.parent && b.parent && a.parent != b.parent) {\n        if (a.parent._radiusPixel != b.parent._radiusPixel) {\n            return a.parent._radiusPixel - b.parent._radiusPixel;\n        }\n        // if (a.parent._level != b.parent._level) {\n        //     return a.parent._level - b.parent._level;\n        // }\n        return a.parent._distanceToCamera - b.parent._distanceToCamera\n    }\n\n    if (a._radiusPixel != b._radiusPixel) {\n        return a._radiusPixel - b._radiusPixel;\n    }\n\n    if (a._distanceToCamera != undefined && b._distanceToCamera != undefined) {\n        return a._distanceToCamera - b._distanceToCamera\n    }\n\n    var da = a.parent ? a.parent._distanceToCamera : a._distanceToCamera\n    var db = b.parent ? b.parent._distanceToCamera : b._distanceToCamera;\n\n    return da - db;\n}\n\n/**\n * \n * @param {PagedLOD} tileset \n * @constructor\n */\nexport function PagedLODQueue(tileset) {\n    /**\n     * @type  {PagedLOD[]}\n     * @private\n     */\n    var renderList = [];\n    /**\n     * @type  {PagedLOD[]}\n     * @private\n     */\n    var pendingList = [];\n    /**\n     * @type  {PagedLOD[]}\n     * @private\n     */\n    var expiredList = [];\n    /**\n     * @type  {PagedLOD[]}\n     * @private\n     */\n    var debuggingList = []\n    var memeryRendering = 0;\n\n    this.init = function init() {\n        expiredList.length = 0;\n        pendingList.length = 0;\n        renderList.length = 0;\n        memeryRendering = 0;\n        debuggingList.length = 0\n    }\n    this.reset = this.init;\n\n    this.getExpiredList = function getExpiredList() {\n        tileset.children.forEach(function (root) {\n            traverse(root.children, function (lod) {\n                if ((lod._loading && !lod.content)\n                    || !lod.uri.endsWith(tileset.ext)\n                    || lod._timeStamp == tileset._currentTimeStamp) {\n                    return;\n                }\n                expiredList.push(lod);\n            })\n        });\n        return expiredList;\n    }\n\n    this.sortPendings = function sortPendings() {\n        pendingList.sort(pendingSort);\n    }\n\n    /**\n     * @returns {PagedLOD}\n     */\n    this.shiftPending = function shiftPending() {\n        return pendingList.shift()\n    }\n\n    this.pushDebugging = function pushDebugging(lodDebugging) {\n        debuggingList.push(lodDebugging);\n    }\n    /**\n     * \n     * @param {PagedLOD} lodPending \n     */\n    this.pushPending = function pushPending(lodPending) {\n        var state = lodPending.state;\n        lodPending._timeStamp = tileset._currentTimeStamp;\n        if (lodPending.isEmbedLOD && (state == PagedLODState.UNLOADED || state == PagedLODState.EXPIRED)) return;\n        if (state == PagedLODState.LOADING\n            || state == PagedLODState.RENDER_ITEM_INITIALIZING\n            || state == PagedLODState.TEXTRURE_INITIALIZING\n        ) return;\n\n        pendingList.push(lodPending)\n    }\n\n    /**\n     * \n     * @param {PagedLOD} lodPending \n     */\n    this.pushRendering = function pushRendering(lodRendering) {\n        lodRendering._timeStamp = tileset._currentTimeStamp;\n        renderList.push(lodRendering);\n        memeryRendering += lodRendering._contentMemorySize;\n    }\n\n    /**\n     * \n     * @param {(Object3D|THREE.Object3D)[]} dstRenderList \n     */\n    this.getRenderList = function getRenderList(dstRenderList) {\n        renderList.forEach(function (lod) {\n            var content = lod.content;\n            var tileset = lod.tileset;\n            var debugVolume = lod.debugVolume;\n            var showDebugVolume = lod.showDebugVolume;\n            var debugVolumeOnly = tileset.debugVolumeOnly;\n\n            if (content && !debugVolumeOnly) {\n\n                //同步阴影开关\n                let { castShadow, receiveShadow } = tileset;\n                if (castShadow != lod.castShadow || receiveShadow != lod.receiveShadow) {\n                    lod.receiveShadow = receiveShadow\n                    lod.castShadow = castShadow\n                    traverse(content, obj => {\n                        obj.castShadow = castShadow\n                        obj.receiveShadow = receiveShadow\n                    })\n                }\n\n                dstRenderList.push(content);\n            }\n\n            if (showDebugVolume && debugVolume && debugVolume.isObject3D) {\n                debugVolume.frustumCulled = false;\n                dstRenderList.push(debugVolume);\n            }\n        })\n    }\n\n    Object.defineProperties(this, {\n        memeryRendering: {\n            get: function () {\n                return memeryRendering;\n            }\n        },\n        debuggingList: {\n            get: function () {\n                return debuggingList;\n            }\n        },\n        renderList: {\n            get: function () {\n                return renderList;\n            }\n        },\n        pendingList: {\n            get: function () {\n                return pendingList;\n            }\n        },\n        expiredList: {\n            get: function () {\n                return getExpiredList();\n            }\n        }\n    })\n}\n",
    "\nconst PagedLODState = {\n    CANCELLED:-1,\n    UNLOADED: 0,\n    LOADING: 1,\n    LOADED: 2,\n    TEXTRURE_INITIALIZING: 3,\n    TEXTRURE_INITIALIZED: 4,\n    RENDER_ITEM_INITIALIZING: 5,\n    READY: 7,\n    EXPIRED: 8,\n    ERROR: 9\n}\nexport default PagedLODState;",
    "\nimport QuadtreeNode from  \"./QuadtreeNode.js\";\n\nimport releaseResources from  \"./releaseResources.js\";\n\nimport VISMLoader from  \"./model/VISMLoader.js\";\n\nimport TextureUtils from  \"../../core/Source/webgl/TextureUtils.js\";\n\nimport { packBoundingBox, packBoundingSphere, selectTileLoaded, updatePositionClamped } from  \"./LODUtils.js\";\n\nimport traverse from  \"../../utils/Source/traverse.js\";\n\n\nfunction _checkIfNeedRequest(lod, requestList) {\n    let content = lod.content;\n    if (content && lod.loader && !content._model) {\n\n        if (!lod._loading) {//load from  uri\n            // lod._timeStamp = Date.now();\n            if (requestList.indexOf(lod) == -1) requestList.push(lod);\n        }\n        return true;\n    }\n    return false;\n}\n\nexport default class QuadtreeLOD extends QuadtreeNode {\n    /**\n     * \n     * @param {object} options \n     * @param {{\n     * box:Cesium.AxisAlignedBoundingBox|number[],\n     * sphere:Cesium.BoundingSphere|number[]\n     * }} options.boundingVolume \n     */\n    constructor(options) {\n        super(options);\n\n        const { defaultValue, when, Event } = Cesium;\n\n        this.ready = true;\n        this.show = defaultValue(options.show, true);\n        this.readyPromise = when.defer();\n        this.maximumTextureSize = options.maximumTextureSize;\n        this.maxMipmapSize = defaultValue(options.maxMipmapSize, 1024);\n        this.geometryErrorScale = defaultValue(options.geometryErrorScale, 1)\n\n        this.isQuadtreeLOD = true;\n        this.tileLoaded = new Event();\n\n        /**\n         * @type {QuadtreeLOD[]}\n         */\n        this.children = [];\n        /**\n         * @type {number}\n         */\n        this.level = options.level || 0;\n        /**\n         * @type {number}\n         */\n        this.maxLevel = options.maxLevel;\n        /**\n         * @type {{\n             contain:QuadtreeNode[],\n             intersect:QuadtreeNode[],\n             length:number\n           }}\n         */\n        this._contentSet = {\n            contain: [],\n            intersect: [],\n            length: 0\n        };\n        if (options.contentSet) {\n            this.contentSet = options.contentSet;\n        }\n        /**\n         * @type {'ADD'|'REPLACE'}\n         */\n        this.refine = options.refine || 'ADD';\n\n        /**\n         * @type {'PIXEL_SIZE_ON_SCREEN'|'DISTANCE_TO_CAMERA'}\n         */\n        this.rangeMode = options.rangeMode || 'PIXEL_SIZE_ON_SCREEN';\n        /**\n         * @type {QuadtreeLOD}\n         */\n        this.parent = options.parent;\n        /**\n         * @type {QuadtreeLOD}\n         */\n        this.root = options.root;\n\n        this.translucent = defaultValue(options.translucent, false);\n        this.alphaTest = 0;\n        if (typeof options.alphaTest == 'number') {\n            this.alphaTest = options.alphaTest;\n        }\n\n        this._memorySize = 0;\n        this.maximumMemorySize = options.maximumMemorySize || 200 * 1024 * 1024;\n\n    }\n\n    get contentSet() {\n        return this._contentSet;\n    }\n    set contentSet(contentSet) {\n        this.setContentSet(contentSet);\n    }\n\n    //\n\n    selectTileLoaded(position) {\n        return selectTileLoaded(this, position);\n    }\n\n    //\n\n    /**\n     * @private\n     */\n    isCommandsReady() {\n        let content = this.content, model;\n        if (!content && !this.contentSet.length) return false;\n\n        if (this.content) {\n            model = this.content.isObject3D ? this.content : this.content._model;\n        } else if (this.contentSet.length) {\n            return true;\n        }\n\n        if (model) {\n            let ready = undefined;\n            traverse(model, obj => {\n                if (ready == false) return;\n\n                if (obj.isMesh && obj.visible) {\n                    if (ready == undefined) ready = true;\n                    let renderItems = obj.renderItems\n                    if (!renderItems) ready = false;\n                    else {\n                        renderItems.forEach(renderItem => {\n                            if (!renderItem.loaded) ready = false\n                        })\n                    }\n                }\n            });\n\n            return ready;\n        }\n\n        return false;\n    }\n    /**\n     * \n     * @param {\n        {\n            contain:QuadtreeNode[],\n            intersect:QuadtreeNode[],\n            length:number\n        }\n     * } contentSet \n     * @private\n     */\n    setContentSet(contentSet) {\n        let getContent = (node) => {\n            if (!(node instanceof QuadtreeNode)) {\n                node.modelMatrix = node.modelMatrix || this.modelMatrix;\n                node.rtcCenter = node.rtcCenter || this.rtcCenter;\n                node.debugVolume = this.debugVolume;\n                node.showDebugVolume = this.showDebugVolume;\n                node = new QuadtreeNode(node);\n            }\n            return node;\n        }\n\n        for (let i = 0; i < contentSet.contain.length; i++) {\n            const node = contentSet.contain[i];\n            contentSet.contain[i] = getContent(node);\n        }\n\n        for (let i = 0; i < contentSet.intersect.length; i++) {\n            const node = contentSet.intersect[i];\n            contentSet.intersect[i] = getContent(node);\n        }\n\n        this._contentSet = contentSet;\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {QuadtreeLOD[]} renderList \n     * @param {QuadtreeLOD[]} requestList \n     * @param {QuadtreeLOD[]} textureInitList \n     * @private\n     */\n    visit(frameState, renderList, requestList, textureInitList) {\n\n        if (this.frameNumber != frameState.frameNumber) {\n            this.computeVisibility(frameState);\n        }\n\n        if (this._visible) {\n            renderList.maxLevel = Math.max(this.level, renderList.maxLevel);\n            renderList.visitTimes++;\n\n            if (_checkIfNeedRequest(this, requestList)) {\n                this.frameNumber = frameState.frameNumber;\n                return\n            }\n\n            //v3\n\n            let needLoadChildren = this.children.length > 0, childrenReady = false;\n            if (needLoadChildren) {\n                let nextRange = this.children[0].minRange;\n                needLoadChildren = this.range >= nextRange;\n            }\n\n            if (needLoadChildren) {\n                childrenReady = true;\n\n                this.children.forEach(child => {\n\n                    let visibility = frameState.cullingVolume.computeVisibility(child.boundingSphereWC)\n                    if (visibility == Cesium.Intersect.OUTSIDE) {\n                        return;\n                    }\n                    child.visibility = visibility;\n                    child._visible = true;\n                    child.computeRange(frameState, this.geometryErrorScale);\n                    child.frameNumber = frameState.frameNumber;\n\n                    child.visit(frameState, renderList, requestList, textureInitList);\n\n                    let content = child.content, contentSet = child.contentSet;\n                    if (content && !content.isObject3D) {\n\n                        if (!content._model) {\n                            //子节点可见，但是模型未加载完成，使用父级暂时代替\n                            childrenReady = false;// child.isCommandsReady();\n                        }\n                        else if (!content._model._ready) {\n                            //子节点可见，但是模型未加载完成，使用父级暂时代替\n                            childrenReady = false;\n                            textureInitList.push(child);\n                        } else if (!child.isCommandsReady()) {\n                            childrenReady = false;\n                        }\n\n                    } else if (contentSet && contentSet.length) {\n                        if (!contentSet.ready) childrenReady = false;\n                    }\n\n                });\n\n            }\n\n            if (!childrenReady || this.refine == 'ADD') {\n\n                if (this.content && this.content._model && !this.content._model._ready) {\n                    textureInitList.push(this);\n                }\n                else {\n\n                    if (this.content && !this._commandsReady) {\n                        this._commandsReady = true;\n                        if (this.root) this.root._needsRaiseTileLoaded = true;\n                    }\n\n                    renderList.push(this);\n                }\n            }\n        }\n\n        this.frameNumber = frameState.frameNumber;\n    }\n\n    /**\n     * Called by MeshViusalizer\n     * @param {Cesium.FrameState} frameState \n     * @param {THREE.Object3D[]} renderList \n     * @private\n     * @override QuadtreeNode.prototype.render\n     */\n    render(frameState, renderList) {\n        if (!this.ready || !this.show) return;\n\n        const { when, requestAnimationFrame, Color } = Cesium;\n\n        this._needsRaiseTileLoaded = false;\n\n        let cacheRenderList = this._cacheRenderList || [];\n        if (frameState.frameNumber != this.frameNumber) {\n            cacheRenderList.splice(0);\n\n            this.computeVisibility(frameState);\n            this.frameNumber = frameState.frameNumber;\n            if (!this._visible) return;\n\n            this._currentTimeStamp = Date.now();\n\n            /**\n             * @type {QuadtreeLOD[]}\n             * @private\n             */\n            var lodRenderList = [], requestList = [],\n                textureInitList = [];\n\n            lodRenderList.maxLevel = this.level;\n            lodRenderList.visitTimes = 0;\n\n            this.children.forEach(root => {\n                root._timeStamp = this._currentTimeStamp;\n                root.visit(frameState, lodRenderList, requestList, textureInitList);\n            });\n\n            lodRenderList.sort((a, b) => {\n                return a._distanceToCamera - b._distanceToCamera\n            });\n\n            //get renderable tile's contents\n            var debugVolumeColor = this.debugVolumeColor;\n            lodRenderList.forEach((lod) => {\n                if (lod.show == false) return;\n\n                if (lod.debugVolume && this.showDebugVolume) {\n                    lod.debugVolume.frustumCulled = false;\n                    if (debugVolumeColor) {\n                        var debugMaterial = lod.debugVolume.material\n                        if (debugMaterial._debugVolumeColor != debugVolumeColor) {\n                            debugMaterial._debugVolumeColor = debugVolumeColor\n                            debugMaterial.color.set(debugVolumeColor.toCssColorString())\n                        }\n                    }\n                    cacheRenderList.push(lod.debugVolume);\n                }\n\n                if (!lod.content && lod.contentSet.length == 0) {\n                    return;\n                }\n\n                lod._timeStamp = this._currentTimeStamp;\n\n                if (lod.contentProvider) {\n                    if (!lod._contentRequested || this._version != lod._version) {\n\n                        if (!this._contentRequesting) {\n                            this._contentRequesting = true;\n                            let object3d = lod.contentProvider.requestContent(lod.contentSet, this.rtcCenter);\n                            when(object3d, (object3d) => {\n\n                                traverse(object3d, mesh => {\n                                    mesh.frustumCulled = false;\n                                    if (mesh.isMesh && this.rtcCenter) mesh.uniformMapLoadedCallback = this.uniformMapLoadedCallback;\n                                });\n\n                                if (lod.content && this.visualizer) {\n                                    this.visualizer.remove(lod.content);\n                                }\n\n                                lod.content = object3d;\n                                this._contentRequesting = false;\n                                lod._version = this._version;\n\n                            });\n                            lod._contentRequested = true;\n                        }\n\n                        if (lod.content) {\n                            cacheRenderList.push(lod.content);\n                        }\n\n                    } else if (lod.content) {\n                        cacheRenderList.push(lod.content);\n                    }\n\n                } else if (lod.content) {\n\n                    let content = lod.content;\n                    if (content.isObject3D) {\n                        cacheRenderList.push(content);\n                    }\n                    else if (content._model) {\n                        if (!content._model._ready) {\n                            if (textureInitList.indexOf(lod) == -1) textureInitList.push(lod)\n                        }\n                        else cacheRenderList.push(content._model);\n\n                    } else {\n                        _checkIfNeedRequest(lod, requestList)\n                    }\n                }\n\n                let contentSet = lod.contentSet;\n                if (this.generateLOD == false && contentSet && contentSet.length > 0) {\n                    contentSet.ready = true;\n\n                    contentSet.contain.forEach(contentNode => {\n\n                        if (contentNode.content && !contentNode.content._ready) {\n                            contentNode._distanceToCamera = frameState.camera.distanceToBoundingSphere(this.boundingSphereWC);\n                            contentSet.ready = false;\n                            textureInitList.push(contentNode)\n                        }\n                    });\n\n                    contentSet.intersect.forEach(contentNode => {\n                        if (contentNode.debugVolume) contentNode.debugVolume.material.defaultColor = Color.RED;\n\n                        if (contentNode.content && !contentNode.content._ready) {\n                            contentNode._distanceToCamera = frameState.camera.distanceToBoundingSphere(contentNode.boundingSphereWC);\n                            contentSet.ready = false;\n                            textureInitList.push(contentNode)\n                        }\n                    })\n\n                    if (contentSet.ready) {\n                        contentSet.contain.forEach(contentNode => {\n                            if (contentNode.debugVolume) contentNode.debugVolume.material.defaultColor = Color.CYAN;\n\n                            if (contentNode.content) {\n                                contentNode.render(frameState, cacheRenderList);\n                            }\n                        });\n\n                        contentSet.intersect.forEach(contentNode => {\n                            if (contentNode.debugVolume) contentNode.debugVolume.material.defaultColor = Color.RED;\n\n                            if (contentNode.content) {\n                                contentNode.render(frameState, cacheRenderList);\n                            }\n                        });\n                    }\n\n                }\n\n            });\n\n\n            //load one tile\n            if (requestList && requestList.length > 0 && !this._loading) {\n                this._loading = true\n\n                requestList.sort((a, b) => {\n                    return a._distanceToCamera - b._distanceToCamera;\n                });\n\n                let lodToLoad = requestList.shift();\n                lodToLoad._timeStamp = this._currentTimeStamp;\n\n                this.imageCache = this.imageCache || {};\n                this.texturesByUrl = this.texturesByUrl || {}\n\n                let imageCache = this.imageCache[lodToLoad.level];\n                let texturesByUrl = this.texturesByUrl[lodToLoad.level];\n\n                if (!imageCache) {\n                    imageCache = {};\n                    this.imageCache[lodToLoad.level] = imageCache;\n                }\n\n                lodToLoad._loadContent(imageCache, texturesByUrl).then(() => {\n                    this._memorySize += lodToLoad._contentMemorySize;\n                    lodToLoad._timeStamp = this._currentTimeStamp;\n                    requestAnimationFrame(() => {\n                        this._loading = false\n                    });\n                });\n            }\n\n            //初始化可渲染瓦片的纹理\n            if (textureInitList.length > 0 && !this._texureCreating) {\n                if (this.generateLOD != false) {\n                    textureInitList.sort((a, b) => {\n                        a = a.parent ? a.parent._distanceToCamera : a._distanceToCamera\n                        b = b.parent ? b.parent._distanceToCamera : b._distanceToCamera;\n                        return a - b;\n                    });\n                }\n\n                let tileToInitTexture = textureInitList.shift(),\n                    content = tileToInitTexture.content._model || tileToInitTexture.content,\n                    textureCache = this.visualizer._textureCache;\n\n                tileToInitTexture._timeStamp = this._currentTimeStamp;\n\n                this._cacheTextureIds = this._cacheTextureIds || [];\n                let uuidPrefix = this.generateLOD == false ? '' : 'L' + tileToInitTexture.level + '_';\n\n                content._ready = TextureUtils.initTexture(\n                    frameState, content.mesh || content,\n                    textureCache, this._cacheTextureIds, uuidPrefix,\n                    this.maximumTextureSize, this.maxMipmapSize);\n\n                this._texureCreating = true;\n\n                requestAnimationFrame(() => {\n                    // if (content._ready) {\n                    //     this.tileLoaded.raiseEvent(this, tileToInitTexture);\n                    // }\n                    // content._ready = true;\n                    this._texureCreating = false;\n                });\n            }\n\n            if (this._memorySize > this.maximumMemorySize) {\n                // debugger\n                this.unload();\n            }\n        }\n\n        cacheRenderList.forEach(item => {\n            renderList.push(item);\n        })\n\n        this._cacheRenderList = cacheRenderList;\n\n        if (this._needsRaiseTileLoaded) {\n            requestAnimationFrame(() => {\n                this.tileLoaded.raiseEvent(this);\n            })\n        }\n\n    }\n\n    _loadContent(imageCache, texturesByUrl) {\n\n        this._loading = true;\n        return new Promise((resolve, reject) => {\n            let loader = this.loader,\n                content = this.content;\n\n            this.uri = content.uri;\n\n            loader.load(content.uri, model => {\n                content._model = model;\n                this._contentMemorySize = model._memorySize;\n\n                model.traverse(obj => {\n                    if (obj.isMesh) {\n                        /**\n                         * @type {THREE.Material[]}\n                         * @private\n                         */\n                        var materials = Array.isArray(obj.material) ? obj.material : [obj.material];\n                        materials.forEach(material => {\n                            material.autoRefresh = false;\n\n                            if (material.transparent) {\n                                if (this.alphaTest && this.alphaTest > 0) {\n                                    material.alphaTest = this.alphaTest;\n                                } else if (this.translucent || this.root.translucent) {\n                                    material.translucent = true;\n                                    // material.opacity = 0.5;\n                                    // material.depthWrite = false\n                                    // material.depthFunc = THREE.LessDepth\n                                }\n                            }\n\n                        })\n\n                        obj.pickObject = {\n                            id: this,\n                            mesh: obj,\n                            primitive: this\n                        }\n\n                        //GeometryUtils.clampToIndices(obj.geometry);\n                    }\n\n                    obj.frustumCulled = false;\n                    obj.matrixAutoUpdate = false;\n                    obj.modelMatrixNeedsUpdate = false;\n                    obj.modelMatrix = this.modelMatrix;\n                });\n                this._loading = false;\n                resolve(model);\n            }, undefined, (err) => {\n                this._loading = false;\n                console.error(err);\n                reject(err);\n            }, {\n                loadTexture: true,\n                imageCache: imageCache,\n                textureCache: texturesByUrl\n            })\n        })\n\n    }\n\n    unload() {\n\n        if (this.level == 0) {\n            let expiredTiles = [];\n            this.children.forEach(root => {\n                traverse(root.children, node => {\n                    if (node._loading || !node.content || !node.content._model) return;\n\n                    if (node._timeStamp != this._currentTimeStamp) {\n                        expiredTiles.push(node);\n                    }\n                })\n            });\n\n            expiredTiles.sort((a, b) => {\n                return b._timeStamp / b._distanceToCamera - a._timeStamp / b._distanceToCamera;\n            });\n\n            let stack = expiredTiles.splice(0);\n            do {\n                let expiredTile = stack.pop();\n\n                expiredTile.unload();\n                if (this._memorySize > 0) this._memorySize -= expiredTile._contentMemorySize;\n                else break;\n            } while (stack.length > 0);\n\n            return;\n        }\n\n        if (this.content && this.content._model) {\n            let visualizer = this.root.visualizer;\n            let model = this.content._model;\n            debugger\n            visualizer.remove(model, true);\n\n            releaseResources(model);\n            delete this.content._model;\n\n        }\n\n        this._isExpired = true;\n        this._loading = false;\n    }\n\n    destroy() {\n\n        const destroyObject = Cesium.destroyObject;\n\n        let visualizer = this.visualizer;\n        this._cacheRenderList && this._cacheRenderList.splice(0)\n        traverse(this.children, (node) => {\n\n            node._contentSet && (node._contentSet.contain.splice(0) && node._contentSet.intersect)\n            node._contentSet = null;\n\n            if (node.debugVolume) {\n                node.debugVolume = visualizer.remove(node.debugVolume);\n            }\n            if (node.content) {\n\n                let content = node.content._model ? node.content._model : node.content;\n                if (visualizer) visualizer.remove(content, true);\n                releaseResources(content);\n                node.content = content.destroy && content.destroy();\n\n            }\n            delete node.contentProvider;\n            delete node.boundingVolume\n            delete node.visualizer\n            delete node.uniformMapLoadedCallback;\n            destroyObject(node);\n        })\n\n        visualizer && visualizer.remove(this, true);\n\n        if (this._cacheTextureIds && visualizer) {\n            this._cacheTextureIds.forEach(uuid => {\n                let tex = visualizer._textureCache[uuid]\n                if (tex) {\n                    (!tex.isDestroyed || !tex.isDestroyed()) && tex.destroy();\n                    delete visualizer._textureCache[uuid];\n                }\n            })\n            this._cacheTextureIds = null;\n        }\n\n        this.children.splice(0);\n\n        this._contentSet && (this._contentSet.contain.splice(0) && this._contentSet.intersect)\n        this._contentSet = null;\n        this.visualizer = null\n        this.imageCache = null;\n\n        return destroyObject(this)\n    }\n\n    toJSON() {\n        var json = {\n            boundingVolume: {\n                box: packBoundingBox(this.boundingBox),\n                sphere: packBoundingSphere(this.boundingSphere)\n            },\n            children: [],\n            level: this.level,\n            content: this.content,\n            contentSet: this.contentSet,\n            minRange: this.minRange,\n            refine: this.refine\n        }\n\n        this.children.forEach(child => {\n            child = child.toJSON()\n            child.parent = json;\n            json.children.push(child);\n        })\n        return json;\n    }\n    /**\n     * \n     * @param {QuadtreeLOD} lodSet \n     * @param {Cesium.Entity[]} entities \n     * @param {Cesium.Viewer}viewer\n     * @param {boolean}[foreUpdate=false]\n     */\n    static updatePositionClamped(lodSet, entities, viewer, foreUpdate) {\n        return updatePositionClamped(lodSet, entities, viewer, foreUpdate);\n    }\n    /**\n     * \n     * @param {object} options \n     * @param {string} options.url \n     * @param {Cesium.Matrix4} options.modelMatrix\n     * @param {THREE.LoadingManager} [options.manager]\n     * @param {string} [options.dracoDecoderPath]\n     * @param {number} [options.alphaTest]\n     * @param {number} [options.maximumMemorySize] \n     * @param {THREE.Loader} [options.loader]\n     * @param {boolean} [options.debugVolume]\n     * @param {boolean} [options.showDebugVolume]\n     * @param {'ADD'|'REPLACE'} [options.refine]\n     * @param {number} [options.minRange]\n     * @param {number} [options.rangePower=4]\n     * @param {number} [options.maxMipmapSize=1024]\n     * @param {number}[options.maximumTextureSize]\n     * @param {boolean}[options.translucent]\n     * @returns  {QuadtreeLOD}\n     */\n    static load(options) {\n        let url = options.url, manager = options.manager;\n\n        options.rangePower = options.rangePower || 4;\n        let rootPath = THREE.LoaderUtils.extractUrlBase(url);\n        if (rootPath && rootPath.length > 0 && !rootPath.endsWith('/')) {\n            rootPath += '/';\n        }\n\n        let root = new QuadtreeLOD({\n            modelMatrix: options.modelMatrix,\n            maximumMemorySize: options.maximumMemorySize,\n            alphaTest: options.alphaTest,\n            level: 0,\n            maxMipmapSize: options.maxMipmapSize,\n            maximumTextureSize: options.maximumTextureSize,\n            translucent: options.translucent,\n            geometryErrorScale: options.geometryErrorScale\n        });\n\n        root.ready = false;\n\n        let fileLoader = new THREE.FileLoader(manager);\n        fileLoader.load(url, (data) => {\n            let json = JSON.parse(data);\n\n            this.fromJSON(json, options, root);\n            root.uri = url;\n            traverse(root, node => {\n                if (node.content && node.content.uri) {\n                    node.content.uri = rootPath + node.content.uri\n                }\n                if (options.minRange) {\n                    node.minRange = options.minRange * Math.pow(options.rangePower, node.level)\n                }\n            })\n\n            root.ready = true;\n            root.readyPromise.resolve(root);\n        }, undefined, (err) => {\n            root.readyPromise.reject(err);\n        });\n\n        return root;\n    }\n\n    /**\n     * \n     * @param {object} json \n     * @param {object} options \n     * @param {Cesium.Matrix4} options.modelMatrix\n     * @param {THREE.LoadingManager} [options.manager]\n     * @param {string} [options.dracoDecoderPath]\n     * @param {number} [options.alphaTest]\n     * @param {THREE.Loader} [options.loader]\n     * @param {boolean} [options.debugVolume]\n     * @param {boolean} [options.showDebugVolume]\n     * @param {'ADD'|'REPLACE'} [options.refine]\n     * @param {QuadtreeLOD} root\n     * @returns {QuadtreeLOD} root\n     */\n    static fromJSON(json, options, root) {\n\n        let loader = options.loader;\n        if (!loader) {\n            loader = new VISMLoader(options.manager);\n            if (options.dracoDecoderPath) {\n                loader.setDracoDecoderPath(options.dracoDecoderPath);\n            }\n            options.loader = loader;\n        }\n\n        // \n        let rootOptions = {\n            modelMatrix: options.modelMatrix,\n            boundingVolume: json.boundingVolume,\n            content: json.content,\n            level: json.level,\n            minRange: json.minRange,\n            refine: json.refine || options.refine,\n            debugVolume: !!options.debugVolume,\n            showDebugVolume: !!options.showDebugVolume,\n            alphaTest: options.alphaTest,\n            maximumMemorySize: options.maximumMemorySize\n        }\n\n        if (!root) {\n            root = new QuadtreeLOD(rootOptions)\n        } else {\n            root.init(rootOptions)\n        }\n\n        root.loader = options.loader;\n\n        this.createChildren(root, json.children, root, options);\n        return root;\n    }\n\n    /**\n     * \n     * @param {QuadtreeLOD} lodNode \n     * @param {object[]} childrenJSON  \n     * @param {QuadtreeLOD} root \n     * @param {object} options \n     * @param {Cesium.Matrix4} options.modelMatrix\n     * @param {THREE.Loader} [options.loader]\n     * @param {boolean} [options.debugVolume]\n     * @param {boolean} [options.showDebugVolume]\n     * @param {'ADD'|'REPLACE'} [options.refine]\n     */\n    static createChildren(lodNode, childrenJSON, root, options) {\n        lodNode.children = childrenJSON.map(childJSON => {\n            let child = new QuadtreeLOD({\n                modelMatrix: options.modelMatrix,\n                boundingVolume: childJSON.boundingVolume,\n                content: childJSON.content,\n                level: childJSON.level,\n                debugVolume: !!options.debugVolume,\n                showDebugVolume: !!options.showDebugVolume,\n                refine: childJSON.refine || options.refine,\n                minRange: childJSON.minRange,\n                alphaTest: options.alphaTest\n            });\n            child.loader = options.loader;\n            child.root = root;\n            child.parent = lodNode;\n\n            if (childJSON.children && childJSON.children.length) {\n                this.createChildren(child, childJSON.children, root, options);\n            }\n            return child;\n        })\n    }\n}\n\n",
    "import GeometryUtils from  \"../../core/Source/GeometryUtils.js\";\n\nimport computeArea from  \"../../utils/Source/computeArea.js\";\n\nimport QuadtreeLOD from  \"./QuadtreeLOD.js\";\n\nimport QuadtreeNode from  \"./QuadtreeNode.js\";\n\n\nlet _quadtreeLODBox1, _quadtreeLODBox2;\n\nfunction setBoxCache(a, b) {\n    if (!_quadtreeLODBox1) _quadtreeLODBox1 = new THREE.Box3();\n    if (!_quadtreeLODBox2) _quadtreeLODBox2 = new THREE.Box3();\n\n    _quadtreeLODBox1.min.copy(a.minimum || a.min);\n    _quadtreeLODBox1.max.copy(a.maximum || a.max);\n\n    _quadtreeLODBox2.min.copy(b.minimum || b.min);\n    _quadtreeLODBox2.max.copy(b.maximum || b.max);\n}\n\n/**\n * @example\n    var root = QuadtreeLODUtil.create({\n        rootBoundingBox: model.aabb,\n        maxLevel: 6,\n        zSliceLevel: 5,\n        minRange: 64,\n        debugVolume: true,\n        showDebugVolume: true,\n        debugVolumeColor: Cesium.Color.CYAN,\n        modelMatrix: meshVisualizer.modelMatrix\n    })\n    console.log('QuadtreeLOD', root);\n    let rootJson = root.toJSON()\n    console.log('QuadtreeLOD json', rootJson);\n\n    root = QuadtreeLODUtil.fromJSON(rootJson, {\n        debugVolume: true,\n        showDebugVolume: true,\n        debugVolumeColor: Cesium.Color.CYAN,\n        modelMatrix: meshVisualizer.modelMatrix\n    })\n    console.log('fromJSON LOD', root);\n    meshVisualizer.add(root);\n */\nexport default class QuadtreeLODUtil {\n\n    /**\n     * \n     * @param {THREE.Mesh} mesh \n     */\n    static computeLODPower(mesh) {\n\n        const Cartesian3 = Cesium.Cartesian3;\n\n        let geometry = mesh.geometry;\n        let positions = geometry.attributes.position;\n        positions = positions.array || positions.values;\n\n        if (!geometry.boundingBox) geometry.computeBoundingBox()\n\n        let box = geometry.boundingBox;\n        let x0 = box.min.x, y0 = box.min.y,\n            x1 = box.max.x, y1 = box.max.y;\n\n        let a = new Cartesian3(x0, y1, 0),\n            b = new Cartesian3(x0, y0, 0),\n            c = new Cartesian3(x1, y0, 0),\n            d = new Cartesian3(x1, y1, 0);\n        let boxArea = 0;\n\n        boxArea += computeArea(a, b, c);\n        boxArea += computeArea(a, c, d);\n\n        let area = GeometryUtils.computeSurfaceArea(geometry);\n        let power = area * (area / boxArea)\n\n        // let vCount = positions.length / 3, faceCount = geometry.index ? geometry.index.count / 3 : vCount / 3;\n        // let msg = '面积a:' + area + ';\\n顶点数:' + vCount + \";\\n三角面数:\" + faceCount + \";\\n包围盒底面积A:\" + boxArea + \";\\n占比(a/A):\" + (area / boxArea).toFixed(2) + \";\\n权重:\" + power;\n        // console.log(msg);\n\n        return power;\n    }\n\n\n    /**\n     *  \n     * @example\n     *  ·————·————·\n     *  |         |\n     *  |         |\n     *  |         |\n     *  ·————·————·\n     * \n     *       |\n     *       |                ·------·------·\n     *       v               /      /      /|\n     *                      ·------·------· |\n     *  ·————·————·        /      /      /|/|\n     *  | 01 | 02 |       ·------·------· / |\n     *  ·————·————·  or   ｜     ｜     ｜/|/\n     *  | 03 | 04 |       ·------·------· / \n     *  ·————·————·       ｜     ｜     ｜/ \n                          ·------·------·   \n     *  sliceZ=false        sliceZ=true\n     *                      \n     * @param {\n      {\n        box: Cesium.AxisAlignedBoundingBox,\n        region:Cesium.TileBoundingRegion\n      }\n    } boundingVolume    \n     * @param {number} [xSize=2] \n     * @param {number} [ySize=2] \n     * @param {number} [zSize=1] \n     * @return {\n      {\n        box: Cesium.AxisAlignedBoundingBox,\n        region:Cesium.TileBoundingRegion\n      }[]\n    }\n     */\n    static splitBoundingVolume(boundingVolume, xSize, ySize, zSize) {\n        let boundingVolumeList = [], boxList, regionList;\n        if (boundingVolume.box) {\n            boxList = this.splitBoundingBox(boundingVolume.box, xSize, ySize, zSize)\n        }\n        if (boundingVolume.region) {\n            regionList = this.splitBoundingRegion(boundingVolume.region, xSize, ySize, zSize)\n        }\n\n        if (boxList || regionList) {\n            let length = regionList ? regionList.length : boxList.length\n            for (let i = 0; i < length; i++) {\n                let newBoundingVolume = {};\n                if (regionList) newBoundingVolume.region = regionList[i];\n                if (boxList) newBoundingVolume.box = boxList[i];\n                boundingVolumeList.push(newBoundingVolume);\n            }\n\n        }\n\n        return boundingVolumeList;\n    }\n\n    /**\n     * \n     * @param {Cesium.AxisAlignedBoundingBox} aabb  \n     * @param {number} [xSize=2] \n     * @param {number} [ySize=2] \n     * @param {number} [zSize=1] \n     * @return {Cesium.AxisAlignedBoundingBox[]}\n     * @private\n     */\n    static splitBoundingBox(aabb, xSize, ySize, zSize) {\n        const { Cartesian3, AxisAlignedBoundingBox } = Cesium;\n\n        let boxList = []\n        let size = Cartesian3.subtract(aabb.maximum, aabb.minimum, new Cartesian3());\n\n        let minimum = new Cartesian3(0, 0, 0);\n        let maximum = new Cartesian3(0, 0, 0);\n        let vertices = [minimum, maximum];\n\n        xSize = xSize || 2;\n        ySize = ySize || 2;\n        zSize = zSize || 1;\n\n        let xStep = 1 / xSize;\n        let yStep = 1 / ySize;\n        let zStep = 1 / zSize;\n\n        for (let i = 0; i < xSize; i++) {\n            let x = i * xStep, x1 = (i + 1) * xStep;\n            for (let j = 0; j < ySize; j++) {\n                let y = j * yStep, y1 = (j + 1) * yStep;\n\n                for (let k = 0; k < zSize; k++) {\n                    let z = k * zStep, z1 = (k + 1) * zStep;\n\n                    minimum = Cartesian3.fromElements(x, y, z, minimum);\n                    minimum = Cartesian3.multiplyComponents(size, minimum, minimum)\n                    minimum = Cartesian3.add(aabb.minimum, minimum, minimum);\n\n                    maximum = Cartesian3.fromElements(x1, y1, z1, maximum);\n                    maximum = Cartesian3.multiplyComponents(size, maximum, maximum)\n                    maximum = Cartesian3.add(aabb.minimum, maximum, maximum);\n\n                    var box = AxisAlignedBoundingBox.fromPoints(vertices);\n\n                    boxList.push(box);\n\n                }\n\n            }\n        }\n\n        return boxList;\n    }\n\n    /**\n     * \n     * @param {Cesium.TileBoundingRegion} region \n     * @param {number} [xSize=2] \n     * @param {number} [ySize=2] \n     * @param {number} [zSize=1] \n     * @return {Cesium.TileBoundingRegion[]}\n     * @private\n     */\n    static splitBoundingRegion(region, xSize, ySize, zSize) {\n        const { Rectangle, TileBoundingRegion } = Cesium;\n\n        let { west, south, width, height } = region.rectangle;\n        let { maximumHeight, minimumHeight } = region;\n        let deltH = maximumHeight - minimumHeight;\n        let regionList = [];\n\n        xSize = xSize || 2;\n        ySize = ySize || 2;\n        zSize = zSize || 1;\n\n        let xStep = 1 / xSize;\n        let yStep = 1 / ySize;\n        let zStep = 1 / zSize;\n\n        for (let i = 0; i < xSize; i++) {\n            let x = i * xStep * width, x1 = (i + 1) * xStep * width;\n            for (let j = 0; j < ySize; j++) {\n                let y = j * yStep * height, y1 = (j + 1) * yStep * height;\n\n                for (let k = 0; k < zSize; k++) {\n                    let z = k * zStep * deltH, z1 = (k + 1) * zStep * deltH;\n\n                    let rectangle = new Rectangle(\n                        west + x, south + y, west + x1, south + y1\n                    );\n\n                    let newReginon = new TileBoundingRegion({\n                        rectangle: rectangle,\n                        minimumHeight: minimumHeight + z,\n                        maximumHeight: minimumHeight + z1\n                    })\n\n                    regionList.push(newReginon);\n\n                }\n\n            }\n        }\n\n        return regionList;\n    }\n\n    /**\n     * if a contains b,then return true,otherwise return false.\n     * @param {Cesium.AxisAlignedBoundingBox|THREE.Box3} a \n     * @param {Cesium.AxisAlignedBoundingBox|THREE.Box3} b \n     * @returns {boolean}\n     */\n    static boxContains(a, b) {\n\n        setBoxCache(a, b);\n        return _quadtreeLODBox1.containsBox(_quadtreeLODBox2);\n    }\n\n\n    /**\n     * \n     * @param {Cesium.AxisAlignedBoundingBox|THREE.Box3} a \n     * @param {Cesium.AxisAlignedBoundingBox|THREE.Box3} b \n     * @returns {boolean}\n     */\n    static boxIntersect(a, b) {\n\n        setBoxCache(a, b);\n        let intersection = _quadtreeLODBox1.intersect(_quadtreeLODBox2);\n        intersection = !intersection.isEmpty();\n        return intersection;\n    }\n\n    /**\n     * if a contains b,then return true,otherwise return false.\n     * @param {Cesium.TileBoundingRegion} a \n     * @param {Cesium.TileBoundingRegion} b \n     * @returns {boolean}\n     */\n    static regionContains(a, b) {\n        let rectA = a.rectangle;\n        let rectB = b.rectangle;\n        let deltMinHeight = a.minimumHeight - b.minimumHeight;\n        let deltMaxHeight = a.maximumHeight - b.maximumHeight;\n\n        let contains = (\n            rectA.west - rectB.west <= 0\n            && rectA.east - rectB.east >= 0\n            && rectA.south - rectB.south <= 0\n            && rectA.north - rectB.north >= 0);\n\n        if (contains) {\n            contains = deltMinHeight <= 0 && deltMaxHeight >= 0;\n        }\n\n        return contains;\n    }\n\n\n    /**\n     *  \n     * @param {Cesium.TileBoundingRegion} a \n     * @param {Cesium.TileBoundingRegion} b \n     * @returns {boolean}\n     */\n    static regionIntersect(a, b) {\n        let rectA = a.rectangle;\n        let rectB = b.rectangle;\n        let deltH1 = a.maximumHeight - b.minimumHeight;\n        let deltH2 = b.maximumHeight - a.minimumHeight;\n        let intersect = deltH1 > 0 && deltH2 > 0;\n        if (intersect) {\n            intersect = !!Cesium.Rectangle.intersection(rectA, rectB);\n        }\n\n        return intersect;\n    }\n\n    /**\n     * \n     * @param {\n        {\n            uri:string,\n            boundingVolume: {\n                sphere: Cesium.BoundingSphere,\n                box?: Cesium.AxisAlignedBoundingBox,\n                region?:Cesium.TileBoundingRegion\n            } \n        }[]\n     *} contentSet \n     * @param {number}[power=2]\n     * @param {boolean}[recursive=true]\n     * @param {number}[maxRaius]\n     * @param {QuadtreeLOD} lod \n     * @param {(node:QuadtreeLOD,content:QuadtreeNode)=>boolean} [filter] \n     */\n    static filterContents(contentSet, lod, recursive, power, maxRaius, filter) {\n        power = power || 2\n        recursive = typeof recursive == 'undefined' ? true : recursive;\n\n        if (lod.level == 0) {//tree\n\n            lod.children.forEach(child => {\n                this.filterContents(contentSet, child, power, recursive, maxRaius, filter);\n            })\n            return;\n        }\n\n        var lodContentSet = {\n            contain: new Array(),\n            intersect: new Array(),\n            length: 0\n        };\n\n        var minRadius = lod.minRadius;\n        if (!minRadius) {\n\n            if (!maxRaius) {\n                maxRaius = contentSet.maxRaius || 0;\n                if (!maxRaius) {\n                    contentSet.forEach((content) => {\n                        maxRaius = Math.max(content.boundingVolume.sphere.radius, maxRaius)\n                    });\n                    contentSet.maxRaius = maxRaius;\n                }\n                maxRaius = Math.min(maxRaius, lod.boundingVolume.sphere.radius);\n                contentSet.maxRaius = maxRaius;\n            }\n\n            let radiusStep = maxRaius / Math.pow(power, lod.maxLevel);\n            minRadius = radiusStep * Math.pow(power, lod.maxLevel - lod.level);\n            // minRadius = maxRaius * (1.0 - lod.level / lod.maxLevel);\n            lod.minRadius = lod.level == lod.maxLevel ? 0 : minRadius;\n\n        }\n\n        contentSet.forEach((content) => {\n            if (lod.region && content.boundingVolume.region) {\n\n                let contentRegion = content.boundingVolume.region;\n                let lodRegion = lod.region;\n                if (this.regionContains(lodRegion, contentRegion)) {\n                    lodContentSet.contain.push(content);\n                    lodContentSet.length++\n                } else if (this.regionIntersect(lodRegion, contentRegion)) {\n                    lodContentSet.intersect.push(content);\n                    lodContentSet.length++\n                }\n\n            } else {\n\n                let contentBox = content.boundingVolume.box;\n                let lodBox = lod.boundingBox\n                if (this.boxContains(lodBox, contentBox)) {\n                    lodContentSet.contain.push(content);\n                    lodContentSet.length++\n                } else if (this.boxIntersect(lodBox, contentBox)) {\n                    lodContentSet.intersect.push(content);\n                    lodContentSet.length++\n                }\n\n            }\n\n        })\n\n        lod.contentSet = lodContentSet;\n        var currentContentSet = lodContentSet.contain.concat(lodContentSet.intersect);\n\n        if (recursive) {\n            lod.children.forEach(child => {\n                this.filterContents(currentContentSet, child, power, recursive, maxRaius || contentSet.maxRaius, filter);\n            })\n        } else {\n            currentContentSet.maxRaius = maxRaius;\n            lod._getContentSetBeforeFilter = function () {\n                return currentContentSet;\n            }\n        }\n\n        function filterByRadius(lodNode, content) {\n            let contentRadius = content.boundingVolume.sphere.radius\n            if (contentRadius <= lod.minRadius) return false;\n            if (lod.parent && contentRadius >= lod.parent.minRadius) return false\n            return true;\n        }\n\n        if (lod.parent && lod.parent.refine == 'ADD') {\n            filter = filter || filterByRadius;\n            let finalLodContentSet = {\n                contain: [],\n                intersect: [],\n                length: 0\n            };\n            lodContentSet.contain.forEach(content => {\n                if (filter(lod, content)) {\n                    finalLodContentSet.contain.push(content);\n                    finalLodContentSet.length++;\n                }\n            });\n            lodContentSet.intersect.forEach(content => {\n                if (filter(lod, content)) {\n                    finalLodContentSet.intersect.push(content);\n                    finalLodContentSet.length++;\n                }\n            });\n\n            lod.contentSet = finalLodContentSet;\n        }\n\n    }\n\n    /**\n     * \n     * @param {QuadtreeLOD} parent \n     * @param {number} maxLevel \n     * @param {number} minRange \n     * @param {boolean}[recursive=true]\n     */\n    static createLODTree(parent, maxLevel, minRange, recursive, zSliceLevel, xSize, ySize, zSize, debugVolume, debugVolumeColor, showDebugVolume) {\n\n        let level = parent.level + 1;\n        if (level > maxLevel) return;\n\n        zSliceLevel = zSliceLevel || Infinity;\n\n        let boundingVolumeList = this.splitBoundingVolume(parent.boundingVolume, level == 1 ? xSize : 2, level == 1 ? ySize : 2, (zSize && level == 1) ? zSize : 1);\n        boundingVolumeList.forEach((boundingVolume) => {\n\n            let child = new QuadtreeLOD({\n                parent: parent,\n                boundingVolume: boundingVolume,\n                level: level,\n                minRange: minRange * Math.pow(4, level - 1),\n                debugVolumeColor: debugVolumeColor,\n                debugVolume: debugVolume,\n                showDebugVolume: showDebugVolume,\n                modelMatrix: parent.modelMatrix,\n                rtcCenter: parent.rtcCenter,\n                maxLevel: maxLevel\n            });\n\n            if (recursive) {\n                this.createLODTree(child, maxLevel, minRange, recursive, zSliceLevel, xSize, ySize, zSize, debugVolume, debugVolumeColor, showDebugVolume);\n            } else {\n                child._createLODTreeDelay = (pRecursive) => {\n                    pRecursive = typeof pRecursive == 'undefined' ? false : pRecursive;\n                    this.createLODTree(child, maxLevel, minRange, pRecursive, zSliceLevel, xSize, ySize, zSize, debugVolume, debugVolumeColor, showDebugVolume);\n                }\n            }\n            parent.children.push(child);\n        })\n    }\n\n    /**\n     * \n     * @param {{\n     *   rootBoundingVolume:{box?:Cesium.AxisAlignedBoundingBox,region?:Cesium.TileBoundingRegion},\n     *   maxLevel:number,\n     *   xSize?:number,\n     *   ySize?:number,\n     *   zSize?:number,\n     *   zSliceLevel:number,\n     *   minRange:number,\n     *   debugVolumeColor?:Cesium.Color\n     *   debugVolume?: boolean,\n     *   showDebugVolume?: boolean,\n     *   modelMatrix?:Cesium.Matrix4,\n     *   rtcCenter?:Cesium.Cartesian3,\n     *   recursive?:boolean,\n     *   maximumTextureSize?:number\n     * }} options \n     * @returns {QuadtreeLOD}\n     */\n    static create(options) {\n        let rootBoundingVolume = options.rootBoundingVolume, maxLevel = options.maxLevel,\n            zSliceLevel = options.zSliceLevel, minRange = options.minRange,\n            debugVolume = options.debugVolume, showDebugVolume = options.showDebugVolume,\n            debugVolumeColor = options.debugVolumeColor || Cesium.Color.YELLOW,\n            modelMatrix = options.modelMatrix, rtcCenter = options.rtcCenter,\n            recursive = typeof options.recursive == 'undefined' ? true : options.recursive;\n\n        var root = new QuadtreeLOD({\n            boundingVolume: rootBoundingVolume,\n            level: 0,\n            debugVolumeColor: debugVolumeColor,\n            debugVolume: debugVolume,\n            showDebugVolume: showDebugVolume,\n            minRange: minRange,\n            modelMatrix: modelMatrix,\n            rtcCenter: rtcCenter,\n            maxLevel: maxLevel,\n            maximumTextureSize: options.maximumTextureSize\n        });\n\n        this.createLODTree(root, maxLevel, minRange, recursive, zSliceLevel, options.xSize, options.ySize, options.zSize || 2, debugVolume, debugVolumeColor, showDebugVolume);\n\n        return root;\n    }\n\n    /**\n     * \n     * @param {Object} json \n     * @param {{\n     *   debugVolumeColor?:Cesium.Color\n     *   debugVolume?: boolean,\n     *   showDebugVolume?: boolean,\n     *   modelMatrix?:Cesium.Matrix4\n     * }} options\n     * @returns {QuadtreeLOD} root\n     */\n    static fromJSON(json, options) {\n        options = options || {};\n\n        function parse(parent, json) {\n            json.children.forEach((childJson) => {\n\n                let childLod = new QuadtreeLOD(Object.assign(options, childJson));\n                childLod.parent = parent;\n                parse(childLod, childJson);\n                parent.children.push(childLod);\n            })\n        }\n\n        let root = new QuadtreeLOD(Object.assign(options, json));\n        parse(root, json);\n\n        return root;\n    }\n}\n",
    "// import { Mesh } from \"../core/Mesh.js\";\n// import { MeshMaterial } from \"../core/MeshMaterial.js\";\nimport IRenderable from  \"../../core/Source/IRenderable.js\";\n\n// import { Object3D } from \"../core/Object3D.js\";\nimport IContentProvider from  \"./IContentProvider.js\";\n\nimport { boundingBoxToRegion } from  \"./LODUtils.js\";\n\nimport GeometryUtils from  \"../../core/Source/GeometryUtils.js\";\n\nimport {\n    computeBoundingVolume,\n    packBoundingBox, packBoundingRegion, packBoundingSphere,\n    unpackBoundingBox, unpackBoundingRegion, unpackBoundingSphere\n} from  \"./LODUtils.js\";\n\n\nvar scratchTranslationRtc;\nvar getRtcModelViewCallback = function (uniformState, model) {\n    // CESIUM_RTC extension\n    const { Matrix4, defined, Cartesian3 } = Cesium;\n\n    var mvRtc = new Matrix4();\n\n    if (!scratchTranslationRtc) scratchTranslationRtc = new Matrix4();\n    return function () {\n        if (defined(model.rtcCenter)) {\n            Matrix4.getTranslation(uniformState.model, scratchTranslationRtc);\n            Cartesian3.add(\n                scratchTranslationRtc,\n                model.rtcCenter,\n                scratchTranslationRtc\n            );\n            Matrix4.multiplyByPoint(\n                uniformState.view,\n                scratchTranslationRtc,\n                scratchTranslationRtc\n            );\n            return Matrix4.setTranslation(\n                uniformState.modelView,\n                scratchTranslationRtc,\n                mvRtc\n            );\n        }\n        return uniformState.modelView;\n    };\n}\n\nexport default class QuadtreeNode extends IRenderable {\n    constructor(options) {\n        super();\n        /**\n         * @type {number}\n         */\n        this.minRange = null;\n        /**\n        * @type {{box:Cesium.AxisAlignedBoundingBox,region:Cesium.TileBoundingRegion}}\n        */\n        this.boundingVolume = null;\n        /**\n         * @type {string}\n         */\n        this.uri = null;\n        /**\n         * @type {IContentProvider}\n         */\n        this.contentProvider = null;\n\n        this.frustumCulled = null;// Cesium.defaultValue(options.frustumCulled, true);\n        this.debugVolume = null;// Cesium.defaultValue(options.debugVolume, true);\n        this.showDebugVolume = null; //Cesium.defaultValue(options.showDebugVolume, true);\n        this.debugVolumeOnly = false;\n        this.debugVolumeColor = null;\n\n        this.modelMatrixNeedsUpdate = true;\n        this._modelMatrix = null;\n        this.rtcCenter = null;//options.rtcCenter;\n\n        /**\n         * @type {THREE.Group}\n         */\n        this.content = options.content || null;\n\n        this._version = 0;\n\n        if (options.boundingVolume) {\n            this.init(options);\n        }\n    }\n\n    //properties\n\n    set needsUpdate(val) {\n        if (val) {\n            this._version++;\n        }\n    }\n\n    /**\n     * @type {Cesium.BoundingSphere}\n     */\n    get boundingSphere() {\n        return this.boundingVolume.sphere;\n    }\n    /**\n     * @type {Cesium.AxisAlignedBoundingBox}\n     */\n    get boundingBox() {\n        return this.boundingVolume.box;\n    }\n\n    /**\n     * @type {Cesium.BoundingSphere}\n     */\n    get boundingSphereWC() {\n        return this.boundingVolume.sphereWC;\n    }\n    /**\n     * @type {Cesium.AxisAlignedBoundingBox}\n     */\n    get boundingBoxWC() {\n        return this.boundingVolume.boxWC;\n    }\n    /**\n     * @type {Cesium.TileBoundingRegion}\n     */\n    get region() {\n        return this.boundingVolume.region\n    }\n\n    set modelMatrix(val) {\n        if (!val) return;\n        const { Matrix4, BoundingSphere } = Cesium;\n\n        val = val.elements || val;\n        if (!Matrix4.equals(val, this._modelMatrix)) {\n            this._modelMatrix = Matrix4.clone(val, this._modelMatrix);\n\n            if (this.boundingBoxWC) {\n                Matrix4.multiplyByPoint(this.modelMatrix, this.boundingBox.center, this.boundingBoxWC.center)\n            }\n            if (!this.region || !BoundingSphere.equals(this.boundingSphereWC, this.region.boundingSphere)) {\n                Matrix4.multiplyByPoint(this.modelMatrix, this.boundingSphere.center, this.boundingSphereWC.center)\n            }\n\n            this.modelMatrixNeedsUpdate = true;\n\n        }\n    }\n    get modelMatrix() {\n        return this._modelMatrix;\n    }\n\n    // methods\n\n    /**\n     * \n     * @param {object} options \n     * @private\n     */\n    init(options) {\n        const { defaultValue, Matrix4, AxisAlignedBoundingBox, BoundingSphere } = Cesium;\n\n        this.minRange = options.minRange || 4;\n        this.boundingVolume = options.boundingVolume;\n\n        this.uri = options.uri;\n        this.contentProvider = options.contentProvider;\n\n        this.frustumCulled = defaultValue(options.frustumCulled, true);\n        this.debugVolume = defaultValue(options.debugVolume, false);\n        this.showDebugVolume = defaultValue(options.showDebugVolume, false);\n        this.debugVolumeOnly = defaultValue(options.debugVolumeOnly, false);\n        this.debugVolumeColor = options.debugVolumeColor;\n\n        this.modelMatrixNeedsUpdate = true;\n        this._modelMatrix = null;\n\n        this.rtcCenter = options.rtcCenter;\n\n        this.content = options.content || null;\n\n        const boundingVolume = this.boundingVolume;\n        if (boundingVolume.box && Array.isArray(this.boundingVolume.box)) {\n            let box = boundingVolume.box;\n            boundingVolume.box = unpackBoundingBox(box)\n        }\n        if (boundingVolume.region && Array.isArray(boundingVolume.region)) {\n            let region = boundingVolume.region;\n            boundingVolume.region = unpackBoundingRegion(region)\n        }\n\n        if (boundingVolume.sphere && Array.isArray(boundingVolume.sphere)) {\n            let sphere = boundingVolume.sphere;\n            boundingVolume.sphere = unpackBoundingSphere(sphere);\n            boundingVolume.sphereWC = BoundingSphere.clone(boundingVolume.sphere)\n\n        }\n\n        if (boundingVolume.box && !boundingVolume.region && options.modelMatrix) {\n            boundingVolume.region = boundingBoxToRegion(boundingVolume.box, options.modelMatrix)\n        }\n\n        if (!boundingVolume.sphere) {\n\n            if (boundingVolume.box) {\n                let box = boundingVolume.box;\n                let vertices = [box.minimum, box.maximum];\n                boundingVolume.sphere = BoundingSphere.fromPoints(vertices)\n                boundingVolume.sphereWC = BoundingSphere.clone(boundingVolume.sphere)\n\n            }\n            else if (boundingVolume.region) {\n                boundingVolume.sphere = boundingVolume.region.boundingSphere\n                boundingVolume.sphereWC = boundingVolume.region.boundingSphere\n            }\n\n        } else {\n            boundingVolume.sphereWC = BoundingSphere.clone(boundingVolume.sphere)\n\n        }\n\n        boundingVolume.boxWC = AxisAlignedBoundingBox.clone(this.boundingVolume.box)\n\n        this.modelMatrix = options.modelMatrix || Matrix4.IDENTITY.clone();\n\n        this.geometricError = boundingVolume.sphere.radius;\n\n        if (this.rtcCenter) {\n            let node = this, cesiumRtcModelViewUniform;\n            this.uniformMapLoadedCallback = (uniformMap, frameState, mesh) => {\n                if (!cesiumRtcModelViewUniform) {\n                    cesiumRtcModelViewUniform = getRtcModelViewCallback(frameState.context.uniformState, node);\n                }\n                uniformMap.modelView = cesiumRtcModelViewUniform;\n                uniformMap.u_modelView = cesiumRtcModelViewUniform;\n                uniformMap.modelViewMatrix = cesiumRtcModelViewUniform;\n                uniformMap.u_modelViewMatrix = cesiumRtcModelViewUniform;\n            }\n        }\n\n        if (this.debugVolume) {\n            this.createDebugVolume(options.debugVolumeColor);\n        }\n\n    }\n    /**\n     * \n     * @param {Cesium.Color|THREE.Color|string} [debugVolumeColor] \n     * @private\n     */\n    createDebugVolume(debugVolumeColor) {\n        const { RectangleOutlineGeometry, Ellipsoid, BoxOutlineGeometry, Color } = Cesium;\n        const { LineSegments, LineBasicMaterial } = THREE\n        let geometry\n        if (this.region) {//&& this.rtcCenter) {\n            geometry = new RectangleOutlineGeometry({\n                rectangle: this.region.rectangle,\n                height: this.region.minimumHeight,\n                extrudedHeight: this.region.maximumHeight,\n                ellipsoid: Ellipsoid.WGS84\n            })\n        }\n        else {\n            geometry = BoxOutlineGeometry.fromAxisAlignedBoundingBox(this.boundingBox);\n        }\n        geometry = geometry.constructor.createGeometry(geometry);\n\n        if (this.rtcCenter) {\n            let rtcCenter = this.rtcCenter;\n            let positions = geometry.attributes.position.values;\n\n            for (let i = 0; i < positions.length; i += 3) {\n                positions[i] -= rtcCenter.x;\n                positions[i + 1] -= rtcCenter.y;\n                positions[i + 2] -= rtcCenter.z;\n            }\n\n        }\n        geometry = GeometryUtils.toBufferGeometry3js(geometry);\n\n        if (debugVolumeColor && debugVolumeColor instanceof Cesium.Color) {\n            debugVolumeColor = debugVolumeColor.toCssColorString()\n        }\n        var material = new LineBasicMaterial({\n            color: debugVolumeColor || 'cyan'\n        });\n        material._debugVolumeColor = debugVolumeColor\n        var mesh = new LineSegments(geometry, material);\n        mesh.pickObject = {\n            id: this,\n            mesh: this,\n            primitive: this.root || this\n        }\n        mesh.frustumCulled = false;\n        if (this.region && this.rtcCenter) {\n            mesh.modelMatrixNeedsUpdate = false;\n        }\n        mesh.uniformMapLoadedCallback = this.uniformMapLoadedCallback;\n        this.debugVolume = mesh;\n    }\n\n    /**\n     *  \n     * @param {Cesium.FrameState} frameState  \n     * @returns {Number} The range, in pixel\n     * @protected\n     */\n    computeRange(frameState, progressiveResolutionHeightFraction) {\n\n        const _Cesium = Cesium;\n        var heightFraction = _Cesium.defaultValue(progressiveResolutionHeightFraction, 1.0);\n\n        var camera = frameState.camera;\n        var context = frameState.context;\n        var height = context.drawingBufferHeight * heightFraction;\n\n        this._distanceToCamera = camera.distanceToBoundingSphere(this.boundingSphereWC);\n\n        var distance = Math.max(this._distanceToCamera, _Cesium.Math.EPSILON7);\n\n        var sseDenominator = camera.frustum.sseDenominator;\n        var geometricError = this.geometricError;\n        var range = (geometricError * height) / (distance * sseDenominator);\n        range /= frameState.pixelRatio;\n\n        this.range = range;\n        return range;\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState  \n     * @returns {boolean}\n     * @protected\n     */\n    computeVisibility(frameState) {\n        const Intersect = Cesium.Intersect;\n\n        this._visible = true;\n        if (this.frustumCulled) {\n            const parent = this.parent;\n            let visibility = parent && parent.visibility;\n            if (visibility != Intersect.INSIDE) {\n                visibility = frameState.cullingVolume.computeVisibility(this.boundingSphereWC);\n            }\n\n            this.visibility = visibility;\n            this._visible = visibility != Intersect.OUTSIDE;\n        }\n\n        if (this._visible) {\n\n            this.range = this.computeRange(frameState);\n            this._visible = this.range >= this.minRange;\n        }\n\n        return this._visible;\n    }\n\n    /**\n    * \n    * @param {Cesium.FrameState} frameState \n    * @param {THREE.Object3D[]} renderList \n    * @protected\n    */\n    render(frameState, renderList) {\n        if (this.frameNumber == frameState.frameNumber) {\n            return;\n        }\n\n        if (!this.computeVisibility(frameState)) return;\n\n        if (this.debugVolume && (this.showDebugVolume || this.debugVolumeOnly)) {\n            this.debugVolume.frustumCulled = false;\n            renderList.push(this.debugVolume);\n        }\n\n        if (!this.debugVolumeOnly) {\n            if (this.uri && this.contentProvider && !this._contentRequested) {\n                let contentProvider = this.contentProvider;\n                let object3d = contentProvider.requestContent(this.uri, this.rtcCenter);\n                Cesium.when(object3d, (object3d) => {\n                    if (this.rtcCenter && !object3d.uniformMapLoadedCallback) {\n                        object3d.uniformMapLoadedCallback = this.uniformMapLoadedCallback;\n                    }\n                    object3d.frustumCulled = false;\n                    this.content = object3d;\n                });\n                this._contentRequested = true;\n            } else if (this.content) {\n                if (this.content.isObject3D) {\n                    if (this.content.matrixAutoUpdate) {\n                        this.content.updateMatrixWorld();\n                    }\n                    renderList.push(this.content);\n                } else if (this.content.mesh) {\n                    renderList.push(this.content.mesh);\n                }\n            }\n        }\n\n        this.modelMatrixNeedsUpdate = false;\n        this.frameNumber = frameState.frameNumber;\n    }\n\n}",
    "import IRenderable from  \"../../core/Source/IRenderable.js\";\n\nimport QuadtreeLODUtil from  \"./QuadtreeLODUtil.js\";\n\nimport QuadtreeNode from  \"./QuadtreeNode.js\";\n\nimport QuadtreeLOD from  \"./QuadtreeLOD.js\";\n\nimport OSGLoader from  \"./model/OSGLoader.js\";\n\nimport VISMLoader from  \"./model/VISMLoader.js\";\n\nimport releaseResources from  \"./releaseResources.js\";\n\nimport { Path, traverse } from  \"../../utils/index.js\";\n\n\n\nfunction processContentObject3d(contentNode, content, useLightMap, translucent) {\n    delete content.osgRoot;\n    contentNode.content = content;\n    if (!content.userData) {\n        content.userData = {\n            uri: contentNode.uri\n        }\n    }\n    content.traverse(obj => {\n        obj.matrixAutoUpdate = false;\n        obj.frustumCulled = false;\n        obj.up.set(0, 0, 1);\n        if (obj.isMesh) {\n            obj.pickObject = {\n                id: obj,\n                mesh: obj,\n                primitive: content\n            }\n            var objMaterial = obj.material\n            /**\n             * @type {THREE.Material[]}\n             */\n            var materials = Array.isArray(objMaterial) ? objMaterial : [objMaterial];\n            materials.forEach(material => {\n                material.autoRefresh = false;\n\n                if (material.transparent) {\n                    if (translucent) {\n                        // material.depthWrite = false;\n                        // material.opacity = 0.5;\n                        // material.depthTest = false\n                        // material.depthFunc = THREE.LessDepth\n                        // material.premultipliedAlpha = true;\n                        material.translucent = translucent;\n\n                    }\n                    //  material.transparent = transparent;\n                }\n                if (!useLightMap) material.lightMap = null;\n\n            })\n\n        }\n    })\n}\n\nfunction reClassContentSet(contentSet, maxLevel) {\n    maxLevel = maxLevel || 5;\n\n    let newContentSet = [], maxPower = 0, minPower = Number.MAX_VALUE, powers = [];\n    contentSet.forEach(contentNode => {\n        if (!contentNode.content) return;\n        let content = contentNode.content\n\n        content.updateMatrixWorld();\n        content.traverse(obj => {\n            if (obj.isMesh) {\n                let matrixWorld = obj.matrixWorld;\n                let geometry = obj.geometry.clone();\n                geometry.applyMatrix4(matrixWorld);\n                geometry.computeBoundingBox();\n                geometry.computeBoundingSphere();\n\n\n                if (!obj._power) {\n                    let power = QuadtreeLODUtil.computeLODPower(obj);\n                    obj._power = power;\n                    if (!isNaN(power) && power !== Infinity) {\n\n                        maxPower = Math.max(maxPower, power);\n                        minPower = Math.min(minPower, power);\n                    }\n                    powers.push(power);\n                } else {\n                    debugger\n                }\n\n                let box = geometry.boundingBox, sphere = geometry.boundingSphere\n                let points = [box.min, box.max];\n                geometry = null;\n\n                const _Cesium = Cesium;\n                newContentSet.push({\n                    boundingVolume: {\n                        box: new _Cesium.AxisAlignedBoundingBox.fromPoints(points),\n                        sphere: _Cesium.BoundingSphere.clone(sphere)\n                    },\n                    content: {\n                        uuid: obj.uuid,\n                        mesh: obj,\n                        root: content\n                    },\n                    power: obj._power\n                });\n            }\n        })\n    });\n\n    newContentSet.sort((a, b) => {\n        return b.power - a.power\n    });\n    powers.sort((a, b) => {\n        return b - a\n    });\n\n    let newChildren = [], lastPower,\n        levels = [], level = 1,\n        factor = Math.sqrt(maxPower / 3);\n\n    levels.push(newChildren);\n    newContentSet.forEach(contentNode => {\n\n        let a = maxPower / contentNode.power,\n            b = lastPower / contentNode.power,\n            c = factor / (level * 2),\n            d = factor * Math.pow(2, level - 1);\n\n        let b1 = a < d, b2 = b < c;\n\n        if (!lastPower || (b1 && b2) || newChildren.length < 3\n            || level >= maxLevel\n        ) {\n            contentNode.level = level;\n            newChildren.push(contentNode);\n\n        } else {\n            level++;\n\n            newChildren = [];\n            levels.push(newChildren);\n            contentNode.level = level;\n            newChildren.push(contentNode);\n        }\n\n        lastPower = contentNode.power;\n    })\n\n    newChildren = [];\n\n    newContentSet.maxPower = maxPower;\n    newContentSet.minPower = minPower;\n    newContentSet.levels = levels;\n\n    return newContentSet;\n}\n\nexport default class QuatreeContentSet extends IRenderable {\n\n    /**\n     * \n     * @param {object} options \n     * @param {Cesium.Matrix4} options.modelMatrix\n     * @param {string} [options.url]\n     * @param {QuadtreeNode[]|{uri:string,content:THREE.Group|THREE.Scene}[]} [options.contentSet]\n     * @param {number} [options.minRange=32]\n     * @param {number} [options.radiusPower=4] \n     * @param {{minRadius:number}[]} [options.lods] \n     * @param {boolean} [options.show=true]\n     * @param {boolean} [options.useLightMap=true]\n     * @param {boolean} [options.preloadTexture=false]\n     * @param {boolean} [options.translucent=true]\n     * @param {boolean} [options.contentCull=true]\n     * @param {boolean} [options.debugVolume=true]\n     * @param {boolean} [options.showDebugVolume=true]\n     * @param {string} [options.dracoDecoderPath] \n     * @param {number} [options.maximumTextureSize] \n     */\n    constructor(options) {\n        super(options);\n\n        const { defaultValue, when, Event } = Cesium;\n\n        this.maximumTextureSize = options.maximumTextureSize;\n        this.isQuatreeContentSet = true;\n        this.url = options.url;\n        this.contentSet = options.contentSet;\n        this.show = defaultValue(options.show, true);\n        this.modelMatrix = options.modelMatrix;\n        this.debugVolume = options.debugVolume;\n        this.showDebugVolume = options.showDebugVolume;\n        this.minRange = options.minRange || 32;\n        this.radiusPower = options.radiusPower || 4;\n        this.lods = options.lods || [];\n        this.maxLevel = options.maxLevel || 5;\n\n        this.refine = options.refine || 'ADD';\n        this.useLightMap = defaultValue(options.useLightMap, true);\n        this.preloadTexture = defaultValue(options.preloadTexture, false);\n        this.translucent = defaultValue(options.translucent, false);\n        this.format = options.format || 'osg';\n        this.dracoDecoderPath = options.dracoDecoderPath;\n\n        this.contentCull = defaultValue(options.contentCull, true);\n        /**\n         * @type {QuadtreeLOD}\n         */\n        this.lodRoot = null;\n        /**\n         * @type {THREE.Loader}\n         */\n        this.loader = options.loader;\n\n        /**\n         * @type {QuadtreeNode[]}\n         */\n        this.children = [];\n\n        /**\n         * @type {THREE.Scene}\n         * @private\n         */\n        this.scene = new THREE.Scene();\n\n        this.onLoadProgress = new Event();\n        this.ready = false;\n        this.readyPromise = when.defer();\n    }\n\n    get boundingSphere() {\n        if (!this.lodRoot) return\n        return this.lodRoot.boundingSphere\n    }\n    get boundingSphereWC() {\n        if (!this.lodRoot) return\n        return this.lodRoot.boundingSphereWC\n    }\n\n    get boundingBoxWC() {\n        if (!this.lodRoot) return\n        return this.lodRoot.boundingBoxWC;\n    }\n\n    get region() {\n        if (!this.lodRoot) return\n        return this.lodRoot.region\n    }\n\n    /**\n     * @public\n     */\n    init() {\n\n        let useLightMap = this.useLightMap;\n        let preloadTexture = this.preloadTexture;\n        let translucent = this.translucent;\n\n        if (this.contentSet) {\n            this.contentSet.forEach((contentNode) => {\n                processContentObject3d(contentNode, contentNode.content, useLightMap, translucent)\n            })\n            this.onload(this.contentSet);\n\n            return;\n        }\n        if (!this.url) {\n            throw new Error('url is required')\n        }\n\n        this.onLoadProgress.raiseEvent({\n            currentPercent: 0,\n            totalPercent: 0,\n            currentFile: Path.GetFileName(this.url)\n        });\n        const _Cesium = Cesium;\n        let path = THREE.LoaderUtils.extractUrlBase(this.url);\n        return _Cesium.Resource.fetchJson(this.url).then((contentSet) => {\n            let df = _Cesium.when.defer();\n            let stack = contentSet.slice();\n            let loader = this.loader;\n            let imageCache = {};\n            let total = 0;\n\n            let loadNext = (done) => {\n                if (stack.length == 0) {\n\n                    done();\n                    return;\n                }\n                let contentNode = stack.pop();\n\n                let box = QuadtreeLODUtil.unpackBoundingBox(contentNode.boundingVolume.box);\n                let sphere = QuadtreeLODUtil.unpackBoundingSphere(contentNode.boundingVolume.sphere);\n                contentNode.boundingVolume.box = box;\n                contentNode.boundingVolume.sphere = sphere;\n                let fileName = Path.GetFileName(contentNode.uri)\n                contentNode.uri = path + contentNode.uri;\n\n                if (!loader) {\n                    let format = Path.GetExtension(contentNode.uri).toLowerCase()\n                    if (format == '.vism') {\n                        loader = new VISMLoader()\n                    } else {\n                        loader = new OSGLoader()\n                    }\n                }\n\n                if (loader.setDracoDecoderPath && !loader.dracoLoader && this.dracoDecoderPath) {\n                    loader.setDracoDecoderPath(this.dracoDecoderPath)\n                }\n\n                this.onLoadProgress.raiseEvent({\n                    currentPercent: 0,\n                    totalPercent: total,\n                    currentFile: fileName\n                });\n\n                loader.load(contentNode.uri, (content) => {\n\n                    processContentObject3d(contentNode, content, useLightMap, translucent)\n\n                    total = 100 * (contentSet.length - stack.length) / contentSet.length;\n                    this.onLoadProgress.raiseEvent({\n                        currentPercent: 100,\n                        totalPercent: total,\n                        currentFile: fileName\n                    });\n\n                    loadNext(done)\n                }, (evt) => {\n                    let current = 100 * evt.loaded / evt.total;\n                    this.onLoadProgress.raiseEvent({\n                        currentPercent: current,\n                        totalPercent: total,\n                        currentFile: fileName\n                    });\n                }, (err) => {\n                    stack = null;\n                    imageCache = {};\n                    throw err\n                }, { loadTexture: preloadTexture, imageCache: imageCache })\n            }\n\n            loadNext(() => {\n                this.onLoadProgress.raiseEvent({\n                    currentPercent: 100,\n                    totalPercent: 100,\n                    currentFile: '全部加载完成'\n                })\n                imageCache = {};\n                this.onload(contentSet);\n                df.resolve(this);\n            });\n\n            return df;\n        })\n    }\n\n    onload(contentSet) {\n        let oldContentSet = contentSet;\n        contentSet = reClassContentSet(contentSet, this.max);\n\n        let boxVertices = [];\n        contentSet = contentSet.map((content) => {\n\n            let box = content.boundingVolume.box;\n            // let sphere = content.boundingVolume.sphere;\n            boxVertices.push(box.minimum, box.maximum);\n\n            content.modelMatrix = this.modelMatrix;\n            content.debugVolume = this.debugVolume;\n            content.showDebugVolume = this.showDebugVolume;\n            content.minRange = this.minRange;\n            content.frustumCulled = this.contentCull;\n            let power = content.power, level = content.level;\n            content = new QuadtreeNode(content)\n            content.power = power;\n            content.level = level;\n            return content\n        });\n\n        this.boundingBox = Cesium.AxisAlignedBoundingBox.fromPoints(boxVertices);\n\n        this.children.push.apply(this.children, contentSet);\n\n        oldContentSet.forEach(oldContentNode => {\n            let contentRoot = oldContentNode.content;\n\n            this.scene.add(contentRoot);\n            // oldContentNode.content = null;\n        });\n\n        this.createLOD();\n\n        this.ready = true;\n        this.readyPromise.resolve(this);\n\n\n    }\n\n    createLOD() {\n        let radiusArr;\n        if (this.lods.length > 0) {\n\n            radiusArr = this.lods.map(lod => {\n                return lod.minRadius;\n            });\n            radiusArr.sort((a, b) => {\n                return b - a;\n            });\n            console.log(radiusArr);\n\n            let radiusStatics = [], radiusMap = new Map();\n            this.children.forEach((content) => {\n                let sphere = content.boundingVolume.sphere;\n\n                let r = parseInt(sphere.radius);\n                if (!radiusMap.has(r)) {\n                    let item = {\n                        radius: r,\n                        count: 1\n                    }\n                    radiusMap.set(r, item);\n                    radiusStatics.push(item)\n                } else {\n                    let item = radiusMap.get(r)\n                    item.count++;\n                }\n            });\n\n            radiusStatics.sort((a, b) => {\n                return a.radius - b.radius;\n            });\n            console.log(radiusStatics);\n\n            let sums = new Array(radiusArr.length).fill(0);\n            let radiusArr2 = radiusArr.slice().sort((a, b) => {\n                return a - b;\n            })\n            radiusArr2.push(Infinity)\n            radiusStatics.forEach(item => {\n\n                for (let i = 1; i < radiusArr2.length; i++) {\n                    if (item.radius >= radiusArr2[i - 1] && item.radius <= radiusArr2[i]) {\n                        sums[i - 1] += item.count;\n                    }\n                }\n            })\n            sums.reverse();\n            console.log(sums);\n        }\n\n        //\n\n        let rootBoundingBox = this.boundingBox;\n        console.time('QuadtreeLODUtil.create');\n        const { Cartesian3, Color } = Cesium;\n        let dimension = Cartesian3.subtract(\n            rootBoundingBox.maximum, rootBoundingBox.minimum, new Cartesian3()\n        );\n        let scale = dimension.x / dimension.y, xSize = 4, ySize = 4;\n        if (scale > 1) {\n            xSize = parseInt(Math.ceil(ySize * scale));\n        } else {\n            ySize = parseInt(Math.ceil(xSize / scale));\n        }\n\n        var root = QuadtreeLODUtil.create({\n            rootBoundingVolume: { box: rootBoundingBox },\n            maxLevel: this.lods.length || this.maxLevel,\n            xSize: xSize,\n            ySize: ySize,\n            zSize: this.zSize || 1,\n            minRange: this.minRange,\n            debugVolume: this.debugVolume,\n            showDebugVolume: this.showDebugVolume,\n            debugVolumeColor: Color.CYAN,\n            modelMatrix: this.modelMatrix,\n            maximumTextureSize: this.maximumTextureSize\n        })\n        console.timeEnd('QuadtreeLODUtil.create');\n\n        console.time('QuadtreeLODUtil.filterContents');\n\n        traverse(root, node => {\n            // node.refine = this.refine || 'ADD';\n            if (radiusArr) node.minRadius = radiusArr[node.level - 1];\n        });\n\n        let filterFunc = (lodNode, contentNode) => {\n            // let levels = contentNode.level;\n            return lodNode.level == contentNode.level;\n        }\n\n        traverse(root, node => {\n            QuadtreeLODUtil.filterContents(this.children, node, this.radiusPower, null, filterFunc);\n        });\n        console.timeEnd('QuadtreeLODUtil.filterContents');\n\n        root.generateLOD = false;\n        console.log(root);\n\n        this.lodRoot = root;\n    }\n\n    render(frameState, renderList) {\n        if (!this.ready || !this.show) return;\n\n        // this.scene.updateMatrixWorld(true);\n        this.lodRoot.visualizer = this.visualizer;\n        this.lodRoot.render(frameState, renderList);\n    }\n\n    destroy() {\n\n        if (this.visualizer) {\n            this.visualizer.remove(this.scene, true);\n            this.visualizer.remove(this);\n        }\n\n        releaseResources(this.scene);\n\n        this.children.splice(0);\n        this.ready = false;\n        this.contentSet.forEach(contentNode => {\n            contentNode.content = null;\n        })\n        this.contentSet.splice(0);\n        this.lodRoot.destroy();\n        this.lodRoot = null;\n        this.loader = null;\n        if (!this.scene.isScene && scene.dispose) this.scene.dispose()\n        this.scene = null;\n        this.visualizer = null;\n    }\n}",
    " \nexport class TaskList {\n\n    constructor(maxLoadingCount, workFuncName) {\n \n        this._queue = [];\n        this._loadingTiles = new Map();\n        this._loadingCount = 0;\n        this.maxLoadingCount = maxLoadingCount || 1;\n        this.workFuncName = workFuncName || 'requestTile'\n\n        this.deferredList = [];\n        this.immediateList = [];\n    }\n\n    add(tile) {\n        if (this.has(tile)) return;\n        this._queue.push(tile);\n    }\n\n    has(tile) {\n        return this._loadingTiles.has(tile.tileId) ||\n            this._queue.indexOf(tile) != -1;\n\n    }\n\n\n    remove(tile) {\n  \n        if (this._loadingTiles.has(tile.tileId)) {\n            this._loadingTiles.delete(tile.tileId);\n        } \n\n        if (this._queue.indexOf(tile) == -1) return;\n        \n        for (let i = 0; i < this.length; i++) {\n            if (this._queue[i] == tile) {\n                return this._queue.splice(i, 1);\n            }\n        }\n\n    }\n\n    update(isCameraMoving) {\n\n        if (this.length > 0 && this._loadingCount < this.maxLoadingCount) {\n \n            var deferredList = [], immediateList = [];\n\n            this._queue.forEach(tile => {\n                if (tile.visibility == false) deferredList.push(tile)\n                else immediateList.push(tile)\n            })\n\n            var workdList = immediateList.length > 0 ? immediateList : deferredList;\n            if (immediateList.length == 0) {\n                if (isCameraMoving) return;\n            }\n\n            workdList.sort((a, b) => {\n                if (a._distanceToCamera && b._distanceToCamera) {\n                    return a._distanceToCamera - b._distanceToCamera;\n                }\n                if (a.visibility == true && b.visibility == false) {\n                    return -1\n                }\n                if (a.visibility == false && b.visibility == true) {\n                    return 1\n                }\n\n                if (a.parent && b.parent) {\n                    return a._distanceToCamera - b.parent._distanceToCamera;\n                } else {\n                    return b.priority - a.priority;\n                }\n\n            });\n            this.deferredList = deferredList;\n            this.immediateList = immediateList;\n  \n            if (workdList.length == 0) return;\n\n            var tile = workdList.shift();\n\n            this._loadingTiles.set(tile.tileId, tile);\n\n            Cesium.when(tile[this.workFuncName](), () => {\n\n                if (isCameraMoving) {\n                    Cesium.requestAnimationFrame(() => {\n                        this._loadingCount--;\n                    })\n                } else {\n                    this._loadingCount--;\n                }\n\n                this._loadingTiles.delete(tile.tileId);\n\n            }, (e) => {\n                console.warn('tile ' + tile.tileId + '  load failed.');\n                this._loadingCount--;\n                this._loadingTiles.delete(tile.tileId);\n            });\n            this._loadingCount++;\n\n            this._queue = immediateList.concat(deferredList);\n\n            console.log( this.workFuncName, this._queue.length);\n            return true;\n        }\n\n    }\n\n    get length() {\n        return this._queue.length + this.immediateList.length + this.deferredList.length;\n    }\n\n}",
    "/**\n * @author shaozilee\n *\n * Bmp format decoder,support 1bit 4bit 8bit 24bit bmp\n *\n */\n \nfunction BmpDecoder(buffer, is_with_alpha) {\n    if (buffer instanceof Uint8Array) {\n        buffer = buffer.buffer;\n    } else if (typeof Buffer != 'undefined' && buffer instanceof Buffer) {\n        buffer = new Uint8Array(buffer).buffer;\n    }\n\n    this.pos = 0;\n    this.buffer = new DataView(buffer) ; \n\n    var uin8arr = new Uint8Array(buffer);\n\n    this.buffer.toString = function (encoding, start, end) {\n        var bytes = uin8arr.subarray(start, end);\n        var str = String.fromCharCode.apply(null, bytes);\n        return str;\n    }\n\n    this.is_with_alpha = !!is_with_alpha;\n    this.bottom_up = true;\n    this.flag = this.buffer.toString(\"utf-8\", 0, this.pos += 2);\n    if (this.flag != \"BM\") throw new Error(\"Invalid BMP File\");\n    this.parseHeader();\n    this.parseRGBA();\n}\n\nBmpDecoder.prototype.parseHeader = function () {\n    this.fileSize = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.reserved = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.offset = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.headerSize = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.width = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.height = this.buffer.getInt32(this.pos);\n    this.pos += 4;\n    this.planes = this.buffer.getUint16(this.pos);\n    this.pos += 2;\n    this.bitPP = this.buffer.getUint16(this.pos);\n    this.pos += 2;\n    this.compress = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.rawSize = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.hr = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.vr = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.colors = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n    this.importantColors = this.buffer.getUint32(this.pos);\n    this.pos += 4;\n\n    if (this.bitPP === 16 && this.is_with_alpha) {\n        this.bitPP = 15\n    }\n    if (this.bitPP < 15) {\n        var len = this.colors === 0 ? 1 << this.bitPP : this.colors;\n        this.palette = new Array(len);\n        for (var i = 0; i < len; i++) {\n            var blue = this.buffer.getUint8(this.pos++);\n            var green = this.buffer.getUint8(this.pos++);\n            var red = this.buffer.getUint8(this.pos++);\n            var quad = this.buffer.getUint8(this.pos++);\n            this.palette[i] = {\n                red: red,\n                green: green,\n                blue: blue,\n                quad: quad\n            };\n        }\n    }\n    if (this.height < 0) {\n        this.height *= -1;\n        this.bottom_up = false;\n    }\n\n}\n\nBmpDecoder.prototype.parseRGBA = function () {\n    var bitn = \"bit\" + this.bitPP;\n    var len = this.width * this.height * 4;\n    this.data = new Uint8Array(len);\n    this[bitn]();\n};\n\nBmpDecoder.prototype.bit1 = function () {\n    var xlen = Math.ceil(this.width / 8);\n    var mode = xlen % 4;\n    var y = this.height >= 0 ? this.height - 1 : -this.height\n    for (var y = this.height - 1; y >= 0; y--) {\n        var line = this.bottom_up ? y : this.height - 1 - y\n        for (var x = 0; x < xlen; x++) {\n            var b = this.buffer.getUint8(this.pos++);\n            var location = line * this.width * 4 + x * 8 * 4;\n            for (var i = 0; i < 8; i++) {\n                if (x * 8 + i < this.width) {\n                    var rgb = this.palette[((b >> (7 - i)) & 0x1)];\n\n                    this.data[location + i * 4] = 0;\n                    this.data[location + i * 4 + 1] = rgb.blue;\n                    this.data[location + i * 4 + 2] = rgb.green;\n                    this.data[location + i * 4 + 3] = rgb.red;\n\n                } else {\n                    break;\n                }\n            }\n        }\n\n        if (mode != 0) {\n            this.pos += (4 - mode);\n        }\n    }\n};\n\nBmpDecoder.prototype.bit4 = function () {\n    //RLE-4\n    if (this.compress == 2) {\n        this.data.fill(0xff);\n\n        var location = 0;\n        var lines = this.bottom_up ? this.height - 1 : 0;\n        var low_nibble = false;//for all count of pixel\n\n        while (location < this.data.length) {\n            var a = this.buffer.getUint8(this.pos++);\n            var b = this.buffer.getUint8(this.pos++);\n            //absolute mode\n            if (a == 0) {\n                if (b == 0) {//line end\n                    if (this.bottom_up) {\n                        lines--;\n                    } else {\n                        lines++;\n                    }\n                    location = lines * this.width * 4;\n                    low_nibble = false;\n                    continue;\n                } else if (b == 1) {//image end\n                    break;\n                } else if (b == 2) {\n                    //offset x,y\n                    var x = this.buffer.getUint8(this.pos++);\n                    var y = this.buffer.getUint8(this.pos++);\n                    if (this.bottom_up) {\n                        lines -= y;\n                    } else {\n                        lines += y;\n                    }\n\n                    location += (y * this.width * 4 + x * 4);\n                } else {\n                    var c = this.buffer.getUint8(this.pos++);\n                    for (var i = 0; i < b; i++) {\n                        if (low_nibble) {\n                            setPixelData.call(this, (c & 0x0f));\n                        } else {\n                            setPixelData.call(this, (c & 0xf0) >> 4);\n                        }\n\n                        if ((i & 1) && (i + 1 < b)) {\n                            c = this.buffer.getUint8(this.pos++);\n                        }\n\n                        low_nibble = !low_nibble;\n                    }\n\n                    if ((((b + 1) >> 1) & 1) == 1) {\n                        this.pos++\n                    }\n                }\n\n            } else {//encoded mode\n                for (var i = 0; i < a; i++) {\n                    if (low_nibble) {\n                        setPixelData.call(this, (b & 0x0f));\n                    } else {\n                        setPixelData.call(this, (b & 0xf0) >> 4);\n                    }\n                    low_nibble = !low_nibble;\n                }\n            }\n\n        }\n\n\n\n\n        function setPixelData(rgbIndex) {\n            var rgb = this.palette[rgbIndex];\n            this.data[location] = 0;\n            this.data[location + 1] = rgb.blue;\n            this.data[location + 2] = rgb.green;\n            this.data[location + 3] = rgb.red;\n            location += 4;\n        }\n    } else {\n\n        var xlen = Math.ceil(this.width / 2);\n        var mode = xlen % 4;\n        for (var y = this.height - 1; y >= 0; y--) {\n            var line = this.bottom_up ? y : this.height - 1 - y\n            for (var x = 0; x < xlen; x++) {\n                var b = this.buffer.getUint8(this.pos++);\n                var location = line * this.width * 4 + x * 2 * 4;\n\n                var before = b >> 4;\n                var after = b & 0x0F;\n\n                var rgb = this.palette[before];\n                this.data[location] = 0;\n                this.data[location + 1] = rgb.blue;\n                this.data[location + 2] = rgb.green;\n                this.data[location + 3] = rgb.red;\n\n\n                if (x * 2 + 1 >= this.width) break;\n\n                rgb = this.palette[after];\n\n                this.data[location + 4] = 0;\n                this.data[location + 4 + 1] = rgb.blue;\n                this.data[location + 4 + 2] = rgb.green;\n                this.data[location + 4 + 3] = rgb.red;\n\n            }\n\n            if (mode != 0) {\n                this.pos += (4 - mode);\n            }\n        }\n\n    }\n\n};\n\nBmpDecoder.prototype.bit8 = function () {\n    //RLE-8\n    if (this.compress == 1) {\n        this.data.fill(0xff);\n\n        var location = 0;\n        var lines = this.bottom_up ? this.height - 1 : 0;\n\n        while (location < this.data.length) {\n            var a = this.buffer.getUint8(this.pos++);\n            var b = this.buffer.getUint8(this.pos++);\n            //absolute mode\n            if (a == 0) {\n                if (b == 0) {//line end\n                    if (this.bottom_up) {\n                        lines--;\n                    } else {\n                        lines++;\n                    }\n                    location = lines * this.width * 4;\n                    continue;\n                } else if (b == 1) {//image end\n                    break;\n                } else if (b == 2) {\n                    //offset x,y\n                    var x = this.buffer.getUint8(this.pos++);\n                    var y = this.buffer.getUint8(this.pos++);\n                    if (this.bottom_up) {\n                        lines -= y;\n                    } else {\n                        lines += y;\n                    }\n\n                    location += (y * this.width * 4 + x * 4);\n                } else {\n                    for (var i = 0; i < b; i++) {\n                        var c = this.buffer.getUint8(this.pos++);\n                        setPixelData.call(this, c);\n                    }\n                    if (b & 1 == 1) {\n                        this.pos++;\n                    }\n\n                }\n\n            } else {//encoded mode\n                for (var i = 0; i < a; i++) {\n                    setPixelData.call(this, b);\n                }\n            }\n\n        }\n\n\n\n\n        function setPixelData(rgbIndex) {\n            var rgb = this.palette[rgbIndex];\n            this.data[location] = 0;\n            this.data[location + 1] = rgb.blue;\n            this.data[location + 2] = rgb.green;\n            this.data[location + 3] = rgb.red;\n            location += 4;\n        }\n    } else {\n        var mode = this.width % 4;\n        for (var y = this.height - 1; y >= 0; y--) {\n            var line = this.bottom_up ? y : this.height - 1 - y\n            for (var x = 0; x < this.width; x++) {\n                var b = this.buffer.getUint8(this.pos++);\n                var location = line * this.width * 4 + x * 4;\n                if (b < this.palette.length) {\n                    var rgb = this.palette[b];\n\n                    this.data[location] = 0;\n                    this.data[location + 1] = rgb.blue;\n                    this.data[location + 2] = rgb.green;\n                    this.data[location + 3] = rgb.red;\n\n                } else {\n                    this.data[location] = 0;\n                    this.data[location + 1] = 0xFF;\n                    this.data[location + 2] = 0xFF;\n                    this.data[location + 3] = 0xFF;\n                }\n            }\n            if (mode != 0) {\n                this.pos += (4 - mode);\n            }\n        }\n    }\n};\n\nBmpDecoder.prototype.bit15 = function () {\n    var dif_w = this.width % 3;\n    var _11111 = parseInt(\"11111\", 2), _1_5 = _11111;\n    for (var y = this.height - 1; y >= 0; y--) {\n        var line = this.bottom_up ? y : this.height - 1 - y\n        for (var x = 0; x < this.width; x++) {\n\n            var B = this.buffer.getUint16(this.pos);\n            this.pos += 2;\n            var blue = (B & _1_5) / _1_5 * 255 | 0;\n            var green = (B >> 5 & _1_5) / _1_5 * 255 | 0;\n            var red = (B >> 10 & _1_5) / _1_5 * 255 | 0;\n            var alpha = (B >> 15) ? 0xFF : 0x00;\n\n            var location = line * this.width * 4 + x * 4;\n\n            this.data[location] = alpha;\n            this.data[location + 1] = blue;\n            this.data[location + 2] = green;\n            this.data[location + 3] = red;\n        }\n        //skip extra bytes\n        this.pos += dif_w;\n    }\n};\n\nBmpDecoder.prototype.bit16 = function () {\n    var dif_w = (this.width % 2) * 2;\n    //default xrgb555\n    this.maskRed = 0x7C00;\n    this.maskGreen = 0x3E0;\n    this.maskBlue = 0x1F;\n    this.mask0 = 0;\n\n    if (this.compress == 3) {\n        this.maskRed = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        this.maskGreen = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        this.maskBlue = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        this.mask0 = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n    }\n\n\n    var ns = [0, 0, 0];\n    for (var i = 0; i < 16; i++) {\n        if ((this.maskRed >> i) & 0x01) ns[0]++;\n        if ((this.maskGreen >> i) & 0x01) ns[1]++;\n        if ((this.maskBlue >> i) & 0x01) ns[2]++;\n    }\n    ns[1] += ns[0]; ns[2] += ns[1]; ns[0] = 8 - ns[0]; ns[1] -= 8; ns[2] -= 8;\n\n    for (var y = this.height - 1; y >= 0; y--) {\n        var line = this.bottom_up ? y : this.height - 1 - y;\n        for (var x = 0; x < this.width; x++) {\n\n            var B = this.buffer.getUint16(this.pos);\n            this.pos += 2;\n\n            var blue = (B & this.maskBlue) << ns[0];\n            var green = (B & this.maskGreen) >> ns[1];\n            var red = (B & this.maskRed) >> ns[2];\n\n            var location = line * this.width * 4 + x * 4;\n\n            this.data[location] = 0;\n            this.data[location + 1] = blue;\n            this.data[location + 2] = green;\n            this.data[location + 3] = red;\n        }\n        //skip extra bytes\n        this.pos += dif_w;\n    }\n};\n\nBmpDecoder.prototype.bit24 = function () {\n    for (var y = this.height - 1; y >= 0; y--) {\n        var line = this.bottom_up ? y : this.height - 1 - y\n        for (var x = 0; x < this.width; x++) {\n            //Little Endian rgb\n            var blue = this.buffer.getUint8(this.pos++);\n            var green = this.buffer.getUint8(this.pos++);\n            var red = this.buffer.getUint8(this.pos++);\n            var location = line * this.width * 4 + x * 4;\n            this.data[location] = 0;\n            this.data[location + 1] = blue;\n            this.data[location + 2] = green;\n            this.data[location + 3] = red;\n        }\n        //skip extra bytes\n        this.pos += (this.width % 4);\n    }\n\n};\n\n/**\n * add 32bit decode func\n * @author soubok\n */\nBmpDecoder.prototype.bit32 = function () {\n    //BI_BITFIELDS\n    if (this.compress == 3) {\n        this.maskRed = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        this.maskGreen = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        this.maskBlue = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        this.mask0 = this.buffer.getUint32(this.pos);\n        this.pos += 4;\n        for (var y = this.height - 1; y >= 0; y--) {\n            var line = this.bottom_up ? y : this.height - 1 - y;\n            for (var x = 0; x < this.width; x++) {\n                //Little Endian rgba\n                var alpha = this.buffer.getUint8(this.pos++);\n                var blue = this.buffer.getUint8(this.pos++);\n                var green = this.buffer.getUint8(this.pos++);\n                var red = this.buffer.getUint8(this.pos++);\n                var location = line * this.width * 4 + x * 4;\n                this.data[location] = alpha;\n                this.data[location + 1] = blue;\n                this.data[location + 2] = green;\n                this.data[location + 3] = red;\n            }\n        }\n\n    } else {\n        for (var y = this.height - 1; y >= 0; y--) {\n            var line = this.bottom_up ? y : this.height - 1 - y;\n            for (var x = 0; x < this.width; x++) {\n                //Little Endian argb\n                var blue = this.buffer.getUint8(this.pos++);\n                var green = this.buffer.getUint8(this.pos++);\n                var red = this.buffer.getUint8(this.pos++);\n                var alpha = this.buffer.getUint8(this.pos++);\n                var location = line * this.width * 4 + x * 4;\n                this.data[location] = alpha;\n                this.data[location + 1] = blue;\n                this.data[location + 2] = green;\n                this.data[location + 3] = red;\n            }\n        }\n\n    }\n\n\n\n\n};\n\nBmpDecoder.prototype.getData = function () {\n    return this.data;\n};\n\n// export function decode(bmpData) {\n//     var decoder = new BmpDecoder(bmpData);\n//     return decoder;\n// };\nexport { BmpDecoder }",
    "// import {\n// var\tBufferGeometry;\n// } from \"../three/three.module.js\";\n/**\n * Export draco compressed files from threejs geometry objects.\n *\n * Draco files are compressed and usually are smaller than conventional 3D file formats.\n *\n * The exporter receives a options object containing\n *  - decodeSpeed, indicates how to tune the encoder regarding decode speed (0 gives better speed but worst quality)\n *  - encodeSpeed, indicates how to tune the encoder parameters (0 gives better speed but worst quality)\n *  - encoderMethod\n *  - quantization, indicates the presision of each type of data stored in the draco file in the order (POSITION, NORMAL, COLOR, TEX_COORD, GENERIC)\n *  - exportUvs\n *  - exportNormals\n */\n\n/* global DracoEncoderModule */\n\nvar DRACOExporter = function () { };\n\nDRACOExporter.prototype = {\n\n\tconstructor: DRACOExporter,\n\n\tparse: function (geometry, options) {\n\n\n\t\tif (DracoEncoderModule === undefined) {\n\n\t\t\tthrow new Error('THREE.DRACOExporter: required the draco_decoder to work.');\n\n\t\t}\n\n\t\tif (options === undefined) {\n\n\t\t\toptions = {\n\n\t\t\t\tdecodeSpeed: 5,\n\t\t\t\tencodeSpeed: 5,\n\t\t\t\tencoderMethod: DRACOExporter.MESH_EDGEBREAKER_ENCODING,\n\t\t\t\tquantization: [16, 8, 8, 8, 8],//POSITION, NORMAL, COLOR, TEX_COORD,GENERIC\n\t\t\t\texportUvs: true,\n\t\t\t\texportNormals: true,\n\t\t\t\texportColor: false,\n\n\t\t\t};\n\n\t\t}\n\n\t\tvar dracoEncoder = DracoEncoderModule();\n\t\tvar encoder = new dracoEncoder.Encoder();\n\t\tvar builder = new dracoEncoder.MeshBuilder();\n\t\tvar mesh = new dracoEncoder.Mesh();\n\n\t\tif (geometry.isGeometry === true) {\n\n\t\t\tvar bufferGeometry = new THREE.BufferGeometry();\n\t\t\tbufferGeometry.fromGeometry(geometry);\n\t\t\tgeometry = bufferGeometry;\n\n\t\t}\n\n\t\tif (geometry.isBufferGeometry !== true) {\n\n\t\t\tthrow new Error('THREE.DRACOExporter.parse(geometry, options): geometry is not a THREE.Geometry or BufferGeometry instance.');\n\n\t\t}\n\n\t\tvar vertices = geometry.getAttribute('position');\n\t\tbuilder.AddFloatAttributeToMesh(mesh, dracoEncoder.POSITION, vertices.count, vertices.itemSize, vertices.array);\n\n\t\tvar faces = geometry.getIndex();\n\n\t\tif (faces !== null) {\n\n\t\t\tbuilder.AddFacesToMesh(mesh, faces.count / 3, faces.array);\n\n\t\t} else {\n\n\t\t\tvar faces = new (vertices.count > 65535 ? Uint32Array : Uint16Array)(vertices.count);\n\n\t\t\tfor (var i = 0; i < faces.length; i++) {\n\n\t\t\t\tfaces[i] = i;\n\n\t\t\t}\n\n\t\t\tbuilder.AddFacesToMesh(mesh, vertices.count, faces);\n\n\t\t}\n\n\t\tif (options.exportNormals === true) {\n\n\t\t\tvar normals = geometry.getAttribute('normal');\n\n\t\t\tif (normals !== undefined) {\n\n\t\t\t\tbuilder.AddFloatAttributeToMesh(mesh, dracoEncoder.NORMAL, normals.count, normals.itemSize, normals.array);\n\n\t\t\t}\n\n\t\t}\n\n\t\tif (options.exportUvs === true) {\n\n\t\t\tvar uvs = geometry.getAttribute('uv');\n\n\t\t\tif (uvs !== undefined) {\n\n\t\t\t\tbuilder.AddFloatAttributeToMesh(mesh, dracoEncoder.TEX_COORD, uvs.count, uvs.itemSize, uvs.array);\n\n\t\t\t}\n\t\t\tuvs = geometry.getAttribute('uv2');\n\n\t\t\tif (uvs !== undefined) {\n\n\t\t\t\tbuilder.AddFloatAttributeToMesh(mesh, dracoEncoder.GENERIC, uvs.count, uvs.itemSize, uvs.array);\n\n\t\t\t}\n\t\t}\n\n\t\tif (options.exportColor === true) {\n\n\t\t\tvar colors = geometry.getAttribute('color');\n\n\t\t\tif (colors !== undefined) {\n\n\t\t\t\tbuilder.AddFloatAttributeToMesh(mesh, dracoEncoder.COLOR, colors.count, colors.itemSize, colors.array);\n\n\t\t\t}\n\n\t\t}\n\n\t\t//Compress using draco encoder\n\n\t\tvar encodedData = new dracoEncoder.DracoInt8Array();\n\n\t\t//Sets the desired encoding and decoding speed for the given options from 0 (slowest speed, but the best compression) to 10 (fastest, but the worst compression).\n\n\t\tencoder.SetSpeedOptions(options.encodeSpeed || 5, options.decodeSpeed || 5);\n\n\t\t// Sets the desired encoding method for a given geometry.\n\n\t\tif (options.encoderMethod !== undefined) {\n\n\t\t\tencoder.SetEncodingMethod(options.encoderMethod);\n\n\t\t}\n\n\t\t// Sets the quantization (number of bits used to represent) compression options for a named attribute.\n\t\t// The attribute values will be quantized in a box defined by the maximum extent of the attribute values.\n\t\tif (options.quantization !== undefined) {\n\n\t\t\tfor (var i = 0; i < 5; i++) {\n\n\t\t\t\tif (options.quantization[i] !== undefined) {\n\n\t\t\t\t\tencoder.SetAttributeQuantization(i, options.quantization[i]);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar length = encoder.EncodeMeshToDracoBuffer(mesh, encodedData);\n\t\tdracoEncoder.destroy(mesh);\n\n\t\tif (length === 0) {\n\n\t\t\tthrow new Error('THREE.DRACOExporter: Draco encoding failed.');\n\n\t\t}\n\n\t\t//Copy encoded data to buffer.\n\t\tvar outputData = new Int8Array(new ArrayBuffer(length));\n\n\t\tfor (var i = 0; i < length; i++) {\n\n\t\t\toutputData[i] = encodedData.GetValue(i);\n\n\t\t}\n\n\t\tdracoEncoder.destroy(encodedData);\n\t\tdracoEncoder.destroy(encoder);\n\t\tdracoEncoder.destroy(builder);\n\n\t\treturn outputData;\n\n\t}\n\n};\n\n// Encoder methods\n\nDRACOExporter.MESH_EDGEBREAKER_ENCODING = 1;\nDRACOExporter.MESH_SEQUENTIAL_ENCODING = 0;\n\n// Geometry type\n\nDRACOExporter.POINT_CLOUD = 0;\nDRACOExporter.TRIANGULAR_MESH = 1;\n\n// Attribute type\n\nDRACOExporter.INVALID = - 1;\nDRACOExporter.POSITION = 0;\nDRACOExporter.NORMAL = 1;\nDRACOExporter.COLOR = 2;\nDRACOExporter.TEX_COORD = 3;\nDRACOExporter.GENERIC = 4;\n\nexport { DRACOExporter };\n",
    "/**\n * @author fernandojsg / http://fernandojsg.com\n * @author Don McCurdy / https://www.donmccurdy.com\n * @author Takahiro / https://github.com/takahirox\n */\n\nimport { fromByteArray, toByteArray } from  \"../../../../../base64-js/index.js\";\n\n\nconst isNodeEnv = (typeof Blob == 'undefined'\n\t|| typeof Image == 'undefined'\n\t|| typeof Document == 'undefined'\n\t|| typeof window == 'undefined');\n\nvar BufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tDoubleSide,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tMathUtils,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tPropertyBinding,\n\tRGBAFormat,\n\tRepeatWrapping,\n\tScene,\n\tVector3;\n\n//------------------------------------------------------------------------------\n// Constants\n//------------------------------------------------------------------------------\nvar WebGLConstants = {\n\tPOINTS: 0x0000,\n\tLINES: 0x0001,\n\tLINE_LOOP: 0x0002,\n\tLINE_STRIP: 0x0003,\n\tTRIANGLES: 0x0004,\n\tTRIANGLE_STRIP: 0x0005,\n\tTRIANGLE_FAN: 0x0006,\n\n\tUNSIGNED_BYTE: 0x1401,\n\tUNSIGNED_SHORT: 0x1403,\n\tFLOAT: 0x1406,\n\tUNSIGNED_INT: 0x1405,\n\tARRAY_BUFFER: 0x8892,\n\tELEMENT_ARRAY_BUFFER: 0x8893,\n\n\tNEAREST: 0x2600,\n\tLINEAR: 0x2601,\n\tNEAREST_MIPMAP_NEAREST: 0x2700,\n\tLINEAR_MIPMAP_NEAREST: 0x2701,\n\tNEAREST_MIPMAP_LINEAR: 0x2702,\n\tLINEAR_MIPMAP_LINEAR: 0x2703,\n\n\tCLAMP_TO_EDGE: 33071,\n\tMIRRORED_REPEAT: 33648,\n\tREPEAT: 10497\n};\n\nvar THREE_TO_WEBGL = {};\n\nvar PATH_PROPERTIES = {\n\tscale: 'scale',\n\tposition: 'translation',\n\tquaternion: 'rotation',\n\tmorphTargetInfluences: 'weights'\n};\n\n\nvar initDeps$GLTFExporterDone = false;\nfunction initDeps$GLTFExporter() {\n\tif (initDeps$GLTFExporterDone) return;\n\tinitDeps$GLTFExporterDone = true;\n\n\tconst _THREE = THREE;\n\tBufferAttribute = _THREE.BufferAttribute,\n\t\tBufferGeometry = _THREE.BufferGeometry,\n\t\tClampToEdgeWrapping = _THREE.ClampToEdgeWrapping,\n\t\tDoubleSide = _THREE.DoubleSide,\n\t\tInterpolateDiscrete = _THREE.InterpolateDiscrete,\n\t\tInterpolateLinear = _THREE.InterpolateLinear,\n\t\tLinearFilter = _THREE.LinearFilter,\n\t\tLinearMipmapLinearFilter = _THREE.LinearMipmapLinearFilter,\n\t\tLinearMipmapNearestFilter = _THREE.LinearMipmapNearestFilter,\n\t\tMathUtils = _THREE.MathUtils,\n\t\tMirroredRepeatWrapping = _THREE.MirroredRepeatWrapping,\n\t\tNearestFilter = _THREE.NearestFilter,\n\t\tNearestMipmapLinearFilter = _THREE.NearestMipmapLinearFilter,\n\t\tNearestMipmapNearestFilter = _THREE.NearestMipmapNearestFilter,\n\t\tPropertyBinding = _THREE.PropertyBinding,\n\t\tRGBAFormat = _THREE.RGBAFormat,\n\t\tRepeatWrapping = _THREE.RepeatWrapping,\n\t\tScene = _THREE.Scene,\n\t\tVector3 = _THREE.Vector3;\n\n\tTHREE_TO_WEBGL[NearestFilter] = WebGLConstants.NEAREST;\n\tTHREE_TO_WEBGL[NearestMipmapNearestFilter] = WebGLConstants.NEAREST_MIPMAP_NEAREST;\n\tTHREE_TO_WEBGL[NearestMipmapLinearFilter] = WebGLConstants.NEAREST_MIPMAP_LINEAR;\n\tTHREE_TO_WEBGL[LinearFilter] = WebGLConstants.LINEAR;\n\tTHREE_TO_WEBGL[LinearMipmapNearestFilter] = WebGLConstants.LINEAR_MIPMAP_NEAREST;\n\tTHREE_TO_WEBGL[LinearMipmapLinearFilter] = WebGLConstants.LINEAR_MIPMAP_LINEAR;\n\n\tTHREE_TO_WEBGL[ClampToEdgeWrapping] = WebGLConstants.CLAMP_TO_EDGE;\n\tTHREE_TO_WEBGL[RepeatWrapping] = WebGLConstants.REPEAT;\n\tTHREE_TO_WEBGL[MirroredRepeatWrapping] = WebGLConstants.MIRRORED_REPEAT;\n\n}\n//------------------------------------------------------------------------------\n// GLTF Exporter\n//------------------------------------------------------------------------------\nvar GLTFExporter = function () {\n\tinitDeps$GLTFExporter();\n};\n\nGLTFExporter.prototype = {\n\n\tconstructor: GLTFExporter,\n\n\t/**\n\t * Parse scenes and generate GLTF output\n\t * @param  {Scene or [THREE.Scenes]} input   Scene or Array of THREE.Scenes\n\t * @param  {Function} onDone  Callback on completed\n\t * @param  {Object} options options\n\t */\n\tparse: function (input, onDone, options) {\n\n\t\tvar DEFAULT_OPTIONS = {\n\t\t\tbinary: false,\n\t\t\ttrs: false,\n\t\t\tonlyVisible: true,\n\t\t\ttruncateDrawRange: true,\n\t\t\tembedImages: true,\n\t\t\tmaxTextureSize: Infinity,\n\t\t\tanimations: [],\n\t\t\tforceIndices: false,\n\t\t\tforcePowerOfTwoTextures: false,\n\t\t\tincludeCustomExtensions: false\n\t\t};\n\n\t\toptions = Object.assign({}, DEFAULT_OPTIONS, options);\n\n\t\tif (options.animations.length > 0) {\n\n\t\t\t// Only TRS properties, and not matrices, may be targeted by animation.\n\t\t\toptions.trs = true;\n\n\t\t}\n\n\t\tvar outputJSON = {\n\n\t\t\tasset: {\n\n\t\t\t\tversion: \"2.0\",\n\t\t\t\tgenerator: \"GLTFExporter\"\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar byteOffset = 0;\n\t\tvar buffers = [];\n\t\tvar pending = [];\n\t\tvar nodeMap = new Map();\n\t\tvar skins = [];\n\t\tvar extensionsUsed = {};\n\t\tvar cachedData = {\n\n\t\t\tmeshes: new Map(),\n\t\t\tattributes: new Map(),\n\t\t\tattributesNormalized: new Map(),\n\t\t\tmaterials: new Map(),\n\t\t\ttextures: new Map(),\n\t\t\timages: new Map(),\n\n\t\t\tassetSrcs: options.assetSrcs || {}\n\t\t};\n\n\t\tvar cachedCanvas;\n\n\t\tvar uids = new Map();\n\t\tvar uid = 0;\n\n\t\t/**\n\t\t * Assign and return a temporal unique id for an object\n\t\t * especially which doesn't have .uuid\n\t\t * @param  {Object} object\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction getUID(object) {\n\n\t\t\tif (!uids.has(object)) uids.set(object, uid++);\n\n\t\t\treturn uids.get(object);\n\n\t\t}\n\n\t\t/**\n\t\t * Compare two arrays\n\t\t * @param  {Array} array1 Array 1 to compare\n\t\t * @param  {Array} array2 Array 2 to compare\n\t\t * @return {Boolean}        Returns true if both arrays are equal\n\t\t */\n\t\tfunction equalArray(array1, array2) {\n\n\t\t\treturn (array1.length === array2.length) && array1.every(function (element, index) {\n\n\t\t\t\treturn element === array2[index];\n\n\t\t\t});\n\n\t\t}\n\n\t\t/**\n\t\t * Converts a string to an ArrayBuffer.\n\t\t * @param  {string} text\n\t\t * @return {ArrayBuffer}\n\t\t */\n\t\tfunction stringToArrayBuffer(text) {\n\n\t\t\tif (typeof TextEncoder !== 'undefined') {\n\n\t\t\t\treturn new TextEncoder().encode(text).buffer;\n\n\t\t\t}\n\n\t\t\tvar array = new Uint8Array(new ArrayBuffer(text.length));\n\n\t\t\tfor (var i = 0, il = text.length; i < il; i++) {\n\n\t\t\t\tvar value = text.charCodeAt(i);\n\n\t\t\t\t// Replacing multi-byte character with space(0x20).\n\t\t\t\tarray[i] = value > 0xFF ? 0x20 : value;\n\n\t\t\t}\n\n\t\t\treturn array.buffer;\n\n\t\t}\n\n\t\t/**\n\t\t * Get the min and max vectors from the given attribute\n\t\t * @param  {BufferAttribute} attribute Attribute to find the min/max in range from start to start + count\n\t\t * @param  {Integer} start\n\t\t * @param  {Integer} count\n\t\t * @return {Object} Object containing the `min` and `max` values (As an array of attribute.itemSize components)\n\t\t */\n\t\tfunction getMinMax(attribute, start, count) {\n\n\t\t\tvar output = {\n\n\t\t\t\tmin: new Array(attribute.itemSize).fill(Number.POSITIVE_INFINITY),\n\t\t\t\tmax: new Array(attribute.itemSize).fill(Number.NEGATIVE_INFINITY)\n\n\t\t\t};\n\n\t\t\tfor (var i = start; i < start + count; i++) {\n\n\t\t\t\tfor (var a = 0; a < attribute.itemSize; a++) {\n\n\t\t\t\t\tvar value = attribute.array[i * attribute.itemSize + a];\n\t\t\t\t\toutput.min[a] = Math.min(output.min[a], value);\n\t\t\t\t\toutput.max[a] = Math.max(output.max[a], value);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\t/**\n\t\t * Checks if image size is POT.\n\t\t *\n\t\t * @param {Image} image The image to be checked.\n\t\t * @returns {Boolean} Returns true if image size is POT.\n\t\t *\n\t\t */\n\t\tfunction isPowerOfTwo(image) {\n\n\t\t\treturn MathUtils.isPowerOfTwo(image.width) && MathUtils.isPowerOfTwo(image.height);\n\n\t\t}\n\n\t\t/**\n\t\t * Checks if normal attribute values are normalized.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {Boolean}\n\t\t *\n\t\t */\n\t\tfunction isNormalizedNormalAttribute(normal) {\n\n\t\t\tif (cachedData.attributesNormalized.has(normal)) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor (var i = 0, il = normal.count; i < il; i++) {\n\n\t\t\t\t// 0.0005 is from glTF-validator\n\t\t\t\tif (Math.abs(v.fromArray(normal.array, i * 3).length() - 1.0) > 0.0005) return false;\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t/**\n\t\t * Creates normalized normal buffer attribute.\n\t\t *\n\t\t * @param {BufferAttribute} normal\n\t\t * @returns {BufferAttribute}\n\t\t *\n\t\t */\n\t\tfunction createNormalizedNormalAttribute(normal) {\n\n\t\t\tif (cachedData.attributesNormalized.has(normal)) {\n\n\t\t\t\treturn cachedData.attributesNormalized.get(normal);\n\n\t\t\t}\n\n\t\t\tvar attribute = normal.clone();\n\n\t\t\tvar v = new Vector3();\n\n\t\t\tfor (var i = 0, il = attribute.count; i < il; i++) {\n\n\t\t\t\tv.fromArray(attribute.array, i * 3);\n\n\t\t\t\tif (v.x === 0 && v.y === 0 && v.z === 0) {\n\n\t\t\t\t\t// if values can't be normalized set (1, 0, 0)\n\t\t\t\t\tv.setX(1.0);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv.normalize();\n\n\t\t\t\t}\n\n\t\t\t\tv.toArray(attribute.array, i * 3);\n\n\t\t\t}\n\n\t\t\tcachedData.attributesNormalized.set(normal, attribute);\n\n\t\t\treturn attribute;\n\n\t\t}\n\n\t\t/**\n\t\t * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n\t\t * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n\t\t *\n\t\t * @param {Integer} bufferSize The size the original buffer.\n\t\t * @returns {Integer} new buffer size with required padding.\n\t\t *\n\t\t */\n\t\tfunction getPaddedBufferSize(bufferSize) {\n\n\t\t\treturn Math.ceil(bufferSize / 4) * 4;\n\n\t\t}\n\n\t\t/**\n\t\t * Returns a buffer aligned to 4-byte boundary.\n\t\t *\n\t\t * @param {ArrayBuffer} arrayBuffer Buffer to pad\n\t\t * @param {Integer} paddingByte (Optional)\n\t\t * @returns {ArrayBuffer} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n\t\t */\n\t\tfunction getPaddedArrayBuffer(arrayBuffer, paddingByte) {\n\n\t\t\tpaddingByte = paddingByte || 0;\n\n\t\t\tvar paddedLength = getPaddedBufferSize(arrayBuffer.byteLength);\n\n\t\t\tif (paddedLength !== arrayBuffer.byteLength) {\n\n\t\t\t\tvar array = new Uint8Array(paddedLength);\n\t\t\t\tarray.set(new Uint8Array(arrayBuffer));\n\n\t\t\t\tif (paddingByte !== 0) {\n\n\t\t\t\t\tfor (var i = arrayBuffer.byteLength; i < paddedLength; i++) {\n\n\t\t\t\t\t\tarray[i] = paddingByte;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn array.buffer;\n\n\t\t\t}\n\n\t\t\treturn arrayBuffer;\n\n\t\t}\n\n\t\t/**\n\t\t * Serializes a userData.\n\t\t *\n\t\t * @param {THREE.Object3D|THREE.Material} object\n\t\t * @param {Object} gltfProperty\n\t\t */\n\t\tfunction serializeUserData(object, gltfProperty) {\n\n\t\t\tif (Object.keys(object.userData).length === 0) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar json = JSON.parse(JSON.stringify(object.userData));\n\n\t\t\t\tif (options.includeCustomExtensions && json.gltfExtensions) {\n\n\t\t\t\t\tif (gltfProperty.extensions === undefined) {\n\n\t\t\t\t\t\tgltfProperty.extensions = {};\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var extensionName in json.gltfExtensions) {\n\n\t\t\t\t\t\tgltfProperty.extensions[extensionName] = json.gltfExtensions[extensionName];\n\t\t\t\t\t\textensionsUsed[extensionName] = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete json.gltfExtensions;\n\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(json).length > 0) {\n\n\t\t\t\t\tgltfProperty.extras = json;\n\n\t\t\t\t}\n\n\t\t\t} catch (error) {\n\n\t\t\t\tconsole.warn('THREE.GLTFExporter: userData of \\'' + object.name + '\\' ' +\n\t\t\t\t\t'won\\'t be serialized because of JSON.stringify error - ' + error.message);\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Applies a texture transform, if present, to the map definition. Requires\n\t\t * the KHR_texture_transform extension.\n\t\t */\n\t\tfunction applyTextureTransform(mapDef, texture) {\n\n\t\t\tvar didTransform = false;\n\t\t\tvar transformDef = {};\n\n\t\t\tif (texture.offset.x !== 0 || texture.offset.y !== 0) {\n\n\t\t\t\ttransformDef.offset = texture.offset.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif (texture.rotation !== 0) {\n\n\t\t\t\ttransformDef.rotation = texture.rotation;\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif (texture.repeat.x !== 1 || texture.repeat.y !== 1) {\n\n\t\t\t\ttransformDef.scale = texture.repeat.toArray();\n\t\t\t\tdidTransform = true;\n\n\t\t\t}\n\n\t\t\tif (didTransform) {\n\n\t\t\t\tmapDef.extensions = mapDef.extensions || {};\n\t\t\t\tmapDef.extensions['KHR_texture_transform'] = transformDef;\n\t\t\t\textensionsUsed['KHR_texture_transform'] = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Process a buffer to append to the default one.\n\t\t * @param  {ArrayBuffer} buffer\n\t\t * @return {Integer}\n\t\t */\n\t\tfunction processBuffer(buffer) {\n\n\t\t\tif (!outputJSON.buffers) {\n\n\t\t\t\toutputJSON.buffers = [{ byteLength: 0 }];\n\n\t\t\t}\n\n\t\t\t// All buffers are merged before export.\n\t\t\tbuffers.push(buffer);\n\n\t\t\treturn 0;\n\n\t\t}\n\n\t\t/**\n\t\t * Process and generate a BufferView\n\t\t * @param  {BufferAttribute} attribute\n\t\t * @param  {number} componentType\n\t\t * @param  {number} start\n\t\t * @param  {number} count\n\t\t * @param  {number} target (Optional) Target usage of the BufferView\n\t\t * @return {Object}\n\t\t */\n\t\tfunction processBufferView(attribute, componentType, start, count, target) {\n\n\t\t\tif (!outputJSON.bufferViews) {\n\n\t\t\t\toutputJSON.bufferViews = [];\n\n\t\t\t}\n\n\t\t\t// Create a new dataview and dump the attribute's array into it\n\n\t\t\tvar componentSize;\n\n\t\t\tif (componentType === WebGLConstants.UNSIGNED_BYTE) {\n\n\t\t\t\tcomponentSize = 1;\n\n\t\t\t} else if (componentType === WebGLConstants.UNSIGNED_SHORT) {\n\n\t\t\t\tcomponentSize = 2;\n\n\t\t\t} else {\n\n\t\t\t\tcomponentSize = 4;\n\n\t\t\t}\n\n\t\t\tvar byteLength = getPaddedBufferSize(count * attribute.itemSize * componentSize);\n\t\t\tvar dataView = new DataView(new ArrayBuffer(byteLength));\n\t\t\tvar offset = 0;\n\n\t\t\tfor (var i = start; i < start + count; i++) {\n\n\t\t\t\tfor (var a = 0; a < attribute.itemSize; a++) {\n\n\t\t\t\t\t// @TODO Fails on InterleavedBufferAttribute, and could probably be\n\t\t\t\t\t// optimized for normal BufferAttribute.\n\t\t\t\t\tvar value = attribute.array[i * attribute.itemSize + a];\n\n\t\t\t\t\tif (componentType === WebGLConstants.FLOAT) {\n\n\t\t\t\t\t\tdataView.setFloat32(offset, value, true);\n\n\t\t\t\t\t} else if (componentType === WebGLConstants.UNSIGNED_INT) {\n\n\t\t\t\t\t\tdataView.setUint32(offset, value, true);\n\n\t\t\t\t\t} else if (componentType === WebGLConstants.UNSIGNED_SHORT) {\n\n\t\t\t\t\t\tdataView.setUint16(offset, value, true);\n\n\t\t\t\t\t} else if (componentType === WebGLConstants.UNSIGNED_BYTE) {\n\n\t\t\t\t\t\tdataView.setUint8(offset, value);\n\n\t\t\t\t\t}\n\n\t\t\t\t\toffset += componentSize;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar gltfBufferView = {\n\n\t\t\t\tbuffer: processBuffer(dataView.buffer),\n\t\t\t\tbyteOffset: byteOffset,\n\t\t\t\tbyteLength: byteLength\n\n\t\t\t};\n\n\t\t\tif (target !== undefined) gltfBufferView.target = target;\n\n\t\t\tif (target === WebGLConstants.ARRAY_BUFFER) {\n\n\t\t\t\t// Only define byteStride for vertex attributes.\n\t\t\t\tgltfBufferView.byteStride = attribute.itemSize * componentSize;\n\n\t\t\t}\n\n\t\t\tbyteOffset += byteLength;\n\n\t\t\toutputJSON.bufferViews.push(gltfBufferView);\n\n\t\t\t// @TODO Merge bufferViews where possible.\n\t\t\tvar output = {\n\n\t\t\t\tid: outputJSON.bufferViews.length - 1,\n\t\t\t\tbyteLength: 0\n\n\t\t\t};\n\n\t\t\treturn output;\n\n\t\t}\n\n\t\t/**\n\t\t * Process and generate a BufferView from an image Blob.\n\t\t * @param {Blob} blob\n\t\t * @return {Promise<Integer>}\n\t\t */\n\t\tfunction processBufferViewImage(blob) {\n\n\t\t\tif (!outputJSON.bufferViews) {\n\n\t\t\t\toutputJSON.bufferViews = [];\n\n\t\t\t}\n\n\t\t\treturn new Promise(function (resolve) {\n\n\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\treader.readAsArrayBuffer(blob);\n\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\tvar buffer = getPaddedArrayBuffer(reader.result);\n\n\t\t\t\t\tvar bufferView = {\n\t\t\t\t\t\tbuffer: processBuffer(buffer),\n\t\t\t\t\t\tbyteOffset: byteOffset,\n\t\t\t\t\t\tbyteLength: buffer.byteLength\n\t\t\t\t\t};\n\n\t\t\t\t\tbyteOffset += buffer.byteLength;\n\n\t\t\t\t\toutputJSON.bufferViews.push(bufferView);\n\n\t\t\t\t\tresolve(outputJSON.bufferViews.length - 1);\n\n\t\t\t\t};\n\n\t\t\t});\n\n\t\t}\n\n\t\t/**\n\t\t * Process attribute to generate an accessor\n\t\t * @param  {BufferAttribute} attribute Attribute to process\n\t\t * @param  {BufferGeometry} geometry (Optional) Geometry used for truncated draw range\n\t\t * @param  {Integer} start (Optional)\n\t\t * @param  {Integer} count (Optional)\n\t\t * @return {Integer}           Index of the processed accessor on the \"accessors\" array\n\t\t */\n\t\tfunction processAccessor(attribute, geometry, start, count) {\n\n\t\t\tvar types = {\n\n\t\t\t\t1: 'SCALAR',\n\t\t\t\t2: 'VEC2',\n\t\t\t\t3: 'VEC3',\n\t\t\t\t4: 'VEC4',\n\t\t\t\t16: 'MAT4'\n\n\t\t\t};\n\n\t\t\tvar componentType;\n\n\t\t\t// Detect the component type of the attribute array (float, uint or ushort)\n\t\t\tif (attribute.array.constructor === Float32Array) {\n\n\t\t\t\tcomponentType = WebGLConstants.FLOAT;\n\n\t\t\t} else if (attribute.array.constructor === Uint32Array) {\n\n\t\t\t\tcomponentType = WebGLConstants.UNSIGNED_INT;\n\n\t\t\t} else if (attribute.array.constructor === Uint16Array) {\n\n\t\t\t\tcomponentType = WebGLConstants.UNSIGNED_SHORT;\n\n\t\t\t} else if (attribute.array.constructor === Uint8Array) {\n\n\t\t\t\tcomponentType = WebGLConstants.UNSIGNED_BYTE;\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error('THREE.GLTFExporter: Unsupported bufferAttribute component type.');\n\n\t\t\t}\n\n\t\t\tif (start === undefined) start = 0;\n\t\t\tif (count === undefined) count = attribute.count;\n\n\t\t\t// @TODO Indexed buffer geometry with drawRange not supported yet\n\t\t\tif (options.truncateDrawRange && geometry !== undefined && geometry.index === null) {\n\n\t\t\t\tvar end = start + count;\n\t\t\t\tvar end2 = geometry.drawRange.count === Infinity\n\t\t\t\t\t? attribute.count\n\t\t\t\t\t: geometry.drawRange.start + geometry.drawRange.count;\n\n\t\t\t\tstart = Math.max(start, geometry.drawRange.start);\n\t\t\t\tcount = Math.min(end, end2) - start;\n\n\t\t\t\tif (count < 0) count = 0;\n\n\t\t\t}\n\n\t\t\t// Skip creating an accessor if the attribute doesn't have data to export\n\t\t\tif (count === 0) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tvar minMax = getMinMax(attribute, start, count);\n\n\t\t\tvar bufferViewTarget;\n\n\t\t\t// If geometry isn't provided, don't infer the target usage of the bufferView. For\n\t\t\t// animation samplers, target must not be set.\n\t\t\tif (geometry !== undefined) {\n\n\t\t\t\tbufferViewTarget = attribute === geometry.index ? WebGLConstants.ELEMENT_ARRAY_BUFFER : WebGLConstants.ARRAY_BUFFER;\n\n\t\t\t}\n\n\t\t\tvar bufferView = processBufferView(attribute, componentType, start, count, bufferViewTarget);\n\n\t\t\tvar gltfAccessor = {\n\n\t\t\t\tbufferView: bufferView.id,\n\t\t\t\tbyteOffset: bufferView.byteOffset,\n\t\t\t\tcomponentType: componentType,\n\t\t\t\tcount: count,\n\t\t\t\tmax: minMax.max,\n\t\t\t\tmin: minMax.min,\n\t\t\t\ttype: types[attribute.itemSize]\n\n\t\t\t};\n\n\t\t\tif (!outputJSON.accessors) {\n\n\t\t\t\toutputJSON.accessors = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.accessors.push(gltfAccessor);\n\n\t\t\treturn outputJSON.accessors.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process image\n\t\t * @param  {Image} image to process\n\t\t * @param  {Integer} format of the image (e.g. THREE.RGBFormat, RGBAFormat etc)\n\t\t * @param  {Boolean} flipY before writing out the image\n\t\t * @return {Integer}     Index of the processed texture in the \"images\" array\n\t\t */\n\t\tfunction processImage(image, format, flipY) {\n\n\t\t\tif (!image) return;\n\n\t\t\tif (!cachedData.images.has(image.src)) {\n\n\t\t\t\tcachedData.images.set(image.src, {});\n\n\t\t\t}\n\n\t\t\tvar cachedImages = cachedData.images.get(image.src);\n\t\t\tvar mimeType = format === RGBAFormat ? 'image/png' : 'image/jpeg';\n\t\t\tvar key = mimeType + \":flipY/\" + flipY.toString();\n\n\t\t\tif (cachedImages[key] !== undefined) {\n\n\t\t\t\treturn cachedImages[key];\n\n\t\t\t}\n\n\t\t\tif (!outputJSON.images) {\n\n\t\t\t\toutputJSON.images = [];\n\n\t\t\t}\n\n\t\t\tvar gltfImage = { mimeType: mimeType };\n\t\t\tvar uri = cachedData.assetSrcs[image.src] || image.src || image;\n\n\t\t\tif (typeof HTMLCanvasElement != 'undefined' &&\n\t\t\t\t(typeof uri != 'string' || uri.startsWith('blob:') || options.embedImages)) {\n\n\t\t\t\tif (!image) {\n\t\t\t\t\timage = document.createElement('canvas');\n\t\t\t\t\timage.width = 2;\n\t\t\t\t\timage.height = 2;\n\t\t\t\t}\n\t\t\t\tvar canvas = cachedCanvas = cachedCanvas || document.createElement('canvas');\n\n\t\t\t\tcanvas.width = Math.min(image.width, options.maxTextureSize);\n\t\t\t\tcanvas.height = Math.min(image.height, options.maxTextureSize);\n\n\t\t\t\tif (options.forcePowerOfTwoTextures && !isPowerOfTwo(canvas)) {\n\n\t\t\t\t\tconsole.warn('GLTFExporter: Resized non-power-of-two image.', image);\n\n\t\t\t\t\tcanvas.width = MathUtils.floorPowerOfTwo(canvas.width);\n\t\t\t\t\tcanvas.height = MathUtils.floorPowerOfTwo(canvas.height);\n\n\t\t\t\t}\n\n\t\t\t\tvar ctx = canvas.getContext('2d');\n\n\t\t\t\tif (flipY === true) {\n\n\t\t\t\t\tctx.translate(0, canvas.height);\n\t\t\t\t\tctx.scale(1, - 1);\n\n\t\t\t\t}\n\n\t\t\t\tctx.drawImage(image, 0, 0, canvas.width, canvas.height);\n\n\t\t\t\tif (options.binary === true) {\n\n\t\t\t\t\tpending.push(new Promise(function (resolve) {\n\n\t\t\t\t\t\tcanvas.toBlob(function (blob) {\n\n\t\t\t\t\t\t\tprocessBufferViewImage(blob).then(function (bufferViewIndex) {\n\n\t\t\t\t\t\t\t\tgltfImage.bufferView = bufferViewIndex;\n\n\t\t\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}, mimeType);\n\n\t\t\t\t\t}));\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgltfImage.uri = canvas.toDataURL(mimeType);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif (typeof uri != 'string') {\n\t\t\t\t\tdebugger\n\t\t\t\t}\n\t\t\t\tgltfImage.uri = uri;\n\n\t\t\t}\n\n\t\t\toutputJSON.images.push(gltfImage);\n\n\t\t\tvar index = outputJSON.images.length - 1;\n\t\t\tcachedImages[key] = index;\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process sampler\n\t\t * @param  {Texture} map Texture to process\n\t\t * @return {Integer}     Index of the processed texture in the \"samplers\" array\n\t\t */\n\t\tfunction processSampler(map) {\n\n\t\t\tif (!outputJSON.samplers) {\n\n\t\t\t\toutputJSON.samplers = [];\n\n\t\t\t}\n\n\t\t\tvar gltfSampler = {\n\n\t\t\t\tmagFilter: THREE_TO_WEBGL[map.magFilter],\n\t\t\t\tminFilter: THREE_TO_WEBGL[map.minFilter],\n\t\t\t\twrapS: THREE_TO_WEBGL[map.wrapS],\n\t\t\t\twrapT: THREE_TO_WEBGL[map.wrapT]\n\n\t\t\t};\n\n\t\t\toutputJSON.samplers.push(gltfSampler);\n\n\t\t\treturn outputJSON.samplers.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process texture\n\t\t * @param  {Texture} map Map to process\n\t\t * @return {Integer}     Index of the processed texture in the \"textures\" array\n\t\t */\n\t\tfunction processTexture(map) {\n\n\t\t\tif (cachedData.textures.has(map)) {\n\n\t\t\t\treturn cachedData.textures.get(map);\n\n\t\t\t}\n\n\t\t\tif (!outputJSON.textures) {\n\n\t\t\t\toutputJSON.textures = [];\n\n\t\t\t}\n\n\t\t\tvar gltfTexture = {\n\n\t\t\t\tsampler: processSampler(map),\n\t\t\t\tsource: processImage(map.image, map.format, map.flipY)\n\n\t\t\t};\n\n\t\t\tif (map.name) {\n\n\t\t\t\tgltfTexture.name = map.name;\n\n\t\t\t}\n\n\t\t\toutputJSON.textures.push(gltfTexture);\n\n\t\t\tvar index = outputJSON.textures.length - 1;\n\t\t\tcachedData.textures.set(map, index);\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process material\n\t\t * @param  {THREE.Material} material Material to process\n\t\t * @return {Integer}      Index of the processed material in the \"materials\" array\n\t\t */\n\t\tfunction processMaterial(material) {\n\n\t\t\tif (cachedData.materials.has(material)) {\n\n\t\t\t\treturn cachedData.materials.get(material);\n\n\t\t\t}\n\n\t\t\tif (material.isShaderMaterial) {\n\n\t\t\t\tconsole.warn('GLTFExporter: THREE.ShaderMaterial not supported.');\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif (!outputJSON.materials) {\n\n\t\t\t\toutputJSON.materials = [];\n\n\t\t\t}\n\n\t\t\t// @QUESTION Should we avoid including any attribute that has the default value?\n\t\t\tvar gltfMaterial = {\n\n\t\t\t\tpbrMetallicRoughness: {}\n\n\t\t\t};\n\n\t\t\tif (material.isMeshBasicMaterial) {\n\n\t\t\t\tgltfMaterial.extensions = { KHR_materials_unlit: {} };\n\n\t\t\t\textensionsUsed['KHR_materials_unlit'] = true;\n\n\t\t\t} else if (material.isGLTFSpecularGlossinessMaterial) {\n\n\t\t\t\tgltfMaterial.extensions = { KHR_materials_pbrSpecularGlossiness: {} };\n\n\t\t\t\textensionsUsed['KHR_materials_pbrSpecularGlossiness'] = true;\n\n\t\t\t} else if (!material.isMeshStandardMaterial) {\n\n\t\t\t\tconsole.warn('GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.');\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorFactor\n\t\t\tvar color = material.color.toArray().concat([material.opacity]);\n\n\t\t\tif (!equalArray(color, [1, 1, 1, 1])) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.baseColorFactor = color;\n\n\t\t\t}\n\n\t\t\tif (material.isMeshStandardMaterial) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = material.metalness;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = material.roughness;\n\n\t\t\t} else if (material.isMeshBasicMaterial) {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = 0.0;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = 0.9;\n\n\t\t\t} else {\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicFactor = 0.5;\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.roughnessFactor = 0.5;\n\n\t\t\t}\n\n\t\t\t// pbrSpecularGlossiness diffuse, specular and glossiness factor\n\t\t\tif (material.isGLTFSpecularGlossinessMaterial) {\n\n\t\t\t\tif (gltfMaterial.pbrMetallicRoughness.baseColorFactor) {\n\n\t\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor = gltfMaterial.pbrMetallicRoughness.baseColorFactor;\n\n\t\t\t\t}\n\n\t\t\t\tvar specularFactor = [1, 1, 1];\n\t\t\t\tmaterial.specular.toArray(specularFactor, 0);\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor = specularFactor;\n\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor = material.glossiness;\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.metallicRoughnessTexture\n\t\t\tif (material.metalnessMap || material.roughnessMap) {\n\n\t\t\t\tif (material.metalnessMap === material.roughnessMap) {\n\n\t\t\t\t\tvar metalRoughMapDef = { index: processTexture(material.metalnessMap) };\n\t\t\t\t\tapplyTextureTransform(metalRoughMapDef, material.metalnessMap);\n\t\t\t\t\tgltfMaterial.pbrMetallicRoughness.metallicRoughnessTexture = metalRoughMapDef;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn('THREE.GLTFExporter: Ignoring metalnessMap and roughnessMap because they are not the same Texture.');\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// pbrMetallicRoughness.baseColorTexture or pbrSpecularGlossiness diffuseTexture\n\t\t\tif (material.map) {\n\n\t\t\t\tvar baseColorMapDef = { index: processTexture(material.map) };\n\t\t\t\tapplyTextureTransform(baseColorMapDef, material.map);\n\n\t\t\t\tif (material.isGLTFSpecularGlossinessMaterial) {\n\n\t\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.diffuseTexture = baseColorMapDef;\n\n\t\t\t\t}\n\n\t\t\t\tgltfMaterial.pbrMetallicRoughness.baseColorTexture = baseColorMapDef;\n\n\t\t\t}\n\n\t\t\t// pbrSpecularGlossiness specular map\n\t\t\tif (material.isGLTFSpecularGlossinessMaterial && material.specularMap) {\n\n\t\t\t\tvar specularMapDef = { index: processTexture(material.specularMap) };\n\t\t\t\tapplyTextureTransform(specularMapDef, material.specularMap);\n\t\t\t\tgltfMaterial.extensions.KHR_materials_pbrSpecularGlossiness.specularGlossinessTexture = specularMapDef;\n\n\t\t\t}\n\n\t\t\tif (material.emissive) {\n\n\t\t\t\t// emissiveFactor\n\t\t\t\tvar emissive = material.emissive.clone().multiplyScalar(material.emissiveIntensity).toArray();\n\n\t\t\t\tif (!equalArray(emissive, [0, 0, 0])) {\n\n\t\t\t\t\tgltfMaterial.emissiveFactor = emissive;\n\n\t\t\t\t}\n\n\t\t\t\t// emissiveTexture\n\t\t\t\tif (material.emissiveMap) {\n\n\t\t\t\t\tvar emissiveMapDef = { index: processTexture(material.emissiveMap) };\n\t\t\t\t\tapplyTextureTransform(emissiveMapDef, material.emissiveMap);\n\t\t\t\t\tgltfMaterial.emissiveTexture = emissiveMapDef;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normalTexture\n\t\t\tif (material.normalMap) {\n\n\t\t\t\tvar normalMapDef = { index: processTexture(material.normalMap) };\n\n\t\t\t\tif (material.normalScale && material.normalScale.x !== - 1) {\n\n\t\t\t\t\tif (material.normalScale.x !== material.normalScale.y) {\n\n\t\t\t\t\t\tconsole.warn('THREE.GLTFExporter: Normal scale components are different, ignoring Y and exporting X.');\n\n\t\t\t\t\t}\n\n\t\t\t\t\tnormalMapDef.scale = material.normalScale.x;\n\n\t\t\t\t}\n\n\t\t\t\tapplyTextureTransform(normalMapDef, material.normalMap);\n\n\t\t\t\tgltfMaterial.normalTexture = normalMapDef;\n\n\t\t\t}\n\n\t\t\t// occlusionTexture\n\t\t\tif (material.aoMap) {\n\n\t\t\t\tvar occlusionMapDef = {\n\t\t\t\t\tindex: processTexture(material.aoMap),\n\t\t\t\t\ttexCoord: 1\n\t\t\t\t};\n\n\t\t\t\tif (material.aoMapIntensity !== 1.0) {\n\n\t\t\t\t\tocclusionMapDef.strength = material.aoMapIntensity;\n\n\t\t\t\t}\n\n\t\t\t\tapplyTextureTransform(occlusionMapDef, material.aoMap);\n\n\t\t\t\tgltfMaterial.occlusionTexture = occlusionMapDef;\n\n\t\t\t}\n\n\t\t\t// alphaMode\n\t\t\tif (material.transparent) {\n\n\t\t\t\tgltfMaterial.alphaMode = 'BLEND';\n\n\t\t\t} else {\n\n\t\t\t\tif (material.alphaTest > 0.0) {\n\n\t\t\t\t\tgltfMaterial.alphaMode = 'MASK';\n\t\t\t\t\tgltfMaterial.alphaCutoff = material.alphaTest;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// doubleSided\n\t\t\tif (material.side === DoubleSide) {\n\n\t\t\t\tgltfMaterial.doubleSided = true;\n\n\t\t\t}\n\n\t\t\tif (material.name !== '') {\n\n\t\t\t\tgltfMaterial.name = material.name;\n\n\t\t\t}\n\n\t\t\tserializeUserData(material, gltfMaterial);\n\n\t\t\toutputJSON.materials.push(gltfMaterial);\n\n\t\t\tvar index = outputJSON.materials.length - 1;\n\t\t\tcachedData.materials.set(material, index);\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process mesh\n\t\t * @param  {THREE.Mesh} mesh Mesh to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"meshes\" array\n\t\t */\n\t\tfunction processMesh(mesh) {\n\n\t\t\tvar meshCacheKeyParts = [mesh.geometry.uuid];\n\t\t\tif (Array.isArray(mesh.material)) {\n\n\t\t\t\tfor (var i = 0, l = mesh.material.length; i < l; i++) {\n\n\t\t\t\t\tmeshCacheKeyParts.push(mesh.material[i].uuid);\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tmeshCacheKeyParts.push(mesh.material.uuid);\n\n\t\t\t}\n\n\t\t\tvar meshCacheKey = meshCacheKeyParts.join(':');\n\t\t\tif (cachedData.meshes.has(meshCacheKey)) {\n\n\t\t\t\treturn cachedData.meshes.get(meshCacheKey);\n\n\t\t\t}\n\n\t\t\tvar geometry = mesh.geometry;\n\n\t\t\tvar mode;\n\n\t\t\t// Use the correct mode\n\t\t\tif (mesh.isLineSegments) {\n\n\t\t\t\tmode = WebGLConstants.LINES;\n\n\t\t\t} else if (mesh.isLineLoop) {\n\n\t\t\t\tmode = WebGLConstants.LINE_LOOP;\n\n\t\t\t} else if (mesh.isLine) {\n\n\t\t\t\tmode = WebGLConstants.LINE_STRIP;\n\n\t\t\t} else if (mesh.isPoints) {\n\n\t\t\t\tmode = WebGLConstants.POINTS;\n\n\t\t\t} else {\n\n\t\t\t\tmode = mesh.material.wireframe ? WebGLConstants.LINES : WebGLConstants.TRIANGLES;\n\n\t\t\t}\n\n\t\t\tif (!geometry.isBufferGeometry) {\n\n\t\t\t\tconsole.warn('GLTFExporter: Exporting THREE.Geometry will increase file size. Use BufferGeometry instead.');\n\t\t\t\tgeometry = new BufferGeometry().setFromObject(mesh);\n\n\t\t\t}\n\n\t\t\tvar gltfMesh = {};\n\n\t\t\tvar attributes = {};\n\t\t\tvar primitives = [];\n\t\t\tvar targets = [];\n\n\t\t\t// Conversion between attributes names in threejs and gltf spec\n\t\t\tvar nameConversion = {\n\n\t\t\t\tuv: 'TEXCOORD_0',\n\t\t\t\tuv2: 'TEXCOORD_1',\n\t\t\t\tcolor: 'COLOR_0',\n\t\t\t\tskinWeight: 'WEIGHTS_0',\n\t\t\t\tskinIndex: 'JOINTS_0'\n\n\t\t\t};\n\n\t\t\tvar originalNormal = geometry.getAttribute('normal');\n\n\t\t\tif (originalNormal !== undefined && !isNormalizedNormalAttribute(originalNormal)) {\n\n\t\t\t\tconsole.warn('THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one.');\n\n\t\t\t\tgeometry.setAttribute('normal', createNormalizedNormalAttribute(originalNormal));\n\n\t\t\t}\n\n\t\t\t// @QUESTION Detect if .vertexColors = true?\n\t\t\t// For every attribute create an accessor\n\t\t\tvar modifiedAttribute = null;\n\t\t\tfor (var attributeName in geometry.attributes) {\n\n\t\t\t\t// Ignore morph target attributes, which are exported later.\n\t\t\t\tif (attributeName.substr(0, 5) === 'morph') continue;\n\n\t\t\t\tvar attribute = geometry.attributes[attributeName];\n\t\t\t\tattributeName = nameConversion[attributeName] || attributeName.toUpperCase();\n\n\t\t\t\t// Prefix all geometry attributes except the ones specifically\n\t\t\t\t// listed in the spec; non-spec attributes are considered custom.\n\t\t\t\tvar validVertexAttributes =\n\t\t\t\t\t/^(POSITION|NORMAL|TANGENT|TEXCOORD_\\d+|COLOR_\\d+|JOINTS_\\d+|WEIGHTS_\\d+)$/;\n\t\t\t\tif (!validVertexAttributes.test(attributeName)) {\n\n\t\t\t\t\tattributeName = '_' + attributeName;\n\n\t\t\t\t}\n\n\t\t\t\tif (cachedData.attributes.has(getUID(attribute))) {\n\n\t\t\t\t\tattributes[attributeName] = cachedData.attributes.get(getUID(attribute));\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// JOINTS_0 must be UNSIGNED_BYTE or UNSIGNED_SHORT.\n\t\t\t\tmodifiedAttribute = null;\n\t\t\t\tvar array = attribute.array;\n\t\t\t\tif (attributeName === 'JOINTS_0' &&\n\t\t\t\t\t!(array instanceof Uint16Array) &&\n\t\t\t\t\t!(array instanceof Uint8Array)) {\n\n\t\t\t\t\tconsole.warn('GLTFExporter: Attribute \"skinIndex\" converted to type UNSIGNED_SHORT.');\n\t\t\t\t\tmodifiedAttribute = new BufferAttribute(new Uint16Array(array), attribute.itemSize, attribute.normalized);\n\n\t\t\t\t}\n\n\t\t\t\tvar accessor = processAccessor(modifiedAttribute || attribute, geometry);\n\t\t\t\tif (accessor !== null) {\n\n\t\t\t\t\tattributes[attributeName] = accessor;\n\t\t\t\t\tcachedData.attributes.set(getUID(attribute), accessor);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (originalNormal !== undefined) geometry.setAttribute('normal', originalNormal);\n\n\t\t\t// Skip if no exportable attributes found\n\t\t\tif (Object.keys(attributes).length === 0) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\t// Morph targets\n\t\t\tif (mesh.morphTargetInfluences !== undefined && mesh.morphTargetInfluences.length > 0) {\n\n\t\t\t\tvar weights = [];\n\t\t\t\tvar targetNames = [];\n\t\t\t\tvar reverseDictionary = {};\n\n\t\t\t\tif (mesh.morphTargetDictionary !== undefined) {\n\n\t\t\t\t\tfor (var key in mesh.morphTargetDictionary) {\n\n\t\t\t\t\t\treverseDictionary[mesh.morphTargetDictionary[key]] = key;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < mesh.morphTargetInfluences.length; ++i) {\n\n\t\t\t\t\tvar target = {};\n\n\t\t\t\t\tvar warned = false;\n\n\t\t\t\t\tfor (var attributeName in geometry.morphAttributes) {\n\n\t\t\t\t\t\t// glTF 2.0 morph supports only POSITION/NORMAL/TANGENT.\n\t\t\t\t\t\t// Three.js doesn't support TANGENT yet.\n\n\t\t\t\t\t\tif (attributeName !== 'position' && attributeName !== 'normal') {\n\n\t\t\t\t\t\t\tif (!warned) {\n\n\t\t\t\t\t\t\t\tconsole.warn('GLTFExporter: Only POSITION and NORMAL morph are supported.');\n\t\t\t\t\t\t\t\twarned = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar attribute = geometry.morphAttributes[attributeName][i];\n\t\t\t\t\t\tvar gltfAttributeName = attributeName.toUpperCase();\n\n\t\t\t\t\t\t// Three.js morph attribute has absolute values while the one of glTF has relative values.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// glTF 2.0 Specification:\n\t\t\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#morph-targets\n\n\t\t\t\t\t\tvar baseAttribute = geometry.attributes[attributeName];\n\n\t\t\t\t\t\tif (cachedData.attributes.has(getUID(attribute))) {\n\n\t\t\t\t\t\t\ttarget[gltfAttributeName] = cachedData.attributes.get(getUID(attribute));\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Clones attribute not to override\n\t\t\t\t\t\tvar relativeAttribute = attribute.clone();\n\n\t\t\t\t\t\tif (!geometry.morphTargetsRelative) {\n\n\t\t\t\t\t\t\tfor (var j = 0, jl = attribute.count; j < jl; j++) {\n\n\t\t\t\t\t\t\t\trelativeAttribute.setXYZ(\n\t\t\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t\t\tattribute.getX(j) - baseAttribute.getX(j),\n\t\t\t\t\t\t\t\t\tattribute.getY(j) - baseAttribute.getY(j),\n\t\t\t\t\t\t\t\t\tattribute.getZ(j) - baseAttribute.getZ(j)\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttarget[gltfAttributeName] = processAccessor(relativeAttribute, geometry);\n\t\t\t\t\t\tcachedData.attributes.set(getUID(baseAttribute), target[gltfAttributeName]);\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargets.push(target);\n\n\t\t\t\t\tweights.push(mesh.morphTargetInfluences[i]);\n\t\t\t\t\tif (mesh.morphTargetDictionary !== undefined) targetNames.push(reverseDictionary[i]);\n\n\t\t\t\t}\n\n\t\t\t\tgltfMesh.weights = weights;\n\n\t\t\t\tif (targetNames.length > 0) {\n\n\t\t\t\t\tgltfMesh.extras = {};\n\t\t\t\t\tgltfMesh.extras.targetNames = targetNames;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar forceIndices = options.forceIndices;\n\t\t\tvar isMultiMaterial = Array.isArray(mesh.material);\n\n\t\t\tif (isMultiMaterial && geometry.groups.length === 0) return null;\n\n\t\t\tif (!forceIndices && geometry.index === null && isMultiMaterial) {\n\n\t\t\t\t// temporal workaround.\n\t\t\t\tconsole.warn('THREE.GLTFExporter: Creating index for non-indexed multi-material mesh.');\n\t\t\t\tforceIndices = true;\n\n\t\t\t}\n\n\t\t\tvar didForceIndices = false;\n\n\t\t\tif (geometry.index === null && forceIndices) {\n\n\t\t\t\tvar indices = [];\n\n\t\t\t\tfor (var i = 0, il = geometry.attributes.position.count; i < il; i++) {\n\n\t\t\t\t\tindices[i] = i;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setIndex(indices);\n\n\t\t\t\tdidForceIndices = true;\n\n\t\t\t}\n\n\t\t\tvar materials = isMultiMaterial ? mesh.material : [mesh.material];\n\t\t\tvar groups = isMultiMaterial ? geometry.groups : [{ materialIndex: 0, start: undefined, count: undefined }];\n\n\t\t\tfor (var i = 0, il = groups.length; i < il; i++) {\n\n\t\t\t\tvar primitive = {\n\t\t\t\t\tmode: mode,\n\t\t\t\t\tattributes: attributes,\n\t\t\t\t};\n\n\t\t\t\tserializeUserData(geometry, primitive);\n\n\t\t\t\tif (targets.length > 0) primitive.targets = targets;\n\n\t\t\t\tif (geometry.index !== null) {\n\n\t\t\t\t\tvar cacheKey = getUID(geometry.index);\n\n\t\t\t\t\tif (groups[i].start !== undefined || groups[i].count !== undefined) {\n\n\t\t\t\t\t\tcacheKey += ':' + groups[i].start + ':' + groups[i].count;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cachedData.attributes.has(cacheKey)) {\n\n\t\t\t\t\t\tprimitive.indices = cachedData.attributes.get(cacheKey);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tprimitive.indices = processAccessor(geometry.index, geometry, groups[i].start, groups[i].count);\n\t\t\t\t\t\tcachedData.attributes.set(cacheKey, primitive.indices);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (primitive.indices === null) delete primitive.indices;\n\n\t\t\t\t}\n\n\t\t\t\tvar material = processMaterial(materials[groups[i].materialIndex]);\n\n\t\t\t\tif (material !== null) {\n\n\t\t\t\t\tprimitive.material = material;\n\n\t\t\t\t}\n\n\t\t\t\tprimitives.push(primitive);\n\n\t\t\t}\n\n\t\t\tif (didForceIndices) {\n\n\t\t\t\tgeometry.setIndex(null);\n\n\t\t\t}\n\n\t\t\tgltfMesh.primitives = primitives;\n\n\t\t\tif (!outputJSON.meshes) {\n\n\t\t\t\toutputJSON.meshes = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.meshes.push(gltfMesh);\n\n\t\t\tvar index = outputJSON.meshes.length - 1;\n\t\t\tcachedData.meshes.set(meshCacheKey, index);\n\n\t\t\treturn index;\n\n\t\t}\n\n\t\t/**\n\t\t * Process camera\n\t\t * @param  {THREE.Camera} camera Camera to process\n\t\t * @return {Integer}      Index of the processed mesh in the \"camera\" array\n\t\t */\n\t\tfunction processCamera(camera) {\n\n\t\t\tif (!outputJSON.cameras) {\n\n\t\t\t\toutputJSON.cameras = [];\n\n\t\t\t}\n\n\t\t\tvar isOrtho = camera.isOrthographicCamera;\n\n\t\t\tvar gltfCamera = {\n\n\t\t\t\ttype: isOrtho ? 'orthographic' : 'perspective'\n\n\t\t\t};\n\n\t\t\tif (isOrtho) {\n\n\t\t\t\tgltfCamera.orthographic = {\n\n\t\t\t\t\txmag: camera.right * 2,\n\t\t\t\t\tymag: camera.top * 2,\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tgltfCamera.perspective = {\n\n\t\t\t\t\taspectRatio: camera.aspect,\n\t\t\t\t\tyfov: MathUtils.degToRad(camera.fov),\n\t\t\t\t\tzfar: camera.far <= 0 ? 0.001 : camera.far,\n\t\t\t\t\tznear: camera.near < 0 ? 0 : camera.near\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tif (camera.name !== '') {\n\n\t\t\t\tgltfCamera.name = camera.type;\n\n\t\t\t}\n\n\t\t\toutputJSON.cameras.push(gltfCamera);\n\n\t\t\treturn outputJSON.cameras.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Creates glTF animation entry from AnimationClip object.\n\t\t *\n\t\t * Status:\n\t\t * - Only properties listed in PATH_PROPERTIES may be animated.\n\t\t *\n\t\t * @param {THREE.AnimationClip} clip\n\t\t * @param {THREE.Object3D} root\n\t\t * @return {number}\n\t\t */\n\t\tfunction processAnimation(clip, root) {\n\n\t\t\tif (!outputJSON.animations) {\n\n\t\t\t\toutputJSON.animations = [];\n\n\t\t\t}\n\n\t\t\tclip = GLTFExporter.Utils.mergeMorphTargetTracks(clip.clone(), root);\n\n\t\t\tvar tracks = clip.tracks;\n\t\t\tvar channels = [];\n\t\t\tvar samplers = [];\n\n\t\t\tfor (var i = 0; i < tracks.length; ++i) {\n\n\t\t\t\tvar track = tracks[i];\n\t\t\t\tvar trackBinding = PropertyBinding.parseTrackName(track.name);\n\t\t\t\tvar trackNode = PropertyBinding.findNode(root, trackBinding.nodeName);\n\t\t\t\tvar trackProperty = PATH_PROPERTIES[trackBinding.propertyName];\n\n\t\t\t\tif (trackBinding.objectName === 'bones') {\n\n\t\t\t\t\tif (trackNode.isSkinnedMesh === true) {\n\n\t\t\t\t\t\ttrackNode = trackNode.skeleton.getBoneByName(trackBinding.objectIndex);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttrackNode = undefined;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (!trackNode || !trackProperty) {\n\n\t\t\t\t\tconsole.warn('THREE.GLTFExporter: Could not export animation track \"%s\".', track.name);\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t\tvar inputItemSize = 1;\n\t\t\t\tvar outputItemSize = track.values.length / track.times.length;\n\n\t\t\t\tif (trackProperty === PATH_PROPERTIES.morphTargetInfluences) {\n\n\t\t\t\t\toutputItemSize /= trackNode.morphTargetInfluences.length;\n\n\t\t\t\t}\n\n\t\t\t\tvar interpolation;\n\n\t\t\t\t// @TODO export CubicInterpolant(InterpolateSmooth) as CUBICSPLINE\n\n\t\t\t\t// Detecting glTF cubic spline interpolant by checking factory method's special property\n\t\t\t\t// GLTFCubicSplineInterpolant is a custom interpolant and track doesn't return\n\t\t\t\t// valid value from .getInterpolation().\n\t\t\t\tif (track.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline === true) {\n\n\t\t\t\t\tinterpolation = 'CUBICSPLINE';\n\n\t\t\t\t\t// itemSize of CUBICSPLINE keyframe is 9\n\t\t\t\t\t// (VEC3 * 3: inTangent, splineVertex, and outTangent)\n\t\t\t\t\t// but needs to be stored as VEC3 so dividing by 3 here.\n\t\t\t\t\toutputItemSize /= 3;\n\n\t\t\t\t} else if (track.getInterpolation() === InterpolateDiscrete) {\n\n\t\t\t\t\tinterpolation = 'STEP';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinterpolation = 'LINEAR';\n\n\t\t\t\t}\n\n\t\t\t\tsamplers.push({\n\n\t\t\t\t\tinput: processAccessor(new BufferAttribute(track.times, inputItemSize)),\n\t\t\t\t\toutput: processAccessor(new BufferAttribute(track.values, outputItemSize)),\n\t\t\t\t\tinterpolation: interpolation\n\n\t\t\t\t});\n\n\t\t\t\tchannels.push({\n\n\t\t\t\t\tsampler: samplers.length - 1,\n\t\t\t\t\ttarget: {\n\t\t\t\t\t\tnode: nodeMap.get(trackNode),\n\t\t\t\t\t\tpath: trackProperty\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\toutputJSON.animations.push({\n\n\t\t\t\tname: clip.name || 'clip_' + outputJSON.animations.length,\n\t\t\t\tsamplers: samplers,\n\t\t\t\tchannels: channels\n\n\t\t\t});\n\n\t\t\treturn outputJSON.animations.length - 1;\n\n\t\t}\n\n\t\tfunction processSkin(object) {\n\n\t\t\tvar node = outputJSON.nodes[nodeMap.get(object)];\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif (skeleton === undefined) return null;\n\n\t\t\tvar rootJoint = object.skeleton.bones[0];\n\n\t\t\tif (rootJoint === undefined) return null;\n\n\t\t\tvar joints = [];\n\t\t\tvar inverseBindMatrices = new Float32Array(skeleton.bones.length * 16);\n\n\t\t\tfor (var i = 0; i < skeleton.bones.length; ++i) {\n\n\t\t\t\tjoints.push(nodeMap.get(skeleton.bones[i]));\n\n\t\t\t\tskeleton.boneInverses[i].toArray(inverseBindMatrices, i * 16);\n\n\t\t\t}\n\n\t\t\tif (outputJSON.skins === undefined) {\n\n\t\t\t\toutputJSON.skins = [];\n\n\t\t\t}\n\n\t\t\toutputJSON.skins.push({\n\n\t\t\t\tinverseBindMatrices: processAccessor(new BufferAttribute(inverseBindMatrices, 16)),\n\t\t\t\tjoints: joints,\n\t\t\t\tskeleton: nodeMap.get(rootJoint)\n\n\t\t\t});\n\n\t\t\tvar skinIndex = node.skin = outputJSON.skins.length - 1;\n\n\t\t\treturn skinIndex;\n\n\t\t}\n\n\t\tfunction processLight(light) {\n\n\t\t\tvar lightDef = {};\n\n\t\t\tif (light.name) lightDef.name = light.name;\n\n\t\t\tlightDef.color = light.color.toArray();\n\n\t\t\tlightDef.intensity = light.intensity;\n\n\t\t\tif (light.isDirectionalLight) {\n\n\t\t\t\tlightDef.type = 'directional';\n\n\t\t\t} else if (light.isPointLight) {\n\n\t\t\t\tlightDef.type = 'point';\n\t\t\t\tif (light.distance > 0) lightDef.range = light.distance;\n\n\t\t\t} else if (light.isSpotLight) {\n\n\t\t\t\tlightDef.type = 'spot';\n\t\t\t\tif (light.distance > 0) lightDef.range = light.distance;\n\t\t\t\tlightDef.spot = {};\n\t\t\t\tlightDef.spot.innerConeAngle = (light.penumbra - 1.0) * light.angle * - 1.0;\n\t\t\t\tlightDef.spot.outerConeAngle = light.angle;\n\n\t\t\t}\n\n\t\t\tif (light.decay !== undefined && light.decay !== 2) {\n\n\t\t\t\tconsole.warn('THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, '\n\t\t\t\t\t+ 'and expects light.decay=2.');\n\n\t\t\t}\n\n\t\t\tif (light.target\n\t\t\t\t&& (light.target.parent !== light\n\t\t\t\t\t|| light.target.position.x !== 0\n\t\t\t\t\t|| light.target.position.y !== 0\n\t\t\t\t\t|| light.target.position.z !== - 1)) {\n\n\t\t\t\tconsole.warn('THREE.GLTFExporter: Light direction may be lost. For best results, '\n\t\t\t\t\t+ 'make light.target a child of the light with position 0,0,-1.');\n\n\t\t\t}\n\n\t\t\tvar lights = outputJSON.extensions['KHR_lights_punctual'].lights;\n\t\t\tlights.push(lightDef);\n\t\t\treturn lights.length - 1;\n\n\t\t}\n\n\t\t/**\n\t\t * Process Object3D node\n\t\t * @param  {THREE.Object3D} node Object3D to processNode\n\t\t * @return {Integer}      Index of the node in the nodes list\n\t\t */\n\t\tfunction processNode(object) {\n\n\t\t\tif (!outputJSON.nodes) {\n\n\t\t\t\toutputJSON.nodes = [];\n\n\t\t\t}\n\n\t\t\tvar gltfNode = {};\n\n\t\t\tif (options.trs) {\n\n\t\t\t\tvar rotation = object.quaternion.toArray();\n\t\t\t\tvar position = object.position.toArray();\n\t\t\t\tvar scale = object.scale.toArray();\n\n\t\t\t\tif (!equalArray(rotation, [0, 0, 0, 1])) {\n\n\t\t\t\t\tgltfNode.rotation = rotation;\n\n\t\t\t\t}\n\n\t\t\t\tif (!equalArray(position, [0, 0, 0])) {\n\n\t\t\t\t\tgltfNode.translation = position;\n\n\t\t\t\t}\n\n\t\t\t\tif (!equalArray(scale, [1, 1, 1])) {\n\n\t\t\t\t\tgltfNode.scale = scale;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif (object.matrixAutoUpdate) {\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t}\n\n\t\t\t\tif (!equalArray(object.matrix.elements, [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1])) {\n\n\t\t\t\t\tgltfNode.matrix = object.matrix.elements;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// We don't export empty strings name because it represents no-name in Three.js.\n\t\t\tif (object.name !== '') {\n\n\t\t\t\tgltfNode.name = String(object.name);\n\n\t\t\t}\n\n\t\t\tserializeUserData(object, gltfNode);\n\n\t\t\tif (object.isMesh || object.isLine || object.isPoints) {\n\n\t\t\t\tvar mesh = processMesh(object);\n\n\t\t\t\tif (mesh !== null) {\n\n\t\t\t\t\tgltfNode.mesh = mesh;\n\n\t\t\t\t}\n\n\t\t\t} else if (object.isCamera) {\n\n\t\t\t\tgltfNode.camera = processCamera(object);\n\n\t\t\t} else if (object.isDirectionalLight || object.isPointLight || object.isSpotLight) {\n\n\t\t\t\tif (!extensionsUsed['KHR_lights_punctual']) {\n\n\t\t\t\t\toutputJSON.extensions = outputJSON.extensions || {};\n\t\t\t\t\toutputJSON.extensions['KHR_lights_punctual'] = { lights: [] };\n\t\t\t\t\textensionsUsed['KHR_lights_punctual'] = true;\n\n\t\t\t\t}\n\n\t\t\t\tgltfNode.extensions = gltfNode.extensions || {};\n\t\t\t\tgltfNode.extensions['KHR_lights_punctual'] = { light: processLight(object) };\n\n\t\t\t} else if (object.isLight) {\n\n\t\t\t\tconsole.warn('THREE.GLTFExporter: Only directional, point, and spot lights are supported.', object);\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tif (object.isSkinnedMesh) {\n\n\t\t\t\tskins.push(object);\n\n\t\t\t}\n\n\t\t\tif (object.children.length > 0) {\n\n\t\t\t\tvar children = [];\n\n\t\t\t\tfor (var i = 0, l = object.children.length; i < l; i++) {\n\n\t\t\t\t\tvar child = object.children[i];\n\n\t\t\t\t\tif (child.visible || options.onlyVisible === false) {\n\n\t\t\t\t\t\tvar node = processNode(child);\n\n\t\t\t\t\t\tif (node !== null) {\n\n\t\t\t\t\t\t\tchildren.push(node);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (children.length > 0) {\n\n\t\t\t\t\tgltfNode.children = children;\n\n\t\t\t\t}\n\n\n\t\t\t}\n\n\t\t\toutputJSON.nodes.push(gltfNode);\n\n\t\t\tvar nodeIndex = outputJSON.nodes.length - 1;\n\t\t\tnodeMap.set(object, nodeIndex);\n\n\t\t\treturn nodeIndex;\n\n\t\t}\n\n\t\t/**\n\t\t * Process Scene\n\t\t * @param  {Scene} node Scene to process\n\t\t */\n\t\tfunction processScene(scene) {\n\n\t\t\tif (!outputJSON.scenes) {\n\n\t\t\t\toutputJSON.scenes = [];\n\t\t\t\toutputJSON.scene = 0;\n\n\t\t\t}\n\n\t\t\tvar gltfScene = {};\n\n\t\t\tif (scene.name !== '') {\n\n\t\t\t\tgltfScene.name = scene.name;\n\n\t\t\t}\n\n\t\t\toutputJSON.scenes.push(gltfScene);\n\n\t\t\tvar nodes = [];\n\n\t\t\tfor (var i = 0, l = scene.children.length; i < l; i++) {\n\n\t\t\t\tvar child = scene.children[i];\n\n\t\t\t\tif (child.visible || options.onlyVisible === false) {\n\n\t\t\t\t\tvar node = processNode(child);\n\n\t\t\t\t\tif (node !== null) {\n\n\t\t\t\t\t\tnodes.push(node);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (nodes.length > 0) {\n\n\t\t\t\tgltfScene.nodes = nodes;\n\n\t\t\t}\n\n\t\t\tserializeUserData(scene, gltfScene);\n\n\t\t}\n\n\t\t/**\n\t\t * Creates a Scene to hold a list of objects and parse it\n\t\t * @param  {Array} objects List of objects to process\n\t\t */\n\t\tfunction processObjects(objects) {\n\n\t\t\tvar scene = new Scene();\n\t\t\tscene.name = 'AuxScene';\n\n\t\t\tfor (var i = 0; i < objects.length; i++) {\n\n\t\t\t\t// We push directly to children instead of calling `add` to prevent\n\t\t\t\t// modify the .parent and break its original scene and hierarchy\n\t\t\t\tscene.children.push(objects[i]);\n\n\t\t\t}\n\n\t\t\tprocessScene(scene);\n\n\t\t}\n\n\t\tfunction processInput(input) {\n\n\t\t\tinput = input instanceof Array ? input : [input];\n\n\t\t\tvar objectsWithoutScene = [];\n\n\t\t\tfor (var i = 0; i < input.length; i++) {\n\n\t\t\t\tif (input[i] instanceof Scene) {\n\n\t\t\t\t\tprocessScene(input[i]);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobjectsWithoutScene.push(input[i]);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (objectsWithoutScene.length > 0) {\n\n\t\t\t\tprocessObjects(objectsWithoutScene);\n\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < skins.length; ++i) {\n\n\t\t\t\tprocessSkin(skins[i]);\n\n\t\t\t}\n\n\t\t\tfor (var i = 0; i < options.animations.length; ++i) {\n\n\t\t\t\tprocessAnimation(options.animations[i], input[0]);\n\n\t\t\t}\n\n\t\t}\n\n\t\ttry {\n\t\t\tprocessInput(input);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\n\t\t\tthrow error\n\t\t}\n\n\n\t\tfunction mergeBuffers(buffers) {\n\t\t\tbuffers = buffers.map(buffer => {\n\t\t\t\tif (buffer instanceof DataView || buffer instanceof Uint8Array) {\n\t\t\t\t\treturn buffer.buffer\n\t\t\t\t}\n\t\t\t\treturn buffer;\n\t\t\t});\n\n\t\t\tvar totalByteLength = 0;\n\t\t\tbuffers.forEach(buffer => totalByteLength += buffer.byteLength);\n\t\t\tvar mergedBuffer = new Uint8Array(totalByteLength);\n\t\t\tvar byteOffset = 0;\n\n\t\t\tbuffers.forEach(buffer => {\n\t\t\t\tmergedBuffer.set(new Uint8Array(buffer), byteOffset)\n\t\t\t\tbyteOffset += buffer.byteLength;\n\t\t\t});\n\t\t\treturn mergedBuffer.buffer;\n\t\t}\n\n\t\tPromise.all(pending).then(function () {\n\n\t\t\tif (isNodeEnv) {\n\n\t\t\t\t// Merge buffers.\n\t\t\t\tvar mergedBuffer = mergeBuffers(buffers);\n\t\t\t\t// var blob = new Blob(buffers, { type: 'application/octet-stream' });\n\n\t\t\t\t// Declare extensions.\n\t\t\t\tvar extensionsUsedList = Object.keys(extensionsUsed);\n\t\t\t\tif (extensionsUsedList.length > 0) outputJSON.extensionsUsed = extensionsUsedList;\n\n\t\t\t\t// Update bytelength of the single buffer.\n\t\t\t\tif (outputJSON.buffers && outputJSON.buffers.length > 0) outputJSON.buffers[0].byteLength = mergedBuffer.byteLength;//blob.size;\n\n\t\t\t\tif (options.binary === true) {\n\n\t\t\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\t\t\tvar GLB_HEADER_BYTES = 12;\n\t\t\t\t\tvar GLB_HEADER_MAGIC = 0x46546C67;\n\t\t\t\t\tvar GLB_VERSION = 2;\n\n\t\t\t\t\tvar GLB_CHUNK_PREFIX_BYTES = 8;\n\t\t\t\t\tvar GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\n\t\t\t\t\tvar GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n\t\t\t\t\t// var reader = new window.FileReader();\n\t\t\t\t\t// reader.readAsArrayBuffer(blob);\n\t\t\t\t\t// reader.onloadend = function () {\n\n\t\t\t\t\t// Binary chunk.\n\t\t\t\t\tvar binaryChunk = getPaddedArrayBuffer(mergedBuffer)//reader.result);\n\t\t\t\t\tvar binaryChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\n\t\t\t\t\tbinaryChunkPrefix.setUint32(0, binaryChunk.byteLength, true);\n\t\t\t\t\tbinaryChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_BIN, true);\n\n\t\t\t\t\t// JSON chunk.\n\t\t\t\t\tvar jsonChunk = getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(outputJSON)), 0x20);\n\t\t\t\t\tvar jsonChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\n\t\t\t\t\tjsonChunkPrefix.setUint32(0, jsonChunk.byteLength, true);\n\t\t\t\t\tjsonChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_JSON, true);\n\n\t\t\t\t\t// GLB header.\n\t\t\t\t\tvar header = new ArrayBuffer(GLB_HEADER_BYTES);\n\t\t\t\t\tvar headerView = new DataView(header);\n\t\t\t\t\theaderView.setUint32(0, GLB_HEADER_MAGIC, true);\n\t\t\t\t\theaderView.setUint32(4, GLB_VERSION, true);\n\t\t\t\t\tvar totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\t\theaderView.setUint32(8, totalByteLength, true);\n\n\t\t\t\t\t// var glbBlob \n\t\t\t\t\tvar glbBuffer = mergeBuffers(//new Blob(\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\theader,\n\t\t\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\t\t\tjsonChunk,\n\t\t\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\t\t\tbinaryChunk\n\t\t\t\t\t\t])\n\t\t\t\t\t//, { type: 'application/octet-stream' });\n\n\t\t\t\t\t// var glbReader = new window.FileReader();\n\t\t\t\t\t// glbReader.readAsArrayBuffer(glbBlob);\n\t\t\t\t\t// glbReader.onloadend = function () {\n\n\t\t\t\t\tonDone(glbBuffer)//glbReader.result);\n\n\t\t\t\t\t// };\n\n\t\t\t\t\t// };\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (outputJSON.buffers && outputJSON.buffers.length > 0) {\n\n\t\t\t\t\t\t// var reader = new window.FileReader();\n\t\t\t\t\t\t// reader.readAsDataURL(blob);\n\t\t\t\t\t\t// reader.onloadend = function () {\n\n\t\t\t\t\t\tvar base64data = 'data:application/octet-stream;base64,' + fromByteArray(new Uint8Array(mergedBuffer))//reader.result;\n\t\t\t\t\t\toutputJSON.buffers[0].uri = base64data;\n\t\t\t\t\t\tonDone(outputJSON);\n\n\t\t\t\t\t\t// };\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tonDone(outputJSON);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\t// Merge buffers.\n\t\t\t\tvar blob = new Blob(buffers, { type: 'application/octet-stream' });\n\n\t\t\t\t// Declare extensions.\n\t\t\t\tvar extensionsUsedList = Object.keys(extensionsUsed);\n\t\t\t\tif (extensionsUsedList.length > 0) outputJSON.extensionsUsed = extensionsUsedList;\n\n\t\t\t\t// Update bytelength of the single buffer.\n\t\t\t\tif (outputJSON.buffers && outputJSON.buffers.length > 0) outputJSON.buffers[0].byteLength = blob.size;\n\n\t\t\t\tif (options.binary === true) {\n\n\t\t\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#glb-file-format-specification\n\n\t\t\t\t\tvar GLB_HEADER_BYTES = 12;\n\t\t\t\t\tvar GLB_HEADER_MAGIC = 0x46546C67;\n\t\t\t\t\tvar GLB_VERSION = 2;\n\n\t\t\t\t\tvar GLB_CHUNK_PREFIX_BYTES = 8;\n\t\t\t\t\tvar GLB_CHUNK_TYPE_JSON = 0x4E4F534A;\n\t\t\t\t\tvar GLB_CHUNK_TYPE_BIN = 0x004E4942;\n\n\t\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\t\treader.readAsArrayBuffer(blob);\n\t\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t\t// Binary chunk.\n\t\t\t\t\t\tvar binaryChunk = getPaddedArrayBuffer(reader.result);\n\t\t\t\t\t\tvar binaryChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\n\t\t\t\t\t\tbinaryChunkPrefix.setUint32(0, binaryChunk.byteLength, true);\n\t\t\t\t\t\tbinaryChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_BIN, true);\n\n\t\t\t\t\t\t// JSON chunk.\n\t\t\t\t\t\tvar jsonChunk = getPaddedArrayBuffer(stringToArrayBuffer(JSON.stringify(outputJSON)), 0x20);\n\t\t\t\t\t\tvar jsonChunkPrefix = new DataView(new ArrayBuffer(GLB_CHUNK_PREFIX_BYTES));\n\t\t\t\t\t\tjsonChunkPrefix.setUint32(0, jsonChunk.byteLength, true);\n\t\t\t\t\t\tjsonChunkPrefix.setUint32(4, GLB_CHUNK_TYPE_JSON, true);\n\n\t\t\t\t\t\t// GLB header.\n\t\t\t\t\t\tvar header = new ArrayBuffer(GLB_HEADER_BYTES);\n\t\t\t\t\t\tvar headerView = new DataView(header);\n\t\t\t\t\t\theaderView.setUint32(0, GLB_HEADER_MAGIC, true);\n\t\t\t\t\t\theaderView.setUint32(4, GLB_VERSION, true);\n\t\t\t\t\t\tvar totalByteLength = GLB_HEADER_BYTES\n\t\t\t\t\t\t\t+ jsonChunkPrefix.byteLength + jsonChunk.byteLength\n\t\t\t\t\t\t\t+ binaryChunkPrefix.byteLength + binaryChunk.byteLength;\n\t\t\t\t\t\theaderView.setUint32(8, totalByteLength, true);\n\n\t\t\t\t\t\tvar glbBlob = new Blob([\n\t\t\t\t\t\t\theader,\n\t\t\t\t\t\t\tjsonChunkPrefix,\n\t\t\t\t\t\t\tjsonChunk,\n\t\t\t\t\t\t\tbinaryChunkPrefix,\n\t\t\t\t\t\t\tbinaryChunk\n\t\t\t\t\t\t], { type: 'application/octet-stream' });\n\n\t\t\t\t\t\tvar glbReader = new window.FileReader();\n\t\t\t\t\t\tglbReader.readAsArrayBuffer(glbBlob);\n\t\t\t\t\t\tglbReader.onloadend = function () {\n\n\t\t\t\t\t\t\tonDone(glbReader.result);\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t};\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (outputJSON.buffers && outputJSON.buffers.length > 0) {\n\n\t\t\t\t\t\tvar reader = new window.FileReader();\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\treader.onloadend = function () {\n\n\t\t\t\t\t\t\tvar base64data = reader.result;\n\t\t\t\t\t\t\toutputJSON.buffers[0].uri = base64data;\n\t\t\t\t\t\t\tonDone(outputJSON);\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tonDone(outputJSON);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t}\n\n};\n\nGLTFExporter.Utils = {\n\n\tinsertKeyframe: function (track, time) {\n\n\t\tvar tolerance = 0.001; // 1ms\n\t\tvar valueSize = track.getValueSize();\n\n\t\tvar times = new track.TimeBufferType(track.times.length + 1);\n\t\tvar values = new track.ValueBufferType(track.values.length + valueSize);\n\t\tvar interpolant = track.createInterpolant(new track.ValueBufferType(valueSize));\n\n\t\tvar index;\n\n\t\tif (track.times.length === 0) {\n\n\t\t\ttimes[0] = time;\n\n\t\t\tfor (var i = 0; i < valueSize; i++) {\n\n\t\t\t\tvalues[i] = 0;\n\n\t\t\t}\n\n\t\t\tindex = 0;\n\n\t\t} else if (time < track.times[0]) {\n\n\t\t\tif (Math.abs(track.times[0] - time) < tolerance) return 0;\n\n\t\t\ttimes[0] = time;\n\t\t\ttimes.set(track.times, 1);\n\n\t\t\tvalues.set(interpolant.evaluate(time), 0);\n\t\t\tvalues.set(track.values, valueSize);\n\n\t\t\tindex = 0;\n\n\t\t} else if (time > track.times[track.times.length - 1]) {\n\n\t\t\tif (Math.abs(track.times[track.times.length - 1] - time) < tolerance) {\n\n\t\t\t\treturn track.times.length - 1;\n\n\t\t\t}\n\n\t\t\ttimes[times.length - 1] = time;\n\t\t\ttimes.set(track.times, 0);\n\n\t\t\tvalues.set(track.values, 0);\n\t\t\tvalues.set(interpolant.evaluate(time), track.values.length);\n\n\t\t\tindex = times.length - 1;\n\n\t\t} else {\n\n\t\t\tfor (var i = 0; i < track.times.length; i++) {\n\n\t\t\t\tif (Math.abs(track.times[i] - time) < tolerance) return i;\n\n\t\t\t\tif (track.times[i] < time && track.times[i + 1] > time) {\n\n\t\t\t\t\ttimes.set(track.times.slice(0, i + 1), 0);\n\t\t\t\t\ttimes[i + 1] = time;\n\t\t\t\t\ttimes.set(track.times.slice(i + 1), i + 2);\n\n\t\t\t\t\tvalues.set(track.values.slice(0, (i + 1) * valueSize), 0);\n\t\t\t\t\tvalues.set(interpolant.evaluate(time), (i + 1) * valueSize);\n\t\t\t\t\tvalues.set(track.values.slice((i + 1) * valueSize), (i + 2) * valueSize);\n\n\t\t\t\t\tindex = i + 1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttrack.times = times;\n\t\ttrack.values = values;\n\n\t\treturn index;\n\n\t},\n\n\tmergeMorphTargetTracks: function (clip, root) {\n\n\t\tvar tracks = [];\n\t\tvar mergedTracks = {};\n\t\tvar sourceTracks = clip.tracks;\n\n\t\tfor (var i = 0; i < sourceTracks.length; ++i) {\n\n\t\t\tvar sourceTrack = sourceTracks[i];\n\t\t\tvar sourceTrackBinding = PropertyBinding.parseTrackName(sourceTrack.name);\n\t\t\tvar sourceTrackNode = PropertyBinding.findNode(root, sourceTrackBinding.nodeName);\n\n\t\t\tif (sourceTrackBinding.propertyName !== 'morphTargetInfluences' || sourceTrackBinding.propertyIndex === undefined) {\n\n\t\t\t\t// Tracks that don't affect morph targets, or that affect all morph targets together, can be left as-is.\n\t\t\t\ttracks.push(sourceTrack);\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif (sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodDiscrete\n\t\t\t\t&& sourceTrack.createInterpolant !== sourceTrack.InterpolantFactoryMethodLinear) {\n\n\t\t\t\tif (sourceTrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline) {\n\n\t\t\t\t\t// This should never happen, because glTF morph target animations\n\t\t\t\t\t// affect all targets already.\n\t\t\t\t\tthrow new Error('THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.');\n\n\t\t\t\t}\n\n\t\t\t\tconsole.warn('THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead.');\n\n\t\t\t\tsourceTrack = sourceTrack.clone();\n\t\t\t\tsourceTrack.setInterpolation(InterpolateLinear);\n\n\t\t\t}\n\n\t\t\tvar targetCount = sourceTrackNode.morphTargetInfluences.length;\n\t\t\tvar targetIndex = sourceTrackNode.morphTargetDictionary[sourceTrackBinding.propertyIndex];\n\n\t\t\tif (targetIndex === undefined) {\n\n\t\t\t\tthrow new Error('THREE.GLTFExporter: Morph target name not found: ' + sourceTrackBinding.propertyIndex);\n\n\t\t\t}\n\n\t\t\tvar mergedTrack;\n\n\t\t\t// If this is the first time we've seen this object, create a new\n\t\t\t// track to store merged keyframe data for each morph target.\n\t\t\tif (mergedTracks[sourceTrackNode.uuid] === undefined) {\n\n\t\t\t\tmergedTrack = sourceTrack.clone();\n\n\t\t\t\tvar values = new mergedTrack.ValueBufferType(targetCount * mergedTrack.times.length);\n\n\t\t\t\tfor (var j = 0; j < mergedTrack.times.length; j++) {\n\n\t\t\t\t\tvalues[j * targetCount + targetIndex] = mergedTrack.values[j];\n\n\t\t\t\t}\n\n\t\t\t\tmergedTrack.name = '.morphTargetInfluences';\n\t\t\t\tmergedTrack.values = values;\n\n\t\t\t\tmergedTracks[sourceTrackNode.uuid] = mergedTrack;\n\t\t\t\ttracks.push(mergedTrack);\n\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar sourceInterpolant = sourceTrack.createInterpolant(new sourceTrack.ValueBufferType(1));\n\n\t\t\tmergedTrack = mergedTracks[sourceTrackNode.uuid];\n\n\t\t\t// For every existing keyframe of the merged track, write a (possibly\n\t\t\t// interpolated) value from the source track.\n\t\t\tfor (var j = 0; j < mergedTrack.times.length; j++) {\n\n\t\t\t\tmergedTrack.values[j * targetCount + targetIndex] = sourceInterpolant.evaluate(mergedTrack.times[j]);\n\n\t\t\t}\n\n\t\t\t// For every existing keyframe of the source track, write a (possibly\n\t\t\t// new) keyframe to the merged track. Values from the previous loop may\n\t\t\t// be written again, but keyframes are de-duplicated.\n\t\t\tfor (var j = 0; j < sourceTrack.times.length; j++) {\n\n\t\t\t\tvar keyframeIndex = this.insertKeyframe(mergedTrack, sourceTrack.times[j]);\n\t\t\t\tmergedTrack.values[keyframeIndex * targetCount + targetIndex] = sourceTrack.values[j];\n\n\t\t\t}\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\treturn clip;\n\n\t}\n\n};\n\nexport { GLTFExporter };\n",
    "/**\n * @author Daosheng Mu / https://github.com/DaoshengMu/\n * @author mrdoob / http://mrdoob.com/\n * @author takahirox / https://github.com/takahirox/\n */\n\nimport { BmpDecoder } from  \"../bmp-js/lib/decoder.js\";\n\n\nimport esExtends from  \"../../../../utils/Source/esExtends.js\";\n\n\n\nvar _BMPLoader;\nfunction BMPLoader(manager) {\n\tif (!_BMPLoader) {\n\t\tconst { FileLoader,\n\t\t\tLoader,\n\t\t\tTexture } = THREE;\n\n\t\tvar _BMPLoaderPrototype = {\n\n\t\t\t// constructor: BMPLoader,\n\n\t\t\tload: function (url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar texture = new Texture();\n\n\t\t\t\tif (typeof url == 'string') {\n\t\t\t\t\tvar loader = new THREE.FileLoader(this.manager);\n\t\t\t\t\tloader.setResponseType('arraybuffer');\n\t\t\t\t\tloader.setPath(this.path);\n\n\t\t\t\t\tloader.load(url, function (buffer) {\n\n\t\t\t\t\t\ttexture.image = scope.parse(buffer);\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tif (onLoad !== undefined) {\n\n\t\t\t\t\t\t\tonLoad(texture);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}, onProgress, onError);\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image = scope.parse(url);\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif (onLoad !== undefined) {\n\n\t\t\t\t\t\tonLoad(texture);\n\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn texture;\n\n\t\t\t},\n\n\t\t\tparse: function (buffer) {\n\n\t\t\t\tvar decoder = new BmpDecoder(buffer);\n\t\t\t\tvar cv = document.createElement('canvas');\n\t\t\t\tcv.width = decoder.width;\n\t\t\t\tcv.height = decoder.height;\n\t\t\t\tvar ctx = cv.getContext('2d');\n\t\t\t\tvar imgData = ctx.getImageData(0, 0, cv.width, cv.height);\n\t\t\t\timgData.data.set(decoder.data);\n\t\t\t\treturn cv;\n\t\t\t}\n\n\t\t}\n\t\t_BMPLoader = esExtends(Loader, {\n\t\t\tprototype: _BMPLoaderPrototype,\n\t\t\tesConstructor() {\n\t\t\t\tclass _esCtor extends Loader {\n\t\t\t\t\tconstructor(manager) {\n\t\t\t\t\t\tsuper(manager)\n\t\t\t\t\t\tconstructor.call(this, manager);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _esCtor;\n\t\t\t},\n\t\t\tconstructor(manager) { }\n\t\t})\n\t\t_BMPLoader.prototype.constructor.name = 'BMPLoader'\n\t}\n\treturn new _BMPLoader(manager);\n}\nexport { BMPLoader };\n",
    "/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport esExtends from  \"../../../../utils/Source/esExtends.js\";\n\n\nvar CompressedTextureLoader,\n\tRGBAFormat,\n\tRGBA_S3TC_DXT3_Format,\n\tRGBA_S3TC_DXT5_Format,\n\tRGB_ETC1_Format,\n\tRGB_S3TC_DXT1_Format\n\t;\nvar initDeps$DDSLoaderDone = false;\nfunction initDeps$DDSLoader() {\n\tif (initDeps$DDSLoaderDone) return\n\tinitDeps$DDSLoaderDone = true;\n\tconst _THREE = THREE;\n\tCompressedTextureLoader = _THREE.CompressedTextureLoader,\n\t\tRGBAFormat = _THREE.RGBAFormat,\n\t\tRGBA_S3TC_DXT3_Format = _THREE.RGBA_S3TC_DXT3_Format,\n\t\tRGBA_S3TC_DXT5_Format = _THREE.RGBA_S3TC_DXT5_Format,\n\t\tRGB_ETC1_Format = _THREE.RGB_ETC1_Format,\n\t\tRGB_S3TC_DXT1_Format = _THREE.RGB_S3TC_DXT1_Format;\n}\n\nvar _DDSLoader;\nvar DDSLoader = function (manager) {\n\tinitDeps$DDSLoader();\n\n\tif (!_DDSLoader) {\n\t\tconst _prototype_ = {\n\n\t\t\tparse: function (buffer, loadMipmaps) {\n\n\t\t\t\tvar dds = { mipmaps: [], width: 0, height: 0, format: null, mipmapCount: 1 };\n\n\t\t\t\t// Adapted from @toji's DDS utils\n\t\t\t\t// https://github.com/toji/webgl-texture-utils/blob/master/texture-util/dds.js\n\n\t\t\t\t// All values and structures referenced from:\n\t\t\t\t// http://msdn.microsoft.com/en-us/library/bb943991.aspx/\n\n\t\t\t\tvar DDS_MAGIC = 0x20534444;\n\n\t\t\t\tvar DDSD_CAPS = 0x1,\n\t\t\t\t\tDDSD_HEIGHT = 0x2,\n\t\t\t\t\tDDSD_WIDTH = 0x4,\n\t\t\t\t\tDDSD_PITCH = 0x8,\n\t\t\t\t\tDDSD_PIXELFORMAT = 0x1000,\n\t\t\t\t\tDDSD_MIPMAPCOUNT = 0x20000,\n\t\t\t\t\tDDSD_LINEARSIZE = 0x80000,\n\t\t\t\t\tDDSD_DEPTH = 0x800000;\n\n\t\t\t\tvar DDSCAPS_COMPLEX = 0x8,\n\t\t\t\t\tDDSCAPS_MIPMAP = 0x400000,\n\t\t\t\t\tDDSCAPS_TEXTURE = 0x1000;\n\n\t\t\t\tvar DDSCAPS2_CUBEMAP = 0x200,\n\t\t\t\t\tDDSCAPS2_CUBEMAP_POSITIVEX = 0x400,\n\t\t\t\t\tDDSCAPS2_CUBEMAP_NEGATIVEX = 0x800,\n\t\t\t\t\tDDSCAPS2_CUBEMAP_POSITIVEY = 0x1000,\n\t\t\t\t\tDDSCAPS2_CUBEMAP_NEGATIVEY = 0x2000,\n\t\t\t\t\tDDSCAPS2_CUBEMAP_POSITIVEZ = 0x4000,\n\t\t\t\t\tDDSCAPS2_CUBEMAP_NEGATIVEZ = 0x8000,\n\t\t\t\t\tDDSCAPS2_VOLUME = 0x200000;\n\n\t\t\t\tvar DDPF_ALPHAPIXELS = 0x1,\n\t\t\t\t\tDDPF_ALPHA = 0x2,\n\t\t\t\t\tDDPF_FOURCC = 0x4,\n\t\t\t\t\tDDPF_RGB = 0x40,\n\t\t\t\t\tDDPF_YUV = 0x200,\n\t\t\t\t\tDDPF_LUMINANCE = 0x20000;\n\n\t\t\t\tfunction fourCCToInt32(value) {\n\n\t\t\t\t\treturn value.charCodeAt(0) +\n\t\t\t\t\t\t(value.charCodeAt(1) << 8) +\n\t\t\t\t\t\t(value.charCodeAt(2) << 16) +\n\t\t\t\t\t\t(value.charCodeAt(3) << 24);\n\n\t\t\t\t}\n\n\t\t\t\tfunction int32ToFourCC(value) {\n\n\t\t\t\t\treturn String.fromCharCode(\n\t\t\t\t\t\tvalue & 0xff,\n\t\t\t\t\t\t(value >> 8) & 0xff,\n\t\t\t\t\t\t(value >> 16) & 0xff,\n\t\t\t\t\t\t(value >> 24) & 0xff\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t\tfunction loadARGBMip(buffer, dataOffset, width, height) {\n\n\t\t\t\t\tvar dataLength = width * height * 4;\n\t\t\t\t\tvar srcBuffer = new Uint8Array(buffer, dataOffset, dataLength);\n\t\t\t\t\tvar byteArray = new Uint8Array(dataLength);\n\t\t\t\t\tvar dst = 0;\n\t\t\t\t\tvar src = 0;\n\t\t\t\t\tfor (var y = 0; y < height; y++) {\n\n\t\t\t\t\t\tfor (var x = 0; x < width; x++) {\n\n\t\t\t\t\t\t\tvar b = srcBuffer[src]; src++;\n\t\t\t\t\t\t\tvar g = srcBuffer[src]; src++;\n\t\t\t\t\t\t\tvar r = srcBuffer[src]; src++;\n\t\t\t\t\t\t\tvar a = srcBuffer[src]; src++;\n\t\t\t\t\t\t\tbyteArray[dst] = r; dst++;\t//r\n\t\t\t\t\t\t\tbyteArray[dst] = g; dst++;\t//g\n\t\t\t\t\t\t\tbyteArray[dst] = b; dst++;\t//b\n\t\t\t\t\t\t\tbyteArray[dst] = a; dst++;\t//a\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\treturn byteArray;\n\n\t\t\t\t}\n\n\t\t\t\tvar FOURCC_DXT1 = fourCCToInt32(\"DXT1\");\n\t\t\t\tvar FOURCC_DXT3 = fourCCToInt32(\"DXT3\");\n\t\t\t\tvar FOURCC_DXT5 = fourCCToInt32(\"DXT5\");\n\t\t\t\tvar FOURCC_ETC1 = fourCCToInt32(\"ETC1\");\n\n\t\t\t\tvar headerLengthInt = 31; // The header length in 32 bit ints\n\n\t\t\t\t// Offsets into the header array\n\n\t\t\t\tvar off_magic = 0;\n\n\t\t\t\tvar off_size = 1;\n\t\t\t\tvar off_flags = 2;\n\t\t\t\tvar off_height = 3;\n\t\t\t\tvar off_width = 4;\n\n\t\t\t\tvar off_mipmapCount = 7;\n\n\t\t\t\tvar off_pfFlags = 20;\n\t\t\t\tvar off_pfFourCC = 21;\n\t\t\t\tvar off_RGBBitCount = 22;\n\t\t\t\tvar off_RBitMask = 23;\n\t\t\t\tvar off_GBitMask = 24;\n\t\t\t\tvar off_BBitMask = 25;\n\t\t\t\tvar off_ABitMask = 26;\n\n\t\t\t\tvar off_caps = 27;\n\t\t\t\tvar off_caps2 = 28;\n\t\t\t\tvar off_caps3 = 29;\n\t\t\t\tvar off_caps4 = 30;\n\n\t\t\t\t// Parse header\n\n\t\t\t\tvar header = new Int32Array(buffer, 0, headerLengthInt);\n\n\t\t\t\tif (header[off_magic] !== DDS_MAGIC) {\n\n\t\t\t\t\tconsole.error('THREE.DDSLoader.parse: Invalid magic number in DDS header.');\n\t\t\t\t\treturn dds;\n\n\t\t\t\t}\n\n\t\t\t\tif (!header[off_pfFlags] & DDPF_FOURCC) {\n\n\t\t\t\t\tconsole.error('THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code.');\n\t\t\t\t\treturn dds;\n\n\t\t\t\t}\n\n\t\t\t\tvar blockBytes;\n\n\t\t\t\tvar fourCC = header[off_pfFourCC];\n\n\t\t\t\tvar isRGBAUncompressed = false;\n\n\t\t\t\tswitch (fourCC) {\n\n\t\t\t\t\tcase FOURCC_DXT1:\n\n\t\t\t\t\t\tblockBytes = 8;\n\t\t\t\t\t\tdds.format = RGB_S3TC_DXT1_Format;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FOURCC_DXT3:\n\n\t\t\t\t\t\tblockBytes = 16;\n\t\t\t\t\t\tdds.format = RGBA_S3TC_DXT3_Format;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FOURCC_DXT5:\n\n\t\t\t\t\t\tblockBytes = 16;\n\t\t\t\t\t\tdds.format = RGBA_S3TC_DXT5_Format;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase FOURCC_ETC1:\n\n\t\t\t\t\t\tblockBytes = 8;\n\t\t\t\t\t\tdds.format = RGB_ETC1_Format;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif (header[off_RGBBitCount] === 32\n\t\t\t\t\t\t\t&& header[off_RBitMask] & 0xff0000\n\t\t\t\t\t\t\t&& header[off_GBitMask] & 0xff00\n\t\t\t\t\t\t\t&& header[off_BBitMask] & 0xff\n\t\t\t\t\t\t\t&& header[off_ABitMask] & 0xff000000) {\n\n\t\t\t\t\t\t\tisRGBAUncompressed = true;\n\t\t\t\t\t\t\tblockBytes = 64;\n\t\t\t\t\t\t\tdds.format = RGBAFormat;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.error('THREE.DDSLoader.parse: Unsupported FourCC code ', int32ToFourCC(fourCC));\n\t\t\t\t\t\t\treturn dds;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tdds.mipmapCount = 1;\n\n\t\t\t\tif (header[off_flags] & DDSD_MIPMAPCOUNT && loadMipmaps !== false) {\n\n\t\t\t\t\tdds.mipmapCount = Math.max(1, header[off_mipmapCount]);\n\n\t\t\t\t}\n\n\t\t\t\tvar caps2 = header[off_caps2];\n\t\t\t\tdds.isCubemap = caps2 & DDSCAPS2_CUBEMAP ? true : false;\n\t\t\t\tif (dds.isCubemap && (\n\t\t\t\t\t!(caps2 & DDSCAPS2_CUBEMAP_POSITIVEX) ||\n\t\t\t\t\t!(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEX) ||\n\t\t\t\t\t!(caps2 & DDSCAPS2_CUBEMAP_POSITIVEY) ||\n\t\t\t\t\t!(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEY) ||\n\t\t\t\t\t!(caps2 & DDSCAPS2_CUBEMAP_POSITIVEZ) ||\n\t\t\t\t\t!(caps2 & DDSCAPS2_CUBEMAP_NEGATIVEZ)\n\t\t\t\t)) {\n\n\t\t\t\t\tconsole.error('THREE.DDSLoader.parse: Incomplete cubemap faces');\n\t\t\t\t\treturn dds;\n\n\t\t\t\t}\n\n\t\t\t\tdds.width = header[off_width];\n\t\t\t\tdds.height = header[off_height];\n\n\t\t\t\tvar dataOffset = header[off_size] + 4;\n\n\t\t\t\t// Extract mipmaps buffers\n\n\t\t\t\tvar faces = dds.isCubemap ? 6 : 1;\n\n\t\t\t\tfor (var face = 0; face < faces; face++) {\n\n\t\t\t\t\tvar width = dds.width;\n\t\t\t\t\tvar height = dds.height;\n\n\t\t\t\t\tfor (var i = 0; i < dds.mipmapCount; i++) {\n\n\t\t\t\t\t\tif (isRGBAUncompressed) {\n\n\t\t\t\t\t\t\tvar byteArray = loadARGBMip(buffer, dataOffset, width, height);\n\t\t\t\t\t\t\tvar dataLength = byteArray.length;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar dataLength = Math.max(4, width) / 4 * Math.max(4, height) / 4 * blockBytes;\n\t\t\t\t\t\t\tvar byteArray = new Uint8Array(buffer, dataOffset, dataLength);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar mipmap = { \"data\": byteArray, \"width\": width, \"height\": height };\n\t\t\t\t\t\tdds.mipmaps.push(mipmap);\n\n\t\t\t\t\t\tdataOffset += dataLength;\n\n\t\t\t\t\t\twidth = Math.max(width >> 1, 1);\n\t\t\t\t\t\theight = Math.max(height >> 1, 1);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn dds;\n\n\t\t\t}\n\n\t\t}\n\t\t_DDSLoader = esExtends(CompressedTextureLoader, {\n\t\t\tesConstructor(constructor) {\n\t\t\t\tclass _esCtor extends CompressedTextureLoader {\n\t\t\t\t\tconstructor(manager) {\n\t\t\t\t\t\tsuper(manager)\n\t\t\t\t\t\tconstructor.call(this, manager)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _esCtor;\n\t\t\t},\n\t\t\tconstructor(manager) { },\n\t\t\tprototype: _prototype_\n\t\t})\n\t}\n\treturn new _DDSLoader(manager);\n\n}\nexport { DDSLoader };\n",
    "/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport esExtends from  \"../../../../utils/Source/esExtends.js\";\n\n\nvar BufferAttribute,\n\tBufferGeometry,\n\tFileLoader,\n\tLoader\n\t;\nvar initDeps$DRACOLoaderDone = false;\nfunction initDeps$DRACOLoader() {\n\tif (initDeps$DRACOLoaderDone) return;\n\tinitDeps$DRACOLoaderDone = true;\n\tconst _THREE = THREE;\n\tBufferAttribute = _THREE.BufferAttribute,\n\t\tBufferGeometry = _THREE.BufferGeometry,\n\t\tFileLoader = _THREE.FileLoader,\n\t\tLoader = _THREE.Loader;\n}\n\n\nvar _DRACOLoader;\nvar DRACOLoader = function (manager) {\n\tinitDeps$DRACOLoader();\n\tif (!_DRACOLoader) {\n\t\tconst _prototype_ = {\n\n\t\t\tsetDecoderPath: function (path) {\n\n\t\t\t\tthis.decoderPath = path;\n\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\tsetDecoderConfig: function (config) {\n\n\t\t\t\tthis.decoderConfig = config;\n\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\tsetWorkerLimit: function (workerLimit) {\n\n\t\t\t\tthis.workerLimit = workerLimit;\n\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\t/** @deprecated */\n\t\t\tsetVerbosity: function () {\n\n\t\t\t\tconsole.warn('THREE.DRACOLoader: The .setVerbosity() method has been removed.');\n\n\t\t\t},\n\n\t\t\t/** @deprecated */\n\t\t\tsetDrawMode: function () {\n\n\t\t\t\tconsole.warn('THREE.DRACOLoader: The .setDrawMode() method has been removed.');\n\n\t\t\t},\n\n\t\t\t/** @deprecated */\n\t\t\tsetSkipDequantization: function () {\n\n\t\t\t\tconsole.warn('THREE.DRACOLoader: The .setSkipDequantization() method has been removed.');\n\n\t\t\t},\n\n\t\t\tload: function (url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar loader = new FileLoader(this.manager);\n\n\t\t\t\tloader.setPath(this.path);\n\t\t\t\tloader.setResponseType('arraybuffer');\n\n\t\t\t\tif (this.crossOrigin === 'use-credentials') {\n\n\t\t\t\t\tloader.setWithCredentials(true);\n\n\t\t\t\t}\n\n\t\t\t\tloader.load(url, (buffer) => {\n\n\t\t\t\t\tvar taskConfig = {\n\t\t\t\t\t\tattributeIDs: this.defaultAttributeIDs,\n\t\t\t\t\t\tattributeTypes: this.defaultAttributeTypes,\n\t\t\t\t\t\tuseUniqueIDs: false\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.decodeGeometry(buffer, taskConfig)\n\t\t\t\t\t\t.then(onLoad)\n\t\t\t\t\t\t.catch(onError);\n\n\t\t\t\t}, onProgress, onError);\n\n\t\t\t},\n\n\t\t\t/** @deprecated Kept for backward-compatibility with previous DRACOLoader versions. */\n\t\t\tdecodeDracoFile: function (buffer, callback, attributeIDs, attributeTypes) {\n\n\t\t\t\tvar taskConfig = {\n\t\t\t\t\tattributeIDs: attributeIDs || this.defaultAttributeIDs,\n\t\t\t\t\tattributeTypes: attributeTypes || this.defaultAttributeTypes,\n\t\t\t\t\tuseUniqueIDs: !!attributeIDs\n\t\t\t\t};\n\n\t\t\t\tthis.decodeGeometry(buffer, taskConfig).then(callback);\n\n\t\t\t},\n\n\t\t\tdecodeGeometry: function (buffer, taskConfig) {\n\n\t\t\t\t// TODO: For backward-compatibility, support 'attributeTypes' objects containing\n\t\t\t\t// references (rather than names) to typed array constructors. These must be\n\t\t\t\t// serialized before sending them to the worker.\n\t\t\t\tfor (var attribute in taskConfig.attributeTypes) {\n\n\t\t\t\t\tvar type = taskConfig.attributeTypes[attribute];\n\n\t\t\t\t\tif (type.BYTES_PER_ELEMENT !== undefined) {\n\n\t\t\t\t\t\ttaskConfig.attributeTypes[attribute] = type.name;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tvar taskKey = JSON.stringify(taskConfig);\n\n\t\t\t\t// Check for an existing task using this buffer. A transferred buffer cannot be transferred\n\t\t\t\t// again from this thread.\n\t\t\t\tif (_DRACOLoader.taskCache.has(buffer)) {\n\n\t\t\t\t\tvar cachedTask = _DRACOLoader.taskCache.get(buffer);\n\n\t\t\t\t\tif (cachedTask.key === taskKey) {\n\n\t\t\t\t\t\treturn cachedTask.promise;\n\n\t\t\t\t\t} else if (buffer.byteLength === 0) {\n\n\t\t\t\t\t\t// Technically, it would be possible to wait for the previous task to complete,\n\t\t\t\t\t\t// transfer the buffer back, and decode again with the second configuration. That\n\t\t\t\t\t\t// is complex, and I don't know of any reason to decode a Draco buffer twice in\n\t\t\t\t\t\t// different ways, so this is left unimplemented.\n\t\t\t\t\t\tthrow new Error(\n\n\t\t\t\t\t\t\t'THREE.DRACOLoader: Unable to re-decode a buffer with different ' +\n\t\t\t\t\t\t\t'settings. Buffer has already been transferred.'\n\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tvar worker;\n\t\t\t\tvar taskID = this.workerNextTaskID++;\n\t\t\t\tvar taskCost = buffer.byteLength;\n\n\t\t\t\t// Obtain a worker and assign a task, and construct a geometry instance\n\t\t\t\t// when the task completes.\n\t\t\t\tvar geometryPending = this._getWorker(taskID, taskCost)\n\t\t\t\t\t.then((_worker) => {\n\n\t\t\t\t\t\tworker = _worker;\n\n\t\t\t\t\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t\t\t\t\tworker._callbacks[taskID] = { resolve, reject };\n\n\t\t\t\t\t\t\tworker.postMessage({ type: 'decode', id: taskID, taskConfig, buffer }, [buffer]);\n\n\t\t\t\t\t\t\t// this.debug();\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t})\n\t\t\t\t\t.then((message) => this._createGeometry(message.geometry));\n\n\t\t\t\t// Remove task from the task list.\n\t\t\t\tgeometryPending\n\t\t\t\t\t.finally(() => {\n\n\t\t\t\t\t\tif (worker && taskID) {\n\n\t\t\t\t\t\t\tthis._releaseTask(worker, taskID);\n\n\t\t\t\t\t\t\t// this.debug();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\n\t\t\t\t// Cache the task result.\n\t\t\t\t_DRACOLoader.taskCache.set(buffer, {\n\n\t\t\t\t\tkey: taskKey,\n\t\t\t\t\tpromise: geometryPending\n\n\t\t\t\t});\n\n\t\t\t\treturn geometryPending;\n\n\t\t\t},\n\n\t\t\t_createGeometry: function (geometryData) {\n\n\t\t\t\tvar geometry = new BufferGeometry();\n\n\t\t\t\tif (geometryData.index) {\n\n\t\t\t\t\tgeometry.setIndex(new BufferAttribute(geometryData.index.array, 1));\n\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < geometryData.attributes.length; i++) {\n\n\t\t\t\t\tvar attribute = geometryData.attributes[i];\n\t\t\t\t\tvar name = attribute.name;\n\t\t\t\t\tvar array = attribute.array;\n\t\t\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\t\t\tgeometry.setAttribute(name, new BufferAttribute(array, itemSize));\n\n\t\t\t\t}\n\n\t\t\t\treturn geometry;\n\n\t\t\t},\n\n\t\t\t_loadLibrary: function (url, responseType) {\n\n\t\t\t\tvar loader = new FileLoader(this.manager);\n\t\t\t\tloader.setPath(this.decoderPath);\n\t\t\t\tloader.setResponseType(responseType);\n\n\t\t\t\treturn new Promise((resolve, reject) => {\n\n\t\t\t\t\tloader.load(url, resolve, undefined, reject);\n\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\tpreload: function () {\n\n\t\t\t\tthis._initDecoder();\n\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\t_initDecoder: function () {\n\n\t\t\t\tif (this.decoderPending) return this.decoderPending;\n\n\t\t\t\tvar useJS = typeof WebAssembly !== 'object' || this.decoderConfig.type === 'js';\n\t\t\t\tvar librariesPending = [];\n\n\t\t\t\tif (useJS) {\n\n\t\t\t\t\tlibrariesPending.push(this._loadLibrary('draco_decoder.js', 'text'));\n\n\t\t\t\t} else {\n\n\t\t\t\t\tlibrariesPending.push(this._loadLibrary('draco_wasm_wrapper.js', 'text'));\n\t\t\t\t\tlibrariesPending.push(this._loadLibrary('draco_decoder.wasm', 'arraybuffer'));\n\n\t\t\t\t}\n\n\t\t\t\tthis.decoderPending = Promise.all(librariesPending)\n\t\t\t\t\t.then((libraries) => {\n\n\t\t\t\t\t\tvar jsContent = libraries[0];\n\n\t\t\t\t\t\tif (!useJS) {\n\n\t\t\t\t\t\t\tthis.decoderConfig.wasmBinary = libraries[1];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar fn = _DRACOLoader.DRACOWorker.toString();\n\n\t\t\t\t\t\tvar body = [\n\t\t\t\t\t\t\t'/* draco decoder */',\n\t\t\t\t\t\t\tjsContent,\n\t\t\t\t\t\t\t'',\n\t\t\t\t\t\t\t'/* worker */',\n\t\t\t\t\t\t\tfn.substring(fn.indexOf('{') + 1, fn.lastIndexOf('}'))\n\t\t\t\t\t\t].join('\\n');\n\n\t\t\t\t\t\tthis.workerSourceURL = URL.createObjectURL(new Blob([body]));\n\n\t\t\t\t\t});\n\n\t\t\t\treturn this.decoderPending;\n\n\t\t\t},\n\n\t\t\t_getWorker: function (taskID, taskCost) {\n\n\t\t\t\treturn this._initDecoder().then(() => {\n\n\t\t\t\t\tif (this.workerPool.length < this.workerLimit) {\n\n\t\t\t\t\t\tvar worker = new Worker(this.workerSourceURL);\n\n\t\t\t\t\t\tworker._callbacks = {};\n\t\t\t\t\t\tworker._taskCosts = {};\n\t\t\t\t\t\tworker._taskLoad = 0;\n\n\t\t\t\t\t\tworker.postMessage({ type: 'init', decoderConfig: this.decoderConfig });\n\n\t\t\t\t\t\tworker.onmessage = function (e) {\n\n\t\t\t\t\t\t\tvar message = e.data;\n\n\t\t\t\t\t\t\tswitch (message.type) {\n\n\t\t\t\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\t\t\t\tworker._callbacks[message.id].resolve(message);\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tcase 'error':\n\t\t\t\t\t\t\t\t\tworker._callbacks[message.id].reject(message);\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tconsole.error('THREE.DRACOLoader: Unexpected message, \"' + message.type + '\"');\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.workerPool.push(worker);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.workerPool.sort(function (a, b) {\n\n\t\t\t\t\t\t\treturn a._taskLoad > b._taskLoad ? - 1 : 1;\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar worker = this.workerPool[this.workerPool.length - 1];\n\t\t\t\t\tworker._taskCosts[taskID] = taskCost;\n\t\t\t\t\tworker._taskLoad += taskCost;\n\t\t\t\t\treturn worker;\n\n\t\t\t\t});\n\n\t\t\t},\n\n\t\t\t_releaseTask: function (worker, taskID) {\n\n\t\t\t\tworker._taskLoad -= worker._taskCosts[taskID];\n\t\t\t\tdelete worker._callbacks[taskID];\n\t\t\t\tdelete worker._taskCosts[taskID];\n\n\t\t\t},\n\n\t\t\tdebug: function () {\n\n\t\t\t\tconsole.log('Task load: ', this.workerPool.map((worker) => worker._taskLoad));\n\n\t\t\t},\n\n\t\t\tdispose: function () {\n\n\t\t\t\tfor (var i = 0; i < this.workerPool.length; ++i) {\n\n\t\t\t\t\tthis.workerPool[i].terminate();\n\n\t\t\t\t}\n\n\t\t\t\tthis.workerPool.length = 0;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\t\t_DRACOLoader = esExtends(Loader, {\n\t\t\tesConstructor(constructor) {\n\t\t\t\tclass _esCtor extends Loader {\n\t\t\t\t\tconstructor(manager) {\n\t\t\t\t\t\tsuper(manager)\n\t\t\t\t\t\tconstructor.call(this, manager);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _esCtor;\n\t\t\t},\n\t\t\tconstructor() {\n\t\t\t\tthis.decoderPath = '';\n\t\t\t\tthis.decoderConfig = {};\n\t\t\t\tthis.decoderBinary = null;\n\t\t\t\tthis.decoderPending = null;\n\n\t\t\t\tthis.workerLimit = 4;\n\n\t\t\t\tif (navigator && navigator.hardwareConcurrency) {\n\t\t\t\t\tvar hardwareConcurrency = navigator.hardwareConcurrency / 2;\n\t\t\t\t\tthis.workerLimit = Math.max(4, hardwareConcurrency);\n\t\t\t\t\tthis.workerLimit = Math.min(hardwareConcurrency, 8);\n\t\t\t\t}\n\n\t\t\t\tthis.workerPool = [];\n\t\t\t\tthis.workerNextTaskID = 1;\n\t\t\t\tthis.workerSourceURL = '';\n\n\t\t\t\tthis.defaultAttributeIDs = {\n\t\t\t\t\tposition: 'POSITION',\n\t\t\t\t\tnormal: 'NORMAL',\n\t\t\t\t\tcolor: 'COLOR',\n\t\t\t\t\tuv: 'TEX_COORD',\n\t\t\t\t\tuv2: 'GENERIC'\n\t\t\t\t};\n\t\t\t\tthis.defaultAttributeTypes = {\n\t\t\t\t\tposition: 'Float32Array',\n\t\t\t\t\tnormal: 'Float32Array',\n\t\t\t\t\tcolor: 'Float32Array',\n\t\t\t\t\tuv: 'Float32Array',\n\t\t\t\t\tuv2: 'Float32Array'\n\t\t\t\t};\n\t\t\t},\n\t\t\tprototype: _prototype_\n\t\t})\n\n\t\t/* WEB WORKER */\n\n\t\t_DRACOLoader.DRACOWorker = function () {\n\n\t\t\tvar decoderConfig;\n\t\t\tvar decoderPending;\n\n\t\t\tonmessage = function (e) {\n\n\t\t\t\tvar message = e.data;\n\n\t\t\t\tswitch (message.type) {\n\n\t\t\t\t\tcase 'init':\n\t\t\t\t\t\tdecoderConfig = message.decoderConfig;\n\t\t\t\t\t\tdecoderPending = new Promise(function (resolve/*, reject*/) {\n\n\t\t\t\t\t\t\tdecoderConfig.onModuleLoaded = function (draco) {\n\n\t\t\t\t\t\t\t\t// Module is Promise-like. Wrap before resolving to avoid loop.\n\t\t\t\t\t\t\t\tresolve({ draco: draco });\n\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\tDracoDecoderModule(decoderConfig);\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'decode':\n\t\t\t\t\t\tvar buffer = message.buffer;\n\t\t\t\t\t\tvar taskConfig = message.taskConfig;\n\t\t\t\t\t\tdecoderPending.then((module) => {\n\n\t\t\t\t\t\t\tvar draco = module.draco;\n\t\t\t\t\t\t\tvar decoder = new draco.Decoder();\n\t\t\t\t\t\t\tvar decoderBuffer = new draco.DecoderBuffer();\n\t\t\t\t\t\t\tdecoderBuffer.Init(new Int8Array(buffer), buffer.byteLength);\n\n\t\t\t\t\t\t\ttry {\n\n\t\t\t\t\t\t\t\tvar geometry = decodeGeometry(draco, decoder, decoderBuffer, taskConfig);\n\n\t\t\t\t\t\t\t\tvar buffers = geometry.attributes.map((attr) => attr.array.buffer);\n\n\t\t\t\t\t\t\t\tif (geometry.index) buffers.push(geometry.index.array.buffer);\n\n\t\t\t\t\t\t\t\tself.postMessage({ type: 'decode', id: message.id, geometry }, buffers);\n\n\t\t\t\t\t\t\t} catch (error) {\n\n\t\t\t\t\t\t\t\tconsole.error(error);\n\n\t\t\t\t\t\t\t\tself.postMessage({ type: 'error', id: message.id, error: error.message });\n\n\t\t\t\t\t\t\t} finally {\n\n\t\t\t\t\t\t\t\tdraco.destroy(decoderBuffer);\n\t\t\t\t\t\t\t\tdraco.destroy(decoder);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t\tfunction decodeGeometry(draco, decoder, decoderBuffer, taskConfig) {\n\n\t\t\t\tvar attributeIDs = taskConfig.attributeIDs;\n\t\t\t\tvar attributeTypes = taskConfig.attributeTypes;\n\n\t\t\t\tvar dracoGeometry;\n\t\t\t\tvar decodingStatus;\n\n\t\t\t\tvar geometryType = decoder.GetEncodedGeometryType(decoderBuffer);\n\n\t\t\t\tif (geometryType === draco.TRIANGULAR_MESH) {\n\n\t\t\t\t\tdracoGeometry = new draco.Mesh();\n\t\t\t\t\tdecodingStatus = decoder.DecodeBufferToMesh(decoderBuffer, dracoGeometry);\n\n\t\t\t\t} else if (geometryType === draco.POINT_CLOUD) {\n\n\t\t\t\t\tdracoGeometry = new draco.PointCloud();\n\t\t\t\t\tdecodingStatus = decoder.DecodeBufferToPointCloud(decoderBuffer, dracoGeometry);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error('THREE.DRACOLoader: Unexpected geometry type.');\n\n\t\t\t\t}\n\n\t\t\t\tif (!decodingStatus.ok() || dracoGeometry.ptr === 0) {\n\n\t\t\t\t\tthrow new Error('THREE.DRACOLoader: Decoding failed: ' + decodingStatus.error_msg());\n\n\t\t\t\t}\n\n\t\t\t\tvar geometry = { index: null, attributes: [] };\n\n\t\t\t\t// Gather all vertex attributes.\n\t\t\t\tfor (var attributeName in attributeIDs) {\n\n\t\t\t\t\tvar attributeType = self[attributeTypes[attributeName]];\n\n\t\t\t\t\tvar attribute;\n\t\t\t\t\tvar attributeID;\n\n\t\t\t\t\t// A Draco file may be created with default vertex attributes, whose attribute IDs\n\t\t\t\t\t// are mapped 1:1 from their semantic name (POSITION, NORMAL, ...). Alternatively,\n\t\t\t\t\t// a Draco file may contain a custom set of attributes, identified by known unique\n\t\t\t\t\t// IDs. glTF files always do the latter, and `.drc` files typically do the former.\n\t\t\t\t\tif (taskConfig.useUniqueIDs) {\n\n\t\t\t\t\t\tattributeID = attributeIDs[attributeName];\n\t\t\t\t\t\tattribute = decoder.GetAttributeByUniqueId(dracoGeometry, attributeID);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tattributeID = decoder.GetAttributeId(dracoGeometry, draco[attributeIDs[attributeName]]);\n\n\t\t\t\t\t\tif (attributeID === - 1) continue;\n\n\t\t\t\t\t\tattribute = decoder.GetAttribute(dracoGeometry, attributeID);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.attributes.push(decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute));\n\n\t\t\t\t}\n\n\t\t\t\t// Add index.\n\t\t\t\tif (geometryType === draco.TRIANGULAR_MESH) {\n\n\t\t\t\t\t// Generate mesh faces.\n\t\t\t\t\tvar numFaces = dracoGeometry.num_faces();\n\t\t\t\t\tvar numIndices = numFaces * 3;\n\t\t\t\t\tvar index = new Uint32Array(numIndices);\n\t\t\t\t\tvar indexArray = new draco.DracoInt32Array();\n\n\t\t\t\t\tfor (var i = 0; i < numFaces; ++i) {\n\n\t\t\t\t\t\tdecoder.GetFaceFromMesh(dracoGeometry, i, indexArray);\n\n\t\t\t\t\t\tfor (var j = 0; j < 3; ++j) {\n\n\t\t\t\t\t\t\tindex[i * 3 + j] = indexArray.GetValue(j);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.index = { array: index, itemSize: 1 };\n\n\t\t\t\t\tdraco.destroy(indexArray);\n\n\t\t\t\t}\n\n\t\t\t\tdraco.destroy(dracoGeometry);\n\n\t\t\t\treturn geometry;\n\n\t\t\t}\n\n\t\t\tfunction decodeAttribute(draco, decoder, dracoGeometry, attributeName, attributeType, attribute) {\n\n\t\t\t\tvar numComponents = attribute.num_components();\n\t\t\t\tvar numPoints = dracoGeometry.num_points();\n\t\t\t\tvar numValues = numPoints * numComponents;\n\t\t\t\tvar dracoArray;\n\n\t\t\t\tvar array;\n\n\t\t\t\tswitch (attributeType) {\n\n\t\t\t\t\tcase Float32Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoFloat32Array();\n\t\t\t\t\t\tdecoder.GetAttributeFloatForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Float32Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Int8Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoInt8Array();\n\t\t\t\t\t\tdecoder.GetAttributeInt8ForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Int8Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Int16Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoInt16Array();\n\t\t\t\t\t\tdecoder.GetAttributeInt16ForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Int16Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Int32Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoInt32Array();\n\t\t\t\t\t\tdecoder.GetAttributeInt32ForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Int32Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Uint8Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoUInt8Array();\n\t\t\t\t\t\tdecoder.GetAttributeUInt8ForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Uint8Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Uint16Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoUInt16Array();\n\t\t\t\t\t\tdecoder.GetAttributeUInt16ForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Uint16Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase Uint32Array:\n\t\t\t\t\t\tdracoArray = new draco.DracoUInt32Array();\n\t\t\t\t\t\tdecoder.GetAttributeUInt32ForAllPoints(dracoGeometry, attribute, dracoArray);\n\t\t\t\t\t\tarray = new Uint32Array(numValues);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error('THREE.DRACOLoader: Unexpected attribute type.');\n\n\t\t\t\t}\n\n\t\t\t\tfor (var i = 0; i < numValues; i++) {\n\n\t\t\t\t\tarray[i] = dracoArray.GetValue(i);\n\n\t\t\t\t}\n\n\t\t\t\tdraco.destroy(dracoArray);\n\n\t\t\t\treturn {\n\t\t\t\t\tname: attributeName,\n\t\t\t\t\tarray: array,\n\t\t\t\t\titemSize: numComponents\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t};\n\n\t\t_DRACOLoader.taskCache = new WeakMap();\n\n\t\t/** Deprecated static methods */\n\n\t\t/** @deprecated */\n\t\t_DRACOLoader.setDecoderPath = function () {\n\n\t\t\tconsole.warn('THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.');\n\n\t\t};\n\n\t\t/** @deprecated */\n\t\t_DRACOLoader.setDecoderConfig = function () {\n\n\t\t\tconsole.warn('THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.');\n\n\t\t};\n\n\t\t/** @deprecated */\n\t\t_DRACOLoader.releaseDecoderModule = function () {\n\n\t\t\tconsole.warn('THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.');\n\n\t\t};\n\n\t\t/** @deprecated */\n\t\t_DRACOLoader.getDecoderModule = function () {\n\n\t\t\tconsole.warn('THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.');\n\n\t\t};\n\t}\n\treturn new _DRACOLoader(manager);\n}\n\nexport { DRACOLoader };\n",
    "/**\n * @author Rich Tibbett / https://github.com/richtr\n * @author mrdoob / http://mrdoob.com/\n * @author Tony Parisi / http://www.tonyparisi.com/\n * @author Takahiro / https://github.com/takahirox\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nimport esExtends from  \"../../../../utils/Source/esExtends.js\";\n\n\nvar AnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\t// Math as _Math,\n\t_Math,\n\tMatrix4,\n\tMatrix3,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternionKeyframeTrack,\n\tRGBAFormat,\n\tRGBFormat,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding,\n\tTexture,\n\tShaderMaterial\n\t;\nvar initDeps$GLTFLoaderDone = false;\nfunction initDeps$GLTFLoader() {\n\tif (initDeps$GLTFLoaderDone) return;\n\tinitDeps$GLTFLoaderDone = true;\n\tconst _THREE = THREE;\n\tAnimationClip = _THREE.AnimationClip,\n\t\tBone = _THREE.Bone,\n\t\tBox3 = _THREE.Box3,\n\t\tBufferAttribute = _THREE.BufferAttribute,\n\t\tBufferGeometry = _THREE.BufferGeometry,\n\t\tClampToEdgeWrapping = _THREE.ClampToEdgeWrapping,\n\t\tColor = _THREE.Color,\n\t\tDirectionalLight = _THREE.DirectionalLight,\n\t\tDoubleSide = _THREE.DoubleSide,\n\t\tFileLoader = _THREE.FileLoader,\n\t\tFrontSide = _THREE.FrontSide,\n\t\tGroup = _THREE.Group,\n\t\tInterleavedBuffer = _THREE.InterleavedBuffer,\n\t\tInterleavedBufferAttribute = _THREE.InterleavedBufferAttribute,\n\t\tInterpolant = _THREE.Interpolant,\n\t\tInterpolateDiscrete = _THREE.InterpolateDiscrete,\n\t\tInterpolateLinear = _THREE.InterpolateLinear,\n\t\tLine = _THREE.Line,\n\t\tLineBasicMaterial = _THREE.LineBasicMaterial,\n\t\tLineLoop = _THREE.LineLoop,\n\t\tLineSegments = _THREE.LineSegments,\n\t\tLinearFilter = _THREE.LinearFilter,\n\t\tLinearMipmapLinearFilter = _THREE.LinearMipmapLinearFilter,\n\t\tLinearMipmapNearestFilter = _THREE.LinearMipmapNearestFilter,\n\t\tLoader = _THREE.Loader,\n\t\tLoaderUtils = _THREE.LoaderUtils,\n\t\tMaterial = _THREE.Material,\n\t\t// Math as _Math,\n\t\t_Math = _THREE.Math,\n\t\tMatrix4 = _THREE.Matrix4,\n\t\tMatrix3 = _THREE.Matrix3,\n\t\tMesh = _THREE.Mesh,\n\t\tMeshBasicMaterial = _THREE.MeshBasicMaterial,\n\t\tMeshPhysicalMaterial = _THREE.MeshPhysicalMaterial,\n\t\tMeshStandardMaterial = _THREE.MeshStandardMaterial,\n\t\tMirroredRepeatWrapping = _THREE.MirroredRepeatWrapping,\n\t\tNearestFilter = _THREE.NearestFilter,\n\t\tNearestMipmapLinearFilter = _THREE.NearestMipmapLinearFilter,\n\t\tNearestMipmapNearestFilter = _THREE.NearestMipmapNearestFilter,\n\t\tNumberKeyframeTrack = _THREE.NumberKeyframeTrack,\n\t\tObject3D = _THREE.Object3D,\n\t\tOrthographicCamera = _THREE.OrthographicCamera,\n\t\tPerspectiveCamera = _THREE.PerspectiveCamera,\n\t\tPointLight = _THREE.PointLight,\n\t\tPoints = _THREE.Points,\n\t\tPointsMaterial = _THREE.PointsMaterial,\n\t\tPropertyBinding = _THREE.PropertyBinding,\n\t\tQuaternionKeyframeTrack = _THREE.QuaternionKeyframeTrack,\n\t\tRGBAFormat = _THREE.RGBAFormat,\n\t\tRGBFormat = _THREE.RGBFormat,\n\t\tRepeatWrapping = _THREE.RepeatWrapping,\n\t\tSkeleton = _THREE.Skeleton,\n\t\tSkinnedMesh = _THREE.SkinnedMesh,\n\t\tSphere = _THREE.Sphere,\n\t\tSpotLight = _THREE.SpotLight,\n\t\tTangentSpaceNormalMap = _THREE.TangentSpaceNormalMap,\n\t\tTextureLoader = _THREE.TextureLoader,\n\t\tTriangleFanDrawMode = _THREE.TriangleFanDrawMode,\n\t\tTriangleStripDrawMode = _THREE.TriangleStripDrawMode,\n\t\tVector2 = _THREE.Vector2,\n\t\tVector3 = _THREE.Vector3,\n\t\tVectorKeyframeTrack = _THREE.VectorKeyframeTrack,\n\t\tsRGBEncoding = _THREE.sRGBEncoding,\n\t\tTexture = _THREE.Texture,\n\t\tShaderMaterial = _THREE.ShaderMaterial;\n}\nvar _GLTFLoader;\nvar GLTFLoader = function (manager) {\n\tinitDeps$GLTFLoader();\n\n\tif (!_GLTFLoader) {\n\t\tconst _GLTFLoaderProptotype_ = {\n\n\t\t\t// constructor: _GLTFLoader,\n\n\t\t\tload: function (url, onLoad, onProgress, onError, onBufferLoad, options) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar resourcePath;\n\n\t\t\t\tif (this.resourcePath !== '') {\n\n\t\t\t\t\tresourcePath = this.resourcePath;\n\n\t\t\t\t} else if (this.path !== '') {\n\n\t\t\t\t\tresourcePath = this.path;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresourcePath = LoaderUtils.extractUrlBase(url);\n\n\t\t\t\t}\n\n\t\t\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\t\t\tscope.manager.itemStart(url);\n\n\t\t\t\tvar _onError = function (e) {\n\n\t\t\t\t\tif (onError) {\n\n\t\t\t\t\t\tonError(e);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.error(e);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError(url);\n\t\t\t\t\tscope.manager.itemEnd(url);\n\n\t\t\t\t};\n\n\t\t\t\tvar loader = new FileLoader(scope.manager);\n\n\t\t\t\tloader.setPath(this.path);\n\t\t\t\tloader.setResponseType('arraybuffer');\n\n\t\t\t\tif (scope.crossOrigin === 'use-credentials') {\n\n\t\t\t\t\tloader.setWithCredentials(true);\n\n\t\t\t\t}\n\n\t\t\t\tloader.load(url, function (data) {\n\n\t\t\t\t\ttry {\n\n\t\t\t\t\t\tif (onBufferLoad) {\n\t\t\t\t\t\t\tvar result = onBufferLoad(data)\n\t\t\t\t\t\t\tif (result) data = result;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.parse(data, resourcePath, function (gltf) {\n\n\t\t\t\t\t\t\tonLoad(gltf);\n\n\t\t\t\t\t\t\tscope.manager.itemEnd(url);\n\n\t\t\t\t\t\t}, _onError, options);\n\n\t\t\t\t\t} catch (e) {\n\n\t\t\t\t\t\t_onError(e);\n\n\t\t\t\t\t}\n\n\t\t\t\t}, onProgress, _onError);\n\n\t\t\t},\n\n\t\t\tsetDRACOLoader: function (dracoLoader) {\n\n\t\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\tsetDDSLoader: function (ddsLoader) {\n\n\t\t\t\tthis.ddsLoader = ddsLoader;\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\tparse: function (data, path, onLoad, onError, options) {\n\t\t\t\tconst _Cesium = Cesium\n\t\t\t\tvar content;\n\t\t\t\tvar extensions = {};\n\n\t\t\t\tvar json;\n\t\t\t\tif (typeof data === 'string') {\n\n\t\t\t\t\tcontent = data;\n\t\t\t\t\tjson = JSON.parse(content);\n\t\t\t\t} else {\n\t\t\t\t\tif (data instanceof ArrayBuffer || data instanceof Uint8Array) {\n\t\t\t\t\t\tif (data instanceof Uint8Array) {\n\t\t\t\t\t\t\tdata = data.slice().buffer;//new Uint8Array(data);\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tvar magic = LoaderUtils.decodeText(new Uint8Array(data, 0, 4));\n\n\t\t\t\t\t\tif (magic === BINARY_EXTENSION_HEADER_MAGIC) {\n\n\t\t\t\t\t\t\ttry {\n\n\t\t\t\t\t\t\t\textensions[EXTENSIONS.KHR_BINARY_GLTF] = new GLTFBinaryExtension(data);\n\t\t\t\t\t\t\t\tcontent = extensions[EXTENSIONS.KHR_BINARY_GLTF].content;\n\t\t\t\t\t\t\t\tjson = JSON.parse(content);\n\n\t\t\t\t\t\t\t} catch (error) {\n\n\t\t\t\t\t\t\t\ttry {//support v1.0\n\t\t\t\t\t\t\t\t\tjson = _Cesium.parseGlb(new Uint8Array(data));\n\t\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t\tif (onError) onError(error);\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tcontent = LoaderUtils.decodeText(new Uint8Array(data));\n\t\t\t\t\t\t\tjson = JSON.parse(content);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tjson = data;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// var json = JSON.parse(content);\n\n\t\t\t\ttry {\n\t\t\t\t\tif (json.asset === undefined || json.asset.version[0] < 2 || json.asset.version < 2) {\n\n\t\t\t\t\t\tjson = _Cesium.updateVersion(json);\n\n\t\t\t\t\t\tvar buffers = json.buffers;\n\n\t\t\t\t\t\tif (buffers.length == 1 && buffers[0].extras\n\t\t\t\t\t\t\t&& buffers[0].extras._pipeline\n\t\t\t\t\t\t\t&& buffers[0].extras._pipeline.source\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tvar header = new Uint32Array(data.buffer || data, 0, 5);\n\t\t\t\t\t\t\tvar contentLength = header[3];\n\t\t\t\t\t\t\tvar jsonStart = 20;\n\t\t\t\t\t\t\tvar binaryStart = jsonStart + contentLength;\n\t\t\t\t\t\t\tjson.binaryStart = binaryStart;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// if (onError) onError(new Error('THREE._GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.'));\n\t\t\t\t\t\t// return;\n\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (onError) onError(error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (json.extensionsUsed) {\n\n\t\t\t\t\tfor (var i = 0; i < json.extensionsUsed.length; ++i) {\n\n\t\t\t\t\t\tvar extensionName = json.extensionsUsed[i];\n\t\t\t\t\t\tvar extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\t\t\tswitch (extensionName) {\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_LIGHTS_PUNCTUAL:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFLightsExtension(json);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_CLEARCOAT:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFMaterialsClearcoatExtension();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFDracoMeshCompressionExtension(json, this.dracoLoader);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.MSFT_TEXTURE_DDS:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFTextureDDSExtension(this.ddsLoader);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t//support ShaderMaterial\n\t\t\t\t\t\t\tcase EXTENSIONS.KHR_TECHNIQUES_WEBGL:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFMeaterialTechniquesWebglExtension(json);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t//support CESIUM_RTC\n\t\t\t\t\t\t\tcase EXTENSIONS.CESIUM_RTC:\n\t\t\t\t\t\t\t\textensions[extensionName] = new GLTFCesiumRTCExtension(json);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tif (extensionsRequired.indexOf(extensionName) >= 0) {\n\n\t\t\t\t\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Unknown extension \"' + extensionName + '\".');\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar parser = new GLTFParser(json, extensions, {\n\n\t\t\t\t\tpath: path || this.resourcePath || '',\n\t\t\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\t\t\tmanager: this.manager,\n\t\t\t\t\tloadTexture: options ? options.loadTexture : undefined\n\t\t\t\t});\n\n\t\t\t\tparser.parse(onLoad, onError);\n\n\t\t\t}\n\n\t\t}\n\n\t\t_GLTFLoader = esExtends(Loader, {\n\t\t\tesConstructor(constructor) {\n\t\t\t\tclass _esCtor extends Loader {\n\t\t\t\t\tconstructor(manager) {\n\t\t\t\t\t\tsuper(manager)\n\t\t\t\t\t\tconstructor.call(this,manager)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _esCtor;\n\t\t\t},\n\t\t\tconstructor() {\n\t\t\t\tthis.dracoLoader = null;\n\t\t\t\tthis.ddsLoader = null;\n\t\t\t},\n\t\t\tprototype: _GLTFLoaderProptotype_\n\t\t})\n\n\t\t \n\t\t/* GLTFREGISTRY */\n\n\t\tfunction GLTFRegistry() {\n\n\t\t\tvar objects = {};\n\n\t\t\treturn {\n\n\t\t\t\tget: function (key) {\n\n\t\t\t\t\treturn objects[key];\n\n\t\t\t\t},\n\n\t\t\t\tadd: function (key, object) {\n\n\t\t\t\t\tobjects[key] = object;\n\n\t\t\t\t},\n\n\t\t\t\tremove: function (key) {\n\n\t\t\t\t\tdelete objects[key];\n\n\t\t\t\t},\n\n\t\t\t\tremoveAll: function () {\n\n\t\t\t\t\tobjects = {};\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\t/*********************************/\n\t\t/********** EXTENSIONS ***********/\n\t\t/*********************************/\n\n\t\tvar EXTENSIONS = {\n\t\t\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\t\t\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\t\t\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\t\t\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\t\t\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\t\t\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\t\t\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\t\t\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\t\t\tMSFT_TEXTURE_DDS: 'MSFT_texture_dds',\n\t\t\t//\n\t\t\tKHR_TECHNIQUES_WEBGL: \"KHR_techniques_webgl\",\n\t\t\tCESIUM_RTC: \"CESIUM_RTC\"\n\t\t};\n\n\t\t/**\n\t\t * DDS Texture Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/MSFT_texture_dds\n\t\t *\n\t\t */\n\t\tfunction GLTFTextureDDSExtension(ddsLoader) {\n\n\t\t\tif (!ddsLoader) {\n\n\t\t\t\tthrow new Error('THREE._GLTFLoader: Attempting to load .dds texture without importing DDSLoader');\n\n\t\t\t}\n\n\t\t\tthis.name = EXTENSIONS.MSFT_TEXTURE_DDS;\n\t\t\tthis.ddsLoader = ddsLoader;\n\n\t\t}\n\n\t\t/**\n\t\t * Punctual Lights Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n\t\t */\n\t\tfunction GLTFLightsExtension(json) {\n\n\t\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t\tvar extension = (json.extensions && json.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]) || {};\n\t\t\tthis.lightDefs = extension.lights || [];\n\n\t\t}\n\n\t\tGLTFLightsExtension.prototype.loadLight = function (lightIndex) {\n\n\t\t\tvar lightDef = this.lightDefs[lightIndex];\n\t\t\tvar lightNode;\n\n\t\t\tvar color = new Color(0xffffff);\n\t\t\tif (lightDef.color !== undefined) color.fromArray(lightDef.color);\n\n\t\t\tvar range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\t\tswitch (lightDef.type) {\n\n\t\t\t\tcase 'directional':\n\t\t\t\t\tlightNode = new DirectionalLight(color);\n\t\t\t\t\tlightNode.target.position.set(0, 0, - 1);\n\t\t\t\t\tlightNode.add(lightNode.target);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'point':\n\t\t\t\t\tlightNode = new PointLight(color);\n\t\t\t\t\tlightNode.distance = range;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'spot':\n\t\t\t\t\tlightNode = new SpotLight(color);\n\t\t\t\t\tlightNode.distance = range;\n\t\t\t\t\t// Handle spotlight properties.\n\t\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\t\tlightNode.target.position.set(0, 0, - 1);\n\t\t\t\t\tlightNode.add(lightNode.target);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error('THREE._GLTFLoader: Unexpected light type, \"' + lightDef.type + '\".');\n\n\t\t\t}\n\n\t\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\t\tlightNode.position.set(0, 0, 0);\n\n\t\t\tlightNode.decay = 2;\n\n\t\t\tif (lightDef.intensity !== undefined) lightNode.intensity = lightDef.intensity;\n\n\t\t\tlightNode.name = lightDef.name || ('light_' + lightIndex);\n\n\t\t\treturn Promise.resolve(lightNode);\n\n\t\t};\n\n\t\t/**\n\t\t * Unlit Materials Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n\t\t */\n\t\tfunction GLTFMaterialsUnlitExtension() {\n\n\t\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t\t}\n\n\t\tGLTFMaterialsUnlitExtension.prototype.getMaterialType = function () {\n\n\t\t\treturn MeshBasicMaterial;\n\n\t\t};\n\n\t\tGLTFMaterialsUnlitExtension.prototype.extendParams = function (materialParams, materialDef, parser) {\n\n\t\t\tvar pending = [];\n\n\t\t\tmaterialParams.color = new Color(1.0, 1.0, 1.0);\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\t\tif (metallicRoughness) {\n\n\t\t\t\tif (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n\t\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray(array);\n\t\t\t\t\tmaterialParams.opacity = array[3];\n\n\t\t\t\t}\n\n\t\t\t\tif (metallicRoughness.baseColorTexture !== undefined) {\n\n\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all(pending);\n\n\t\t};\n\n\t\t/**\n\t\t * Clearcoat Materials Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n\t\t */\n\t\tfunction GLTFMaterialsClearcoatExtension() {\n\n\t\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t\t}\n\n\t\tGLTFMaterialsClearcoatExtension.prototype.getMaterialType = function () {\n\n\t\t\treturn MeshPhysicalMaterial;\n\n\t\t};\n\n\t\tGLTFMaterialsClearcoatExtension.prototype.extendParams = function (materialParams, materialDef, parser) {\n\n\t\t\tvar pending = [];\n\n\t\t\tvar extension = materialDef.extensions[this.name];\n\n\t\t\tif (extension.clearcoatFactor !== undefined) {\n\n\t\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t\t}\n\n\t\t\tif (extension.clearcoatTexture !== undefined) {\n\n\t\t\t\tpending.push(parser.assignTexture(materialParams, 'clearcoatMap', extension.clearcoatTexture));\n\n\t\t\t}\n\n\t\t\tif (extension.clearcoatRoughnessFactor !== undefined) {\n\n\t\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t\t}\n\n\t\t\tif (extension.clearcoatRoughnessTexture !== undefined) {\n\n\t\t\t\tpending.push(parser.assignTexture(materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture));\n\n\t\t\t}\n\n\t\t\tif (extension.clearcoatNormalTexture !== undefined) {\n\n\t\t\t\tpending.push(parser.assignTexture(materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture));\n\n\t\t\t\tif (extension.clearcoatNormalTexture.scale !== undefined) {\n\n\t\t\t\t\tvar scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2(scale, scale);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all(pending);\n\n\t\t};\n\n\t\t/* BINARY EXTENSION */\n\t\tvar BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\n\t\tvar BINARY_EXTENSION_HEADER_LENGTH = 12;\n\t\tvar BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\n\t\tfunction GLTFBinaryExtension(data) {\n\n\t\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\t\tthis.content = null;\n\t\t\tthis.body = null;\n\n\t\t\tvar headerView = new DataView(data, 0, BINARY_EXTENSION_HEADER_LENGTH);\n\n\t\t\tthis.header = {\n\t\t\t\tmagic: LoaderUtils.decodeText(new Uint8Array(data.slice(0, 4))),\n\t\t\t\tversion: headerView.getUint32(4, true),\n\t\t\t\tlength: headerView.getUint32(8, true)\n\t\t\t};\n\n\t\t\tif (this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC) {\n\n\t\t\t\tthrow new Error('THREE._GLTFLoader: Unsupported glTF-Binary header.');\n\n\t\t\t} else if (this.header.version < 2.0) {\n\n\t\t\t\tthrow new Error('THREE._GLTFLoader: Legacy binary file detected.');\n\n\t\t\t}\n\n\t\t\tvar chunkView = new DataView(data, BINARY_EXTENSION_HEADER_LENGTH);\n\t\t\tvar chunkIndex = 0;\n\n\t\t\twhile (chunkIndex < chunkView.byteLength) {\n\n\t\t\t\tvar chunkLength = chunkView.getUint32(chunkIndex, true);\n\t\t\t\tchunkIndex += 4;\n\n\t\t\t\tif (chunkIndex >= chunkView.byteLength) break;\n\n\t\t\t\tvar chunkType = chunkView.getUint32(chunkIndex, true);\n\t\t\t\tchunkIndex += 4;\n\n\t\t\t\tif (chunkIndex >= chunkView.byteLength) break;\n\n\t\t\t\tif (chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON) {\n\n\t\t\t\t\tvar contentArray = new Uint8Array(data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength);\n\t\t\t\t\tthis.content = LoaderUtils.decodeText(contentArray);\n\n\t\t\t\t} else if (chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN) {\n\n\t\t\t\t\tvar byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\t\tthis.body = data.slice(byteOffset, byteOffset + chunkLength);\n\n\t\t\t\t}\n\n\t\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\t\tchunkIndex += chunkLength;\n\n\t\t\t}\n\n\t\t\tif (this.content === null) {\n\n\t\t\t\tthrow new Error('THREE._GLTFLoader: JSON content not found.');\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * DRACO Mesh Compression Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n\t\t */\n\t\tfunction GLTFDracoMeshCompressionExtension(json, dracoLoader) {\n\n\t\t\tif (!dracoLoader) {\n\n\t\t\t\tthrow new Error('THREE._GLTFLoader: No DRACOLoader instance provided.');\n\n\t\t\t}\n\n\t\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\t\tthis.json = json;\n\t\t\tthis.dracoLoader = dracoLoader;\n\t\t\tthis.dracoLoader.preload();\n\n\t\t}\n\n\t\tGLTFDracoMeshCompressionExtension.prototype.decodePrimitive = function (primitive, parser) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar dracoLoader = this.dracoLoader;\n\t\t\tvar bufferViewIndex = primitive.extensions[this.name].bufferView;\n\t\t\tvar gltfAttributeMap = primitive.extensions[this.name].attributes;\n\t\t\tvar threeAttributeMap = {};\n\t\t\tvar attributeNormalizedMap = {};\n\t\t\tvar attributeTypeMap = {};\n\n\t\t\tfor (var attributeName in gltfAttributeMap) {\n\n\t\t\t\tvar threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n\t\t\t\tthreeAttributeMap[threeAttributeName] = gltfAttributeMap[attributeName];\n\n\t\t\t}\n\n\t\t\tfor (attributeName in primitive.attributes) {\n\n\t\t\t\tvar threeAttributeName = ATTRIBUTES[attributeName] || attributeName.toLowerCase();\n\n\t\t\t\tif (gltfAttributeMap[attributeName] !== undefined) {\n\n\t\t\t\t\tvar accessorDef = json.accessors[primitive.attributes[attributeName]];\n\t\t\t\t\tvar componentType = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n\t\t\t\t\tattributeTypeMap[threeAttributeName] = componentType;\n\t\t\t\t\tattributeNormalizedMap[threeAttributeName] = accessorDef.normalized === true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn parser.getDependency('bufferView', bufferViewIndex).then(function (bufferView) {\n\n\t\t\t\treturn new Promise(function (resolve) {\n\n\t\t\t\t\tdracoLoader.decodeDracoFile(bufferView, function (geometry) {\n\n\t\t\t\t\t\tfor (var attributeName in geometry.attributes) {\n\n\t\t\t\t\t\t\tvar attribute = geometry.attributes[attributeName];\n\t\t\t\t\t\t\tvar normalized = attributeNormalizedMap[attributeName];\n\n\t\t\t\t\t\t\tif (normalized !== undefined) attribute.normalized = normalized;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tresolve(geometry);\n\n\t\t\t\t\t}, threeAttributeMap, attributeTypeMap);\n\n\t\t\t\t});\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Texture Transform Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n\t\t */\n\t\tfunction GLTFTextureTransformExtension() {\n\n\t\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t\t}\n\n\t\tGLTFTextureTransformExtension.prototype.extendTexture = function (texture, transform) {\n\n\t\t\ttexture = texture.clone();\n\n\t\t\tif (transform.offset !== undefined) {\n\n\t\t\t\ttexture.offset.fromArray(transform.offset);\n\n\t\t\t}\n\n\t\t\tif (transform.rotation !== undefined) {\n\n\t\t\t\ttexture.rotation = transform.rotation;\n\n\t\t\t}\n\n\t\t\tif (transform.scale !== undefined) {\n\n\t\t\t\ttexture.repeat.fromArray(transform.scale);\n\n\t\t\t}\n\n\t\t\tif (transform.texCoord !== undefined) {\n\n\t\t\t\tconsole.warn('THREE._GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.');\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\treturn texture;\n\n\t\t};\n\n\t\t/**\n\t\t * Specular-Glossiness Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_pbrSpecularGlossiness\n\t\t */\n\n\t\t/**\n\t\t * A sub class of StandardMaterial with some of the functionality\n\t\t * changed via the `onBeforeCompile` callback\n\t\t * @pailhead\n\t\t */\n\n\t\tfunction GLTFMeshStandardSGMaterial(params) {\n\n\t\t\tMeshStandardMaterial.call(this);\n\n\t\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t\t//various chunks that need replacing\n\t\t\tvar specularMapParsFragmentChunk = [\n\t\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t\t'#endif'\n\t\t\t].join('\\n');\n\n\t\t\tvar glossinessMapParsFragmentChunk = [\n\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t\t'#endif'\n\t\t\t].join('\\n');\n\n\t\t\tvar specularMapFragmentChunk = [\n\t\t\t\t'vec3 specularFactor = specular;',\n\t\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t\t'\ttexelSpecular = sRGBToLinear( texelSpecular );',\n\t\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t\t'#endif'\n\t\t\t].join('\\n');\n\n\t\t\tvar glossinessMapFragmentChunk = [\n\t\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t\t'#endif'\n\t\t\t].join('\\n');\n\n\t\t\tvar lightPhysicalFragmentChunk = [\n\t\t\t\t'PhysicalMaterial material;',\n\t\t\t\t'material.diffuseColor = diffuseColor.rgb;',\n\t\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t\t'material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\t\t\t\t'material.specularColor = specularFactor.rgb;',\n\t\t\t].join('\\n');\n\n\t\t\tvar uniforms = {\n\t\t\t\tspecular: { value: new Color().setHex(0xffffff) },\n\t\t\t\tglossiness: { value: 1 },\n\t\t\t\tspecularMap: { value: null },\n\t\t\t\tglossinessMap: { value: null }\n\t\t\t};\n\n\t\t\tthis._extraUniforms = uniforms;\n\n\t\t\t// please see #14031 or #13198 for an alternate approach\n\t\t\tthis.onBeforeCompile = function (shader) {\n\n\t\t\t\tfor (var uniformName in uniforms) {\n\n\t\t\t\t\tshader.uniforms[uniformName] = uniforms[uniformName];\n\n\t\t\t\t}\n\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('uniform float roughness;', 'uniform vec3 specular;');\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('uniform float metalness;', 'uniform float glossiness;');\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk);\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk);\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('#include <roughnessmap_fragment>', specularMapFragmentChunk);\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('#include <metalnessmap_fragment>', glossinessMapFragmentChunk);\n\t\t\t\tshader.fragmentShader = shader.fragmentShader.replace('#include <lights_physical_fragment>', lightPhysicalFragmentChunk);\n\n\t\t\t};\n\n\t\t\t/*eslint-disable*/\n\t\t\tObject.defineProperties(\n\t\t\t\tthis,\n\t\t\t\t{\n\t\t\t\t\tspecular: {\n\t\t\t\t\t\tget: function () { return uniforms.specular.value; },\n\t\t\t\t\t\tset: function (v) { uniforms.specular.value = v; }\n\t\t\t\t\t},\n\t\t\t\t\tspecularMap: {\n\t\t\t\t\t\tget: function () { return uniforms.specularMap.value; },\n\t\t\t\t\t\tset: function (v) { uniforms.specularMap.value = v; }\n\t\t\t\t\t},\n\t\t\t\t\tglossiness: {\n\t\t\t\t\t\tget: function () { return uniforms.glossiness.value; },\n\t\t\t\t\t\tset: function (v) { uniforms.glossiness.value = v; }\n\t\t\t\t\t},\n\t\t\t\t\tglossinessMap: {\n\t\t\t\t\t\tget: function () { return uniforms.glossinessMap.value; },\n\t\t\t\t\t\tset: function (v) {\n\n\t\t\t\t\t\t\tuniforms.glossinessMap.value = v;\n\t\t\t\t\t\t\t//how about something like this - @pailhead\n\t\t\t\t\t\t\tif (v) {\n\n\t\t\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\t\t\t// set USE_ROUGHNESSMAP to enable vUv\n\t\t\t\t\t\t\t\tthis.defines.USE_ROUGHNESSMAP = '';\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tdelete this.defines.USE_ROUGHNESSMAP;\n\t\t\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\n\t\t\t/*eslint-enable*/\n\t\t\tdelete this.metalness;\n\t\t\tdelete this.roughness;\n\t\t\tdelete this.metalnessMap;\n\t\t\tdelete this.roughnessMap;\n\n\t\t\tthis.setValues(params);\n\n\t\t}\n\n\t\tGLTFMeshStandardSGMaterial.prototype = Object.create(MeshStandardMaterial.prototype);\n\t\tGLTFMeshStandardSGMaterial.prototype.constructor = GLTFMeshStandardSGMaterial;\n\n\t\tGLTFMeshStandardSGMaterial.prototype.copy = function (source) {\n\n\t\t\tMeshStandardMaterial.prototype.copy.call(this, source);\n\t\t\tthis.specularMap = source.specularMap;\n\t\t\tthis.specular.copy(source.specular);\n\t\t\tthis.glossinessMap = source.glossinessMap;\n\t\t\tthis.glossiness = source.glossiness;\n\t\t\tdelete this.metalness;\n\t\t\tdelete this.roughness;\n\t\t\tdelete this.metalnessMap;\n\t\t\tdelete this.roughnessMap;\n\t\t\treturn this;\n\n\t\t};\n\n\t\tfunction GLTFMaterialsPbrSpecularGlossinessExtension() {\n\n\t\t\treturn {\n\n\t\t\t\tname: EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,\n\n\t\t\t\tspecularGlossinessParams: [\n\t\t\t\t\t'color',\n\t\t\t\t\t'map',\n\t\t\t\t\t'lightMap',\n\t\t\t\t\t'lightMapIntensity',\n\t\t\t\t\t'aoMap',\n\t\t\t\t\t'aoMapIntensity',\n\t\t\t\t\t'emissive',\n\t\t\t\t\t'emissiveIntensity',\n\t\t\t\t\t'emissiveMap',\n\t\t\t\t\t'bumpMap',\n\t\t\t\t\t'bumpScale',\n\t\t\t\t\t'normalMap',\n\t\t\t\t\t'normalMapType',\n\t\t\t\t\t'displacementMap',\n\t\t\t\t\t'displacementScale',\n\t\t\t\t\t'displacementBias',\n\t\t\t\t\t'specularMap',\n\t\t\t\t\t'specular',\n\t\t\t\t\t'glossinessMap',\n\t\t\t\t\t'glossiness',\n\t\t\t\t\t'alphaMap',\n\t\t\t\t\t'envMap',\n\t\t\t\t\t'envMapIntensity',\n\t\t\t\t\t'refractionRatio',\n\t\t\t\t],\n\n\t\t\t\tgetMaterialType: function () {\n\n\t\t\t\t\treturn GLTFMeshStandardSGMaterial;\n\n\t\t\t\t},\n\n\t\t\t\textendParams: function (materialParams, materialDef, parser) {\n\n\t\t\t\t\tvar pbrSpecularGlossiness = materialDef.extensions[this.name];\n\n\t\t\t\t\tmaterialParams.color = new Color(1.0, 1.0, 1.0);\n\t\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\t\tvar pending = [];\n\n\t\t\t\t\tif (Array.isArray(pbrSpecularGlossiness.diffuseFactor)) {\n\n\t\t\t\t\t\tvar array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\t\t\t\tmaterialParams.color.fromArray(array);\n\t\t\t\t\t\tmaterialParams.opacity = array[3];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (pbrSpecularGlossiness.diffuseTexture !== undefined) {\n\n\t\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'map', pbrSpecularGlossiness.diffuseTexture));\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterialParams.emissive = new Color(0.0, 0.0, 0.0);\n\t\t\t\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\t\t\t\tmaterialParams.specular = new Color(1.0, 1.0, 1.0);\n\n\t\t\t\t\tif (Array.isArray(pbrSpecularGlossiness.specularFactor)) {\n\n\t\t\t\t\t\tmaterialParams.specular.fromArray(pbrSpecularGlossiness.specularFactor);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (pbrSpecularGlossiness.specularGlossinessTexture !== undefined) {\n\n\t\t\t\t\t\tvar specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'glossinessMap', specGlossMapDef));\n\t\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'specularMap', specGlossMapDef));\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all(pending);\n\n\t\t\t\t},\n\n\t\t\t\tcreateMaterial: function (materialParams) {\n\n\t\t\t\t\tvar material = new GLTFMeshStandardSGMaterial(materialParams);\n\t\t\t\t\tmaterial.fog = true;\n\n\t\t\t\t\tmaterial.color = materialParams.color;\n\n\t\t\t\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\t\t\t\tmaterial.lightMap = null;\n\t\t\t\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\t\t\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\t\t\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\t\t\t\tmaterial.emissive = materialParams.emissive;\n\t\t\t\t\tmaterial.emissiveIntensity = 1.0;\n\t\t\t\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\t\t\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\t\t\t\tmaterial.bumpScale = 1;\n\n\t\t\t\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\t\t\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\t\t\t\tif (materialParams.normalScale) material.normalScale = materialParams.normalScale;\n\n\t\t\t\t\tmaterial.displacementMap = null;\n\t\t\t\t\tmaterial.displacementScale = 1;\n\t\t\t\t\tmaterial.displacementBias = 0;\n\n\t\t\t\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\t\t\t\tmaterial.specular = materialParams.specular;\n\n\t\t\t\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\t\t\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\t\t\t\tmaterial.alphaMap = null;\n\n\t\t\t\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\t\t\t\tmaterial.envMapIntensity = 1.0;\n\n\t\t\t\t\tmaterial.refractionRatio = 0.98;\n\n\t\t\t\t\treturn material;\n\n\t\t\t\t},\n\n\t\t\t};\n\n\t\t}\n\n\t\t/**\n\t\t * Mesh Quantization Extension\n\t\t *\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n\t\t */\n\t\tfunction GLTFMeshQuantizationExtension() {\n\n\t\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t\t}\n\n\t\tfunction GLTFMeaterialTechniquesWebglExtension(json) {\n\t\t\tthis.name = EXTENSIONS.KHR_TECHNIQUES_WEBGL;\n\n\n\t\t\tthis.getMaterialType = function () {\n\n\t\t\t\treturn ShaderMaterial;\n\n\t\t\t}\n\n\t\t\tthis.getUniformTexture = function (uniform, textureIndex, parser) {\n\n\t\t\t\treturn parser.loadTexture(textureIndex).then((texture) => {\n\t\t\t\t\tuniform.value = texture;\n\t\t\t\t})\n\n\t\t\t}\n\n\t\t\tthis.extendParams = function (materialParams, materialDef, parser) {\n\t\t\t\tvar extension = json.extensions[this.name];\n\t\t\t\tvar ktwDef = materialDef.extensions[this.name];\n\n\t\t\t\tvar technique = extension.techniques[ktwDef.technique];\n\n\t\t\t\tmaterialParams.name = technique.name;\n\n\t\t\t\tvar program = extension.programs[technique.program];\n\n\t\t\t\tvar techniqueUniforms = technique.uniforms;\n\n\t\t\t\tvar uniforms = {};\n\t\t\t\tvar pending = [];\n\n\t\t\t\tfor (const uniformName in ktwDef.values) {\n\t\t\t\t\tif (ktwDef.values.hasOwnProperty(uniformName) && techniqueUniforms[uniformName]) {\n\t\t\t\t\t\tconst uniformVal = ktwDef.values[uniformName];\n\n\t\t\t\t\t\tvar unifromType = techniqueUniforms[uniformName].type;\n\t\t\t\t\t\tuniforms[uniformName] = { value: null };\n\t\t\t\t\t\tvar unifrom = uniforms[uniformName];\n\n\t\t\t\t\t\tswitch (unifromType) {\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.FLOAT:\n\t\t\t\t\t\t\t\tunifrom.value = { value: uniformVal }\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.FLOAT_VEC2:\n\t\t\t\t\t\t\t\tunifrom.value = new Vector2().fromArray(uniformVal);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.FLOAT_VEC3:\n\t\t\t\t\t\t\t\tunifrom.value = new Vector3().fromArray(uniformVal);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.FLOAT_VEC4:\n\t\t\t\t\t\t\t\tunifrom.value = new Color().fromArray(uniformVal);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.FLOAT_MAT3:\n\t\t\t\t\t\t\t\tunifrom.value = new Matrix3().fromArray(uniformVal);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.FLOAT_MAT4:\n\t\t\t\t\t\t\t\tunifrom.value = new Matrix4().fromArray(uniformVal);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase WEBGL_CONSTANTS.SAMPLER_2D:\n\t\t\t\t\t\t\t\tvar textureIndex = uniformVal.index;\n\t\t\t\t\t\t\t\tpending.push(this.getUniformTexture(unifrom, textureIndex, parser));\n\t\t\t\t\t\t\t\t//console.warn('_GLTFLoader:unsupport uniform type ' + unifromType);\n\t\t\t\t\t\t\t\t// parser.assignTexture\n\t\t\t\t\t\t\t\t//uniforms[uniformName] = new THREE.Matrix4().fromArray(uniformVal);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.uniforms = uniforms;\n\n\t\t\t\tvar fragmentShaderDef = extension.shaders[program.fragmentShader];\n\n\t\t\t\tvar vertexShaderDef = extension.shaders[program.vertexShader];\n\n\n\t\t\t\t// pending.push(parser.getDependency('bufferView', fragmentShaderDef.bufferView).then((buffer) => {\n\n\t\t\t\t// \tmaterialParams.fragmentShader = LoaderUtils.decodeText(new Uint8Array(buffer));\n\t\t\t\t// \treturn materialParams;\n\t\t\t\t// }));\n\t\t\t\t// pending.push(parser.getDependency('bufferView', vertexShaderDef.bufferView).then((buffer) => {\n\t\t\t\t// \tmaterialParams.vertexShader = LoaderUtils.decodeText(new Uint8Array(buffer));\n\t\t\t\t// \treturn materialParams;\n\t\t\t\t// }));\n\n\t\t\t\treturn Promise.all(pending);\n\n\t\t\t}\n\n\t\t\tthis.createMaterial = function (materialParams) {\n\n\t\t\t\tvar material = new ShaderMaterial(materialParams);\n\t\t\t\treturn material;\n\n\t\t\t}\n\t\t}\n\n\t\tfunction GLTFCesiumRTCExtension(json) {\n\t\t\tthis.name = EXTENSIONS.CESIUM_RTC;\n\t\t\tvar rtcCenter = new Vector3().fromArray(json.extensions[this.name].center);\n\t\t\tthis.rtcCenterTransform = new Matrix4().setPosition(rtcCenter);\n\n\t\t}\n\n\t\t/*********************************/\n\t\t/********** INTERPOLATION ********/\n\t\t/*********************************/\n\n\t\t// Spline Interpolation\n\t\t// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\n\t\tfunction GLTFCubicSplineInterpolant(parameterPositions, sampleValues, sampleSize, resultBuffer) {\n\n\t\t\tInterpolant.call(this, parameterPositions, sampleValues, sampleSize, resultBuffer);\n\n\t\t}\n\n\t\tGLTFCubicSplineInterpolant.prototype = Object.create(Interpolant.prototype);\n\t\tGLTFCubicSplineInterpolant.prototype.constructor = GLTFCubicSplineInterpolant;\n\n\t\tGLTFCubicSplineInterpolant.prototype.copySampleValue_ = function (index) {\n\n\t\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\t\tvar result = this.resultBuffer,\n\t\t\t\tvalues = this.sampleValues,\n\t\t\t\tvalueSize = this.valueSize,\n\t\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\t\tfor (var i = 0; i !== valueSize; i++) {\n\n\t\t\t\tresult[i] = values[offset + i];\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t\tGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\t\tGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\n\t\tGLTFCubicSplineInterpolant.prototype.interpolate_ = function (i1, t0, t, t1) {\n\n\t\t\tvar result = this.resultBuffer;\n\t\t\tvar values = this.sampleValues;\n\t\t\tvar stride = this.valueSize;\n\n\t\t\tvar stride2 = stride * 2;\n\t\t\tvar stride3 = stride * 3;\n\n\t\t\tvar td = t1 - t0;\n\n\t\t\tvar p = (t - t0) / td;\n\t\t\tvar pp = p * p;\n\t\t\tvar ppp = pp * p;\n\n\t\t\tvar offset1 = i1 * stride3;\n\t\t\tvar offset0 = offset1 - stride3;\n\n\t\t\tvar s2 = - 2 * ppp + 3 * pp;\n\t\t\tvar s3 = ppp - pp;\n\t\t\tvar s0 = 1 - s2;\n\t\t\tvar s1 = s3 - pp + p;\n\n\t\t\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t\t\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\t\t\tfor (var i = 0; i !== stride; i++) {\n\n\t\t\t\tvar p0 = values[offset0 + i + stride]; // splineVertex_k\n\t\t\t\tvar m0 = values[offset0 + i + stride2] * td; // outTangent_k * (t_k+1 - t_k)\n\t\t\t\tvar p1 = values[offset1 + i + stride]; // splineVertex_k+1\n\t\t\t\tvar m1 = values[offset1 + i] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\t\t\tresult[i] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t\t\t}\n\n\t\t\treturn result;\n\n\t\t};\n\n\t\t/*********************************/\n\t\t/********** INTERNALS ************/\n\t\t/*********************************/\n\n\t\t/* CONSTANTS */\n\n\t\tvar WEBGL_CONSTANTS = {\n\t\t\tFLOAT: 5126,\n\t\t\t//FLOAT_MAT2: 35674,\n\t\t\tFLOAT_MAT3: 35675,\n\t\t\tFLOAT_MAT4: 35676,\n\t\t\tFLOAT_VEC2: 35664,\n\t\t\tFLOAT_VEC3: 35665,\n\t\t\tFLOAT_VEC4: 35666,\n\t\t\tLINEAR: 9729,\n\t\t\tREPEAT: 10497,\n\t\t\tSAMPLER_2D: 35678,\n\t\t\tPOINTS: 0,\n\t\t\tLINES: 1,\n\t\t\tLINE_LOOP: 2,\n\t\t\tLINE_STRIP: 3,\n\t\t\tTRIANGLES: 4,\n\t\t\tTRIANGLE_STRIP: 5,\n\t\t\tTRIANGLE_FAN: 6,\n\t\t\tUNSIGNED_BYTE: 5121,\n\t\t\tUNSIGNED_SHORT: 5123\n\t\t};\n\n\t\tvar WEBGL_COMPONENT_TYPES = {\n\t\t\t5120: Int8Array,\n\t\t\t5121: Uint8Array,\n\t\t\t5122: Int16Array,\n\t\t\t5123: Uint16Array,\n\t\t\t5125: Uint32Array,\n\t\t\t5126: Float32Array\n\t\t};\n\n\t\tvar WEBGL_FILTERS = {\n\t\t\t9728: NearestFilter,\n\t\t\t9729: LinearFilter,\n\t\t\t9984: NearestMipmapNearestFilter,\n\t\t\t9985: LinearMipmapNearestFilter,\n\t\t\t9986: NearestMipmapLinearFilter,\n\t\t\t9987: LinearMipmapLinearFilter\n\t\t};\n\n\t\tvar WEBGL_WRAPPINGS = {\n\t\t\t33071: ClampToEdgeWrapping,\n\t\t\t33648: MirroredRepeatWrapping,\n\t\t\t10497: RepeatWrapping\n\t\t};\n\n\t\tvar WEBGL_TYPE_SIZES = {\n\t\t\t'SCALAR': 1,\n\t\t\t'VEC2': 2,\n\t\t\t'VEC3': 3,\n\t\t\t'VEC4': 4,\n\t\t\t'MAT2': 4,\n\t\t\t'MAT3': 9,\n\t\t\t'MAT4': 16\n\t\t};\n\n\t\tvar ATTRIBUTES = {\n\t\t\tPOSITION: 'position',\n\t\t\tNORMAL: 'normal',\n\t\t\tTANGENT: 'tangent',\n\t\t\tTEXCOORD_0: 'uv',\n\t\t\tTEXCOORD_1: 'uv2',\n\t\t\tCOLOR_0: 'color',\n\t\t\tWEIGHTS_0: 'skinWeight',\n\t\t\tJOINTS_0: 'skinIndex',\n\t\t};\n\n\t\tvar PATH_PROPERTIES = {\n\t\t\tscale: 'scale',\n\t\t\ttranslation: 'position',\n\t\t\trotation: 'quaternion',\n\t\t\tweights: 'morphTargetInfluences'\n\t\t};\n\n\t\tvar INTERPOLATION = {\n\t\t\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t\t// keyframe track will be initialized with a default interpolation type, then modified.\n\t\t\tLINEAR: InterpolateLinear,\n\t\t\tSTEP: InterpolateDiscrete\n\t\t};\n\n\t\tvar ALPHA_MODES = {\n\t\t\tOPAQUE: 'OPAQUE',\n\t\t\tMASK: 'MASK',\n\t\t\tBLEND: 'BLEND'\n\t\t};\n\n\t\tvar MIME_TYPE_FORMATS = {\n\t\t\t'image/png': RGBAFormat,\n\t\t\t'image/jpeg': RGBFormat\n\t\t};\n\n\t\t/* UTILITY FUNCTIONS */\n\n\t\tfunction resolveURL(url, path) {\n\n\t\t\t// Invalid URL\n\t\t\tif (typeof url !== 'string' || url === '') return '';\n\n\t\t\t// Host Relative URL\n\t\t\tif (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n\n\t\t\t\tpath = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n\n\t\t\t}\n\n\t\t\t// Absolute URL http://,https://,//\n\t\t\tif (/^(https?:)?\\/\\//i.test(url)) return url;\n\n\t\t\t// Data URI\n\t\t\tif (/^data:.*,.*$/i.test(url)) return url;\n\n\t\t\t// Blob URL\n\t\t\tif (/^blob:.*$/i.test(url)) return url;\n\n\t\t\t// Relative URL\n\t\t\treturn path + url;\n\n\t\t}\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n\t\t */\n\t\tfunction createDefaultMaterial(cache) {\n\n\t\t\tif (cache['DefaultMaterial'] === undefined) {\n\n\t\t\t\tcache['DefaultMaterial'] = new MeshStandardMaterial({\n\t\t\t\t\tcolor: 0xFFFFFF,\n\t\t\t\t\temissive: 0x000000,\n\t\t\t\t\tmetalness: 1,\n\t\t\t\t\troughness: 1,\n\t\t\t\t\ttransparent: false,\n\t\t\t\t\tdepthTest: true,\n\t\t\t\t\tside: FrontSide\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\treturn cache['DefaultMaterial'];\n\n\t\t}\n\n\t\tfunction addUnknownExtensionsToUserData(knownExtensions, object, objectDef) {\n\n\t\t\t// Add unknown glTF extensions to an object's userData.\n\n\t\t\tfor (var name in objectDef.extensions) {\n\n\t\t\t\tif (knownExtensions[name] === undefined) {\n\n\t\t\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\t\t\tobject.userData.gltfExtensions[name] = objectDef.extensions[name];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * @param {Object3D|Material|BufferGeometry} object\n\t\t * @param {GLTF.definition} gltfDef\n\t\t */\n\t\tfunction assignExtrasToUserData(object, gltfDef) {\n\n\t\t\tif (gltfDef.extras !== undefined) {\n\n\t\t\t\tif (typeof gltfDef.extras === 'object') {\n\n\t\t\t\t\tObject.assign(object.userData, gltfDef.extras);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n\t\t *\n\t\t * @param {BufferGeometry} geometry\n\t\t * @param {Array<GLTF.Target>} targets\n\t\t * @param {GLTFParser} parser\n\t\t * @return {Promise<BufferGeometry>}\n\t\t */\n\t\tfunction addMorphTargets(geometry, targets, parser) {\n\n\t\t\tvar hasMorphPosition = false;\n\t\t\tvar hasMorphNormal = false;\n\n\t\t\tfor (var i = 0, il = targets.length; i < il; i++) {\n\n\t\t\t\tvar target = targets[i];\n\n\t\t\t\tif (target.POSITION !== undefined) hasMorphPosition = true;\n\t\t\t\tif (target.NORMAL !== undefined) hasMorphNormal = true;\n\n\t\t\t\tif (hasMorphPosition && hasMorphNormal) break;\n\n\t\t\t}\n\n\t\t\tif (!hasMorphPosition && !hasMorphNormal) return Promise.resolve(geometry);\n\n\t\t\tvar pendingPositionAccessors = [];\n\t\t\tvar pendingNormalAccessors = [];\n\n\t\t\tfor (var i = 0, il = targets.length; i < il; i++) {\n\n\t\t\t\tvar target = targets[i];\n\n\t\t\t\tif (hasMorphPosition) {\n\n\t\t\t\t\tvar pendingAccessor = target.POSITION !== undefined\n\t\t\t\t\t\t? parser.getDependency('accessor', target.POSITION)\n\t\t\t\t\t\t: geometry.attributes.position;\n\n\t\t\t\t\tpendingPositionAccessors.push(pendingAccessor);\n\n\t\t\t\t}\n\n\t\t\t\tif (hasMorphNormal) {\n\n\t\t\t\t\tvar pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t\t\t? parser.getDependency('accessor', target.NORMAL)\n\t\t\t\t\t\t: geometry.attributes.normal;\n\n\t\t\t\t\tpendingNormalAccessors.push(pendingAccessor);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all([\n\t\t\t\tPromise.all(pendingPositionAccessors),\n\t\t\t\tPromise.all(pendingNormalAccessors)\n\t\t\t]).then(function (accessors) {\n\n\t\t\t\tvar morphPositions = accessors[0];\n\t\t\t\tvar morphNormals = accessors[1];\n\n\t\t\t\tif (hasMorphPosition) geometry.morphAttributes.position = morphPositions;\n\t\t\t\tif (hasMorphNormal) geometry.morphAttributes.normal = morphNormals;\n\t\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t\t\treturn geometry;\n\n\t\t\t});\n\n\t\t}\n\n\t\t/**\n\t\t * @param {Mesh} mesh\n\t\t * @param {GLTF.Mesh} meshDef\n\t\t */\n\t\tfunction updateMorphTargets(mesh, meshDef) {\n\n\t\t\tmesh.updateMorphTargets();\n\n\t\t\tif (meshDef.weights !== undefined) {\n\n\t\t\t\tfor (var i = 0, il = meshDef.weights.length; i < il; i++) {\n\n\t\t\t\t\tmesh.morphTargetInfluences[i] = meshDef.weights[i];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\t\t\tif (meshDef.extras && Array.isArray(meshDef.extras.targetNames)) {\n\n\t\t\t\tvar targetNames = meshDef.extras.targetNames;\n\n\t\t\t\tif (mesh.morphTargetInfluences.length === targetNames.length) {\n\n\t\t\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\t\t\tfor (var i = 0, il = targetNames.length; i < il; i++) {\n\n\t\t\t\t\t\tmesh.morphTargetDictionary[targetNames[i]] = i;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Invalid extras.targetNames length. Ignoring names.');\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction createPrimitiveKey(primitiveDef) {\n\n\t\t\tvar dracoExtension = primitiveDef.extensions && primitiveDef.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];\n\t\t\tvar geometryKey;\n\n\t\t\tif (dracoExtension) {\n\n\t\t\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t\t+ ':' + createAttributesKey(dracoExtension.attributes);\n\n\t\t\t} else {\n\n\t\t\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey(primitiveDef.attributes) + ':' + primitiveDef.mode;\n\n\t\t\t}\n\n\t\t\treturn geometryKey;\n\n\t\t}\n\n\t\tfunction createAttributesKey(attributes) {\n\n\t\t\tvar attributesKey = '';\n\n\t\t\tvar keys = Object.keys(attributes).sort();\n\n\t\t\tfor (var i = 0, il = keys.length; i < il; i++) {\n\n\t\t\t\tattributesKey += keys[i] + ':' + attributes[keys[i]] + ';';\n\n\t\t\t}\n\n\t\t\treturn attributesKey;\n\n\t\t}\n\n\t\t/* GLTF PARSER */\n\n\t\tfunction GLTFParser(json, extensions, options) {\n\n\t\t\tthis.json = json || {};\n\t\t\tthis.extensions = extensions || {};\n\t\t\tthis.options = options || {};\n\n\t\t\t// loader object cache\n\t\t\tthis.cache = new GLTFRegistry();\n\n\t\t\t// BufferGeometry caching\n\t\t\tthis.primitiveCache = {};\n\n\t\t\tthis.textureLoader = new TextureLoader(this.options.manager);\n\t\t\tthis.textureLoader.setCrossOrigin(this.options.crossOrigin);\n\n\t\t\tthis.fileLoader = new FileLoader(this.options.manager);\n\t\t\tthis.fileLoader.setResponseType('arraybuffer');\n\n\t\t\tif (this.options.crossOrigin === 'use-credentials') {\n\n\t\t\t\tthis.fileLoader.setWithCredentials(true);\n\n\t\t\t}\n\n\t\t}\n\n\t\tGLTFParser.prototype.parse = function (onLoad, onError) {\n\n\t\t\tvar parser = this;\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\n\t\t\t// Clear the loader cache\n\t\t\tthis.cache.removeAll();\n\n\t\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\t\tthis.markDefs();\n\n\t\t\tPromise.all([\n\n\t\t\t\tthis.getDependencies('scene'),\n\t\t\t\tthis.getDependencies('animation'),\n\t\t\t\tthis.getDependencies('camera'),\n\n\t\t\t]).then(function (dependencies) {\n\n\t\t\t\tvar result = {\n\t\t\t\t\tscene: dependencies[0][json.scene || 0],\n\t\t\t\t\tscenes: dependencies[0],\n\t\t\t\t\tanimations: dependencies[1],\n\t\t\t\t\tcameras: dependencies[2],\n\t\t\t\t\tasset: json.asset,\n\t\t\t\t\tparser: parser,\n\t\t\t\t\tuserData: {}\n\t\t\t\t};\n\n\t\t\t\taddUnknownExtensionsToUserData(extensions, result, json);\n\n\t\t\t\tassignExtrasToUserData(result, json);\n\n\t\t\t\tif (extensions[EXTENSIONS.CESIUM_RTC]) {\n\t\t\t\t\tresult.CESIUM_RTC = json.extensions[EXTENSIONS.CESIUM_RTC].center;\n\t\t\t\t\t// var rtcCenterTransform = extensions[EXTENSIONS.CESIUM_RTC].rtcCenterTransform;\n\t\t\t\t\t// var scene = result.scene;\n\t\t\t\t\t// scene.matrix.multiply(rtcCenterTransform);\n\t\t\t\t\t// scene.matrix.decompose(scene.position, scene.quaternion, scene.scale);\n\t\t\t\t\t// scene.updateMatrixWorld();\n\t\t\t\t}\n\t\t\t\tonLoad(result);\n\n\t\t\t}).catch((e) => {\n\t\t\t\tthis.cache.removeAll();\n\t\t\t\tonError(e)\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Marks the special nodes/meshes in json for efficient parse.\n\t\t */\n\t\tGLTFParser.prototype.markDefs = function () {\n\n\t\t\tvar nodeDefs = this.json.nodes || [];\n\t\t\tvar skinDefs = this.json.skins || [];\n\t\t\tvar meshDefs = this.json.meshes || [];\n\n\t\t\tvar meshReferences = {};\n\t\t\tvar meshUses = {};\n\n\t\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\t\tfor (var skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex++) {\n\n\t\t\t\tvar joints = skinDefs[skinIndex].joints;\n\n\t\t\t\tfor (var i = 0, il = joints.length; i < il; i++) {\n\n\t\t\t\t\tnodeDefs[joints[i]].isBone = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Meshes can (and should) be reused by multiple nodes in a glTF asset. To\n\t\t\t// avoid having more than one Mesh with the same name, count\n\t\t\t// references and rename instances below.\n\t\t\t//\n\t\t\t// Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t\t\tfor (var nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex++) {\n\n\t\t\t\tvar nodeDef = nodeDefs[nodeIndex];\n\n\t\t\t\tif (nodeDef.mesh !== undefined) {\n\n\t\t\t\t\tif (meshReferences[nodeDef.mesh] === undefined) {\n\n\t\t\t\t\t\tmeshReferences[nodeDef.mesh] = meshUses[nodeDef.mesh] = 0;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmeshReferences[nodeDef.mesh]++;\n\n\t\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\t\tif (nodeDef.skin !== undefined) {\n\n\t\t\t\t\t\tmeshDefs[nodeDef.mesh].isSkinnedMesh = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.json.meshReferences = meshReferences;\n\t\t\tthis.json.meshUses = meshUses;\n\n\t\t};\n\n\t\t/**\n\t\t * Requests the specified dependency asynchronously, with caching.\n\t\t * @param {string} type\n\t\t * @param {number} index\n\t\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t\t */\n\t\tGLTFParser.prototype.getDependency = function (type, index) {\n\n\t\t\tvar cacheKey = type + ':' + index;\n\t\t\tvar dependency = this.cache.get(cacheKey);\n\n\t\t\tif (!dependency) {\n\n\t\t\t\tswitch (type) {\n\n\t\t\t\t\tcase 'scene':\n\t\t\t\t\t\tdependency = this.loadScene(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'node':\n\t\t\t\t\t\tdependency = this.loadNode(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'mesh':\n\t\t\t\t\t\tdependency = this.loadMesh(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'accessor':\n\t\t\t\t\t\tdependency = this.loadAccessor(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'bufferView':\n\t\t\t\t\t\tdependency = this.loadBufferView(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'buffer':\n\t\t\t\t\t\tdependency = this.loadBuffer(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'material':\n\t\t\t\t\t\tdependency = this.loadMaterial(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'texture':\n\t\t\t\t\t\tdependency = this.loadTexture(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'skin':\n\t\t\t\t\t\tdependency = this.loadSkin(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'animation':\n\t\t\t\t\t\tdependency = this.loadAnimation(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'camera':\n\t\t\t\t\t\tdependency = this.loadCamera(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'light':\n\t\t\t\t\t\tdependency = this.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].loadLight(index);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tthrow new Error('Unknown type: ' + type);\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add(cacheKey, dependency);\n\n\t\t\t}\n\n\t\t\treturn dependency;\n\n\t\t};\n\n\t\t/**\n\t\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t\t * @param {string} type\n\t\t * @return {Promise<Array<Object>>}\n\t\t */\n\t\tGLTFParser.prototype.getDependencies = function (type) {\n\n\t\t\tvar dependencies = this.cache.get(type);\n\n\t\t\tif (!dependencies) {\n\n\t\t\t\tvar parser = this;\n\t\t\t\tvar defs = this.json[type + (type === 'mesh' ? 'es' : 's')] || [];\n\n\t\t\t\tdependencies = Promise.all(defs.map(function (def, index) {\n\n\t\t\t\t\treturn parser.getDependency(type, index);\n\n\t\t\t\t}));\n\n\t\t\t\tthis.cache.add(type, dependencies);\n\n\t\t\t}\n\n\t\t\treturn dependencies;\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t\t * @param {number} bufferIndex\n\t\t * @return {Promise<ArrayBuffer>}\n\t\t */\n\t\tGLTFParser.prototype.loadBuffer = function (bufferIndex) {\n\n\t\t\tvar bufferDef = this.json.buffers[bufferIndex];\n\t\t\tvar loader = this.fileLoader;\n\n\t\t\tif (bufferDef.type && bufferDef.type !== 'arraybuffer') {\n\n\t\t\t\tthrow new Error('THREE._GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.');\n\n\t\t\t}\n\n\t\t\t// If present, GLB container is required to be the first buffer.\n\t\t\tif (bufferDef.uri === undefined && bufferIndex === 0) {\n\n\n\t\t\t\tif (bufferDef.extras && bufferDef.extras._pipeline) {\n\t\t\t\t\treturn Promise.resolve(bufferDef.extras._pipeline.source.buffer);\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);\n\n\t\t\t}\n\n\t\t\tvar options = this.options;\n\n\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\tif (bufferDef.extras && bufferDef.extras._pipeline) {\n\t\t\t\t\tresolve(bufferDef.extras._pipeline.source.buffer);\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tloader.load(resolveURL(bufferDef.uri, options.path), resolve, undefined, function () {\n\n\t\t\t\t\t\treject(new Error('THREE._GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".'));\n\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t\t * @param {number} bufferViewIndex\n\t\t * @return {Promise<ArrayBuffer>}\n\t\t */\n\t\tGLTFParser.prototype.loadBufferView = function (bufferViewIndex) {\n\n\t\t\tvar bufferViewDef = this.json.bufferViews[bufferViewIndex];\n\t\t\tvar binaryStart = this.json.binaryStart || 0;\n\n\t\t\treturn this.getDependency('buffer', bufferViewDef.buffer).then(function (buffer) {\n\n\t\t\t\tvar byteLength = bufferViewDef.byteLength || 0;\n\t\t\t\tvar byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\t\treturn buffer.slice(binaryStart + byteOffset, binaryStart + byteOffset + byteLength);\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t\t * @param {number} accessorIndex\n\t\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t\t */\n\t\tGLTFParser.prototype.loadAccessor = function (accessorIndex) {\n\n\t\t\tvar parser = this;\n\t\t\tvar json = this.json;\n\n\t\t\tvar accessorDef = this.json.accessors[accessorIndex];\n\n\t\t\tif (accessorDef.bufferView === undefined && accessorDef.sparse === undefined) {\n\n\t\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t\t// compression extension).\n\t\t\t\treturn Promise.resolve(null);\n\n\t\t\t}\n\n\t\t\tvar pendingBufferViews = [];\n\n\t\t\tif (accessorDef.bufferView !== undefined) {\n\n\t\t\t\tpendingBufferViews.push(this.getDependency('bufferView', accessorDef.bufferView));\n\n\t\t\t} else {\n\n\t\t\t\tpendingBufferViews.push(null);\n\n\t\t\t}\n\n\t\t\tif (accessorDef.sparse !== undefined) {\n\n\t\t\t\tpendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.indices.bufferView));\n\t\t\t\tpendingBufferViews.push(this.getDependency('bufferView', accessorDef.sparse.values.bufferView));\n\n\t\t\t}\n\n\t\t\treturn Promise.all(pendingBufferViews).then(function (bufferViews) {\n\n\t\t\t\tvar bufferView = bufferViews[0];\n\n\t\t\t\tvar itemSize = WEBGL_TYPE_SIZES[accessorDef.type];\n\t\t\t\tvar TypedArray = WEBGL_COMPONENT_TYPES[accessorDef.componentType];\n\n\t\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\t\tvar elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\t\tvar itemBytes = elementBytes * itemSize;\n\t\t\t\tvar byteOffset = accessorDef.byteOffset || 0;\n\t\t\t\tvar byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[accessorDef.bufferView].byteStride : undefined;\n\t\t\t\tvar normalized = accessorDef.normalized === true;\n\t\t\t\tvar array, bufferAttribute;\n\n\t\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\t\tif (byteStride && byteStride !== itemBytes) {\n\n\t\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\t\tvar ibSlice = Math.floor(byteOffset / byteStride);\n\t\t\t\t\tvar ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\t\tvar ib = parser.cache.get(ibCacheKey);\n\n\t\t\t\t\tif (!ib) {\n\n\t\t\t\t\t\tarray = new TypedArray(bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes);\n\n\t\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\t\tib = new InterleavedBuffer(array, byteStride / elementBytes);\n\n\t\t\t\t\t\tparser.cache.add(ibCacheKey, ib);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute(ib, itemSize, (byteOffset % byteStride) / elementBytes, normalized);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (bufferView === null) {\n\n\t\t\t\t\t\tarray = new TypedArray(accessorDef.count * itemSize);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tarray = new TypedArray(bufferView, byteOffset, accessorDef.count * itemSize);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbufferAttribute = new BufferAttribute(array, itemSize, normalized);\n\n\t\t\t\t}\n\n\t\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\t\tif (accessorDef.sparse !== undefined) {\n\n\t\t\t\t\tvar itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\t\tvar TypedArrayIndices = WEBGL_COMPONENT_TYPES[accessorDef.sparse.indices.componentType];\n\n\t\t\t\t\tvar byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\t\tvar byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\t\tvar sparseIndices = new TypedArrayIndices(bufferViews[1], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices);\n\t\t\t\t\tvar sparseValues = new TypedArray(bufferViews[2], byteOffsetValues, accessorDef.sparse.count * itemSize);\n\n\t\t\t\t\tif (bufferView !== null) {\n\n\t\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute(bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var i = 0, il = sparseIndices.length; i < il; i++) {\n\n\t\t\t\t\t\tvar index = sparseIndices[i];\n\n\t\t\t\t\t\tbufferAttribute.setX(index, sparseValues[i * itemSize]);\n\t\t\t\t\t\tif (itemSize >= 2) bufferAttribute.setY(index, sparseValues[i * itemSize + 1]);\n\t\t\t\t\t\tif (itemSize >= 3) bufferAttribute.setZ(index, sparseValues[i * itemSize + 2]);\n\t\t\t\t\t\tif (itemSize >= 4) bufferAttribute.setW(index, sparseValues[i * itemSize + 3]);\n\t\t\t\t\t\tif (itemSize >= 5) throw new Error('THREE._GLTFLoader: Unsupported itemSize in sparse BufferAttribute.');\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn bufferAttribute;\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t\t * @param {number} textureIndex\n\t\t * @return {Promise<THREE.Texture>}\n\t\t */\n\t\tGLTFParser.prototype.loadTexture = function (textureIndex) {\n\n\t\t\tvar parser = this;\n\t\t\tvar json = this.json;\n\t\t\tvar options = this.options;\n\t\t\tvar textureLoader = this.textureLoader;\n\n\t\t\tvar URL = self.URL || self.webkitURL;\n\n\t\t\tvar textureDef = json.textures[textureIndex];\n\n\t\t\tvar textureExtensions = textureDef.extensions || {};\n\n\t\t\tvar source;\n\n\t\t\tif (textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]) {\n\n\t\t\t\tsource = json.images[textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS].source];\n\n\t\t\t} else {\n\n\t\t\t\tsource = json.images[textureDef.source];\n\n\t\t\t}\n\t\t\tvar cacheKey = 'texture-' + JSON.stringify(textureDef)\n\t\t\tvar pending = this.cache.get(cacheKey)\n\t\t\tif (textureDef.name && pending) {\n\t\t\t\tdebugger\n\t\t\t\treturn pending;\n\t\t\t}\n\n\t\t\tvar sourceURI = source.uri;\n\t\t\tvar isObjectURL = false;\n\n\t\t\tif (source.bufferView !== undefined) {\n\n\t\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\t\tsourceURI = parser.getDependency('bufferView', source.bufferView).then(function (bufferView) {\n\n\t\t\t\t\tisObjectURL = true;\n\t\t\t\t\tvar blob = new Blob([bufferView], { type: source.mimeType });\n\t\t\t\t\tsourceURI = URL.createObjectURL(blob);\n\t\t\t\t\treturn sourceURI;\n\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tpending = Promise.resolve(sourceURI).then(function (sourceURI) {\n\n\t\t\t\t// Load Texture resource.\n\n\t\t\t\tvar loader = options.manager.getHandler(sourceURI);\n\n\t\t\t\tif (!loader) {\n\n\t\t\t\t\tloader = textureExtensions[EXTENSIONS.MSFT_TEXTURE_DDS]\n\t\t\t\t\t\t? parser.extensions[EXTENSIONS.MSFT_TEXTURE_DDS].ddsLoader\n\t\t\t\t\t\t: textureLoader;\n\n\t\t\t\t}\n\n\t\t\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\t\t\tif (options.loadTexture == false) {\n\t\t\t\t\t\tvar texture = new Texture();\n\t\t\t\t\t\tvar url = resolveURL(sourceURI, options.path);\n\n\t\t\t\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\t\t\t\tvar isJPEG = url.search(/\\.jpe?g($|\\?)/i) > 0 || url.search(/^data\\:image\\/jpeg/) === 0;\n\n\t\t\t\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\t\t\t\t// texture.needsUpdate = true;\n\n\t\t\t\t\t\t// if (typeof Image != 'undefined') {\n\t\t\t\t\t\t// \tvar img = new Image();\n\t\t\t\t\t\t// \timg.onload = () => {\n\t\t\t\t\t\t// \t\ttexture.image = img;\n\t\t\t\t\t\t// \t\tresolve(texture);\n\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t// \timg.onerror = reject;\n\t\t\t\t\t\t// \timg.src = url;\n\n\t\t\t\t\t\t// } else {\n\t\t\t\t\t\t// \ttexture.image = url;\n\t\t\t\t\t\t// \tresolve(texture);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\ttexture.image = url;\n\t\t\t\t\t\tresolve(texture);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\telse {\n\t\t\t\t\t\tloader.load(resolveURL(sourceURI, options.path), resolve, undefined, function (err) {\n\n\t\t\t\t\t\t\treject('Failed to load image ' + sourceURI)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t});\n\n\t\t\t}).then(function (texture) {\n\n\t\t\t\t// Clean up resources and configure Texture.\n\n\t\t\t\tif (isObjectURL === true) {\n\n\t\t\t\t\tURL.revokeObjectURL(sourceURI);\n\n\t\t\t\t}\n\n\t\t\t\ttexture.flipY = false;\n\n\t\t\t\tif (textureDef.name) texture.name = textureDef.name;\n\n\t\t\t\t// Ignore unknown mime types, like DDS files.\n\t\t\t\tif (source.mimeType in MIME_TYPE_FORMATS) {\n\n\t\t\t\t\ttexture.format = MIME_TYPE_FORMATS[source.mimeType];\n\n\t\t\t\t}\n\n\t\t\t\tvar samplers = json.samplers || {};\n\t\t\t\tvar sampler = samplers[textureDef.sampler] || {};\n\n\t\t\t\ttexture.magFilter = WEBGL_FILTERS[sampler.magFilter] || LinearFilter;\n\t\t\t\ttexture.minFilter = WEBGL_FILTERS[sampler.minFilter] || LinearMipmapLinearFilter;\n\t\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[sampler.wrapS] || RepeatWrapping;\n\t\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[sampler.wrapT] || RepeatWrapping;\n\n\t\t\t\treturn texture;\n\n\t\t\t});\n\n\t\t\tthis.cache.add('texture-' + textureDef.name, pending)\n\t\t\treturn pending;\n\t\t};\n\n\t\t/**\n\t\t * Asynchronously assigns a texture to the given material parameters.\n\t\t * @param {Object} materialParams\n\t\t * @param {string} mapName\n\t\t * @param {Object} mapDef\n\t\t * @return {Promise}\n\t\t */\n\t\tGLTFParser.prototype.assignTexture = function (materialParams, mapName, mapDef) {\n\n\t\t\tvar parser = this;\n\n\t\t\treturn this.getDependency('texture', mapDef.index).then(function (texture) {\n\n\t\t\t\tif (!texture.isCompressedTexture) {\n\n\t\t\t\t\tswitch (mapName) {\n\n\t\t\t\t\t\tcase 'aoMap':\n\t\t\t\t\t\tcase 'emissiveMap':\n\t\t\t\t\t\tcase 'metalnessMap':\n\t\t\t\t\t\tcase 'normalMap':\n\t\t\t\t\t\tcase 'roughnessMap':\n\t\t\t\t\t\t\ttexture.format = RGBFormat;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\t\tif (mapDef.texCoord !== undefined && mapDef.texCoord != 0 && !(mapName === 'aoMap' && mapDef.texCoord == 1)) {\n\n\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.');\n\n\t\t\t\t}\n\n\t\t\t\tif (parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]) {\n\n\t\t\t\t\tvar transform = mapDef.extensions !== undefined ? mapDef.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM] : undefined;\n\n\t\t\t\t\tif (transform) {\n\n\t\t\t\t\t\ttexture = parser.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(texture, transform);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams[mapName] = texture;\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t\t * already has a material (generated from the glTF material options alone)\n\t\t * but reuse of the same glTF material may require multiple threejs materials\n\t\t * to accomodate different primitive types, defines, etc. New materials will\n\t\t * be created if necessary, and reused from a cache.\n\t\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t\t */\n\t\tGLTFParser.prototype.assignFinalMaterial = function (mesh) {\n\n\t\t\tvar geometry = mesh.geometry;\n\t\t\tvar material = mesh.material;\n\n\t\t\tvar useVertexTangents = geometry.attributes.tangent !== undefined;\n\t\t\tvar useVertexColors = geometry.attributes.color !== undefined;\n\t\t\tvar useFlatShading = geometry.attributes.normal === undefined;\n\t\t\tvar useSkinning = mesh.isSkinnedMesh === true;\n\t\t\tvar useMorphTargets = Object.keys(geometry.morphAttributes).length > 0;\n\t\t\tvar useMorphNormals = useMorphTargets && geometry.morphAttributes.normal !== undefined;\n\n\t\t\tif (mesh.isPoints) {\n\n\t\t\t\tvar cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\t\tvar pointsMaterial = this.cache.get(cacheKey);\n\n\t\t\t\tif (!pointsMaterial) {\n\n\t\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\t\tMaterial.prototype.copy.call(pointsMaterial, material);\n\t\t\t\t\tpointsMaterial.color.copy(material.color);\n\t\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\t\tthis.cache.add(cacheKey, pointsMaterial);\n\n\t\t\t\t}\n\n\t\t\t\tmaterial = pointsMaterial;\n\n\t\t\t} else if (mesh.isLine) {\n\n\t\t\t\tvar cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\t\tvar lineMaterial = this.cache.get(cacheKey);\n\n\t\t\t\tif (!lineMaterial) {\n\n\t\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\t\tMaterial.prototype.copy.call(lineMaterial, material);\n\t\t\t\t\tlineMaterial.color.copy(material.color);\n\n\t\t\t\t\tthis.cache.add(cacheKey, lineMaterial);\n\n\t\t\t\t}\n\n\t\t\t\tmaterial = lineMaterial;\n\n\t\t\t}\n\n\t\t\t// Clone the material if it will be modified\n\t\t\tif (useVertexTangents || useVertexColors || useFlatShading || useSkinning || useMorphTargets) {\n\n\t\t\t\tvar cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\t\tif (material.isGLTFSpecularGlossinessMaterial) cacheKey += 'specular-glossiness:';\n\t\t\t\tif (useSkinning) cacheKey += 'skinning:';\n\t\t\t\tif (useVertexTangents) cacheKey += 'vertex-tangents:';\n\t\t\t\tif (useVertexColors) cacheKey += 'vertex-colors:';\n\t\t\t\tif (useFlatShading) cacheKey += 'flat-shading:';\n\t\t\t\tif (useMorphTargets) cacheKey += 'morph-targets:';\n\t\t\t\tif (useMorphNormals) cacheKey += 'morph-normals:';\n\n\t\t\t\tvar cachedMaterial = this.cache.get(cacheKey);\n\n\t\t\t\tif (!cachedMaterial) {\n\n\t\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\t\tif (useSkinning) cachedMaterial.skinning = true;\n\t\t\t\t\tif (useVertexTangents) cachedMaterial.vertexTangents = true;\n\t\t\t\t\tif (useVertexColors) cachedMaterial.vertexColors = true;\n\t\t\t\t\tif (useFlatShading) cachedMaterial.flatShading = true;\n\t\t\t\t\tif (useMorphTargets) cachedMaterial.morphTargets = true;\n\t\t\t\t\tif (useMorphNormals) cachedMaterial.morphNormals = true;\n\n\t\t\t\t\tthis.cache.add(cacheKey, cachedMaterial);\n\n\t\t\t\t}\n\n\t\t\t\tmaterial = cachedMaterial;\n\n\t\t\t}\n\n\t\t\t// workarounds for mesh and geometry\n\n\t\t\tif (material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined) {\n\n\t\t\t\tgeometry.setAttribute('uv2', new BufferAttribute(geometry.attributes.uv.array, 2));\n\n\t\t\t}\n\n\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\tif (material.normalScale && !useVertexTangents) {\n\n\t\t\t\tmaterial.normalScale.y = - material.normalScale.y;\n\n\t\t\t}\n\n\t\t\tif (material.clearcoatNormalScale && !useVertexTangents) {\n\n\t\t\t\tmaterial.clearcoatNormalScale.y = - material.clearcoatNormalScale.y;\n\n\t\t\t}\n\n\t\t\tmesh.material = material;\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t\t * @param {number} materialIndex\n\t\t * @return {Promise<Material>}\n\t\t */\n\t\tGLTFParser.prototype.loadMaterial = function (materialIndex) {\n\n\t\t\tvar parser = this;\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar materialDef = json.materials[materialIndex];\n\n\t\t\tvar materialType;\n\t\t\tvar materialParams = {};\n\t\t\tvar materialExtensions = materialDef.extensions || {};\n\n\t\t\tvar pending = [];\n\n\t\t\tif (materialExtensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {\n\n\t\t\t\tvar sgExtension = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];\n\t\t\t\tif (!sgExtension) {\n\t\t\t\t\tsgExtension = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\textensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS] = sgExtension;\n\t\t\t\t}\n\n\t\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\t\tpending.push(sgExtension.extendParams(materialParams, materialDef, parser));\n\n\t\t\t} else if (materialExtensions[EXTENSIONS.KHR_MATERIALS_UNLIT]) {\n\n\t\t\t\tvar kmuExtension = extensions[EXTENSIONS.KHR_MATERIALS_UNLIT];\n\t\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\t\tpending.push(kmuExtension.extendParams(materialParams, materialDef, parser));\n\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tvar shaderMaterialParams;\n\t\t\t\tif (materialExtensions[EXTENSIONS.KHR_TECHNIQUES_WEBGL]) {//Use ShaderMaterial\n\t\t\t\t\tshaderMaterialParams = {};\n\t\t\t\t\tvar ktwExtension = extensions[EXTENSIONS.KHR_TECHNIQUES_WEBGL];\n\n\t\t\t\t\t// materialType = ktwExtension.getMaterialType();\n\t\t\t\t\tpending.push(ktwExtension.extendParams(shaderMaterialParams, materialDef, parser));\n\n\t\t\t\t}\n\n\t\t\t\t// Specification:\n\t\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\t\tmaterialType = MeshStandardMaterial;\n\n\t\t\t\tvar metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\t\tmaterialParams.color = new Color(1.0, 1.0, 1.0);\n\t\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\t\tif (Array.isArray(metallicRoughness.baseColorFactor)) {\n\n\t\t\t\t\tvar array = metallicRoughness.baseColorFactor;\n\n\t\t\t\t\tmaterialParams.color.fromArray(array);\n\t\t\t\t\tmaterialParams.opacity = array[3];\n\n\t\t\t\t}\n\n\t\t\t\tif (metallicRoughness.baseColorTexture !== undefined) {\n\n\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'map', metallicRoughness.baseColorTexture));\n\n\t\t\t\t}\n\n\t\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\t\tif (metallicRoughness.metallicRoughnessTexture !== undefined) {\n\n\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture));\n\t\t\t\t\tpending.push(parser.assignTexture(materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture));\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (materialDef.doubleSided === true) {\n\n\t\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t\t}\n\n\t\t\tvar alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\t\tif (alphaMode === ALPHA_MODES.BLEND) {\n\n\t\t\t\tmaterialParams.transparent = true;\n\n\t\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\t\tmaterialParams.depthWrite = false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterialParams.transparent = false;\n\n\t\t\t\tif (alphaMode === ALPHA_MODES.MASK) {\n\n\t\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial) {\n\n\t\t\t\tpending.push(parser.assignTexture(materialParams, 'normalMap', materialDef.normalTexture));\n\n\t\t\t\tmaterialParams.normalScale = new Vector2(1, 1);\n\n\t\t\t\tif (materialDef.normalTexture.scale !== undefined) {\n\n\t\t\t\t\tmaterialParams.normalScale.set(materialDef.normalTexture.scale, materialDef.normalTexture.scale);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial) {\n\n\t\t\t\tpending.push(parser.assignTexture(materialParams, 'aoMap', materialDef.occlusionTexture));\n\n\t\t\t\tif (materialDef.occlusionTexture.strength !== undefined) {\n\n\t\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial) {\n\n\t\t\t\tmaterialParams.emissive = new Color().fromArray(materialDef.emissiveFactor);\n\n\t\t\t}\n\n\t\t\tif (materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial) {\n\n\t\t\t\tpending.push(parser.assignTexture(materialParams, 'emissiveMap', materialDef.emissiveTexture));\n\n\t\t\t}\n\n\t\t\tif (materialExtensions[EXTENSIONS.KHR_MATERIALS_CLEARCOAT]) {\n\n\t\t\t\tvar clearcoatExtension = extensions[EXTENSIONS.KHR_MATERIALS_CLEARCOAT];\n\t\t\t\tmaterialType = clearcoatExtension.getMaterialType();\n\t\t\t\tpending.push(clearcoatExtension.extendParams(materialParams, { extensions: materialExtensions }, parser));\n\n\t\t\t}\n\n\t\t\treturn Promise.all(pending).then(function () {\n\n\t\t\t\tvar material;\n\n\t\t\t\tif (materialType === GLTFMeshStandardSGMaterial) {\n\n\t\t\t\t\tmaterial = extensions[EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(materialParams);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (shaderMaterialParams) {\n\t\t\t\t\t\tvar u_diffuse = shaderMaterialParams.uniforms.u_diffuse\n\t\t\t\t\t\tif (u_diffuse) {\n\n\t\t\t\t\t\t\tif (u_diffuse.value.isTexture) {\n\t\t\t\t\t\t\t\tmaterialParams.map = u_diffuse.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse materialParams.color = u_diffuse.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar u_emission = shaderMaterialParams.uniforms.u_emission\n\t\t\t\t\t\tif (u_emission) {\n\n\t\t\t\t\t\t\tif (u_emission.value.isTexture) {\n\t\t\t\t\t\t\t\tmaterialParams.emissiveMap = u_emission.value;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse materialParams.emissive = u_emission.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar u_shininess = shaderMaterialParams.uniforms.u_shininess\n\t\t\t\t\t\tif (u_shininess) {\n\t\t\t\t\t\t\tmaterialParams.shininess = u_shininess.value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tmaterial = new materialType(materialParams);\n\n\t\t\t\t}\n\n\t\t\t\tif (materialDef.name) material.name = materialDef.name;\n\n\t\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\t\tif (material.map) material.map.encoding = sRGBEncoding;\n\t\t\t\tif (material.emissiveMap) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\t\tassignExtrasToUserData(material, materialDef);\n\n\t\t\t\tif (materialDef.extensions) addUnknownExtensionsToUserData(extensions, material, materialDef);\n\n\t\t\t\treturn material;\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * @param {BufferGeometry} geometry\n\t\t * @param {GLTF.Primitive} primitiveDef\n\t\t * @param {GLTFParser} parser\n\t\t */\n\t\tfunction computeBounds(geometry, primitiveDef, parser) {\n\n\t\t\tvar attributes = primitiveDef.attributes;\n\n\t\t\tvar box = new Box3();\n\n\t\t\tif (attributes.POSITION !== undefined) {\n\n\t\t\t\tvar accessor = parser.json.accessors[attributes.POSITION];\n\n\t\t\t\tvar min = accessor.min;\n\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif (min !== undefined && max !== undefined) {\n\n\t\t\t\t\tbox.set(\n\t\t\t\t\t\tnew Vector3(min[0], min[1], min[2]),\n\t\t\t\t\t\tnew Vector3(max[0], max[1], max[2]));\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Missing min/max properties for accessor POSITION.');\n\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar targets = primitiveDef.targets;\n\n\t\t\tif (targets !== undefined) {\n\n\t\t\t\tvar maxDisplacement = new Vector3();\n\t\t\t\tvar vector = new Vector3();\n\n\t\t\t\tfor (var i = 0, il = targets.length; i < il; i++) {\n\n\t\t\t\t\tvar target = targets[i];\n\n\t\t\t\t\tif (target.POSITION !== undefined) {\n\n\t\t\t\t\t\tvar accessor = parser.json.accessors[target.POSITION];\n\t\t\t\t\t\tvar min = accessor.min;\n\t\t\t\t\t\tvar max = accessor.max;\n\n\t\t\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\t\t\tif (min !== undefined && max !== undefined) {\n\n\t\t\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\t\t\tvector.setX(Math.max(Math.abs(min[0]), Math.abs(max[0])));\n\t\t\t\t\t\t\tvector.setY(Math.max(Math.abs(min[1]), Math.abs(max[1])));\n\t\t\t\t\t\t\tvector.setZ(Math.max(Math.abs(min[2]), Math.abs(max[2])));\n\n\t\t\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\t\t\tmaxDisplacement.max(vector);\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Missing min/max properties for accessor POSITION.');\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\t\t\tbox.expandByVector(maxDisplacement);\n\n\t\t\t}\n\n\t\t\tgeometry.boundingBox = box;\n\n\t\t\tvar sphere = new Sphere();\n\n\t\t\tbox.getCenter(sphere.center);\n\t\t\tsphere.radius = box.min.distanceTo(box.max) / 2;\n\n\t\t\tgeometry.boundingSphere = sphere;\n\n\t\t}\n\n\t\t/**\n\t\t * @param {BufferGeometry} geometry\n\t\t * @param {GLTF.Primitive} primitiveDef\n\t\t * @param {GLTFParser} parser\n\t\t * @return {Promise<BufferGeometry>}\n\t\t */\n\t\tfunction addPrimitiveAttributes(geometry, primitiveDef, parser) {\n\n\t\t\tvar attributes = primitiveDef.attributes;\n\n\t\t\tvar pending = [];\n\n\t\t\tfunction assignAttributeAccessor(accessorIndex, attributeName) {\n\n\t\t\t\treturn parser.getDependency('accessor', accessorIndex)\n\t\t\t\t\t.then(function (accessor) {\n\n\t\t\t\t\t\tgeometry.setAttribute(attributeName, accessor);\n\n\t\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tfor (var gltfAttributeName in attributes) {\n\n\t\t\t\tvar threeAttributeName = ATTRIBUTES[gltfAttributeName] || gltfAttributeName.toLowerCase();\n\n\t\t\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\t\t\tif (threeAttributeName in geometry.attributes) continue;\n\n\t\t\t\tpending.push(assignAttributeAccessor(attributes[gltfAttributeName], threeAttributeName));\n\n\t\t\t}\n\n\t\t\tif (primitiveDef.indices !== undefined && !geometry.index) {\n\n\t\t\t\tvar accessor = parser.getDependency('accessor', primitiveDef.indices).then(function (accessor) {\n\n\t\t\t\t\tgeometry.setIndex(accessor);\n\n\t\t\t\t});\n\n\t\t\t\tpending.push(accessor);\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData(geometry, primitiveDef);\n\n\t\t\tcomputeBounds(geometry, primitiveDef, parser);\n\n\t\t\treturn Promise.all(pending).then(function () {\n\n\t\t\t\treturn primitiveDef.targets !== undefined\n\t\t\t\t\t? addMorphTargets(geometry, primitiveDef.targets, parser)\n\t\t\t\t\t: geometry;\n\n\t\t\t});\n\n\t\t}\n\n\t\t/**\n\t\t * @param {BufferGeometry} geometry\n\t\t * @param {Number} drawMode\n\t\t * @return {BufferGeometry}\n\t\t */\n\t\tfunction toTrianglesDrawMode(geometry, drawMode) {\n\n\t\t\tvar index = geometry.getIndex();\n\n\t\t\t// generate index if not present\n\n\t\t\tif (index === null) {\n\n\t\t\t\tvar indices = [];\n\n\t\t\t\tvar position = geometry.getAttribute('position');\n\n\t\t\t\tif (position !== undefined) {\n\n\t\t\t\t\tfor (var i = 0; i < position.count; i++) {\n\n\t\t\t\t\t\tindices.push(i);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tgeometry.setIndex(indices);\n\t\t\t\t\tindex = geometry.getIndex();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error('THREE._GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.');\n\t\t\t\t\treturn geometry;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tvar numberOfTriangles = index.count - 2;\n\t\t\tvar newIndices = [];\n\n\t\t\tif (drawMode === TriangleFanDrawMode) {\n\n\t\t\t\t// gl.TRIANGLE_FAN\n\n\t\t\t\tfor (var i = 1; i <= numberOfTriangles; i++) {\n\n\t\t\t\t\tnewIndices.push(index.getX(0));\n\t\t\t\t\tnewIndices.push(index.getX(i));\n\t\t\t\t\tnewIndices.push(index.getX(i + 1));\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// gl.TRIANGLE_STRIP\n\n\t\t\t\tfor (var i = 0; i < numberOfTriangles; i++) {\n\n\t\t\t\t\tif (i % 2 === 0) {\n\n\t\t\t\t\t\tnewIndices.push(index.getX(i));\n\t\t\t\t\t\tnewIndices.push(index.getX(i + 1));\n\t\t\t\t\t\tnewIndices.push(index.getX(i + 2));\n\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tnewIndices.push(index.getX(i + 2));\n\t\t\t\t\t\tnewIndices.push(index.getX(i + 1));\n\t\t\t\t\t\tnewIndices.push(index.getX(i));\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ((newIndices.length / 3) !== numberOfTriangles) {\n\n\t\t\t\tconsole.error('THREE._GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.');\n\n\t\t\t}\n\n\t\t\t// build final geometry\n\n\t\t\tvar newGeometry = geometry.clone();\n\t\t\tnewGeometry.setIndex(newIndices);\n\n\t\t\treturn newGeometry;\n\n\t\t}\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t\t *\n\t\t * Creates BufferGeometries from primitives.\n\t\t *\n\t\t * @param {Array<GLTF.Primitive>} primitives\n\t\t * @return {Promise<Array<BufferGeometry>>}\n\t\t */\n\t\tGLTFParser.prototype.loadGeometries = function (primitives) {\n\n\t\t\tvar parser = this;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar cache = this.primitiveCache;\n\n\t\t\tfunction createDracoPrimitive(primitive) {\n\n\t\t\t\treturn extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]\n\t\t\t\t\t.decodePrimitive(primitive, parser)\n\t\t\t\t\t.then(function (geometry) {\n\n\t\t\t\t\t\treturn addPrimitiveAttributes(geometry, primitive, parser);\n\n\t\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tvar pending = [];\n\n\t\t\tfor (var i = 0, il = primitives.length; i < il; i++) {\n\n\t\t\t\tvar primitive = primitives[i];\n\t\t\t\tvar cacheKey = createPrimitiveKey(primitive);\n\n\t\t\t\t// See if we've already created this geometry\n\t\t\t\tvar cached = cache[cacheKey];\n\n\t\t\t\tif (cached) {\n\n\t\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\t\tpending.push(cached.promise);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar geometryPromise;\n\n\t\t\t\t\tif (primitive.extensions && primitive.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]) {\n\n\t\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\t\tgeometryPromise = createDracoPrimitive(primitive);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\t\tgeometryPromise = addPrimitiveAttributes(new BufferGeometry(), primitive, parser);\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Cache this geometry\n\t\t\t\t\tcache[cacheKey] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\t\tpending.push(geometryPromise);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all(pending);\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t\t * @param {number} meshIndex\n\t\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t\t */\n\t\tGLTFParser.prototype.loadMesh = function (meshIndex) {\n\n\t\t\tvar parser = this;\n\t\t\tvar json = this.json;\n\n\t\t\tvar meshDef = json.meshes[meshIndex];\n\t\t\tvar primitives = meshDef.primitives;\n\n\t\t\tvar pending = [];\n\n\t\t\tfor (var i = 0, il = primitives.length; i < il; i++) {\n\n\t\t\t\tvar material = primitives[i].material === undefined\n\t\t\t\t\t? createDefaultMaterial(this.cache)\n\t\t\t\t\t: this.getDependency('material', primitives[i].material);\n\n\t\t\t\tpending.push(material);\n\n\t\t\t}\n\n\t\t\tpending.push(parser.loadGeometries(primitives));\n\n\t\t\treturn Promise.all(pending).then(function (results) {\n\n\n\t\t\t\tvar materials = results.slice(0, results.length - 1);\n\t\t\t\tvar geometries = results[results.length - 1];\n\n\t\t\t\tvar meshes = [];\n\n\t\t\t\tfor (var i = 0, il = geometries.length; i < il; i++) {\n\n\t\t\t\t\tvar geometry = geometries[i];\n\t\t\t\t\tvar primitive = primitives[i];\n\n\t\t\t\t\t// 1. create Mesh\n\n\t\t\t\t\tvar mesh;\n\n\t\t\t\t\tvar material = materials[i];\n\n\t\t\t\t\tif (primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined) {\n\n\t\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See .markDefs()\n\t\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t\t? new SkinnedMesh(geometry, material)\n\t\t\t\t\t\t\t: new Mesh(geometry, material);\n\n\t\t\t\t\t\tif (mesh.isSkinnedMesh === true && !mesh.geometry.attributes.skinWeight.normalized) {\n\n\t\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP) {\n\n\t\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleStripDrawMode);\n\n\t\t\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN) {\n\n\t\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode(mesh.geometry, TriangleFanDrawMode);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.LINES) {\n\n\t\t\t\t\t\tmesh = new LineSegments(geometry, material);\n\n\t\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.LINE_STRIP) {\n\n\t\t\t\t\t\tmesh = new Line(geometry, material);\n\n\t\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.LINE_LOOP) {\n\n\t\t\t\t\t\tmesh = new LineLoop(geometry, material);\n\n\t\t\t\t\t} else if (primitive.mode === WEBGL_CONSTANTS.POINTS) {\n\n\t\t\t\t\t\tmesh = new Points(geometry, material);\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthrow new Error('THREE._GLTFLoader: Primitive mode unsupported: ' + primitive.mode);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Object.keys(mesh.geometry.morphAttributes).length > 0) {\n\n\t\t\t\t\t\tupdateMorphTargets(mesh, meshDef);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmesh.name = meshDef.name || ('mesh_' + meshIndex);\n\n\t\t\t\t\tif (geometries.length > 1) mesh.name += '_' + i;\n\n\t\t\t\t\tassignExtrasToUserData(mesh, meshDef);\n\n\t\t\t\t\tparser.assignFinalMaterial(mesh);\n\n\t\t\t\t\tmeshes.push(mesh);\n\n\t\t\t\t}\n\n\t\t\t\tif (meshes.length === 1) {\n\n\t\t\t\t\treturn meshes[0];\n\n\t\t\t\t}\n\n\t\t\t\tvar group = new Group();\n\n\t\t\t\tfor (var i = 0, il = meshes.length; i < il; i++) {\n\n\t\t\t\t\tgroup.add(meshes[i]);\n\n\t\t\t\t}\n\n\t\t\t\treturn group;\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t\t * @param {number} cameraIndex\n\t\t * @return {Promise<THREE.Camera>}\n\t\t */\n\t\tGLTFParser.prototype.loadCamera = function (cameraIndex) {\n\n\t\t\tvar camera;\n\t\t\tvar cameraDef = this.json.cameras[cameraIndex];\n\t\t\tvar params = cameraDef[cameraDef.type];\n\n\t\t\tif (!params) {\n\n\t\t\t\tconsole.warn('THREE._GLTFLoader: Missing camera parameters.');\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif (cameraDef.type === 'perspective') {\n\n\t\t\t\tcamera = new PerspectiveCamera(_Math.radToDeg(params.yfov), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6);\n\n\t\t\t} else if (cameraDef.type === 'orthographic') {\n\n\t\t\t\tcamera = new OrthographicCamera(params.xmag / - 2, params.xmag / 2, params.ymag / 2, params.ymag / - 2, params.znear, params.zfar);\n\n\t\t\t}\n\n\t\t\tif (cameraDef.name) camera.name = cameraDef.name;\n\n\t\t\tassignExtrasToUserData(camera, cameraDef);\n\n\t\t\treturn Promise.resolve(camera);\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t\t * @param {number} skinIndex\n\t\t * @return {Promise<Object>}\n\t\t */\n\t\tGLTFParser.prototype.loadSkin = function (skinIndex) {\n\n\t\t\tvar skinDef = this.json.skins[skinIndex];\n\n\t\t\tvar skinEntry = { joints: skinDef.joints };\n\n\t\t\tif (skinDef.inverseBindMatrices === undefined) {\n\n\t\t\t\treturn Promise.resolve(skinEntry);\n\n\t\t\t}\n\n\t\t\treturn this.getDependency('accessor', skinDef.inverseBindMatrices).then(function (accessor) {\n\n\t\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\t\treturn skinEntry;\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t\t * @param {number} animationIndex\n\t\t * @return {Promise<AnimationClip>}\n\t\t */\n\t\tGLTFParser.prototype.loadAnimation = function (animationIndex) {\n\n\t\t\tvar json = this.json;\n\n\t\t\tvar animationDef = json.animations[animationIndex];\n\n\t\t\tvar pendingNodes = [];\n\t\t\tvar pendingInputAccessors = [];\n\t\t\tvar pendingOutputAccessors = [];\n\t\t\tvar pendingSamplers = [];\n\t\t\tvar pendingTargets = [];\n\n\t\t\tfor (var i = 0, il = animationDef.channels.length; i < il; i++) {\n\n\t\t\t\tvar channel = animationDef.channels[i];\n\t\t\t\tvar sampler = animationDef.samplers[channel.sampler];\n\t\t\t\tvar target = channel.target;\n\t\t\t\tvar name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\t\tvar input = animationDef.parameters !== undefined ? animationDef.parameters[sampler.input] : sampler.input;\n\t\t\t\tvar output = animationDef.parameters !== undefined ? animationDef.parameters[sampler.output] : sampler.output;\n\n\t\t\t\tpendingNodes.push(this.getDependency('node', name));\n\t\t\t\tpendingInputAccessors.push(this.getDependency('accessor', input));\n\t\t\t\tpendingOutputAccessors.push(this.getDependency('accessor', output));\n\t\t\t\tpendingSamplers.push(sampler);\n\t\t\t\tpendingTargets.push(target);\n\n\t\t\t}\n\n\t\t\treturn Promise.all([\n\n\t\t\t\tPromise.all(pendingNodes),\n\t\t\t\tPromise.all(pendingInputAccessors),\n\t\t\t\tPromise.all(pendingOutputAccessors),\n\t\t\t\tPromise.all(pendingSamplers),\n\t\t\t\tPromise.all(pendingTargets)\n\n\t\t\t]).then(function (dependencies) {\n\n\t\t\t\tvar nodes = dependencies[0];\n\t\t\t\tvar inputAccessors = dependencies[1];\n\t\t\t\tvar outputAccessors = dependencies[2];\n\t\t\t\tvar samplers = dependencies[3];\n\t\t\t\tvar targets = dependencies[4];\n\n\t\t\t\tvar tracks = [];\n\n\t\t\t\tfor (var i = 0, il = nodes.length; i < il; i++) {\n\n\t\t\t\t\tvar node = nodes[i];\n\t\t\t\t\tvar inputAccessor = inputAccessors[i];\n\t\t\t\t\tvar outputAccessor = outputAccessors[i];\n\t\t\t\t\tvar sampler = samplers[i];\n\t\t\t\t\tvar target = targets[i];\n\n\t\t\t\t\tif (node === undefined) continue;\n\n\t\t\t\t\tnode.updateMatrix();\n\t\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\t\tvar TypedKeyframeTrack;\n\n\t\t\t\t\tswitch (PATH_PROPERTIES[target.path]) {\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\t\tvar interpolation = sampler.interpolation !== undefined ? INTERPOLATION[sampler.interpolation] : InterpolateLinear;\n\n\t\t\t\t\tvar targetNames = [];\n\n\t\t\t\t\tif (PATH_PROPERTIES[target.path] === PATH_PROPERTIES.weights) {\n\n\t\t\t\t\t\t// Node may be a Group (glTF mesh with several primitives) or a Mesh.\n\t\t\t\t\t\tnode.traverse(function (object) {\n\n\t\t\t\t\t\t\tif (object.isMesh === true && object.morphTargetInfluences) {\n\n\t\t\t\t\t\t\t\ttargetNames.push(object.name ? object.name : object.uuid);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttargetNames.push(targetName);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar outputArray = outputAccessor.array;\n\n\t\t\t\t\tif (outputAccessor.normalized) {\n\n\t\t\t\t\t\tvar scale;\n\n\t\t\t\t\t\tif (outputArray.constructor === Int8Array) {\n\n\t\t\t\t\t\t\tscale = 1 / 127;\n\n\t\t\t\t\t\t} else if (outputArray.constructor === Uint8Array) {\n\n\t\t\t\t\t\t\tscale = 1 / 255;\n\n\t\t\t\t\t\t} else if (outputArray.constructor == Int16Array) {\n\n\t\t\t\t\t\t\tscale = 1 / 32767;\n\n\t\t\t\t\t\t} else if (outputArray.constructor === Uint16Array) {\n\n\t\t\t\t\t\t\tscale = 1 / 65535;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tthrow new Error('THREE._GLTFLoader: Unsupported output accessor component type.');\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar scaled = new Float32Array(outputArray.length);\n\n\t\t\t\t\t\tfor (var j = 0, jl = outputArray.length; j < jl; j++) {\n\n\t\t\t\t\t\t\tscaled[j] = outputArray[j] * scale;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var j = 0, jl = targetNames.length; j < jl; j++) {\n\n\t\t\t\t\t\tvar track = new TypedKeyframeTrack(\n\t\t\t\t\t\t\ttargetNames[j] + '.' + PATH_PROPERTIES[target.path],\n\t\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\t\tinterpolation\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\t\tif (sampler.interpolation === 'CUBICSPLINE') {\n\n\t\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline(result) {\n\n\t\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\t\treturn new GLTFCubicSplineInterpolant(this.times, this.values, this.getValueSize() / 3, result);\n\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttracks.push(track);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\t\treturn new AnimationClip(name, undefined, tracks);\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t\t * @param {number} nodeIndex\n\t\t * @return {Promise<Object3D>}\n\t\t */\n\t\tGLTFParser.prototype.loadNode = function (nodeIndex) {\n\n\t\t\tvar json = this.json;\n\t\t\tvar extensions = this.extensions;\n\t\t\tvar parser = this;\n\n\t\t\tvar meshReferences = json.meshReferences;\n\t\t\tvar meshUses = json.meshUses;\n\n\t\t\tvar nodeDef = json.nodes[nodeIndex];\n\n\t\t\treturn (function () {\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tif (nodeDef.mesh !== undefined) {\n\n\t\t\t\t\tpending.push(parser.getDependency('mesh', nodeDef.mesh).then(function (mesh) {\n\n\t\t\t\t\t\tvar node;\n\n\t\t\t\t\t\tif (meshReferences[nodeDef.mesh] > 1) {\n\n\t\t\t\t\t\t\tvar instanceNum = meshUses[nodeDef.mesh]++;\n\n\t\t\t\t\t\t\tnode = mesh.clone();\n\t\t\t\t\t\t\tnode.name += '_instance_' + instanceNum;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tnode = mesh;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\t\t\t\tif (nodeDef.weights !== undefined) {\n\n\t\t\t\t\t\t\tnode.traverse(function (o) {\n\n\t\t\t\t\t\t\t\tif (!o.isMesh) return;\n\n\t\t\t\t\t\t\t\tfor (var i = 0, il = nodeDef.weights.length; i < il; i++) {\n\n\t\t\t\t\t\t\t\t\to.morphTargetInfluences[i] = nodeDef.weights[i];\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn node;\n\n\t\t\t\t\t}));\n\n\t\t\t\t}\n\n\t\t\t\tif (nodeDef.camera !== undefined) {\n\n\t\t\t\t\tpending.push(parser.getDependency('camera', nodeDef.camera));\n\n\t\t\t\t}\n\n\t\t\t\tif (nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL]\n\t\t\t\t\t&& nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light !== undefined) {\n\n\t\t\t\t\tpending.push(parser.getDependency('light', nodeDef.extensions[EXTENSIONS.KHR_LIGHTS_PUNCTUAL].light));\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all(pending);\n\n\t\t\t}()).then(function (objects) {\n\n\t\t\t\tvar node;\n\n\t\t\t\t// .isBone isn't in glTF spec. See .markDefs\n\t\t\t\tif (nodeDef.isBone === true) {\n\n\t\t\t\t\tnode = new Bone();\n\n\t\t\t\t} else if (objects.length > 1) {\n\n\t\t\t\t\tnode = new Group();\n\n\t\t\t\t} else if (objects.length === 1) {\n\n\t\t\t\t\tnode = objects[0];\n\n\t\t\t\t} else {\n\n\t\t\t\t\tnode = new Object3D();\n\n\t\t\t\t}\n\n\t\t\t\tif (node !== objects[0]) {\n\n\t\t\t\t\tfor (var i = 0, il = objects.length; i < il; i++) {\n\n\t\t\t\t\t\tnode.add(objects[i]);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif (nodeDef.name) {\n\n\t\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\t\tnode.name = PropertyBinding.sanitizeNodeName(nodeDef.name);\n\n\t\t\t\t}\n\n\t\t\t\tassignExtrasToUserData(node, nodeDef);\n\n\t\t\t\tif (nodeDef.extensions) addUnknownExtensionsToUserData(extensions, node, nodeDef);\n\n\t\t\t\tif (nodeDef.matrix !== undefined) {\n\n\t\t\t\t\tvar matrix = new Matrix4();\n\t\t\t\t\tmatrix.fromArray(nodeDef.matrix);\n\t\t\t\t\tnode.applyMatrix4(matrix);\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif (nodeDef.translation !== undefined) {\n\n\t\t\t\t\t\tnode.position.fromArray(nodeDef.translation);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (nodeDef.rotation !== undefined) {\n\n\t\t\t\t\t\tnode.quaternion.fromArray(nodeDef.rotation);\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (nodeDef.scale !== undefined) {\n\n\t\t\t\t\t\tnode.scale.fromArray(nodeDef.scale);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn node;\n\n\t\t\t});\n\n\t\t};\n\n\t\t/**\n\t\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t\t * @param {number} sceneIndex\n\t\t * @return {Promise<Group>}\n\t\t */\n\t\tGLTFParser.prototype.loadScene = function () {\n\n\t\t\t// scene node hierachy builder\n\n\t\t\tfunction buildNodeHierachy(nodeId, parentObject, json, parser) {\n\n\t\t\t\tvar nodeDef = json.nodes[nodeId];\n\n\t\t\t\treturn parser.getDependency('node', nodeId).then(function (node) {\n\n\t\t\t\t\tif (nodeDef.skin === undefined) return node;\n\n\t\t\t\t\t// build skeleton here as well\n\n\t\t\t\t\tvar skinEntry;\n\n\t\t\t\t\treturn parser.getDependency('skin', nodeDef.skin).then(function (skin) {\n\n\t\t\t\t\t\tskinEntry = skin;\n\n\t\t\t\t\t\tvar pendingJoints = [];\n\n\t\t\t\t\t\tfor (var i = 0, il = skinEntry.joints.length; i < il; i++) {\n\n\t\t\t\t\t\t\tpendingJoints.push(parser.getDependency('node', skinEntry.joints[i]));\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn Promise.all(pendingJoints);\n\n\t\t\t\t\t}).then(function (jointNodes) {\n\n\t\t\t\t\t\tnode.traverse(function (mesh) {\n\n\t\t\t\t\t\t\tif (!mesh.isMesh) return;\n\n\t\t\t\t\t\t\tvar bones = [];\n\t\t\t\t\t\t\tvar boneInverses = [];\n\n\t\t\t\t\t\t\tfor (var j = 0, jl = jointNodes.length; j < jl; j++) {\n\n\t\t\t\t\t\t\t\tvar jointNode = jointNodes[j];\n\n\t\t\t\t\t\t\t\tif (jointNode) {\n\n\t\t\t\t\t\t\t\t\tbones.push(jointNode);\n\n\t\t\t\t\t\t\t\t\tvar mat = new Matrix4();\n\n\t\t\t\t\t\t\t\t\tif (skinEntry.inverseBindMatrices !== undefined) {\n\n\t\t\t\t\t\t\t\t\t\tmat.fromArray(skinEntry.inverseBindMatrices.array, j * 16);\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tboneInverses.push(mat);\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\tconsole.warn('THREE._GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[j]);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmesh.bind(new Skeleton(bones, boneInverses), mesh.matrixWorld);\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn node;\n\n\t\t\t\t\t});\n\n\t\t\t\t}).then(function (node) {\n\n\t\t\t\t\t// build node hierachy\n\n\t\t\t\t\tparentObject.add(node);\n\n\t\t\t\t\tvar pending = [];\n\n\t\t\t\t\tif (nodeDef.children) {\n\n\t\t\t\t\t\tvar children = nodeDef.children;\n\n\t\t\t\t\t\tfor (var i = 0, il = children.length; i < il; i++) {\n\n\t\t\t\t\t\t\tvar child = children[i];\n\t\t\t\t\t\t\tpending.push(buildNodeHierachy(child, node, json, parser));\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Promise.all(pending);\n\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\treturn function loadScene(sceneIndex) {\n\n\t\t\t\tvar json = this.json;\n\t\t\t\tvar extensions = this.extensions;\n\t\t\t\tvar sceneDef = this.json.scenes[sceneIndex];\n\t\t\t\tvar parser = this;\n\n\t\t\t\t// Loader returns Group, not Scene.\n\t\t\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\t\t\tvar scene = new Group();\n\t\t\t\tif (sceneDef.name) scene.name = sceneDef.name;\n\n\t\t\t\tassignExtrasToUserData(scene, sceneDef);\n\n\t\t\t\tif (sceneDef.extensions) addUnknownExtensionsToUserData(extensions, scene, sceneDef);\n\n\t\t\t\tvar nodeIds = sceneDef.nodes || [];\n\n\t\t\t\tvar pending = [];\n\n\t\t\t\tfor (var i = 0, il = nodeIds.length; i < il; i++) {\n\n\t\t\t\t\tpending.push(buildNodeHierachy(nodeIds[i], scene, json, parser));\n\n\t\t\t\t}\n\n\t\t\t\treturn Promise.all(pending).then(function () {\n\n\t\t\t\t\treturn scene;\n\n\t\t\t\t});\n\n\t\t\t};\n\n\t\t}();\n\t}\n\n\treturn new _GLTFLoader(manager);\n\n};\n\nexport { GLTFLoader };\n",
    "/**\n * @author Nikos M. / https://github.com/foo123/\n */\n\nimport esExtends from  \"../../../../utils/Source/esExtends.js\";\n\n\n\n// https://github.com/mrdoob/three.js/issues/5552\n// http://en.wikipedia.org/wiki/RGBE_image_format\n\nvar _RGBELoader\nfunction RGBELoader(manager) {\n\n\tif (!_RGBELoader) {\n\t\tconst { DataTextureLoader,\n\t\t\tFloatType,\n\t\t\tHalfFloatType,\n\t\t\tLinearEncoding,\n\t\t\tLinearFilter,\n\t\t\tNearestFilter,\n\t\t\tRGBEEncoding,\n\t\t\tRGBEFormat,\n\t\t\tRGBFormat,\n\t\t\tUnsignedByteType } = THREE;\n\n\t\tvar _prototype_ = {\n\n\t\t\t// constructor: RGBELoader,\n\n\t\t\t// adapted from http://www.graphics.cornell.edu/~bjw/rgbe.html\n\n\t\t\tparse: function (buffer) {\n\n\t\t\t\tvar\n\t\t\t\t\t/* return codes for rgbe routines */\n\t\t\t\t\t//RGBE_RETURN_SUCCESS = 0,\n\t\t\t\t\tRGBE_RETURN_FAILURE = - 1,\n\n\t\t\t\t\t/* default error routine.  change this to change error handling */\n\t\t\t\t\trgbe_read_error = 1,\n\t\t\t\t\trgbe_write_error = 2,\n\t\t\t\t\trgbe_format_error = 3,\n\t\t\t\t\trgbe_memory_error = 4,\n\t\t\t\t\trgbe_error = function (rgbe_error_code, msg) {\n\n\t\t\t\t\t\tswitch (rgbe_error_code) {\n\n\t\t\t\t\t\t\tcase rgbe_read_error: console.error(\"RGBELoader Read Error: \" + (msg || ''));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase rgbe_write_error: console.error(\"RGBELoader Write Error: \" + (msg || ''));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tcase rgbe_format_error: console.error(\"RGBELoader Bad File Format: \" + (msg || ''));\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tcase rgbe_memory_error: console.error(\"RGBELoader: Error: \" + (msg || ''));\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn RGBE_RETURN_FAILURE;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t/* offsets to red, green, and blue components in a data (float) pixel */\n\t\t\t\t\t//RGBE_DATA_RED = 0,\n\t\t\t\t\t//RGBE_DATA_GREEN = 1,\n\t\t\t\t\t//RGBE_DATA_BLUE = 2,\n\n\t\t\t\t\t/* number of floats per pixel, use 4 since stored in rgba image format */\n\t\t\t\t\t//RGBE_DATA_SIZE = 4,\n\n\t\t\t\t\t/* flags indicating which fields in an rgbe_header_info are valid */\n\t\t\t\t\tRGBE_VALID_PROGRAMTYPE = 1,\n\t\t\t\t\tRGBE_VALID_FORMAT = 2,\n\t\t\t\t\tRGBE_VALID_DIMENSIONS = 4,\n\n\t\t\t\t\tNEWLINE = \"\\n\",\n\n\t\t\t\t\tfgets = function (buffer, lineLimit, consume) {\n\n\t\t\t\t\t\tlineLimit = !lineLimit ? 1024 : lineLimit;\n\t\t\t\t\t\tvar p = buffer.pos,\n\t\t\t\t\t\t\ti = - 1, len = 0, s = '', chunkSize = 128,\n\t\t\t\t\t\t\tchunk = String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)))\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\twhile ((0 > (i = chunk.indexOf(NEWLINE))) && (len < lineLimit) && (p < buffer.byteLength)) {\n\n\t\t\t\t\t\t\ts += chunk; len += chunk.length;\n\t\t\t\t\t\t\tp += chunkSize;\n\t\t\t\t\t\t\tchunk += String.fromCharCode.apply(null, new Uint16Array(buffer.subarray(p, p + chunkSize)));\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (- 1 < i) {\n\n\t\t\t\t\t\t\t/*for (i=l-1; i>=0; i--) {\n\t\t\t\t\t\t\t\tbyteCode = m.charCodeAt(i);\n\t\t\t\t\t\t\t\tif (byteCode > 0x7f && byteCode <= 0x7ff) byteLen++;\n\t\t\t\t\t\t\t\telse if (byteCode > 0x7ff && byteCode <= 0xffff) byteLen += 2;\n\t\t\t\t\t\t\t\tif (byteCode >= 0xDC00 && byteCode <= 0xDFFF) i--; //trail surrogate\n\t\t\t\t\t\t\t}*/\n\t\t\t\t\t\t\tif (false !== consume) buffer.pos += len + i + 1;\n\t\t\t\t\t\t\treturn s + chunk.slice(0, i);\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t},\n\n\t\t\t\t\t/* minimal header reading.  modify if you want to parse more information */\n\t\t\t\t\tRGBE_ReadHeader = function (buffer) {\n\n\t\t\t\t\t\tvar line, match,\n\n\t\t\t\t\t\t\t// regexes to parse header info fields\n\t\t\t\t\t\t\tmagic_token_re = /^#\\?(\\S+)$/,\n\t\t\t\t\t\t\tgamma_re = /^\\s*GAMMA\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\t\t\texposure_re = /^\\s*EXPOSURE\\s*=\\s*(\\d+(\\.\\d+)?)\\s*$/,\n\t\t\t\t\t\t\tformat_re = /^\\s*FORMAT=(\\S+)\\s*$/,\n\t\t\t\t\t\t\tdimensions_re = /^\\s*\\-Y\\s+(\\d+)\\s+\\+X\\s+(\\d+)\\s*$/,\n\n\t\t\t\t\t\t\t// RGBE format header struct\n\t\t\t\t\t\t\theader = {\n\n\t\t\t\t\t\t\t\tvalid: 0, /* indicate which fields are valid */\n\n\t\t\t\t\t\t\t\tstring: '', /* the actual header string */\n\n\t\t\t\t\t\t\t\tcomments: '', /* comments found in header */\n\n\t\t\t\t\t\t\t\tprogramtype: 'RGBE', /* listed at beginning of file to identify it after \"#?\". defaults to \"RGBE\" */\n\n\t\t\t\t\t\t\t\tformat: '', /* RGBE format, default 32-bit_rle_rgbe */\n\n\t\t\t\t\t\t\t\tgamma: 1.0, /* image has already been gamma corrected with given gamma. defaults to 1.0 (no correction) */\n\n\t\t\t\t\t\t\t\texposure: 1.0, /* a value of 1.0 in an image corresponds to <exposure> watts/steradian/m^2. defaults to 1.0 */\n\n\t\t\t\t\t\t\t\twidth: 0, height: 0 /* image dimensions, width/height */\n\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\tif (buffer.pos >= buffer.byteLength || !(line = fgets(buffer))) {\n\n\t\t\t\t\t\t\treturn rgbe_error(rgbe_read_error, \"no header found\");\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/* if you want to require the magic token then uncomment the next line */\n\t\t\t\t\t\tif (!(match = line.match(magic_token_re))) {\n\n\t\t\t\t\t\t\treturn rgbe_error(rgbe_format_error, \"bad initial token\");\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\theader.valid |= RGBE_VALID_PROGRAMTYPE;\n\t\t\t\t\t\theader.programtype = match[1];\n\t\t\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\t\t\twhile (true) {\n\n\t\t\t\t\t\t\tline = fgets(buffer);\n\t\t\t\t\t\t\tif (false === line) break;\n\t\t\t\t\t\t\theader.string += line + \"\\n\";\n\n\t\t\t\t\t\t\tif ('#' === line.charAt(0)) {\n\n\t\t\t\t\t\t\t\theader.comments += line + \"\\n\";\n\t\t\t\t\t\t\t\tcontinue; // comment line\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (match = line.match(gamma_re)) {\n\n\t\t\t\t\t\t\t\theader.gamma = parseFloat(match[1], 10);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (match = line.match(exposure_re)) {\n\n\t\t\t\t\t\t\t\theader.exposure = parseFloat(match[1], 10);\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (match = line.match(format_re)) {\n\n\t\t\t\t\t\t\t\theader.valid |= RGBE_VALID_FORMAT;\n\t\t\t\t\t\t\t\theader.format = match[1];//'32-bit_rle_rgbe';\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (match = line.match(dimensions_re)) {\n\n\t\t\t\t\t\t\t\theader.valid |= RGBE_VALID_DIMENSIONS;\n\t\t\t\t\t\t\t\theader.height = parseInt(match[1], 10);\n\t\t\t\t\t\t\t\theader.width = parseInt(match[2], 10);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ((header.valid & RGBE_VALID_FORMAT) && (header.valid & RGBE_VALID_DIMENSIONS)) break;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!(header.valid & RGBE_VALID_FORMAT)) {\n\n\t\t\t\t\t\t\treturn rgbe_error(rgbe_format_error, \"missing format specifier\");\n\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!(header.valid & RGBE_VALID_DIMENSIONS)) {\n\n\t\t\t\t\t\t\treturn rgbe_error(rgbe_format_error, \"missing image size specifier\");\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn header;\n\n\t\t\t\t\t},\n\n\t\t\t\t\tRGBE_ReadPixels_RLE = function (buffer, w, h) {\n\n\t\t\t\t\t\tvar data_rgba, offset, pos, count, byteValue,\n\t\t\t\t\t\t\tscanline_buffer, ptr, ptr_end, i, l, off, isEncodedRun,\n\t\t\t\t\t\t\tscanline_width = w, num_scanlines = h, rgbeStart\n\t\t\t\t\t\t\t;\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t// run length encoding is not allowed so read flat\n\t\t\t\t\t\t\t((scanline_width < 8) || (scanline_width > 0x7fff)) ||\n\t\t\t\t\t\t\t// this file is not run length encoded\n\t\t\t\t\t\t\t((2 !== buffer[0]) || (2 !== buffer[1]) || (buffer[2] & 0x80))\n\t\t\t\t\t\t) {\n\n\t\t\t\t\t\t\t// return the flat buffer\n\t\t\t\t\t\t\treturn new Uint8Array(buffer);\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (scanline_width !== ((buffer[2] << 8) | buffer[3])) {\n\n\t\t\t\t\t\t\treturn rgbe_error(rgbe_format_error, \"wrong scanline width\");\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata_rgba = new Uint8Array(4 * w * h);\n\n\t\t\t\t\t\tif (!data_rgba || !data_rgba.length) {\n\n\t\t\t\t\t\t\treturn rgbe_error(rgbe_memory_error, \"unable to allocate buffer space\");\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\toffset = 0; pos = 0; ptr_end = 4 * scanline_width;\n\t\t\t\t\t\trgbeStart = new Uint8Array(4);\n\t\t\t\t\t\tscanline_buffer = new Uint8Array(ptr_end);\n\n\t\t\t\t\t\t// read in each successive scanline\n\t\t\t\t\t\twhile ((num_scanlines > 0) && (pos < buffer.byteLength)) {\n\n\t\t\t\t\t\t\tif (pos + 4 > buffer.byteLength) {\n\n\t\t\t\t\t\t\t\treturn rgbe_error(rgbe_read_error);\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\trgbeStart[0] = buffer[pos++];\n\t\t\t\t\t\t\trgbeStart[1] = buffer[pos++];\n\t\t\t\t\t\t\trgbeStart[2] = buffer[pos++];\n\t\t\t\t\t\t\trgbeStart[3] = buffer[pos++];\n\n\t\t\t\t\t\t\tif ((2 != rgbeStart[0]) || (2 != rgbeStart[1]) || (((rgbeStart[2] << 8) | rgbeStart[3]) != scanline_width)) {\n\n\t\t\t\t\t\t\t\treturn rgbe_error(rgbe_format_error, \"bad rgbe scanline format\");\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// read each of the four channels for the scanline into the buffer\n\t\t\t\t\t\t\t// first red, then green, then blue, then exponent\n\t\t\t\t\t\t\tptr = 0;\n\t\t\t\t\t\t\twhile ((ptr < ptr_end) && (pos < buffer.byteLength)) {\n\n\t\t\t\t\t\t\t\tcount = buffer[pos++];\n\t\t\t\t\t\t\t\tisEncodedRun = count > 128;\n\t\t\t\t\t\t\t\tif (isEncodedRun) count -= 128;\n\n\t\t\t\t\t\t\t\tif ((0 === count) || (ptr + count > ptr_end)) {\n\n\t\t\t\t\t\t\t\t\treturn rgbe_error(rgbe_format_error, \"bad scanline data\");\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (isEncodedRun) {\n\n\t\t\t\t\t\t\t\t\t// a (encoded) run of the same value\n\t\t\t\t\t\t\t\t\tbyteValue = buffer[pos++];\n\t\t\t\t\t\t\t\t\tfor (i = 0; i < count; i++) {\n\n\t\t\t\t\t\t\t\t\t\tscanline_buffer[ptr++] = byteValue;\n\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t//ptr += count;\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// a literal-run\n\t\t\t\t\t\t\t\t\tscanline_buffer.set(buffer.subarray(pos, pos + count), ptr);\n\t\t\t\t\t\t\t\t\tptr += count; pos += count;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t// now convert data from buffer into rgba\n\t\t\t\t\t\t\t// first red, then green, then blue, then exponent (alpha)\n\t\t\t\t\t\t\tl = scanline_width; //scanline_buffer.byteLength;\n\t\t\t\t\t\t\tfor (i = 0; i < l; i++) {\n\n\t\t\t\t\t\t\t\toff = 0;\n\t\t\t\t\t\t\t\tdata_rgba[offset] = scanline_buffer[i + off];\n\t\t\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\t\t\tdata_rgba[offset + 1] = scanline_buffer[i + off];\n\t\t\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\t\t\tdata_rgba[offset + 2] = scanline_buffer[i + off];\n\t\t\t\t\t\t\t\toff += scanline_width; //1;\n\t\t\t\t\t\t\t\tdata_rgba[offset + 3] = scanline_buffer[i + off];\n\t\t\t\t\t\t\t\toffset += 4;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnum_scanlines--;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn data_rgba;\n\n\t\t\t\t\t};\n\n\t\t\t\tvar RGBEByteToRGBFloat = function (sourceArray, sourceOffset, destArray, destOffset) {\n\n\t\t\t\t\tvar e = sourceArray[sourceOffset + 3];\n\t\t\t\t\tvar scale = Math.pow(2.0, e - 128.0) / 255.0;\n\n\t\t\t\t\tdestArray[destOffset + 0] = sourceArray[sourceOffset + 0] * scale;\n\t\t\t\t\tdestArray[destOffset + 1] = sourceArray[sourceOffset + 1] * scale;\n\t\t\t\t\tdestArray[destOffset + 2] = sourceArray[sourceOffset + 2] * scale;\n\n\t\t\t\t};\n\n\t\t\t\tvar RGBEByteToRGBHalf = (function () {\n\n\t\t\t\t\t// Source: http://gamedev.stackexchange.com/questions/17326/conversion-of-a-number-from-single-precision-floating-point-representation-to-a/17410#17410\n\n\t\t\t\t\tvar floatView = new Float32Array(1);\n\t\t\t\t\tvar int32View = new Int32Array(floatView.buffer);\n\n\t\t\t\t\t/* This method is faster than the OpenEXR implementation (very often\n\t\t\t\t\t * used, eg. in Ogre), with the additional benefit of rounding, inspired\n\t\t\t\t\t * by James Tursa?s half-precision code. */\n\t\t\t\t\tfunction toHalf(val) {\n\n\t\t\t\t\t\tfloatView[0] = val;\n\t\t\t\t\t\tvar x = int32View[0];\n\n\t\t\t\t\t\tvar bits = (x >> 16) & 0x8000; /* Get the sign */\n\t\t\t\t\t\tvar m = (x >> 12) & 0x07ff; /* Keep one extra bit for rounding */\n\t\t\t\t\t\tvar e = (x >> 23) & 0xff; /* Using int is faster here */\n\n\t\t\t\t\t\t/* If zero, or denormal, or exponent underflows too much for a denormal\n\t\t\t\t\t\t * half, return signed zero. */\n\t\t\t\t\t\tif (e < 103) return bits;\n\n\t\t\t\t\t\t/* If NaN, return NaN. If Inf or exponent overflow, return Inf. */\n\t\t\t\t\t\tif (e > 142) {\n\n\t\t\t\t\t\t\tbits |= 0x7c00;\n\t\t\t\t\t\t\t/* If exponent was 0xff and one mantissa bit was set, it means NaN,\n\t\t\t\t\t\t\t\t\t * not Inf, so make sure we set one mantissa bit too. */\n\t\t\t\t\t\t\tbits |= ((e == 255) ? 0 : 1) && (x & 0x007fffff);\n\t\t\t\t\t\t\treturn bits;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t/* If exponent underflows but not too much, return a denormal */\n\t\t\t\t\t\tif (e < 113) {\n\n\t\t\t\t\t\t\tm |= 0x0800;\n\t\t\t\t\t\t\t/* Extra rounding may overflow and set mantissa to 0 and exponent\n\t\t\t\t\t\t\t * to 1, which is OK. */\n\t\t\t\t\t\t\tbits |= (m >> (114 - e)) + ((m >> (113 - e)) & 1);\n\t\t\t\t\t\t\treturn bits;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbits |= ((e - 112) << 10) | (m >> 1);\n\t\t\t\t\t\t/* Extra rounding. An overflow will set mantissa to 0 and increment\n\t\t\t\t\t\t * the exponent, which is OK. */\n\t\t\t\t\t\tbits += m & 1;\n\t\t\t\t\t\treturn bits;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn function (sourceArray, sourceOffset, destArray, destOffset) {\n\n\t\t\t\t\t\tvar e = sourceArray[sourceOffset + 3];\n\t\t\t\t\t\tvar scale = Math.pow(2.0, e - 128.0) / 255.0;\n\n\t\t\t\t\t\tdestArray[destOffset + 0] = toHalf(sourceArray[sourceOffset + 0] * scale);\n\t\t\t\t\t\tdestArray[destOffset + 1] = toHalf(sourceArray[sourceOffset + 1] * scale);\n\t\t\t\t\t\tdestArray[destOffset + 2] = toHalf(sourceArray[sourceOffset + 2] * scale);\n\n\t\t\t\t\t};\n\n\t\t\t\t})();\n\n\t\t\t\tvar byteArray = new Uint8Array(buffer);\n\t\t\t\tbyteArray.pos = 0;\n\t\t\t\tvar rgbe_header_info = RGBE_ReadHeader(byteArray);\n\n\t\t\t\tif (RGBE_RETURN_FAILURE !== rgbe_header_info) {\n\n\t\t\t\t\tvar w = rgbe_header_info.width,\n\t\t\t\t\t\th = rgbe_header_info.height,\n\t\t\t\t\t\timage_rgba_data = RGBE_ReadPixels_RLE(byteArray.subarray(byteArray.pos), w, h);\n\n\t\t\t\t\tif (RGBE_RETURN_FAILURE !== image_rgba_data) {\n\n\t\t\t\t\t\tswitch (this.type) {\n\n\t\t\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\t\t\tvar data = image_rgba_data;\n\t\t\t\t\t\t\t\tvar format = RGBEFormat; // handled as THREE.RGBAFormat in shaders\n\t\t\t\t\t\t\t\tvar type = UnsignedByteType;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\t\t\tvar numElements = (image_rgba_data.length / 4) * 3;\n\t\t\t\t\t\t\t\tvar floatArray = new Float32Array(numElements);\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < numElements; j++) {\n\n\t\t\t\t\t\t\t\t\tRGBEByteToRGBFloat(image_rgba_data, j * 4, floatArray, j * 3);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar data = floatArray;\n\t\t\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\t\t\tvar type = FloatType;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\t\t\tvar numElements = (image_rgba_data.length / 4) * 3;\n\t\t\t\t\t\t\t\tvar halfArray = new Uint16Array(numElements);\n\n\t\t\t\t\t\t\t\tfor (var j = 0; j < numElements; j++) {\n\n\t\t\t\t\t\t\t\t\tRGBEByteToRGBHalf(image_rgba_data, j * 4, halfArray, j * 3);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tvar data = halfArray;\n\t\t\t\t\t\t\t\tvar format = RGBFormat;\n\t\t\t\t\t\t\t\tvar type = HalfFloatType;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tconsole.error('THREE.RGBELoader: unsupported type: ', this.type);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\twidth: w, height: h,\n\t\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\t\theader: rgbe_header_info.string,\n\t\t\t\t\t\t\tgamma: rgbe_header_info.gamma,\n\t\t\t\t\t\t\texposure: rgbe_header_info.exposure,\n\t\t\t\t\t\t\tformat: format,\n\t\t\t\t\t\t\ttype: type\n\t\t\t\t\t\t};\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t},\n\n\t\t\tsetDataType: function (value) {\n\n\t\t\t\tthis.type = value;\n\t\t\t\treturn this;\n\n\t\t\t},\n\n\t\t\tload: function (url, onLoad, onProgress, onError) {\n\n\t\t\t\tfunction onLoadCallback(texture, texData) {\n\n\t\t\t\t\tswitch (texture.type) {\n\n\t\t\t\t\t\tcase UnsignedByteType:\n\n\t\t\t\t\t\t\ttexture.encoding = RGBEEncoding;\n\t\t\t\t\t\t\ttexture.minFilter = NearestFilter;\n\t\t\t\t\t\t\ttexture.magFilter = NearestFilter;\n\t\t\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase FloatType:\n\n\t\t\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase HalfFloatType:\n\n\t\t\t\t\t\t\ttexture.encoding = LinearEncoding;\n\t\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\t\t\t\t\t\t\ttexture.magFilter = LinearFilter;\n\t\t\t\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\t\t\t\ttexture.flipY = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (onLoad) onLoad(texture, texData);\n\n\t\t\t\t}\n\n\t\t\t\treturn DataTextureLoader.prototype.load.call(this, url, onLoadCallback, onProgress, onError);\n\n\t\t\t}\n\n\t\t}\n\n\t\t_RGBELoader = esExtends(DataTextureLoader, {\n\t\t\tesConstructor() {\n\t\t\t\tclass _esCtor extends DataTextureLoader {\n\t\t\t\t\tconstructor(manager) {\n\t\t\t\t\t\tsuper(manager)\n\t\t\t\t\t\tconstructor.call(this, manager)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _esCtor;\n\t\t\t},\n\t\t\tconstructor(manager) {\n\t\t\t\tthis.type = UnsignedByteType;\n\t\t\t},\n\t\t\tprototype: _prototype_\n\t\t})\n\n\t}\n\treturn new _RGBELoader(manager)\n}\n\nexport { RGBELoader };\n",
    "/**\n * @author Daosheng Mu / https://github.com/DaoshengMu/\n * @author mrdoob / http://mrdoob.com/\n * @author takahirox / https://github.com/takahirox/\n */\n\n// import {\nvar FileLoader,\n\tLoader,\n\tTexture\n// } from \"../../../build/three.module.js\";\n\nimport esExtends from  \"../../../../utils/Source/esExtends.js\";\n\n\nvar _TGALoader\nfunction TGALoader(manager) {\n\n\tif (!_TGALoader) {\n\t\tconst {\n\t\t\tFileLoader,\n\t\t\tLoader,\n\t\t\tTexture\n\t\t} = THREE;\n\n\n\t\tconst _TGALoaderPrototype_ = {\n\n\t\t\tload: function (url, onLoad, onProgress, onError) {\n\n\t\t\t\tvar scope = this;\n\n\t\t\t\tvar texture = new Texture();\n\n\t\t\t\tvar loader = new FileLoader(this.manager);\n\t\t\t\tloader.setResponseType('arraybuffer');\n\t\t\t\tloader.setPath(this.path);\n\n\t\t\t\tloader.load(url, function (buffer) {\n\n\t\t\t\t\ttexture.image = scope.parse(buffer);\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif (onLoad !== undefined) {\n\n\t\t\t\t\t\tonLoad(texture);\n\n\t\t\t\t\t}\n\n\t\t\t\t}, onProgress, onError);\n\n\t\t\t\treturn texture;\n\n\t\t\t},\n\n\t\t\tparse: function (buffer) {\n\n\t\t\t\t// reference from vthibault, https://github.com/vthibault/roBrowser/blob/master/src/Loaders/Targa.js\n\n\t\t\t\tfunction tgaCheckHeader(header) {\n\n\t\t\t\t\tswitch (header.image_type) {\n\n\t\t\t\t\t\t// check indexed type\n\n\t\t\t\t\t\tcase TGA_TYPE_INDEXED:\n\t\t\t\t\t\tcase TGA_TYPE_RLE_INDEXED:\n\t\t\t\t\t\t\tif (header.colormap_length > 256 || header.colormap_size !== 24 || header.colormap_type !== 1) {\n\n\t\t\t\t\t\t\t\tconsole.error('THREE.TGALoader: Invalid type colormap data for indexed type.');\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t// check colormap type\n\n\t\t\t\t\t\tcase TGA_TYPE_RGB:\n\t\t\t\t\t\tcase TGA_TYPE_GREY:\n\t\t\t\t\t\tcase TGA_TYPE_RLE_RGB:\n\t\t\t\t\t\tcase TGA_TYPE_RLE_GREY:\n\t\t\t\t\t\t\tif (header.colormap_type) {\n\n\t\t\t\t\t\t\t\tconsole.error('THREE.TGALoader: Invalid type colormap data for colormap type.');\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t// What the need of a file without data ?\n\n\t\t\t\t\t\tcase TGA_TYPE_NO_DATA:\n\t\t\t\t\t\t\tconsole.error('THREE.TGALoader: No data.');\n\n\t\t\t\t\t\t// Invalid type ?\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error('THREE.TGALoader: Invalid type \"%s\".', header.image_type);\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// check image width and height\n\n\t\t\t\t\tif (header.width <= 0 || header.height <= 0) {\n\n\t\t\t\t\t\tconsole.error('THREE.TGALoader: Invalid image size.');\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// check image pixel size\n\n\t\t\t\t\tif (header.pixel_size !== 8 && header.pixel_size !== 16 &&\n\t\t\t\t\t\theader.pixel_size !== 24 && header.pixel_size !== 32) {\n\n\t\t\t\t\t\tconsole.error('THREE.TGALoader: Invalid pixel size \"%s\".', header.pixel_size);\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse tga image buffer\n\n\t\t\t\tfunction tgaParse(use_rle, use_pal, header, offset, data) {\n\n\t\t\t\t\tvar pixel_data,\n\t\t\t\t\t\tpixel_size,\n\t\t\t\t\t\tpixel_total,\n\t\t\t\t\t\tpalettes;\n\n\t\t\t\t\tpixel_size = header.pixel_size >> 3;\n\t\t\t\t\tpixel_total = header.width * header.height * pixel_size;\n\n\t\t\t\t\t// read palettes\n\n\t\t\t\t\tif (use_pal) {\n\n\t\t\t\t\t\tpalettes = data.subarray(offset, offset += header.colormap_length * (header.colormap_size >> 3));\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// read RLE\n\n\t\t\t\t\tif (use_rle) {\n\n\t\t\t\t\t\tpixel_data = new Uint8Array(pixel_total);\n\n\t\t\t\t\t\tvar c, count, i;\n\t\t\t\t\t\tvar shift = 0;\n\t\t\t\t\t\tvar pixels = new Uint8Array(pixel_size);\n\n\t\t\t\t\t\twhile (shift < pixel_total) {\n\n\t\t\t\t\t\t\tc = data[offset++];\n\t\t\t\t\t\t\tcount = (c & 0x7f) + 1;\n\n\t\t\t\t\t\t\t// RLE pixels\n\n\t\t\t\t\t\t\tif (c & 0x80) {\n\n\t\t\t\t\t\t\t\t// bind pixel tmp array\n\n\t\t\t\t\t\t\t\tfor (i = 0; i < pixel_size; ++i) {\n\n\t\t\t\t\t\t\t\t\tpixels[i] = data[offset++];\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// copy pixel array\n\n\t\t\t\t\t\t\t\tfor (i = 0; i < count; ++i) {\n\n\t\t\t\t\t\t\t\t\tpixel_data.set(pixels, shift + i * pixel_size);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tshift += pixel_size * count;\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// raw pixels\n\n\t\t\t\t\t\t\t\tcount *= pixel_size;\n\t\t\t\t\t\t\t\tfor (i = 0; i < count; ++i) {\n\n\t\t\t\t\t\t\t\t\tpixel_data[shift + i] = data[offset++];\n\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tshift += count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// raw pixels\n\n\t\t\t\t\t\tpixel_data = data.subarray(\n\t\t\t\t\t\t\toffset, offset += (use_pal ? header.width * header.height : pixel_total)\n\t\t\t\t\t\t);\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tpixel_data: pixel_data,\n\t\t\t\t\t\tpalettes: palettes\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tfunction tgaGetImageData8bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image, palettes) {\n\n\t\t\t\t\tvar colormap = palettes;\n\t\t\t\t\tvar color, i = 0, x, y;\n\t\t\t\t\tvar width = header.width;\n\n\t\t\t\t\tfor (y = y_start; y !== y_end; y += y_step) {\n\n\t\t\t\t\t\tfor (x = x_start; x !== x_end; x += x_step, i++) {\n\n\t\t\t\t\t\t\tcolor = image[i];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 3] = 255;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 2] = colormap[(color * 3) + 0];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 1] = colormap[(color * 3) + 1];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 0] = colormap[(color * 3) + 2];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn imageData;\n\n\t\t\t\t}\n\n\t\t\t\tfunction tgaGetImageData16bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\n\n\t\t\t\t\tvar color, i = 0, x, y;\n\t\t\t\t\tvar width = header.width;\n\n\t\t\t\t\tfor (y = y_start; y !== y_end; y += y_step) {\n\n\t\t\t\t\t\tfor (x = x_start; x !== x_end; x += x_step, i += 2) {\n\n\t\t\t\t\t\t\tcolor = image[i + 0] + (image[i + 1] << 8); // Inversed ?\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 0] = (color & 0x7C00) >> 7;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 1] = (color & 0x03E0) >> 2;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 2] = (color & 0x001F) >> 3;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 3] = (color & 0x8000) ? 0 : 255;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn imageData;\n\n\t\t\t\t}\n\n\t\t\t\tfunction tgaGetImageData24bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\n\n\t\t\t\t\tvar i = 0, x, y;\n\t\t\t\t\tvar width = header.width;\n\n\t\t\t\t\tfor (y = y_start; y !== y_end; y += y_step) {\n\n\t\t\t\t\t\tfor (x = x_start; x !== x_end; x += x_step, i += 3) {\n\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 3] = 255;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 2] = image[i + 0];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 1] = image[i + 1];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 0] = image[i + 2];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn imageData;\n\n\t\t\t\t}\n\n\t\t\t\tfunction tgaGetImageData32bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\n\n\t\t\t\t\tvar i = 0, x, y;\n\t\t\t\t\tvar width = header.width;\n\n\t\t\t\t\tfor (y = y_start; y !== y_end; y += y_step) {\n\n\t\t\t\t\t\tfor (x = x_start; x !== x_end; x += x_step, i += 4) {\n\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 2] = image[i + 0];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 1] = image[i + 1];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 0] = image[i + 2];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 3] = image[i + 3];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn imageData;\n\n\t\t\t\t}\n\n\t\t\t\tfunction tgaGetImageDataGrey8bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\n\n\t\t\t\t\tvar color, i = 0, x, y;\n\t\t\t\t\tvar width = header.width;\n\n\t\t\t\t\tfor (y = y_start; y !== y_end; y += y_step) {\n\n\t\t\t\t\t\tfor (x = x_start; x !== x_end; x += x_step, i++) {\n\n\t\t\t\t\t\t\tcolor = image[i];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 0] = color;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 1] = color;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 2] = color;\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 3] = 255;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn imageData;\n\n\t\t\t\t}\n\n\t\t\t\tfunction tgaGetImageDataGrey16bits(imageData, y_start, y_step, y_end, x_start, x_step, x_end, image) {\n\n\t\t\t\t\tvar i = 0, x, y;\n\t\t\t\t\tvar width = header.width;\n\n\t\t\t\t\tfor (y = y_start; y !== y_end; y += y_step) {\n\n\t\t\t\t\t\tfor (x = x_start; x !== x_end; x += x_step, i += 2) {\n\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 0] = image[i + 0];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 1] = image[i + 0];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 2] = image[i + 0];\n\t\t\t\t\t\t\timageData[(x + width * y) * 4 + 3] = image[i + 1];\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn imageData;\n\n\t\t\t\t}\n\n\t\t\t\tfunction getTgaRGBA(data, width, height, image, palette) {\n\n\t\t\t\t\tvar x_start,\n\t\t\t\t\t\ty_start,\n\t\t\t\t\t\tx_step,\n\t\t\t\t\t\ty_step,\n\t\t\t\t\t\tx_end,\n\t\t\t\t\t\ty_end;\n\n\t\t\t\t\tswitch ((header.flags & TGA_ORIGIN_MASK) >> TGA_ORIGIN_SHIFT) {\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\tcase TGA_ORIGIN_UL:\n\t\t\t\t\t\t\tx_start = 0;\n\t\t\t\t\t\t\tx_step = 1;\n\t\t\t\t\t\t\tx_end = width;\n\t\t\t\t\t\t\ty_start = 0;\n\t\t\t\t\t\t\ty_step = 1;\n\t\t\t\t\t\t\ty_end = height;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TGA_ORIGIN_BL:\n\t\t\t\t\t\t\tx_start = 0;\n\t\t\t\t\t\t\tx_step = 1;\n\t\t\t\t\t\t\tx_end = width;\n\t\t\t\t\t\t\ty_start = height - 1;\n\t\t\t\t\t\t\ty_step = - 1;\n\t\t\t\t\t\t\ty_end = - 1;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TGA_ORIGIN_UR:\n\t\t\t\t\t\t\tx_start = width - 1;\n\t\t\t\t\t\t\tx_step = - 1;\n\t\t\t\t\t\t\tx_end = - 1;\n\t\t\t\t\t\t\ty_start = 0;\n\t\t\t\t\t\t\ty_step = 1;\n\t\t\t\t\t\t\ty_end = height;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase TGA_ORIGIN_BR:\n\t\t\t\t\t\t\tx_start = width - 1;\n\t\t\t\t\t\t\tx_step = - 1;\n\t\t\t\t\t\t\tx_end = - 1;\n\t\t\t\t\t\t\ty_start = height - 1;\n\t\t\t\t\t\t\ty_step = - 1;\n\t\t\t\t\t\t\ty_end = - 1;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif (use_grey) {\n\n\t\t\t\t\t\tswitch (header.pixel_size) {\n\n\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\ttgaGetImageDataGrey8bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 16:\n\t\t\t\t\t\t\t\ttgaGetImageDataGrey16bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.error('THREE.TGALoader: Format not supported.');\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tswitch (header.pixel_size) {\n\n\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\ttgaGetImageData8bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image, palette);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 16:\n\t\t\t\t\t\t\t\ttgaGetImageData16bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 24:\n\t\t\t\t\t\t\t\ttgaGetImageData24bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\t\ttgaGetImageData32bits(data, y_start, y_step, y_end, x_start, x_step, x_end, image);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tconsole.error('THREE.TGALoader: Format not supported.');\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Load image data according to specific method\n\t\t\t\t\t// var func = 'tgaGetImageData' + (use_grey ? 'Grey' : '') + (header.pixel_size) + 'bits';\n\t\t\t\t\t// func(data, y_start, y_step, y_end, x_start, x_step, x_end, width, image, palette );\n\t\t\t\t\treturn data;\n\n\t\t\t\t}\n\n\t\t\t\t// TGA constants\n\n\t\t\t\tvar TGA_TYPE_NO_DATA = 0,\n\t\t\t\t\tTGA_TYPE_INDEXED = 1,\n\t\t\t\t\tTGA_TYPE_RGB = 2,\n\t\t\t\t\tTGA_TYPE_GREY = 3,\n\t\t\t\t\tTGA_TYPE_RLE_INDEXED = 9,\n\t\t\t\t\tTGA_TYPE_RLE_RGB = 10,\n\t\t\t\t\tTGA_TYPE_RLE_GREY = 11,\n\n\t\t\t\t\tTGA_ORIGIN_MASK = 0x30,\n\t\t\t\t\tTGA_ORIGIN_SHIFT = 0x04,\n\t\t\t\t\tTGA_ORIGIN_BL = 0x00,\n\t\t\t\t\tTGA_ORIGIN_BR = 0x01,\n\t\t\t\t\tTGA_ORIGIN_UL = 0x02,\n\t\t\t\t\tTGA_ORIGIN_UR = 0x03;\n\n\t\t\t\tif (buffer.length < 19) console.error('THREE.TGALoader: Not enough data to contain header.');\n\n\t\t\t\tvar content = new Uint8Array(buffer),\n\t\t\t\t\toffset = 0,\n\t\t\t\t\theader = {\n\t\t\t\t\t\tid_length: content[offset++],\n\t\t\t\t\t\tcolormap_type: content[offset++],\n\t\t\t\t\t\timage_type: content[offset++],\n\t\t\t\t\t\tcolormap_index: content[offset++] | content[offset++] << 8,\n\t\t\t\t\t\tcolormap_length: content[offset++] | content[offset++] << 8,\n\t\t\t\t\t\tcolormap_size: content[offset++],\n\t\t\t\t\t\torigin: [\n\t\t\t\t\t\t\tcontent[offset++] | content[offset++] << 8,\n\t\t\t\t\t\t\tcontent[offset++] | content[offset++] << 8\n\t\t\t\t\t\t],\n\t\t\t\t\t\twidth: content[offset++] | content[offset++] << 8,\n\t\t\t\t\t\theight: content[offset++] | content[offset++] << 8,\n\t\t\t\t\t\tpixel_size: content[offset++],\n\t\t\t\t\t\tflags: content[offset++]\n\t\t\t\t\t};\n\n\t\t\t\t// check tga if it is valid format\n\n\t\t\t\ttgaCheckHeader(header);\n\n\t\t\t\tif (header.id_length + offset > buffer.length) {\n\n\t\t\t\t\tconsole.error('THREE.TGALoader: No data.');\n\n\t\t\t\t}\n\n\t\t\t\t// skip the needn't data\n\n\t\t\t\toffset += header.id_length;\n\n\t\t\t\t// get targa information about RLE compression and palette\n\n\t\t\t\tvar use_rle = false,\n\t\t\t\t\tuse_pal = false,\n\t\t\t\t\tuse_grey = false;\n\n\t\t\t\tswitch (header.image_type) {\n\n\t\t\t\t\tcase TGA_TYPE_RLE_INDEXED:\n\t\t\t\t\t\tuse_rle = true;\n\t\t\t\t\t\tuse_pal = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TGA_TYPE_INDEXED:\n\t\t\t\t\t\tuse_pal = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TGA_TYPE_RLE_RGB:\n\t\t\t\t\t\tuse_rle = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TGA_TYPE_RGB:\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TGA_TYPE_RLE_GREY:\n\t\t\t\t\t\tuse_rle = true;\n\t\t\t\t\t\tuse_grey = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TGA_TYPE_GREY:\n\t\t\t\t\t\tuse_grey = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t//\n\n\t\t\t\tvar useOffscreen = typeof OffscreenCanvas !== 'undefined';\n\n\t\t\t\tvar canvas = useOffscreen ? new OffscreenCanvas(header.width, header.height) : document.createElement('canvas');\n\t\t\t\tcanvas.width = header.width;\n\t\t\t\tcanvas.height = header.height;\n\n\t\t\t\tvar context = canvas.getContext('2d');\n\t\t\t\tvar imageData = context.createImageData(header.width, header.height);\n\n\t\t\t\tvar result = tgaParse(use_rle, use_pal, header, offset, content);\n\t\t\t\tvar rgbaData = getTgaRGBA(imageData.data, header.width, header.height, result.pixel_data, result.palettes);\n\n\t\t\t\tcontext.putImageData(imageData, 0, 0);\n\n\t\t\t\treturn useOffscreen ? canvas.transferToImageBitmap() : canvas;\n\n\t\t\t}\n\n\t\t}\n\t\t_TGALoader = esExtends(Loader, {\n\t\t\tesConstructor(constructor) {\n\t\t\t\tclass _esCtor extends Loader {\n\t\t\t\t\tconstructor(manager) {\n\t\t\t\t\t\tsuper(manager)\n\t\t\t\t\t\tconstructor.call(this, manager)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn _esCtor;\n\t\t\t},\n\t\t\tconstructor(manager) { },\n\t\t\tprototype: _TGALoaderPrototype_\n\t\t})\n\t}\n\n\treturn new _TGALoader(manager);\n}\nexport { TGALoader };\n",
    "class Base64Encoder{\r\n    static decodeArray(encodedData,positions = []){\r\n        if (encodedData.length === 0)\r\n            return new Buffer(0);\r\n        let buf, buffers = [],size = 0;\r\n        for(let i=0 ; i<encodedData.length ; i++) {\r\n            if (typeof Buffer.from === \"function\") { // Node 5.10+\r\n                buf = Buffer.from(encodedData[i], 'base64');\r\n            } else { // older Node versions\r\n                buf = new Buffer(encodedData[i], 'base64');\r\n            }\r\n            size += buf.length;\r\n            positions.push(size);\r\n\r\n            buffers.push(buf)\r\n        }\r\n\r\n        if(encodedData.length === 1){\r\n            return buffers[0];\r\n        }\r\n        let fullBuffer = new Buffer(size),pos = 0;\r\n        for(let i=0 ; i<encodedData.length ; i++) {\r\n            buffers[i].copy(fullBuffer,pos);\r\n            pos+=buffers[i].length;\r\n        }\r\n        return fullBuffer;\r\n    }\r\n}\r\nexport {Base64Encoder}",
    "const Constants = {\r\n    INDENT_VALUE: 2,\r\n    Sizes: {\r\n        BOOL_SIZE: 1,\r\n        CHAR_SIZE: 1,\r\n        SHORT_SIZE: 2,\r\n        INT_SIZE: 4,\r\n        LONG_SIZE: 4,\r\n        INT64_SIZE: 8,\r\n        FLOAT_SIZE: 4,\r\n        DOUBLE_SIZE: 8,\r\n        GLENUM_SIZE: 4\r\n    },\r\n    TypeIds: {\r\n        ID_BYTE_ARRAY: 0,\r\n        ID_UBYTE_ARRAY: 1,\r\n        ID_SHORT_ARRAY: 2,\r\n        ID_USHORT_ARRAY: 3,\r\n        ID_INT_ARRAY: 4,\r\n        ID_UINT_ARRAY: 5,\r\n        ID_FLOAT_ARRAY: 6,\r\n        ID_DOUBLE_ARRAY: 7,\r\n        ID_VEC2B_ARRAY: 8,\r\n        ID_VEC3B_ARRAY: 9,\r\n        ID_VEC4B_ARRAY: 10,\r\n        ID_VEC4UB_ARRAY: 11,\r\n        ID_VEC2S_ARRAY: 12,\r\n        ID_VEC3S_ARRAY: 13,\r\n        ID_VEC4S_ARRAY: 14,\r\n        ID_VEC2_ARRAY: 15,\r\n        ID_VEC3_ARRAY: 16,\r\n        ID_VEC4_ARRAY: 17,\r\n        ID_VEC2D_ARRAY: 18,\r\n        ID_VEC3D_ARRAY: 19,\r\n        ID_VEC4D_ARRAY: 20,\r\n        ID_VEC2UB_ARRAY: 21,\r\n        ID_VEC3UB_ARRAY: 22,\r\n        ID_VEC2US_ARRAY: 23,\r\n        ID_VEC3US_ARRAY: 24,\r\n        ID_VEC4US_ARRAY: 25,\r\n\r\n        ID_VEC2I_ARRAY: 26,\r\n        ID_VEC3I_ARRAY: 27,\r\n        ID_VEC4I_ARRAY: 28,\r\n        ID_VEC2UI_ARRAY: 29,\r\n        ID_VEC3UI_ARRAY: 30,\r\n        ID_VEC4UI_ARRAY: 31,\r\n\r\n        ID_UINT64_ARRAY: 32,\r\n        ID_INT64_ARRAY: 33,\r\n\r\n        ID_DRAWARRAYS: 50,\r\n        ID_DRAWARRAY_LENGTH: 51,\r\n        ID_DRAWELEMENTS_UBYTE: 52,\r\n        ID_DRAWELEMENTS_USHORT: 53,\r\n        ID_DRAWELEMENTS_UINT: 54\r\n    }\r\n};\r\nexport {Constants};",
    "export class ObjectGLEnum {\r\n    constructor(_value = 0) {\r\n        this.value = _value;\r\n    }\r\n}\r\n\r\nexport class ObjectMark {\r\n    constructor(_name, _indent = 0) {\r\n        this.name = _name;\r\n        this.indent = _indent;\r\n    }\r\n}\r\n\r\n\r\nexport class ObjectProperty {\r\n    constructor(_name, _value = 0, _mapProperty = false) {\r\n        this.name = _name;\r\n        this.value = _value;\r\n        this.mapProperty = _mapProperty;\r\n    }\r\n\r\n    set(_value) {\r\n        if (typeof _value === \"string\")\r\n            this.name = _value;\r\n        else if (typeof _value === \"number\")\r\n            this.value = _value;\r\n        return this\r\n    }\r\n}\r\n\r\nexport const DataTypes = {\r\n    ObjectProperty,\r\n    ObjectMark,\r\n    ObjectGLEnum\r\n};",
    "const LEVELS = {\r\n    LOG: 1,\r\n    WARN: 2,\r\n    ERROR: 3,\r\n    FATAL: 4\r\n};\r\n\r\nlet logHandler = null;\r\n\r\nfunction applyLog(message, level) {\r\n\r\n    let messagePrefix = \"\";\r\n    if (level > LEVELS.LOG) {\r\n        messagePrefix = Object.keys(LEVELS).filter(key => LEVELS[key] === level) + \" : \";\r\n    }\r\n    if (level > Log.level) {\r\n        console.log(messagePrefix + message);\r\n    }\r\n    if (logHandler) {\r\n        try {\r\n            logHandler(message, level)\r\n        } catch (e) {\r\n        }\r\n    }\r\n}\r\n\r\nlet Log = message => applyLog(message, LEVELS.LOG);\r\n\r\n\r\nLog.log = message => applyLog(message, LEVELS.LOG);\r\n\r\nLog.warn = message => applyLog(message, LEVELS.WARN);\r\nLog.error = message => applyLog(message, LEVELS.ERROR);\r\nLog.fatal = message => applyLog(message, LEVELS.FATAL);\r\nLog.setLogLog = () => {\r\n    Log.level = LEVELS.LOG\r\n};\r\n\r\nLog.setLogWarn = () => {\r\n    Log.level = LEVELS.WARN\r\n};\r\nLog.setLogError = () => {\r\n    Log.level = LEVELS.ERROR\r\n};\r\nLog.setLogFatal = () => {\r\n    Log.level = LEVELS.FATAL\r\n};\r\nLog.setLogOff = () => {\r\n    Log.level = Number.MAX_VALUE\r\n};\r\n\r\n// Default logger - Warning\r\nLog.level = LEVELS.WARN;\r\n\r\nexport { Log };\r\n",
    "const ArrayTableEnum = {\r\n    ByteArray: 0,\r\n    UByteArray: 1,\r\n    ShortArray: 2,\r\n    UShortArray: 3,\r\n    IntArray: 4,\r\n    UIntArray: 5,\r\n    FloatArray: 6,\r\n    DoubleArray: 7,\r\n\r\n    Vec2bArray: 8,\r\n    Vec3bArray: 9,\r\n    Vec4bArray: 10,\r\n    Vec2ubArray: 21,\r\n    Vec3ubArray: 22,\r\n    Vec4ubArray: 11,\r\n    Vec2sArray: 12,\r\n    Vec3sArray: 13,\r\n    Vec4sArray: 14,\r\n    Vec2usArray: 23,\r\n    Vec3usArray: 24,\r\n    Vec4usArray: 25,\r\n    Vec2fArray: 15,\r\n    Vec3fArray: 16,\r\n    Vec4fArray: 17,\r\n    Vec2dArray: 18,\r\n    Vec3dArray: 19,\r\n    Vec4dArray: 20,\r\n\r\n    Vec2iArray: 26,\r\n    Vec3iArray: 27,\r\n    Vec4iArray: 28,\r\n    Vec2uiArray: 29,\r\n    Vec3uiArray: 30,\r\n    Vec4uiArray: 31\r\n};\r\nexport {ArrayTableEnum};",
    "\nexport const AttributeBinding = {\n    BIND_OFF: 0,                 // ADD_USER_VALUE(\"ADD_USER_VALUE( BIND_OFF );\n    BIND_OVERALL: 1,             // ADD_USER_VALUE( BIND_OVERALL );\n    BIND_PER_PRIMITIVE_SET: 2,   // ADD_USER_VALUE( BIND_PER_PRIMITIVE_SET );\n    BIND_PER_PRIMITIVE: 3,       //ADD_USER_VALUE( BIND_PER_PRIMITIVE );\n    BIND_PER_VERTEX: 4          // ADD_USER_VALUE( BIND_PER_VERTEX );\n}",
    "\nexport const CenterMode = {\n    /**\n     * Uses the bounding sphere's center as the center of object and the geometrical bounding sphere of the node's children\n     */\n    USE_BOUNDING_SPHERE_CENTER: 0,\n    /**\n     * Uses the user defined center as the center of object; the bounding sphere is determined by the user defined center and user defined radius\n     */\n    USER_DEFINED_CENTER: 1,\n    /**\n     * Uses the user defined center as the center of object; the bounding sphere is the user defined bounding sphere expanded by the geometrical bounding sphere of the node's children\n     */\n    UNION_OF_BOUNDING_SPHERE_AND_USER_DEFINED: 2\n};",
    "import {GLEnum} from   \"./GLEnum.js\";\n\r\n\r\nconst FaceMode = {\r\n    FRONT: GLEnum.FRONT,\r\n    BACK: GLEnum.BACK,\r\n    FRONT_AND_BACK: GLEnum.FRONT_AND_BACK\r\n};\r\nexport { FaceMode };",
    "\nfunction EnumToString(enumMap, enumVal) {\n    for (const key in enumMap) {\n        if (enumMap[key] == enumVal) {\n            return key;\n        }\n    }\n}\nexport {EnumToString};",
    "export const GLEnum = {\r\n    // Modes\r\n    GL_ALPHA_TEST: 0x0BC0,\r\n        GL_BLEND: 0x0BE2,\r\n    GL_COLOR_LOGIC_OP: 0x0BF2,\r\n    GL_COLOR_MATERIAL: 0x0B57,\r\n    GL_CULL_FACE: 0x0B44,\r\n    GL_DEPTH_TEST: 0x0B71,\r\n    GL_FOG: 0x0B60,\r\n    GL_FRAGMENT_PROGRAM_ARB: 0x8804,\r\n    GL_LINE_STIPPLE: 0x0B24,\r\n    GL_POINT_SMOOTH: 0x0B10,\r\n    GL_POINT_SPRITE_ARB: 0x8861,\r\n    GL_POLYGON_OFFSET_FILL: 0x8037,\r\n    GL_POLYGON_OFFSET_LINE: 0x2A02,\r\n    GL_POLYGON_OFFSET_POINT: 0x2A01,\r\n    GL_POLYGON_STIPPLE: 0x0B42,\r\n    GL_SCISSOR_TEST: 0x0C11,\r\n    GL_STENCIL_TEST: 0x0B90,\r\n    GL_STENCIL_TEST_TWO_SIDE: 0x8910,\r\n    GL_VERTEX_PROGRAM_ARB: 0x8620,\r\n\r\n    GL_COLOR_SUM: 0x8458,\r\n    GL_LIGHTING: 0x0B50,\r\n    GL_NORMALIZE: 0x0BA1,\r\n    GL_RESCALE_NORMAL: 0x803A,\r\n\r\n    GL_TEXTURE_1D: 0x0DE0,\r\n    GL_TEXTURE_2D: 0x0DE1,\r\n    GL_TEXTURE_3D: 0x806F,\r\n    GL_TEXTURE_CUBE_MAP: 0x8513,\r\n    GL_TEXTURE_RECTANGLE: 0x84F5,\r\n    GL_TEXTURE_GEN_Q: 0x0C63,\r\n    GL_TEXTURE_GEN_R: 0x0C62,\r\n    GL_TEXTURE_GEN_S: 0x0C60,\r\n    GL_TEXTURE_GEN_T: 0x0C61,\r\n\r\n    GL_CLIP_PLANE0: 0x3000,\r\n    GL_CLIP_PLANE1: 0x3001,\r\n    GL_CLIP_PLANE2: 0x3002,\r\n    GL_CLIP_PLANE3: 0x3003,\r\n    GL_CLIP_PLANE4: 0x3004,\r\n    GL_CLIP_PLANE5: 0x3005,\r\n\r\n    GL_LIGHT0: 0x4000,\r\n    GL_LIGHT1: 0x4001,\r\n    GL_LIGHT2: 0x4002,\r\n    GL_LIGHT3: 0x4003,\r\n    GL_LIGHT4: 0x4004,\r\n    GL_LIGHT5: 0x4005,\r\n    GL_LIGHT6: 0x4006,\r\n    GL_LIGHT7: 0x4007,\r\n\r\n    GL_VERTEX_PROGRAM_POINT_SIZE: 0x8642,\r\n    GL_VERTEX_PROGRAM_TWO_SIDE: 0x8643,\r\n\r\n    // Functions\r\n    NEVER: 0x0200,\r\n    LESS: 0x0201,\r\n    EQUAL: 0x0202,\r\n    LEQUAL: 0x0203,\r\n    GREATER: 0x0204,\r\n    NOTEQUAL: 0x0205,\r\n    GEQUAL: 0x0206,\r\n    ALWAYS: 0x0207,\r\n\r\n    // Texture environment states\r\n    REPLACE: 0x1E01,\r\n    MODULATE: 0x2100,\r\n    ADD: 0x0104,\r\n    ADD_SIGNED: 0x8574,\r\n    INTERPOLATE: 0x8575,\r\n    SUBTRACT: 0x84E7,\r\n    DOT3_RGB: 0x86AE,\r\n    DOT3_RGBA: 0x86AF,\r\n\r\n    CONSTANT: 0x8576,\r\n    PRIMARY_COLOR: 0x8577,\r\n    PREVIOUS: 0x8578,\r\n    TEXTURE: 0x1702,\r\n    TEXTURE0: 0x84C0,\r\n    TEXTURE1: 0x84C1,\r\n    TEXTURE2: 0x84C2,\r\n    TEXTURE3: 0x84C3,\r\n    TEXTURE4: 0x84C4,\r\n    TEXTURE5: 0x84C5,\r\n    TEXTURE6: 0x84C6,\r\n    TEXTURE7: 0x84C7,\r\n\r\n    // Texture clamp modes\r\n    CLAMP: 0x2900,\r\n        CLAMP_TO_EDGE: 0x812F,\r\n    CLAMP_TO_BORDER: 0x812D,\r\n    REPEAT: 0x2901,\r\n    MIRROR: 0x8370,\r\n\r\n    // Texture filter modes\r\n    LINEAR: 0x2601,\r\n    LINEAR_MIPMAP_LINEAR: 0x2703,\r\n    LINEAR_MIPMAP_NEAREST: 0x2701,\r\n    NEAREST: 0x2600,\r\n    NEAREST_MIPMAP_LINEAR: 0x2702,\r\n    NEAREST_MIPMAP_NEAREST: 0x2700,\r\n\r\n    // Texture formats\r\n    GL_INTENSITY: 0x8049,\r\n    GL_LUMINANCE: 0x1909,\r\n    GL_ALPHA: 0x1906,\r\n    GL_LUMINANCE_ALPHA: 0x190A,\r\n    GL_RGB: 0x1907,\r\n    GL_RGBA: 0x1908,\r\n    GL_COMPRESSED_ALPHA_ARB: 0x84E9,\r\n    GL_COMPRESSED_LUMINANCE_ARB: 0x84EA,\r\n    GL_COMPRESSED_INTENSITY_ARB: 0x84EC,\r\n    GL_COMPRESSED_LUMINANCE_ALPHA_ARB: 0x84EB,\r\n    GL_COMPRESSED_RGB_ARB: 0x84ED,\r\n    GL_COMPRESSED_RGBA_ARB: 0x84EE,\r\n    GL_COMPRESSED_RGB_S3TC_DXT1_EXT: 0x83F0,\r\n    GL_COMPRESSED_RGBA_S3TC_DXT1_EXT: 0x83F1,\r\n    GL_COMPRESSED_RGBA_S3TC_DXT3_EXT: 0x83F2,\r\n    GL_COMPRESSED_RGBA_S3TC_DXT5_EXT: 0x83F3,\r\n    GL_COMPRESSED_RGB_PVRTC_4BPPV1_IMG:0x8C00,\r\n    GL_COMPRESSED_RGB_PVRTC_2BPPV1_IMG:0x8C01,\r\n    GL_COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:0x8C02,\r\n    GL_COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:0x8C03,\r\n    GL_ETC1_RGB8_OES:0x8D64,\r\n    GL_COMPRESSED_RGB8_ETC2:0x9274,\r\n    GL_COMPRESSED_SRGB8_ETC2:0x9275,\r\n    GL_COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:0x9276,\r\n    GL_COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:0x9277,\r\n    GL_COMPRESSED_RGBA8_ETC2_EAC:0x9278,\r\n    GL_COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:0x9279,\r\n    GL_COMPRESSED_R11_EAC:0x9270,\r\n    GL_COMPRESSED_SIGNED_R11_EAC:0x9271,\r\n    GL_COMPRESSED_RG11_EAC:0x9272,\r\n    GL_COMPRESSED_SIGNED_RG11_EAC:0x9273,\r\n\r\n    // Texture source types\r\n    GL_BYTE: 0x1400,\r\n    GL_SHORT: 0x1402,\r\n    GL_INT: 0x1404,\r\n    GL_FLOAT: 0x1406,\r\n    GL_DOUBLE: 0x140A,\r\n    GL_UNSIGNED_BYTE: 0x1401,\r\n    GL_UNSIGNED_SHORT: 0x1403,\r\n    GL_UNSIGNED_INT: 0x1405,\r\n\r\n    // Blend values\r\n    DST_ALPHA: 0x0304,\r\n    DST_COLOR: 0x0306,\r\n    ONE: 1,\r\n    ONE_MINUS_DST_ALPHA: 0x0305,\r\n    ONE_MINUS_DST_COLOR: 0x0307,\r\n    ONE_MINUS_SRC_ALPHA: 0x0303,\r\n    ONE_MINUS_SRC_COLOR: 0x0301,\r\n    SRC_ALPHA: 0x0302,\r\n    SRC_ALPHA_SATURATE: 0x0308,\r\n    SRC_COLOR: 0x0300,\r\n    CONSTANT_COLOR: 0x8001,\r\n    ONE_MINUS_CONSTANT_COLOR: 0x8002,\r\n    CONSTANT_ALPHA: 0x8003,\r\n    ONE_MINUS_CONSTANT_ALPHA: 0x8004,\r\n    ZERO: 0,\r\n\r\n    // Fog coordinate sources\r\n    COORDINATE: 0x8451,\r\n    DEPTH: 0x8452,\r\n\r\n    // Hint targets\r\n    FOG_HINT: 0x0C54,\r\n    GENERATE_MIPMAP_HINT: 0x8192,\r\n    LINE_SMOOTH_HINT: 0x0C52,\r\n    PERSPECTIVE_CORRECTION_HINT: 0x0C50,\r\n    POINT_SMOOTH_HINT: 0x0C51,\r\n    POLYGON_SMOOTH_HINT: 0x0C53,\r\n    TEXTURE_COMPRESSION_HINT: 0x84EF,\r\n    FRAGMENT_SHADER_DERIVATIVE_HINT: 0x8B8B,\r\n\r\n    // Polygon modes\r\n    POINT: 0x1B00,\r\n    LINE: 0x1B01,\r\n    FILL: 0x1B00,\r\n\r\n    // Misc\r\n    BACK: 0x0405,\r\n    FRONT: 0x0404,\r\n    FRONT_AND_BACK: 0x0408,\r\n    FIXED_ONLY: 0x891D,\r\n    FASTEST: 0x1101,\r\n    NICEST: 0x1101,\r\n    DONT_CARE: 0x1100\r\n}; ",
    "\nexport const ImageType = {\n    IMAGE_INLINE_DATA: 0,\n    IMAGE_INLINE_FILE: 1,\n    IMAGE_EXTERNAL: 2\n}",
    "export const ColorMode = {\r\n    AMBIENT: 0x1200,\r\n    DIFFUSE: 0x1201,\r\n    SPECULAR: 0x1202,\r\n    EMISSION: 0x1600,\r\n    AMBIENT_AND_DIFFUSE: 0x1602,\r\n    OFF: 0x1602+1\r\n};",
    "export const ObjectDataVariance = {\r\n    DYNAMIC: 0,\r\n    STATIC : 1,\r\n    UNSPECIFIED: 2\r\n}",
    "export const PrimitiveMode = {\n    POINTS: 0x0000,\n    LINES: 0x0001,\n    LINE_STRIP: 0x0003,\n    LINE_LOOP: 0x0002,\n    TRIANGLES: 0x0004,\n    TRIANGLE_STRIP: 0x0005,\n    TRIANGLE_FAN: 0x0006,\n    GL_QUADS: 0x0007,\n}",
    "export const PrimitiveTableEnum = {\r\n    DrawArrays: 50,\r\n    DrawArraysLength: 51,\r\n    DrawElementsUByte: 52,\r\n    DrawElementsUShort: 53,\r\n    DrawElementsUInt: 54,\r\n\r\n    GL_POINTS: 0x0000,\r\n    GL_LINES: 0x0001,\r\n    GL_LINE_STRIP: 0x0003,\r\n    GL_LINE_LOOP: 0x0002,\r\n    GL_TRIANGLES: 0x0004,\r\n    GL_TRIANGLE_STRIP: 0x0005,\r\n    GL_TRIANGLE_FAN: 0x0006,\r\n    GL_QUADS: 0x0007,\r\n    GL_QUAD_STRIP: 0x0008,\r\n    GL_POLYGON: 0x0009,\r\n\r\n    GL_LINES_ADJACENCY: 0x000A,\r\n    GL_LINES_ADJACENCY_EXT: 0x000A,\r\n    GL_LINE_STRIP_ADJACENCY_EXT: 0x000B,\r\n    GL_LINE_STRIP_ADJACENCY: 0x000B,\r\n    GL_TRIANGLES_ADJACENCY: 0x000C,\r\n    GL_TRIANGLES_ADJACENCY_EXT: 0x000C,\r\n    GL_TRIANGLE_STRIP_ADJACENCY: 0x000D,\r\n    GL_TRIANGLE_STRIP_ADJACENCY_EXT: 0x000D,\r\n\r\n    GL_PATCHES: 0x000E\r\n};",
    "\nexport const  RangeMode={\n    DISTANCE_FROM_EYE_POINT: 0,\n    PIXEL_SIZE_ON_SCREEN: 1\n}",
    " \r\nexport const ShadeModelMode =  {\r\n    ConstantsFLAT: 0x1D00,\r\n    SMOOTH: 0x1D01\r\n};",
    "export const StateAttributeValue= {\r\n\r\n    /** means that associated GLMode and Override is disabled.*/\r\n    OFF: 0,\r\n    /** means that associated GLMode is enabled and Override is disabled.*/\r\n    ON: 1,\r\n    /** Overriding of GLMode's or StateAttributes is enabled, so that state below it is overridden.*/\r\n    OVERRIDE: 2,\r\n    /** Protecting of GLMode's or StateAttributes is enabled, so that state from above cannot override this and below state.*/\r\n    PROTECTED: 4,\r\n    /** means that GLMode or StateAttribute should be inherited from above.*/\r\n    INHERIT: 8\r\n\r\n};",
    " \r\nexport const RenderBinMode = {\r\n    INHERIT_RENDERBIN_DETAILS: 0,\r\n    USE_RENDERBIN_DETAILS: 1,\r\n    OVERRIDE_RENDERBIN_DETAILS: 2,\r\n    PROTECTED_RENDERBIN_DETAILS: 4,\r\n    OVERRIDE_PROTECTED_RENDERBIN_DETAILS: 6\r\n};",
    "export const RenderingHint = {\r\n    DEFAULT_BIN: 0,\r\n    OPAQUE_BIN: 1,\r\n    TRANSPARENT_BIN: 2\r\n}",
    "export const InternalFormatMode = {\r\n    USE_IMAGE_DATA_FORMAT: 0,\r\n    USE_USER_DEFINED_FORMAT: 1,\r\n    USE_ARB_COMPRESSION: 2,\r\n    USE_S3TC_DXT1_COMPRESSION: 3,\r\n    USE_S3TC_DXT3_COMPRESSION: 4,\r\n    USE_S3TC_DXT5_COMPRESSION: 5,\r\n    USE_PVRTC_2BPP_COMPRESSION: 6,\r\n    USE_PVRTC_4BPP_COMPRESSION: 7,\r\n    USE_ETC_COMPRESSION: 8,\r\n    USE_ETC2_COMPRESSION: 9,\r\n    USE_RGTC1_COMPRESSION: 10,\r\n    USE_RGTC2_COMPRESSION: 11,\r\n    USE_S3TC_DXT1c_COMPRESSION: 12,\r\n    USE_S3TC_DXT1a_COMPRESSION: 13\r\n};",
    "export const ShadowCompareFunc = {\r\n    NEVER : 0x0200,\r\n    LESS : 0x0201,\r\n    EQUAL : 0x0202,\r\n    LEQUAL : 0x0203,\r\n    GREATER : 0x0204,\r\n    NOTEQUAL : 0x0205,\r\n    GEQUAL : 0x0206,\r\n    ALWAYS : 0x0207\r\n};",
    "export const ShadowTextureMode= {\r\n    LUMINANCE: 0x1909,\r\n    INTENSITY: 0x8049,\r\n    ALPHA: 0x1906,\r\n    NONE: 0x0000\r\n};",
    "export const ReferenceFrame = {\r\n    RELATIVE_RF: 0,\r\n    ABSOLUTE_RF: 1,\r\n    ABSOLUTE_RF_INHERIT_VIEWPOINT: 2\r\n};",
    "import { StreamOperator } from  \"./StreamOperator.js\";\n\r\nimport { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { GLEnum } from  \"../Enum/GLEnum.js\";\n\r\nimport { Log } from  \"../Common/Log.js\";\n\r\n\r\nconst separatorChars = \"\\0\\t\\r\\n\\f \";\r\nconst separatorCharsObject = {};\r\nfor (let i = 0; i < separatorChars.length; i++) {\r\n    separatorCharsObject[separatorChars.charCodeAt(i)] = true;\r\n}\r\n\r\nfunction lookAtChar(that, position) {\r\n    return that.bufferToString(\"ASCII\", position, position + 1)\r\n}\r\n\r\nfunction isSeparatorChar(buffer, index) {\r\n    index = index || 0;\r\n    if (typeof buffer === 'string') {\r\n        return !!separatorCharsObject[buffer.charCodeAt(index)]\r\n    }\r\n    return !!separatorCharsObject[buffer[index]]\r\n}\r\n\r\nfunction skipGaps(that) {\r\n    while (that._position <= that._buffer.byteLength && isSeparatorChar(that._buffer, that._position)) {\r\n        that._position++;\r\n    }\r\n}\r\n\r\nfunction readIntNumber(that) {\r\n    let word = that.readString();\r\n    return parseInt(word);\r\n}\r\n\r\nfunction readFloatNumber(that) {\r\n    let word = that.readString();\r\n    return parseFloat(word);\r\n}\r\n\r\nfunction isEndlChar(buffer, index) {\r\n    index = index || 0;\r\n    let charCode;\r\n    if (typeof buffer === 'string') {\r\n        charCode = buffer.charCodeAt(index)\r\n    } else {\r\n        charCode = buffer[index]\r\n    }\r\n\r\n    return charCode === 10 || charCode === 13\r\n}\r\n\r\nfunction readString(params) {\r\n\r\n}\r\nclass AsciiStreamOperator extends StreamOperator {\r\n    constructor(buffer, initPosition) {\r\n        super(\"AsciiStreamOperator\");\r\n\r\n        if (typeof Buffer != 'undefined' && buffer instanceof Buffer) {\r\n            buffer = new Uint8Array(buffer);\r\n        } else if (buffer instanceof ArrayBuffer) {\r\n            buffer = new Uint8Array(buffer);\r\n        }\r\n\r\n        this._buffer = buffer;\r\n        this._position = initPosition;\r\n        this.version = -1;\r\n    }\r\n\r\n    isBinary() {\r\n        return false;\r\n    }\r\n\r\n    bufferToString(encoding, start, end) {\r\n        var bytes = this._buffer.subarray(start, end);\r\n        var str = String.fromCharCode.apply(null, bytes);\r\n        return str;\r\n    }\r\n\r\n    advanceToCurrentEndBracket() {\r\n        let passString, blocks = 0;\r\n        while (this._position < this._buffer.byteLength) {\r\n            passString = this.readString();\r\n\r\n            if (passString === \"}\") {\r\n                if (blocks <= 0) return;\r\n                else blocks--;\r\n            }\r\n            else if (passString === \"{\")\r\n                blocks++;\r\n        }\r\n    }\r\n\r\n    readBool() {\r\n        let boolString = this.readString();\r\n        return (boolString === \"TRUE\");\r\n    }\r\n\r\n    readUInt() {\r\n        return readIntNumber(this);\r\n    }\r\n\r\n    readInt() {\r\n        return readIntNumber(this);\r\n    }\r\n\r\n    readUShort() {\r\n        return readIntNumber(this);\r\n    }\r\n\r\n    readShort() {\r\n        return readIntNumber(this);\r\n    }\r\n\r\n    readUByte() {\r\n        return readIntNumber(this);\r\n    }\r\n\r\n    readByte() {\r\n        return readIntNumber(this);\r\n    }\r\n\r\n    readFloat() {\r\n        return readFloatNumber(this);\r\n    }\r\n\r\n    readDouble() {\r\n        return readFloatNumber(this);\r\n    }\r\n\r\n    readHex() {\r\n        let word = this.readString();\r\n        word = word.reaplace(\"0x\", \"\");\r\n        return parseInt(word, 16);\r\n    }\r\n\r\n    matchString(str) {\r\n        let currentPosition = this._position;\r\n        let word = this.readString();\r\n        if (str === word) {\r\n            return true;\r\n        } else {\r\n            this._position = currentPosition;\r\n            return false;\r\n        }\r\n    }\r\n\r\n    lookForward() {\r\n        let currentPosition = this._position;\r\n        let word = this.readString();\r\n        this._position = currentPosition;\r\n        return word;\r\n    }\r\n\r\n    goToNextRow() {\r\n        while (this._position <= this._buffer.byteLength && !isEndlChar(this._buffer, this._position)) {\r\n            this._position++;\r\n        }\r\n    }\r\n\r\n    readChar() {\r\n        skipGaps(this);\r\n        this._position += 1;\r\n        return this.bufferToString(\"ASCII\", this._position - 1, this._position);\r\n    }\r\n    readString() {\r\n        skipGaps(this);\r\n        let endPosition = this._position;\r\n        while (endPosition <= this._buffer.byteLength && !isSeparatorChar(this._buffer, endPosition)) {\r\n            endPosition++;\r\n        }\r\n        let word = this.bufferToString('ASCII', this._position, endPosition);\r\n        this._position = endPosition;\r\n\r\n        return word;\r\n    }\r\n    readWrappedString() {\r\n        skipGaps(this);\r\n\r\n        let ch = lookAtChar(this, this._position);\r\n        if (ch === '\"') {\r\n            this._position++;//\r\n            let endPosition = this._position;\r\n            while (endPosition <= this._buffer.byteLength && lookAtChar(this, endPosition) !== '\"') {\r\n                endPosition++;\r\n            }\r\n            let word = this.bufferToString('ASCII', this._position, endPosition);\r\n            this._position = endPosition + 1;\r\n            return word;\r\n        } else {\r\n           return this.readString();\r\n        }\r\n    }\r\n    readGLEnum(objectGLEnum) {\r\n        let enumString = this.readString();\r\n        if (!objectGLEnum.hasOwnProperty(enumString))\r\n            Log.warn(\"readGLEnum: \" + enumString + \" enum not found\");\r\n        objectGLEnum.value = GLEnum[enumString];\r\n    }\r\n    readObjectMark(mark) {\r\n        let word = this.readString();\r\n        if (mark.name !== word) {\r\n            Log.warn(\"AsciiStreamOperator.readObjectMark mismatch: expecting \" + mark.name + \", actual: \" + word)\r\n        }\r\n    }\r\n\r\n    readObjectProperty(prop) {\r\n        let value = 0, enumString = this.readString();\r\n        if (prop.mapProperty) {\r\n            value = ObjectWrapperManager.getValue(prop.name, enumString);\r\n        } else {\r\n            if (prop.name !== enumString) {\r\n                debugger\r\n                throw (\"Unmatched property \" + prop.name + \" != \" + enumString)\r\n            }\r\n        }\r\n        prop.set(value)\r\n    }\r\n}\r\n\r\nexport { AsciiStreamOperator };",
    "import { StreamOperator } from  \"./StreamOperator.js\";\n\r\nimport { Log } from  \"../Common/Log.js\";\n\r\n\r\nclass BinaryStreamOperator extends StreamOperator {\r\n    constructor(buffer, initPosition) {\r\n        super(\"BinaryStreamOperator\");\r\n\r\n        if (typeof Buffer != 'undefined' && buffer instanceof Buffer) {\r\n            buffer = new Uint8Array(buffer).buffer;\r\n        }\r\n        this.supportBinaryBrackets = false;\r\n        this.version = -1;\r\n        this._buffer = buffer;\r\n        this._dv = new DataView(buffer);\r\n        this._position = initPosition;\r\n        this._beginPositions = [];\r\n        this._blockSizes = [];\r\n    }\r\n\r\n    isBinary() {\r\n        return true;\r\n    }\r\n\r\n    advanceToCurrentEndBracket() {\r\n        if (this.supportBinaryBrackets && this._beginPositions.length > 0) {\r\n            let position = this._beginPositions.pop();\r\n            position += this._blockSizes.pop();\r\n            this._position = position;\r\n        }\r\n    }\r\n\r\n    readObjectProperty(prop) {\r\n        let value = 0;\r\n        if (prop.mapProperty)\r\n            value = this.readInt();\r\n        prop.set(value)\r\n    }\r\n\r\n    readObjectMark(mark) {\r\n        if (this.supportBinaryBrackets) {\r\n            if (mark.name === \"{\") {\r\n                this._beginPositions.push(this._position);\r\n                if (this.version !== -1 && this.version > 148) {\r\n                    // 64bit size\r\n                    let sizeLow = this.readInt();\r\n                    let sizeHigh = this.readInt();\r\n                    if (sizeHigh > Math.pow(2, 21))\r\n                        throw \"Too high value - size of file. nodeJS can manage 2^53 numbers only\";\r\n                    let size = Math.pow(2, 32) * sizeHigh + sizeLow;\r\n                    this._blockSizes.push(size);\r\n                } else {\r\n                    let size = this.readInt();\r\n                    this._blockSizes.push(size);\r\n                }\r\n            }\r\n            else if (mark.name === \"}\" && this._beginPositions.length > 0) {\r\n                this._beginPositions.pop();\r\n                this._blockSizes.pop();\r\n            }\r\n        }\r\n    }\r\n\r\n    readBool() {\r\n        let ch = this.readChar().charCodeAt(0);\r\n        if (ch > 1)\r\n            Log.warn(\"found boolean who is not 0 or 1 - \" + ch + \". may indicate failure in reading binary\")\r\n        return (ch !== 0)\r\n    }\r\n\r\n    readByte() {\r\n        this._position += 1;\r\n        return this._dv.getInt8(this._position - 1);\r\n        //return this._buffer.readInt8(this._position - 1);\r\n    }\r\n\r\n    readUByte() {\r\n        this._position += 1;\r\n        return this._dv.getUint8(this._position - 1);\r\n        //return this._buffer.readUInt8(this._position - 1);\r\n    }\r\n\r\n    readShort() {\r\n        this._position += 2;\r\n        return this._dv.getInt16(this._position - 2, true);\r\n        // return this._buffer.readInt16LE(this._position - 2);\r\n    }\r\n\r\n    readUShort() {\r\n        this._position += 2;\r\n        return this._dv.getUint16(this._position - 2, true);\r\n        // return this._buffer.readUInt16LE(this._position - 2);\r\n    }\r\n\r\n    readInt() {\r\n        this._position += 4;\r\n        return this._dv.getInt32(this._position - 4, true);\r\n        // return this._buffer.readInt32LE(this._position - 4);\r\n    }\r\n\r\n    readUInt() {\r\n        this._position += 4;\r\n        return this._dv.getUint32(this._position - 4, true);\r\n        // return this._buffer.readUInt32LE(this._position - 4);\r\n    }\r\n\r\n    readFloat() {\r\n        this._position += 4;\r\n        return this._dv.getFloat32(this._position - 4, true);\r\n        // return this._buffer.readFloatLE(this._position - 4);\r\n    }\r\n\r\n    readDouble() {\r\n        this._position += 8;\r\n        return this._dv.getFloat64(this._position - 8, true);\r\n        // return this._buffer.readDoubleLE(this._position - 8);\r\n    }\r\n\r\n    readChar() {\r\n        // this._position += 1;\r\n        var ch = this.readUByte();\r\n        return String.fromCharCode(ch); //this._buffer.toString(\"ASCII\", this._position - 1, this._position);\r\n    }\r\n\r\n    readString() {\r\n        let size = this.readUInt();\r\n        this._position += size;\r\n        var bytes = new Uint8Array(this._buffer, this._position - size, size);\r\n        return String.fromCharCode.apply(null, bytes);\r\n        // return this._buffer.toString(\"ASCII\", this._position - size, this._position);\r\n    }\r\n\r\n    readWrappedString() {\r\n        return this.readString();\r\n    }\r\n\r\n    readGLEnum(objectGLEnum) {\r\n        objectGLEnum.value = this.readUInt();\r\n    }\r\n\r\n    readBuffer(size) {\r\n        let subBuffer = new Uint8Array(this._buffer, this._position, size) //new Buffer(size);\r\n        // this._buffer.copy(subBuffer, 0, this._position, this._position + size);\r\n        this._position += size;\r\n        return subBuffer;\r\n    }\r\n}\r\n\r\nexport { BinaryStreamOperator };",
    "import { } from  \"../TypeSerializers/_SerializerInitiator.js\";\n\r\nimport { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { DataTypes } from  \"../Common/DataTypes.js\";\n\r\nimport { Constants } from  \"../Common/Constants.js\";\n\r\nimport { Image } from  \"../OsgTypes/Image.js\";\n\r\nimport { ObjectProperty } from  \"../Common/DataTypes.js\";\n\r\nimport { Log } from  \"../Common/Log.js\";\n\r\nimport { Base64Encoder } from  \"../Common/Base64Encoder.js\";\n\r\nimport { ImageType } from  \"../Enum/ImageType.js\";\n\r\nconst TypeIds=Constants.TypeIds;\r\nconst IMAGE_INLINE_DATA = 0;\r\nconst IMAGE_INLINE_FILE = 1;\r\nconst IMAGE_EXTERNAL = 2;\r\nconst IMAGE_WRITE_OUT = 3;\r\n\r\n\r\nfunction readProperty(stream, value) {\r\n    stream.inputOperator.readObjectProperty(stream.PROPERTY.set(value));\r\n}\r\n\r\nfunction getTypeReader(stream, type) {\r\n    if (stream.typeReaderMap[type]) {\r\n        return stream.typeReaderMap[type];\r\n    }\r\n\r\n    let funcName = \"read\" + type;\r\n\r\n    let reader;\r\n    // if the function exists in the InputOperator\r\n    let typeReaderFunction = stream.inputOperator[funcName];\r\n    if (typeReaderFunction)\r\n        reader = typeReaderFunction.bind(stream.inputOperator);\r\n\r\n    // if the function exists in the InputStream\r\n    typeReaderFunction = stream[funcName];\r\n    if (typeReaderFunction)\r\n        reader = typeReaderFunction.bind(stream);\r\n\r\n    if (reader) {\r\n        stream.typeReaderMap[type] = reader;\r\n        return reader;\r\n    }\r\n    throw \"reader type: \" + type + \" not found\";\r\n}\r\nfunction readVectorFromReader(size, reader) {\r\n    let arr = []; // todo when reading array of vectors - maybe use single array fot all\r\n    for (let i = 0; i < size; i++)\r\n        arr.push(reader());\r\n    return arr;\r\n}\r\n\r\nfunction readArrayImplementation(stream, readFunction, typeCtor, itemSize) {\r\n    let size = stream.inputOperator.readInt();\r\n    stream.readBeginBracket();\r\n\r\n\r\n    let arr = {\r\n        Value: [],\r\n        Type: typeCtor.name,\r\n        Count: size,\r\n        ItemSize: itemSize\r\n    };\r\n\r\n    if (size > 0) {\r\n        // presets the size of arr so the array will not be extended with every push\r\n        // arr[size - 1] = null;\r\n\r\n        if (stream.isBinary()) {\r\n            var BYTES_PER_ELEMENT = typeCtor.BYTES_PER_ELEMENT;\r\n            var subBuffer = stream.inputOperator.readBuffer(size * itemSize * BYTES_PER_ELEMENT);\r\n            subBuffer = subBuffer.slice().buffer;\r\n            arr.Value = new typeCtor(subBuffer);\r\n        }\r\n        else {\r\n            arr.Value = new typeCtor(size * itemSize);\r\n            let vIdx = 0;\r\n            for (let i = 0; i < size; i++) {\r\n                let itemValue = readFunction();\r\n                for (let j = 0; j < itemSize; j++) {\r\n                    arr.Value[vIdx++] = itemValue[j];\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // if (arr.Value) {\r\n    //     var vals = [];\r\n    //     for (let i = 0; i < arr.Value.length; i++) {\r\n    //         const element = arr.Value[i];\r\n    //         vals.push(element);\r\n    //     }\r\n    //     arr.Value = vals;\r\n    // }\r\n\r\n    stream.readEndBracket();\r\n    return arr\r\n}\r\n\r\nclass InputStream {\r\n    constructor(inputOperator) {\r\n        /**\r\n         * @type StreamOperator\r\n         */\r\n        this.inputOperator = inputOperator;\r\n        this._identifierMap = {};\r\n        this._arrayMap = {};\r\n        this._fields = [];\r\n        this.typeReaderMap = {};\r\n\r\n        this.PROPERTY = new DataTypes.ObjectProperty();\r\n        this.BEGIN_BRACKET = new DataTypes.ObjectMark(\"{\", +Constants.INDENT_VALUE);\r\n        this.END_BRACKET = new DataTypes.ObjectMark(\"}\", -Constants.INDENT_VALUE);\r\n    }\r\n\r\n    readObject(existingObj) {\r\n        let className = this.inputOperator.readString();\r\n        if (className === \"NULL\")\r\n            return null;\r\n        // console.log(className);\r\n\r\n        this.readBeginBracket();\r\n        readProperty(this, \"UniqueID\");\r\n\r\n        if (!ObjectWrapperManager.findWrapper(className)) {//\r\n            console.warn(className + \": wrapper for class not found\");\r\n            this.advanceToCurrentEndBracket();\r\n            return existingObj;\r\n        }\r\n\r\n        let obj, id = this.inputOperator.readUInt();\r\n        if (this._identifierMap[id]) {\r\n            this.advanceToCurrentEndBracket();\r\n            obj = this._identifierMap[id];\r\n        } else {\r\n            obj = this.readObjectFields(className, id, existingObj);\r\n            this.advanceToCurrentEndBracket();\r\n        }\r\n        // console.log(obj);\r\n        return obj;\r\n    };\r\n\r\n    readObjectOfType(/*type*/) {\r\n        return this.readObject();\r\n    };\r\n\r\n    readBeginBracket() {\r\n        this.inputOperator.readObjectMark(this.BEGIN_BRACKET)\r\n    };\r\n\r\n    readEndBracket() {\r\n        this.inputOperator.readObjectMark(this.END_BRACKET)\r\n    };\r\n\r\n    readMatrix(type) {\r\n        let reader = getTypeReader(this, type);\r\n        let arr = [];\r\n        for (let i = 0; i < 16; i++)\r\n            arr.push(reader());\r\n        return arr;\r\n    }\r\n\r\n    readPrimitiveSet() {\r\n        if (this.getVersion() >= 112)\r\n            return this.readObjectOfType(\"osg::PrimitiveSet\");\r\n        else {\r\n            let numInstances = 0, primitive = null;\r\n            let type = new ObjectProperty(\"PrimitiveType\", 0, true);\r\n            let mode = new ObjectProperty(\"PrimitiveType\", 0, true);\r\n\r\n            const inputOperator = this.inputOperator;\r\n            inputOperator.readObjectProperty(type);\r\n            inputOperator.readObjectProperty(mode);\r\n            if (this.getVersion() > 96)\r\n                numInstances = inputOperator.readUInt();\r\n\r\n            if (type.value === TypeIds.ID_DRAWARRAYS) {\r\n                let first = inputOperator.readInt();\r\n                let count = inputOperator.readInt();\r\n                primitive = { // osg::DrawArrays\r\n                    First: first,\r\n                    Count: count,\r\n                    Mode: mode.value,\r\n                    NumInstances: numInstances\r\n                }\r\n            } else if (type.value === TypeIds.ID_DRAWARRAY_LENGTH) {\r\n                let first = inputOperator.readInt();\r\n                let size = inputOperator.readUInt();\r\n                this.readBeginBracket();\r\n                let typeCtor = Int32Array;\r\n                primitive = { // osg::DrawArrayLengths\r\n                    First: first,\r\n                    Mode: mode.value,\r\n                    Indices: {\r\n                        ItemSize: 1,\r\n                        Type: typeCtor.name,\r\n                        Value: [],\r\n                        Count: size\r\n                    },\r\n                    NumInstances: numInstances\r\n                };\r\n                if (this.isBinary()) {\r\n                    primitive.Indices.Value = new typeCtor(inputOperator._buffer, inputOperator._position, size);\r\n                    inputOperator._position += size;\r\n                }\r\n                else {\r\n                    primitive.Indices.Value = new typeCtor(size);\r\n                    for (let i = 0; i < size; i++) {\r\n                        primitive.Indices.Value[i] = inputOperator.readInt();\r\n                    }\r\n                }\r\n                this.readEndBracket();\r\n\r\n            } else if (type.value === TypeIds.ID_DRAWELEMENTS_UBYTE) {\r\n                let typeCtor = Uint8Array;\r\n                let size = inputOperator.readUInt();\r\n\r\n                primitive = { // osg::DrawElementsUByte\r\n                    Mode: mode.value,\r\n                    Indices: {\r\n                        ItemSize: 1,\r\n                        Type: typeCtor.name,\r\n                        Value: [],\r\n                        Count: size\r\n                    },\r\n                    NumInstances: numInstances\r\n                };\r\n                this.readBeginBracket();\r\n\r\n                if (this.isBinary()) {\r\n                    primitive.Indices.Value = new typeCtor(inputOperator._buffer, inputOperator._position, size);\r\n                    inputOperator._position += size;\r\n                }\r\n                else {\r\n                    primitive.Indices.Value = new typeCtor(size);\r\n                    for (let i = 0; i < size; i++) {\r\n                        primitive.Indices.Value[i] = inputOperator.readUByte();\r\n                    }\r\n                }\r\n                this.readEndBracket();\r\n            } else if (type.value === TypeIds.ID_DRAWELEMENTS_USHORT) {\r\n                let typeCtor = Uint16Array;\r\n                let size = inputOperator.readUInt();\r\n                primitive = { // osg::DrawElementsUShort\r\n                    Mode: mode.value,\r\n                    Indices: {\r\n                        ItemSize: 1,\r\n                        Type: typeCtor.name,\r\n                        Value: [],\r\n                        Count: size\r\n                    },\r\n                    NumInstances: numInstances\r\n                };\r\n                this.readBeginBracket();\r\n                if (this.isBinary()) {\r\n                    var BYTES_PER_ELEMENT = typeCtor.BYTES_PER_ELEMENT\r\n                    let subBuffer = inputOperator.readBuffer(size * BYTES_PER_ELEMENT);\r\n                    subBuffer = subBuffer.slice().buffer;\r\n                    primitive.Indices.Value = new typeCtor(subBuffer);\r\n                }\r\n                else {\r\n                    primitive.Indices.Value = new typeCtor(size);\r\n                    for (let i = 0; i < size; i++) {\r\n                        primitive.Indices.Value[i] = inputOperator.readUShort();\r\n                    }\r\n                }\r\n\r\n                this.readEndBracket();\r\n            } else if (type.value === TypeIds.ID_DRAWELEMENTS_UINT) {\r\n                let typeCtor = Uint32Array;\r\n                let size = inputOperator.readUInt();\r\n                primitive = { // osg::DrawElementsUInt\r\n                    Mode: mode.value,\r\n                    Indices: {\r\n                        ItemSize: 1,\r\n                        Type: typeCtor.name,\r\n                        Value: [],\r\n                        Count: size\r\n                    },\r\n                    NumInstances: numInstances\r\n                };\r\n                this.readBeginBracket();\r\n                if (this.isBinary()) {\r\n                    var BYTES_PER_ELEMENT = typeCtor.BYTES_PER_ELEMENT\r\n                    let subBuffer = inputOperator.readBuffer(size * BYTES_PER_ELEMENT);\r\n                    subBuffer = subBuffer.slice().buffer;\r\n                    primitive.Indices.Value = new typeCtor(subBuffer);\r\n                }\r\n                else {\r\n                    primitive.Indices.Value = new typeCtor(size);\r\n                    for (let i = 0; i < size; i++) {\r\n                        primitive.Indices.Value[i] = inputOperator.readUInt();\r\n                    }\r\n                }\r\n\r\n                this.readEndBracket();\r\n            } else {\r\n                throw \"InputStream.readPrimitiveSet: \" + type.value + \" ID not found\";\r\n            }\r\n            return primitive;\r\n        }\r\n    }\r\n\r\n    readProperty(value) {\r\n        return readProperty(this, value);\r\n        // this.inputOperator.readObjectProperty(this.PROPERTY.set(value));\r\n    }\r\n\r\n    // getTypeReader(type) {\r\n    //     if (this.typeReaderMap[type]) {\r\n    //         return this.typeReaderMap[type];\r\n    //     }\r\n\r\n    //     let funcName = \"read\" + type;\r\n\r\n    //     let reader;\r\n    //     // if the function exists in the InputOperator\r\n    //     let typeReaderFunction = this.inputOperator[funcName];\r\n    //     if (typeReaderFunction)\r\n    //         reader = typeReaderFunction.bind(this.inputOperator);\r\n\r\n    //     // if the function exists in the InputStream\r\n    //     typeReaderFunction = this[funcName];\r\n    //     if (typeReaderFunction)\r\n    //         reader = typeReaderFunction.bind(this);\r\n\r\n    //     if (reader) {\r\n    //         this.typeReaderMap[type] = reader;\r\n    //         return reader;\r\n    //     }\r\n    //     throw \"reader type: \" + type + \" not found\";\r\n    // }\r\n\r\n    // readVectorFromReader(size, reader) {\r\n    //     let arr = []; // todo when reading array of vectors - maybe use single array fot all\r\n    //     for (let i = 0; i < size; i++)\r\n    //         arr.push(reader());\r\n    //     return arr;\r\n    // }\r\n\r\n    readVectorOfType(size, type) {\r\n        return readVectorFromReader(size, getTypeReader(this, type));\r\n    }\r\n\r\n    readArray() {\r\n        const scope = this;\r\n        let array = null;\r\n        readProperty(this, \"ArrayID\");\r\n        const inputOperator = this.inputOperator;\r\n        let id = inputOperator.readUInt(\"ArrayID\");\r\n        if (this._arrayMap[id])\r\n            return this._arrayMap[id];\r\n\r\n        let type = new ObjectProperty(\"ArrayType\", 0, true);\r\n        inputOperator.readObjectProperty(type);\r\n        let io = inputOperator;\r\n        let itemSize = 1;\r\n\r\n        if (type.value === TypeIds.ID_BYTE_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readByte(), Int8Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_UBYTE_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readUByte(), Uint8Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_SHORT_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readShort(), Int16Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_USHORT_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readUShort(), Uint16Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_INT_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readInt(), Int32Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_UINT_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readUInt(), Uint32Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_FLOAT_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readFloat(), Float32Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_DOUBLE_ARRAY) {\r\n            array = readArrayImplementation(scope, () => io.readDouble(), Float64Array, itemSize)\r\n        } else if (type.value === TypeIds.ID_VEC2B_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"Byte\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Int8Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3B_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"Byte\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Int8Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4B_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"Byte\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Int8Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2UB_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"UByte\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Uint8Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3UB_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"UByte\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Uint8Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4UB_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"UByte\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Uint8Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2S_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"Short\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Int16Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3S_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"Short\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Int16Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4S_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"Short\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Int16Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2US_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"UShort\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Uint16Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3US_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"UShort\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Uint16Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4US_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"UShort\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Uint16Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"Float\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Float32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"Float\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Float32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"Float\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Float32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2D_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"Double\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Float64Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3D_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"Double\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Float64Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4D_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"Double\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Float64Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2I_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"Int\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Int32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3I_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"Int\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Int32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4I_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"Int\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Int32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC2UI_ARRAY) {\r\n            itemSize = 2;\r\n            let reader = getTypeReader(scope, \"UInt\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(2, reader),\r\n                Uint32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC3UI_ARRAY) {\r\n            itemSize = 3;\r\n            let reader = getTypeReader(scope, \"UInt\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(3, reader),\r\n                Uint32Array, itemSize\r\n            );\r\n        } else if (type.value === TypeIds.ID_VEC4UI_ARRAY) {\r\n            itemSize = 4;\r\n            let reader = getTypeReader(scope, \"UInt\");\r\n            array = readArrayImplementation(scope, () => readVectorFromReader(4, reader),\r\n                Uint32Array, itemSize\r\n            );\r\n        } else {\r\n            throw \"InputStream.readArray(): Unsupported array type.\"\r\n        }\r\n        this._arrayMap[id] = array;\r\n        return array;\r\n\r\n    }\r\n\r\n    // readArrayImplementation(readFunction, typeCtor, itemSize) {\r\n    //     let size = this.inputOperator.readInt();\r\n    //     this.readBeginBracket();\r\n\r\n\r\n    //     let arr = {\r\n    //         Value: [],\r\n    //         Type: typeCtor.name,\r\n    //         Count: size,\r\n    //         ItemSize: itemSize\r\n    //     };\r\n\r\n    //     if (size > 0) {\r\n    //         // presets the size of arr so the array will not be extended with every push\r\n    //         // arr[size - 1] = null;\r\n\r\n    //         if (this.isBinary()) {\r\n    //             var BYTES_PER_ELEMENT = typeCtor.BYTES_PER_ELEMENT;\r\n    //             var subBuffer = this.inputOperator.readBuffer(size * itemSize * BYTES_PER_ELEMENT);\r\n    //             subBuffer = subBuffer.slice().buffer;\r\n    //             arr.Value = new typeCtor(subBuffer);\r\n    //         }\r\n    //         else {\r\n    //             arr.Value = new typeCtor(size * itemSize);\r\n    //             let vIdx = 0;\r\n    //             for (let i = 0; i < size; i++) {\r\n    //                 let itemValue = readFunction();\r\n    //                 for (let j = 0; j < itemSize; j++) {\r\n    //                     arr.Value[vIdx++] = itemValue[j];\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     }\r\n\r\n    //     // if (arr.Value) {\r\n    //     //     var vals = [];\r\n    //     //     for (let i = 0; i < arr.Value.length; i++) {\r\n    //     //         const element = arr.Value[i];\r\n    //     //         vals.push(element);\r\n    //     //     }\r\n    //     //     arr.Value = vals;\r\n    //     // }\r\n\r\n    //     this.readEndBracket();\r\n    //     return arr\r\n    // }\r\n\r\n    getVersion(/*domain*/) { // domain currently not implemented\r\n        return this.inputOperator.version;\r\n    }\r\n\r\n    advanceToCurrentEndBracket() {\r\n        this.inputOperator.advanceToCurrentEndBracket();\r\n    };\r\n\r\n    isBinary() {\r\n        return this.inputOperator.isBinary();\r\n    }\r\n\r\n    readObjectFields(classname, id, existingObj) {\r\n        // console.log(classname);\r\n        let wrapper = ObjectWrapperManager.findWrapper(classname);\r\n        if (!wrapper) {\r\n            console.warn(classname + \": wrapper for class not found\");\r\n            this.advanceToCurrentEndBracket();\r\n            return;\r\n        }\r\n        let inputVersion = this.inputOperator.version;\r\n        let obj = existingObj || wrapper.createInstance();\r\n        this._identifierMap[id] = obj;\r\n        wrapper.associates.forEach(associate => {\r\n            if (associate.minVersion <= inputVersion && associate.maxVersion >= inputVersion) {\r\n                let associateWrapper = ObjectWrapperManager.findWrapper(associate.name);\r\n                if (!associateWrapper) {\r\n                    Log.warn(associate.name + \": wrapper for associate not found. continuing to next associate\");\r\n                } else {\r\n                    this._fields.push(associateWrapper.getName());\r\n                    associateWrapper.read(this, obj);\r\n                    this._fields.pop();\r\n                }\r\n            } else {\r\n                // associate is not supported in version\r\n            }\r\n        });\r\n        return obj\r\n    }\r\n\r\n    readImage(readFromExternal = true) {\r\n        const scope = this;\r\n        const inputOperator = scope.inputOperator;\r\n        if (scope.getVersion() > 94) {\r\n            readProperty(scope, \"ClassName\");\r\n            inputOperator.readString();\r\n        }\r\n        readProperty(scope, \"UniqueID\");\r\n        let id = inputOperator.readUInt();\r\n        if (scope._identifierMap[id]) {\r\n            return scope._identifierMap[id];\r\n        }\r\n        readProperty(scope, \"FileName\");\r\n        let name = inputOperator.readWrappedString();\r\n        readProperty(scope, \"WriteHint\");\r\n        let writeHint = inputOperator.readInt();\r\n        let decision = inputOperator.readInt();\r\n        let image = null;\r\n\r\n        if (decision === IMAGE_INLINE_DATA) {\r\n            if (this.isBinary()) {\r\n\r\n                let origin = inputOperator.readInt();\r\n                let s = inputOperator.readInt();\r\n                let t = inputOperator.readInt();\r\n                let r = inputOperator.readInt();\r\n                let internalFormat = inputOperator.readInt();\r\n                let pixelFormat = inputOperator.readInt();\r\n                let dataType = inputOperator.readInt();\r\n                let packing = inputOperator.readInt();\r\n                let mode = inputOperator.readInt();\r\n                let size = inputOperator.readUInt();\r\n\r\n                if (size > 0) {\r\n                    let data = inputOperator.readBuffer(size);\r\n                    image = new Image();\r\n                    image.setProperty('ImageType', ImageType.IMAGE_INLINE_DATA)\r\n                    image.setProperty(\"Origin\", origin);\r\n                    image.setImage(s, t, r, internalFormat, pixelFormat, dataType, data, 1);\r\n                }\r\n                let levelSize = inputOperator.readUInt();\r\n                let levels = [];\r\n                for (let i = 0; i < levelSize; i++) {\r\n                    levels.push(inputOperator.readUInt());\r\n                }\r\n                if (image && levelSize > 0)\r\n                    image.setProperty(\"Levels\", levels);\r\n                readFromExternal = false;\r\n            } else { //Ascii\r\n                readProperty(scope, \"Origin\");\r\n                let origin = inputOperator.readInt();\r\n                readProperty(scope, \"Size\");\r\n                let s = inputOperator.readInt();\r\n                let t = inputOperator.readInt();\r\n                let r = inputOperator.readInt();\r\n                readProperty(scope, \"InternalTextureFormat\");\r\n                let internalFormat = inputOperator.readInt();\r\n                readProperty(scope, \"PixelFormat\");\r\n                let pixelFormat = inputOperator.readInt();\r\n                readProperty(scope, \"DataType\");\r\n                let dataType = inputOperator.readInt();\r\n                readProperty(scope, \"Packing\");\r\n                let packing = inputOperator.readInt();\r\n                readProperty(scope, \"AllocationMode\");\r\n                readProperty(scope, \"Data\");\r\n                let levelSize = inputOperator.readUInt() - 1;\r\n                scope.readBeginBracket();\r\n                let encodedData = [];\r\n                // total size: levelSize+1\r\n                for (let i = 0; i <= levelSize; i++) {\r\n                    encodedData.push(inputOperator.readWrappedString());\r\n                }\r\n\r\n                let levels = [];\r\n                Base64Encoder.decodeArray(encodedData, levels);\r\n                levels.pop();\r\n\r\n                scope.readEndBracket();\r\n\r\n                image = new Image();\r\n                image.setProperty('ImageType', ImageType.IMAGE_INLINE_DATA)\r\n                image.setProperty(\"Origin\", origin);\r\n                image.setImage(s, t, r, internalFormat, pixelFormat, dataType, data, mode, packing);\r\n\r\n                if (levelSize > 0)\r\n                    image.setProperty(\"Levels\", levels);\r\n\r\n                readFromExternal = false;\r\n            }\r\n        } else if (decision === IMAGE_INLINE_FILE) {\r\n            if (scope.isBinary()) {\r\n                let size = inputOperator.readUInt();\r\n                let data = inputOperator.readBuffer(size);\r\n\r\n                image = new Image();\r\n                image.setProperty('ImageType', ImageType.IMAGE_INLINE_FILE)\r\n                image.setProperty(\"Data\", data);\r\n                readFromExternal = false;\r\n            }\r\n        }\r\n\r\n        // let loadedFromCache = false; // not implemented\r\n\r\n        if (readFromExternal && name !== \"\") {\r\n            image = new Image();\r\n            image.setProperty('ImageType', ImageType.IMAGE_EXTERNAL)\r\n            image.FileName = name;\r\n            Log.warn(\"InputStream,readImage - reading from external file - not implemented\")\r\n        }\r\n\r\n\r\n        //if(loadedFromCache){}else{}\r\n\r\n        image = scope.readObjectFields(\"osg::Object\", id, image);\r\n        image.setProperty(\"Name\", name);\r\n        image.setProperty(\"WriteHint\", name);\r\n\r\n        scope._identifierMap[id] = image;\r\n        return image;\r\n    }\r\n}\r\n\r\nexport { InputStream };",
    "\r\nimport { InputStream } from  \"./InputStream.js\";\n\r\nimport { DataTypes } from  \"../Common/DataTypes.js\";\n\r\nimport { BinaryStreamOperator } from  \"./BinaryStreamOperator.js\";\n\r\nimport { AsciiStreamOperator } from  \"./AsciiStreamOperator.js\";\n\r\nimport { Log } from  \"../Common/Log.js\";\n\r\n\r\nlet PROPERTY = new DataTypes.ObjectProperty();\r\n\r\nconst OSG_HEADER_LOW = 0x6C910EA1;\r\nconst OSG_HEADER_HIGH = 0x1AFB4545;\r\nconst OSGT_HEADER = \"#Ascii\";\r\n\r\nconst WriteType = {\r\n    WRITE_UNKNOWN: 0,\r\n    WRITE_SCENE: 1,\r\n    WRITE_IMAGE: 2,\r\n    WRITE_OBJECT: 3\r\n};\r\n\r\n/**\r\n *\r\n * @param {buffer} buffer\r\n * @return {object} the serialized node\r\n */\r\nfunction readBuffer(buffer) {\r\n\r\n\r\n    if (typeof Buffer != 'undefined' && buffer instanceof Buffer) {\r\n        buffer = new Uint8Array(buffer).buffer;\r\n    }\r\n\r\n    let reader = new BinaryStreamOperator(buffer, 0);\r\n\r\n    const low = reader.readUInt();\r\n    const high = reader.readUInt();\r\n\r\n    reader._position = 0;\r\n\r\n    let isASCIIFormat = buffer.byteLength >= OSGT_HEADER.length;\r\n    if (isASCIIFormat) {\r\n        var magicBuffer = reader.readBuffer(OSGT_HEADER.length)\r\n        var magic = String.fromCharCode.apply(null, magicBuffer)\r\n        isASCIIFormat = magic === OSGT_HEADER;\r\n    }\r\n\r\n\r\n    let type, version, openscenegraph_soversion, hasDomainVersion;\r\n    if (low === OSG_HEADER_LOW && high === OSG_HEADER_HIGH) {\r\n\r\n        reader._position = 8;\r\n        let useCompressSource, useRobustBinaryFormat;\r\n        type = reader.readUInt();// buf.readUInt32LE(ReadPosition);\r\n        openscenegraph_soversion = reader.readUInt();\r\n        let attributes = reader.readUInt();\r\n        hasDomainVersion = (attributes & 0x1) !== 0;\r\n        useCompressSource = (attributes & 0x2) !== 0;\r\n        useRobustBinaryFormat = (attributes & 0x4) !== 0;\r\n        reader.supportBinaryBrackets = useRobustBinaryFormat;\r\n\r\n\r\n        let next = reader.readString();\r\n\r\n        if (next !== \"0\") {\r\n            throw \"compresses data not supported\";\r\n        }\r\n    }\r\n    else if (isASCIIFormat) {\r\n        Log(\"OSGT File\");\r\n        reader = new AsciiStreamOperator(buffer, OSGT_HEADER.length);\r\n        type = reader.readString();\r\n        reader.goToNextRow();\r\n        type = WriteType[\"WRITE_\" + type.toUpperCase()] || 0;\r\n        reader.readObjectProperty(PROPERTY.set(\"#Version\"));\r\n        openscenegraph_soversion = reader.readUInt();\r\n        reader.goToNextRow();\r\n        reader.readObjectProperty(PROPERTY.set(\"#Generator\"));\r\n        reader.readString(); // Generator Name\r\n        reader.goToNextRow();\r\n        hasDomainVersion = reader.lookForward() === \"#CustomDomain\"\r\n    }\r\n    else {\r\n        console.warn(\"osg-serializer-js: osg format not supported. use  `parseOsg` instead\");\r\n        return false;\r\n    }\r\n\r\n    if (hasDomainVersion) {\r\n        // TODO\r\n        throw new Error(\"osg DomainVersion not supported.\");\r\n\r\n    }\r\n    reader.version = openscenegraph_soversion;\r\n\r\n    let inputStream = new InputStream(reader);\r\n    let startTime = new Date().getTime();\r\n    let obj = inputStream.readObject();\r\n    Log(\"timeElapsed:\", new Date().getTime() - startTime);\r\n    return obj;\r\n\r\n}\r\n\r\n/**\r\n *\r\n * @param {string} path\r\n * @param {function} cb callback function\r\n */\r\nfunction readFile(path, cb) {\r\n    if (!cb) {\r\n        throw \"Call back required\";\r\n    }\r\n    var req = 'require';\r\n    var fs = eval(req + '(\\'fs\\');');\r\n    fs.readFile(path, function (err, data) {\r\n        if (err) cb(err);\r\n        let node;\r\n        try {\r\n            console.log(err, data);\r\n            node = readBuffer(data);\r\n        } catch (e) {\r\n            console.trace(e)\r\n            return cb(e);\r\n        }\r\n        if (!node) {\r\n            return cb(\"Failed to convert file\")\r\n        }\r\n        cb(null, node)\r\n    })\r\n}\r\n\r\n\r\nexport {\r\n    readBuffer,\r\n    readFile\r\n};",
    "function notImplemented(name,funcName){\r\n    throw \"function \" + funcName + \" Not Implemented in \" + name\r\n}\r\nclass StreamOperator {\r\n    constructor(name){\r\n        this.name = name;\r\n    }\r\n    readChar(){notImplemented(this.name,\"readChar\")}\r\n    readUByte(){notImplemented(this.name,\"readUByte\")} // TODO implement in binary\r\n    readByte(){notImplemented(this.name,\"readByte\")} // TODO implement in binary\r\n    readShort(){notImplemented(this.name,\"readShort\")} // TODO implement in binary\r\n    readUShort(){notImplemented(this.name,\"readUShort\")} // TODO implement in binary\r\n    readInt(){notImplemented(this.name,\"readInt\")}\r\n    readUInt(){notImplemented(this.name,\"readUInt\")}\r\n    readBool(){notImplemented(this.name,\"readBool\")}\r\n    readString(){notImplemented(this.name,\"readString\")}\r\n    /** @param {ObjectProperty} prop */\r\n    readObjectProperty(prop){notImplemented(this.name,\"readObjectProperty\")}\r\n    /** @param {ObjectMark} mark */\r\n    readObjectMark(mark){notImplemented(this.name,\"readObjectMark\")}\r\n    advanceToCurrentEndBracket(){notImplemented(this.name,\"advanceToCurrentEndBracket\")}\r\n    isBinary(){notImplemented(this.name,\"isBinary\")}\r\n    readWrappedString(){notImplemented(this.name,\"readWrappedString\")}\r\n    readGLEnum(objectGLEnum){notImplemented(this.name,\"readGLenum\")}\r\n    readFloat(){notImplemented(this.name,\"readFloat\")}\r\n    readDouble(){notImplemented(this.name,\"readDouble\")}\r\n    readBuffer(size){notImplemented(this.name,\"readBuffer\")}\r\n}\r\n\r\nexport {StreamOperator};",
    "import { ObjectClass } from  \"./Object.js\";\n\r\nclass BufferData extends ObjectClass {\r\n    constructor() {\r\n        super();\r\n    }\r\n}\r\nexport { BufferData };",
    "import { StateAttribute } from  \"./StateAttribute.js\";\n\r\nimport { FaceMode } from  \"../Enum/CullFace_FaceMode.js\";\n\r\n\r\nclass CullFace extends StateAttribute {\r\n    constructor() {\r\n        super();\r\n        this.Type = \"osg::CullFace\";\r\n        this.Mode = FaceMode.BACK;\r\n    }\r\n}\r\n\r\nexport { CullFace };",
    "import {UserDataContainer} from  \"./UserDataContainer.js\";\n\r\n\r\nclass DefaultUserDataContainer extends UserDataContainer{\r\n    constructor(){\r\n        super();\r\n\r\n        this.Type = \"Osg::DefaultUserDataContainer\";\r\n    }\r\n}\r\n\r\nexport {DefaultUserDataContainer}",
    "import { Node } from  \"./Node.js\";\n\r\n\r\nclass Drawable extends Node {\r\n    constructor() {\r\n        super();\r\n\r\n        this.InitialBound = null;\r\n        this.BoundingBox = null;\r\n        this.Shape = null;\r\n        this.SupportsDisplayList = true;\r\n        this.UseDisplayList = true;\r\n        this.UseVertexBufferObjects = false;\r\n\r\n        this.Type = \"osg::Drawable\"\r\n    }\r\n}\r\n\r\nexport {Drawable};",
    "import { Group } from  \"./Group.js\";\n\r\nclass Geode extends Group {\r\n    constructor() {\r\n        super();\r\n\r\n        this.Type = \"Osg::Geode\";\r\n    }\r\n}\r\n\r\nexport { Geode };",
    "import { Drawable } from  \"./Drawable.js\";\n\r\n\r\nclass Geometry extends Drawable {\r\n    constructor() {\r\n        super();\r\n        this.Type = \"Osg::Geometry\";\r\n\r\n        this.InitialBound = null;\r\n        this.BoundingBox = null;\r\n\r\n        this.PrimitiveSetList = [];\r\n\r\n        this.TexCoordArray = [];\r\n        this.VertexAttribArray = [];\r\n    }\r\n}\r\n\r\nexport { Geometry };",
    "import { Node } from  \"./Node.js\";\n\r\nclass Group extends Node {\r\n    constructor() {\r\n        super();\r\n\r\n        this.Children = [];\r\n        this.Type = \"Osg::Group\";\r\n    }\r\n}\r\n\r\nexport { Group };",
    "import { BufferData } from  \"./BufferData.js\";\n\r\n\r\nclass Image extends BufferData {\r\n    constructor() {\r\n        super();\r\n\r\n        this.S = 0;\r\n        this.T = 0;\r\n        this.R = 0;\r\n        this.InternalTextureFormat = 0;\r\n        this.PixelFormat = 0;\r\n        this.DataType = 0;\r\n        this.Data = null;\r\n        this.Mode = 0;\r\n        this.Packing = 1;\r\n        this.RowLength = 0;\r\n        this.Origin = 0;\r\n        this.FileName = \"\";\r\n        this.Levels = null;\r\n        this.WriteHint = null;\r\n        this.Type = \"Osg::Image\";\r\n        this.FromExternal=false;\r\n\r\n    }\r\n\r\n    setImage(s, t, r, internalTextureFormat, pixelFormat, dataType, data, aloccationMode, packing = 1, rowLength = 0) {\r\n        this.S = s;\r\n        this.T = t;\r\n        this.R = r;\r\n        this.InternalTextureFormat = internalTextureFormat;\r\n        this.PixelFormat = pixelFormat;\r\n        this.DataType = dataType;\r\n        this.Data = data;\r\n        this.Packing = packing;\r\n        this.Mode = aloccationMode;\r\n        this.RowLength = rowLength;\r\n\r\n    }\r\n}\r\n\r\nexport { Image };",
    "import { Node } from  \"./Node.js\";\n\nimport {CenterMode} from  \"../Enum/CenterMode.js\";\n\nimport {RangeMode} from  \"../Enum/RangeMode.js\";\n\n\nclass LOD extends Node {\n    constructor() {\n        super();\n\n        this.CenterMode =  CenterMode.USE_BOUNDING_SPHERE_CENTER;\n        this.RangeMode = RangeMode.DISTANCE_FROM_EYE_POINT;\n        this.UserCenter = { center: [], radius: 0 };\n        this.RangeList = [];\n        this.Type = \"Osg::LOD\";\n    }\n}\n \n\nexport { LOD };",
    "import { StateAttribute } from  \"./StateAttribute.js\";\n\r\n\r\nclass Material extends StateAttribute {\r\n    constructor() {\r\n        super();\r\n        this.AmbientFrontAndBack = true;\r\n        this.AmbientFront = null;\r\n        this.AmbientBack = null;\r\n\r\n        this.DiffuseFrontAndBack = true;\r\n        this.DiffuseFront = null;\r\n        this.DiffuseBack = null;\r\n\r\n        this.SpecularFrontAndBack = true;\r\n        this.SpecularFront = null;\r\n        this.SpecularBack = null;\r\n\r\n        this.EmissionFrontAndBack = true;\r\n        this.EmissionFront = null;\r\n        this.EmissionBack = null;\r\n\r\n        this.ShininessFrontAndBack = true;\r\n        this.ShininessFront = 0;\r\n        this.ShininessBack = 0;\r\n\r\n        this.Type = \"Osg::Material\";\r\n    }\r\n\r\n}\r\n\r\nexport { Material };",
    "import {Transform} from  \"./Transform.js\";\n\r\nclass MatrixTransform extends Transform{\r\n    constructor(){\r\n        super();\r\n        this.Type = \"Osg::MatrixTransform\";\r\n\r\n        this.Matrix = null;\r\n    }\r\n}\r\n\r\nexport {MatrixTransform};",
    "import { ObjectClass } from  \"./Object.js\";\n\r\n\r\nclass Node extends ObjectClass {\r\n    constructor() {\r\n        super();\r\n\r\n        this.CullingActive = true;\r\n        this.NodeMask = 0xffffffff;\r\n        this.Descriptions = [];\r\n        this.InitialBound = null;\r\n        this.StateSet = null;\r\n\r\n        this.Type = \"Osg::Node\";\r\n    }\r\n}\r\n\r\nexport { Node };",
    "// todo rename to SsgClass\r\nimport { Log } from  \"../Common/Log.js\";\n\r\nclass ObjectClass {\r\n    constructor() {\r\n        this.Name = \"\";\r\n        this.DataVariance = null;\r\n        /** @type {UserDataContainer} */\r\n        this.UserDataContainer = null;\r\n        this.Type = \"Osg::Object\";\r\n    }\r\n\r\n    /**\r\n     * @param {string} name\r\n     * @param {*} value\r\n     */\r\n    setProperty(name, value) {\r\n        // TODO all properties in all objects should start whit LowerCase\r\n        if (this[name] === undefined) {\r\n            Log.warn(\"setProperty: \" + this.Type + \".\" + name + \" have not been defined\");\r\n        }\r\n        this[name] = value;\r\n    }\r\n    /**\r\n     * @param {string} name\r\n     * @return {*}\r\n     */\r\n    getProperty(name) {\r\n        // TODO all properties in all objects should start whit LowerCase\r\n        if (this[name] === undefined) {\r\n            Log.warn(\"getProperty: \" + this.Type + \".\" + name + \" have not been defined\");\r\n        }\r\n        return this[name];\r\n    }\r\n}\r\n\r\nexport {ObjectClass};",
    "import {BufferData} from  \"./BufferData.js\";\n\r\nclass OsgArray extends BufferData{\r\n    constructor(){\r\n        super();\r\n        this.Binding = null;\r\n        this.Normalize = false;\r\n    }\r\n}\r\n\r\nexport {OsgArray};",
    "import { LOD } from  \"./LOD.js\";\n\nclass PagedLOD extends LOD {\n    constructor() {\n        super();\n\n        this.DatabasePath = '';\n        this.FileNames = [];\n        this.PriorityOffset = [];\n        this.PriorityScale = [];\n\n        this.FrameNumberOfLastTraversal = 0;\n        this.NumChildrenThatCannotBeExpired = 0;\n        this.DisableExternalChildrenPaging = false;\n        this.Children = [];\n\n        this.Type = \"Osg::PagedLOD\";\n    }\n}\n\n\nexport { PagedLOD };",
    "import {StateAttribute} from  \"./StateAttribute.js\";\n\r\n\r\nclass ShadeModel extends StateAttribute {\r\n    constructor() {\r\n        super();\r\n        this.Mode = null;\r\n        this.Type='Osg::ShadeModel'\r\n    }\r\n}\r\n\r\nexport {ShadeModel};",
    "import {ObjectClass}from  \"./Object.js\";\n\r\nclass StateAttribute extends ObjectClass{\r\n    constructor(){\r\n        super();\r\n\r\n        this.Type = \"Osg::StateAttribute\";\r\n    }\r\n\r\n    getMember(){\r\n        return 0;\r\n    }\r\n\r\n    getTypeMemberPair(){\r\n        return {\r\n            type: this.Type,\r\n            member: this.getMember()\r\n        }\r\n    }\r\n}\r\n\r\nexport {StateAttribute};",
    "import { ObjectClass } from  \"./Object.js\";\n\r\nimport { RenderingHint } from  \"../Enum/StateSet_RenderingHint.js\";\n\r\nimport { RenderBinMode } from  \"../Enum/StateSet_RenderBinMode.js\";\n\r\n\r\nclass StateSet extends ObjectClass {\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        this.ModeList = [];\r\n        this.AttributeList = [];\r\n        this.TextureModeList = [];\r\n        this.TextureAttributeList = [];\r\n        this.UniformList = [];\r\n        this.RenderingHint = RenderingHint.DEFAULT_BIN;\r\n        this.RenderBinMode = RenderBinMode.INHERIT_RENDERBIN_DETAILS;\r\n        this.BinNumber = 0;\r\n        this.BinName = \"\";\r\n        this.NestRenderBins = true;\r\n        this.DefineList = {};\r\n\r\n        this.Type = \"Osg::StateSet\";\r\n    }\r\n}\r\n\r\nexport { StateSet };",
    "import { StateAttribute } from  \"./StateAttribute.js\";\n\r\nimport { InternalFormatMode } from  \"../Enum/Texture_InternalFormatMode.js\";\n\r\nclass Texture extends StateAttribute {\r\n    constructor() {\r\n        super();\r\n\r\n        this.InternalFormatMode = 0;\r\n        this.InternalFormat = 0;\r\n        this.Type = \"Osg::Texture\";\r\n    }\r\n\r\n    computeInternalFormatType() {\r\n        // TODO\r\n    }\r\n\r\n    setInternalFormat(internalFormat) {\r\n        this.InternalFormatMode = InternalFormatMode.USE_USER_DEFINED_FORMAT;\r\n        this.InternalFormat = internalFormat;\r\n        computeInternalFormatType();\r\n    }\r\n\r\n}\r\n\r\nexport { Texture };",
    "import { Texture } from  \"./Texture.js\";\n\r\n\r\nclass Texture2D extends Texture {\r\n    constructor() {\r\n        super();\r\n\r\n        this.Image = null;\r\n        this.TextureWidth = 0;\r\n        this.TextureHeight = 0;\r\n        this.Type = \"Osg::Texture2D\";\r\n    }\r\n}\r\n\r\nexport { Texture2D };",
    "import {Group} from  \"./Group.js\";\n\r\nclass Transform extends Group{\r\n    constructor(){\r\n        super();\r\n        this.Type = \"Osg::Transform\";\r\n\r\n        this.ReferenceFrame = 0;\r\n    }\r\n}\r\n\r\nexport {Transform};",
    "import { ObjectClass } from  \"./Object.js\";\n\r\n\r\nclass UserDataContainer extends ObjectClass {\r\n    constructor() {\r\n        super();\r\n\r\n        this.DescriptionList = [];\r\n        this.ObjectList = [];\r\n        this.UserData = null;\r\n\r\n        this.Type = \"Osg::UserDataContainer\";\r\n    }\r\n}\r\n\r\nexport { UserDataContainer }",
    "class Associate {\r\n    constructor(_name, options = {}) {\r\n        this.name = _name;\r\n        this.minVersion = options.minVersion || 0;\r\n        this.maxVersion = options.maxVersion || 100000000;\r\n    }\r\n}\r\n\r\nexport {Associate};",
    "class BaseSerializer {\r\n    /**\r\n     * @constructor\r\n     * @param {string} name\r\n     * @param options\r\n     * @param {number} options.minVersion first osgb/osgb version in which this serializer is defind\r\n     * @param {number} options.maxVersion last osgb/osgb version in which this serializer is defind\r\n     */\r\n    constructor(name, options = {}) {\r\n        this._options = options;\r\n        this._name = name;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {string}\r\n     */\r\n    getName() {\r\n        return this._name\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {number}\r\n     */\r\n    getMinVersion() { // TODO replace getMinVersion & getMaxVersion --> is supported in version\r\n        return this._options.minVersion || 0;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @returns {number}\r\n     */\r\n    getMaxVersion() {\r\n        return this._options.maxVersion || 1000000000;\r\n    }\r\n\r\n    /**\r\n     *\r\n     * @param {InputStream} inputStream\r\n     * @param {ObjectClass} object\r\n     */\r\n    read (inputStream,object){\r\n        throw \"BaseSerializer.read not implemented\";\r\n    }\r\n}\r\n\r\nexport {BaseSerializer};",
    "import { Log } from  \"../Common/Log.js\";\n\r\nimport { BaseSerializer } from  \"./BaseSerializer.js\";\n\r\n\r\nfunction reverseMap(map) {\r\n    var ret = {};\r\n    Object.keys(map).forEach(key => {\r\n        let val = map[key];\r\n        if (ret[val])\r\n            Log.warn(\"EnumSerializer: Duplicate value: \" + ret[val] + \", \" + key);\r\n        ret[val] = key;\r\n    });\r\n    return ret;\r\n}\r\n\r\nclass EnumSerializer extends BaseSerializer {\r\n\r\n    constructor(name, enumMap, defaultValue, options) {\r\n        super(name, options);\r\n\r\n        this._defaultValue = defaultValue;\r\n        this._enumMap = enumMap;\r\n        this._reverseMap = reverseMap(enumMap);\r\n    }\r\n\r\n    /** @override */\r\n    read(inputStream, object) {\r\n        if (inputStream.isBinary()) {\r\n            let value = inputStream.inputOperator.readInt()\r\n            if (!this._reverseMap.hasOwnProperty(value)) {\r\n                Log.warn(\"EnumSerializer: failed to find ENUM value \" + value + \" for serializer \" + this.getName() + \". Setting to default value.\")\r\n                value = this._defaultValue;\r\n            }\r\n            object.setProperty(this.getName(), value);\r\n        }\r\n        else if (inputStream.inputOperator.matchString(this.getName())) {\r\n            let key = inputStream.inputOperator.readString();\r\n            let value = this._enumMap[key];\r\n            if (!this._enumMap.hasOwnProperty(key)) {\r\n                Log.warn(\"EnumSerializer: failed to find ENUM key \" + key + \" for serializer \" + this.getName() + \". Setting to default value.\")\r\n                value = this._defaultValue;\r\n            }\r\n            object.setProperty(this.getName(), value);\r\n        }\r\n    }\r\n}\r\n\r\nexport { EnumSerializer };",
    "\r\nimport { BaseSerializer } from  \"./BaseSerializer.js\";\n\r\n\r\nclass ImageSerializer extends BaseSerializer {\r\n\r\n    constructor(name, defaultValue, options) {\r\n        super(name, options);\r\n\r\n        this._defaultValue = defaultValue;\r\n    }\r\n\r\n    /** @override */\r\n    read(inputStream, object) {\r\n        if (inputStream.isBinary()) {\r\n            let hasImage = inputStream.inputOperator.readBool();\r\n\r\n            if (hasImage) {\r\n                var name = this.getName(), image = inputStream.readImage();\r\n                object.setProperty(name, image);\r\n            }\r\n        }\r\n        else if (inputStream.inputOperator.matchString(this.getName())) {\r\n            let hasImage = inputStream.inputOperator.readBool();\r\n            if (hasImage) {\r\n                inputStream.readBeginBracket();\r\n                object.setProperty(this.getName(), inputStream.readImage());\r\n                inputStream.readEndBracket();\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport { ImageSerializer };",
    "import {BaseSerializer} from  \"./BaseSerializer.js\";\n\r\n\r\n/**\r\n *\r\n * @param {InputStream} inputStream\r\n * @param {string} type\r\n * @return {function}\r\n */\r\nfunction getTypeReaderFunction(inputStream, type) {\r\n    let funcName = \"read\" + type;\r\n\r\n    // if the function exists in the InputOperator\r\n    let typeReaderFunction = inputStream.inputOperator[funcName];\r\n    if(typeReaderFunction)\r\n        return typeReaderFunction.bind(inputStream.inputOperator);\r\n\r\n    // if the function exists in the InputStream\r\n    typeReaderFunction = inputStream[funcName];\r\n    if(typeReaderFunction)\r\n        return typeReaderFunction.bind(inputStream);\r\n\r\n    throw \"reader type: \" + type + \" not found\";\r\n}\r\n\r\n\r\n\r\nclass MatrixSerializer extends BaseSerializer {\r\n    constructor(name, options = {}) {\r\n        super(name, options);\r\n\r\n        this._type = options.type || \"Double\";\r\n    }\r\n\r\n    /** @override */\r\n    read(inputStream, object) {\r\n\r\n        let matrix = [];\r\n        if (inputStream.isBinary()) {\r\n            inputStream.readMatrix(this._type);\r\n        }\r\n        else if(inputStream.inputOperator.matchString(this.getName())){\r\n            inputStream.readMatrix(this._type);\r\n        }\r\n\r\n        if(matrix){\r\n            object.setProperty(this.getName(), matrix);\r\n        }\r\n    }\r\n}\r\n\r\nexport {MatrixSerializer};",
    "import { BaseSerializer } from  \"./BaseSerializer.js\";\n\r\n\r\nclass ObjectCallbackSerializer extends BaseSerializer {\r\n    constructor(name, options) {\r\n        super(name, options);\r\n    }\r\n\r\n    read(inputStream, object) {\r\n        let hasObject = false;\r\n        if (inputStream.isBinary()) {\r\n            hasObject = inputStream.inputOperator.readBool();\r\n        } else if (inputStream.inputOperator.matchString(this.getName())) {\r\n            hasObject = inputStream.inputOperator.readBool();\r\n        }\r\n\r\n        if (hasObject) {\r\n            throw (\"callback object serializing is NOT SUPPORTED - property: \" + this.getName());\r\n        }\r\n    }\r\n}\r\n\r\nexport { ObjectCallbackSerializer };",
    "import {BaseSerializer} from  \"./BaseSerializer.js\";\n\r\n\r\nclass ObjectSerializer extends BaseSerializer {\r\n    constructor(name, defaultValue, options) {\r\n        super(name, options);\r\n        this._defaultValue = defaultValue;\r\n    }\r\n\r\n    read(inputStream, object) {\r\n        if (inputStream.isBinary()) {\r\n            let hasObject = inputStream.inputOperator.readBool();\r\n            if (hasObject) {\r\n                object[this._name] = inputStream.readObjectOfType()\r\n            }\r\n        } else if (inputStream.inputOperator.matchString(this._name)) {\r\n            let hasObject = inputStream.inputOperator.readBool();\r\n            if (hasObject) {\r\n                inputStream.readBeginBracket();\r\n                object[this._name] = inputStream.readObjectOfType()\r\n                inputStream.readEndBracket();\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport {ObjectSerializer};",
    "\r\nimport { Associate } from  \"./Associate.js\";\n\r\nimport { Log } from  \"../Common/Log.js\";\n\r\n\r\nclass ObjectWrapper {\r\n    /**\r\n     * constructor of ObjectWrapper\r\n     * @param {string} name\r\n     * @param {string[]|Associate[]}associates\r\n     * @param {function} typeConstructor\r\n     * @param {object} [options]\r\n     */\r\n    constructor(name, associates, typeConstructor, options = {}) {\r\n        this._name = name;\r\n        this._typeCtor = typeConstructor;\r\n        this.associates = associates.map(associate => {\r\n            if (typeof associate === \"string\")\r\n                return new Associate(associate);\r\n            else\r\n                return associate;\r\n        });\r\n        /**\r\n         *\r\n         * @type {Array<BaseSerializer>}\r\n         * @private\r\n         */\r\n        this._serializers = options.serializers || [];\r\n    }\r\n\r\n\r\n    read(inputStream, obj) {\r\n        let inputVersion = inputStream.getVersion();\r\n        this._serializers.forEach(serializer => {\r\n            if (serializer.getMinVersion() <= inputVersion &&\r\n                inputVersion <= serializer.getMaxVersion()\r\n                //&& serializer.supportsReadWrite()\r\n            ) {\r\n                try {\r\n                    serializer.read(inputStream, obj)\r\n                } catch (e) {\r\n                    if (e.stack) {\r\n                        e = e.toString() + \"\\n\" + e.stack;\r\n                    }\r\n                    Log.fatal(e);\r\n                    throw (\"ObjectWrapper.read: Error reading property \" + this._name + \".\" + serializer.getName());\r\n                }\r\n            }\r\n            else {\r\n                // version mismatch\r\n            }\r\n        });\r\n    };\r\n\r\n    addSerializer(serializer) {\r\n        // assert(serializer);\r\n        // assert(serializer.getName);\r\n        // assert(serializer.read);\r\n        this._serializers.push(serializer);\r\n    }\r\n\r\n    createInstance() {\r\n        let typeCtor = this._typeCtor;\r\n        if (typeCtor)\r\n            return new typeCtor();\r\n        else\r\n            return null;\r\n    }\r\n\r\n    getName() {\r\n        return this._name;\r\n    }\r\n}\r\n\r\nexport { ObjectWrapper };",
    "import {GLEnum} from  \"../Enum/GLEnum.js\";\n\r\nimport {ArrayTableEnum} from  \"../Enum/ArrayTableEnum.js\";\n\r\nimport {PrimitiveTableEnum}from  \"../Enum/PrimitiveTableEnum.js\";\n\r\n\r\nconst _globalMap = {\r\n    ArrayType: ArrayTableEnum,\r\n    PrimitiveType: PrimitiveTableEnum,\r\n    GL: GLEnum\r\n};\r\n\r\nconst ObjectWrapperDictionary = {};\r\n\r\nfunction readWrapperObject(wrapperName) {\r\n    return function (inputStream, obj) {\r\n        wrapperObject = ObjectWrapperDictionary[wrapperName];\r\n        if (!wrapperObject) throw (\"ObjectWrapperManager.readWrapperObject : \" + wrapperName)\r\n    }\r\n}\r\n\r\nexport const ObjectWrapperManager= {\r\n\r\n    getValue: function (group, str) {\r\n        let map = _globalMap[group] || GLEnum;\r\n        return map[str];\r\n    },\r\n\r\n    findWrapper: function (classname) {\r\n        return ObjectWrapperDictionary[classname];\r\n    },\r\n    addWrapper: function (objectWrapper) {\r\n        let classname = objectWrapper.getName();\r\n        ObjectWrapperDictionary[classname] = objectWrapper;\r\n    },\r\n    readWrapperObject: readWrapperObject\r\n}",
    "\r\nimport { BaseSerializer } from  \"./BaseSerializer.js\";\n\r\n\r\nfunction getTypeReaderFunction(reader, type) {\r\n    let funcName = \"read\" + type;\r\n\r\n    let typeReaderFunction = reader[funcName];\r\n    if (!typeReaderFunction) throw new Error(\"reader type: \" + type + \" not found\");\r\n    return typeReaderFunction.bind(reader);\r\n}\r\n\r\nconst equalTypesDictionary = {\r\n    HEXINT: \"UInt\",\r\n    GLInt: \"Int\" // TODO validate GLInt defined as \"Int\"\r\n};\r\n\r\nconst vectorDictionary = {\r\n    Vec4d: {\r\n        size: 4,\r\n        type: \"Double\"\r\n    }\r\n};\r\n\r\nclass PropByValSerializer extends BaseSerializer {\r\n    constructor(type, name, defaultValue, options = {}) {\r\n        super(name, options);\r\n\r\n        this._defaultValue = defaultValue;\r\n        this._useHex = false;\r\n        this._vectorSize = 0;\r\n        if (vectorDictionary[type]) {\r\n            this._vectorSize = vectorDictionary[type].size;\r\n            this._type = vectorDictionary[type].type;\r\n        }\r\n        else if (equalTypesDictionary[type]) {\r\n            this._type = equalTypesDictionary[type];\r\n            this._useHex = true;\r\n        } else {\r\n            this._type = type;\r\n        }\r\n    }\r\n\r\n    read(inputStream, object) {\r\n        let value;\r\n\r\n        if (this._vectorSize > 0) {\r\n            value = inputStream.readVectorOfType(this._vectorSize, this._type)\r\n        }\r\n        else if (inputStream.isBinary()) {\r\n            let typeReaderFunction = getTypeReaderFunction(inputStream.inputOperator, this._type);\r\n            value = typeReaderFunction();\r\n\r\n        } else if (inputStream.inputOperator.matchString(this._name)) {\r\n            if (this._useHex)\r\n                // the type doesn't metter - its all Number\r\n                value = inputStream.inputOperator.readHex();\r\n            else {\r\n                let typeReaderFunction = getTypeReaderFunction(inputStream.inputOperator, this._type);\r\n                value = typeReaderFunction();\r\n            }\r\n        }\r\n\r\n        object.setProperty(this._name, value);\r\n    }\r\n}\r\n\r\n\r\nexport { PropByValSerializer };",
    "import { BaseSerializer } from  \"./BaseSerializer.js\";\n\r\n\r\nclass UserSerializer extends BaseSerializer {\r\n    constructor(name, reader, options) {\r\n        super(name, options);\r\n        this._reader = reader;\r\n    }\r\n\r\n    read(inputStream, object) {\r\n        if (inputStream.isBinary()) {\r\n            if (!inputStream.inputOperator.readBool()) {\r\n                return;\r\n            }\r\n        }\r\n        else {\r\n            if (!inputStream.inputOperator.matchString(this.getName()))\r\n                return;\r\n        }\r\n        this._reader(inputStream, object);\r\n    }\r\n}\r\n\r\nexport { UserSerializer };",
    "import { BaseSerializer } from  \"./BaseSerializer.js\";\n\r\n\r\n/**\r\n *\r\n * @param {InputStream} inputStream\r\n * @param {string} type\r\n * @return {function}\r\n */\r\nfunction getTypeReaderFunction(inputStream, type) {\r\n    let funcName = \"read\" + type; \r\n\r\n    // if the function exists in the InputOperator\r\n    let typeReaderFunction = inputStream.inputOperator[funcName];\r\n    if (typeReaderFunction)\r\n        return typeReaderFunction.bind(inputStream.inputOperator);\r\n\r\n    // if the function exists in the InputStream\r\n    typeReaderFunction = inputStream[funcName];\r\n    if (typeReaderFunction)\r\n        return typeReaderFunction.bind(inputStream);\r\n\r\n    throw \"reader type: \" + type + \" not found\";\r\n}\r\n\r\nclass VectorSerializer extends BaseSerializer {\r\n    constructor(name, type, options) {\r\n        super(name, options);\r\n        this._type = type;\r\n    }\r\n\r\n    /** @override */\r\n    read(inputStream, object) {\r\n\r\n        let typeReaderFunction = getTypeReaderFunction(inputStream, this._type);\r\n        let list = [];\r\n        if (inputStream.isBinary()) {\r\n            let size = inputStream.inputOperator.readUInt();\r\n\r\n            for (let i = 0; i < size; i++) {\r\n                list.push(typeReaderFunction())\r\n            }\r\n        }\r\n        else if (inputStream.inputOperator.matchString(this.getName())) {\r\n            let size = inputStream.inputOperator.readUInt();\r\n            if (size > 0) {\r\n                inputStream.readBeginBracket();\r\n\r\n                for (let i = 0; i < size; i++) {\r\n                    list.push(typeReaderFunction())\r\n                }\r\n\r\n                inputStream.readEndBracket();\r\n            }\r\n        }\r\n\r\n        if (list.length > 0) {\r\n            object.setProperty(this._name, list);\r\n        }\r\n    }\r\n}\r\n\r\nexport { VectorSerializer };",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { EnumSerializer } from  \"../Serializer/EnumSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { CullFace } from  \"../OsgTypes/CullFace.js\";\n\r\nimport { FaceMode } from  \"../Enum/CullFace_FaceMode.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::CullFace\",\r\n    [\"osg::Object\", \"osg::StateAttribute\", \"osg::CullFace\"],\r\n    CullFace\r\n);\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"Mode\", FaceMode, FaceMode.BACK));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper); ",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { ObjectSerializer } from  \"../Serializer/ObjectSerializer.js\";\n\r\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\r\nimport { ObjectCallbackSerializer } from  \"../Serializer/ObjectCallbackSerializer.js\";\n\r\nimport { PropByValSerializer } from  \"../Serializer/PropByValSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { Associate } from  \"../Serializer/Associate.js\";\n\r\nimport { Drawable } from  \"../OsgTypes/Drawable.js\";\n\r\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Drawable\",\r\n    [\"osg::Object\", new Associate(\"osg::Node\", { minVersion: 154 }), \"osg::Drawable\"],\r\n    Drawable\r\n);\r\n\r\nfunction readInitialBound() {\r\n    // TODO\r\n    throw \"InitialBound not yet implemented\"\r\n}\r\n\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"StateSet\", null));\r\nobjectWrapper.addSerializer(new UserSerializer(\"InitialBound\", readInitialBound));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"ComputeBoundingBoxCallback\"));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"Shape\", null));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"SupportsDisplayList\", true));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"UseDisplayList\", true));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"UseVertexBufferObjects\", false));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"UpdateCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"EventCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"CullCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"DrawCallback\"));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"HEXINT\", \"NodeMask\", 0xffffffff, { minVersion: 142 }));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"CullingActive\", true, { minVersion: 145 }));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import {ObjectWrapperManager} from   \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport {UserSerializer} from   \"../Serializer/UserSerializer.js\";\n\r\nimport {ObjectWrapper} from   \"../Serializer/ObjectWrapper.js\";\n\r\nimport {Geode} from   \"../OsgTypes/Geode.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Geode\",\r\n    [\"osg::Object\",\"osg::Node\",\"osg::Geode\"],\r\n    Geode\r\n);\r\n\r\nfunction readDrawables(inputStream,geodeNode){\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i=0;i<size;i++){\r\n        let obj = inputStream.readObjectOfType(\"osg::Drawable\");\r\n        if (obj) {\r\n            geodeNode.Children.push(obj);\r\n        }\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"Drawables\",readDrawables));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { VectorSerializer } from  \"../Serializer/VectorSerializer.js\";\n\r\nimport { ObjectSerializer } from  \"../Serializer/ObjectSerializer.js\";\n\r\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { Geometry } from  \"../OsgTypes/Geometry.js\";\n\r\nimport { OsgArray } from  \"../OsgTypes/OsgArray.js\";\n\r\nimport { Associate } from  \"../Serializer/Associate.js\";\n\r\nimport { DefaultUserDataContainer } from  \"../OsgTypes/DefaultUserDataContainer.js\";\n\r\nimport {AttributeBinding} from  \"../Enum/AttributeBinding.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Geometry\",\r\n    ['osg::Object', new Associate(\"osg::Node\", { minVersion: 154 }), 'osg::Drawable', 'osg::Geometry'],\r\n    Geometry\r\n);\r\n \r\n/**\r\n *\r\n * @param {InputStream} inputStream\r\n * @return {number}\r\n */\r\nfunction readAttributeBinding(inputStream) {\r\n    let value = 0;\r\n    if (inputStream.isBinary())\r\n        value = inputStream.inputOperator.readInt();\r\n    else {\r\n        let key = inputStream.inputOperator.readString();\r\n        value = AttributeBinding[key];\r\n    }\r\n    return value;\r\n}\r\n\r\n/**\r\n * @param {InputStream} inputStream\r\n * @return {OsgArray}\r\n */\r\nfunction readArray(inputStream) {\r\n    let array = new OsgArray();\r\n\r\n    inputStream.readProperty(\"Array\");\r\n    let hasArray = inputStream.inputOperator.readBool();\r\n    if (hasArray) {\r\n        array = inputStream.readArray();\r\n    }\r\n    inputStream.readProperty(\"Indices\");\r\n    let hasIndices = inputStream.inputOperator.readBool();\r\n    if (hasIndices) {\r\n        let indices_array = inputStream.readArray();\r\n        if (indices_array) {\r\n            if (!array.UserDataContainer) // Init UserDataContainer\r\n                array.UserDataContainer = new DefaultUserDataContainer();\r\n            array.UserDataContainer.UserData = indices_array;\r\n        }\r\n    }\r\n\r\n    inputStream.readProperty(\"Binding\");\r\n    array.Binding = readAttributeBinding(inputStream);\r\n\r\n    inputStream.readProperty(\"Normalize\");\r\n    array.Normalize = (inputStream.inputOperator.readInt() !== 0)\r\n\r\n    return array;\r\n}\r\n\r\nfunction getReadArrayDataFunction(property) {\r\n    return function (inputStream, geometry) {\r\n        inputStream.readBeginBracket();\r\n        let array = readArray(inputStream);\r\n        geometry.setProperty(property, array);\r\n        inputStream.readEndBracket();\r\n    }\r\n}\r\n\r\nfunction getReadArrayListFunction(property) {\r\n    return function (inputStream, geometry) {\r\n        let size = inputStream.inputOperator.readUInt();\r\n        inputStream.readBeginBracket();\r\n        let ArrayList = [];\r\n        for (let i = 0; i < size; i++) {\r\n            inputStream.readProperty(\"Data\");\r\n            inputStream.readBeginBracket();\r\n\r\n            let array = readArray(inputStream);\r\n            ArrayList.push(array);\r\n\r\n            inputStream.readEndBracket();\r\n        }\r\n        inputStream.readEndBracket();\r\n\r\n        geometry.setProperty(property, ArrayList);\r\n        inputStream.readEndBracket();\r\n    }\r\n}\r\n\r\n/**\r\n * @param {InputStream} inputStream\r\n * @param {Geometry} Geometry\r\n */\r\nfunction readFastPathHint(inputStream, Geometry) {\r\n    if (!inputStream.isBinary())\r\n        return inputStream.inputOperator.readBool();\r\n}\r\n\r\nobjectWrapper.addSerializer(new VectorSerializer(\"PrimitiveSetList\", \"PrimitiveSet\"));\r\n\r\n// Until Version 111\r\nobjectWrapper.addSerializer(new UserSerializer(\"VertexData\", getReadArrayDataFunction(\"VertexArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"NormalData\", getReadArrayDataFunction(\"NormalArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"ColorData\", getReadArrayDataFunction(\"ColorArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"SecondaryColorData\", getReadArrayDataFunction(\"SecondaryColorArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"FogCoordData\", getReadArrayDataFunction(\"FogCoordArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"TexCoordData\", getReadArrayListFunction(\"TexCoordArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"VertexAttribData\", getReadArrayListFunction(\"VertexAttribArray\"), { maxVersion: 111 }));\r\nobjectWrapper.addSerializer(new UserSerializer(\"FastPathHint \", readFastPathHint, { maxVersion: 111 }));\r\n\r\n// From Version 112\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"VertexArray\", null, { minVersion: 112 }));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"NormalArray\", null, { minVersion: 112 }));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"ColorArray\", null, { minVersion: 112 }));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"SecondaryColorArray\", null, { minVersion: 112 }));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"FogCoordArray\", null, { minVersion: 112 }));\r\nobjectWrapper.addSerializer(new VectorSerializer(\"TexCoordArrayList\", \"Array\", { minVersion: 112 }));\r\nobjectWrapper.addSerializer(new VectorSerializer(\"VertexAttribArrayList\", \"Array\", { minVersion: 112 }));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import {ObjectWrapperManager} from  \"../Serializer/ObjectWrapperManager.js\";\n \r\nimport {UserSerializer} from  \"../Serializer/UserSerializer.js\";\n \r\nimport {ObjectWrapper} from  \"../Serializer/ObjectWrapper.js\";\n \r\nimport {Group} from  \"../OsgTypes/Group.js\";\n \r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Group\",\r\n    [\"osg::Object\",\"osg::Node\",\"osg::Group\"],\r\n    Group\r\n);\r\n\r\nfunction readChildren(inputStream,groupNode){\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i=0;i<size;i++){\r\n        let obj = inputStream.readObject();\r\n        if (obj) {\r\n            groupNode.Children.push(obj);\r\n        }\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"Children\",readChildren));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\nimport { EnumSerializer } from  \"../Serializer/EnumSerializer.js\";\n\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\nimport { LOD } from  \"../OsgTypes/LOD.js\";\n\nimport { CenterMode } from  \"../Enum/CenterMode.js\";\n\nimport { RangeMode } from  \"../Enum/RangeMode.js\";\n\n\nlet objectWrapper = new ObjectWrapper(\n    \"osg::LOD\",\n    [\"osg::Object\", \"osg::Node\", \"osg::LOD\"],\n    LOD\n);\n\nfunction readRangeList(inputStream, lod) {\n    let size = inputStream.inputOperator.readUInt();\n    inputStream.readBeginBracket();\n    let ranges = [];\n    for (let i = 0; i < size; i++) {\n        let min = inputStream.inputOperator.readFloat();\n        let max = inputStream.inputOperator.readFloat();\n        ranges.push([min, max]);\n    }\n    inputStream.readEndBracket();\n    lod.setProperty(\"RangeList\", ranges);\n}\n\nfunction readUserCenter(inputStream, groupNode) {\n    let center = inputStream.readVectorOfType(3, \"Double\");\n    let radius = inputStream.inputOperator.readDouble();\n\n    groupNode.setProperty('UserCenter', {\n        center: center,\n        radius: radius\n    });\n}\n\nobjectWrapper.addSerializer(new EnumSerializer(\"CenterMode\", CenterMode, CenterMode.USE_BOUNDING_SPHERE_CENTER));\nobjectWrapper.addSerializer(new UserSerializer(\"UserCenter\", readUserCenter));\nobjectWrapper.addSerializer(new EnumSerializer(\"RangeMode\", RangeMode, RangeMode.DISTANCE_FROM_EYE_POINT));\nobjectWrapper.addSerializer(new UserSerializer(\"RangeList\", readRangeList));\n\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import {ObjectWrapperManager} from  \"../Serializer/ObjectWrapperManager.js\";\n \r\nimport {EnumSerializer} from  \"../Serializer/EnumSerializer.js\";\n \r\nimport {UserSerializer} from  \"../Serializer/UserSerializer.js\";\n \r\nimport {ObjectWrapper} from  \"../Serializer/ObjectWrapper.js\";\n \r\nimport {Material} from  \"../OsgTypes/Material.js\";\n \r\nimport {ColorMode} from  \"../Enum/Material_ColorMode.js\";\n \r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Material\",\r\n    [\"osg::Object\", \"osg::StateAttribute\", \"osg::Material\"],\r\n    Material\r\n);\r\n\r\nfunction readMaterialFunc(property, type){\r\n    function reader(inputStream, material){\r\n        // todo create function \"readType\" this in inputStream; also exist in typeReaderFunction\r\n        let readerFunc;\r\n        if(type === \"Float\"){\r\n            readerFunc = inputStream.inputOperator.readFloat.bind(inputStream.inputOperator);\r\n        } else if(type === \"Vec4f\") {\r\n            readerFunc = function () {\r\n                return inputStream.readVectorOfType(4,\"Float\");\r\n            }\r\n        } else {\r\n            throw \"serializeMaterial - type not supported\"\r\n        }\r\n        let frontAndBack = inputStream.inputOperator.readBool();\r\n        inputStream.readProperty(\"Front\");\r\n        let value1 = readerFunc();\r\n        inputStream.readProperty(\"Back\");\r\n        let value2 = readerFunc();\r\n        if(frontAndBack){\r\n            material[property + \"FrontAndBack\"] = true;\r\n            material[property + \"Front\"] = value1;\r\n            material[property + \"Back\"] = value1;\r\n        } else {\r\n            material[property + \"FrontAndBack\"] = false;\r\n            material[property + \"Front\"] = value1;\r\n            material[property + \"Back\"] = value2;\r\n        }\r\n    }\r\n    return reader;\r\n}\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"ColorMode\", ColorMode, ColorMode.OFF));\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"Ambient\", readMaterialFunc(\"Ambient\",\"Vec4f\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"Diffuse\", readMaterialFunc(\"Diffuse\",\"Vec4f\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"Specular\", readMaterialFunc(\"Specular\",\"Vec4f\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"Emission\", readMaterialFunc(\"Emission\",\"Vec4f\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"Shininess\", readMaterialFunc(\"Shininess\",\"Float\")));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { MatrixSerializer } from  \"../Serializer/MatrixSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { MatrixTransform } from  \"../OsgTypes/MatrixTransform.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::MatrixTransform\",\r\n    [\"osg::Object\", \"osg::Node\", \"osg::Group\", \"osg::Transform\", \"osg::MatrixTransform\"],\r\n    MatrixTransform\r\n);\r\n\r\nobjectWrapper.addSerializer(new MatrixSerializer(\"Mode\"));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import {ObjectWrapperManager} from  \"../Serializer/ObjectWrapperManager.js\";\n \r\nimport {ObjectCallbackSerializer} from  \"../Serializer/ObjectCallbackSerializer.js\";\n \r\nimport {ObjectSerializer} from  \"../Serializer/ObjectSerializer.js\";\n \r\nimport {UserSerializer} from  \"../Serializer/UserSerializer.js\";\n \r\nimport {PropByValSerializer} from  \"../Serializer/PropByValSerializer.js\";\n \r\nimport {ObjectWrapper} from  \"../Serializer/ObjectWrapper.js\";\n \r\nimport {Node} from  \"../OsgTypes/Node.js\";\n \r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Node\",\r\n    [\"osg::Object\", \"osg::Node\"],\r\n    Node\r\n);\r\n\r\nfunction readInitialBound(inputStream, node) {\r\n// todo check if readVectorOfType is right\r\n    let center, radius;\r\n    inputStream.readBeginBracket();\r\n    inputStream.readProperty(\"Center\");\r\n    center = inputStream.readVectorOfType(3,\"Double\");\r\n    inputStream.readProperty(\"Radius\");\r\n    radius = inputStream.inputOperator.readDouble();\r\n    inputStream.readEndBracket();\r\n\r\n    node.InitialBound = {\r\n        center: center,\r\n        radius: radius\r\n    };\r\n}\r\n\r\nfunction readDescriptions(inputStream, node) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    for (let i = 0; i < size; ++i) {\r\n        let value = inputStream.inputOperator.readWrappedString();\r\n        node.descriptions.push(value);\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"InitialBound\", readInitialBound));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"ComputeBoundingSphereCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"UpdateCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"EventCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"CullCallback\"));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"CullingActive\", true));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"HEXINT\", \"NodeMask\", 0xffffffff));\r\nobjectWrapper.addSerializer(new UserSerializer(\"Descriptions\", readDescriptions, {maxVersion: 76}));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"StateSet\", null));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { EnumSerializer } from  \"../Serializer/EnumSerializer.js\";\n\r\nimport { ObjectSerializer } from  \"../Serializer/ObjectSerializer.js\";\n\r\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\r\nimport { PropByValSerializer } from  \"../Serializer/PropByValSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { ObjectClass } from  \"../OsgTypes/Object.js\";\n\r\nimport { ObjectDataVariance } from  \"../Enum/ObjectData_Variance.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Object\",\r\n    [\"osg::Object\"],\r\n    ObjectClass\r\n);\r\n\r\nfunction UserDataReader() {\r\n    // TODO\r\n    throw \"UserDataReader not yet supported\";\r\n}\r\n\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"String\", \"Name\", \"\"));\r\nobjectWrapper.addSerializer(new EnumSerializer(\"DataVariance\", ObjectDataVariance, ObjectDataVariance.UNSPECIFIED));\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"UserData\", UserDataReader, { maxVersion: 76 }));\r\nobjectWrapper.addSerializer(new ObjectSerializer(\"UserDataContainer\", null, { minVersion: 77 }));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\nimport { PropByValSerializer } from  \"../Serializer/PropByValSerializer.js\";\n\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\nimport { PagedLOD } from  \"../OsgTypes/PagedLOD.js\";\n\n\n\nlet objectWrapper = new ObjectWrapper(\n    \"osg::PagedLOD\",\n    [\"osg::Object\", \"osg::Node\", \"osg::LOD\", \"osg::PagedLOD\"],\n    PagedLOD\n);\n\nfunction readRangeDataList(inputStream, lod) {\n    let rangeDataList = [], priorityOffsets = [], priorityScales = [];\n\n    let size = inputStream.inputOperator.readUInt();\n    inputStream.readBeginBracket();\n    for (let i = 0; i < size; i++) {\n        let name = inputStream.inputOperator.readWrappedString();\n        rangeDataList.push(name);\n    }\n    inputStream.readEndBracket();\n\n    inputStream.readProperty(\"PriorityList\");\n    size = inputStream.inputOperator.readUInt();\n    inputStream.readBeginBracket();\n    for (let i = 0; i < size; i++) {\n        priorityOffsets.push(inputStream.inputOperator.readFloat());\n        priorityScales.push(inputStream.inputOperator.readFloat());\n    }\n    inputStream.readEndBracket();\n\n    lod.setProperty(\"RangeDataList\", rangeDataList);\n    lod.setProperty(\"PriorityOffsets\", priorityOffsets);\n    lod.setProperty(\"PriorityScales\", priorityScales);\n}\n\nfunction readChildren(inputStream, lod) {\n    let size = inputStream.inputOperator.readUInt();\n    if (size > 0) {\n        let children = [];\n        inputStream.readBeginBracket();\n        for (let i = 0; i < size; i++) {\n            let child = inputStream.readObjectOfType(\"osg::Node\");\n            if (child) {\n                children.push(child)\n            }\n        }\n        inputStream.readEndBracket();\n        lod.setProperty(\"Children\", children);\n    }\n}\n\nfunction readDatabasePath(inputStream, pagedLod) {\n    let hasPath = inputStream.inputOperator.readBool();\n    let databasePath;\n    if (hasPath) {\n        databasePath = inputStream.inputOperator.readWrappedString();\n        pagedLod.setProperty(\"DatabasePath\", databasePath);\n    } else {\n        // todo\n        // if empty databasePath setted in https://github.com/openscenegraph/OpenSceneGraph/blob/31d78b7bb3994065462fb1163d006c8649e7144f/src/osgDB/Registry.cpp#L1169\n    }\n}\n\nobjectWrapper.addSerializer(new UserSerializer(\"DatabasePath\", readDatabasePath));\nobjectWrapper.addSerializer(new PropByValSerializer(\"UInt\", \"FrameNumberOfLastTraversal\", 0, { maxVersion: 69 }));\nobjectWrapper.addSerializer(new PropByValSerializer(\"UInt\", \"NumChildrenThatCannotBeExpired\", 0));\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"DisableExternalChildrenPaging\", false));\nobjectWrapper.addSerializer(new UserSerializer(\"RangeDataList\", readRangeDataList));\nobjectWrapper.addSerializer(new UserSerializer(\"Children\", readChildren));\n\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import {ObjectWrapperManager} from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport {EnumSerializer} from  \"../Serializer/EnumSerializer.js\";\n\r\nimport {ObjectWrapper} from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport {ShadeModel} from  \"../OsgTypes/ShadeModel.js\";\n\r\nimport {ShadeModelMode} from  \"../Enum/ShadeModel_Mode.js\";\n\r\n \r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::ShadeModel\",\r\n    [\"osg::Object\", \"osg::StateAttribute\", \"osg::ShadeModel\"],\r\n    ShadeModel\r\n);\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"Mode\", ShadeModelMode, ShadeModelMode.SMOOTH));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import {ObjectWrapperManager} from  \"../Serializer/ObjectWrapperManager.js\";\n \r\nimport {ObjectCallbackSerializer} from  \"../Serializer/ObjectCallbackSerializer.js\";\n \r\nimport {ObjectWrapper} from  \"../Serializer/ObjectWrapper.js\";\n \r\nimport {StateAttribute} from  \"../OsgTypes/StateAttribute.js\";\n \r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::StateAttribute\",\r\n    [\"osg::Object\", \"osg::StateAttribute\"],\r\n    StateAttribute\r\n);\r\n\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"UpdateCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"EventCallback\"));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\r\nimport { EnumSerializer } from  \"../Serializer/EnumSerializer.js\";\n\r\nimport { PropByValSerializer } from  \"../Serializer/PropByValSerializer.js\";\n\r\nimport { ObjectCallbackSerializer } from  \"../Serializer/ObjectCallbackSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { StateSet } from  \"../OsgTypes/StateSet.js\";\n\r\nimport { RenderingHint } from  \"../Enum/StateSet_RenderingHint.js\";\n\r\nimport { RenderBinMode } from  \"../Enum/StateSet_RenderBinMode.js\";\n\r\nimport { StateAttributeValue } from  \"../Enum/StateAttribute_Value.js\";\n\r\nimport { DataTypes } from  \"../Common/DataTypes.js\";\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::StateSet\",\r\n    [\"osg::Object\", \"osg::StateSet\"],\r\n    StateSet\r\n);\r\n\r\nfunction pushMany(arr, toPush) {\r\n    Array.prototype.push.apply(arr, toPush)\r\n}\r\n\r\n// TODO ALL of reader functions are not exactly like in OGS repo. maybe need to be rewriten\r\n// readModeList, readAttributeList, readTextureModeList, readTextureAttributeList,readUniformList,readDefineList\r\n\r\nfunction readModes(inputStream) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    let modes = [];\r\n    if (size > 0) {\r\n        inputStream.readBeginBracket();\r\n        for (let i = 0; i < size; i++) {\r\n            let mode = new DataTypes.ObjectGLEnum();\r\n            inputStream.inputOperator.readGLEnum(mode);\r\n\r\n            modes.push({\r\n                key: mode.value,\r\n                value: readValue(inputStream)\r\n            });\r\n        }\r\n        inputStream.readEndBracket();\r\n    }\r\n    return modes;\r\n}\r\n\r\nfunction readAttributes(inputStream) {\r\n    let attributes = [];\r\n    let size = inputStream.inputOperator.readUInt();\r\n    if (size > 0) {\r\n        inputStream.readBeginBracket();\r\n        for (let i = 0; i < size; i++) {\r\n            let sa = inputStream.readObjectOfType(\"osg::StateAttribute\");\r\n            inputStream.readProperty(\"Value\");\r\n            let value = readValue(inputStream);\r\n            if (sa) {\r\n                attributes.push({\r\n                    key: sa.getTypeMemberPair(),\r\n                    value: {\r\n                        StateAttribute: sa,\r\n                        Value: value\r\n                    }\r\n                })\r\n            }\r\n        }\r\n        inputStream.readEndBracket();\r\n    }\r\n    return attributes;\r\n}\r\n\r\nfunction readValue(inputStream) {\r\n    if (inputStream.isBinary())\r\n        return inputStream.inputOperator.readInt();\r\n    else {\r\n        let enumValue = inputStream.inputOperator.readString();\r\n        let value = 0;\r\n        if (enumValue.indexOf(\"OFF\") >= 0) value = StateAttributeValue.OFF;\r\n        if (enumValue.indexOf(\"ON\") >= 0) value = StateAttributeValue.ON;\r\n        if (enumValue.indexOf(\"OVERRIDE\") >= 0) value = value | StateAttributeValue.OVERRIDE;\r\n        if (enumValue.indexOf(\"PROTECTED\") >= 0) value = value | StateAttributeValue.PROTECTED;\r\n        if (enumValue.indexOf(\"INHERIT\") >= 0) value = value | StateAttributeValue.INHERIT;\r\n        return value;\r\n    }\r\n}\r\n\r\nfunction readModeList(inputStream, stateSet) {\r\n    let modes = readModes(inputStream);\r\n    pushMany(stateSet.ModeList, modes);\r\n    return true;\r\n}\r\n\r\nfunction readAttributeList(inputStream, stateSet) {\r\n    let modes = readAttributes(inputStream);\r\n    pushMany(stateSet.AttributeList, modes);\r\n}\r\n\r\nfunction readTextureModeList(inputStream, stateSet) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i = 0; i < size; i++) {\r\n        inputStream.readProperty(\"Data\");\r\n        pushMany(stateSet.TextureModeList, readModes(inputStream))\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nfunction readTextureAttributeList(inputStream, stateSet) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i = 0; i < size; i++) {\r\n        inputStream.readProperty(\"Data\");\r\n        pushMany(stateSet.TextureAttributeList, readAttributes(inputStream))\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nfunction readDefineList(inputStream, stateSet) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i = 0; i < size; i++) {\r\n        let defineName = inputStream.inputOperator.readWrappedString();\r\n        let defineValue = inputStream.inputOperator.readWrappedString();\r\n        inputStream.inputOperator.readObjectProperty(inputStream.PROPERTY.set(\"Value\"));\r\n        let overrideValue = readValue(inputStream);\r\n\r\n        stateSet.DefineList[defineName] = {\r\n            DefineValue: defineValue,\r\n            OverrideValue: overrideValue\r\n        };\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nfunction readUniformList(inputStream, stateSet) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i = 0; i < size; i++) {\r\n        let uniform = inputStream.readObjectOfType(\"osg::Uniform\");\r\n        inputStream.inputOperator.readObjectProperty(inputStream.PROPERTY.set(\"Value\"));\r\n        let value = readValue(inputStream);\r\n\r\n        if (uniform) {\r\n            stateSet.UniformList.push({\r\n                Uniform: uniform,\r\n                Value: value\r\n            })\r\n        }\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"ModeList\", readModeList));\r\nobjectWrapper.addSerializer(new UserSerializer(\"AttributeList\", readAttributeList));\r\nobjectWrapper.addSerializer(new UserSerializer(\"TextureModeList\", readTextureModeList));\r\nobjectWrapper.addSerializer(new UserSerializer(\"TextureAttributeList\", readTextureAttributeList));\r\nobjectWrapper.addSerializer(new UserSerializer(\"UniformList\", readUniformList));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Int\", \"RenderingHint\", RenderingHint.DEFAULT_BIN));\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"RenderBinMode\", RenderBinMode, RenderBinMode.DEFAULT_BIN));\r\n\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Int\", \"BinNumber\", 0));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"String\", \"BinName\", \"\"));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"NestRenderBins\", true));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"UpdateCallback\"));\r\nobjectWrapper.addSerializer(new ObjectCallbackSerializer(\"EventCallback\"));\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"DefineList\", readDefineList, { minVersion: 151 }));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\r\nimport { PropByValSerializer } from  \"../Serializer/PropByValSerializer.js\";\n\r\nimport { EnumSerializer } from  \"../Serializer/EnumSerializer.js\";\n\r\nimport { Texture } from  \"../OsgTypes/Texture.js\";\n\r\nimport { InternalFormatMode } from  \"../Enum/Texture_InternalFormatMode.js\";\n\r\nimport { ShadowCompareFunc } from  \"../Enum/Texture_ShadowCompareFunc.js\";\n\r\nimport { ShadowTextureMode } from  \"../Enum/Texture_ShadowTextureMode.js\";\n\r\nimport { ObjectGLEnum } from  \"../Common/DataTypes.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Texture\",\r\n    [\"osg::Object\", \"osg::StateAttribute\", \"osg::Texture\"],\r\n    Texture\r\n);\r\n\r\n\r\nconst swizzleDictionary = {\r\n    \"R\": 0x1903,\r\n    \"G\": 0x1904,\r\n    \"B\": 0x1905,\r\n    \"A\": 0x1906,\r\n    \"0\": 0,\r\n    \"1\": 1,\r\n};\r\n\r\nfunction readInternalFormat(inputStream, texture) {\r\n    let mode = new ObjectGLEnum();\r\n    inputStream.inputOperator.readGLEnum(mode);\r\n\r\n    if (texture.getProperty(\"InternalFormatMode\") === InternalFormatMode.USE_USER_DEFINED_FORMAT) {\r\n        texture.setInternalFormat(mode.value);\r\n    }\r\n}\r\n\r\nfunction readGLEnum(property) {\r\n    return function (inputStream, texture) {\r\n        let mode = new ObjectGLEnum();\r\n        inputStream.inputOperator.readGLEnum(mode);\r\n        texture.setProperty(property, mode)\r\n    }\r\n}\r\n\r\nfunction readSwizzle(inputStream, texture) {\r\n    let swizzleString = inputStream.inputOperator.readString();\r\n    let swizzle = [];\r\n    for (let i = 0; i < 4; i++)\r\n        swizzle.push(swizzleDictionary[swizzleString.charAt(i)]);\r\n    texture.setProperty(\"Swizzle\", swizzle);\r\n}\r\n\r\nfunction readImageAttachment(inputStream) {\r\n    inputStream.inputOperator.readUInt();\r\n    inputStream.inputOperator.readInt();\r\n    inputStream.inputOperator.readBool();\r\n    inputStream.inputOperator.readInt();\r\n    inputStream.inputOperator.readInt();\r\n    inputStream.inputOperator.readInt();\r\n}\r\n\r\n// todo add all properties to Texture class\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"WRAP_S\", readGLEnum(\"WrapS\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"WRAP_T\", readGLEnum(\"WrapT\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"WRAP_R\", readGLEnum(\"WrapR\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"MIN_FILTER\", readGLEnum(\"MinFilter\")));\r\nobjectWrapper.addSerializer(new UserSerializer(\"MAG_FILTER\", readGLEnum(\"MagFilter\")));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Float\", \"MaxAnisotropy\", 1));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"UseHardwareMipMapGeneration\", true));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"UnRefImageDataAfterApply\", false));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"ClientStorageHint\", false));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"ResizeNonPowerOfTwoHint\", true));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Vec4d\", \"BorderColor\", [0, 0, 0, 0],{minVersion:79}));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"GLInt\", \"BorderWidth\", 0,{minVersion:79}));\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"InternalFormatMode\", InternalFormatMode, InternalFormatMode.USE_IMAGE_DATA_FORMAT,{minVersion:79}));\r\n\r\nobjectWrapper.addSerializer(new UserSerializer(\"InternalFormat\", readInternalFormat,{minVersion:79}));\r\nobjectWrapper.addSerializer(new UserSerializer(\"SourceFormat\", readGLEnum(\"SourceFormat\"),{minVersion:79}));\r\nobjectWrapper.addSerializer(new UserSerializer(\"SourceType\", readGLEnum(\"SourceType\"),{minVersion:79}));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Bool\", \"ShadowComparison\", false,{minVersion:79}));\r\nobjectWrapper.addSerializer(new EnumSerializer(\"ShadowCompareFunc\", ShadowCompareFunc, ShadowCompareFunc.LEQUAL,{minVersion:79}));\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"ShadowTextureMode\", ShadowTextureMode, ShadowTextureMode.LUMINANCE,{minVersion:79}));\r\n\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Float\", \"ShadowAmbient\", 0,{minVersion:79}));\r\n\r\n// From version 95. removed in version 153\r\nobjectWrapper.addSerializer(new UserSerializer(\"ImageAttachment\", readImageAttachment, {\r\n    minVersion: 95,\r\n    maxVersion: 152\r\n}));\r\n\r\n// From version 98\r\nobjectWrapper.addSerializer(new UserSerializer(\"Swizzle\", readSwizzle, { minVersion: 98 }));\r\n\r\n// From version 155\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Float\", \"MinLOD\", 0, { minVersion: 155 }));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Float\", \"MaxLOD\", -1, { minVersion: 155 }));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Float\", \"LODBias\", 0, { minVersion: 155 }));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { PropByValSerializer } from  \"../Serializer/PropByValSerializer.js\";\n\r\nimport { ImageSerializer } from  \"../Serializer/ImageSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { Texture2D } from  \"../OsgTypes/Texture2D.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Texture2D\",\r\n    [\"osg::Object\", \"osg::StateAttribute\", \"osg::Texture\", \"osg::Texture2D\"],\r\n    Texture2D\r\n);\r\n\r\nobjectWrapper.addSerializer(new ImageSerializer(\"Image\", null));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Int\", \"TextureWidth\", 0));\r\nobjectWrapper.addSerializer(new PropByValSerializer(\"Int\", \"TextureHeight\", 0));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { EnumSerializer } from  \"../Serializer/EnumSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { Transform } from  \"../OsgTypes/Transform.js\";\n\r\nimport { ReferenceFrame } from  \"../Enum/Transform_ReferenceFrame.js\";\n\r\n\r\nlet objectWrapper = new ObjectWrapper(\r\n    \"osg::Transform\",\r\n    [\"osg::Object\", \"osg::Node\", \"osg::Group\", \"osg::Transform\"],\r\n    Transform\r\n);\r\n\r\nobjectWrapper.addSerializer(new EnumSerializer(\"Mode\", ReferenceFrame, ReferenceFrame.RELATIVE_RF));\r\n\r\nObjectWrapperManager.addWrapper(objectWrapper);",
    "import { ObjectWrapperManager } from  \"../Serializer/ObjectWrapperManager.js\";\n\r\nimport { UserSerializer } from  \"../Serializer/UserSerializer.js\";\n\r\nimport { ObjectWrapper } from  \"../Serializer/ObjectWrapper.js\";\n\r\nimport { DefaultUserDataContainer } from  \"../OsgTypes/DefaultUserDataContainer.js\";\n\r\n\r\nlet UDCobjectWrapper = new ObjectWrapper(\r\n    \"osg::UserDataContainer\",\r\n    [\"osg::Object\", \"osg::UserDataContainer\"],\r\n    null // UserDataContainer\r\n);\r\n\r\nlet DUDCobjectWrapper = new ObjectWrapper(\r\n    \"osg::DefaultUserDataContainer\",\r\n    [\"osg::Object\", \"osg::UserDataContainer\", \"osg::DefaultUserDataContainer\"],\r\n    DefaultUserDataContainer\r\n);\r\n\r\n\r\n\r\nfunction readUserData(inputStream, obj) {\r\n    inputStream.readBeginBracket();\r\n    obj.UserData = inputStream.readObject();\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nfunction readDescriptions(inputStream, obj) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i = 0; i < size; i++) {\r\n        let description = inputStream.inputOperator.readWrappedString();\r\n        obj.DescriptionList.push(description);\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nfunction readUserObject(inputStream, obj) {\r\n    let size = inputStream.inputOperator.readUInt();\r\n    inputStream.readBeginBracket();\r\n    for (let i = 0; i < size; i++) {\r\n        let objReaded = inputStream.inputOperator.readWrappedString();\r\n        obj.ObjectList.push(objReaded);\r\n    }\r\n    inputStream.readEndBracket();\r\n}\r\n\r\nDUDCobjectWrapper.addSerializer(new UserSerializer(\"UDC_UserData\", readUserData));\r\nDUDCobjectWrapper.addSerializer(new UserSerializer(\"UDC_Descriptions\", readDescriptions));\r\nDUDCobjectWrapper.addSerializer(new UserSerializer(\"UDC_UserObjects\", readUserObject));\r\n\r\nObjectWrapperManager.addWrapper(DUDCobjectWrapper);\r\nObjectWrapperManager.addWrapper(UDCobjectWrapper);",
    "import { } from  \"./CullFace.js\";\n\r\nimport { } from  \"./Drawable.js\";\n\r\nimport { } from  \"./Geode.js\";\n\r\nimport { } from  \"./Geometry.js\";\n\r\nimport { } from  \"./Group.js\";\n\r\nimport { } from  \"./Material.js\";\n\r\nimport { } from  \"./MatrixTransform.js\";\n\r\nimport { } from  \"./Node.js\";\n\r\nimport { } from  \"./Object.js\";\n\r\nimport { } from  \"./ShadeModel.js\";\n\r\nimport { } from  \"./StateAttribute.js\";\n\r\nimport { } from  \"./StateSet.js\";\n\r\nimport { } from  \"./Texture.js\";\n\r\nimport { } from  \"./Texture2D.js\";\n\r\nimport { } from  \"./Transform.js\";\n\r\nimport { } from  \"./UserDataContainer.js\";\n\r\nimport { } from  \"./LOD.js\";\n\r\nimport { } from  \"./PagedLOD.js\";\n\r\n",
    "\r\n/**\r\n * \r\n * @see \"https://github.com/eran-pinhas/osg-serializer-js.git\"\r\n * @author eran-pinhas (https://github.com/eran-pinhas)\r\n * @author MikesWei (https://github.com/MikesWei)\r\n */\r\n\r\n\r\n//\r\n\r\nexport { RenderBinMode } from  \"./Enum/StateSet_RenderBinMode.js\";\n\r\nexport { ShadowTextureMode } from  \"./Enum/Texture_ShadowTextureMode.js\";\n\r\nexport { FaceMode } from  \"./Enum/CullFace_FaceMode.js\";\n\r\nexport { ColorMode } from  \"./Enum/Material_ColorMode.js\";\n\r\nexport { StateAttributeValue } from  \"./Enum/StateAttribute_Value.js\";\n\r\nexport { RenderingHint } from  \"./Enum/StateSet_RenderingHint.js\";\n\r\nexport { ReferenceFrame } from  \"./Enum/Transform_ReferenceFrame.js\";\n\r\nexport { InternalFormatMode } from  \"./Enum/Texture_InternalFormatMode.js\";\n\r\nexport { PrimitiveMode } from  \"./Enum/PrimitiveMode.js\";\n\r\nexport { GLEnum } from  \"./Enum/GLEnum.js\";\n\r\nexport { AttributeBinding } from  \"./Enum/AttributeBinding.js\";\n\r\nexport { ShadeModelMode } from  \"./Enum/ShadeModel_Mode.js\";\n\r\nexport { CenterMode } from  \"./Enum/CenterMode.js\";\n\r\nexport { RangeMode } from  \"./Enum/RangeMode.js\";\n\r\n\r\nimport { PrimitiveTableEnum } from  \"./Enum/PrimitiveTableEnum.js\";\n\r\nexport const PrimitiveTable = PrimitiveTableEnum;\r\nexport { ImageType } from  \"./Enum/ImageType.js\";\n\r\n\r\nexport { Log } from  \"./Common/Log.js\";\n\r\nexport { readBuffer, readFile } from  \"./Input/ReadFile.js\";\n\r\nexport { EnumToString } from  \"./Enum/EnumToString.js\";\n\r\n\r\nexport function traverse(osgNode, callback) {\r\n    if (callback) callback(osgNode);\r\n\r\n    let Children = osgNode.Children;\r\n    if (Children && Children.length) {\r\n\r\n        for (let i = 0; i < Children.length; i++) {\r\n            const node = Children[i];\r\n            traverse(node, callback);\r\n        }\r\n\r\n    }\r\n}\r\n\r\nexport { Node } from  \"./OsgTypes/Node.js\";\n\r\nexport { Group } from  \"./OsgTypes/Group.js\";\n\r\nexport { Drawable } from  \"./OsgTypes/Drawable.js\";\n\r\nexport { Image } from  \"./OsgTypes/Image.js\";\n\r\nexport { Geode } from  \"./OsgTypes/Geode.js\";\n\r\nexport { OsgArray } from  \"./OsgTypes/OsgArray.js\";\n\r\nexport { MatrixTransform } from  \"./OsgTypes/MatrixTransform.js\";\n\r\nexport { Material } from  \"./OsgTypes/Material.js\";\n\r\nexport { StateAttribute } from  \"./OsgTypes/StateAttribute.js\";\n\r\nexport { Texture2D } from  \"./OsgTypes/Texture2D.js\";\n\r\nexport { Texture } from  \"./OsgTypes/Texture.js\";\n\r\nexport { StateSet } from  \"./OsgTypes/StateSet.js\";\n\r\nexport { ObjectClass } from  \"./OsgTypes/Object.js\";\n\r\nexport { Geometry } from  \"./OsgTypes/Geometry.js\";\n\r\n/*module.exports.readFile('./Samples/grass1.osgb',function (err, data) {\r\n    console.log(err,data)\r\n});*/\r\n\r\n",
    "import { GLTFLoader } from  \"../ThirdParty/loaders/GLTFLoader.js\";\n\n// import { MeshMaterial } from '../core/MeshMaterial.js';\n// import { Mesh } from '../../core/Mesh.js';\nimport { DRACOLoader } from  \"../ThirdParty/loaders/DRACOLoader.js\";\n\nimport { DDSLoader } from  \"../ThirdParty/loaders/DDSLoader.js\";\n\n// import { Object3D } from '../../core/Object3D.js';\nimport OSGLoader from  \"./OSGLoader.js\";\n\nimport Path from  \"../../../utils/Source/Path.js\";\n\nimport GenericWorker from  \"../../../utils/Source/GenericWorker.js\";\n\nimport MeshVisModelUtil from  \"./MeshVisModelUtil.js\";\n\nimport { TaskList } from  \"../TaskList.js\";\n\nimport IRenderable from  \"../../../core/Source/IRenderable.js\";\n\n// import { simplify_three } from '../../core/MeshEditor/ThirdParty/modify.js'\nimport TextureUtils from  \"../../../core/Source/webgl/TextureUtils.js\";\n\nimport releaseResources from  \"../releaseResources.js\";\n\nimport VISMLoader from  \"./VISMLoader.js\";\n\n// import GenericWorker from '@mesh-3d/utils/Source/GenericWorker.js';\nimport WebGLGeometries from  \"../../../core/Source/webgl/WebGLGeometries.js\";\n\n// import MeshVisualizer from '../../core/MeshVisualizer.js';\nimport RendererUtils from  \"../../../core/Source/RendererUtils.js\";\n\nimport GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\n\nfunction createDebugVolume(boundingBox, primitive, debugVolumeColor) {\n    const { BoxOutlineGeometry, Color } = Cesium;\n\n    var geometry = BoxOutlineGeometry.fromAxisAlignedBoundingBox(boundingBox);\n    geometry = BoxOutlineGeometry.createGeometry(geometry);\n\n    if (debugVolumeColor && debugVolumeColor instanceof Color) {\n        debugVolumeColor = debugVolumeColor.toCssColorString()\n    }\n    var aabBoxMaterial = new THREE.LineBasicMaterial({\n        color: debugVolumeColor || 'cyan',\n        transparent: true\n    });\n    aabBoxMaterial._debugVolumeColor = debugVolumeColor\n    aabBoxMaterial.allowPick = true\n    geometry = GeometryUtils.toBufferGeometry3js(geometry)\n\n    var debugVolume = new THREE.LineSegments(geometry, aabBoxMaterial)\n    debugVolume.pickObject = {\n        id: debugVolume,\n        mesh: debugVolume,\n        primitive: primitive\n    }\n\n    debugVolume.up.copy(primitive.root.up);\n    debugVolume.frustumCulled = false;\n    debugVolume.isDebugVolume = true;\n    return debugVolume;\n}\n\n\nconst sizeOfUint32 = 4;\nvar scratchTranslationRtc;\nvar CESIUM_RTC_MODELVIEW = function (uniformState, model) {\n    // CESIUM_RTC extension\n    const { Matrix4, defined, Cartesian3 } = Cesium;\n\n    var mvRtc = new Matrix4();\n\n    if (!scratchTranslationRtc) scratchTranslationRtc = new Matrix4();\n    return function () {\n        if (defined(model._rtcCenter)) {\n            Matrix4.getTranslation(uniformState.model, scratchTranslationRtc);\n            Cartesian3.add(\n                scratchTranslationRtc,\n                model._rtcCenter,\n                scratchTranslationRtc\n            );\n            Matrix4.multiplyByPoint(\n                uniformState.view,\n                scratchTranslationRtc,\n                scratchTranslationRtc\n            );\n            return Matrix4.setTranslation(\n                uniformState.modelView,\n                scratchTranslationRtc,\n                mvRtc\n            );\n        }\n        return uniformState.modelView;\n    };\n}\n\nvar _cacheMeshVisModelNormalMatrix;\nvar _cacheDracoLoaders = {};\nfunction getDracoLoader(dracoDecoderPath) {\n    var dracoLoader = _cacheDracoLoaders[dracoDecoderPath];\n    if (!dracoLoader) {\n        dracoLoader = new DRACOLoader();\n        _cacheDracoLoaders[dracoDecoderPath] = dracoLoader;\n        dracoLoader.setDecoderPath(dracoDecoderPath);\n        dracoLoader.preload();\n    }\n    return dracoLoader;\n}\n\n\nclass MeshVisModel extends IRenderable {\n\n    constructor(options) {\n        super();\n\n        const { when, Matrix4, Axis, defaultValue, Event } = Cesium;\n\n        this.ready = false;\n        this.readyPromise = when.defer();\n        this.translucent = defaultValue(options.translucent, false)\n\n        this._modelMatrix = options.modelMatrix || Matrix4.IDENTITY.clone();\n        this._upAxis = typeof options.upAxis == 'undefined' ? null : options.upAxis;\n        this.forwardAxis = options.forwardAxis || Axis.X;\n        this.cull = defaultValue(options.cull, true);\n        this._show = defaultValue(options.show, true);\n        this._requestType = options.requestType;\n        this.pickObject = options.pickObject;\n\n        this.manager = options.manager;\n        this.loader = options.loader;\n\n        this.dracoDecoderPath = options.dracoDecoderPath;\n\n        this.url = options.url;\n        this.basePath = options.basePath;\n\n        this._instances = options.instances;\n        this._instancedAttributes = options.instancedAttributes;\n        this._boundingSphere = null;\n        this._boundingSphereWC = null;\n        this.boundingSphere = options.boundingSphere;\n        this._boundingBox = null\n        this._boundingBoxWC = null;\n        this.boundingBox = options.boundingBox;\n        this.debugVolume = options.debugVolume;\n        this.showDebugVolume = options.showDebugVolume;\n        this.debugVolumeOnly = options.debugVolumeOnly;\n        this.debugVolumeColor = options.debugVolumeColor;\n\n        this._lazyLoad = options.lazyLoad;\n\n        this._options = options;\n        this.editable = defaultValue(options.editable, false);\n        this.castShadow = defaultValue(options.castShadow, true);\n        this.receiveShadow = defaultValue(options.receiveShadow, true);\n        this.preInitialize = defaultValue(options.preInitialize, false);\n        this.overrideTextureEncoding = options.overrideTextureEncoding;\n\n        this.minRange = options.minRange || 4;\n        this.rangeMode = 'PIXEL_ON_SCREEN';//PIXEL_ON_SCREEN|DISTANCE_TO_CAMERA\n        this._lods = [];\n        this._lodNeedsUpdate = false;\n        this.onModelLoaded = new Event();\n        this.onLoadProgress = new Event();\n        this.onInitInitialized = new Event();\n        this.onInitProgress = new Event();\n\n        if (options.lods && options.lods.length > 0) {\n            options.lods.forEach((lod) => {\n                this.addLod(lod.maxRange, lod.simplifyFactor, lod.simplifyOptions);\n            });\n        }\n\n        if (!MeshVisModel._loadTaskList) {\n            MeshVisModel._loadTaskList = new TaskList(10, 'load');\n        }\n\n        if (!this._lazyLoad) {\n            this.load(options);\n        } else if (!this.boundingSphere) {\n            throw new Error('When lazyLoad is true, boundingSphere is required.')\n        }\n\n        this.createDebugVolume();\n\n    }\n\n    set upAxis(val) {\n        if (this._upAxis != val) {\n\n            const { Cartesian3, Axis } = Cesium;\n            this._upAxis = val\n\n            if (this._upAxis == null) return;\n\n            var up = new Cartesian3(0, 1, 0);\n            if (val == Axis.Z) {\n                up = new Cartesian3(0, 0, 1);\n            } else if (val == Axis.X) {\n                up = new Cartesian3(1, 0, 0);\n            }\n\n            this.traverse(obj => {\n                obj.up.set(up.x, up.y, up.z);\n            })\n            this.modelMatrixNeedsUpdate = true;\n        }\n    }\n    get upAxis() {\n        return this._upAxis\n    }\n\n    getMagic(uint8Array) {\n        var magic = []\n        for (let i = 0; i < sizeOfUint32; i++) {\n            magic.push(uint8Array[i])\n        }\n        magic = String.fromCharCode.apply(null, magic);\n        return magic;\n    }\n\n    traverse(callback) {\n        if (!this.root || !callback) return;\n        this.root.traverse(callback);\n    }\n\n    traverseGeometry(callback) {\n        if (!callback) return;\n        var cache = {};\n        this.traverse(obj => {\n            var geometry = obj.geometry;\n            if (geometry && !cache[geometry.uuid]) {\n                cache[geometry.uuid] = true;\n                callback(geometry)\n            }\n        })\n    }\n\n    traverseMaterial(callback) {\n        if (!callback) return;\n        var cache = {};\n        this.traverse(obj => {\n            var material = obj.material;\n            if (!material) return;\n            if (Array.isArray(material)) {\n                material.forEach(matN => {\n                    if (!cache[matN.uuid]) return;\n                    cache[matN.uuid] = true;\n                    callback(matN);\n                })\n            }\n            else if (!cache[material.uuid]) {\n                cache[material.uuid] = true;\n                callback(material);\n            }\n        })\n    }\n\n    traverseTexture(callback) {\n        if (typeof callback !== 'function') return;\n\n        var cache = {};\n        this.traverseMaterial(material => {\n            for (const key in material) {\n                if (Object.hasOwnProperty.call(material, key)) {\n                    const map = material[key];\n                    if (map && map.isTexture && !cache[map.uuid]) {\n                        cache[map.uuid]\n                        callback(map)\n                    }\n                }\n            }\n        })\n\n    }\n\n    load(options) {\n        const { defaultValue, Resource } = Cesium;\n\n        options = options || this._options;\n        var manager = options.manager || this.manager;\n        var dracoDecoderPath = options.dracoDecoderPath || this.dracoDecoderPath;\n        var gltfBuffer = options.gltf || options.buffer;\n        var magic;\n\n        if (typeof options.url == 'string') {\n            var ext = Path.GetExtension(options.url).toLowerCase()\n            if (ext) {\n                magic = ext.slice(1);\n            }\n        }\n\n        if (gltfBuffer) {\n\n            if (gltfBuffer instanceof ArrayBuffer) {\n                gltfBuffer = new Uint8Array(gltfBuffer);\n            } else if (gltfBuffer instanceof Uint8Array) {\n                gltfBuffer = gltfBuffer.slice();\n            }\n\n            if (!magic) magic = this.getMagic(gltfBuffer);\n\n        }\n\n        var loader = options.loader || this.loader;\n        if (!loader) {\n\n            switch (magic) {\n                case 'osgb':\n                case 'osgt':\n                case 'osg':\n                case 'osgjson':\n                    loader = new OSGLoader(manager);\n                    break;\n                case 'vism':\n                    loader = new VISMLoader(manager);\n\n                    break;\n                default:\n                    loader = new GLTFLoader(manager);\n                    if (dracoDecoderPath && typeof dracoDecoderPath == 'string') {\n\n                        var dracoLoader = getDracoLoader(dracoDecoderPath);\n                        loader.setDRACOLoader(dracoLoader);\n                    }\n\n                    var ddsLoader = new DDSLoader(manager);\n                    loader.setDDSLoader(ddsLoader);\n                    break;\n            }\n\n        }\n\n        if (magic == 'vism' && !loader.dracoLoader\n            && dracoDecoderPath && typeof dracoDecoderPath == 'string') {\n            var dracoLoader = getDracoLoader(dracoDecoderPath);\n            loader.setDRACOLoader(dracoLoader);\n        }\n\n\n        var path = this.basePath || this.url;\n\n        if (path) {\n            if (path instanceof Resource) {\n                path = path.url\n            }\n            path = THREE.LoaderUtils.extractUrlBase(path)\n        }\n\n        if (gltfBuffer) {\n\n            if (magic == 'b3dm') {\n                var b3dm = MeshVisModelUtil.parseB3DM(gltfBuffer.buffer);\n                gltfBuffer = b3dm.gltfView;\n\n                delete b3dm.gltfView\n                this.b3dmHeader = b3dm;\n            }\n\n            loader.parse(gltfBuffer, path, model => {\n                this.onload(model);\n\n            }, (e) => {\n                console.error(e);\n                this.readyPromise.reject(e);\n            }, {\n                loadTexture: defaultValue(options.preloadTexture, true)\n            });\n\n        } else if (typeof options.url == 'string') {\n\n            var args = magic == 'x' ? [options.url, options] : options.url\n            loader.load(args, model => {\n\n                this.onload(model);\n\n            }, (evt) => {\n                this.onLoadProgress.raiseEvent(evt);\n            }, (e) => {\n                console.error(e);\n                this.readyPromise.reject('Failed to load model ' + this.url + \":\" + e);\n            }, magic == 'b3dm' ? (arrayBuffer) => {\n\n                var b3dm = MeshVisModelUtil.parseB3DM(arrayBuffer);\n\n                var gltfView = b3dm.gltfView;\n                delete b3dm.gltfView\n\n                this.b3dmHeader = b3dm;\n\n                return gltfView;\n\n            } : null, {\n                loadTexture: defaultValue(options.preloadTexture, true)\n            });\n        }\n\n        return this.readyPromise;\n    }\n\n    onload(model) {\n        const { Axis, Cartesian3, RequestType, defined } = Cesium;\n\n        this._model3js = model;\n\n        var scene = model.scene || model.mesh || model;\n        if (model.models) {\n            scene = new THREE.Object3D();\n            model.models.forEach(function (obj3d) {\n                scene.add(obj3d);\n            })\n            model.scene = scene;\n        }\n\n        this.modelScene = scene;\n        this.modelScene.visible = this._show;\n\n        if (this.b3dmHeader && !model.CESIUM_RTC) {\n            model.CESIUM_RTC = this.b3dmHeader.CESIUM_RTC;\n        }\n\n        if (this._requestType == RequestType.TILES3D || model.CESIUM_RTC) {\n\n            //CESIUM_RTC extension\n            var cesiumRtcModelViewUniform;\n            var uniformMapLoadedCallback;\n            if (model.CESIUM_RTC) {\n\n                model._rtcCenter = Cartesian3.fromArray(\n                    model.CESIUM_RTC\n                );\n                uniformMapLoadedCallback = function (uniformMap, frameState, mesh) {\n                    if (!cesiumRtcModelViewUniform) {\n                        cesiumRtcModelViewUniform = CESIUM_RTC_MODELVIEW(frameState.context.uniformState, model);\n                    }\n                    uniformMap.modelView = cesiumRtcModelViewUniform;\n                    uniformMap.u_modelView = cesiumRtcModelViewUniform;\n                    uniformMap.modelViewMatrix = cesiumRtcModelViewUniform;\n                    uniformMap.u_modelViewMatrix = cesiumRtcModelViewUniform;\n                }\n            }\n\n            var up = new Cartesian3(0, 0, 1);\n            if (this.upAxis == Axis.Y) {\n                up = new Cartesian3(0, 1, 0);\n            }\n\n            Object3D.traverse(scene, (node) => {\n                node.up.set(up.x, up.y, up.z);\n                node.frustumCulled = false\n                if (node.isMesh) {\n                    //CESIUM_RTC extension\n                    if (model.CESIUM_RTC) node.uniformMapLoadedCallback = uniformMapLoadedCallback;\n\n                    if (this.pickObject) node.pickObject = this.pickObject;\n                }\n\n            });\n\n\n            scene.updateMatrixWorld();\n            this.computeModelMatrix();\n\n        }\n\n        if (this._requestType != RequestType.TILES3D) {\n\n            let up //= new Cartesian3(0, 1, 0);\n            if (this.upAxis == Axis.Z) {\n                up = new Cartesian3(0, 0, 1);\n            } else if (this.upAxis == Axis.X) {\n                up = new Cartesian3(1, 0, 0);\n            } else if (this.upAxis == Axis.Y) {\n                up = new Cartesian3(0, 1, 0);\n            }\n\n            var needsOverrideTextureEncoding = defined(this.overrideTextureEncoding);\n            scene.traverse((node) => {\n                node.frustumCulled = this.cull;\n                up && node.up.set(up.x, up.y, up.z);\n\n                if (node.isMesh) {\n\n                    let pickObjects = node.pickObjects = []\n\n                    var materials = Array.isArray(node.material) ? node.material : [node.material]\n                    materials.forEach((material, materialIndex) => {\n                        if (material.transparent && this.translucent) material.translucent = true\n                        if (needsOverrideTextureEncoding && material.map) {\n                            material.map.encoding = this.overrideTextureEncoding\n                        }\n                        pickObjects.push({\n                            id: node,\n                            mesh: node,\n                            primitive: this,\n                            material: material,\n                            materialIndex: materialIndex\n                        })\n                    });\n                }\n            });\n\n            this.onModelLoaded.raiseEvent(this);\n            this.createBoudingVolume();\n            this.updateBoudingVolume()\n\n        }\n\n        scene.instances = this.instances;\n        scene.instancedAttributes = this.instancedAttributes;\n\n        this.modelMatrixNeedsUpdate = true;\n\n        this.ready = true;\n        this.readyPromise.resolve(this);\n    }\n\n    createBoudingVolume(force) {\n\n        if (!this.root || (this.boundingSphere && !force)) return;\n\n        var model = this.root;\n        var vertices = [];\n        model.updateMatrixWorld();\n\n        model.traverse((object) => {\n            let geometry = object.geometry;\n            if (!geometry) return\n            if (!geometry.boundingBox) {\n                geometry.computeBoundingBox()\n            }\n            var boundingBox = geometry.boundingBox.clone();\n            boundingBox.applyMatrix4(object.matrixWorld);\n            vertices.push(boundingBox.min, boundingBox.max);\n\n        });\n\n        const { BoundingSphere, AxisAlignedBoundingBox } = Cesium;\n        const { Box3, Vector3 } = THREE;\n\n        var boundingBox = AxisAlignedBoundingBox.fromPoints(vertices);\n        var bs = BoundingSphere.fromPoints(vertices);\n\n        vertices.splice(0);\n\n        this.boundingSphere = bs;\n        this.boundingBox = boundingBox;\n        this.boundingBox3js = new Box3(\n            new Vector3().copy(boundingBox.minimum),\n            new Vector3().copy(boundingBox.maximum));\n\n        this.boundingBoxWC3js = new Box3().copy(this.boundingBox3js);\n\n        this.modelMatrixNeedsUpdate = true;\n\n        this.createDebugVolume();\n    }\n\n    updateBoudingVolume() {\n\n        const { upAxis, root, visualizer, boundingSphere, boundingSphereWC, boundingBox, boundingBoxWC } = this;\n\n        if (!boundingSphere || !visualizer) return;\n\n        const { Axis, Matrix4 } = Cesium;\n        const { _actualModelMatrixYup, _actualModelMatrixXup, _actualModelMatrix } = visualizer\n\n        if (this.modelMatrixNeedsUpdate != false || visualizer.modelMatrixNeedsUpdate) {\n\n            let modelMatrix;\n            if (upAxis != null) {\n\n                if (upAxis == Axis.Y) {\n                    modelMatrix = _actualModelMatrixYup\n                } else if (upAxis == Axis.X) {\n                    modelMatrix = _actualModelMatrixXup\n                } else if (upAxis == Axis.Z) {\n                    modelMatrix = _actualModelMatrix\n                }\n\n            } else {\n\n                let up = root.up;\n                if (up.y) {\n                    modelMatrix = _actualModelMatrixYup\n                } else if (up.x) {\n                    modelMatrix = _actualModelMatrixXup\n                } else if (up.z) {\n                    modelMatrix = _actualModelMatrix\n                }\n\n            }\n\n            this.modelMatrix = modelMatrix;\n\n            if (!root.modelMatrix) root.modelMatrix = new Matrix4();\n            var rootModelMatrix = root.modelMatrix;\n            Matrix4.multiply(modelMatrix, root.matrixWorld.elements, rootModelMatrix);\n\n            var center = boundingSphereWC.center\n            Matrix4.multiplyByPoint(rootModelMatrix, boundingSphere.center, center);\n            boundingSphereWC.radius = boundingSphere.radius * Matrix4.getMaximumScale(rootModelMatrix);\n\n            center = boundingBoxWC.center;\n            Matrix4.multiplyByPoint(rootModelMatrix, boundingBox.center, center);\n\n        }\n\n    }\n\n    /**\n     * @private\n     */\n    createDebugVolume() {\n        if (this.debugVolume && this.boundingBox) {\n\n            let visualizer = this.visualizer;\n            if (this.debugVolume.isMesh) {\n                // this.debugVolume.destroy();\n                visualizer && visualizer.remove(debugVolume, true)\n                releaseResources(debugVolume)\n\n                this.debugVolume = true;\n            }\n            this.debugVolume = createDebugVolume(this.boundingBox, this, this.debugVolumeColor);\n            this.root.traverse(object => {\n                if (object.isDebugVolume) return;\n\n                if (object.isMesh && object.geometry) {\n                    var geometry = object.geometry;\n                    if (!geometry.boundingBox) {\n                        geometry.computeBoundingBox();\n                    }\n                    var boundingBox = boundingBox = geometry.boundingBox.clone().applyMatrix4(object.matrixWorld)\n                    boundingBox = Cesium.AxisAlignedBoundingBox.fromPoints([\n                        boundingBox.min, boundingBox.max\n                    ]);\n                    var debugVolume = createDebugVolume(boundingBox, this, this.debugVolumeColor);\n\n                    function onMeshDispose() {\n                        // debugVolume.destroy();\n                        visualizer && visualizer.remove(debugVolume, true)\n                        releaseResources(debugVolume)\n\n                        delete object.__debugVolume;\n                        object.removeEventListener('dispose', onMeshDispose);\n                    }\n                    object.addEventListener('dispose', onMeshDispose);\n\n                    object.__debugVolume = debugVolume\n                }\n            })\n        }\n    }\n\n    /**\n     *  \n     * @param {Cesium.FrameState} frameState  \n     * @returns {Number}  \n     * @private\n     */\n    computeRange(frameState, progressiveResolutionHeightFraction) {\n        this._distanceToCamera = frameState.camera.distanceToBoundingSphere(this._boundingSphereWC);\n        var distance = Math.max(this._distanceToCamera, Cesium.Math.EPSILON7);\n        if (this.rangeMode == 'PIXEL_ON_SCREEN') {//in pixels\n            var geometricError = this._boundingSphereWC.radius;\n            var range = RendererUtils.computeRange(distance, geometricError, frameState, progressiveResolutionHeightFraction);\n            return range;\n        }\n        else {//in meters\n            return distance;\n        }\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @private\n     */\n    computeVisibility(frameState) {\n\n        if (this.boundingSphere) {\n\n            this.range = this.computeRange(frameState)\n\n            this.visibility = this.visible = true;\n            if (this.range < this.minRange) {\n                this.visibility = this.visible = false;\n\n            } else {\n                var visibility;\n                // if (this._boundingBoxWC) {\n                //     visibility = frameState.cullingVolume.computeVisibility(this._boundingBoxWC);\n                // } else {\n                visibility = frameState.cullingVolume.computeVisibility(this._boundingSphereWC)\n                // }\n\n                if (visibility == Cesium.Intersect.OUTSIDE) {\n                    this.visibility = this.visible = false;\n                } else {\n                    this.visibility = this.visible = true;\n                }\n            }\n\n        }\n    }\n\n    /**\n     * @private\n     */\n    createOrUpdateLod() {\n        if (this._lodNeedsUpdate && this.root) {\n            this._lods.sort((a, b) => {\n                return a.maxRange - b.maxRange;\n            })\n\n            this._lods.forEach((lod) => {\n                if (lod.root) return;\n                let options = lod.simplifyOptions;\n\n                if (options.simplifyFactor >= 1) {\n                    lod.root = this.root;\n                    return;\n                }\n\n                let modifiedRoot = this.root.clone(true);\n\n                modifiedRoot.traverse((node) => {\n                    node.instances = this.instances;\n                    node.instancedAttributes = this.instancedAttributes;\n                    node.frustumCulled = false;\n\n                    if (node.isMesh) {\n\n                        let mesh = node;\n\n                        let geometry = mesh.geometry;\n                        let srcCount = geometry.attributes.position.count;\n                        let target_count = lod.simplifyFactor * srcCount;\n\n                        mesh.geometry = simplify_three(geometry, target_count, options);\n\n                        if (options.resampleTexture) {\n                            let material = mesh.material.clone();\n                            for (const name in material) {\n                                var texture = material[name];\n                                if (name != 'lightMap' && texture && texture.isTexture) {\n                                    material[name] = TextureUtils.resampleTexture(\n                                        texture.clone(), lod.simplifyFactor, options.forcePowerOfTwo\n                                    );\n\n                                }\n                            }\n                            mesh.material = material;\n\n                        }\n\n                    }\n                })\n\n                lod.root = modifiedRoot;\n\n            });\n\n            this._lodNeedsUpdate = false;\n        }\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {Mesh3D.MeshVisualizer} visualizer \n     */\n    initializeCommands(frameState, visualizer) {\n        this.commandInitializing = true;\n\n        const renderer = visualizer.renderer;\n        const currentWebglRenderState = renderer._webglRenderStates.get(visualizer, frameState.camera);\n        const context = frameState.context;\n        const webglRenderItems = renderer._webglRenderItems;\n        var objects = [], batches = [objects], batchSize = 10, currentBatchCount = 0;\n\n        this.root.updateMatrixWorld();\n\n        this.root.traverse((object) => {\n\n            if (object.isMesh || object.isLine || object.isPoints || object.isSprite) {\n\n                objects.push(object);\n\n                const geometry = WebGLGeometries.get(object.geometry);\n                const materialIndicesUsed = geometry.materialIndicesUsed;\n                currentBatchCount += materialIndicesUsed ? materialIndicesUsed.length : 1;\n\n                if (currentBatchCount > batchSize) {\n                    objects = [];\n                    batches.push(objects);\n                    currentBatchCount = 0\n                }\n            }\n\n        });\n\n        var worker = new GenericWorker(batches, batch => {\n\n            for (let i = 0; i < batch.length; i++) {\n                const object = batch[i];\n\n                visualizer.computeModelMatrix(object, frameState)\n                visualizer.computeObjectVisibility(object, frameState, true);\n\n                const renderItems = webglRenderItems.getAndUpdate(object, frameState, false, currentWebglRenderState)\n\n                if (!renderItems) continue\n\n                for (let h = 0; h < renderItems.length; h++) {\n                    const renderItem = renderItems[h];\n                    const drawCommand = renderItem.drawCommand;\n                    drawCommand.framebuffer = visualizer.defaultFramebuffer;\n                    drawCommand.execute(context)\n                    drawCommand.framebuffer = undefined;\n                    renderItem.loaded = true;\n\n                }\n\n            }\n\n        });\n\n        return worker.run((progress, currentObject, loaded, total) => {\n\n            this.onInitProgress.raiseEvent({ progress: progress, message: 'Initializing drawCommands', loaded, total })\n\n        }).then(() => {\n\n            this.commandInitializing = false;\n            this.commandInitialized = true;\n            this.onInitInitialized.raiseEvent(this);\n\n        })\n\n    }\n\n    /**\n     * \n     * @param {Cesium.FrameState} frameState \n     * @param {Object3D[]} renderList \n     * @param {THREE.Camera}camera3js\n     * @override IRenderable.prototype.render\n     * @private\n     */\n    render(frameState, renderList, camera3js) {\n\n        if (!this.root || !this.visualizer) return;\n\n        if (this.preInitialize) {\n            if (this.commandInitializing) return;\n            if (!this.commandInitialized) {\n                this.initializeCommands(frameState, this.visualizer);\n                return;\n            }\n        }\n\n        let cacheRenderList = this._cacheRenderList || [];\n        this._cacheRenderList = cacheRenderList;\n        if (frameState.frameNumber != this.frameNumber) {\n            cacheRenderList.splice(0);\n            const editable = this.editable;\n            const castShadow = this.castShadow;\n            const receiveShadow = this.receiveShadow;\n            const root = this.root;\n\n            if (editable != root._editable\n                || castShadow != root._castShadow\n                || receiveShadow != root._receiveShadow) {\n\n                root._editable = editable;\n                root._castShadow = castShadow;\n                root._receiveShadow = receiveShadow;\n\n                root.traverse((object) => {\n                    var objectMaterial = object.material;\n                    if (objectMaterial == undefined) return;\n\n                    object.castShadow = castShadow;\n                    object.receiveShadow = receiveShadow;\n                    var materials = Array.isArray(objectMaterial) ? objectMaterial : [objectMaterial]\n                    materials.forEach(material => {\n                        material.autoRefresh = editable;\n                    })\n\n                })\n\n            }\n\n            if (this.editable)\n                root.updateMatrixWorld();\n\n            this.updateBoudingVolume();\n            this.computeVisibility(frameState, camera3js);\n\n            if (!this.visible) return;\n\n            var loadTaskList = MeshVisModel._loadTaskList;\n            if (this._lazyLoad && !this.root && !this._isLazyLoading) {\n                this._isLazyLoading = true;\n                this.tileId = Cesium.createGuid();\n                loadTaskList.add(this);\n            }\n\n            if (!loadTaskList.frameNumber || loadTaskList.frameNumber != frameState.frameNumber) {\n                loadTaskList.frameNumber = frameState.frameNumber;\n                loadTaskList.update()\n            }\n\n            if (this.root && this.show && !this.debugVolumeOnly) {\n\n                let objectToRender = null;\n\n                if (this._lods.length > 0) {\n                    this.createOrUpdateLod();\n\n                    for (let i = 0; i < this._lods.length; i++) {\n                        const lod = this._lods[i];\n                        if (this.range <= lod.maxRange) {\n                            objectToRender = lod.root;\n                            break;\n                        }\n                    }\n                }\n\n                objectToRender = objectToRender || this.root;\n                cacheRenderList.push(objectToRender);\n\n            }\n\n            if (this.debugVolume && this.showDebugVolume) {\n                cacheRenderList.push(this.debugVolume);\n                this.root.traverse((object) => {\n                    var debugVolume = object.__debugVolume\n                    if (!debugVolume) return;\n                    var debugMaterial = debugVolume.material\n                    var debugVolumeColor = this.debugVolumeColor;\n                    if (debugMaterial._debugVolumeColor != debugVolumeColor) {\n                        debugMaterial._debugVolumeColor = debugVolumeColor\n                        if (debugVolumeColor instanceof Cesium.Color) {\n                            debugVolumeColor = debugVolumeColor.toCssColorString()\n                        }\n                        debugMaterial.color.set(debugVolumeColor)\n                    }\n                    cacheRenderList.push(debugVolume);\n                })\n            }\n\n            if (this.root) {\n                this.modelMatrixNeedsUpdate = false;\n            }\n        }\n\n        cacheRenderList.forEach(item => {\n            renderList.push(item);\n        })\n    }\n\n\n    /**\n     *  for cesium3dtiles\n     * @param {Cesium.FrameState} frameState \n     * @private\n     * @override Cesium.Primitive.prototype.update\n     */\n    update(frameState) {\n\n        if (this._requestType == Cesium.RequestType.TILES3D\n            || (this.model3js && this.model3js.CESIUM_RTC)\n        ) {\n            this.computeModelMatrix();\n        }\n\n    }\n\n    //for cesium3dtile\n    computeModelMatrix() {\n        if (!this._model3js) return;\n\n        const { Axis, Matrix4 } = Cesium;\n\n        let computedModelMatrix = this._computedModelMatrix;\n        if (!computedModelMatrix) {\n            computedModelMatrix = new Matrix4();\n            this._computedModelMatrix = computedModelMatrix;\n        }\n\n        if (this.modelMatrixNeedsUpdate) {\n\n            if (this.upAxis === Axis.Y) {\n                Matrix4.multiplyTransformation(\n                    this.modelMatrix,\n                    Axis.Y_UP_TO_Z_UP,\n                    computedModelMatrix\n                );\n            } else if (this.upAxis === Axis.X) {\n                Matrix4.multiplyTransformation(\n                    this.modelMatrix,\n                    Axis.X_UP_TO_Z_UP,\n                    computedModelMatrix\n                );\n            };\n            if (this.forwardAxis == Axis.Z) {\n                // glTF 2.0 has a Z-forward convention that must be adapted here to X-forward.\n                Matrix4.multiplyTransformation(\n                    this.modelMatrix,\n                    Axis.Z_UP_TO_X_UP,\n                    computedModelMatrix\n                );\n            }\n\n            this.modelMatrixNeedsUpdate = false;\n        }\n\n        var scene = this.modelScene;\n\n        Object3D.traverse(scene, (node) => {\n            if (node.isMesh) {\n                node.frustumCulled = this.cull;\n                node.modelMatrix = Matrix4.multiply(computedModelMatrix, node.matrixWorld.elements, node.modelMatrix || new Cesium.Matrix4())\n            }\n            node.matrixAutoUpdate = false;\n            node.modelMatrixNeedsUpdate = false;\n        });\n\n        scene.modelMatrixNeedsUpdate = false;\n        scene.matrixAutoUpdate = false;\n    }\n\n    //for batchtable\n    updateCommands(batchId, color) { }\n\n    addLod(maxRange, simplifyFactor, simplifyOptions) {\n        simplifyOptions = simplifyOptions || {};\n        simplifyOptions = Object.assign({\n            agressiveness: 4,\n            update: 5,\n            resampleTexture: false,\n            forcePowerOfTwo: false\n        }, simplifyOptions);\n\n        let lod = {\n            maxRange: maxRange,\n            simplifyFactor: simplifyFactor,\n            simplifyOptions: simplifyOptions\n        };\n        this._lods.push(lod);\n        this._lodNeedsUpdate = true;\n\n        return lod;\n    }\n\n    clearLods() {\n\n        this._lods.forEach((lod) => {\n            if (lod.root) {\n                releaseResources(lod.root);\n                lod.root = null;\n            }\n        });\n\n        return this._lods.splice();\n    }\n\n    getNodeByName(name) {\n        if (this.ready) {\n            var result;\n            this.root.traverse((node) => {\n                if (result) return;\n                if (node.name == name) result = node;\n            })\n            return result;\n        }\n\n    }\n    getObjectByName(name) {\n        return this.getNodeByName(name);\n    }\n\n    exportGLTF(options) {\n        options = options || {};\n        if (!options.animations && this.model3js.animations) {\n            options.animations = this.model3js.animations;\n        }\n        return MeshVisModelUtil.exportGLTF(this.root, options);\n    }\n\n    exportB3DM(options) {\n        options = options || {};\n        if (!options.animations && this.animations) {\n            options.animations = this.animations;\n        }\n        return MeshVisModelUtil.exportB3DM(this.root, options)\n    }\n\n    exportVISM(options) {\n        options = options || {};\n        if (!options.animations && this.animations) {\n            options.animations = this.animations;\n        }\n        return MeshVisModelUtil.exportVISM(this.root, options)\n    }\n\n    destroy() {\n        let { visualizer, debugVolume, _model3js } = this;\n        if (_model3js) {\n            var scene = this.root;\n            visualizer && visualizer.remove(scene, true);\n            releaseResources(scene);\n            this._model3js = null;\n            this.modelScene = null;\n        }\n        if (debugVolume) {\n            visualizer && visualizer.remove(debugVolume, true);\n            releaseResources(debugVolume);\n            this.debugVolume = null;\n        }\n        this.loader = null;\n        this.visualizer = null;\n        this.manager = null;\n        this._boundingBox = null;\n        this._boundingBoxWC = null\n        this._boundingSphere = null;\n        this._boundingSphereWC = null;\n        this._instances = null;\n        this._instancedAttributes = null;\n        this._cacheRenderList && this._cacheRenderList.splice(0);\n        this._cacheRenderList = null;\n\n        Cesium.destroyObject(this);\n    }\n}\n\nObject.defineProperties(MeshVisModel.prototype, {\n    instances: {\n        get() {\n            return this._instances;\n        }\n    },\n\n    instancedAttributes: {\n        get() { return this._instancedAttributes; }\n    },\n\n    /**\n     *  \n     * @private\n     */\n    modelMatrix: {\n        set(val) {\n            const Matrix4 = Cesium.Matrix4;\n\n            if (!this._model3js) this.modelMatrixNeedsUpdate = true;\n            if (val.elements) val = val.elements;\n            if (Matrix4.equals(val, this._modelMatrix)) return;\n\n            this._modelMatrix = Matrix4.clone(val, this._modelMatrix);\n            this.modelMatrixNeedsUpdate = true;\n        },\n        get() { return this._modelMatrix; }\n    },\n    show: {\n        set(val) {\n            this._show = val;\n            if (this.modelScene) this.modelScene.visible = val;\n        },\n        get() { return this._show; }\n\n    },\n    model3js: {\n        get() {\n            return this._model3js;\n        }\n    },\n\n    root: {\n        get() {\n            return this._model3js && (this._model3js.scene || this._model3js);\n        }\n    },\n\n    gltf: {\n        get() {\n            if (this.model3js && this.parser) { return this.model3js.parser.json; }\n            return null;\n        }\n    },\n\n    osg: {\n        get() {\n            if (this.model3js && this.model3js.osgRoot) return this.model3js.osgRoot;\n            return null;\n        }\n    },\n\n    animations: {\n        get() {\n            return this.model3js ? this.model3js.animations : [];\n        }\n    },\n\n    boundingSphere: {\n        set(boundingSphere) {\n            if (boundingSphere) {\n                this._boundingSphere = boundingSphere;\n                this._boundingSphereWC = Cesium.BoundingSphere.clone(boundingSphere);\n            }\n        },\n        get() {\n            return this._boundingSphere;\n        }\n    },\n    boundingSphereWC: {\n        get() {\n            return this._boundingSphereWC;\n        }\n    },\n\n    boundingBox: {\n        get() {\n            return this._boundingBox;\n        },\n        set(boundingBox) {\n            if (boundingBox) {\n                this._boundingBox = boundingBox;\n                this._boundingBoxWC = Cesium.AxisAlignedBoundingBox.clone(this.boundingBox);\n\n            }\n        }\n    },\n\n    boundingBoxWC: {\n        get() {\n            return this._boundingBoxWC;\n        }\n    }\n});\nvar _MeshVisModelUtil = MeshVisModelUtil;\nMeshVisModel.exportGLTF = _MeshVisModelUtil.exportGLTF;\nMeshVisModel.exportB3DM = _MeshVisModelUtil.exportB3DM;\nMeshVisModel.parseB3DM = _MeshVisModelUtil.parseB3DM;\nMeshVisModel.exportVISM = _MeshVisModelUtil.exportVISM;\n\nMeshVisModel.prototype.type = 'MeshVisModel';\nMeshVisModel.prototype.isMeshVisModel = true;\nexport default MeshVisModel;\n",
    "\nimport { GLTFExporter } from  \"../ThirdParty/exporters/GLTFExporter.js\";\n\nimport VISMExporter from  \"./VISMExporter.js\";\n\n\nfunction createColorChangedCallback(model) {\n    return function (batchId, color) {\n        model.updateCommands(batchId, color);\n    };\n}\n\nconst sizeOfUint32 = 4;\nexport default class MeshVisModelUtil {\n\n    /**\n     * \n     * @param {THREE.Group|THREE.Scene} input \n     * @param {{\n            binary: boolean,\n            trs: bool,\n            onlyVisible: boolean,\n            truncateDrawRange: boolean,\n            embedImages: boolean,\n            maxTextureSize: number,\n            animations: THREE.AnimationClip[],\n            forceIndices: boolean,\n            forcePowerOfTwoTextures: boolean,\n            includeCustomExtensions: boolean,\n            assetSrcs: { [key: string]: string }\n     * }} [options] \n     *@returns {Promise<object|ArrayBuffer>}\n     */\n    static exportGLTF(input, options) {\n\n        return new Promise((resolve, reject) => {\n\n            try {\n                var gltfExporter = new GLTFExporter();\n                options = options || {};\n\n                options = Object.assign({\n                    embedImages: false,\n                    trs: false, //document.getElementById('option_trs').checked,\n                    onlyVisible: false,//document.getElementById('option_visible').checked,\n                    // truncateDrawRange: document.getElementById('option_drawrange').checked,\n                    binary: false,// document.getElementById('option_binary').checked,\n                    //forceIndices: document.getElementById('option_forceindices').checked,\n                    //forcePowerOfTwoTextures: document.getElementById('option_forcepot').checked,\n                    maxTextureSize: Infinity//Number(document.getElementById('option_maxsize').value) || Infinity // To prevent NaN value\n                }, options);\n                gltfExporter.parse(input, function (result) {\n                    resolve(result);\n\n                }, options);\n            } catch (e) {\n                reject(e)\n            }\n\n        })\n    }\n\n\n    /**\n     * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n     * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n     *\n     * @param {Integer} bufferSize The size the original buffer.\n     * @returns {Integer} new buffer size with required padding.\n     *\n     */\n    static getPaddedBufferSize(bufferSize) {\n\n        return Math.ceil(bufferSize / 4) * 4;\n\n    }\n\n    /**\n     * Returns a buffer aligned to 4-byte boundary.\n     *\n     * @param {Uint8Array} buffer Buffer to pad\n     * @param {Integer} paddingByte (Optional)\n     * @returns {Uint8Array} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n     */\n    static getPaddedBuffer(buffer, paddingByte) {\n\n        paddingByte = paddingByte || 0;\n\n        var paddedLength = this.getPaddedBufferSize(buffer.byteLength);\n\n        if (paddedLength !== buffer.byteLength) {\n\n            var array = new Uint8Array(paddedLength);\n            array.set(buffer);//new Uint8Array(arrayBuffer));\n\n            if (paddingByte !== 0) {\n\n                for (var i = buffer.byteLength; i < paddedLength; i++) {\n\n                    array[i] = paddingByte;\n\n                }\n\n            }\n\n            return array;\n\n        }\n\n        return buffer;\n\n    }\n\n    /**\n     * \n     * @param {THREE.Group|THREE.Scene} input \n     * @param {{\n        trs: bool,\n        onlyVisible: boolean,\n        truncateDrawRange: boolean,\n        embedImages: boolean,\n        maxTextureSize: number,\n        animations: THREE.AnimationClip[],\n        forceIndices: boolean,\n        forcePowerOfTwoTextures: boolean,\n        includeCustomExtensions: boolean,\n        assetSrcs: { [key: string]: string },\n        featureTableJson?:object,\n        featureTableBinary?:Uint8Array,\n        batchTableJson?:object,\n        batchTableBinary?:Uint8Array,\n        properties?:object\n    * }} [options] \n    * @returns {Promise<Uint8Array>}\n    */\n    static exportB3DM(input, options) {\n\n        var properties = options.properties;\n        var featureTableJson = options.featureTableJson ? options.featureTableJson : {\n            BATCH_LENGTH: 0,\n        };\n\n        //valid batchTableJson\n        var batchTableJson = options.batchTableJson;\n        if (batchTableJson && featureTableJson.BATCH_LENGTH && properties) {\n            var batchPropertyNames = Object.keys(batchTableJson);\n            var propertyNames = Object.keys(properties);\n            var eq = batchPropertyNames.length == propertyNames.length;\n            eq = eq && batchPropertyNames.length == featureTableJson.BATCH_LENGTH;\n            if (eq) {\n                for (let i = 0; i < propertyNames.length; i++) {\n                    var name = propertyNames[i]\n                    if (batchPropertyNames.indexOf(name) == -1) {\n                        eq = false;\n                        break;\n                    }\n                }\n            }\n\n            if (!eq) {\n                console.warn('batchTableJson&featureTableJson.BATCH_LENGTH&properties donot have same length');\n            } else {\n                batchTableJson = null;\n                featureTableJson.BATCH_LENGTH = 0;\n            }\n\n        } else if (\n            featureTableJson.BATCH_LENGTH ||\n            (batchTableJson && Object.keys(batchTableJson) > 0)\n            || (properties && Object.keys(properties) > 0)\n        ) {\n\n            console.warn('batchTableJson&featureTableJson.BATCH_LENGTH&properties donot have same length');\n        }\n\n        featureTableJson = JSON.stringify(featureTableJson);\n\n        var featureTableJsonBuffer = new Uint8Array(featureTableJson.length);\n        for (let i = 0; i < featureTableJson.length; i++) {\n            featureTableJsonBuffer[i] = featureTableJson.charCodeAt(i)\n        }\n        featureTableJsonBuffer = this.getPaddedBuffer(featureTableJsonBuffer, \" \".charCodeAt(0));//\" \"\n\n        var featureTableBinary = new Uint8Array(0);\n        if (options.featureTableBinary) {\n            featureTableBinary = this.getPaddedBuffer(options.featureTableBinary)\n        }\n\n        var batchTableJsonBuffer = new Uint8Array(0);\n        var batchTableBinary = new Uint8Array(0);\n\n        if (batchTableJson) {\n\n            batchTableJson = JSON.stringify(batchTableJson);\n            var batchTableJsonBuffer = new Uint8Array(batchTableJson.length);\n            for (let i = 0; i < batchTableJson.length; i++) {\n                batchTableJsonBuffer[i] = batchTableJson.charCodeAt(i)\n            }\n            batchTableJsonBuffer = this.getPaddedBuffer(batchTableJsonBuffer, \" \".charCodeAt(0));\n\n            if (options.batchTableBinary) {\n                batchTableBinary = this.getPaddedBuffer(options.batchTableBinary)\n            }\n\n        }\n\n        // magic\t4-byte ANSI string\t\"b3dm\". This can be used to identify the content as a Batched 3D Model tile.\n        // version\tuint32\tThe version of the Batched 3D Model format. It is currently 1.\n        // byteLength\tuint32\tThe length of the entire tile, including the header, in bytes.\n        // featureTableJSONByteLength\tuint32\tThe length of the Feature Table JSON section in bytes.\n        // featureTableBinaryByteLength\tuint32\tThe length of the Feature Table binary section in bytes.\n        // batchTableJSONByteLength\tuint32\tThe length of the Batch Table JSON section in bytes. Zero indicates there is no Batch Table.\n        // batchTableBinaryByteLength\tuint32\tThe length of the Batch Table binary section in bytes. If batchTableJSONByteLength is zero, this will also be zero.\n\n        //[featureTableJson]\n        //[featureTableBinary]\n        //[batchTableJson]\n        //[batchTableBinary]\n\n        var header = {\n            magic: 'b3dm',\n            version: 1,\n            byteLength: 0,\n            featureTableJSONByteLength: featureTableJsonBuffer.length,\n            featureTableBinaryByteLength: featureTableBinary.length,\n            batchTableJSONByteLength: batchTableJsonBuffer.length,\n            batchTableBinaryByteLength: batchTableBinary.length\n        }, headLength = 28;\n        options = options || {};\n        options.binary = true;\n\n        return this.exportGLTF(input, options).then((glb) => {\n\n            header.byteLength = glb.byteLength + headLength\n                + header.featureTableJSONByteLength\n                + header.featureTableBinaryByteLength\n                + header.batchTableJSONByteLength\n                + header.batchTableBinaryByteLength;\n\n            var byteOffset = 0, b3dmBuffer = new Uint8Array(header.byteLength);\n            var dv = new DataView(b3dmBuffer.buffer)\n\n            //write header\n\n            for (let i = 0; i < header.magic.length; i++) {\n                dv.setUint8(byteOffset, header.magic.charCodeAt(i))\n                byteOffset++\n            }\n\n            dv.setUint32(byteOffset, header.version, true)\n            byteOffset += sizeOfUint32;\n\n            dv.setUint32(byteOffset, header.byteLength, true)\n            byteOffset += sizeOfUint32;\n\n            dv.setUint32(byteOffset, header.featureTableJSONByteLength, true)\n            byteOffset += sizeOfUint32;\n\n            dv.setUint32(byteOffset, header.featureTableBinaryByteLength, true)\n            byteOffset += sizeOfUint32;\n\n            dv.setUint32(byteOffset, header.batchTableJSONByteLength, true)\n            byteOffset += sizeOfUint32;\n\n            dv.setUint32(byteOffset, header.batchTableBinaryByteLength, true)\n            byteOffset += sizeOfUint32;\n\n            //write featureTableJson\n            b3dmBuffer.set(featureTableJsonBuffer, byteOffset);\n            byteOffset += featureTableJsonBuffer.length\n\n            //write batchTableJson\n            b3dmBuffer.set(batchTableJsonBuffer, byteOffset);\n            byteOffset += batchTableJsonBuffer.length;\n\n            //write glb\n            glb = new Uint8Array(glb);\n            b3dmBuffer.set(glb, byteOffset);\n\n            return b3dmBuffer;\n\n        })\n\n    }\n\n    /**\n     * \n     * @param {ArrayBuffer} arrayBuffer \n     * @param {number}[byteOffset=0]\n     */\n    static parseB3DM(arrayBuffer, byteOffset) {\n\n        const { defaultValue, getStringFromTypedArray, Cesium3DTileFeatureTable, ComponentDatatype } = Cesium;\n\n        var byteStart = defaultValue(byteOffset, 0);\n        byteOffset = byteStart;\n\n        var uint8Array = new Uint8Array(arrayBuffer);\n        var view = new DataView(arrayBuffer);\n\n        var magic = getStringFromTypedArray(\n            uint8Array,\n            byteOffset,\n            4\n        );\n\n        if (magic != 'b3dm') {\n            throw new Error('not b3dm')\n        }\n\n        byteOffset += sizeOfUint32; // Skip magic\n\n        var version = view.getUint32(byteOffset, true);\n        if (version !== 1) {\n            throw new Error(\n                \"Only Batched 3D Model version 1 is supported.  Version \" +\n                version +\n                \" is not.\"\n            );\n        }\n        byteOffset += sizeOfUint32;\n\n        var byteLength = view.getUint32(byteOffset, true);\n        byteOffset += sizeOfUint32;\n\n        var featureTableJsonByteLength = view.getUint32(byteOffset, true);\n        byteOffset += sizeOfUint32;\n\n        var featureTableBinaryByteLength = view.getUint32(byteOffset, true);\n        byteOffset += sizeOfUint32;\n\n        var batchTableJsonByteLength = view.getUint32(byteOffset, true);\n        byteOffset += sizeOfUint32;\n\n        var batchTableBinaryByteLength = view.getUint32(byteOffset, true);\n        byteOffset += sizeOfUint32;\n\n        var batchLength;\n\n        // Legacy header #1: [batchLength] [batchTableByteLength]\n        // Legacy header #2: [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]\n        // Current header: [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength]\n        // If the header is in the first legacy format 'batchTableJsonByteLength' will be the start of the JSON string (a quotation mark) or the glTF magic.\n        // Accordingly its first byte will be either 0x22 or 0x67, and so the minimum uint32 expected is 0x22000000 = 570425344 = 570MB. It is unlikely that the feature table JSON will exceed this length.\n        // The check for the second legacy format is similar, except it checks 'batchTableBinaryByteLength' instead\n        if (batchTableJsonByteLength >= 570425344) {\n            // First legacy check\n            byteOffset -= sizeOfUint32 * 2;\n            batchLength = featureTableJsonByteLength;\n            batchTableJsonByteLength = featureTableBinaryByteLength;\n            batchTableBinaryByteLength = 0;\n            featureTableJsonByteLength = 0;\n            featureTableBinaryByteLength = 0;\n            console.warn(\n                \"b3dm-legacy-header\",\n                \"This b3dm header is using the legacy format [batchLength] [batchTableByteLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/master/specification/TileFormats/Batched3DModel.\"\n            );\n        } else if (batchTableBinaryByteLength >= 570425344) {\n            // Second legacy check\n            byteOffset -= sizeOfUint32;\n            batchLength = batchTableJsonByteLength;\n            batchTableJsonByteLength = featureTableJsonByteLength;\n            batchTableBinaryByteLength = featureTableBinaryByteLength;\n            featureTableJsonByteLength = 0;\n            featureTableBinaryByteLength = 0;\n            console.warn(\n                \"b3dm-legacy-header\",\n                \"This b3dm header is using the legacy format [batchTableJsonByteLength] [batchTableBinaryByteLength] [batchLength]. The new format is [featureTableJsonByteLength] [featureTableBinaryByteLength] [batchTableJsonByteLength] [batchTableBinaryByteLength] from https://github.com/CesiumGS/3d-tiles/tree/master/specification/TileFormats/Batched3DModel.\"\n            );\n        }\n\n        var featureTableJson;\n        if (featureTableJsonByteLength === 0) {\n            featureTableJson = {\n                BATCH_LENGTH: defaultValue(batchLength, 0),\n            };\n        } else {\n            var featureTableString = getStringFromTypedArray(\n                uint8Array,\n                byteOffset,\n                featureTableJsonByteLength\n            );\n            featureTableJson = JSON.parse(featureTableString);\n            byteOffset += featureTableJsonByteLength;\n        }\n\n        var featureTableBinary = new Uint8Array(\n            arrayBuffer,\n            byteOffset,\n            featureTableBinaryByteLength\n        );\n        byteOffset += featureTableBinaryByteLength;\n\n        var featureTable = new Cesium3DTileFeatureTable(\n            featureTableJson,\n            featureTableBinary\n        );\n\n        batchLength = featureTable.getGlobalProperty(\"BATCH_LENGTH\");\n        featureTable.featuresLength = batchLength;\n\n        var rtcCenter = featureTable.getGlobalProperty(\n            \"RTC_CENTER\",\n            ComponentDatatype.FLOAT,\n            3\n        );\n\n        var batchTableJson;\n        var batchTableBinary;\n        if (batchTableJsonByteLength > 0) {\n            // PERFORMANCE_IDEA: is it possible to allocate this on-demand?  Perhaps keep the\n            // arraybuffer/string compressed in memory and then decompress it when it is first accessed.\n            //\n            // We could also make another request for it, but that would make the property set/get\n            // API async, and would double the number of numbers in some cases.\n            var batchTableString = getStringFromTypedArray(\n                uint8Array,\n                byteOffset,\n                batchTableJsonByteLength\n            );\n            batchTableJson = JSON.parse(batchTableString);\n            byteOffset += batchTableJsonByteLength;\n\n            if (batchTableBinaryByteLength > 0) {\n                // Has a batch table binary\n                batchTableBinary = new Uint8Array(\n                    arrayBuffer,\n                    byteOffset,\n                    batchTableBinaryByteLength\n                );\n                // Copy the batchTableBinary section and let the underlying ArrayBuffer be freed\n                batchTableBinary = new Uint8Array(batchTableBinary);\n                byteOffset += batchTableBinaryByteLength;\n            }\n        }\n\n        // var colorChangedCallback;\n        // if (Cesium.defined(tileset.classificationType)) {\n        //     colorChangedCallback = createColorChangedCallback(this);\n        // }\n\n        var batchTable = {\n            // var batchTable = new Cesium.Cesium3DTileBatchTable(\n            // this,\n            batchLength,\n            batchTableJson,\n            batchTableBinary\n        }\n        //     ,colorChangedCallback\n        // );\n        // this._batchTable = batchTable;\n\n        var gltfByteLength = byteStart + byteLength - byteOffset;\n        if (gltfByteLength === 0) {\n            throw new Error(\"glTF byte length must be greater than 0.\");\n        }\n\n        var gltfView;\n        if (byteOffset % 4 === 0) {\n            gltfView = new Uint8Array(arrayBuffer, byteOffset, gltfByteLength);\n        } else {\n            // Create a copy of the glb so that it is 4-byte aligned\n            console.warn(\n                \"b3dm-glb-unaligned\",\n                \"The embedded glb is not aligned to a 4-byte boundary.\"\n            );\n            gltfView = new Uint8Array(\n                uint8Array.subarray(byteOffset, byteOffset + gltfByteLength)\n            );\n        }\n\n        return {\n            gltfView,\n            featureTable,\n            batchTable,\n            CESIUM_RTC: rtcCenter\n        }\n    }\n\n    /**\n     * \n     * @param {THREE.Group|THREE.Scene} input  \n     * @param {object} [options] \n     * @param {object} [options.assetSrcs]\n     * @param {object} [options.imageCache]\n     * @param {boolean} [options.embedImages]\n     * @param {boolean} [options.binary]\n     * @param {boolean} [options.forceIndices]\n     * @param {boolean} [options.removeUv2]\n     * @param {boolean} [options.removeUv3]\n     * @param {boolean} [options.removeNormal]\n     * @param {boolean} [options.dracoEncode]  \n     * @param {number} [options.dracoMinVertexCount=300]  \n     * @param {(base64:string,index:number)=>string} [options.exportDataURL]\n     */\n    static exportVISM(input, options) {\n        options = options || {};\n        var exporter = new VISMExporter(options)\n        return exporter.parse(input, input.animations || options.animations)\n    }\n}",
    "\nimport * as Osg from  \"../ThirdParty/osg-serializer-js/Source/index.js\";\n\nimport esExtends from  \"../../../utils/Source/esExtends.js\";\n\nimport { parseOsg } from  \"./parseOsg.js\";\n\n\nvar\n    BufferAttribute,\n    BufferGeometry,\n    ClampToEdgeWrapping,\n    Color,\n    DoubleSide,\n    FileLoader,\n    FrontSide,\n    Group,\n\n    LinearFilter,\n    LinearMipMapLinearFilter,\n    LinearMipMapNearestFilter,\n    LinearMipMapLinearFilter,\n    Loader,\n    LoaderUtils,\n    // Material,\n    // Math as _Math,\n    // _Math,\n    // Matrix4,\n    Mesh,\n    MeshBasicMaterial,\n    MeshPhongMaterial,\n    MeshPhysicalMaterial,\n    MeshStandardMaterial,\n    MirroredRepeatWrapping,\n    NearestFilter,\n    NearestMipMapLinearFilter,\n    NearestMipMapNearestFilter,\n    // Object3D, \n    RGBAFormat,\n    RGBFormat,\n    RepeatWrapping,\n\n    TextureLoader,\n\n    // Vector2,\n    // Vector3, \n    // sRGBEncoding,\n    Texture,\n    // ShaderMaterial\n    VertexColors\n    ;\n\nconst isNodeEnv = (typeof Blob == 'undefined'\n    || typeof Image == 'undefined'\n    || typeof Document == 'undefined'\n    || typeof window == 'undefined');\n\nvar initDeps$OSGLoaderDone = false;\nvar isCreateImageBitmapSupported = false;\nfunction initDeps$OSGLoader() {\n    if (initDeps$OSGLoaderDone) return;\n    initDeps$OSGLoaderDone = true;\n    const _THREE = THREE;\n\n    BufferAttribute = _THREE.BufferAttribute,\n        BufferGeometry = _THREE.BufferGeometry,\n        ClampToEdgeWrapping = _THREE.ClampToEdgeWrapping,\n        Color = _THREE.Color,\n\n        DoubleSide = _THREE.DoubleSide,\n        FileLoader = _THREE.FileLoader,\n        FrontSide = _THREE.FrontSide,\n        Group = _THREE.Group,\n\n        LinearFilter = _THREE.LinearFilter,\n        LinearMipMapLinearFilter = _THREE.LinearMipMapLinearFilter,\n        LinearMipMapNearestFilter = _THREE.LinearMipMapNearestFilter,\n        Loader = _THREE.Loader,\n        LoaderUtils = _THREE.LoaderUtils,\n        // Material = _THREE.Material,\n        // Math as _Math,\n        // _Math = _THREE.Math,\n        // Matrix4 = _THREE.Matrix4,\n        Mesh = _THREE.Mesh,\n        MeshBasicMaterial = _THREE.MeshBasicMaterial,\n        MeshPhongMaterial = _THREE.MeshPhongMaterial,\n        MeshPhysicalMaterial = _THREE.MeshPhysicalMaterial,\n        MeshStandardMaterial = _THREE.MeshStandardMaterial,\n        MirroredRepeatWrapping = _THREE.MirroredRepeatWrapping,\n        NearestFilter = _THREE.NearestFilter,\n        NearestMipMapLinearFilter = _THREE.NearestMipMapLinearFilter,\n        NearestMipMapNearestFilter = _THREE.NearestMipMapNearestFilter,\n        // Object3D = _THREE.Object3D, \n        RGBAFormat = _THREE.RGBAFormat,\n        RGBFormat = _THREE.RGBFormat,\n        RepeatWrapping = _THREE.RepeatWrapping,\n        TextureLoader = _THREE.TextureLoader,\n        // Vector2 = _THREE.Vector2,\n        // Vector3 = _THREE.Vector3,\n        // sRGBEncoding = _THREE.sRGBEncoding,\n        Texture = _THREE.Texture,\n        // ShaderMaterial = _THREE.ShaderMaterial;\n        VertexColors = _THREE.VertexColors;\n\n    isCreateImageBitmapSupported = typeof createImageBitmap != 'undefined'\n}\nvar _OSGLoader;\nvar OSGLoader = function (manager) {\n    initDeps$OSGLoader();\n\n    if (!_OSGLoader) {\n\n        var GLEnum = Osg.GLEnum;\n\n        var wrappingMap = {\n            [GLEnum.MIRROR]: MirroredRepeatWrapping,\n            [GLEnum.CLAMP_TO_EDGE]: ClampToEdgeWrapping,\n            [GLEnum.REPEAT]: RepeatWrapping\n        };\n\n        var filterMap = {\n            [GLEnum.LINEAR]: LinearFilter,\n            [GLEnum.LINEAR_MIPMAP_LINEAR]: LinearMipMapLinearFilter,\n            [GLEnum.LINEAR_MIPMAP_NEAREST]: LinearMipMapNearestFilter,\n            [GLEnum.NEAREST]: NearestFilter,\n            [GLEnum.NEAREST_MIPMAP_LINEAR]: NearestMipMapLinearFilter,\n            [GLEnum.NEAREST_MIPMAP_NEAREST]: NearestMipMapNearestFilter\n        };\n\n        const _OSGLoaderPrototype_ = {\n\n            load: function (url, onLoad, onProgress, onError, options) {\n\n                this.options = Object.assign({\n                    loadTexture: true\n                }, options)\n\n                var scope = this;\n\n                var resourcePath;\n\n                if (this.resourcePath !== '') {\n\n                    resourcePath = this.resourcePath;\n\n                } else if (this.path !== '') {\n\n                    resourcePath = this.path;\n\n                } else {\n\n                    resourcePath = LoaderUtils.extractUrlBase(url);\n\n                }\n\n                // Tells the LoadingManager to track an extra item, which resolves after\n                // the model is fully loaded. This means the count of items loaded will\n                // be incorrect, but ensures manager.onLoad() does not fire early.\n                scope.manager.itemStart(url);\n\n                var _onError = function (e) {\n\n                    if (onError) {\n\n                        onError(e);\n\n                    } else {\n\n                        console.trace(e);\n                        console.error(e);\n\n                    }\n\n                    scope.manager.itemError(url);\n                    scope.manager.itemEnd(url);\n\n                };\n\n                var loader = new FileLoader(scope.manager);\n\n                loader.setPath(this.path);\n                loader.setResponseType('arraybuffer');\n\n                if (scope.crossOrigin === 'use-credentials') {\n\n                    loader.setWithCredentials(true);\n\n                }\n\n                loader.load(url, (data) => {\n\n                    try {\n\n                        var ext = url.substr(url.lastIndexOf('.') + 1);\n                        if (ext == 'osgjson') {\n                            if (typeof data != 'string') {\n                                data = LoaderUtils.decodeText(data);\n                            }\n                            data = JSON.parse(data);\n\n                            data = parseOsg(data, resourcePath, this.options.loadTexture, this.manager, this.options.imageCache, this.options.textureCache, false);\n                            if (data.then) {\n                                return data.then(onLoad)\n                            }\n\n                            return onLoad(data);\n                        }\n\n                        scope.parse(data, resourcePath, function (osgb) {\n\n                            onLoad(osgb);\n\n                        }, _onError, this.options);\n\n                        scope.manager.itemEnd(url);\n\n                    } catch (e) {\n\n                        _onError(e);\n\n                    }\n\n                }, onProgress, _onError);\n\n            },\n\n\n            parse: function (data, path, onLoad, onError, options) {\n\n                this.options = Object.assign({\n                    loadTexture: true\n                }, options)\n\n                // try {\n\n                var root;\n                if (data instanceof ArrayBuffer || (data.buffer && data.buffer instanceof ArrayBuffer)) {\n\n                    root = Osg.readBuffer(data);\n                    if (root == false) {\n\n                        var obj = parseOsg(data, path, this.options.loadTexture, this.manager, this.options.imageCache, this.options.textureCache, false);\n                        if (obj.then) {\n                            return obj.then(onLoad)\n                        }\n                        return onLoad(obj);\n                    }\n                } else {\n                    root = data;\n                }\n\n                // console.log('osg', root);\n\n                var texturesByUri = {};\n                this.parseObject(root, path, texturesByUri, options).then((obj) => {\n                    // obj.osgRoot = root; \n                    // var urls = Object.keys(texturesByUri)\n                    // if (urls.length > 1) {\n                    //     debugger\n                    // }\n                    // obj.texturesByUri = texturesByUri\n                    onLoad(obj)\n                }).catch((e) => {\n                    if (onError) onError\n                });\n\n                // } catch (e) {\n                //     console.error(e);\n                //     if (onError) onError(e)\n                // }\n\n            },\n\n            setRGBLoader(rgbLoader) {\n                this.rgbLoader = rgbLoader;\n                return this;\n            },\n\n            setTGALoader(tgaLoader) {\n                this.tgaLoader = tgaLoader;\n                return this;\n            },\n\n            setBMPLoader(bmpLoader) {\n                this.bmpLoader = bmpLoader;\n                return this;\n            },\n\n            /**\n             * \n             * @param {Osg.Node|Osg.Group|Osg.Geode|Osg.LOD|Osg.PagedLOD} node\n             * @param {string} path\n             * @param {object} texturesByUri\n             * @param {object} options\n             * @param {boolean} [options.loadTexture=true]\n             * @param {'basic'|'phong'|'standard'|'physical'}[materialType='basic']\n             * @returns {Promise<THREE.Group>} \n             */\n            parseObject(node, path, texturesByUri, options) {\n                if (!this.options && options) {\n                    options = options || {};\n                    this.options = Object.assign({\n                        loadTexture: true,\n                        materialType: 'basic'\n                    }, options)\n                }\n\n                const materialType = this.options.materialType;\n                switch (node.Type) {\n                    case 'Osg::Geode':\n                    case 'Osg::Group':\n                    case 'Osg::Node':\n                    case 'Osg::MatrixTransform':\n                        return this.parseNode(node, path, texturesByUri, materialType);\n                    case 'Osg::PagedLOD':\n                        return this.parsePagedLOD(node, path, texturesByUri, materialType);\n                    case 'Osg::Geometry':\n                        return this.pareseGeometry(node, path, texturesByUri, materialType);\n                    default:\n                        break;\n                }\n\n            },\n\n            /**\n             * \n             * @param {Osg.PagedLOD} pagedLOD \n             * @param {string} path\n             * @param {object} texturesByUri\n             * @param {'basic'|'phong'|'standard'|'physical'}[materialType]\n             * @returns {Promise<THREE.Group>}\n             */\n            parsePagedLOD(pagedLOD, path, texturesByUri, materialType) {\n                var group = new Group();\n                group.name = pagedLOD.Name;\n                // group.userData = {\n                //     CenterMode: Osg.EnumToString(Osg.CenterMode, pagedLOD.CenterMode),\n                //     RangeMode: Osg.EnumToString(Osg.RangeMode, pagedLOD.RangeMode),\n                //     RangeList: pagedLOD.RangeList,\n                //     RangeDataList: pagedLOD.RangeDataList,\n                //     PriorityOffset: pagedLOD.PriorityOffset,\n                //     PriorityScale: pagedLOD.PriorityScale,\n                //     ResourcePath: path,\n                //     UserCenter: pagedLOD.UserCenter\n                // };\n\n                var promises = pagedLOD.Children.map((Child) => {\n                    return this.parseObject(Child, path, texturesByUri);\n                })\n                group.up.set(0, 0, 1);\n                group.frustumCulled = false;\n                return Promise.all(promises).then((nodes) => {\n                    nodes.forEach((node) => {\n                        group.add(node);\n                    });\n                    return group;\n                })\n\n\n            },\n\n            /**\n             * \n             * @param {Osg.Node} node \n             * @param {string} path\n             * @param {object} texturesByUri\n             * @returns {Promise<THREE.Group>}\n             */\n            parseNode(node, path, texturesByUri) {\n                var group = new Group();\n                group.name = node.Name;\n                var promises = [];\n                if (node.Children) {\n                    node.Children.forEach((Child) => {\n                        var promise = this.parseObject(Child, path, texturesByUri);\n                        promises.push(promise)\n                    })\n                } \n                // else {\n                //     console.log(node);\n                // }\n\n                group.up.set(0, 0, 1);\n                group.frustumCulled = false;\n                return Promise.all(promises).then((nodes) => {\n                    nodes.forEach((node) => {\n                        group.add(node)\n                    })\n\n                    return group;\n                })\n\n            },\n\n            /**\n             * \n             * @param {Osg.Geometry} geometry \n             * @param {string} path \n             * @param {object}texturesByUri\n             * @param {'basic'|'phong'|'standard'|'physical'}[materialType]\n             * @returns {Promise<THREE.BufferGeometry>}\n             */\n            pareseGeometry(geometry, path, texturesByUri, materialType) {\n\n                var group = new Group();\n                group.name = geometry.Name;\n                group.up.set(0, 0, 1);\n                group.frustumCulled = false;\n\n                let vertexArray = geometry.VertexArray;\n                let normalArray = geometry.NormalArray;\n                let colorArray = geometry.ColorArray;\n                let uvs = geometry.TexCoordArray;\n                let color, opacity = 1;\n\n                let positionAttribute, normalAttribute, colorAttribute;\n\n                positionAttribute = new BufferAttribute(vertexArray.Value, vertexArray.ItemSize)\n\n                if (colorArray) {\n\n                    if (colorArray.Binding == Osg.AttributeBinding.BIND_PER_VERTEX) {\n                        colorAttribute = new BufferAttribute(colorArray.Value, colorArray.ItemSize)\n                    } else {\n                        color = new Color().fromArray(colorArray.Value)\n                        opacity = colorArray[3];\n                    }\n                }\n\n                if (normalArray) {\n                    normalAttribute = new BufferAttribute(normalArray.Value, normalArray.ItemSize, normalArray.Normalize);\n                }\n                let stateSet = geometry.StateSet;\n                var promises = geometry.PrimitiveSetList.map((primitiveSet, id) => {\n\n                    let uv = uvs[id];\n\n                    let materialPromise = this.parseMaterial(stateSet, path, texturesByUri, materialType)\n\n                    return materialPromise.then((material) => {\n\n                        var bufferGeometry = new BufferGeometry();\n\n                        bufferGeometry.setAttribute('position', positionAttribute);\n\n                        // bufferGeometry.computeBoundingSphere();\n\n                        if (uv) {\n\n                            bufferGeometry.setAttribute('uv', new BufferAttribute(uv.Value, uv.ItemSize));\n\n                        }\n\n                        if (colorAttribute) {\n\n                            bufferGeometry.setAttribute('color', colorAttribute);\n                            material.vertexColors = VertexColors;\n\n                        } else if (color) {\n\n                            material.color = color;\n                            // material.opacity = opacity; \n                        }\n\n                        if (primitiveSet.Indices) {\n                            let indices = primitiveSet.Indices.Value;\n\n                            if (primitiveSet.Mode == Osg.PrimitiveMode.GL_QUADS) {\n\n                                let newIndices = [];\n                                for (let i = 0; i < indices.length; i += 4) {\n                                    let i0 = indices[i], i1 = indices[i + 1], i2 = indices[i + 2], i3 = indices[i + 3];\n                                    newIndices.push(i0, i1, i3, i1, i2, i3);\n                                }\n                                indices = new indices.constructor(newIndices);\n\n                            } else {\n                                bufferGeometry.GeometryMode = primitiveSet.Mode;\n                            }\n\n                            bufferGeometry.setIndex(new BufferAttribute(indices, 1));\n\n                        } else {\n                            bufferGeometry.addGroup(primitiveSet.First, primitiveSet.Count);\n                            bufferGeometry.GeometryMode = primitiveSet.Mode;\n                        }\n\n                        if (normalAttribute) {\n\n                            bufferGeometry.setAttribute('normal', normalAttribute)\n                        } else if (this.options.materialType != 'basic') {\n\n                            bufferGeometry.computeVertexNormals();\n                        }\n\n                        /**\n                         * @type {THREE.Mesh}\n                         */\n                        var mesh = new Mesh(bufferGeometry, material);\n                        mesh.vertexColors = !!colorAttribute;\n                        mesh.receiveShadow = true;\n                        mesh.castShadow = true;\n\n                        mesh.up.set(0, 0, 1);\n                        mesh.frustumCulled = false;\n                        group.add(mesh);\n\n                    })\n                });\n\n                return Promise.all(promises).then(() => {\n                    return group;\n                })\n\n            },\n\n            /**\n            * \n            * @param {Osg.StateSet} stateSet \n            * @param {string} path \n            * @param {object}texturesByUri\n            * @param {'basic'|'phong'|'standard'|'physical'}[type='basic']\n            * @returns {Promise<THREE.Material>}\n            */\n            parseMaterial(stateSet, path, texturesByUri, type) {\n\n                return new Promise((resolve, reject) => {\n                    var material\n                    switch (type) {\n                        case 'phong':\n                            material = new MeshPhongMaterial();\n                            break;\n                        case 'standard':\n                            material = new MeshStandardMaterial();\n                            break;\n                        case 'physical':\n                            material = new MeshPhysicalMaterial();\n                            break;\n                        default:\n                            material = new MeshBasicMaterial();\n                            break;\n                    }\n                    material.side = DoubleSide\n\n                    if (!stateSet) {\n                        resolve(material)\n                        return;\n                    }\n                    let renderingHint = stateSet.RenderingHint\n                    if (renderingHint != undefined && renderingHint != null) {\n                        material.transparent = renderingHint == Osg.RenderingHint.TRANSPARENT_BIN;\n                    }\n\n                    let attributeList = stateSet.AttributeList;\n                    let modelList = stateSet.ModeList;\n                    let textureAttributeList = stateSet.TextureAttributeList;\n\n                    //\n\n                    if (attributeList) {\n\n                        attributeList.forEach((attribute) => {\n\n                            let key = attribute.key, value = attribute.value;\n                            var stateAttribute = value.StateAttribute;\n\n                            switch (key.type) {\n                                case 'Osg::Material':\n                                    this.setMaterialAttribute(material, stateAttribute);\n                                    break;\n                                case 'Osg::StateAttribute':\n\n                                    break;\n                                case 'Osg::ShadeModel':\n                                    material.flatShading = stateAttribute.Mode == Osg.ShadeModelMode.ConstantsFLAT\n                                    break;\n                                default:\n                                    break;\n                            }\n\n                        })\n                    }\n\n                    //\n\n                    if (modelList) {\n\n                        modelList.forEach((mode) => {\n                            let key = mode.key, value = mode.value;\n                            var keyName = Osg.EnumToString(Osg.GLEnum, key);\n                            switch (key) {\n                                case Osg.GLEnum.GL_DEPTH_TEST:\n                                    material.depthTest = value != Osg.StateAttributeValue.OFF\n                                    break;\n                                case Osg.GLEnum.GL_BLEND:\n                                    material.blending = value != Osg.StateAttributeValue.OFF\n                                    break;\n                                default:\n                                    break;\n                            }\n                        })\n\n                    }\n\n                    //\n                    var texturePromise;\n                    if (textureAttributeList && textureAttributeList.length > 0) {\n\n                        if (textureAttributeList.length > 1) {\n                            console.warn('only handle textureAttributeList[0]');\n                        }\n\n                        var texture = textureAttributeList[0].value.StateAttribute;\n\n                        texturePromise = this.parseTexture(texture, path, texturesByUri);\n\n                    }\n\n                    if (texturePromise) {\n\n                        texturePromise.then((texture) => {\n                            material.map = texture;\n                            resolve(material);\n\n                        }).catch(reject);\n\n                    }\n                    else {\n                        resolve(material);\n\n                    }\n                })\n            },\n\n            /**\n             * \n             * @param {THREE.MeshStandardMaterial} material \n             * @param {Osg.Material} attribute \n             */\n            setMaterialAttribute(material, attribute) {\n\n                let emission = attribute.EmissionFront || attribute.EmissionBack;\n                if (emission && material.emissive) {\n                    material.emissive = new Color().fromArray(emission);\n                    material.emissiveIntensity = emission[3];\n                    if (!attribute.EmissionFrontAndBack)\n                        console.warn('only support EmissionFrontAndBack=true');\n                }\n\n                let diffuse = attribute.DiffuseFront || attribute.DiffuseBack;\n                if (diffuse) {\n                    material.color = new Color().fromArray(diffuse);\n                    material.opacity = diffuse[3];\n                    if (!attribute.DiffuseFrontAndBack)\n                        console.warn('only support DiffuseFrontAndBack=true');\n                }\n\n                let specular = attribute.SpecularFront || attribute.SpecularBack;\n                if (specular) {\n                    material.specular = new Color().fromArray(specular);\n                    // material.specular = specular[3];\n                    if (!attribute.SpecularFrontAndBack)\n                        console.warn('only support SpecularFrontAndBack=true');\n                }\n\n                let shininess = attribute.ShininessFront || attribute.ShininessBack;\n                if (shininess != undefined && shininess != null) {\n                    material.shininess = shininess;\n                    // material.specular = specular[3];\n                    if (!attribute.SpecularFrontAndBack)\n                        console.warn('only support SpecularFrontAndBack=true');\n                }\n\n            },\n            resolveURL(url, path) {\n\n                // Invalid URL\n                if (typeof url !== 'string' || url === '') return '';\n\n                // Host Relative URL\n                if (/^https?:\\/\\//i.test(path) && /^\\//.test(url)) {\n\n                    path = path.replace(/(^https?:\\/\\/[^\\/]+).*/i, '$1');\n\n                }\n\n                // Absolute URL http://,https://,//\n                if (/^(https?:)?\\/\\//i.test(url)) return url;\n\n                // Data URI\n                if (/^data:.*,.*$/i.test(url)) return url;\n\n                // Blob URL\n                if (/^blob:.*$/i.test(url)) return url;\n\n                // Relative URL\n                return (path + '/' + url).replace('//', '/');\n\n            },\n            getExtension(fname) {\n                var start = fname.lastIndexOf(\".\");\n                if (start >= 0) {\n                    return fname.substring(start, fname.length);\n                }\n                return \"\";\n            },\n            /**\n             * \n             * @param {Osg.Texture2D} texture \n             * @param {string} path \n             * @param {object} texturesByUri\n             * @returns {Promise<THREE.Texture>}\n             */\n            parseTexture(texture, path, texturesByUri) {\n                return new Promise((resolve, reject) => {\n\n                    var image = texture.Image\n                    if (!image) return;\n\n                    var fileName = image.Name;\n                    if (texturesByUri[fileName]) {\n                        resolve(texturesByUri[fileName]);\n                        return;\n                    }\n                    const isJPEG = fileName.search(/\\.jpe?g($|\\?)/i) > 0 || fileName.search(/^data\\:image\\/jpeg/) === 0;\n\n                    var ext = this.getExtension(fileName).toLowerCase();\n                    if (ext[0] == '.') ext = ext.slice(1);\n\n                    var imageUri, texture3js, isObjectURL;\n                    function onLoad() {\n                        texture3js.anisotropy = texture.MaxAnisotropy\n                        texture3js.format = isJPEG ? RGBFormat : RGBAFormat;\n                        texture3js.wrapS = wrappingMap[texture.WrapS.value];\n                        texture3js.wrapT = wrappingMap[texture.WrapT.value];\n                        texture3js.magFilter = filterMap[texture.MagFilter.value];\n                        texture3js.minFilter = filterMap[texture.MinFilter.value];\n\n                        if (isObjectURL) URL.revokeObjectURL(imageUri);\n\n                        resolve(texture3js);\n                    }\n\n                    function onError(e) {\n                        reject(e)\n                    }\n\n                    if (image.ImageType == Osg.ImageType.IMAGE_EXTERNAL) {\n\n                        imageUri = this.resolveURL(fileName, path);\n\n                        if (isNodeEnv) {//nodejs  env\n                            imageUri = {\n                                src: fileName,\n                                fileName: imageUri\n                            }\n                        }\n                    }\n                    else if (image.ImageType == Osg.ImageType.IMAGE_INLINE_FILE) {\n\n                        if (ext == 'bmp' || ext == 'tga') {\n\n                            imageUri = texture.Image.Data;\n                        }\n                        else {\n                            var mimeType = 'image/' + ext\n                            if (isNodeEnv || !this.options.loadTexture) {//nodejs  env\n                                imageUri = {\n                                    src: fileName,//this.resolveURL(fileName, path),\n                                    fileName: this.resolveURL(fileName, path),\n                                    fileBuffer: image.Data\n                                }\n                            }\n                            else {\n                                var blob = new Blob([texture.Image.Data], { type: mimeType });\n                                imageUri = blob;\n                            }\n                        }\n\n                    } else {\n\n                        texture3js = new DataTexture(image.Data, texture.TextureWidth, texture.TextureHeight)\n\n                        console.warn('image file ' + image.Name + '：unsupport imageType ' + Osg.EnumToString(Osg.ImageType, image.ImageType));\n\n                    }\n\n                    if (isNodeEnv || !this.options.loadTexture) {//nodejs\n\n                        if (!texture3js) texture3js = new Texture(imageUri);\n                        texturesByUri[fileName] = texture3js;\n                        onLoad()\n                    }\n                    else {//browser\n\n                        if (ext == 'dds') {\n\n                            texture3js = this.ddsLoader.load(imageUri, onLoad, null, onError);\n                        }\n                        else if (ext == 'rgb') {\n\n                            texture3js = this.rgbLoader.load(imageUri, onLoad, null, onError);\n\n                        }\n                        else if (ext == 'tga') {\n\n                            texture3js = this.tgaLoader.load(imageUri, onLoad, null, onError);\n\n                        }\n                        else if (ext == 'bmp') {\n\n                            texture3js = this.bmpLoader.load(imageUri, onLoad, null, onError);\n\n                        }\n\n                        if (!texture3js) {\n\n                            if (imageUri instanceof Blob) {\n\n                                if (isCreateImageBitmapSupported) {\n\n                                    createImageBitmap(imageUri, {\n                                        imageOrientation: \"flipY\",\n                                        premultiplyAlpha: \"none\",\n                                    }).then(img => {\n                                        texture3js.image = img;\n                                        onLoad();\n                                    }).catch(onError);\n\n                                } else {\n\n                                    imageUri = URL.createObjectURL(imageUri)\n                                    let img = new Image();\n                                    img.onload = function () {\n                                        img.a_src = fileName;\n                                        texture3js.image = img;\n                                        try {\n                                            image.Data = null;\n                                            URL.revokeObjectURL(imageUri);\n                                            onLoad();\n                                        } catch (err) {\n                                            onError(err);\n                                        }\n                                        image = null;\n                                    }\n                                    img.onerror = onError\n                                    img.src = imageUri;\n\n                                }\n\n                                texture3js = new Texture();\n\n                            }\n                            else {\n                                texture3js = new TextureLoader(this.manager).load(imageUri, onLoad, null, onError)\n\n                            }\n                        }\n\n                        texturesByUri[fileName] = texture3js;\n                    }\n\n                })\n            }\n\n        }\n\n        _OSGLoader = esExtends(Loader, {\n            esConstructor(c) {\n                class _esCtor extends Loader {\n                    constructor(manager) {\n                        super(manager)\n                    }\n                }\n                return _esCtor;\n            },\n            constructor: function () { },\n            prototype: _OSGLoaderPrototype_\n        })\n\n    }\n    return new _OSGLoader(manager);\n\n};\n\nexport default OSGLoader;\n",
    "import { toByteArray } from  \"../../../../base64-js/index.js\";\n\nimport MeshVisModelUtil from  \"./MeshVisModelUtil.js\";\n\nimport { DRACOExporter } from  \"../ThirdParty/exporters/DRACOExporter.js\";\n\nimport mergeBuffers from  \"../../../utils/Source/mergeBuffers.js\";\n\nimport stringToArrayBuffer from  \"../../../utils/Source/stringToArrayBuffer.js\";\n\nimport { encodeObject } from  \"../../../utils/Source/ObjectUtil.js\";\n\nimport GenericWorker from  \"../../../utils/Source/GenericWorker.js\";\n\nimport GeometryUtils from  \"../../../core/Source/GeometryUtils.js\";\n\n\nfunction writeBuffer(array, buffers) {\n    if (buffers.length == 0) {\n        buffers.byteLength = 0;\n    }\n\n    let count = array.length;\n    let byteOffset = buffers.byteLength;\n    let buffer = array;\n    if (!(buffer instanceof Uint8Array)) buffer = new Uint8Array(array.buffer);\n    buffer = MeshVisModelUtil.getPaddedBuffer(buffer)\n    let byteLength = buffer.byteLength;\n\n    buffers.push(buffer);\n    buffers.byteLength += byteLength;\n\n    return {\n        byteOffset, count\n    }\n}\n\n\nlet _canvas;\nfunction getDataURLCallback(assetSrcs, imageFileNames) {\n\n    return function getDataURL(image) {\n\n        if (typeof image == 'string') return image;\n\n        if (/^data:/i.test(image.src)) {\n\n            return image.src;\n\n        }\n\n        if (typeof HTMLCanvasElement == 'undefined') {\n\n            return image.src;\n\n        }\n\n        let canvas;\n\n        if (image instanceof HTMLCanvasElement) {\n\n            canvas = image;\n\n        } else if (image instanceof HTMLImageElement && image.embedImages == false) {\n            var src = image.src;\n            if (!src.startsWith('blob:') || assetSrcs[src])\n                return src;\n        }\n\n        if (!canvas) {\n\n            if (_canvas === undefined) _canvas = document.createElementNS('http://www.w3.org/1999/xhtml', 'canvas');\n\n            _canvas.width = image.width;\n            _canvas.height = image.height;\n\n            const context = _canvas.getContext('2d');\n\n            if (image instanceof ImageData) {\n\n                context.putImageData(image, 0, 0);\n\n            } else {\n\n                context.drawImage(image, 0, 0, image.width, image.height);\n\n            }\n\n            canvas = _canvas;\n\n        }\n\n        imageFileNames[image.uuid] = image.fileName;\n\n        var embedFormat = image.embedFormat;\n        if (embedFormat) {\n            return canvas.toDataURL('image/' + embedFormat);\n        }\n\n        if (canvas.width > 2048 || canvas.height > 2048) {\n\n            return canvas.toDataURL('image/jpeg', 0.6);\n\n        } else {\n\n            return canvas.toDataURL('image/png');\n\n        }\n\n    }\n}\n\nfunction setEmbedImages(material, embedImages) {\n\n    if (Array.isArray(material)) {\n        material.forEach(material => {\n            setEmbedImages(material, embedImages);\n        })\n    }\n    else {\n        for (const key in material) {\n            if (material.hasOwnProperty(key)) {\n                const tex = material[key];\n                if (tex && tex.isTexture\n                    && tex.image && typeof tex.image != 'string') {\n                    tex.image.embedImages = embedImages;\n                    tex.image.embedFormat = tex.format == THREE.RGBAFormat ? 'png' : 'jpeg';\n                    tex.image.fileName = tex.imageFileName;\n                }\n            }\n        }\n\n    }\n}\nconst _TypedArrayCtors = {\n    Float64Array,\n    Float32Array,\n\n    Int8Array,\n    Uint8Array,\n    Uint8ClampedArray,\n\n    Int16Array,\n    Uint16Array,\n\n    Int32Array,\n    Uint32Array\n};\n\n/**\n * MeshVisModel exporter\n */\nexport default class VISMExporter {\n    /**\n     * \n     * @param {object} [options] \n     * @param {object} [options.assetSrcs]\n     * @param {object} [options.imageCache]\n     * @param {boolean} [options.embedImages]\n     * @param {boolean} [options.binary]\n     * @param {boolean} [options.forceIndices]\n     * @param {boolean} [options.removeUv2]\n     * @param {boolean} [options.removeUv3]\n     * @param {boolean} [options.removeNormal]\n     * @param {boolean} [options.dracoEncode]  \n     * @param {number} [options.dracoMinVertexCount=300]  \n     * @param {(base64:string,index:number)=>string} [options.exportDataURL]\n     * \n     */\n    constructor(options) {\n        this.options = options || {};\n    }\n\n    preProcess(scene) {\n        const options = this.options;\n        const binary = options.binary,\n            embedImages = options.embedImages,\n            forceIndices = options.forceIndices,\n            removeUv2 = options.removeUv2,\n            removeUv3 = options.removeUv3,\n            removeNormal = options.removeNormal,\n            dracoEncode = options.dracoEncode,\n            dracoMinVertexCount = options.dracoMinVertexCount || 300;\n        /**\n         * @type {DRACOExporter} \n         * @private\n         */\n        let dracoExporter;\n        if (binary && dracoEncode && typeof DracoEncoderModule != 'undefined') {\n            dracoExporter = new DRACOExporter();\n            scene = scene.clone(true);\n        }\n\n        scene.traverse(obj => {\n            if (!obj.material) return;\n\n            setEmbedImages(obj.material, embedImages);\n            if (!removeNormal && !dracoEncode && !forceIndices && !removeUv3) return;\n\n            var geometry = obj.geometry = obj.geometry.clone();\n\n            if (removeNormal) {\n                delete geometry.attributes.normal\n            } else {\n                if (geometry.attributes.normal && geometry.userData && geometry.userData.NormalBinding) {\n                    delete geometry.attributes.normal;\n                }\n            }\n\n            let newGeometry = forceIndices && GeometryUtils.forceIndices(geometry, removeUv2, removeUv3)\n\n            if (!newGeometry) {\n                if (removeUv3) delete geometry.attributes.uv3\n\n                if (removeUv2) {\n                    delete geometry.attributes.uv2;\n\n                    if (obj.material.lightMap) {\n                        let material = obj.material.clone(true);\n                        material.lightMap = null;\n                        obj.material = material;\n                    }\n                }\n            } else {\n                obj.geometry = newGeometry;\n            }\n\n            geometry = obj.geometry;\n            geometry.userData = Object.assign({}, geometry.userData || {});\n            delete geometry.userData.draco\n\n            let shouldDraco = !!dracoExporter;\n            if (shouldDraco && geometry.attributes.position.count < dracoMinVertexCount) {\n                shouldDraco = false;\n            }\n\n            if (shouldDraco) {\n                if (geometry.attributes.position.count == 0) {\n                    debugger\n                }\n                if (geometry.index && geometry.index.count == 0) {\n                    debugger\n                }\n\n                geometry.userData.draco = dracoExporter.parse(geometry)\n                if (!geometry.userData.draco) {\n                    debugger\n                }\n            }\n\n        })\n\n        return scene;\n    }\n\n    parseGeometries(scene, meta, onProgress) {\n        const library = meta.geometries;\n\n        var gemetryMap = {}, batch, batches = [], batchSize = 10;\n        scene.traverse(obj => {\n            if (!obj.geometry) return;\n            var geometry = obj.geometry, uuid = geometry.uuid;\n            if (gemetryMap[uuid]) return;\n            if (batches.length == 0 || batch.length >= batchSize) {\n                batch = []; batches.push(batch);\n            }\n            batch.push(geometry);\n            gemetryMap[uuid] = true;\n        });\n        gemetryMap = null;\n\n        //\n\n        function workFunc(geometry) {\n            const uuid = geometry.uuid;\n            if (library[uuid]) return;\n            library[uuid] = geometry.toJSON(meta);\n        }\n\n        var worker = new GenericWorker(batches, batch => {\n            batch.forEach(workFunc);\n        });\n        return worker.run(onProgress);\n\n    }\n\n    parseMaterials(scene, meta, onProgress) {\n        const library = meta.materials;\n\n        var materialMap = {}, batch, batches = [], batchSize = 10;\n        scene.traverse(obj => {\n            if (!obj.material) return;\n            var objMaterial = obj.material;\n            objMaterial = Array.isArray(objMaterial) ? objMaterial : [objMaterial];\n            objMaterial.forEach(material => {\n                const uuid = material.uuid;\n                if (materialMap[uuid]) return;\n                if (batches.length == 0 || batch.length >= batchSize) {\n                    batch = []; batches.push(batch);\n                }\n                batch.push(material);\n                materialMap[uuid] = true;\n            });\n        });\n        materialMap = null;\n\n        //\n\n        function workFunc(material) {\n            const uuid = material.uuid;\n            if (library[uuid]) return;\n            library[uuid] = material.toJSON(meta);\n        }\n\n        var worker = new GenericWorker(batches, batch => {\n            batch.forEach(workFunc);\n        })\n        return worker.run(onProgress);\n    }\n\n    parseAnimations(animations) {\n        console.time('animations.toJSON')\n\n        const animationsJson = [];\n        if (animations) {\n            animations.forEach(animation => {\n                animationsJson.push(THREE.AnimationClip.toJSON(animation))\n            })\n        }\n        console.timeEnd('animations.toJSON')\n        return animationsJson\n    }\n\n    /**\n     * \n     * @param {THREE.Group|THREE.Scene} scene \n     * @param {THREE.AnimationClip[]}[animations]\n     * @param {(currentProgress:number,totalProgress:number,message:string,e:{total:number,loaded:number})=>void}[onProgress]\n     * @returns {Promise<ArrayBuffer>}  buffer\n     */\n    parse(scene, animations, onProgress) {\n\n        let assetSrcs = this.options.assetSrcs || {},\n            imageFileNames = {};\n\n        THREE.ImageUtils.getDataURL = getDataURLCallback(assetSrcs, imageFileNames);\n\n        // extract data from the cache hash\n        // remove metadata on each item\n        // and return as array\n        function extractFromCache(cache) {\n            const values = [];\n            for (const key in cache) {\n                const data = cache[key];\n                delete data.metadata;\n                values.push(data);\n            }\n            return values;\n        }\n\n        scene = this.preProcess(scene);\n        //\n        var progress = 1, e = { total: 100, loaded: 1 };\n        if (onProgress) {\n            onProgress(0, progress, '预处理完成', e)\n        }\n        //\n\n        let userData = scene.userData, cacheUserData;\n        if (userData) {\n            cacheUserData = Object.assign({}, userData);\n            delete userData.uri\n            delete userData.assetSrcs;\n        }\n\n        //\n        const sceneJson = {\n            metadata: {\n                version: 4.5,\n                type: 'Object',\n                generator: 'Object3D.toJSON,VISMExporter'\n            }\n        };\n        const meta = {\n            geometries: {},\n            materials: {},\n            textures: {},\n            images: {},\n            shapes: {},\n            skeletons: {}\n        };\n\n        return this.parseGeometries(scene, meta, (currProgress) => {\n            e.loaded = 1 + 0.5 * currProgress;\n            if (onProgress) {\n                progress = 100 * e.loaded / e.total;\n                onProgress(currProgress, progress, '导出几何体', e);\n            }\n        }).then(() => {\n            e.loaded = 51;\n            if (onProgress) {\n                progress = e.loaded / e.total;\n                onProgress(100, progress, '导出几何体', e);\n            }\n\n            return this.parseMaterials(scene, meta, (currProgress) => {\n                e.loaded = 51 + 0.48 * currProgress;\n                if (onProgress) {\n                    progress = 100 * e.loaded / e.total;\n                    onProgress(currProgress, progress, '导出材质', e);\n                }\n            });\n        }).then(() => {\n\n            e.loaded = 99;\n            if (onProgress) {\n                progress = e.loaded / e.total;\n                onProgress(100, progress, '导出材质', e);\n            }\n\n            console.time('scene.toJSON')\n            sceneJson.object = scene.toJSON(meta).object;\n            //\n            const geometries = extractFromCache(meta.geometries);\n            const materials = extractFromCache(meta.materials);\n            const textures = extractFromCache(meta.textures);\n            const images = extractFromCache(meta.images);\n            const shapes = extractFromCache(meta.shapes);\n            const skeletons = extractFromCache(meta.skeletons);\n\n            if (geometries.length > 0) sceneJson.geometries = geometries;\n            if (materials.length > 0) sceneJson.materials = materials;\n            if (textures.length > 0) sceneJson.textures = textures;\n            if (images.length > 0) sceneJson.images = images;\n            if (shapes.length > 0) sceneJson.shapes = shapes;\n            if (skeletons.length > 0) sceneJson.skeletons = skeletons;\n            //\n\n            scene.userData = cacheUserData;\n\n            console.timeEnd('scene.toJSON');\n\n            const animationsJson = this.parseAnimations(animations);\n\n            const contentJson = {\n                scene: sceneJson,\n                animations: animationsJson\n            };\n\n            const buffer = this.generateBuffer(contentJson, imageFileNames);\n\n            if (onProgress) {\n                setTimeout(() => {\n                    e.loaded = 100;\n                    progress = 100;\n                    onProgress(100, progress, '导出完成', e);\n                }, 10);\n            }\n\n            return buffer;\n        })\n\n    }\n\n    postProcessImages(images, buffer, imageFileNames) {\n        const options = this.options, binary = options.binary,\n            embedImages = options.embedImages,\n            assetSrcs = options.assetSrcs || {},\n            imageCache = options.imageCache || {},\n            exportDataURL = options.exportDataURL;\n        for (let i = 0; i < images.length; i++) {\n            const img = images[i];\n            if (!embedImages) {\n                if (imageCache[img.uuid]) {\n                    img.url = imageCache[img.uuid];\n                    continue;\n                }\n                if (assetSrcs[img.url]) {//img\n                    img.url = assetSrcs[img.url];\n                } else if (typeof exportDataURL == 'function') {//canvas\n                    img.url = exportDataURL(img.url, i, imageFileNames[img.uuid]);\n                }\n                imageCache[img.uuid] = img.url;\n\n            } else if (binary) {//write image\n                let mimeType = 'image/jpeg';\n                if (/image\\/png/.test(img.url)) mimeType = 'image/png';\n                let imgBase64 = img.url.replace(\n                    /data:image\\/(png|jpeg);base64,/i, ''\n                );\n                let imgBuffer = toByteArray(imgBase64)\n                img.buffer = writeBuffer(imgBuffer, buffer)\n                img.mimeType = mimeType;\n                delete img.url;\n            }\n        }\n    }\n\n    postProcessGeometries(geometries, buffer) {\n        for (let i = 0; i < geometries.length; i++) {\n            const g = geometries[i], data = g.data, userData = g.userData;\n            if (userData && userData.draco) {\n                let dracoBuffer = userData.draco\n                userData.draco = writeBuffer(dracoBuffer, buffer);\n                delete g.data;\n            }\n            else {\n                let atts = data.attributes;\n                for (const key in atts) {\n                    if (atts.hasOwnProperty(key) && atts[key]) {\n                        const att = atts[key];\n                        let TypedArrayCtor = _TypedArrayCtors[att.type]\n                        att.array = new TypedArrayCtor(att.array);\n                        att.array = writeBuffer(att.array, buffer);\n                    }\n                }\n\n                if (data.index) {\n                    let att = data.index;\n                    let TypedArrayCtor = _TypedArrayCtors[att.type]\n                    att.array = new TypedArrayCtor(att.array);\n                    att.array = writeBuffer(att.array, buffer);\n                }\n            }\n        }\n    }\n\n    postProcessAnimations(animations, buffer) {\n        animations.forEach(animation => {\n            animation.tracks.forEach(track => {\n                var times = new Float32Array(track.times);\n                var values = new Float32Array(track.values);\n                track.times = writeBuffer(times, buffer);\n                track.values = writeBuffer(values, buffer);\n            })\n        });\n    }\n\n    /**\n     * \n     * @param {Object} contentJson \n     * @returns {ArrayBuffer}\n     */\n    generateBuffer(contentJson, imageFileNames) {\n        const binary = this.options.binary,\n            scene = contentJson.scene,\n            images = scene.images,\n            geometries = scene.geometries,\n            animations = contentJson.animations;\n\n        Object3D.traverse(scene.object, obj => {\n            var userData = obj.userData;\n            if (userData) {\n                userData = Object.assign({}, userData)\n                obj.userData = userData;\n                delete userData.transformData;\n            }\n            if (!userData || JSON.stringify(userData) == '{}') {\n                delete obj.userData;\n            }\n        });\n\n        let magic = 'vism', headerOffset = 8, buffer = [];\n        console.time('binary')\n        if (binary) {\n            this.postProcessGeometries(geometries, buffer);\n            this.postProcessAnimations(animations, buffer);\n        }\n        console.timeEnd('binary')\n        console.time('binary images')\n        if (images) {\n            this.postProcessImages(images, buffer, imageFileNames);\n        }\n        console.timeEnd('binary images');\n\n        console.time('encodeObject');\n        contentJson = encodeObject(contentJson);\n        console.timeEnd('encodeObject');\n        console.time('JSON.stringify');\n        contentJson = JSON.stringify(contentJson);\n        console.timeEnd('JSON.stringify');\n\n        if (binary) {\n            console.time('write')\n            let jsonBodyBuffer = stringToArrayBuffer(contentJson);\n            jsonBodyBuffer = new Uint8Array(jsonBodyBuffer);\n\n            let headerLength = headerOffset + jsonBodyBuffer.length;\n            let headerBuffer = new Uint8Array(headerLength);\n\n            for (let i = 0; i < 4; i++) {\n                headerBuffer[i] = magic.charCodeAt(i);\n            }\n\n            for (let i = headerOffset, j = 0; i < headerLength; i++, j++) {\n                headerBuffer[i] = jsonBodyBuffer[j];\n            }\n            jsonBodyBuffer = null;\n\n            headerBuffer = MeshVisModelUtil.getPaddedBuffer(headerBuffer, \" \".charCodeAt(0))\n            headerLength = headerBuffer.length;\n\n            let headerDV = new DataView(headerBuffer.buffer);\n            headerDV.setUint32(4, headerLength);\n\n            buffer.unshift(headerBuffer);\n            buffer = mergeBuffers(buffer);\n            console.timeEnd('write')\n            return buffer;\n        } else {\n            magic = 'json    ';//\n            return buffer = stringToArrayBuffer(magic + contentJson);\n        }\n    }\n}",
    "\nimport { fromByteArray } from  \"../../../../base64-js/index.js\";\n\nimport { DRACOLoader } from  \"../ThirdParty/loaders/DRACOLoader.js\";\n\nimport GenericWorker from  \"../../../utils/Source/GenericWorker.js\";\n\nimport MathUtils from  \"../../../utils/Source/MathUtils.js\";\n\nimport { decodeObject } from  \"../../../utils/Source/ObjectUtil.js\";\n\n\nvar _sizeOfUint32 = 4;\nvar _VISMLoader_proto_;\nvar _cacheVISMLoaderDracoLoaders = {};\nfunction getVISMLoaderDracoLoader(dracoDecoderPath) {\n    var dracoLoader = _cacheVISMLoaderDracoLoaders[dracoDecoderPath];\n    if (!dracoLoader) {\n        dracoLoader = new DRACOLoader();\n        _cacheVISMLoaderDracoLoaders[dracoDecoderPath] = dracoLoader;\n        dracoLoader.setDecoderPath(dracoDecoderPath);\n        dracoLoader.preload();\n    }\n    return dracoLoader;\n}\n\n/**\n * MeshVisModel Loader\n * @constructor\n */\nfunction VISMLoader(manager) {\n    var _THREE = THREE, ObjectLoader = _THREE.ObjectLoader;\n\n    if (!_VISMLoader_proto_) {\n        var _TypedArrayCtors = {\n            Float64Array,\n            Float32Array,\n\n            Int8Array,\n            Uint8Array,\n            Uint8ClampedArray,\n\n            Int16Array,\n            Uint16Array,\n\n            Int32Array,\n            Uint32Array\n        };\n        _VISMLoader_proto_ = {\n\n            load(url, onLoad, onProgress, onError, options) {\n\n                this.options = Object.assign({\n                    loadTexture: true\n                }, options)\n\n                var scope = this;\n\n                var resourcePath = _THREE.LoaderUtils.extractUrlBase(url);\n\n                this.resourcePath = resourcePath;\n\n                url = scope.manager.resolveURL(url);\n                // Tells the LoadingManager to track an extra item, which resolves after\n                // the model is fully loaded. This means the count of items loaded will\n                // be incorrect, but ensures manager.onLoad() does not fire early.\n                scope.manager.itemStart(url);\n\n                var _onError = function (e) {\n\n                    if (onError) {\n\n                        onError(e);\n\n                    } else {\n\n                        console.trace(e);\n                        console.error(e);\n\n                    }\n\n                    scope.manager.itemError(url);\n                    scope.manager.itemEnd(url);\n\n                };\n\n                var loader = new _THREE.FileLoader(scope.manager);\n\n                loader.setPath(this.path);\n                loader.setResponseType('arraybuffer');\n\n                if (scope.crossOrigin === 'use-credentials') {\n\n                    loader.setWithCredentials(true);\n\n                }\n\n                loader.load(url, (data) => {\n\n                    try {\n\n                        scope.parse(data, function (scene) {\n\n                            scene._memorySize = data.byteLength;\n\n                            onLoad(scene);\n                        }, _onError, options);\n\n                        scope.manager.itemEnd(url);\n                    } catch (e) {\n\n                        _onError(e);\n\n                    }\n\n                }, onProgress, _onError);\n\n            },\n\n            setDracoDecoderPath(dracoDecoderPath) {\n                if (!this.dracoLoader) {\n                    this.dracoLoader = getVISMLoaderDracoLoader(dracoDecoderPath);\n                }\n                else if (this.dracoDecoderPath != dracoDecoderPath) {\n                    this.dracoDecoderPath = dracoDecoderPath;\n                    this.dracoLoader.setDecoderPath(dracoDecoderPath)\n                    this.dracoLoader.preload()\n                }\n            },\n            setDRACOLoader(dracoLoader) {\n                this.dracoLoader = dracoLoader;\n                if (this.dracoDecoderPath) {\n                    this.dracoLoader.preload();\n                    this.dracoLoader.setDecoderPath(this.dracoDecoderPath)\n                }\n            },\n            parse(data, onLoad, onError, options) {\n\n                options = options || {};\n                options.imageCache = options.imageCache || {};\n                options.textureCache = options.textureCache || {};\n\n                this._preloadTexture = typeof options.loadTexture == 'boolean' ? options.loadTexture : true;\n                if (data instanceof ArrayBuffer) {\n                    data = new Uint8Array(data)\n                }\n                let magic = this.getMagic(data);\n                if (magic != 'vism' && magic != 'json') {\n\n                    onError(new Error('Invalid magic  :' + magic))\n\n                } else {\n\n                    let headerLength = data.buffer.byteLength;\n                    let headerOffset = 8;\n                    let jsonBody, binBuffer;\n                    try {\n                        if (magic == 'vism') {\n                            headerLength = this.getHeaderLength(data);\n                            jsonBody = data.buffer.slice(headerOffset, headerLength);\n\n                            binBuffer = data.buffer.slice(headerLength);\n                            jsonBody = _THREE.LoaderUtils.decodeText(jsonBody);\n                            data = JSON.parse(jsonBody);\n                        } else {//json\n                            jsonBody = data.buffer.slice(headerOffset, headerLength);\n                            jsonBody = _THREE.LoaderUtils.decodeText(jsonBody)\n\n                            data = JSON.parse(jsonBody);\n\n                        }\n                        // console.log(jsonBody);\n                        decodeObject(data);\n\n                        if (data.animations) this._parseAnimations(data.animations, binBuffer);\n                        return this._parse(data.scene || data, binBuffer, (model) => {\n\n                            model.traverse(obj => {\n                                if (!obj.geometry) return\n                                let geometry = obj.geometry\n                                let userData = geometry.userData;\n                                if (userData && userData.draco) {\n                                    debugger\n                                }\n                            })\n\n                            if (data.scene) {\n                                data.scene = model;\n                                model = data;\n                            }\n\n                            if (onLoad) onLoad(model);\n                            return model;\n                        }, (err) => {\n                            onError(err)\n                        })\n\n                    } catch (err) {\n                        // console.log(jsonBody);\n\n                        onError(err);\n                    }\n\n                }\n\n            },\n\n            _parseAnimations(json, buffer) {\n                for (let i = 0; i < json.length; i++) {\n                    const animation = json[i], tracks = animation.tracks;\n                    for (let j = 0; j < tracks.length; j++) {\n                        const track = tracks[j], times = track.times, values = track.values;\n                        var count = times.count, byteOffset = times.byteOffset\n                        if (count) {\n                            track.times = new Float32Array(buffer, byteOffset, count);\n                        }\n                        count = values.count, byteOffset = values.byteOffset\n                        if (count) {\n                            track.values = new Float32Array(buffer, byteOffset, count);\n                        }\n                    }\n                }\n            },\n\n            _parse(json, buffer, onLoad, onError) {\n\n                const scope = this;\n                const shapes = scope.parseShapes(json.shapes);\n                const geometries = scope.parseGeometries(json.geometries, shapes, buffer);\n\n                function onGeometriesLoad(geometries) {\n\n                    return scope.parseImages(json.images, buffer).then(images => {\n\n                        const textures = scope.parseTextures(json.textures, images);\n                        const materials = scope.parseMaterials(json.materials, textures);\n                        const object = scope.parseObject(json.object, geometries, materials);\n\n                        if (json.animations) {\n                            object.animations = scope.parseAnimations(json.animations);\n                        }\n                        if (onLoad !== undefined) onLoad(object);\n\n                        return object;\n                    })\n\n                }\n\n                if (geometries.then) {\n                    return geometries.then(onGeometriesLoad).catch(onError);\n                }\n                else {\n                    return onGeometriesLoad(geometries).catch(onError);\n                }\n            },\n\n            getHeaderLength(uint8Array) {\n\n                let dv = new DataView(uint8Array.buffer)\n                let v = dv.getUint32(_sizeOfUint32)\n                return v;\n            },\n\n            getMagic(uint8Array) {\n                var magic = []\n                for (let i = 0; i < _sizeOfUint32; i++) {\n                    magic.push(uint8Array[i])\n                }\n                magic = String.fromCharCode.apply(null, magic);\n                return magic;\n            },\n\n            parseImages(json, buffer) {\n\n                const scope = this;\n                const images = {};\n\n                let loader, imageCache = scope.options.imageCache || {},\n                    preloadTexture = scope._preloadTexture;\n\n                if (json !== undefined && json.length > 0) {\n\n                    const manager = scope.manager || new _THREE.LoadingManager();\n\n                    loader = new _THREE.ImageLoader(manager);\n                    loader.setCrossOrigin(scope.crossOrigin);\n\n                    var batchSize = 200, batch = [], batches = [], imageMap = {};\n                    json.forEach(image => {\n                        if (imageCache[image.uuid]) {\n                            images[image.uuid] = imageCache[image.uuid];\n                            return;\n                        }\n                        if (imageMap[image.uuid]) return;\n                        imageMap[image.uuid] = true;\n                        if (batches.length == 0 || batch.length >= batchSize) {\n                            batch = []; batches.push(batch);\n                        }\n                        batch.push(image);\n                    });\n                    imageMap = null;\n\n                    function workFunc(image) {\n                        if (imageCache[image.uuid]) {\n                            images[image.uuid] = imageCache[image.uuid];\n                            return;\n                        }\n\n                        let url = image.url;\n\n                        if (Array.isArray(url)) {\n                            // load array of images e.g CubeTexture\n\n                            images[image.uuid] = [];\n\n                            let subWorker = new GenericWorker(url, (currentUrl) => {\n                                const path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(currentUrl) ? currentUrl : scope.resourcePath + currentUrl;\n\n                                if (preloadTexture) {\n                                    return new Promise((resolve, reject) => {\n                                        let img = loader.load(path, resolve, undefined, reject);\n                                        images[image.uuid].push(img);\n                                    })\n\n                                } else {\n                                    images[image.uuid].push(path);\n                                }\n                            });\n                            return subWorker.run();\n\n                        } else {\n\n                            if (image.buffer) {\n                                let { byteOffset, count } = image.buffer;\n                                let imgBuffer = new Uint8Array(buffer, byteOffset, count);\n                                url = 'data:' + image.mimeType + ';base64,' + fromByteArray(imgBuffer);\n                            }\n                            else {\n                                url = image.url;\n                            }\n\n                            // load single image\n\n                            const path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test(url) ? url : scope.resourcePath + url;\n\n                            if (preloadTexture) {\n\n                                return new Promise((resolve, reject) => {\n                                    let img = loader.load(path, resolve, undefined, reject);\n                                    images[image.uuid] = img;\n                                    img.uuid = image.uuid;\n                                })\n\n                            } else {\n                                images[image.uuid] = path;\n                            }\n                            imageCache[image.uuid] = images[image.uuid];\n                        }\n                    }\n\n                    let worker = new GenericWorker(batches, batch => {\n                        var pendings = batch.map(workFunc);\n                        return Promise.all(pendings);\n                    })\n\n                    return worker.run().then(() => {\n                        return images;\n                    });\n\n                }\n\n                return Promise.resolve(images);\n\n            },\n\n            parseAttributeArray(att, buffer) {\n                if (!buffer) return;\n                let { byteOffset, count } = att.array;\n                let TypedArrayCtor = _TypedArrayCtors[att.type];\n                att.array = new TypedArrayCtor(buffer, byteOffset, count);\n\n            },\n\n            parseDracoGeometries(json, buffer) {\n\n                json = json.filter(g => {\n                    try {\n                        if (!this.isBufferGeometry(g)) return g;\n                    } catch (err) {\n                        debugger\n                    }\n\n                })\n\n                if (json.length > 0) {\n                    /**\n                   * @type {DRACOLoader}\n                   */\n                    let dracoLoader = this.dracoLoader,\n                        taskConfig = {\n                            attributeIDs: dracoLoader.defaultAttributeIDs,\n                            attributeTypes: dracoLoader.defaultAttributeTypes,\n                            useUniqueIDs: false\n                        },\n                        pendings = [];\n\n                    json.forEach(g => {\n                        var userData = g.userData;\n                        let { byteOffset, count } = userData.draco;\n                        let dracoBuffer = new Uint8Array(buffer, byteOffset, count)\n                        dracoBuffer = dracoBuffer.slice().buffer;\n\n                        let pending = dracoLoader.decodeGeometry(dracoBuffer, taskConfig)\n                        pendings.push(pending);\n                    });\n\n                    return Promise.all(pendings).then(geometryList => {\n\n                        let geometries = {};\n\n                        geometryList.forEach((geometry, index) => {\n                            let g = json[index];\n\n                            geometry.name = g.name;\n                            geometry.userData = g.userData;\n                            geometry.uuid = g.uuid;\n                            delete g.userData.draco;\n\n                            let atts = geometry.attributes;\n                            if (!atts.normal && g.userData && g.userData.NormalBinding) {\n                                let vCount = geometry.index ? 3 * (MathUtils.minmax(geometry.index.array).max + 1) : atts.position.array.length;\n\n                                let normalArray = g.userData.NormalArray;\n                                let arr = new Float32Array(vCount * 3);\n                                for (let i = 0; i < arr.length; i += 3) {\n                                    arr[i] = normalArray[0];\n                                    arr[i + 1] = normalArray[1];\n                                    arr[i + 2] = normalArray[2];\n                                }\n                                let normal = new _THREE.BufferAttribute(arr, 3, false);\n                                geometry.setAttribute('normal', normal)\n\n                            }\n\n                            geometries[geometry.uuid] = geometry\n                        })\n\n                        return geometries;\n                    })\n\n                } else {\n                    return Promise.resolve({})\n                }\n\n            },\n\n            isBufferGeometry(g) {\n                let isBufferGeometry = !!g.data;\n\n                if (!isBufferGeometry) return false;\n\n                let data = g.data, atts = data.attributes;\n                for (const key in atts) {\n                    if (atts.hasOwnProperty(key) && atts[key]) {\n                        const att = atts[key];\n                        if (!att.array) {\n                            isBufferGeometry = false;\n                            break;\n                        }\n                    }\n                }\n                return isBufferGeometry;\n            },\n\n            parseBufferGeometries(json, shapes, buffer) {\n\n                var scope = this;\n                let batches = [], batch, batchSize = 500, geometries = []\n                for (let i = 0; i < json.length; i++) {\n                    const g = json[i];\n\n                    if (!this.isBufferGeometry(g)) continue;\n                    if (batches.length == 0 || batch.length >= batchSize) {\n                        batch = [];\n                        batches.push(batch)\n                    }\n                    geometries.push(g);\n                    batch.push(g);\n                }\n\n                if (batches.length == 0) return Promise.resolve({});\n\n                function workFunc(g) {\n                    let data = g.data, atts = data.attributes;\n                    for (const key in atts) {\n                        if (atts.hasOwnProperty(key) && atts[key]) {\n                            const att = atts[key];\n                            scope.parseAttributeArray(att, buffer);\n                        }\n                    }\n\n                    if (data.index) {\n                        let att = data.index;\n                        scope.parseAttributeArray(att, buffer);\n                    }\n\n                    if (!atts.normal && g.userData && g.userData.NormalBinding) {\n                        let vCount = data.index ? 3 * (MathUtils.minmax(data.index.array).max + 1) : atts.position.array.length;\n\n                        let normalArray = g.userData.NormalArray;\n\n                        let arr = new Float32Array(vCount);\n                        for (let i = 0; i < arr.length; i += 3) {\n                            arr[i] = normalArray[0];\n                            arr[i + 1] = normalArray[1];\n                            arr[i + 2] = normalArray[2];\n                        }\n                        atts.normal = {\n                            type: 'Float32Array',\n                            itemSize: 3,\n                            normalize: false,\n                            array: arr\n                        }\n                    }\n                }\n\n                let worker = new GenericWorker(batches, batch => {\n                    batch.forEach(workFunc);\n                });\n                return worker.run().then(() => {\n                    geometries = ObjectLoader.prototype.parseGeometries.call(this, geometries, shapes);\n                    return geometries;\n                })\n            },\n\n            parseGeometries(json, shapes, buffer) {\n\n                let pendings = [\n                    this.parseDracoGeometries(json, buffer),\n                    this.parseBufferGeometries(json, shapes, buffer)\n                ];\n                return Promise.all(pendings).then((arr) => {\n                    let geometries = Object.assign({}, arr[0], arr[1])\n                    return geometries\n                })\n            }\n        };\n    }\n\n    var loader = new ObjectLoader(manager);\n    Object.assign(loader, _VISMLoader_proto_);\n    return loader;\n}\n\nexport default VISMLoader",
    "\n// import * as THREE from '../../lib/three/three.module.js';\nimport { toByteArray, fromByteArray } from  \"../../../../base64-js/index.js\";\n\n\n// reader \nlet osgInput\n\nclass OsgInput {\n    constructor(text) {\n        this.text = text;\n        this.cacheRow = null;\n        this.totalLength = text.length;\n    }\n    get length() {\n        return this.text.length;\n    }\n    nextRow(preRead) {\n        var m = /\\r?\\n+/.exec(this.text);\n        if (m) {\n            if (this.cacheRow) {\n                var row = this.cacheRow;\n                this.cacheRow = null;\n            } else {\n                var row = this.text.substr(0, m.index);\n                this.text = this.text.substr(m.index + m[0].length);\n\n                if (preRead) {\n                    this.cacheRow = row;\n                }\n\n                if (this.onProgress) {\n                    this.onProgress(this.totalLength - this.length, this.totalLength)\n                }\n            }\n            return row;\n        } else {\n            return this.text;\n        }\n    }\n    nextBlock() {\n        var m = /}\\r?\\n+/.exec(this.text);\n        if (m) {\n            var block = this.text.substr(0, m.index);\n            this.text = this.text.substr(m.index + m[0].length);\n            if (this.onProgress) {\n                this.onProgress(this.totalLength - this.length, this.totalLength)\n            }\n            return block;\n        } else {\n            return this.text;\n        }\n    }\n    onProgress(readLength, totalLength) { }\n}\n\nfunction trim(input) {\n\n    var output = \"\";\n    var start = 0, end = input.length;\n    while (/(\\s|\\t)+/g.test(input[start]) && start < input.length) start++;\n\n    var ch = input[end - 1];\n    while (/(\\s|\\t)+/g.test(ch) && end > 0) {\n        end--;\n        ch = input[end - 1];\n    }\n    output = input.substring(start, end);\n    return output\n}\n\nfunction parseProperty(row) {\n    var m = /\\s+/.exec(row);\n    var name = '', value = row, dataType = null;\n    var dataType = value[0];\n    if (m) {\n        name = row.substr(0, m.index);\n        value = row.substr(m.index + m.length);\n        dataType = value[value.length - 1];\n\n        return { name, dataType, value, row };\n    } else if (row == \"}\") {\n        dataType = \"}\"\n        return { name, dataType, value, row };\n    }\n\n}\n\nfunction readProperty() {\n    let row = osgInput.nextRow();\n    row = trim(row);\n    return parseProperty(row);\n\n}\nlet _osgDataType_Ctors = {\n    Vec2Array: Float32Array,\n    Vec3Array: Float32Array,\n    Vec4Array: Float32Array,\n    UByteArray: Uint8Array,\n    ByteArray: Int8Array,\n    UShortArray: Uint16Array,\n    ShortArray: Int16Array,\n    UIntArray: Uint32Array,\n    IntArray: Int32Array\n}\nfunction readNumberAray(dataType) {\n\n    var block = osgInput.nextBlock()\n    block = trim(block);\n    block = '[' + block.replace(/(\\s|\\t)+/g, ',') + ']';\n    var arr = JSON.parse(block);\n\n    let TypeCtor = _osgDataType_Ctors[dataType]\n    if (!TypeCtor) TypeCtor = Float32Array;\n\n    arr = new TypeCtor(arr);\n    return arr;\n\n}\n\nfunction readChilren(num_children) {\n    var children = new Array(num_children);\n    for (let index = 0; index < num_children; index++) {\n        children[index] = readObject();\n    }\n    return children;\n}\n\n// textureUnit PrimitiveSets VertexArray TexCoordArray NormalArray\n\nfunction readPrimitiveSet() {\n    var row = osgInput.nextRow();\n\n    var description = trim(row).split(/\\s+/);\n    var primitiveSet = {\n        DrawFunc: description[0],\n        Mode: description[1],\n        First: parseInt(description[2]),\n        Count: parseInt(description[3]),\n        Indices: null\n    }\n    if (primitiveSet.DrawFunc != 'DrawArrays') {\n        primitiveSet.Indices = readNumberAray();\n    }\n    // Indices?: OsgArray\n    // Mode: PrimitiveMode\n    // NumInstances: number\n    // Binding: null;\n    // Normalize: boolean;\n    // First?: number;\n    // Count?: number\n    return primitiveSet;\n}\n\nfunction readPrimitiveSets(property) {\n    var primitiveSets = [];\n\n    do {\n        let row = osgInput.nextRow();\n\n        var primitiveSet = readPrimitiveSet();\n        primitiveSets.push(primitiveSet);\n\n        row = osgInput.nextRow();\n\n        row = trim(row);\n        property = parseProperty(row);\n        if (property.name != 'PrimitiveSets') {\n            break;\n        }\n\n    } while (true);\n    return primitiveSets;\n}\n\nfunction readTextureUnits(property) {\n    var textureUnits = [];\n\n    do {\n        var textureUnit = readObject();\n        textureUnits.push(textureUnit);\n\n        var row = trim(osgInput.nextRow(true))\n        property = parseProperty(row);\n\n        if (property.name != 'textureUnit') {\n            break;\n        }\n        row = osgInput.nextRow();\n\n    } while (true);\n    return textureUnits;\n}\n\n// VertexArray TexCoordArray NormalArray\n\nvar osgArrays = {}, _osgDataType_To_ItemSize = {\n    Vec3Array: 3,\n    Vec2Array: 2,\n    Vec4Array: 2,\n    UShortArray: 1,\n    ShortArray: 1,\n    IntArray: 1,\n    UIntArray: 1\n};\nfunction readOsgArray(property, indicesName) {\n    // VertexArray Vec3Array 186\n    // NormalArray Vec3Array 1\n    //TexCoordArray 0 Vec2Array 186\n\n    //indicesName:\n    //  VertexIndices\n    //  TexCoordIndices\n\n    var typeName = property.name;\n    var arrays = [];\n    var description, offset = 0;\n\n    do {\n\n        description = property.value.split(/\\s+/);\n        if (description.length == 3) offset = 1;\n        else offset = 0;\n\n        var array = {\n            dataType: description[offset],\n            count: parseInt(description[offset + 1]),\n            value: null,\n            Type: \"Osg::Array\"\n        }\n\n        if (description[1] == \"UniqueID\") {\n            //0 UniqueID Vec2Array_11 Vec2Array 168\n            array.UniqueID = description[2];\n            array.dataType = description[3];\n            array.count = parseInt(description[4]);\n        }\n\n        if (array.dataType == 'Use') {\n            var uniqueID = description[2]\n            array = osgArrays[uniqueID];\n        } else {\n            osgInput.nextRow();//skip '{'\n            array.value = readNumberAray(array.dataType);\n            if (array.UniqueID) {\n                osgArrays[array.UniqueID] = array;\n            }\n        }\n\n        arrays.push(array);\n\n        property = parseProperty(trim(osgInput.nextRow(true)));\n\n        //read indices\n        if (indicesName && property.name == indicesName) {\n\n            osgInput.nextRow(true);//skip descriptor\n\n            let indicesArr = readOsgArray(property);\n            let indices = indicesArr[0];\n            const itemSize = _osgDataType_To_ItemSize[array.dataType]\n            let newValues = new array.value.constructor(indices.count * itemSize);\n\n            for (let i = 0; i < indices.count; i++) {\n                const srcIndex = indices.value[i];\n\n                const srcStart = itemSize * srcIndex;\n                const dstStart = itemSize * i;\n\n                for (let j = 0; j < itemSize; j++) {\n                    const val = array.value[srcStart + j];\n                    newValues[dstStart + j] = val\n                }\n            }\n\n            array.value = newValues;\n            array.count = indices.count;\n\n            //try reading next block\n            let cacheRow = osgInput.nextRow(true)\n            property = parseProperty(trim(cacheRow));\n            if (property.name != typeName) {\n                osgInput.cacheRow = cacheRow;\n            }\n        }\n\n        if (property.name != typeName) {\n            break;\n        }\n\n        if (array.dataType != 'Use') {\n            osgInput.nextRow();//skip '{'\n        }\n    } while (true);\n\n    return arrays;\n}\n\n\nfunction readObject() {\n    var obj = {}, indicesNameMap = {\n        VertexArray: 'VertexIndices',\n        TexCoordArray: 'TexCoordIndices'\n    }\n    var property = readProperty();\n    if (!property) debugger\n    var dataType = property.dataType;\n    var name = property.name;\n    var value = property.value.replace(/\\\"/g, '');\n\n    if (name == 'Matrix') {\n        return readNumberAray();\n    }\n\n    else if (dataType == '{') {\n\n        obj = readObject();\n        obj.Type = 'Osg::' + name;\n\n    } else {\n\n        obj[name] = trim(value);\n\n        while (osgInput.length > 0) {\n            property = readProperty();\n\n            if (!property) break;\n\n            dataType = property.dataType;\n            name = property.name;\n            value = property.value;\n\n            if (name == 'Matrix') {\n                obj[name] = readNumberAray();\n            }\n            else if (name == 'PrimitiveSets') {\n                obj[name] = readPrimitiveSets(property);\n\n            } else if (name == 'textureUnit') {\n                obj[name] = readTextureUnits(property);\n\n            } else if (name == 'VertexArray'\n                || name == 'TexCoordArray'\n                || name == 'NormalArray'\n                || name == 'ColorArray'\n            ) {\n                obj[name] = readOsgArray(property, indicesNameMap[name]);\n\n            }\n            else if (dataType == '{') {\n                obj[name] = readObject();\n                obj[name].Type = \"Osg::\" + name;\n\n            } else if (dataType == '}') {\n                break;\n            }\n            else if (name == 'num_children' || name == 'num_drawables') {\n\n                value = parseInt(value);\n                obj[name] = value;\n                obj.children = readChilren(value);\n\n            } else {\n                value = value.replace(/\\\"/g, '');\n                obj[name] = value;\n            }\n\n        }\n\n    }\n\n    return obj;\n}\n\n//parser\n\nfunction parseColor(str) {\n    var color = str.replace(/\\s+/g, ',');\n    color = JSON.parse('[' + color + ']');\n\n    return color;\n}\n\n\nvar magFilterMap, wrapMap;\nfunction parseTexture(textureUnit, path, texturesByUri, texturesByID) {\n    if (!textureUnit) return;\n    const _THREE = THREE, LinearFilter = _THREE.LinearFilter, NearestFilter = _THREE.NearestFilter;\n    if (!magFilterMap) {\n        magFilterMap = {\n            'LINEAR': LinearFilter,\n            'LINEAR_MIPMAP_LINEAR': _THREE.LinearMipMapLinearFilter,\n            'LINEAR_MIPMAP_NEAREST': _THREE.LinearMipMapNearestFilter,\n            'NEAREST': NearestFilter,\n            'NEAREST_MIPMAP_LINEAR': _THREE.NearestMipMapLinearFilter,\n            'NEAREST_MIPMAP_NEAREST': _THREE.NearestMipMapNearestFilter\n        };\n        wrapMap = {\n            \"CLAMP_TO_EDGE\": _THREE.ClampToEdgeWrapping,\n            \"REPEAT\": _THREE.RepeatWrapping,\n            \"MIRRORED\": _THREE.MirroredRepeatWrapping\n        }\n    }\n\n    return textureUnit.map((textureUnit) => {\n\n        if (textureUnit.Use) {\n            return texturesByID[textureUnit.Use];\n        } else {\n            var textureParams = textureUnit.Texture2D;\n            var uniqueID = textureParams.UniqueID;\n\n            let c = path[path.length - 1] == '/' ? '' : '/'\n\n            var file = textureParams.file\n            var uri = path + c + file.replace(/\"/g, '').replace(/(\\/|\\\\)+/g, '/')\n\n            var texture = texturesByUri[uri];\n\n            if (!texture) {\n                var texture = new _THREE.Texture(uri);\n                const isJPEG = file.search(/\\.jpe?g($|\\?)/i) > 0 || file.search(/^data\\:image\\/jpeg/) === 0;\n\n                texture.format = isJPEG ? _THREE.RGBFormat : _THREE.RGBAFormat;\n                texture.magFilter = magFilterMap[textureParams.mag_filter];\n                texture.anisotropy = parseInt(textureParams.maxAnisotropy);\n\n                var minFilter = magFilterMap[textureParams.min_filter];\n                texture.minFilter = minFilter;\n\n                if (minFilter == LinearFilter || minFilter == NearestFilter) texture.generateMipmaps = false;\n\n                texture.wrapS = wrapMap[textureParams.wrap_s]\n                texture.wrapT = wrapMap[textureParams.wrap_t]\n                texturesByUri[uri] = texture;\n                texturesByUri.count = texturesByUri.count ? texturesByUri.count + 1 : 1;\n            }\n\n            texturesByID[uniqueID] = texture;\n\n            return texture;\n\n        }\n    })\n\n}\n\n\nlet osg_depthFuncMap, osg_factorMap, osg_equationMap;\nvar materials = {};\nfunction parseMaterial(stateSet, textures) {\n\n    const _THREE = THREE;\n    if (!osg_depthFuncMap) {\n        osg_depthFuncMap = {\n            NEVER: _THREE.NeverDepth,\n            ALWAYS: _THREE.AlwaysDepth,\n            LESS: _THREE.LessDepth,\n            LEQUAL: _THREE.LessEqualDepth,\n            EQUAL: _THREE.EqualDepth,\n            GEQUAL: _THREE.GreaterEqualDepth,\n            GREATER: _THREE.GreaterDepth,\n            NOTEQUAL: _THREE.NotEqualDepth\n        };\n    }\n\n    if (!osg_factorMap) {\n        osg_factorMap = {\n            ZERO: _THREE.ZeroFactor,\n            ONE: _THREE.OneFactor,\n            SRC_COLOR: _THREE.SrcColorFactor,\n            SRC_ALPHA: _THREE.SrcAlphaFactor,\n            SRC_ALPHA_SATURATE: _THREE.SrcAlphaSaturateFactor,\n            DST_COLOR: _THREE.DstColorFactor,\n            DST_ALPHA: _THREE.DstAlphaFactor,\n            ONE_MINUS_SRC_COLOR: _THREE.OneMinusSrcColorFactor,\n            ONE_MINUS_SRC_ALPHA: _THREE.OneMinusSrcAlphaFactor,\n            ONE_MINUS_DST_COLOR: _THREE.OneMinusDstColorFactor,\n            ONE_MINUS_DST_ALPHA: _THREE.OneMinusDstAlphaFactor\n        };\n    }\n\n    if (!osg_equationMap) {\n        osg_equationMap = {\n            FUNC_ADD: _THREE.AddEquation,\n            FUNC_SUBTRACT: _THREE.SubtractEquation,\n            FUNC_REVERSE_SUBTRACT: _THREE.ReverseSubtractEquation,\n            MIN: _THREE.MinEquation,\n            MAX: _THREE.MaxEquation\n        };\n    }\n\n\n    let parameters = stateSet.Material;\n    var uniqueID;\n    if (parameters.UniqueID || parameters.uniqueID) {\n        uniqueID = parameters.UniqueID || parameters.uniqueID\n        if (materials[uniqueID]) {\n            return materials[uniqueID];\n        }\n    }\n\n    var material = new _THREE.MeshPhongMaterial({\n        side: _THREE.DoubleSide\n    });\n    material.name = parameters.name;\n    if (parameters.ColorMode == 'ON') material.vertexColors = _THREE.VertexColors;\n\n    var diffuseColor = parseColor(parameters.diffuseColor);\n    material.color = new _THREE.Color().fromArray(diffuseColor);\n\n    var emissive = parseColor(parameters.emissionColor);\n    material.emissive = new _THREE.Color().fromArray(emissive);\n    material.emissiveIntensity = emissive[3];\n    material.shininess = parseFloat(parameters.shininess);\n\n    var specular = parseColor(parameters.specularColor);\n    material.specular = new _THREE.Color().fromArray(specular);\n\n    if (uniqueID) {\n        material.userData.uniqueID = uniqueID;\n        materials[uniqueID] = material;\n    }\n\n    if (stateSet.rendering_hint == 'TRANSPARENT_BIN') {\n        material.transparent = true;\n        // material.alphaTest = 0;\n        // material.premultipliedAlpha = true;\n        // material.depthWrite = false;\n    }\n\n    if (stateSet.BlendFunc) {\n        let blendFunc = stateSet.BlendFunc\n        // material.blending = _THREE.CustomBlending;\n\n        // material.blending = _THREE.AdditiveBlending\n        // material.blendSrc = osg_factorMap[blendFunc.source];\n        // material.blendSrcAlpha =osg_factorMap[blendFunc.source];// osg_factorMap[blendFunc.sourceAlpha||'ZERO'];\n        // material.blendDst = osg_factorMap[blendFunc.destination];\n        // material.blendDstAlpha = osg_factorMap[blendFunc.destination]//osg_factorMap[blendFunc.destinationAlpha||'ZERO'];\n        // material.premultipliedAlpha=true;\n\n        // source SRC_ALPHA\n        // destination ONE_MINUS_SRC_ALPHA\n\n        // functionSourceRgb: gl.SRC_ALPHA,\n        // functionSourceAlpha: gl.ONE,\n        // functionDestinationRgb: gl.ONE_MINUS_SRC_ALPHA,\n        // functionDestinationAlpha: gl.ONE_MINUS_SRC_ALPHA\n\n        // return {\n        //     enabled: material.blending == _THREE.NoBlending,\n        //     // color: //Color\n        //     equationRgb: equationToGL[material.blendEquation],\n        //     equationAlpha: equationToGL[material.blendEquationAlpha],\n        //     functionSourceRgb: factorToGL[material.blendSrc],\n        //     functionSourceAlpha: factorToGL[material.blendSrcAlpha],\n        //     functionDestinationRgb: factorToGL[material.blendDst],\n        //     functionDestinationAlpha: factorToGL[material.blendDstAlpha]\n        // }\n\n    }\n\n    if (stateSet.GL_CULL_FACE == 'ON') {\n        material.side = _THREE.FrontSide;\n    }\n\n    if (textures && textures.length > 0) {\n\n        material.map = textures[0]\n\n        if (textures.length > 1) {\n            /**\n             * @type {THREE.Texture}\n             * @private\n             */\n            var lightMap = textures[1];\n            // lightMap.format = _THREE.RGBFormat;\n            lightMap.minFilter = _THREE.LinearFilter;\n\n            material.lightMap = lightMap;\n        }\n\n        if (textures.length > 2 && textures[2] != material.map) {\n            material.alphaMap = textures[2];\n        }\n\n        if (material.alphaMap || material.map.format == _THREE.RGBAFormat || material.opacity < 1) {\n            material.depthWrite = !material.transparent;\n        }\n    }\n    return material;\n}\n\nfunction parseOsgArray(parameters) {\n    var itemSize = 3;\n    switch (parameters.dataType) {\n        case \"Vec3fArray\":\n        case \"Vec3dArray\":\n        case \"Vec3DArray\":\n        case \"Vec3Array\":\n            itemSize = 3;\n            break;\n        case \"Vec2fArray\":\n        case \"Vec2dArray\":\n        case \"Vec2DArray\":\n        case \"Vec2Array\":\n            itemSize = 2;\n            break;\n        case \"Vec4fArray\":\n        case \"Vec4dArray\":\n        case \"Vec4DArray\":\n        case \"Vec4Array\":\n            itemSize = 4;\n            break;\n        default:\n            break;\n    }\n    var array = parameters.value;\n    if (typeof array == 'string') {\n        array = new Float32Array(toByteArray(array).buffer);\n    }\n    var attribute = new THREE.BufferAttribute(array, itemSize, parameters.normalize || parameters.Normalize);\n    return attribute;\n}\n\nfunction parseGeometry(parameters, path, texturesByUri, texturesByID) {\n    const _THREE = THREE;\n\n    var textures = parseTexture(parameters.StateSet.textureUnit, path, texturesByUri, texturesByID);\n    var material = parseMaterial(parameters.StateSet, textures);\n\n    var geometry = new _THREE.BufferGeometry();\n\n    parameters.PrimitiveSets.forEach((primitiveSet) => {\n        if (primitiveSet.DrawFunc == \"DrawArrays\") {\n            geometry.addGroup(primitiveSet.First, primitiveSet.Count);\n        } else {\n            geometry.setIndex(primitiveSet.Indices)\n        }\n    })\n\n    if (parameters.ColorArray) {\n\n        var colorArray = parameters.ColorArray[0];\n        let colorAttribute = parseOsgArray(colorArray);\n        if (parameters.ColorBinding == 'OVERALL') {\n            material.color = new _THREE.Color().fromArray(colorAttribute.value || colorAttribute.array || colorAttribute)\n\n        } else if (colorAttribute && (!material.map || material.vertexColors)) {\n            geometry.setAttribute('color', colorAttribute);\n        }\n    }\n\n    var vertexArray = parameters.VertexArray[0];\n    var posAttribute = parseOsgArray(vertexArray);\n    geometry.setAttribute('position', posAttribute);\n\n    if (parameters.TexCoordArray) {\n        parameters.TexCoordArray.forEach((texCoordArray, index) => {\n            var uvAttribute = parseOsgArray(texCoordArray);\n            if (index == 0) {\n                geometry.setAttribute('uv', uvAttribute)\n            } else {\n                geometry.setAttribute('uv' + (index + 1), uvAttribute)\n            }\n        })\n    }\n\n    if (parameters.NormalArray) {\n\n        var normalArray = parameters.NormalArray[0];\n        normalArray = parseOsgArray(normalArray);\n        if (parameters.NormalBinding == 'OVERALL') {\n\n            var arr = new Float32Array(posAttribute.count * normalArray.itemSize)\n            for (let i = 0; i < arr.length; i += normalArray.itemSize) {\n                for (let j = 0; j < normalArray.itemSize; j++) {\n                    arr[i + j] = normalArray.array[j];\n                }\n            }\n\n            var normalAttribute = new _THREE.BufferAttribute(arr, normalArray.itemSize, normalArray.normalize);\n            geometry.userData = geometry.userData || {};\n            geometry.userData.NormalBinding = 'OVERALL'\n            geometry.userData.NormalArray = normalArray.array\n\n            geometry.setAttribute('normal', normalAttribute);\n\n            // debugger\n        } else if (parameters.NormalBinding == 'PER_PRIMITIVE') {\n            let itemSize = normalArray.itemSize\n            let arr = new Float32Array(posAttribute.count * itemSize)\n            let primiticeCount = normalArray.count, vCount = 3;\n\n            let i = 0;\n            for (let primiveIndex = 0; primiveIndex < primiticeCount; primiveIndex++) {\n                let srcStart = primiveIndex * itemSize;\n\n                for (let vi = 0; vi < vCount; vi++) {\n\n                    let index = geometry.index ? geometry.index.array[i] : i;\n                    let dstStart = index * itemSize;\n\n                    for (let j = 0; j < itemSize; j++) {\n                        arr[dstStart + j] = normalArray.array[srcStart + j]\n                    }\n\n                    i++;\n                }\n            }\n\n            var normalAttribute = new _THREE.BufferAttribute(arr, normalArray.itemSize, normalArray.normalize);\n            geometry.setAttribute('normal', normalAttribute);\n        }\n        else {\n            var normalAttribute = normalArray;\n            geometry.setAttribute('normal', normalAttribute);\n        }\n    }\n\n    var obj = new _THREE.Mesh(geometry, material);\n    obj.name = parameters.name;\n    // obj.up.set(0, 0, 1);\n    return obj;\n}\n/**\n * \n * @param {object} parameters \n * @param {\"Osg::Material\"|\"Osg::Texture2D\"|\"Osg::StateSet\"|\"Osg::MatrixTransform\"|\"Osg::Geode\"|\"Osg::Group\"|\"Osg::Geometry\"|\"Osg::Node\"} parameters.Type\n * @returns {THREE.Group}\n */\nfunction parseObject(parameters, path, texturesByUri, texturesByID) {\n    var obj = new THREE.Group();\n    // obj.up.set(0, 0, 1);\n\n    switch (parameters.Type) {\n        case 'Osg::Geode':\n        case \"Osg::Group\":\n        case \"Osg::Node\":\n        case \"Osg::MatrixTransform\":\n\n            if (parameters.referenceFrame && parameters.referenceFrame != \"RELATIVE\") {\n                console.warn('unsupport ReferenceFrame' + parameters.referenceFrame + \". use RELATIVE ReferenceFrame\");\n            }\n            if (parameters.Matrix) {\n                obj.matrix.fromArray(parameters.Matrix);\n                obj.matrix.decompose(obj.position, obj.quaternion, obj.scale);\n                obj.matrix.identity()\n            }\n\n            parameters.children.forEach((child) => {\n                obj.add(parseObject(child, path, texturesByUri, texturesByID))\n            })\n            break;\n        case 'Osg::Geometry':\n            obj = parseGeometry(parameters, path, texturesByUri, texturesByID);\n            break;\n        default:\n            throw new Error('unsupport osg dataType ' + parameters.Type + ' ');\n\n    }\n\n    if (obj) obj.Name = parameters.name;\n\n    return obj\n}\n\nvar imgLoader;\nfunction loadTextureImage(texture, imageCache) {\n\n    return new Promise((resolve, reject) => {\n        let url = texture.image;\n        if (typeof url != 'string') {\n            resolve(texture.image);\n        }\n        else if (imageCache && imageCache[url]) {\n            texture.image = imageCache[url];\n            resolve(texture.image);\n        }\n        else {\n            let img = imgLoader.load(url, resolve, reject);\n            img._srcUrl = url;\n            img.uuid = THREE.Math.generateUUID();\n            texture.image = img;\n            if (imageCache) imageCache[url] = img;\n\n        }\n    })\n}\n\nfunction traverseOsgJson(node, callback) {\n    if (node) callback(node);\n    if (node.children) {\n        node.children.forEach(node => {\n            traverseOsgJson(node, callback);\n        })\n    }\n}\n\n/**\n * \n * @param {object} osg \n * @returns {object}\n */\nexport function osgToJSON(osg) {\n    traverseOsgJson(osg, (node) => {\n\n        if (node.Type == 'Osg::Geometry') {\n\n            for (const name in node) {\n                if (node.hasOwnProperty(name)\n                    && (\n                        name == 'VertexArray'\n                        || name == 'TexCoordArray'\n                        || name == 'NormalArray'\n                        || name == 'ColorArray'\n                    )) {\n\n                    const osgArray = node[name];\n                    if (Array.isArray(osgArray)) {\n\n                        osgArray.forEach((array) => {\n                            if (typeof array.value != 'string') {\n                                if (typeof Buffer != 'undefined') {\n                                    array.value = Buffer.from(array.value.buffer).toString('base64');\n                                } else {\n                                    array.value = fromByteArray(new Uint8Array(array.value.buffer))\n                                }\n                            }\n                        })\n\n                    } else {\n\n                        if (typeof osgArray.value != 'string') {\n                            if (typeof Buffer != 'undefined') {\n                                osgArray.value = Buffer.from(osgArray.value.buffer).toString('base64');\n                            } else {\n                                osgArray.value = fromByteArray(new Uint8Array(osgArray.value.buffer))\n                            }\n                            // osgArray.value = Buffer.from(osgArray.value.buffer).toString('base64');\n                        }\n                    }\n\n                }\n            }\n\n            node.PrimitiveSets.forEach((primitiveSet) => {\n                if (primitiveSet.Indices) {\n                    primitiveSet.Indices = Buffer.from(primitiveSet.Indices).toString('base64');\n\n                }\n            })\n        }\n\n        if (node.Matrix) {\n            node.Matrix = Array.from(node.Matrix)\n        }\n    })\n    return osg;\n}\n\n/**\n * \n * @param {string} text\n * @param {(readLength,totalLength)=>void} [onProgress]\n * @returns {object}\n */\nexport function readOsg(text, onProgress) {\n    osgInput = new OsgInput(text);\n    osgInput.onProgress = onProgress;\n    var obj = readObject();\n    return obj\n}\n\n/**\n * \n * @param {string|Uin8Array|ArrayBuffer} osg \n * @param {string} path  \n * @param {boolean}[preloadTexture] \n * @param {THREE.LoadingManager}[manager] \n * @param {object}[imageCache]\n * @param {object}[textureCache]\n * @param {boolean}[debug]\n * @returns {Promise<THREE.Group>}\n */\nexport function parseOsg(osg, path, preloadTexture, manager, imageCache, textureCache, debug) {\n    const _THREE = THREE;\n    // textureCache = null;\n\n    var texturesByUri = textureCache || {}\n    var texturesByID = {};\n    osgArrays = {};\n    materials = {}\n    imageCache = imageCache || {};\n\n    if (debug) console.time('readOsg')\n    if (typeof osg == 'string') {\n        osg = readOsg(osg);\n    } else if (osg instanceof Uint8Array) {\n        osg = _THREE.LoaderUtils.decodeText(osg);\n        osg = readOsg(osg);\n    } else if (osg instanceof ArrayBuffer) {\n        osg = new Uint8Array(osg)\n        osg = _THREE.LoaderUtils.decodeText(osg);\n\n        osg = readOsg(osg);\n    }\n\n    if (debug) {\n        console.timeEnd('readOsg');\n    }\n    if (debug) console.time('parseObject')\n\n    var obj = parseObject(osg, path, texturesByUri, texturesByID);\n    obj.osgRoot = osg;\n\n    if (debug) console.timeEnd('parseObject');\n\n    var textureKeys = Object.keys(texturesByID);\n    if (preloadTexture && textureKeys.length > 0) {\n        var pending = [];\n        imgLoader = new _THREE.ImageLoader(manager)\n        for (const id in texturesByID) {\n            if (texturesByID.hasOwnProperty(id)) {\n                const texture = texturesByID[id];\n                pending.push(loadTextureImage(texture, imageCache))\n            }\n        }\n\n        if (!textureCache) texturesByUri = {};\n\n        texturesByID = {};\n        osgArrays = {};\n        materials = {}\n\n        return Promise.all(pending).then(() => {\n            return obj;\n        })\n    }\n    else {\n        if (!textureCache) texturesByUri = {};\n        texturesByID = {};\n        osgArrays = {};\n        materials = {}\n    }\n\n    return obj;\n}",
    "\n/**\n * \n * @param {THREE.Object3D} scene \n */\nexport default function releaseResources(scene) {\n    if (!scene || !scene.traverse) return\n\n    scene.traverse(node => {\n        if (node.isDestroyed && node.isDestroyed()) return;\n\n        //runtime's meshes\n\n        if (node.destroy) {\n            node.pickObject && (delete node.pickObject)\n            node.pickId && (delete node.pickId)\n\n            node.destroy();\n            return;\n        }\n\n        //three.js`s objects\n\n        if (!node.isScene && node.dispose) {\n            node.dispose()\n        }\n        if (node.dispatchEvent) node.dispatchEvent({ type: 'dispose' }, node);\n\n        node.pickObject && (delete node.pickObject)\n        node.pickId && (delete node.pickId)\n        if (node._actualMesh) {\n            if (!node._actualMesh.isDestroyed) node._actualMesh.destroy()\n            delete node._actualMesh.mesh3js\n            delete node._actualMesh\n        }\n\n        if (node.geometry) {\n            node.geometry.dispose();\n            let attrs = node.geometry.attributes\n            for (const key in attrs) {\n                if (attrs.hasOwnProperty(key) && attrs[key]) {\n                    const att = attrs[key];\n                    delete att.array\n                    attrs[key];\n                }\n            }\n            delete node.geometry.attributes\n            delete node.geometry;\n        }\n\n        if (node.material) {\n            if (Array.isArray(node.material)) {\n                node.material.forEach((mtl) => {\n                    mtl.dispose();\n                })\n            } else {\n                node.material.dispose();\n            }\n            delete node.material;\n        }\n\n    });\n}",
    "\nimport VISMLoader from  \"./Source/model/VISMLoader.js\";\n\nimport VISMExporter from  \"./Source/model/VISMExporter.js\";\n\nimport OSGLoader from  \"./Source/model/OSGLoader.js\";\n\nimport * as Osg from  \"./Source/ThirdParty/osg-serializer-js/Source/index.js\";\n\nimport { GLTFLoader } from  \"./Source/ThirdParty/loaders/GLTFLoader.js\";\n\nimport { DDSLoader } from  \"./Source/ThirdParty/loaders/DDSLoader.js\";\n\nimport { TGALoader } from  \"./Source/ThirdParty/loaders/TGALoader.js\";\n\nimport { BMPLoader } from  \"./Source/ThirdParty/loaders/BMPLoader.js\";\n\nimport { DRACOLoader } from  \"./Source/ThirdParty/loaders/DRACOLoader.js\";\n\nimport { RGBELoader } from  \"./Source/ThirdParty/loaders/RGBELoader.js\";\n\nimport { BmpDecoder } from  \"./Source/ThirdParty/bmp-js/lib/decoder.js\";\n\nimport { DRACOExporter } from  \"./Source/ThirdParty/exporters/DRACOExporter.js\";\n\nimport { GLTFExporter } from  \"./Source/ThirdParty/exporters/GLTFExporter.js\";\n\n\nimport MeshVisModel from  \"./Source/model/MeshVisModel.js\";\n\nimport MeshVisModelUtil from  \"./Source/model/MeshVisModelUtil.js\";\n\nimport PagedLOD from  \"./Source/PagedLOD.js\";\n\nimport QuadtreeLOD from  \"./Source/QuadtreeLOD.js\";\n\nimport QuadtreeLODUtil from  \"./Source/QuadtreeLODUtil.js\";\n\nimport QuadtreeNode from  \"./Source/QuadtreeNode.js\";\n\nimport QuatreeContentSet from  \"./Source/QuatreeContentSet.js\";\n\nimport releaseResources from  \"./Source/releaseResources.js\";\n\nimport BuildingVector3DLoader from  \"./Source/BuildingVector3DLoader.js\";\n\nimport * as LODUtils from  \"./Source/LODUtils.js\";\n\nimport { parseOsg, readOsg } from  \"./Source/model/parseOsg.js\";\n\nimport CameraHelper from  \"./Source/CameraHelper.js\";\n\nimport Cesium3DTileExtension from  \"./Source/3dtiles/Cesium3DTileExtension.js\";\n\n\nexport {\n    MeshVisModel, MeshVisModelUtil, releaseResources,\n    VISMLoader, OSGLoader, GLTFLoader, DDSLoader, TGALoader, BMPLoader,\n    DRACOLoader, RGBELoader, BmpDecoder, Osg, parseOsg, readOsg,\n    GLTFExporter, DRACOExporter, VISMExporter,\n    PagedLOD, QuadtreeLOD, QuadtreeLODUtil, LODUtils,\n    QuadtreeNode, QuatreeContentSet, BuildingVector3DLoader,\n    CameraHelper, Cesium3DTileExtension\n}",
    "\n/**\n * Get the required size + padding for a buffer, rounded to the next 4-byte boundary.\n * https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#data-alignment\n *\n * @param {Integer} bufferSize The size the original buffer.\n * @returns {Integer} new buffer size with required padding.\n *\n */\nexport function getPaddedBufferSize(bufferSize) {\n\n    return Math.ceil(bufferSize / 4) * 4;\n\n}\n\n/**\n * Returns a buffer aligned to 4-byte boundary.\n *\n * @param {Uint8Array} buffer Buffer to pad\n * @param {Integer} paddingByte (Optional)\n * @returns {Uint8Array} The same buffer if it's already aligned to 4-byte boundary or a new buffer\n */\nexport function getPaddedBuffer(buffer, paddingByte) {\n\n    paddingByte = paddingByte || 0;\n\n    var paddedLength = this.getPaddedBufferSize(buffer.byteLength);\n\n    if (paddedLength !== buffer.byteLength) {\n\n        var array = new Uint8Array(paddedLength);\n        array.set(buffer);//new Uint8Array(arrayBuffer));\n\n        if (paddingByte !== 0) {\n\n            for (var i = buffer.byteLength; i < paddedLength; i++) {\n\n                array[i] = paddingByte;\n\n            }\n\n        }\n\n        return array;\n\n    }\n\n    return buffer;\n\n}",
    "\n\n/**\n * 通用线程工具，在主线程中实现异步执行耗费时间较长的任务队列，避免界面假死，同时可以监控任务执行进度。应用：可以用于代替耗费时间较长的for循环\n* @example\n    let dataList=[];\n\n    function workFunc(data,index){\n        //do something here\n    }\n\n    //1.for\n    for(let index=0;index<dataList.length;index++){\n        let data=dataList[index];\n        workFunc(data,index);\n    }\n\n    //2.Use GenericWorker instead\n\n    let worker=new GenericWorker(dataList,workFunc);\n    worker.run((progress,currentData)=>{\n        //update progress ui here\n    }).then(()=>{\n        //done\n    }).catch(err=>{\n        //error\n    });\n */\nexport default class GenericWorker {\n    /**\n     *  通用线程工具，在主线程中实现异步执行耗费时间较长的任务队列，避免界面假死，同时可以监控任务执行进度。应用：可以用于代替耗费时间较长的for循环\n     * @param {Array} dataList \n     * @param {(data:any,index:number)=>Promise<any>} workFunc \n     * @example\n        let dataList=[];\n        \n        function workFunc(data,index){\n            //do something here\n        }\n\n        //for\n        for(let index=0;index<dataList.length;index++){\n          let data=dataList[index];\n          workFunc(data,index);\n        }\n\n        //GenericWorker\n\n        let worker=new GenericWorker(dataList,workFunc);\n        worker.run((progress,currentData)=>{\n            //update progress ui here\n        }).then(()=>{\n            //done\n        }).catch(err=>{\n            //error\n        });\n     */\n    constructor(dataList, workFunc) {\n        if (!dataList || !dataList.length) {\n            throw new Error('dataList is required')\n        }\n        if (typeof workFunc != 'function') {\n            throw new Error('workFunc is required')\n        }\n\n        this.dataList = dataList;\n        this.workFunc = workFunc;\n    }\n\n    run(onProgress) {\n\n        return new Promise((resolve, reject) => {\n            let taskCount = this.dataList.length,\n                taskIndex = 0;\n            let resultList = [];\n\n            let next = () => {\n\n                try {\n\n                    if (this.dataList.length == 0) {\n                        if (onProgress) onProgress(100, null);\n                        resolve(resultList);\n\n                    } else {\n\n                        let loaded = (taskCount - this.dataList.length)\n                        let progress = 100 * loaded / taskCount;\n                        let currentData = this.dataList.shift();\n                        if (onProgress) onProgress(progress, currentData, loaded, taskCount);\n\n                        let promises = this.workFunc(currentData, taskIndex);\n                        let isArray = Array.isArray(promises);\n                        if (!isArray) promises = [promises];\n\n                        Promise.all(promises).then((result) => {\n                            if (isArray || !result) resultList.push(result);\n                            else resultList.push(result[0]);\n\n                            taskIndex++;\n\n                            requestAnimationFrame(next);\n\n                        }).catch((err) => {\n                            resultList.splice(0);\n                            reject(err);\n                        })\n\n                    }\n\n                } catch (err) {\n                    resultList.splice(0);\n                    reject(err)\n                }\n            }\n            next();\n        })\n\n    }\n}",
    "\nimport Path from  \"./Path.js\";\n\nimport GenericWorker from  \"./GenericWorker.js\";\n\n// import { MaxRectsPacker, Rectangle, Bin } from \"../../App/Mesh3DV/lib/maxrects-packer/dist/maxrects-packer.js\";\n\nexport default class ImageUtils {\n\n    /**\n     * Based on MaxRectsPacker: https://www.npmjs.com/package/maxrects-packer\n     * @param {{width:number,height:number}[]} maps \n     * @param {boolean} [forcePowerOfTwo=false] \n     * @returns {{rects:{id:number,x:number,y:number,rot:number,width:number,height:number,image:CanvasImageSource}[],width:number,height:number}[]}\n     */\n    static layoutMap(maps, forcePowerOfTwo) {\n        if (typeof MaxRectsPacker == 'undefined') {\n            throw new Error('MaxRectsPacker is required. https://www.npmjs.com/package/maxrects-packer');\n        }\n        var input = [];\n        maps.forEach((map, id) => {\n            input.push({\n                width: map.width, height: map.height, image: map, id: id\n            });\n        });\n        const options = {\n            smart: true,\n            pot: forcePowerOfTwo != undefined ? forcePowerOfTwo : true,\n            square: false,\n            allowRotation: false,\n            tag: false,\n            border: 0,\n            // logic:MaxRectsPacker.PACKING_LOGIC.MAX_AREA\n        }; // Set packing options\n        let packer = new MaxRectsPacker.MaxRectsPacker(4096 * 2, 4096 * 2, 0, options); // width, height, padding, options\n        packer.addArray(input); // Start packing with input array  \n        return packer.bins;\n    }\n\n    /**\n     * \n     * @param {{rects:{id:number,x:number,y:number,rot:number,width:number,height:number,image:CanvasImageSource}[],width:number,height:number}} packedBin \n     * @returns {HTMLCanvasElement}\n     */\n    static drawPackedMap(packedBin, bgColor) {\n        const { rects, width, height } = packedBin;\n        var cv = document.createElement('canvas')\n        cv.width = width\n        cv.height = height\n        var ctx = cv.getContext('2d');\n        if (bgColor) {\n            ctx.fillStyle = bgColor;\n            ctx.fillRect(0, 0, width, height);\n        }\n        for (let i = 0; i < rects.length; i++) {\n            const rect = rects[i];\n            ctx.drawImage(rect.image, rect.x, rect.y)\n        }\n        return cv;\n    }\n\n    /**\n     * \n     * @param {CanvasImageSource} map \n     * @param {number[]} uvBox \n     * @param {boolean} [flipY=false] \n     * @param {boolean} [forceClip=false] \n     * @returns {HTMLCanvasElement}\n     */\n    static clipMap(map, uvBox, flipY, forceClip) {\n        var sw = map.width, sh = map.height;\n        var w = parseInt(sw * (uvBox[2] - uvBox[0]))\n        var h = parseInt(sh * (uvBox[3] - uvBox[1]))\n        if (w == map.width && h == map.height && !forceClip) return map;\n        var cv = document.createElement('canvas')\n        cv.width = w;\n        cv.height = h;\n        var ctx = cv.getContext('2d');\n        var x = uvBox[0] * sw,\n            y = uvBox[1] * sh;\n        if (flipY) {\n            y = map.height - y - h;\n        }\n        ctx.drawImage(map, -x, -y);\n        return cv;\n    }\n\n    /**\n     * \n     * @param {HTMLImageElement|HTMLCanvasElement} img \n     * @param {number} angle in degrees\n     * @returns {HTMLCanvasElement}\n     */\n    static rotate(img, angle) {\n        var c = document.createElement(\"canvas\");\n        c.width = img.width\n        c.height = img.height;\n\n        var ctx = c.getContext(\"2d\");\n        ctx.translate(c.width / 2, c.height / 2);\n        ctx.rotate(angle * Math.PI / 180);\n        ctx.translate(-c.width / 2, -c.height / 2);\n\n        ctx.drawImage(img, 0, 0)\n        return c;\n    }\n\n    /**\n     * \n     * @param {HTMLImageElement|HTMLCanvasElement} img \n     * @param {string} text \n     * @param {object} [options] \n     * @param {string} [options.font] \n     * @param {string} [options.color]\n     * @param {number} [options.x]\n     * @param {number} [options.y]\n     * @returns {HTMLCanvasElement}\n     */\n    static drawText(img, text, options) {\n        options = options || {};\n\n        let cv = document.createElement('canvas')\n        cv.width = img.width;\n        cv.height = img.height;\n\n        let x = typeof options.x == 'number' ? options.x : cv.width / 2,\n            y = typeof options.y == 'number' ? options.y : cv.height / 2;\n\n        let ctx = cv.getContext('2d')\n        ctx.drawImage(img, 0, 0);\n        ctx.fillStyle = options.color;\n        ctx.font = options.font\n        ctx.fillText(text, x, y);\n        return cv;\n    }\n\n    /**\n     * \n     * @param {string} atlasImgUrl \n     * @param {(images:HTMLImageElement[])=>void} onLoad \n     */\n    static getTexturesFromAtlasFile(atlasImgUrl, onLoad) {\n\n        var textures = [];\n\n        var imageObj = new Image();\n\n        imageObj.onload = function () {\n\n            var canvas, context;\n            var tileWidth = imageObj.height, tilesNum = imageObj.width / tileWidth;\n\n            for (var i = 0; i < tilesNum; i++) {\n\n                canvas = document.createElement('canvas');\n                context = canvas.getContext('2d');\n                canvas.height = tileWidth;\n                canvas.width = tileWidth;\n                context.drawImage(imageObj, tileWidth * i, 0, tileWidth, tileWidth, 0, 0, tileWidth, tileWidth);\n                // textures[i].image = canvas;\n                // textures[i].needsUpdate = true;\n                textures[i] = canvas\n            }\n            if (onLoad) onLoad(textures)\n        };\n\n        imageObj.src = atlasImgUrl;\n\n        return textures\n    }\n\n    /**\n     * \n     * @param {string[]} urls \n     * @param {string[]} names \n     * @param {({\n     * positiveX:HTMLImageElement\n     * negativeX:HTMLImageElement\n     * positiveY:HTMLImageElement\n     * negativeY:HTMLImageElement\n     * positiveZ:HTMLImageElement\n     * negativeZ:HTMLImageElement\n     * })=>void} onLoad \n     * @param {(msg:string)=>void} onError \n     */\n    static getCubemapSources(urls, names, onLoad, onError) {\n        let images = urls;\n        if (!images.length) {\n            onError('未找到任何图片')\n        }\n        else {\n\n            let props = ['positiveX', 'negativeX', 'positiveY', 'negativeY', 'positiveZ', 'negativeZ']\n\n            if (images.length == 1) {\n                this.getTexturesFromAtlasFile(images[0], (images) => {\n                    if (images.length == 1) {\n                        let sources = {}\n                        props.forEach((prop, i) => {\n                            sources[prop] = images[0];\n                        })\n                        onLoad(sources);\n                    }\n                    else if (images.length < 6) {\n                        onError('单张图片的宽度必须大于等于高度的6倍')\n                    } else {\n                        let sources = {}\n                        images.forEach((img, i) => {\n                            sources[props[i]] = img;\n                        })\n                        onLoad(sources);\n                    }\n                })\n            }\n            else if (images.length < 6) {\n                onError('图片数量必须等于6');\n            } else {\n                let sources = {};\n                images.forEach((img, i) => {\n                    let name = Path.ChangeExtension(names[i], '').toLowerCase()\n\n                    if (/(nx|negx)/.test(name)) {\n                        sources.negativeX = img;\n                    }\n                    else if (/(px|posx)/.test(name)) {\n                        sources.positiveX = img\n\n                    }\n                    else if (/(ny|negy)/.test(name)) {\n                        sources.negativeY = img\n                    }\n                    else if (/(py|posy)/.test(name)) {\n                        sources.positiveY = img\n\n                    }\n                    else if (/(nz|negz)/.test(name)) {\n                        sources.negativeZ = img\n                    }\n                    else if (/(pz|posz)/.test(name)) {\n                        sources.positiveZ = img\n                    }\n\n                })\n                if (!sources.positiveX) {\n                    onError('找不到【左面】贴图，请确认包含命名为“px.<文件扩展名>”的图片')\n                    return\n                }\n                if (!sources.negativeX) {\n                    onError('找不到【右面】贴图，请确认包含命名为“nx.<文件扩展名>”的图片')\n                    return\n                }\n                if (!sources.negativeZ) {\n                    onError('找不到【前面】贴图，请确认包含命名为“nz.<文件扩展名>”的图片')\n                    return\n                }\n                if (!sources.positiveZ) {\n                    onError('找不到【后面】贴图，请确认包含命名为“pz.<文件扩展名>”的图片')\n                    return\n                }\n                if (!sources.positiveY) {\n                    onError('找不到【上面】贴图，请确认包含命名为“py.<文件扩展名>”的图片')\n                    return\n                }\n                if (!sources.negativeY) {\n                    onError('找不到【下面】贴图，请确认包含命名为“ny.<文件扩展名>”的图片')\n                    return\n                }\n\n                new GenericWorker(props.slice(), prop => {\n                    return new Promise((resolve, reject) => {\n                        let img = new Image();\n                        img.crossOrigin = '';\n                        img.onload = function () {\n                            resolve(img)\n                        }\n                        img.onerror = reject;\n                        img.src = sources[prop]\n                    })\n                }).run().then(images => {\n\n                    for (let i = 0; i < props.length; i++) {\n                        const prop = props[i], img = images[i];\n                        sources[prop] = img;\n                    }\n                    onLoad(sources);\n                })\n\n            }\n        }\n    }\n}",
    "\n// var angleBetweenScratch = new Cartesian2(), angleBetweenScratch2 = new Cartesian2();\n// const DEGREES_PER_RADIAN = 180.0 / Math.PI;\n\nexport default class MathUtils {\n    static add(arg1, arg2) {\n        var r1, r2, m;\n        try {\n            r1 = arg1.toString().split(\".\")[1].length;\n            r2 = arg2.toString().split(\".\")[1].length;\n        } catch (e) {\n            r1 = 0; r2 = 0;\n        }\n        m = Math.pow(10, Math.max(r1, r2));\n\n        return (arg1 * m + arg2 * m) / m;\n    }\n    static sub(arg1, arg2) {\n        return this.add(arg1, -arg2);\n    }\n    static mul(arg1, arg2) {\n        var r1, r2, m;\n        try {\n            //取小数位长度\n            r1 = arg1.toString().split(\".\")[1].length;\n            r2 = arg2.toString().split(\".\")[1].length;\n        } catch (e) {\n            r1 = 0; r2 = 0;\n        }\n        m = Math.pow(10, Math.max(r1, r2));\t\t//计算因子\n\n        return (arg1 * m) * (arg2 * m) / (m * m);\n    }\n    static div(arg1, arg2) {\n        if (arg2 == 0) return 0;\n        var t1 = 0, t2 = 0, r1, r2;\n        try {\n            t1 = arg1.toString().split(\".\")[1].length;\n            t2 = arg2.toString().split(\".\")[1].length;\n        } catch (e) { }\n\n        // with (Math) {\n        r1 = Number(arg1.toString().replace(\".\", \"\"));\n        r2 = Number(arg2.toString().replace(\".\", \"\"));\n        // }\n\n        return (r1 / r2) * Math.pow(10, t2 - t1);\n    }\n    /**\n     * \n     * @param {number[]} arr \n     * @param {number} [offset=0]\n     * @param {number} [stride=1]  \n     * @returns {{min:number,max:number}} {min,max}\n     */\n    static minmax(arr, offset, stride) {\n        offset = offset || 0;\n        stride = stride || 1;\n        let min = Number.MAX_VALUE, max = -Number.MAX_VALUE;\n        for (let i = offset; i < arr.length; i += stride) {\n            const v = arr[i];\n            if (isNaN(v) || v == Infinity || v == -Infinity) continue;\n            min = Math.min(min, v);\n            max = Math.max(max, v);\n        }\n        return { min, max }\n    }\n\n    /**\n     * \n     * @param {Cesium.Cartesian2} p1 \n     * @param {Cesium.Cartesian2} p2 \n     * @param {Cesium.Cartesian2} p3 \n     * @param {Cesium.Cartesian2} p4 \n     * @param {Cesium.Cartesian2} crossPoint \n     * @returns {number}\n     * @example\n     * p1    p3\n     *   \\   /\n     *    \\ /\n     *  crossPoint\n     *    / \\\n     *   /   \\\n     *  p4   p2\n     * \n     */\n    static findCrossPoint(p1, p2, p3, p4, crossPoint, onSegments) {\n        //****************************************************************************************\n        //  求二条直线的交点的公式\n        //  有如下方程 (x-x1)/(y-y1) = (x2-x1)/(y2-y1) ==> a1*x+b1*y=c1\n        //            (x-x3)/(y-y3) = (x4-x3)/(y4-y3) ==> a2*x+b2*y=c2\n        //  则交点为\n        //                x= | c1 b1|  / | a1 b1 |      y= | a1 c1| / | a1 b1 |\n        //                   | c2 b2|  / | a2 b2 |         | a2 c2| / | a2 b2 |\n        //\n        //   a1= y2-y1\n        //   b1= x1-x2\n        //   c1= x1*y2-x2*y1\n        //   a2= y4-y3\n        //   b2= x3-x4\n        //   c2= x3*y4-x4*y3\n\n        // if (typeof Decimal != 'undefined') {\n        //     var x1 = Decimal(p1.x), x2 = Decimal(p2.x), x3 = Decimal(p3.x), x4 = Decimal(p4.x);\n        //     var y1 = Decimal(p1.y), y2 = Decimal(p2.y), y3 = Decimal(p3.y), y4 = Decimal(p4.y);\n        //     var a1 = y2.sub(y1)\n        //     var b1 = x1.sub(x2)\n        //     var c1 = x1.mul(y2).sub(x2.mul(y1))\n        //     var a2 = y4.sub(y3)\n        //     var b2 = x3.sub(x4)\n        //     var c2 = x3.mul(y4).sub(x4.mul(y3))\n        //     var det = a1.mul(b2).sub(a2.mul(b1));\n\n        //     if (det.equals(0)) {\n        //         return 0;\n        //     }\n\n        //     var x = (c1.mul(b2).sub(c2.mul(b1))).div(det);\n        //     var y = (a1.mul(c2).sub(a2.mul(c1))).div(det);\n\n        //     crossPoint.x = x.toNumber();\n        //     crossPoint.y = y.toNumber();\n\n        //     if (!onSegments) {\n        //         return det.toNumber();\n        //     }\n\n        //     // Now this is cross point of lines\n        //     // Do we need the cross Point of segments(need to judge x,y within 4 endpoints)\n        //     // 是否要判断线段相交 \n        //     if ( x.sub( x1.add(x2).div(2.) ).abs().lessThanOrEqualTo( ( x2.sub(x1) ).abs().div(2.) ) &&\n        //          y.sub( y1.add(y2).div(2.) ).abs().lessThanOrEqualTo( ( y2.sub(y1) ).abs().div(2.) ) &&\n        //          x.sub( x3.add(x4).div(2.) ).abs().lessThanOrEqualTo( ( x4.sub(x3) ).abs().div(2.) ) &&\n        //          y.sub( y3.add(y4).div(2.) ).abs().lessThanOrEqualTo( ( y4.sub(y3) ).abs().div(2.) )) {\n        //         return det.toNumber();\n        //     } else {\n        //         return 0;\n        //     }\n        // } else {\n        var x1 = p1.x, x2 = p2.x, x3 = p3.x, x4 = p4.x;\n        var y1 = p1.y, y2 = p2.y, y3 = p3.y, y4 = p4.y;\n        var a1 = y2 - y1\n        var b1 = x1 - x2\n        var c1 = x1 * y2 - x2 * y1\n        var a2 = y4 - y3\n        var b2 = x3 - x4\n        var c2 = x3 * y4 - x4 * y3\n        var det = a1 * b2 - a2 * b1;\n\n        if (det == 0) {\n            return det;\n        }\n\n        crossPoint.x = (c1 * b2 - c2 * b1) / det;\n        crossPoint.y = (a1 * c2 - a2 * c1) / det;\n\n        if (!onSegments) {\n            return det;\n        }\n\n        var abs = Math.abs;\n        // Now this is cross point of lines\n        // Do we need the cross Point of segments(need to judge x,y within 4 endpoints)\n        // 是否要判断线段相交 \n        if ((abs(crossPoint.x - (x1 + x2) / 2.) <= abs(x2 - x1) / 2.) &&\n            (abs(crossPoint.y - (y1 + y2) / 2.) <= abs(y2 - y1) / 2.) &&\n            (abs(crossPoint.x - (x3 + x4) / 2.) <= abs(x4 - x3) / 2.) &&\n            (abs(crossPoint.y - (y3 + y4) / 2.) <= abs(y4 - y3) / 2.)) {\n            return det;\n        } else {\n            return 0;\n        }\n        // }\n    }\n\n    static getDigits(num) {\n        var str = num.toString().split('.')[1];\n        return str ? str.length : 0;\n    }\n    static clampToLine(q, p1, p2) {\n        const Cartesian2 = Cesium.Cartesian2;\n        const v1 = Cartesian2.subtract(q, p1, new Cartesian2())\n        const v2 = Cartesian2.subtract(p2, p1, new Cartesian2())\n        const det = v1.x * v2.y - v2.x * v1.y;\n        if (Math.abs(det) < 1e-16) return q;\n        var d = Cartesian2.magnitude(v1);\n        var angle = Cartesian2.angleBetween(v1, v2);\n        if (angle < 1e-16) return q;\n        // d = Math.cos(angle) * d;\n        Cartesian2.normalize(v2, v2);\n        Cartesian2.multiplyByScalar(v2, d, v2);\n        return Cartesian2.add(p1, v2, q);\n    }\n\n    static distanceToSegment(q, p1, p2) {\n        const Cartesian2 = Cesium.Cartesian2, _Math = Cesium.Math;\n        let v1 = Cartesian2.subtract(q, p1, new Cartesian2())\n        let v2 = Cartesian2.subtract(p2, p1, new Cartesian2());\n        var d = Cartesian2.magnitude(v1);\n        if (Math.abs(d) <= 1e-16) return d;\n        let angle = Cartesian2.angleBetween(v1, v2);\n        d = Math.sin(angle) * d;\n        return d;\n    }\n\n    /**\n     * \n     * @param {{x:number,y:number}} a \n     * @param {{x:number,y:number}} b \n     * @param {{x:number,y:number}} c \n     * @returns {{x:number,y:number,r:number,r2:number}} {x:number,y:number,r:number,r2:number}\n     */\n    static circumcircle(a, b, c) {\n        var A = b.x - a.x;\n        var B = b.y - a.y;\n        var C = c.x - a.x;\n        var D = c.y - a.y;\n        var E = A * (a.x + b.x) + B * (a.y + b.y);\n        var F = C * (a.x + c.x) + D * (a.y + c.y);\n        var G = 2 * (A * (c.y - b.y) - B * (c.x - b.x));\n        var dx;\n        var dy;\n        // If the points of the triangle are collinear, then just find the\n        // extremes and use the midpoint as the center of the circumcircle.\n\n        var x = (D * E - B * F) / G;\n        var y = (A * F - C * E) / G;\n        dx = x - a.x;\n        dy = y - a.y;\n        var r2 = dx * dx + dy * dy;\n        var r = Math.sqrt(r2)\n        return {\n            x, y, r, r2\n        }\n    }\n\n    /**\n     * 判断q点是否在p1,p2线段上（误差用qp1与p2q的夹角表示，默认误差为1度）\n     * @param {{x:number,y:number}} q \n     * @param {{x:number,y:number}} p1 \n     * @param {{x:number,y:number}} p2 \n     * @param {number}[epsilon=1e-6]\n     * @param {number}[epsilonAngle=1] in deg\n     * @returns {boolean}\n     */\n    static pointOnSegment(q, p1, p2, epsilon, epsilonAngle) {\n\n        const { min, max, abs } = Math;\n        epsilon = (epsilon == undefined || epsilon == null) ? 1e-8 : epsilon;\n        epsilonAngle = (epsilonAngle == undefined || epsilonAngle == null) ? 1 : epsilonAngle;\n\n        var minX = min(p1.x, p2.x), maxX = max(p1.x, p2.x);\n        var minY = min(p1.y, p2.y), maxY = max(p1.y, p2.y);\n\n        //保证Q点坐标在P1P2之间\n        if (minX - epsilon <= q.x && q.x <= maxX + epsilon &&\n            minY - epsilon <= q.y && q.y <= maxY + epsilon\n        ) {\n            //叉乘\n            const Cartesian2 = Cesium.Cartesian2, _Math = Cesium.Math;\n            let v1 = Cartesian2.subtract(q, p1, new Cartesian2())\n            let v2 = Cartesian2.subtract(p2, p1, new Cartesian2())\n            const a = v1.x * v2.y, b = v2.x * v1.y, delt = abs(a - b);\n            if (delt < 1e-16) return true;\n            let angle = Cartesian2.angleBetween(v1, v2);\n            angle = _Math.toDegrees(angle);\n            return angle <= epsilonAngle;\n        }\n        return false\n    }\n\n    /**\n     * \n     * @param {{x:number,y:number}} point \n     * @param {{x:number,y:number}[]} vs \n     * @returns {boolean}\n     */\n    static pointInPolygon(point, vs) {\n        const l = vs.length;\n        const x = point.x, y = point.y;\n        let inside = false;\n        for (let i = 0, j = l - 1; i < l; j = i++) {\n            const xi = vs[i].x, yi = vs[i].y;\n            const xj = vs[j].x, yj = vs[j].y;\n\n            const intersect = ((yi > y) != (yj > y))\n                && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n            if (intersect) inside = !inside;\n        }\n\n        return inside;\n    }\n\n    static pointOnTriangle(p, p1, p2, p3) {\n        var onTriangle = MathUtils.pointOnSegment(p, p1, p2)\n        if (!onTriangle) return false;\n        onTriangle = MathUtils.pointOnSegment(p, p1, p3)\n        if (!onTriangle) return false;\n        onTriangle = MathUtils.pointOnSegment(p, p2, p3)\n        return onTriangle;\n    }\n\n}",
    "import { fromByteArray, toByteArray } from  \"../../../base64-js/index.js\";\n\nimport GenericWorker from  \"./GenericWorker.js\";\n\nimport isTypedArray from  \"./isTypedArray.js\";\n\nimport mergeBuffers from  \"./mergeBuffers.js\";\n\n\n/* \n 提供一组对json对象进行编码和解码的方法，用于压缩json对象大小\n*/\n\nfunction storeString(str, strMap, strDic) {\n    let code = strDic.length;\n    if (strMap.has(str)) {\n        code = strMap.get(str)\n    } else {\n        strMap.set(str, code);\n        strDic.push(str)\n    }\n    return code;\n}\n\nexport function encodeObjectValues(obj, strMap, strDic) {\n\n    for (const code in obj) {\n        if (obj.hasOwnProperty(code)) {\n            if (!Object.isExtensible(obj)) {\n                debugger\n                continue;\n            }\n            var val = obj[code];\n            let name = strDic[code];\n            let newCode = strDic.length.toString();\n\n            if (\n                (typeof val == 'string' && val.length > newCode.length)\n                || name == 'color' || name == 'matrix'\n            ) {\n                if (name == 'matrix') {\n                    val = val.join(',')\n                }\n                if (strMap.has(val)) {\n                    val = '$' + strMap.get(val);\n                } else {\n                    val = '$' + storeString(val, strMap, strDic);\n                }\n            }\n            else if (Array.isArray(val)) {\n                for (let i = 0; i < val.length; i++) {\n                    let v = val[i];\n                    if (typeof v == 'object') {\n                        encodeObjectValues(v, strMap, strDic)\n                    }\n                }\n\n            } else if (typeof val == 'object') {\n                encodeObjectValues(val, strMap, strDic);\n\n            }\n\n            obj[code] = val;\n        }\n    }\n\n}\n\nfunction encodeArrayTypeValue(arr, strMap, strDic) {\n    for (let i = 0; i < arr.length; i++) {\n        let v = arr[i];\n        if (Array.isArray(v)) {\n            if (typeof v[0] == 'number') continue;\n            encodeArrayTypeValue(v, strMap, strDic)\n        }\n        else if (typeof v == 'object') {\n            encodeObject(v, strMap, strDic)\n        }\n    }\n}\n\nfunction decodeArrayTypeValue(arr, codeBook) {\n    for (let i = 0; i < arr.length; i++) {\n        let v = arr[i];\n        if (Array.isArray(v)) {\n            if (typeof v[0] == 'number') continue;\n            decodeArrayTypeValue(v, codeBook)\n        }\n        else if (typeof v == 'object') {\n            decodeObject(v, codeBook)\n        }\n    }\n}\n\n/**\n * \n * @param {object} obj  \n * @returns {object}\n */\nexport function encodeObject(obj, strMap, strDic) {\n    let release = false;\n    if (!strMap) {\n        strMap = new Map();\n        strDic = [];\n        release = true;\n    }\n\n    for (const name in obj) {\n        if (obj.hasOwnProperty(name)) {\n            var val = obj[name];\n            if (isTypedArray(val)) {\n                val = Array.from(val);\n            }\n            else if (Array.isArray(val)) {\n                encodeArrayTypeValue(val, strMap, strDic);\n            } else if (typeof val == 'object') {\n                encodeObject(val, strMap, strDic)\n            } else if (name == 'type' || name == 'uuid') {\n                val = storeString(val, strMap, strDic)\n            }\n\n            let code = storeString(name, strMap, strDic)\n\n            obj[code] = val;\n            delete obj[name];\n        }\n    }\n\n    if (release) {\n        encodeObjectValues(obj, strMap, strDic);\n\n        obj.codeBook = strDic;\n        strMap.clear()\n    }\n    return obj;\n}\n\nexport function decodeObject(obj, codeBook) {\n\n    if (!codeBook) {\n        codeBook = obj.codeBook;\n        delete obj.codeBook;\n    }\n\n    for (const code in obj) {\n        if (obj.hasOwnProperty(code)) {\n            var val = obj[code];\n            let name = codeBook[code];\n\n            if (name == 'uuid' || name == 'type') {\n                val = codeBook[val];\n            }\n            else if (typeof val == 'string' && val[0] == '$') {\n\n                val = codeBook[val.slice(1)];\n                if (name == 'matrix') {\n                    val = JSON.parse('[' + val + ']');\n\n                } else if (Array.isArray(val)) {\n                    decodeArrayTypeValue(val, codeBook);\n\n                } else if (typeof val == 'object') {\n                    decodeObject(val, codeBook);\n\n                }\n            }\n            else if (Array.isArray(val)) {\n                decodeArrayTypeValue(val, codeBook);\n\n            } else if (typeof val == 'object') {\n                decodeObject(val, codeBook);\n\n            }\n\n            obj[name || code] = val;\n            if (name) delete obj[code];\n        }\n    }\n\n    return obj;\n}\n\n\n/**\n * \n * @param {Array} coordinates \n * @param {ArrayBuffer} bufferList \n */\nexport function encodeGeojsonCoords(coordinates, bufferList) {\n\n    if (typeof coordinates[0][0] == 'number') {\n        if (bufferList.length == 0) {\n            bufferList.byteLength = 0;\n        }\n\n        let count = coordinates.length, buffer = [];\n        coordinates.forEach(coord => {\n            buffer.push(coord[0], coord[1]);\n        });\n\n        buffer = new Float32Array(buffer).buffer;\n        let byteLength = buffer.byteLength,\n            byteOffset = bufferList.byteLength;\n\n        bufferList.push(buffer);\n        bufferList.byteLength += byteLength;\n\n        return {\n            byteOffset, count\n        }\n    } else {\n        for (let i = 0; i < coordinates.length; i++) {\n            coordinates[i] = encodeGeojsonCoords(coordinates[i], bufferList)\n        }\n        return coordinates;\n    }\n}\n\n/**\n * \n * @param {{byteOffset,count}[]} coordinates \n * @param {Uint8Array|ArrayBuffer} buffer \n */\nexport function decodeGeojsonCoords(coordinates, buffer) {\n    if (!coordinates) {\n        debugger\n    }\n    if (typeof coordinates.byteOffset == 'number') {\n        let { byteOffset, count } = coordinates;\n        let array = new Float32Array(buffer.buffer || buffer, byteOffset, count * 2);\n\n        coordinates = [];\n        for (let i = 0; i < array.length; i += 2) {\n            coordinates.push([array[i], array[i + 1]]);\n        }\n    } else {\n        for (let i = 0; i < coordinates.length; i++) {\n            coordinates[i] = decodeGeojsonCoords(coordinates[i], buffer)\n        }\n    }\n    return coordinates;\n}\n\n/**\n * \n * @param {geojson.Feature|geojson.FeatureCollection} geojson  \n */\nexport function encodeGeojson(geojson) {\n\n    console.time('encodeGeojsonCoords');\n\n    let bufferList = [];\n    if (geojson.type == 'FeatureCollection') {\n        geojson.features.forEach(feature => {\n            if (!feature.geometry) return;\n            encodeGeojsonCoords(feature.geometry.coordinates, bufferList);\n        })\n    } else if (geojson.type == 'Feature') {\n        if (geojson.geometry) {\n            encodeGeojsonCoords(geojson.geometry.coordinates, bufferList);\n        }\n    }\n    console.timeEnd('encodeGeojsonCoords');\n\n    console.time('encodeObject');\n\n    geojson = encodeObject(geojson);\n\n    console.timeEnd('encodeObject');\n\n    console.time('mergeBuffers');\n    geojson.buffer = mergeBuffers(bufferList);\n    console.timeEnd('mergeBuffers');\n\n    console.time('fromByteArray');\n    geojson.buffer = fromByteArray(new Uint8Array(geojson.buffer))\n    console.timeEnd('fromByteArray');\n    return geojson;\n}\n\n\nexport function decodeGeojson(geojson) {\n\n    console.time('decodeObject');\n    if (geojson.codeBook) {\n        let codeBook = geojson.codeBook\n        for (const code in geojson) {\n            if (geojson.hasOwnProperty(code)) {\n                let name = codeBook[code];\n                if (name) {\n                    geojson[name] = geojson[code];\n                    delete geojson[code];\n                }\n            }\n        }\n\n        decodeObject(geojson);\n    }\n    console.timeEnd('decodeObject');\n\n    let buffer = geojson.buffer;\n    delete geojson.buffer;\n    if (buffer) {\n\n        console.time('toByteArray');\n        buffer = toByteArray(buffer);\n        console.timeEnd('toByteArray');\n\n        console.time('decodeGeojsonCoords');\n\n        if (geojson.type == 'FeatureCollection') {\n            let features = geojson.features;\n\n            features.forEach((feature, id) => {\n                let geometry = feature.geometry\n                if (geometry) {\n                    geometry.coordinates = decodeGeojsonCoords(geometry.coordinates, buffer);\n                }\n            })\n        } else if (geojson.type == 'Feature') {\n            let geometry = geojson.geometry\n            if (geometry) {\n                geometry.coordinates = decodeGeojsonCoords(geometry.coordinates, buffer);\n            }\n        }\n\n        console.timeEnd('decodeGeojsonCoords');\n\n        delete geojson.buffer\n    }\n\n    return geojson;\n}\n\n/**\n * \n * @param {geojson.Feature|geojson.FeatureCollection} geojson \n * @param {(progress)=>void} onProress  \n */\nexport function decodeGeojsonCoordsAsync(geojson, onProress, totalProgress) {\n    totalProgress = totalProgress || 0;\n\n    let buffer = geojson.buffer;\n    delete geojson.buffer;\n\n    console.time('toByteArray');\n    buffer = toByteArray(buffer);\n    console.timeEnd('toByteArray');\n\n    console.time('decodeGeojsonCoords');\n\n    if (geojson.type == 'FeatureCollection') {\n        let features = geojson.features;\n        let batchList = [], batch = [],\n            batchSize = features.length > 10000 ? features.length / 80 : features.length / 40;\n\n        batchList.push(batch);\n\n        features.forEach((feature, id) => {\n            let geometry = feature.geometry\n            if (!geometry) return;\n            if (batch.length > batchSize) {\n                batch = [];\n                batchList.push(batch);\n            }\n            batch.push(feature);\n        });\n\n        return new GenericWorker(batchList, batch => {\n            batch.forEach(feature => {\n                let geometry = feature.geometry\n                geometry.coordinates = decodeGeojsonCoords(geometry.coordinates, buffer);\n            });\n        }).run(progress => {\n            if (onProress) onProress(totalProgress + progress * 0.5);\n\n        }).then(() => {\n            console.timeEnd('decodeGeojsonCoords');\n\n            totalProgress = 100;\n            if (onProress) onProress(totalProgress);\n            return geojson;\n        });\n\n    } else if (geojson.type == 'Feature') {\n        let geometry = geojson.geometry\n        if (geometry) {\n            geometry.coordinates = decodeGeojsonCoords(geometry.coordinates, buffer);\n        }\n    }\n\n    console.timeEnd('decodeGeojsonCoords');\n    return Promise.resolve(geojson);\n}\n\n/**\n * \n * @param {geojson.Feature|geojson.FeatureCollection} geojson \n * @param {(progress)=>void} onProress  \n */\nexport function decodeGeojsonAsync(geojson, onProress) {\n\n    if (geojson.codeBook) {\n        console.time('decodeObject');\n        let codeBook = geojson.codeBook;\n        delete geojson.codeBook;\n\n        for (const code in geojson) {\n            if (geojson.hasOwnProperty(code)) {\n                let name = codeBook[code],\n                    vCode = geojson[code],\n                    v = codeBook[vCode];\n\n                if (typeof v != 'undefined') geojson[code] = v;\n\n                if (name) {\n                    geojson[name] = geojson[code];\n                    delete geojson[code];\n                }\n            }\n        }\n\n        if (geojson.type == 'Feature') {\n            decodeObject(geojson);\n        } else {\n\n            let features = geojson.features,\n                batchList = [], batch = [], totalProgress = 0,\n                batchSize = features.length > 10000 ? features.length / 80 : features.length / 40;\n\n            batchList.push(batch);\n\n            let geometryCode = codeBook.indexOf('geometry');\n            features.forEach((feature, id) => {\n                let geometry = feature[geometryCode]\n                if (geometry) {\n                    if (batch.length > batchSize) {\n                        batch = [];\n                        batchList.push(batch);\n                    }\n                    batch.push(feature);\n                }\n            });\n\n            return new GenericWorker(batchList, batch => {\n                batch.forEach(feature => {\n                    decodeObject(feature, codeBook);\n                });\n\n            }).run(progress => {\n                totalProgress = progress * 0.5;\n                if (onProress) onProress(totalProgress);\n            }).then(() => {\n                console.timeEnd('decodeObject');\n\n                totalProgress = 50;\n                if (onProress) onProress(totalProgress);\n\n                return decodeGeojsonCoordsAsync(geojson, onProress, totalProgress)\n            });\n        }\n    }\n\n    if (geojson.buffer) return decodeGeojsonCoordsAsync(geojson);\n\n    return Promise.resolve(geojson);\n}",
    "\n/**\n*@class\n*@memberof Cesium\n*/\nfunction Path() { }\n/**\n*\n*获取文件扩展名（后缀）\n*@param {String}fname 文件名\n*/\nPath.GetExtension = function (fname) {\n    var start = fname.lastIndexOf(\".\");\n    if (start >= 0) {\n        return fname.substring(start, fname.length);\n    }\n    return \"\";\n}\n\n/**\n*\n*获取文件扩展名（后缀）\n*@param {String}fname 文件名\n*/\nPath.GetFileName = function (fname) {\n    var start = fname.lastIndexOf(\"/\");\n    if (start < 0) {\n        start = fname.lastIndexOf(\"\\\\\");\n        if (start < 0)\n            return fname;\n    }\n    return fname.substring(start + 1, fname.length);\n}\n/**\n*\n*获取文件夹\n*@param {String}fname 文件名\n*/\nPath.GetDirectoryName = function (fname) {\n    var start = fname.lastIndexOf(\"/\");\n    if (start < 0) {\n        return \"\";\n    }\n    return fname.substring(0, start);\n}\n/**\n*\n*获取文件夹\n*@param {String}fname 文件名\n*/\nPath.Combine = function (dir, fname) {\n    return dir + fname;\n}\nPath.ChangeExtension = function (fname, newExt) {\n    return fname.replace(Path.GetExtension(fname), newExt);\n}\n\nexport default Path;",
    "\nexport default class StringUtil {\n\n    /**\n     * \n     * @param {string} input\n     * @param {string|RegExp}[pattern]\n     * @returns  {string} \n     */\n    static trim(input, pattern) {\n\n        var output = \"\";\n        var start = 0, end = input.length;\n        pattern = pattern || '(\\\\s|\\\\t)+';\n        pattern = new RegExp(pattern);\n\n        while (pattern.test(input[start]) && start < input.length) start++;\n\n        var ch = input[end - 1];\n        while (pattern.test(ch) && end > 0) {\n            end--;\n            ch = input[end - 1];\n        }\n        output = input.substring(start, end);\n        return output\n    }\n\n    static paddingStart(num, length) {\n        var sign = num >= 0 ? '+' : '-';\n        num = Math.abs(num);\n        num = num + \"\";\n        var deltLen = length - num.length;\n        var arr = new Array(deltLen).fill('0').join('')\n        num = sign + arr + num;\n        return num;\n    }\n\n}",
    "/**\n * \n * @param {Cesium.Cartesian3} pa \n * @param {Cesium.Cartesian3} pb \n * @param {Cesium.Cartesian3} pc \n * @returns {number}\n */\nexport default function computeArea(pa, pb, pc) {\n\n    if (!pa || !pb || !pc) {\n        console.warn(pa, pb, pc);\n        return 0;\n    }\n    const Cartesian3 = Cesium.Cartesian3\n    let a = Cartesian3.distance(pa, pb);\n    let b = Cartesian3.distance(pb, pc);\n    let c = Cartesian3.distance(pa, pc);\n\n    let p = (a + b + c) / 2, S = Math.sqrt(p * (p - a) * (p - b) * (p - c))\n    return S;\n}\n",
    "﻿\r\n/**\r\n*定义属性，并监听属性变化事件,属性值的数据类型可以实现equals接口用于进行更进一步的比较\r\n*@param {Object}owner\r\n*@param {String}name\r\n*@param {Any}defaultVal\r\n*@param {( changed: string, owner: object, newVal: any, oldVal: any )=> void } onChanged\r\n*@private\r\n*/\r\nfunction _defineProperty(owner, name, defaultVal, onChanged) {\r\n    var privateName = '_' + name;\r\n    owner[privateName] = defaultVal;\r\n\r\n    var value = {\r\n        get: function () {\r\n            return this[privateName];\r\n        },\r\n        set: function (val) {\r\n            var changed = val != this[privateName];\r\n            if (this[privateName] && this[privateName].equals && val) {\r\n                changed = this[privateName].equals(val);\r\n            }\r\n            var oldVal = this[privateName];\r\n            this[privateName] = val;\r\n            if (typeof onChanged == 'function' && changed) {\r\n                onChanged(changed, owner, val, oldVal);\r\n            }\r\n        }\r\n    };\r\n    var properties = {};\r\n    properties[name] = value;\r\n    Object.defineProperties(owner, properties)\r\n}\r\n\r\nexport default _defineProperty;",
    "\n//计算矩阵行列式\nexport default function determinant(matrix4) {\n\n    var te = matrix4;\n\n    var n11 = te[0], n12 = te[4], n13 = te[8], n14 = te[12];\n    var n21 = te[1], n22 = te[5], n23 = te[9], n24 = te[13];\n    var n31 = te[2], n32 = te[6], n33 = te[10], n34 = te[14];\n    var n41 = te[3], n42 = te[7], n43 = te[11], n44 = te[15];\n\n    //TODO: make this more efficient\n    //( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n    return (\n        n41 * (\n            + n14 * n23 * n32\n            - n13 * n24 * n32\n            - n14 * n22 * n33\n            + n12 * n24 * n33\n            + n13 * n22 * n34\n            - n12 * n23 * n34\n        ) +\n        n42 * (\n            + n11 * n23 * n34\n            - n11 * n24 * n33\n            + n14 * n21 * n33\n            - n13 * n21 * n34\n            + n13 * n24 * n31\n            - n14 * n23 * n31\n        ) +\n        n43 * (\n            + n11 * n24 * n32\n            - n11 * n22 * n34\n            - n14 * n21 * n32\n            + n12 * n21 * n34\n            + n14 * n22 * n31\n            - n12 * n24 * n31\n        ) +\n        n44 * (\n            - n13 * n22 * n31\n            - n11 * n23 * n32\n            + n11 * n22 * n33\n            + n13 * n21 * n32\n            - n12 * n21 * n33\n            + n12 * n23 * n31\n        )\n\n    );\n\n}",
    "\n/**\n * \n * @param {Function} superClass \n * @param {{constructor:Function,prototype:object,esConstructor:Function}} extendOpts \n */\nexport default function esExtends(superClass, extendOpts) {\n    let ExtendedClass;\n    const { constructor, prototype, esConstructor } = extendOpts;\n    if (superClass.prototype.constructor.toString().startsWith('class')) {\n\n        ExtendedClass = esConstructor(constructor)\n\n        for (const key in prototype) {\n            if (Object.hasOwnProperty.call(prototype, key)) {\n                ExtendedClass.prototype[key] = prototype[key];\n            }\n        }\n\n    } else {\n        ExtendedClass = function $ExtendedClass() {\n            superClass.apply(this, arguments);\n            constructor.apply(this, arguments)\n        }\n        prototype.constructor = ExtendedClass;\n\n        ExtendedClass.prototype = Object.assign(Object.create(superClass.prototype), prototype);\n\n    }\n\n    return ExtendedClass;\n}",
    "\nexport default class geojsonHelper {\n\n    static area(contour) {\n\n        const n = contour.length;\n        let a = 0.0;\n\n        for (let p = n - 1, q = 0; q < n; p = q++) {\n\n            a += contour[p][0] * contour[q][1] - contour[q][0] * contour[p][1];\n\n        }\n\n        return a * 0.5;\n\n    }\n\n    static isClockWise(pts) {\n\n        return geojsonHelper.area(pts) < 0;\n\n    }\n    /**\n     * \n     * @param {geojson.Feature|geojson.FeatureCollection} geojson \n     * @param {(feature:geojson.Feature,featureId:number)=>vod} callback \n     */\n    static featureEach(geojson, callback) {\n        if (geojson.type == 'Feature') {\n            callback(geojson, 0)\n        } else {\n            geojson.features\n            for (let i = 0; i < geojson.features.length; i++) {\n                const feature = geojson.features[i];\n                callback(feature, i);\n            }\n        }\n    }\n\n    /**\n     * \n     * @param {geojson.Feature|geojson.FeatureCollection|geojson.IPoint|geojson.Shape|geojson.MultiGeometry} geojson \n     * @param {(feature:geojson.Shape|geojson.IPoint,featureId:number,geometryId:number)=>vod} callback \n     */\n    static geometryEach(geojson, callback) {\n        let type = geojson.type\n        if (type == 'Feature' || type == 'FeatureCollection') {\n\n            this.featureEach(geojson, (feature, featureId) => {\n\n                let geometry = feature.geometry;\n                let geomType = geometry.type;\n                if (geomType == 'MultiGeometry') {\n                    geometry.geometry.forEach((geometry, geometryId) => {\n                        callback(geometry, featureId, geometryId)\n                    })\n                }\n                else {\n                    callback(geometry, featureId, 0);\n                }\n\n            })\n\n        } else {\n\n            let geometry = geojson;\n            let geomType = type;\n            if (geomType == 'MultiGeometry') {\n                geometry.geometry.forEach((geometry, geometryId) => {\n                    callback(geometry, 0, geometryId)\n                })\n            }\n            else {\n                callback(geometry, 0, 0);\n            }\n\n        }\n    }\n    /**\n     * \n     * @param {geojson.Feature|geojson.FeatureCollection|geojson.IPoint|geojson.Shape|geojson.MultiGeometry} geojson \n     * @param {(coordinate:number[])=>void} callback \n     */\n    static coordinateEach(geojson, callback) {\n        this.geometryEach(geojson, (geometry, featureId, geometryId) => {\n            let geomType = geometry.type;\n            let coordinates = geometry.coordinates;\n\n            if (geomType == 'LineString' || geomType == 'MultiPoint') {\n                coordinates.forEach(callback);\n\n            } else if (geomType == 'MultiLineString' || geomType == 'Polygon') {\n                coordinates.forEach((line) => {\n                    line.forEach(callback);\n                });\n\n            } else if (geomType == 'Point') {\n                callback(coordinates);\n\n            } else if (geomType == 'MultiPolygon') {\n\n                coordinates.forEach(polygon => {\n                    polygon.forEach(contour => {\n                        contour.forEach(callback);\n                    })\n                });\n\n            }\n\n        });\n\n    }\n\n    /**\n     *  @param {geojson.Feature|geojson.FeatureCollection} geojson  \n     */\n    static calcBBox(geojson) {\n        let globalBbox = [Number.MAX_VALUE, Number.MAX_VALUE, -Number.MAX_VALUE, -Number.MAX_VALUE];\n        this.featureEach(geojson, feature => {\n            if (!feature || !feature.geometry) return;\n            let bbox = feature.geometry.bbox;\n            if (bbox) {\n                var nums = bbox.filter(n => {\n                    if (!isNaN(n)) return n;\n                })\n                if (nums.length == 0) return\n            }\n\n            let min = [], max = [];\n            this.coordinateEach(feature, coordinate => {\n\n                if (min.length > 0) {\n                    min[0] = Math.min(coordinate[0], min[0]);\n                    min[1] = Math.min(coordinate[1], min[1]);\n                    max[0] = Math.max(coordinate[0], max[0]);\n                    max[1] = Math.max(coordinate[1], max[1]);\n\n                } else {\n                    min[0] = coordinate[0];\n                    min[1] = coordinate[1];\n                    max[0] = coordinate[0];\n                    max[1] = coordinate[1];\n                }\n            })\n            feature.geometry.bbox = [min[0], min[1], max[0], max[1]];\n\n            globalBbox[0] = Math.min(globalBbox[0], min[0])\n            globalBbox[1] = Math.min(globalBbox[1], min[1])\n            globalBbox[2] = Math.max(globalBbox[2], max[0])\n            globalBbox[3] = Math.max(globalBbox[3], max[1])\n\n        })\n        return globalBbox\n    }\n}\n",
    "\nexport default function isTypedArray(obj) {\n    return obj instanceof Float32Array\n        || obj instanceof Float64Array\n        || obj instanceof Int32Array\n        || obj instanceof Uint32Array\n        || obj instanceof Int16Array\n        || obj instanceof Uint16Array\n        || obj instanceof Int8Array\n        || obj instanceof Uint8Array\n        || obj instanceof Uint8ClampedArray\n}",
    "\n\nfunction find_crossPoint(p1, p2, p3, p4, crossPoint) {\n    //****************************************************************************************\n    //  求二条直线的交点的公式\n    //  有如下方程 (x-x1)/(y-y1) = (x2-x1)/(y2-y1) ==> a1*x+b1*y=c1\n    //            (x-x3)/(y-y3) = (x4-x3)/(y4-y3) ==> a2*x+b2*y=c2\n    //  则交点为\n    //                x= | c1 b1|  / | a1 b1 |      y= | a1 c1| / | a1 b1 |\n    //                   | c2 b2|  / | a2 b2 |         | a2 c2| / | a2 b2 |\n    //\n    //   a1= y2-y1\n    //   b1= x1-x2\n    //   c1= x1*y2-x2*y1\n    //   a2= y4-y3\n    //   b2= x3-x4\n    //   c2= x3*y4-x4*y3\n\n    var a1 = p2.y - p1.y;\n    var b1 = p1.x - p2.x;\n    var c1 = p1.x * p2.y - p2.x * p1.y;\n    var a2 = p4.y - p3.y;\n    var b2 = p3.x - p4.x;\n    var c2 = p3.x * p4.y - p4.x * p3.y;\n    var det = a1 * b2 - a2 * b1;\n\n    if (det == 0) return det;\n\n    crossPoint.x = (c1 * b2 - c2 * b1) / det;\n    crossPoint.y = (a1 * c2 - a2 * c1) / det;\n\n    // var abs = Math.abs\n    // Now this is cross point of lines\n    // Do we need the cross Point of segments(need to judge x,y within 4 endpoints)\n    // 是否要判断线段相交\n    // if ((abs(crossPoint.x - (p1.x + p2.x) / 2) <= abs(p2.x - p1.x) / 2) &&\n    //     (abs(crossPoint.y - (p1.y + p2.y) / 2) <= abs(p2.y - p1.y) / 2) &&\n    //     (abs(crossPoint.x - (p3.x + p4.x) / 2) <= abs(p4.x - p3.x) / 2) &&\n    //     (abs(crossPoint.y - (p3.y + p4.y) / 2) <= abs(p4.y - p3.y) / 2)) {\n    //     return true;\n    // }\n\n    return det;\n}\n\n/**\n * \n * @param {THREE.Vector2} p1 \n * @param {THREE.Vector2} p2 \n */\nfunction rotate90(p1, p2) {\n    if (!p1 || !p2) debugger\n    var dir = new THREE.Vector2().copy(p1).sub(p2).normalize();\n    dir = new THREE.Vector2(-dir.y, dir.x); //旋转90度\n    return dir;\n}\n\nfunction find_corner_dir(pt, prevPt, nextPt, lineW) {\n\n    var dir1 = rotate90(prevPt, pt);\n    var dir2 = rotate90(pt, nextPt);\n    dir1.multiplyScalar(lineW);\n    dir2.multiplyScalar(lineW);\n\n\n    var pt1 = new THREE.Vector2().copy(dir1).add(pt);\n    var pt2 = new THREE.Vector2().copy(dir2).add(pt);\n\n    var prevPt1 = new THREE.Vector2().copy(dir1).add(prevPt);\n    var nextPt2 = new THREE.Vector2().copy(dir2).add(nextPt);\n\n    var crossPt = new THREE.Vector2();\n    var det = find_crossPoint(prevPt1, pt1, pt2, nextPt2, crossPt)\n    if (!det) {\n        var dir = rotate90(prevPt, pt);\n        return dir.multiplyScalar(lineW);\n    }\n\n    var dir = crossPt.sub(pt);\n    if (checkDir(dir, lineW)) {\n        dir = rotate90(prevPt, pt);\n        return dir.multiplyScalar(lineW);\n    }\n    return dir;\n}\n\n/**\n * \n * @param {THREE.Vector2} dir \n * @param {number} lineWidth \n */\nfunction checkDir(dir, lineWidth) {\n    dir = new THREE.Vector2().copy(dir).divideScalar(lineWidth);\n    var m = dir.length();\n    return m > lineWidth * 2;\n}\n\n\n/**\n * \n * @param {Vector2} pt \n * @param {Vector2} prevPt \n * @param {Vector2} nextPt \n */\nfunction lineBufferDir3(pt, prevPt, nextPt, lineWidth) {\n\n    var centerDir;\n    if (!nextPt) {\n        centerDir = rotate90(prevPt, pt);\n        centerDir.multiplyScalar(lineWidth);\n        return centerDir;\n    } else if (!prevPt) {\n        centerDir = rotate90(nextPt, pt);\n        centerDir.multiplyScalar(lineWidth);\n        return centerDir;\n    } else {\n        centerDir = find_corner_dir(pt, prevPt, nextPt, lineWidth);\n        return centerDir;\n    }\n}\n\nexport default lineBufferDir3 ",
    "var _z, _x, _y, _m1, _m2;\nvar defaultUp = {\n    x: 0, y: 0, z: 1\n}\n/**\n * \n * @param {Cesium.Cartesian3} eye \n * @param {Cesium.Cartesian3} target \n * @param {Cesium.Cartesian3} [up] \n * @param {Cesium.Matrix4} [result] \n */\nexport default function matrix4LookAt(eye, target, up, result) {\n    if (!result) result = new Cesium.Matrix4();\n    up = up || defaultUp;\n\n \n    var Cartesian3 = Cesium.Cartesian3;\n    if (!_x) _x = new Cartesian3();\n    if (!_y) _y = new Cartesian3();\n    if (!_z) _z = new Cartesian3();\n\n    Cartesian3.subtract(target, eye, _z);// _z.subVectors(eye, target);\n    Cartesian3.normalize(_z, _z);//_z.normalize();\n    return matrix4LookDirection(_z, up, result);\n}\n\n/**\n *  \n * @param {Cesium.Cartesian3} dir \n * @param {Cesium.Cartesian3} [up] \n * @param {Cesium.Matrix4} [result] \n */\nexport function matrix4LookDirection(dir, up, result) {\n    if (!result) result = new Cesium.Matrix4();\n    up = up || defaultUp;\n\n    var te = result;\n    var Cartesian3 = Cesium.Cartesian3;\n    if (!_x) _x = new Cartesian3();\n    if (!_y) _y = new Cartesian3();\n    // if (!_z) _z = new Cartesian3();\n\n    if (dir != _z) _z = Cartesian3.clone(dir);\n    // Cartesian3.subtract(target, eye, _z);// _z.subVectors(eye, target);\n\n    if (Cartesian3.magnitudeSquared(_z) === 0) {//_z.lengthSq() === 0) {\n\n        // eye and target are in the same position\n\n        _z.z = 1;\n\n    }\n\n    Cartesian3.cross(up, _z, _x); //_x.crossVectors(up, _z);\n\n    if (Cartesian3.magnitudeSquared(_x) === 0) {//_x.lengthSq() === 0) {\n\n        // up and z are parallel\n\n        if (Math.abs(up.z) === 1) {\n\n            _z.x += 0.0001;\n\n        } else {\n\n            _z.z += 0.0001;\n\n        }\n\n        Cartesian3.normalize(_z, _z);// _z.normalize();\n        Cartesian3.cross(up, _z, _x); //_x.crossVectors(up, _z);\n\n    }\n\n    Cartesian3.normalize(_x, _x); //_x.normalize();\n    Cartesian3.cross(_z, _x, _y);//_y.crossVectors(_z, _x);\n\n    te[0] = _x.x; te[4] = _y.x; te[8] = _z.x;\n    te[1] = _x.y; te[5] = _y.y; te[9] = _z.y;\n    te[2] = _x.z; te[6] = _y.z; te[10] = _z.z;\n\n    return te;\n}",
    "/**\n * \n * @param {Array<Uint8Array|DataView|ArrayBuffer>} buffers \n * @returns {ArrayBuffer}\n */\nexport default function mergeBuffers(buffers) {\n    buffers=buffers.map(buffer => {\n        if (buffer instanceof DataView || buffer instanceof Uint8Array) {\n            return buffer.buffer\n        }\n        return buffer;\n    });\n\n    var totalByteLength = 0;\n    buffers.forEach(buffer => totalByteLength += buffer.byteLength);\n    var mergedBuffer = new Uint8Array(totalByteLength);\n    var byteOffset = 0;\n\n    buffers.forEach(buffer => {\n        mergedBuffer.set(new Uint8Array(buffer), byteOffset)\n        byteOffset += buffer.byteLength;\n    });\n    return mergedBuffer.buffer;\n}",
    "\nexport default function parseDefines(shader) {\n    let defines = [];\n    for (const key in shader.defines) {\n        if (shader.defines.hasOwnProperty(key)) {\n            const val = shader.defines[key];\n            defines.push('#define ' + key + ' ' + val)\n        }\n    }\n    defines = defines.join('\\n') + \"\\n\"\n    if (shader.fragmentShader) {\n        shader.fragmentShader = defines + shader.fragmentShader;\n    }\n    if (shader.vertexShader) {\n        shader.vertexShader = defines + shader.vertexShader;\n    }\n    return shader;\n}",
    "\nvar link ;\nfunction init$Saver() {\n    if(link)return;\n    link = document.createElement('a');\n    link.style.display = 'none';\n    document.body.appendChild(link); // Firefox workaround, see #6594\n    \n}\n\nexport function save(blob, filename) {\n    init$Saver();\n\n    link.href = URL.createObjectURL(blob);\n    link.download = filename;\n    link.click();\n\n    // URL.revokeObjectURL( url ); breaks Firefox...\n\n}\n\nexport function saveString(text, filename) {\n\n    save(new Blob([text], { type: 'text/plain' }), filename);\n\n}\n\nexport function saveArrayBuffer(buffer, filename) {\n\n    save(new Blob([buffer], { type: 'application/octet-stream' }), filename);\n\n}",
    "\n/**\n * Converts a string to an ArrayBuffer.\n * @param  {string} text\n * @return {ArrayBuffer}\n */\nexport default function stringToArrayBuffer(text) {\n\n    if (typeof TextEncoder !== 'undefined') {\n\n        return new TextEncoder().encode(text).buffer;\n\n    }\n\n    var array = new Uint8Array(new ArrayBuffer(text.length));\n\n    for (var i = 0, il = text.length; i < il; i++) {\n\n        var value = text.charCodeAt(i);\n\n        // Replacing multi-byte character with space(0x20).\n        array[i] = value > 0xFF ? 0x20 : value;\n\n    }\n\n    return array.buffer;\n\n}",
    "\n\nexport default function traverse(node, callback, parent) {\n    if (Array.isArray(node)) {\n        for (let i = 0; i < node.length; i++) {\n            const child = node[i];\n            traverse(child, callback, node);\n        }\n    }\n    else {\n        callback(node, parent);\n        const children = node.children;\n        if (!children) return;\n        const l = children.length;\n        for (let i = 0; i < l; i++) {\n            const child = children[i];\n            traverse(child, callback, node);\n        }\n    }\n}",
    "\nvar triangulate = (function () {\n    //src:http://turfjs.org/docs/#tin\n\n    var Triangle = /** @class */ (function () {\n        function Triangle(a, b, c) {\n            this.a = a;\n            this.b = b;\n            this.c = c;\n            var A = b.x - a.x;\n            var B = b.y - a.y;\n            var C = c.x - a.x;\n            var D = c.y - a.y;\n            var E = A * (a.x + b.x) + B * (a.y + b.y);\n            var F = C * (a.x + c.x) + D * (a.y + c.y);\n            var G = 2 * (A * (c.y - b.y) - B * (c.x - b.x));\n            var dx;\n            var dy;\n            // If the points of the triangle are collinear, then just find the\n            // extremes and use the midpoint as the center of the circumcircle.\n            this.x = (D * E - B * F) / G;\n            this.y = (A * F - C * E) / G;\n            dx = this.x - a.x;\n            dy = this.y - a.y;\n            this.r = dx * dx + dy * dy;\n        }\n        return Triangle;\n    }());\n    function byX(a, b) {\n        return b.x - a.x;\n    }\n    function dedup(edges) {\n        var j = edges.length;\n        var a;\n        var b;\n        var i;\n        var m;\n        var n;\n        outer: while (j) {\n            b = edges[--j];\n            a = edges[--j];\n            i = j;\n            while (i) {\n                n = edges[--i];\n                m = edges[--i];\n                if ((a === m && b === n) || (a === n && b === m)) {\n                    edges.splice(j, 2);\n                    edges.splice(i, 2);\n                    j -= 2;\n                    continue outer;\n                }\n            }\n        }\n    }\n    /**\n     * \n     * @param {(Cesium.Cartesian2|THREE.Vector2)[]} vertices \n     */\n    function triangulate(vertices) {\n        // Bail if there aren't enough vertices to form any triangles.\n        if (vertices.length < 3) {\n            return [];\n        }\n        // Ensure the vertex array is in order of descending X coordinate\n        // (which is needed to ensure a subquadratic runtime), and then find\n        // the bounding box around the points.\n        vertices.sort(byX);\n        var i = vertices.length - 1;\n        var xmin = vertices[i].x;\n        var xmax = vertices[0].x;\n        var ymin = vertices[i].y;\n        var ymax = ymin;\n        var epsilon = 1e-12;\n        var a;\n        var b;\n        var c;\n        var A;\n        var B;\n        var G;\n        while (i--) {\n            if (vertices[i].y < ymin) {\n                ymin = vertices[i].y;\n            }\n            if (vertices[i].y > ymax) {\n                ymax = vertices[i].y;\n            }\n        }\n        // Find a supertriangle, which is a triangle that surrounds all the\n        // vertices. This is used like something of a sentinel value to remove\n        // cases in the main algorithm, and is removed before we return any\n        // results.\n        // Once found, put it in the \"open\" list. (The \"open\" list is for\n        // triangles who may still need to be considered; the \"closed\" list is\n        // for triangles which do not.)\n        var dx = xmax - xmin;\n        var dy = ymax - ymin;\n        var dmax = (dx > dy) ? dx : dy;\n        var xmid = (xmax + xmin) * 0.5;\n        var ymid = (ymax + ymin) * 0.5;\n        var open = [\n            new Triangle({\n                __sentinel: true,\n                x: xmid - 20 * dmax,\n                y: ymid - dmax,\n            }, {\n                __sentinel: true,\n                x: xmid,\n                y: ymid + 20 * dmax,\n            }, {\n                __sentinel: true,\n                x: xmid + 20 * dmax,\n                y: ymid - dmax,\n            })\n        ];\n        var closed = [];\n        var edges = [];\n        var j;\n        // Incrementally add each vertex to the mesh.\n        i = vertices.length;\n        while (i--) {\n            // For each open triangle, check to see if the current point is\n            // inside it's circumcircle. If it is, remove the triangle and add\n            // it's edges to an edge list.\n            edges.length = 0;\n            j = open.length;\n            while (j--) {\n                // If this point is to the right of this triangle's circumcircle,\n                // then this triangle should never get checked again. Remove it\n                // from the open list, add it to the closed list, and skip.\n                dx = vertices[i].x - open[j].x;\n                if (dx > 0 && dx * dx > open[j].r) {\n                    closed.push(open[j]);\n                    open.splice(j, 1);\n                    continue;\n                }\n                // If not, skip this triangle.\n                dy = vertices[i].y - open[j].y;\n                if (dx * dx + dy * dy > open[j].r) {\n                    continue;\n                }\n                // Remove the triangle and add it's edges to the edge list.\n                edges.push(open[j].a, open[j].b, open[j].b, open[j].c, open[j].c, open[j].a);\n                open.splice(j, 1);\n            }\n            // Remove any doubled edges.\n            dedup(edges);\n            // Add a new triangle for each edge.\n            j = edges.length;\n            while (j) {\n                b = edges[--j];\n                a = edges[--j];\n                c = vertices[i];\n                // Avoid adding colinear triangles (which have error-prone\n                // circumcircles)\n                A = b.x - a.x;\n                B = b.y - a.y;\n                G = 2 * (A * (c.y - b.y) - B * (c.x - b.x));\n                if (Math.abs(G) > epsilon) {\n                    open.push(new Triangle(a, b, c));\n                }\n            }\n        }\n        // Copy any remaining open triangles to the closed list, and then\n        // remove any triangles that share a vertex with the supertriangle.\n        Array.prototype.push.apply(closed, open);\n        i = closed.length;\n        while (i--) {\n            if (closed[i].a.__sentinel ||\n                closed[i].b.__sentinel ||\n                closed[i].c.__sentinel) {\n                closed.splice(i, 1);\n            }\n        }\n        return closed;\n    }\n    return triangulate;\n})();\nexport default triangulate;",
    "import computeArea from  \"./Source/computeArea.js\";\n\n// import CSG from \"./Source/CSG\";\nimport defineProperty from  \"./Source/defineProperty.js\";\n\nimport determinant from  \"./Source/determinant.js\";\n\nimport esExtends from  \"./Source/esExtends.js\";\n\nimport GenericWorker from  \"./Source/GenericWorker.js\";\n\nimport geojsonHelper from  \"./Source/geojsonHelper.js\";\n\nimport ImageUtils from  \"./Source/ImageUtils.js\";\n\nimport isTypedArray from  \"./Source/isTypedArray.js\";\n\nimport lineBufferDir3 from  \"./Source/lineBufferDir3.js\";\n\nimport MathUtils from  \"./Source/MathUtils.js\";\n\nimport matrix4LookAt from  \"./Source/matrix4LookAt.js\";\n\nimport mergeBuffers from  \"./Source/mergeBuffers.js\";\n\nimport {\n    decodeGeojson, decodeGeojsonAsync, decodeGeojsonCoords, decodeGeojsonCoordsAsync, decodeObject,\n    encodeGeojson, encodeGeojsonCoords, encodeObject, encodeObjectValues\n} from  \"./Source/ObjectUtil.js\";\n\nimport parseDefines from  \"./Source/parseDefines.js\";\n\nimport Path from  \"./Source/Path.js\";\n\nimport { save, saveArrayBuffer, saveString } from  \"./Source/saver.js\";\n\nimport stringToArrayBuffer from  \"./Source/stringToArrayBuffer.js\";\n\nimport StringUtil from  \"./Source/StringUtil.js\";\n\nimport traverse from  \"./Source/traverse.js\";\n\nimport triangulate from  \"./Source/triangulate.js\";\n\nimport { getPaddedBuffer, getPaddedBufferSize } from  \"./Source/BufferUtlils.js\";\n\n\nexport {\n    computeArea,\n    // CSG,\n    defineProperty,\n    determinant, esExtends, GenericWorker,\n    geojsonHelper, ImageUtils, isTypedArray,\n    lineBufferDir3, MathUtils, matrix4LookAt,\n    mergeBuffers, parseDefines,\n    decodeGeojson, decodeGeojsonAsync, decodeGeojsonCoords, decodeGeojsonCoordsAsync, decodeObject,\n    encodeGeojson, encodeGeojsonCoords, encodeObject, encodeObjectValues,\n    Path, save, saveArrayBuffer, saveString,\n    stringToArrayBuffer, StringUtil, triangulate,\n    traverse, getPaddedBuffer, getPaddedBufferSize\n}",
    "import bearing from  \"../../../bearing/dist/es/index.js\";\n\nimport destination from  \"../../../destination/dist/es/index.js\";\n\nimport measureDistance from  \"../../../distance/dist/es/index.js\";\n\nimport { point } from  \"../../../helpers/dist/es/index.js\";\n\nimport { getGeom } from  \"../../../invariant/dist/es/index.js\";\n\n/**\n * Takes a {@link LineString} and returns a {@link Point} at a specified distance along the line.\n *\n * @name along\n * @param {Feature<LineString>} line input line\n * @param {number} distance distance along the line\n * @param {Object} [options] Optional parameters\n * @param {string} [options.units=\"kilometers\"] can be degrees, radians, miles, or kilometers\n * @returns {Feature<Point>} Point `distance` `units` along the line\n * @example\n * var line = turf.lineString([[-83, 30], [-84, 36], [-78, 41]]);\n * var options = {units: 'miles'};\n *\n * var along = turf.along(line, 200, options);\n *\n * //addToMap\n * var addToMap = [along, line]\n */\nexport default function along(line, distance, options) {\n    if (options === void 0) { options = {}; }\n    // Get Coords\n    var geom = getGeom(line);\n    var coords = geom.coordinates;\n    var travelled = 0;\n    for (var i = 0; i < coords.length; i++) {\n        if (distance >= travelled && i === coords.length - 1) {\n            break;\n        }\n        else if (travelled >= distance) {\n            var overshot = distance - travelled;\n            if (!overshot) {\n                return point(coords[i]);\n            }\n            else {\n                var direction = bearing(coords[i], coords[i - 1]) - 180;\n                var interpolated = destination(coords[i], overshot, direction, options);\n                return interpolated;\n            }\n        }\n        else {\n            travelled += measureDistance(coords[i], coords[i + 1], options);\n        }\n    }\n    return point(coords[coords.length - 1]);\n}\n",
    "import { degreesToRadians, radiansToDegrees } from  \"../../../helpers/dist/es/index.js\";\n\nimport { getCoord } from  \"../../../invariant/dist/es/index.js\";\n\n// http://en.wikipedia.org/wiki/Haversine_formula\n// http://www.movable-type.co.uk/scripts/latlong.html\n/**\n * Takes two {@link Point|points} and finds the geographic bearing between them,\n * i.e. the angle measured in degrees from the north line (0 degrees)\n *\n * @name bearing\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @param {Object} [options={}] Optional parameters\n * @param {boolean} [options.final=false] calculates the final bearing if true\n * @returns {number} bearing in decimal degrees, between -180 and 180 degrees (positive clockwise)\n * @example\n * var point1 = turf.point([-75.343, 39.984]);\n * var point2 = turf.point([-75.534, 39.123]);\n *\n * var bearing = turf.bearing(point1, point2);\n *\n * //addToMap\n * var addToMap = [point1, point2]\n * point1.properties['marker-color'] = '#f00'\n * point2.properties['marker-color'] = '#0f0'\n * point1.properties.bearing = bearing\n */\nexport default function bearing(start, end, options) {\n    if (options === void 0) { options = {}; }\n    // Reverse calculation\n    if (options.final === true) {\n        return calculateFinalBearing(start, end);\n    }\n    var coordinates1 = getCoord(start);\n    var coordinates2 = getCoord(end);\n    var lon1 = degreesToRadians(coordinates1[0]);\n    var lon2 = degreesToRadians(coordinates2[0]);\n    var lat1 = degreesToRadians(coordinates1[1]);\n    var lat2 = degreesToRadians(coordinates2[1]);\n    var a = Math.sin(lon2 - lon1) * Math.cos(lat2);\n    var b = Math.cos(lat1) * Math.sin(lat2) -\n        Math.sin(lat1) * Math.cos(lat2) * Math.cos(lon2 - lon1);\n    return radiansToDegrees(Math.atan2(a, b));\n}\n/**\n * Calculates Final Bearing\n *\n * @private\n * @param {Coord} start starting Point\n * @param {Coord} end ending Point\n * @returns {number} bearing\n */\nfunction calculateFinalBearing(start, end) {\n    // Swap start & end\n    var bear = bearing(end, start);\n    bear = (bear + 180) % 360;\n    return bear;\n}\n",
    "// http://en.wikipedia.org/wiki/Haversine_formula\n// http://www.movable-type.co.uk/scripts/latlong.html\nimport { degreesToRadians, lengthToRadians, point, radiansToDegrees, } from  \"../../../helpers/dist/es/index.js\";\n\nimport { getCoord } from  \"../../../invariant/dist/es/index.js\";\n\n/**\n * Takes a {@link Point} and calculates the location of a destination point given a distance in\n * degrees, radians, miles, or kilometers; and bearing in degrees.\n * This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.\n *\n * @name destination\n * @param {Coord} origin starting point\n * @param {number} distance distance from the origin point\n * @param {number} bearing ranging from -180 to 180\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] miles, kilometers, degrees, or radians\n * @param {Object} [options.properties={}] Translate properties to Point\n * @returns {Feature<Point>} destination point\n * @example\n * var point = turf.point([-75.343, 39.984]);\n * var distance = 50;\n * var bearing = 90;\n * var options = {units: 'miles'};\n *\n * var destination = turf.destination(point, distance, bearing, options);\n *\n * //addToMap\n * var addToMap = [point, destination]\n * destination.properties['marker-color'] = '#f00';\n * point.properties['marker-color'] = '#0f0';\n */\nexport default function destination(origin, distance, bearing, options) {\n    if (options === void 0) { options = {}; }\n    // Handle input\n    var coordinates1 = getCoord(origin);\n    var longitude1 = degreesToRadians(coordinates1[0]);\n    var latitude1 = degreesToRadians(coordinates1[1]);\n    var bearingRad = degreesToRadians(bearing);\n    var radians = lengthToRadians(distance, options.units);\n    // Main\n    var latitude2 = Math.asin(Math.sin(latitude1) * Math.cos(radians) +\n        Math.cos(latitude1) * Math.sin(radians) * Math.cos(bearingRad));\n    var longitude2 = longitude1 +\n        Math.atan2(Math.sin(bearingRad) * Math.sin(radians) * Math.cos(latitude1), Math.cos(radians) - Math.sin(latitude1) * Math.sin(latitude2));\n    var lng = radiansToDegrees(longitude2);\n    var lat = radiansToDegrees(latitude2);\n    return point([lng, lat], options.properties);\n}\n",
    "import { getCoord } from  \"../../../invariant/dist/es/index.js\";\n\nimport { radiansToLength, degreesToRadians, } from  \"../../../helpers/dist/es/index.js\";\n\n//http://en.wikipedia.org/wiki/Haversine_formula\n//http://www.movable-type.co.uk/scripts/latlong.html\n/**\n * Calculates the distance between two {@link Point|points} in degrees, radians, miles, or kilometers.\n * This uses the [Haversine formula](http://en.wikipedia.org/wiki/Haversine_formula) to account for global curvature.\n *\n * @name distance\n * @param {Coord | Point} from origin point or coordinate\n * @param {Coord | Point} to destination point or coordinate\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] can be degrees, radians, miles, or kilometers\n * @returns {number} distance between the two points\n * @example\n * var from = turf.point([-75.343, 39.984]);\n * var to = turf.point([-75.534, 39.123]);\n * var options = {units: 'miles'};\n *\n * var distance = turf.distance(from, to, options);\n *\n * //addToMap\n * var addToMap = [from, to];\n * from.properties.distance = distance;\n * to.properties.distance = distance;\n */\nfunction distance(from, to, options) {\n    if (options === void 0) { options = {}; }\n    var coordinates1 = getCoord(from);\n    var coordinates2 = getCoord(to);\n    var dLat = degreesToRadians(coordinates2[1] - coordinates1[1]);\n    var dLon = degreesToRadians(coordinates2[0] - coordinates1[0]);\n    var lat1 = degreesToRadians(coordinates1[1]);\n    var lat2 = degreesToRadians(coordinates2[1]);\n    var a = Math.pow(Math.sin(dLat / 2), 2) +\n        Math.pow(Math.sin(dLon / 2), 2) * Math.cos(lat1) * Math.cos(lat2);\n    return radiansToLength(2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)), options.units);\n}\nexport default distance;\n",
    "/**\n * @module helpers\n */\n/**\n * Earth Radius used with the Harvesine formula and approximates using a spherical (non-ellipsoid) Earth.\n *\n * @memberof helpers\n * @type {number}\n */\nexport var earthRadius = 6371008.8;\n/**\n * Unit of measurement factors using a spherical (non-ellipsoid) earth radius.\n *\n * @memberof helpers\n * @type {Object}\n */\nexport var factors = {\n    centimeters: earthRadius * 100,\n    centimetres: earthRadius * 100,\n    degrees: earthRadius / 111325,\n    feet: earthRadius * 3.28084,\n    inches: earthRadius * 39.37,\n    kilometers: earthRadius / 1000,\n    kilometres: earthRadius / 1000,\n    meters: earthRadius,\n    metres: earthRadius,\n    miles: earthRadius / 1609.344,\n    millimeters: earthRadius * 1000,\n    millimetres: earthRadius * 1000,\n    nauticalmiles: earthRadius / 1852,\n    radians: 1,\n    yards: earthRadius * 1.0936,\n};\n/**\n * Units of measurement factors based on 1 meter.\n *\n * @memberof helpers\n * @type {Object}\n */\nexport var unitsFactors = {\n    centimeters: 100,\n    centimetres: 100,\n    degrees: 1 / 111325,\n    feet: 3.28084,\n    inches: 39.37,\n    kilometers: 1 / 1000,\n    kilometres: 1 / 1000,\n    meters: 1,\n    metres: 1,\n    miles: 1 / 1609.344,\n    millimeters: 1000,\n    millimetres: 1000,\n    nauticalmiles: 1 / 1852,\n    radians: 1 / earthRadius,\n    yards: 1.0936133,\n};\n/**\n * Area of measurement factors based on 1 square meter.\n *\n * @memberof helpers\n * @type {Object}\n */\nexport var areaFactors = {\n    acres: 0.000247105,\n    centimeters: 10000,\n    centimetres: 10000,\n    feet: 10.763910417,\n    hectares: 0.0001,\n    inches: 1550.003100006,\n    kilometers: 0.000001,\n    kilometres: 0.000001,\n    meters: 1,\n    metres: 1,\n    miles: 3.86e-7,\n    millimeters: 1000000,\n    millimetres: 1000000,\n    yards: 1.195990046,\n};\n/**\n * Wraps a GeoJSON {@link Geometry} in a GeoJSON {@link Feature}.\n *\n * @name feature\n * @param {Geometry} geometry input geometry\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature} a GeoJSON Feature\n * @example\n * var geometry = {\n *   \"type\": \"Point\",\n *   \"coordinates\": [110, 50]\n * };\n *\n * var feature = turf.feature(geometry);\n *\n * //=feature\n */\nexport function feature(geom, properties, options) {\n    if (options === void 0) { options = {}; }\n    var feat = { type: \"Feature\" };\n    if (options.id === 0 || options.id) {\n        feat.id = options.id;\n    }\n    if (options.bbox) {\n        feat.bbox = options.bbox;\n    }\n    feat.properties = properties || {};\n    feat.geometry = geom;\n    return feat;\n}\n/**\n * Creates a GeoJSON {@link Geometry} from a Geometry string type & coordinates.\n * For GeometryCollection type use `helpers.geometryCollection`\n *\n * @name geometry\n * @param {string} type Geometry Type\n * @param {Array<any>} coordinates Coordinates\n * @param {Object} [options={}] Optional Parameters\n * @returns {Geometry} a GeoJSON Geometry\n * @example\n * var type = \"Point\";\n * var coordinates = [110, 50];\n * var geometry = turf.geometry(type, coordinates);\n * // => geometry\n */\nexport function geometry(type, coordinates, _options) {\n    if (_options === void 0) { _options = {}; }\n    switch (type) {\n        case \"Point\":\n            return point(coordinates).geometry;\n        case \"LineString\":\n            return lineString(coordinates).geometry;\n        case \"Polygon\":\n            return polygon(coordinates).geometry;\n        case \"MultiPoint\":\n            return multiPoint(coordinates).geometry;\n        case \"MultiLineString\":\n            return multiLineString(coordinates).geometry;\n        case \"MultiPolygon\":\n            return multiPolygon(coordinates).geometry;\n        default:\n            throw new Error(type + \" is invalid\");\n    }\n}\n/**\n * Creates a {@link Point} {@link Feature} from a Position.\n *\n * @name point\n * @param {Array<number>} coordinates longitude, latitude position (each in decimal degrees)\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Point>} a Point feature\n * @example\n * var point = turf.point([-75.343, 39.984]);\n *\n * //=point\n */\nexport function point(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    if (!coordinates) {\n        throw new Error(\"coordinates is required\");\n    }\n    if (!Array.isArray(coordinates)) {\n        throw new Error(\"coordinates must be an Array\");\n    }\n    if (coordinates.length < 2) {\n        throw new Error(\"coordinates must be at least 2 numbers long\");\n    }\n    if (!isNumber(coordinates[0]) || !isNumber(coordinates[1])) {\n        throw new Error(\"coordinates must contain numbers\");\n    }\n    var geom = {\n        type: \"Point\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Point} {@link FeatureCollection} from an Array of Point coordinates.\n *\n * @name points\n * @param {Array<Array<number>>} coordinates an array of Points\n * @param {Object} [properties={}] Translate these properties to each Feature\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north]\n * associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Point>} Point Feature\n * @example\n * var points = turf.points([\n *   [-75, 39],\n *   [-80, 45],\n *   [-78, 50]\n * ]);\n *\n * //=points\n */\nexport function points(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    return featureCollection(coordinates.map(function (coords) {\n        return point(coords, properties);\n    }), options);\n}\n/**\n * Creates a {@link Polygon} {@link Feature} from an Array of LinearRings.\n *\n * @name polygon\n * @param {Array<Array<Array<number>>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<Polygon>} Polygon Feature\n * @example\n * var polygon = turf.polygon([[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]], { name: 'poly1' });\n *\n * //=polygon\n */\nexport function polygon(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    for (var _i = 0, coordinates_1 = coordinates; _i < coordinates_1.length; _i++) {\n        var ring = coordinates_1[_i];\n        if (ring.length < 4) {\n            throw new Error(\"Each LinearRing of a Polygon must have 4 or more Positions.\");\n        }\n        for (var j = 0; j < ring[ring.length - 1].length; j++) {\n            // Check if first point of Polygon contains two numbers\n            if (ring[ring.length - 1][j] !== ring[0][j]) {\n                throw new Error(\"First and last Position are not equivalent.\");\n            }\n        }\n    }\n    var geom = {\n        type: \"Polygon\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Polygon} {@link FeatureCollection} from an Array of Polygon coordinates.\n *\n * @name polygons\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygon coordinates\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<Polygon>} Polygon FeatureCollection\n * @example\n * var polygons = turf.polygons([\n *   [[[-5, 52], [-4, 56], [-2, 51], [-7, 54], [-5, 52]]],\n *   [[[-15, 42], [-14, 46], [-12, 41], [-17, 44], [-15, 42]]],\n * ]);\n *\n * //=polygons\n */\nexport function polygons(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    return featureCollection(coordinates.map(function (coords) {\n        return polygon(coords, properties);\n    }), options);\n}\n/**\n * Creates a {@link LineString} {@link Feature} from an Array of Positions.\n *\n * @name lineString\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<LineString>} LineString Feature\n * @example\n * var linestring1 = turf.lineString([[-24, 63], [-23, 60], [-25, 65], [-20, 69]], {name: 'line 1'});\n * var linestring2 = turf.lineString([[-14, 43], [-13, 40], [-15, 45], [-10, 49]], {name: 'line 2'});\n *\n * //=linestring1\n * //=linestring2\n */\nexport function lineString(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    if (coordinates.length < 2) {\n        throw new Error(\"coordinates must be an array of two or more positions\");\n    }\n    var geom = {\n        type: \"LineString\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link LineString} {@link FeatureCollection} from an Array of LineString coordinates.\n *\n * @name lineStrings\n * @param {Array<Array<Array<number>>>} coordinates an array of LinearRings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north]\n * associated with the FeatureCollection\n * @param {string|number} [options.id] Identifier associated with the FeatureCollection\n * @returns {FeatureCollection<LineString>} LineString FeatureCollection\n * @example\n * var linestrings = turf.lineStrings([\n *   [[-24, 63], [-23, 60], [-25, 65], [-20, 69]],\n *   [[-14, 43], [-13, 40], [-15, 45], [-10, 49]]\n * ]);\n *\n * //=linestrings\n */\nexport function lineStrings(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    return featureCollection(coordinates.map(function (coords) {\n        return lineString(coords, properties);\n    }), options);\n}\n/**\n * Takes one or more {@link Feature|Features} and creates a {@link FeatureCollection}.\n *\n * @name featureCollection\n * @param {Feature[]} features input features\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {FeatureCollection} FeatureCollection of Features\n * @example\n * var locationA = turf.point([-75.343, 39.984], {name: 'Location A'});\n * var locationB = turf.point([-75.833, 39.284], {name: 'Location B'});\n * var locationC = turf.point([-75.534, 39.123], {name: 'Location C'});\n *\n * var collection = turf.featureCollection([\n *   locationA,\n *   locationB,\n *   locationC\n * ]);\n *\n * //=collection\n */\nexport function featureCollection(features, options) {\n    if (options === void 0) { options = {}; }\n    var fc = { type: \"FeatureCollection\" };\n    if (options.id) {\n        fc.id = options.id;\n    }\n    if (options.bbox) {\n        fc.bbox = options.bbox;\n    }\n    fc.features = features;\n    return fc;\n}\n/**\n * Creates a {@link Feature<MultiLineString>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiLineString\n * @param {Array<Array<Array<number>>>} coordinates an array of LineStrings\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiLineString>} a MultiLineString feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiLine = turf.multiLineString([[[0,0],[10,10]]]);\n *\n * //=multiLine\n */\nexport function multiLineString(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"MultiLineString\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Feature<MultiPoint>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPoint\n * @param {Array<Array<number>>} coordinates an array of Positions\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPoint>} a MultiPoint feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPt = turf.multiPoint([[0,0],[10,10]]);\n *\n * //=multiPt\n */\nexport function multiPoint(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"MultiPoint\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Feature<MultiPolygon>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name multiPolygon\n * @param {Array<Array<Array<Array<number>>>>} coordinates an array of Polygons\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<MultiPolygon>} a multipolygon feature\n * @throws {Error} if no coordinates are passed\n * @example\n * var multiPoly = turf.multiPolygon([[[[0,0],[0,10],[10,10],[10,0],[0,0]]]]);\n *\n * //=multiPoly\n *\n */\nexport function multiPolygon(coordinates, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"MultiPolygon\",\n        coordinates: coordinates,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Creates a {@link Feature<GeometryCollection>} based on a\n * coordinate array. Properties can be added optionally.\n *\n * @name geometryCollection\n * @param {Array<Geometry>} geometries an array of GeoJSON Geometries\n * @param {Object} [properties={}] an Object of key-value pairs to add as properties\n * @param {Object} [options={}] Optional Parameters\n * @param {Array<number>} [options.bbox] Bounding Box Array [west, south, east, north] associated with the Feature\n * @param {string|number} [options.id] Identifier associated with the Feature\n * @returns {Feature<GeometryCollection>} a GeoJSON GeometryCollection Feature\n * @example\n * var pt = turf.geometry(\"Point\", [100, 0]);\n * var line = turf.geometry(\"LineString\", [[101, 0], [102, 1]]);\n * var collection = turf.geometryCollection([pt, line]);\n *\n * // => collection\n */\nexport function geometryCollection(geometries, properties, options) {\n    if (options === void 0) { options = {}; }\n    var geom = {\n        type: \"GeometryCollection\",\n        geometries: geometries,\n    };\n    return feature(geom, properties, options);\n}\n/**\n * Round number to precision\n *\n * @param {number} num Number\n * @param {number} [precision=0] Precision\n * @returns {number} rounded number\n * @example\n * turf.round(120.4321)\n * //=120\n *\n * turf.round(120.4321, 2)\n * //=120.43\n */\nexport function round(num, precision) {\n    if (precision === void 0) { precision = 0; }\n    if (precision && !(precision >= 0)) {\n        throw new Error(\"precision must be a positive number\");\n    }\n    var multiplier = Math.pow(10, precision || 0);\n    return Math.round(num * multiplier) / multiplier;\n}\n/**\n * Convert a distance measurement (assuming a spherical Earth) from radians to a more friendly unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name radiansToLength\n * @param {number} radians in radians across the sphere\n * @param {string} [units=\"kilometers\"] can be degrees, radians, miles, inches, yards, metres,\n * meters, kilometres, kilometers.\n * @returns {number} distance\n */\nexport function radiansToLength(radians, units) {\n    if (units === void 0) { units = \"kilometers\"; }\n    var factor = factors[units];\n    if (!factor) {\n        throw new Error(units + \" units is invalid\");\n    }\n    return radians * factor;\n}\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into radians\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @name lengthToRadians\n * @param {number} distance in real units\n * @param {string} [units=\"kilometers\"] can be degrees, radians, miles, inches, yards, metres,\n * meters, kilometres, kilometers.\n * @returns {number} radians\n */\nexport function lengthToRadians(distance, units) {\n    if (units === void 0) { units = \"kilometers\"; }\n    var factor = factors[units];\n    if (!factor) {\n        throw new Error(units + \" units is invalid\");\n    }\n    return distance / factor;\n}\n/**\n * Convert a distance measurement (assuming a spherical Earth) from a real-world unit into degrees\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, centimeters, kilometres, feet\n *\n * @name lengthToDegrees\n * @param {number} distance in real units\n * @param {string} [units=\"kilometers\"] can be degrees, radians, miles, inches, yards, metres,\n * meters, kilometres, kilometers.\n * @returns {number} degrees\n */\nexport function lengthToDegrees(distance, units) {\n    return radiansToDegrees(lengthToRadians(distance, units));\n}\n/**\n * Converts any bearing angle from the north line direction (positive clockwise)\n * and returns an angle between 0-360 degrees (positive clockwise), 0 being the north line\n *\n * @name bearingToAzimuth\n * @param {number} bearing angle, between -180 and +180 degrees\n * @returns {number} angle between 0 and 360 degrees\n */\nexport function bearingToAzimuth(bearing) {\n    var angle = bearing % 360;\n    if (angle < 0) {\n        angle += 360;\n    }\n    return angle;\n}\n/**\n * Converts an angle in radians to degrees\n *\n * @name radiansToDegrees\n * @param {number} radians angle in radians\n * @returns {number} degrees between 0 and 360 degrees\n */\nexport function radiansToDegrees(radians) {\n    var degrees = radians % (2 * Math.PI);\n    return (degrees * 180) / Math.PI;\n}\n/**\n * Converts an angle in degrees to radians\n *\n * @name degreesToRadians\n * @param {number} degrees angle between 0 and 360 degrees\n * @returns {number} angle in radians\n */\nexport function degreesToRadians(degrees) {\n    var radians = degrees % 360;\n    return (radians * Math.PI) / 180;\n}\n/**\n * Converts a length to the requested unit.\n * Valid units: miles, nauticalmiles, inches, yards, meters, metres, kilometers, centimeters, feet\n *\n * @param {number} length to be converted\n * @param {Units} [originalUnit=\"kilometers\"] of the length\n * @param {Units} [finalUnit=\"kilometers\"] returned unit\n * @returns {number} the converted length\n */\nexport function convertLength(length, originalUnit, finalUnit) {\n    if (originalUnit === void 0) { originalUnit = \"kilometers\"; }\n    if (finalUnit === void 0) { finalUnit = \"kilometers\"; }\n    if (!(length >= 0)) {\n        throw new Error(\"length must be a positive number\");\n    }\n    return radiansToLength(lengthToRadians(length, originalUnit), finalUnit);\n}\n/**\n * Converts a area to the requested unit.\n * Valid units: kilometers, kilometres, meters, metres, centimetres, millimeters, acres, miles, yards, feet, inches, hectares\n * @param {number} area to be converted\n * @param {Units} [originalUnit=\"meters\"] of the distance\n * @param {Units} [finalUnit=\"kilometers\"] returned unit\n * @returns {number} the converted area\n */\nexport function convertArea(area, originalUnit, finalUnit) {\n    if (originalUnit === void 0) { originalUnit = \"meters\"; }\n    if (finalUnit === void 0) { finalUnit = \"kilometers\"; }\n    if (!(area >= 0)) {\n        throw new Error(\"area must be a positive number\");\n    }\n    var startFactor = areaFactors[originalUnit];\n    if (!startFactor) {\n        throw new Error(\"invalid original units\");\n    }\n    var finalFactor = areaFactors[finalUnit];\n    if (!finalFactor) {\n        throw new Error(\"invalid final units\");\n    }\n    return (area / startFactor) * finalFactor;\n}\n/**\n * isNumber\n *\n * @param {*} num Number to validate\n * @returns {boolean} true/false\n * @example\n * turf.isNumber(123)\n * //=true\n * turf.isNumber('foo')\n * //=false\n */\nexport function isNumber(num) {\n    return !isNaN(num) && num !== null && !Array.isArray(num);\n}\n/**\n * isObject\n *\n * @param {*} input variable to validate\n * @returns {boolean} true/false\n * @example\n * turf.isObject({elevation: 10})\n * //=true\n * turf.isObject('foo')\n * //=false\n */\nexport function isObject(input) {\n    return !!input && input.constructor === Object;\n}\n/**\n * Validate BBox\n *\n * @private\n * @param {Array<number>} bbox BBox to validate\n * @returns {void}\n * @throws Error if BBox is not valid\n * @example\n * validateBBox([-180, -40, 110, 50])\n * //=OK\n * validateBBox([-180, -40])\n * //=Error\n * validateBBox('Foo')\n * //=Error\n * validateBBox(5)\n * //=Error\n * validateBBox(null)\n * //=Error\n * validateBBox(undefined)\n * //=Error\n */\nexport function validateBBox(bbox) {\n    if (!bbox) {\n        throw new Error(\"bbox is required\");\n    }\n    if (!Array.isArray(bbox)) {\n        throw new Error(\"bbox must be an Array\");\n    }\n    if (bbox.length !== 4 && bbox.length !== 6) {\n        throw new Error(\"bbox must be an Array of 4 or 6 numbers\");\n    }\n    bbox.forEach(function (num) {\n        if (!isNumber(num)) {\n            throw new Error(\"bbox must only contain numbers\");\n        }\n    });\n}\n/**\n * Validate Id\n *\n * @private\n * @param {string|number} id Id to validate\n * @returns {void}\n * @throws Error if Id is not valid\n * @example\n * validateId([-180, -40, 110, 50])\n * //=Error\n * validateId([-180, -40])\n * //=Error\n * validateId('Foo')\n * //=OK\n * validateId(5)\n * //=OK\n * validateId(null)\n * //=Error\n * validateId(undefined)\n * //=Error\n */\nexport function validateId(id) {\n    if (!id) {\n        throw new Error(\"id is required\");\n    }\n    if ([\"string\", \"number\"].indexOf(typeof id) === -1) {\n        throw new Error(\"id must be a number or a string\");\n    }\n}\n",
    "import { isNumber, } from  \"../../../helpers/dist/es/index.js\";\n\n/**\n * Unwrap a coordinate from a Point Feature, Geometry or a single coordinate.\n *\n * @name getCoord\n * @param {Array<number>|Geometry<Point>|Feature<Point>} coord GeoJSON Point or an Array of numbers\n * @returns {Array<number>} coordinates\n * @example\n * var pt = turf.point([10, 10]);\n *\n * var coord = turf.getCoord(pt);\n * //= [10, 10]\n */\nexport function getCoord(coord) {\n    if (!coord) {\n        throw new Error(\"coord is required\");\n    }\n    if (!Array.isArray(coord)) {\n        if (coord.type === \"Feature\" &&\n            coord.geometry !== null &&\n            coord.geometry.type === \"Point\") {\n            return coord.geometry.coordinates;\n        }\n        if (coord.type === \"Point\") {\n            return coord.coordinates;\n        }\n    }\n    if (Array.isArray(coord) &&\n        coord.length >= 2 &&\n        !Array.isArray(coord[0]) &&\n        !Array.isArray(coord[1])) {\n        return coord;\n    }\n    throw new Error(\"coord must be GeoJSON Point or an Array of numbers\");\n}\n/**\n * Unwrap coordinates from a Feature, Geometry Object or an Array\n *\n * @name getCoords\n * @param {Array<any>|Geometry|Feature} coords Feature, Geometry Object or an Array\n * @returns {Array<any>} coordinates\n * @example\n * var poly = turf.polygon([[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]);\n *\n * var coords = turf.getCoords(poly);\n * //= [[[119.32, -8.7], [119.55, -8.69], [119.51, -8.54], [119.32, -8.7]]]\n */\nexport function getCoords(coords) {\n    if (Array.isArray(coords)) {\n        return coords;\n    }\n    // Feature\n    if (coords.type === \"Feature\") {\n        if (coords.geometry !== null) {\n            return coords.geometry.coordinates;\n        }\n    }\n    else {\n        // Geometry\n        if (coords.coordinates) {\n            return coords.coordinates;\n        }\n    }\n    throw new Error(\"coords must be GeoJSON Feature, Geometry Object or an Array\");\n}\n/**\n * Checks if coordinates contains a number\n *\n * @name containsNumber\n * @param {Array<any>} coordinates GeoJSON Coordinates\n * @returns {boolean} true if Array contains a number\n */\nexport function containsNumber(coordinates) {\n    if (coordinates.length > 1 &&\n        isNumber(coordinates[0]) &&\n        isNumber(coordinates[1])) {\n        return true;\n    }\n    if (Array.isArray(coordinates[0]) && coordinates[0].length) {\n        return containsNumber(coordinates[0]);\n    }\n    throw new Error(\"coordinates must only contain numbers\");\n}\n/**\n * Enforce expectations about types of GeoJSON objects for Turf.\n *\n * @name geojsonType\n * @param {GeoJSON} value any GeoJSON object\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nexport function geojsonType(value, type, name) {\n    if (!type || !name) {\n        throw new Error(\"type and name required\");\n    }\n    if (!value || value.type !== type) {\n        throw new Error(\"Invalid input to \" +\n            name +\n            \": must be a \" +\n            type +\n            \", given \" +\n            value.type);\n    }\n}\n/**\n * Enforce expectations about types of {@link Feature} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name featureOf\n * @param {Feature} feature a feature with an expected geometry type\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} error if value is not the expected type.\n */\nexport function featureOf(feature, type, name) {\n    if (!feature) {\n        throw new Error(\"No feature passed\");\n    }\n    if (!name) {\n        throw new Error(\".featureOf() requires a name\");\n    }\n    if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n        throw new Error(\"Invalid input to \" + name + \", Feature with geometry required\");\n    }\n    if (!feature.geometry || feature.geometry.type !== type) {\n        throw new Error(\"Invalid input to \" +\n            name +\n            \": must be a \" +\n            type +\n            \", given \" +\n            feature.geometry.type);\n    }\n}\n/**\n * Enforce expectations about types of {@link FeatureCollection} inputs for Turf.\n * Internally this uses {@link geojsonType} to judge geometry types.\n *\n * @name collectionOf\n * @param {FeatureCollection} featureCollection a FeatureCollection for which features will be judged\n * @param {string} type expected GeoJSON type\n * @param {string} name name of calling function\n * @throws {Error} if value is not the expected type.\n */\nexport function collectionOf(featureCollection, type, name) {\n    if (!featureCollection) {\n        throw new Error(\"No featureCollection passed\");\n    }\n    if (!name) {\n        throw new Error(\".collectionOf() requires a name\");\n    }\n    if (!featureCollection || featureCollection.type !== \"FeatureCollection\") {\n        throw new Error(\"Invalid input to \" + name + \", FeatureCollection required\");\n    }\n    for (var _i = 0, _a = featureCollection.features; _i < _a.length; _i++) {\n        var feature = _a[_i];\n        if (!feature || feature.type !== \"Feature\" || !feature.geometry) {\n            throw new Error(\"Invalid input to \" + name + \", Feature with geometry required\");\n        }\n        if (!feature.geometry || feature.geometry.type !== type) {\n            throw new Error(\"Invalid input to \" +\n                name +\n                \": must be a \" +\n                type +\n                \", given \" +\n                feature.geometry.type);\n        }\n    }\n}\n/**\n * Get Geometry from Feature or Geometry Object\n *\n * @param {Feature|Geometry} geojson GeoJSON Feature or Geometry Object\n * @returns {Geometry|null} GeoJSON Geometry Object\n * @throws {Error} if geojson is not a Feature or Geometry Object\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getGeom(point)\n * //={\"type\": \"Point\", \"coordinates\": [110, 40]}\n */\nexport function getGeom(geojson) {\n    if (geojson.type === \"Feature\") {\n        return geojson.geometry;\n    }\n    return geojson;\n}\n/**\n * Get GeoJSON object's type, Geometry type is prioritize.\n *\n * @param {GeoJSON} geojson GeoJSON object\n * @param {string} [name=\"geojson\"] name of the variable to display in error message (unused)\n * @returns {string} GeoJSON type\n * @example\n * var point = {\n *   \"type\": \"Feature\",\n *   \"properties\": {},\n *   \"geometry\": {\n *     \"type\": \"Point\",\n *     \"coordinates\": [110, 40]\n *   }\n * }\n * var geom = turf.getType(point)\n * //=\"Point\"\n */\nexport function getType(geojson, _name) {\n    if (geojson.type === \"FeatureCollection\") {\n        return \"FeatureCollection\";\n    }\n    if (geojson.type === \"GeometryCollection\") {\n        return \"GeometryCollection\";\n    }\n    if (geojson.type === \"Feature\" && geojson.geometry !== null) {\n        return geojson.geometry.type;\n    }\n    return geojson.type;\n}\n",
    "import { flattenEach } from  \"../../../meta/dist/es/index.js\";\n\nimport { getType, getCoords } from  \"../../../invariant/dist/es/index.js\";\n\nimport { isObject, lineString, multiLineString, lengthToDegrees } from  \"../../../helpers/dist/es/index.js\";\n\n\n/**\n * https://github.com/rook2pawn/node-intersection\n *\n * Author @rook2pawn\n */\n\n/**\n * AB\n *\n * @private\n * @param {Array<Array<number>>} segment - 2 vertex line segment\n * @returns {Array<number>} coordinates [x, y]\n */\nfunction ab(segment) {\n  var start = segment[0];\n  var end = segment[1];\n  return [end[0] - start[0], end[1] - start[1]];\n}\n\n/**\n * Cross Product\n *\n * @private\n * @param {Array<number>} v1 coordinates [x, y]\n * @param {Array<number>} v2 coordinates [x, y]\n * @returns {Array<number>} Cross Product\n */\nfunction crossProduct(v1, v2) {\n  return v1[0] * v2[1] - v2[0] * v1[1];\n}\n\n/**\n * Add\n *\n * @private\n * @param {Array<number>} v1 coordinates [x, y]\n * @param {Array<number>} v2 coordinates [x, y]\n * @returns {Array<number>} Add\n */\nfunction add(v1, v2) {\n  return [v1[0] + v2[0], v1[1] + v2[1]];\n}\n\n/**\n * Sub\n *\n * @private\n * @param {Array<number>} v1 coordinates [x, y]\n * @param {Array<number>} v2 coordinates [x, y]\n * @returns {Array<number>} Sub\n */\nfunction sub(v1, v2) {\n  return [v1[0] - v2[0], v1[1] - v2[1]];\n}\n\n/**\n * scalarMult\n *\n * @private\n * @param {number} s scalar\n * @param {Array<number>} v coordinates [x, y]\n * @returns {Array<number>} scalarMult\n */\nfunction scalarMult(s, v) {\n  return [s * v[0], s * v[1]];\n}\n\n/**\n * Intersect Segments\n *\n * @private\n * @param {Array<number>} a coordinates [x, y]\n * @param {Array<number>} b coordinates [x, y]\n * @returns {Array<number>} intersection\n */\nfunction intersectSegments(a, b) {\n  var p = a[0];\n  var r = ab(a);\n  var q = b[0];\n  var s = ab(b);\n\n  var cross = crossProduct(r, s);\n  var qmp = sub(q, p);\n  var numerator = crossProduct(qmp, s);\n  var t = numerator / cross;\n  var intersection = add(p, scalarMult(t, r));\n  return intersection;\n}\n\n/**\n * Is Parallel\n *\n * @private\n * @param {Array<number>} a coordinates [x, y]\n * @param {Array<number>} b coordinates [x, y]\n * @returns {boolean} true if a and b are parallel (or co-linear)\n */\nfunction isParallel(a, b) {\n  var r = ab(a);\n  var s = ab(b);\n  return crossProduct(r, s) === 0;\n}\n\n/**\n * Intersection\n *\n * @private\n * @param {Array<number>} a coordinates [x, y]\n * @param {Array<number>} b coordinates [x, y]\n * @returns {Array<number>|boolean} true if a and b are parallel (or co-linear)\n */\nfunction intersection(a, b) {\n  if (isParallel(a, b)) return false;\n  return intersectSegments(a, b);\n}\n\n/**\n * Takes a {@link LineString|line} and returns a {@link LineString|line} at offset by the specified distance.\n *\n * @name lineOffset\n * @param {Geometry|Feature<LineString|MultiLineString>} geojson input GeoJSON\n * @param {number} distance distance to offset the line (can be of negative value)\n * @param {Object} [options={}] Optional parameters\n * @param {string} [options.units='kilometers'] can be degrees, radians, miles, kilometers, inches, yards, meters\n * @returns {Feature<LineString|MultiLineString>} Line offset from the input line\n * @example\n * var line = turf.lineString([[-83, 30], [-84, 36], [-78, 41]], { \"stroke\": \"#F00\" });\n *\n * var offsetLine = turf.lineOffset(line, 2, {units: 'miles'});\n *\n * //addToMap\n * var addToMap = [offsetLine, line]\n * offsetLine.properties.stroke = \"#00F\"\n */\nfunction lineOffset(geojson, distance, options) {\n  // Optional parameters\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var units = options.units;\n\n  // Valdiation\n  if (!geojson) throw new Error(\"geojson is required\");\n  if (distance === undefined || distance === null || isNaN(distance))\n    throw new Error(\"distance is required\");\n\n  var type = getType(geojson);\n  var properties = geojson.properties;\n\n  switch (type) {\n    case \"LineString\":\n      return lineOffsetFeature(geojson, distance, units);\n    case \"MultiLineString\":\n      var coords = [];\n      flattenEach(geojson, function (feature) {\n        coords.push(\n          lineOffsetFeature(feature, distance, units).geometry.coordinates\n        );\n      });\n      return multiLineString(coords, properties);\n    default:\n      throw new Error(\"geometry \" + type + \" is not supported\");\n  }\n}\n\n/**\n * Line Offset\n *\n * @private\n * @param {Geometry|Feature<LineString>} line input line\n * @param {number} distance distance to offset the line (can be of negative value)\n * @param {string} [units=kilometers] units\n * @returns {Feature<LineString>} Line offset from the input line\n */\nfunction lineOffsetFeature(line, distance, units) {\n  var segments = [];\n  var offsetDegrees = lengthToDegrees(distance, units);\n  var coords = getCoords(line);\n  var finalCoords = [];\n  coords.forEach(function (currentCoords, index) {\n    if (index !== coords.length - 1) {\n      var segment = processSegment(\n        currentCoords,\n        coords[index + 1],\n        offsetDegrees\n      );\n      segments.push(segment);\n      if (index > 0) {\n        var seg2Coords = segments[index - 1];\n        var intersects = intersection(segment, seg2Coords);\n\n        // Handling for line segments that aren't straight\n        if (intersects !== false) {\n          seg2Coords[1] = intersects;\n          segment[0] = intersects;\n        }\n\n        finalCoords.push(seg2Coords[0]);\n        if (index === coords.length - 2) {\n          finalCoords.push(segment[0]);\n          finalCoords.push(segment[1]);\n        }\n      }\n      // Handling for lines that only have 1 segment\n      if (coords.length === 2) {\n        finalCoords.push(segment[0]);\n        finalCoords.push(segment[1]);\n      }\n    }\n  });\n  return lineString(finalCoords, line.properties);\n}\n\n/**\n * Process Segment\n * Inspiration taken from http://stackoverflow.com/questions/2825412/draw-a-parallel-line\n *\n * @private\n * @param {Array<number>} point1 Point coordinates\n * @param {Array<number>} point2 Point coordinates\n * @param {number} offset Offset\n * @returns {Array<Array<number>>} offset points\n */\nfunction processSegment(point1, point2, offset) {\n  var L = Math.sqrt(\n    (point1[0] - point2[0]) * (point1[0] - point2[0]) +\n      (point1[1] - point2[1]) * (point1[1] - point2[1])\n  );\n\n  var out1x = point1[0] + (offset * (point2[1] - point1[1])) / L;\n  var out2x = point2[0] + (offset * (point2[1] - point1[1])) / L;\n  var out1y = point1[1] + (offset * (point1[0] - point2[0])) / L;\n  var out2y = point2[1] + (offset * (point1[0] - point2[0])) / L;\n  return [\n    [out1x, out1y],\n    [out2x, out2y],\n  ];\n}\n\nexport default lineOffset;\n",
    "import { feature, lineString, isObject, point } from  \"../../../helpers/dist/es/index.js\";\n\n\n/**\n * Callback for coordEach\n *\n * @callback coordEachCallback\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Iterate over coordinates in any GeoJSON object, similar to Array.forEach()\n *\n * @name coordEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentCoord, coordIndex, featureIndex, multiFeatureIndex)\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordEach(features, function (currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction coordEach(geojson, callback, excludeWrapCoord) {\n  // Handles null Geometry -- Skips this GeoJSON\n  if (geojson === null) return;\n  var j,\n    k,\n    l,\n    geometry,\n    stopG,\n    coords,\n    geometryMaybeCollection,\n    wrapShrink = 0,\n    coordIndex = 0,\n    isGeometryCollection,\n    type = geojson.type,\n    isFeatureCollection = type === \"FeatureCollection\",\n    isFeature = type === \"Feature\",\n    stop = isFeatureCollection ? geojson.features.length : 1;\n\n  // This logic may look a little weird. The reason why it is that way\n  // is because it's trying to be fast. GeoJSON supports multiple kinds\n  // of objects at its root: FeatureCollection, Features, Geometries.\n  // This function has the responsibility of handling all of them, and that\n  // means that some of the `for` loops you see below actually just don't apply\n  // to certain inputs. For instance, if you give this just a\n  // Point geometry, then both loops are short-circuited and all we do\n  // is gradually rename the input until it's called 'geometry'.\n  //\n  // This also aims to allocate as few resources as possible: just a\n  // few numbers and booleans, rather than any temporary arrays as would\n  // be required with the normalization approach.\n  for (var featureIndex = 0; featureIndex < stop; featureIndex++) {\n    geometryMaybeCollection = isFeatureCollection\n      ? geojson.features[featureIndex].geometry\n      : isFeature\n      ? geojson.geometry\n      : geojson;\n    isGeometryCollection = geometryMaybeCollection\n      ? geometryMaybeCollection.type === \"GeometryCollection\"\n      : false;\n    stopG = isGeometryCollection\n      ? geometryMaybeCollection.geometries.length\n      : 1;\n\n    for (var geomIndex = 0; geomIndex < stopG; geomIndex++) {\n      var multiFeatureIndex = 0;\n      var geometryIndex = 0;\n      geometry = isGeometryCollection\n        ? geometryMaybeCollection.geometries[geomIndex]\n        : geometryMaybeCollection;\n\n      // Handles null Geometry -- Skips this geometry\n      if (geometry === null) continue;\n      coords = geometry.coordinates;\n      var geomType = geometry.type;\n\n      wrapShrink =\n        excludeWrapCoord &&\n        (geomType === \"Polygon\" || geomType === \"MultiPolygon\")\n          ? 1\n          : 0;\n\n      switch (geomType) {\n        case null:\n          break;\n        case \"Point\":\n          if (\n            callback(\n              coords,\n              coordIndex,\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex\n            ) === false\n          )\n            return false;\n          coordIndex++;\n          multiFeatureIndex++;\n          break;\n        case \"LineString\":\n        case \"MultiPoint\":\n          for (j = 0; j < coords.length; j++) {\n            if (\n              callback(\n                coords[j],\n                coordIndex,\n                featureIndex,\n                multiFeatureIndex,\n                geometryIndex\n              ) === false\n            )\n              return false;\n            coordIndex++;\n            if (geomType === \"MultiPoint\") multiFeatureIndex++;\n          }\n          if (geomType === \"LineString\") multiFeatureIndex++;\n          break;\n        case \"Polygon\":\n        case \"MultiLineString\":\n          for (j = 0; j < coords.length; j++) {\n            for (k = 0; k < coords[j].length - wrapShrink; k++) {\n              if (\n                callback(\n                  coords[j][k],\n                  coordIndex,\n                  featureIndex,\n                  multiFeatureIndex,\n                  geometryIndex\n                ) === false\n              )\n                return false;\n              coordIndex++;\n            }\n            if (geomType === \"MultiLineString\") multiFeatureIndex++;\n            if (geomType === \"Polygon\") geometryIndex++;\n          }\n          if (geomType === \"Polygon\") multiFeatureIndex++;\n          break;\n        case \"MultiPolygon\":\n          for (j = 0; j < coords.length; j++) {\n            geometryIndex = 0;\n            for (k = 0; k < coords[j].length; k++) {\n              for (l = 0; l < coords[j][k].length - wrapShrink; l++) {\n                if (\n                  callback(\n                    coords[j][k][l],\n                    coordIndex,\n                    featureIndex,\n                    multiFeatureIndex,\n                    geometryIndex\n                  ) === false\n                )\n                  return false;\n                coordIndex++;\n              }\n              geometryIndex++;\n            }\n            multiFeatureIndex++;\n          }\n          break;\n        case \"GeometryCollection\":\n          for (j = 0; j < geometry.geometries.length; j++)\n            if (\n              coordEach(geometry.geometries[j], callback, excludeWrapCoord) ===\n              false\n            )\n              return false;\n          break;\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n  }\n}\n\n/**\n * Callback for coordReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback coordReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Array<number>} currentCoord The current coordinate being processed.\n * @param {number} coordIndex The current index of the coordinate being processed.\n * Starts at index 0, if an initialValue is provided, and at index 1 otherwise.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n */\n\n/**\n * Reduce coordinates in any GeoJSON object, similar to Array.reduce()\n *\n * @name coordReduce\n * @param {FeatureCollection|Geometry|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentCoord, coordIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @param {boolean} [excludeWrapCoord=false] whether or not to include the final coordinate of LinearRings that wraps the ring in its iteration.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.coordReduce(features, function (previousValue, currentCoord, coordIndex, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=previousValue\n *   //=currentCoord\n *   //=coordIndex\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   return currentCoord;\n * });\n */\nfunction coordReduce(geojson, callback, initialValue, excludeWrapCoord) {\n  var previousValue = initialValue;\n  coordEach(\n    geojson,\n    function (\n      currentCoord,\n      coordIndex,\n      featureIndex,\n      multiFeatureIndex,\n      geometryIndex\n    ) {\n      if (coordIndex === 0 && initialValue === undefined)\n        previousValue = currentCoord;\n      else\n        previousValue = callback(\n          previousValue,\n          currentCoord,\n          coordIndex,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    },\n    excludeWrapCoord\n  );\n  return previousValue;\n}\n\n/**\n * Callback for propEach\n *\n * @callback propEachCallback\n * @param {Object} currentProperties The current Properties being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over properties in any GeoJSON object, similar to Array.forEach()\n *\n * @name propEach\n * @param {FeatureCollection|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentProperties, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.propEach(features, function (currentProperties, featureIndex) {\n *   //=currentProperties\n *   //=featureIndex\n * });\n */\nfunction propEach(geojson, callback) {\n  var i;\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      for (i = 0; i < geojson.features.length; i++) {\n        if (callback(geojson.features[i].properties, i) === false) break;\n      }\n      break;\n    case \"Feature\":\n      callback(geojson.properties, 0);\n      break;\n  }\n}\n\n/**\n * Callback for propReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback propReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {*} currentProperties The current Properties being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Reduce properties in any GeoJSON object into a single value,\n * similar to how Array.reduce works. However, in this case we lazily run\n * the reduction, so an array of all properties is unnecessary.\n *\n * @name propReduce\n * @param {FeatureCollection|Feature} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentProperties, featureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.propReduce(features, function (previousValue, currentProperties, featureIndex) {\n *   //=previousValue\n *   //=currentProperties\n *   //=featureIndex\n *   return currentProperties\n * });\n */\nfunction propReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  propEach(geojson, function (currentProperties, featureIndex) {\n    if (featureIndex === 0 && initialValue === undefined)\n      previousValue = currentProperties;\n    else\n      previousValue = callback(previousValue, currentProperties, featureIndex);\n  });\n  return previousValue;\n}\n\n/**\n * Callback for featureEach\n *\n * @callback featureEachCallback\n * @param {Feature<any>} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Iterate over features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name featureEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.featureEach(features, function (currentFeature, featureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n * });\n */\nfunction featureEach(geojson, callback) {\n  if (geojson.type === \"Feature\") {\n    callback(geojson, 0);\n  } else if (geojson.type === \"FeatureCollection\") {\n    for (var i = 0; i < geojson.features.length; i++) {\n      if (callback(geojson.features[i], i) === false) break;\n    }\n  }\n}\n\n/**\n * Callback for featureReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback featureReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n */\n\n/**\n * Reduce features in any GeoJSON object, similar to Array.reduce().\n *\n * @name featureReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentFeature, featureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {\"foo\": \"bar\"}),\n *   turf.point([36, 53], {\"hello\": \"world\"})\n * ]);\n *\n * turf.featureReduce(features, function (previousValue, currentFeature, featureIndex) {\n *   //=previousValue\n *   //=currentFeature\n *   //=featureIndex\n *   return currentFeature\n * });\n */\nfunction featureReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  featureEach(geojson, function (currentFeature, featureIndex) {\n    if (featureIndex === 0 && initialValue === undefined)\n      previousValue = currentFeature;\n    else previousValue = callback(previousValue, currentFeature, featureIndex);\n  });\n  return previousValue;\n}\n\n/**\n * Get all coordinates from any GeoJSON object.\n *\n * @name coordAll\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @returns {Array<Array<number>>} coordinate position array\n * @example\n * var features = turf.featureCollection([\n *   turf.point([26, 37], {foo: 'bar'}),\n *   turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * var coords = turf.coordAll(features);\n * //= [[26, 37], [36, 53]]\n */\nfunction coordAll(geojson) {\n  var coords = [];\n  coordEach(geojson, function (coord) {\n    coords.push(coord);\n  });\n  return coords;\n}\n\n/**\n * Callback for geomEach\n *\n * @callback geomEachCallback\n * @param {Geometry} currentGeometry The current Geometry being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {Object} featureProperties The current Feature Properties being processed.\n * @param {Array<number>} featureBBox The current Feature BBox being processed.\n * @param {number|string} featureId The current Feature Id being processed.\n */\n\n/**\n * Iterate over each geometry in any GeoJSON object, similar to Array.forEach()\n *\n * @name geomEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentGeometry, featureIndex, featureProperties, featureBBox, featureId)\n * @returns {void}\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.geomEach(features, function (currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n *   //=currentGeometry\n *   //=featureIndex\n *   //=featureProperties\n *   //=featureBBox\n *   //=featureId\n * });\n */\nfunction geomEach(geojson, callback) {\n  var i,\n    j,\n    g,\n    geometry,\n    stopG,\n    geometryMaybeCollection,\n    isGeometryCollection,\n    featureProperties,\n    featureBBox,\n    featureId,\n    featureIndex = 0,\n    isFeatureCollection = geojson.type === \"FeatureCollection\",\n    isFeature = geojson.type === \"Feature\",\n    stop = isFeatureCollection ? geojson.features.length : 1;\n\n  // This logic may look a little weird. The reason why it is that way\n  // is because it's trying to be fast. GeoJSON supports multiple kinds\n  // of objects at its root: FeatureCollection, Features, Geometries.\n  // This function has the responsibility of handling all of them, and that\n  // means that some of the `for` loops you see below actually just don't apply\n  // to certain inputs. For instance, if you give this just a\n  // Point geometry, then both loops are short-circuited and all we do\n  // is gradually rename the input until it's called 'geometry'.\n  //\n  // This also aims to allocate as few resources as possible: just a\n  // few numbers and booleans, rather than any temporary arrays as would\n  // be required with the normalization approach.\n  for (i = 0; i < stop; i++) {\n    geometryMaybeCollection = isFeatureCollection\n      ? geojson.features[i].geometry\n      : isFeature\n      ? geojson.geometry\n      : geojson;\n    featureProperties = isFeatureCollection\n      ? geojson.features[i].properties\n      : isFeature\n      ? geojson.properties\n      : {};\n    featureBBox = isFeatureCollection\n      ? geojson.features[i].bbox\n      : isFeature\n      ? geojson.bbox\n      : undefined;\n    featureId = isFeatureCollection\n      ? geojson.features[i].id\n      : isFeature\n      ? geojson.id\n      : undefined;\n    isGeometryCollection = geometryMaybeCollection\n      ? geometryMaybeCollection.type === \"GeometryCollection\"\n      : false;\n    stopG = isGeometryCollection\n      ? geometryMaybeCollection.geometries.length\n      : 1;\n\n    for (g = 0; g < stopG; g++) {\n      geometry = isGeometryCollection\n        ? geometryMaybeCollection.geometries[g]\n        : geometryMaybeCollection;\n\n      // Handle null Geometry\n      if (geometry === null) {\n        if (\n          callback(\n            null,\n            featureIndex,\n            featureProperties,\n            featureBBox,\n            featureId\n          ) === false\n        )\n          return false;\n        continue;\n      }\n      switch (geometry.type) {\n        case \"Point\":\n        case \"LineString\":\n        case \"MultiPoint\":\n        case \"Polygon\":\n        case \"MultiLineString\":\n        case \"MultiPolygon\": {\n          if (\n            callback(\n              geometry,\n              featureIndex,\n              featureProperties,\n              featureBBox,\n              featureId\n            ) === false\n          )\n            return false;\n          break;\n        }\n        case \"GeometryCollection\": {\n          for (j = 0; j < geometry.geometries.length; j++) {\n            if (\n              callback(\n                geometry.geometries[j],\n                featureIndex,\n                featureProperties,\n                featureBBox,\n                featureId\n              ) === false\n            )\n              return false;\n          }\n          break;\n        }\n        default:\n          throw new Error(\"Unknown Geometry Type\");\n      }\n    }\n    // Only increase `featureIndex` per each feature\n    featureIndex++;\n  }\n}\n\n/**\n * Callback for geomReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback geomReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Geometry} currentGeometry The current Geometry being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {Object} featureProperties The current Feature Properties being processed.\n * @param {Array<number>} featureBBox The current Feature BBox being processed.\n * @param {number|string} featureId The current Feature Id being processed.\n */\n\n/**\n * Reduce geometry in any GeoJSON object, similar to Array.reduce().\n *\n * @name geomReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.point([36, 53], {hello: 'world'})\n * ]);\n *\n * turf.geomReduce(features, function (previousValue, currentGeometry, featureIndex, featureProperties, featureBBox, featureId) {\n *   //=previousValue\n *   //=currentGeometry\n *   //=featureIndex\n *   //=featureProperties\n *   //=featureBBox\n *   //=featureId\n *   return currentGeometry\n * });\n */\nfunction geomReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  geomEach(\n    geojson,\n    function (\n      currentGeometry,\n      featureIndex,\n      featureProperties,\n      featureBBox,\n      featureId\n    ) {\n      if (featureIndex === 0 && initialValue === undefined)\n        previousValue = currentGeometry;\n      else\n        previousValue = callback(\n          previousValue,\n          currentGeometry,\n          featureIndex,\n          featureProperties,\n          featureBBox,\n          featureId\n        );\n    }\n  );\n  return previousValue;\n}\n\n/**\n * Callback for flattenEach\n *\n * @callback flattenEachCallback\n * @param {Feature} currentFeature The current flattened feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n */\n\n/**\n * Iterate over flattened features in any GeoJSON object, similar to\n * Array.forEach.\n *\n * @name flattenEach\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (currentFeature, featureIndex, multiFeatureIndex)\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.multiPoint([[40, 30], [36, 53]], {hello: 'world'})\n * ]);\n *\n * turf.flattenEach(features, function (currentFeature, featureIndex, multiFeatureIndex) {\n *   //=currentFeature\n *   //=featureIndex\n *   //=multiFeatureIndex\n * });\n */\nfunction flattenEach(geojson, callback) {\n  geomEach(geojson, function (geometry, featureIndex, properties, bbox, id) {\n    // Callback for single geometry\n    var type = geometry === null ? null : geometry.type;\n    switch (type) {\n      case null:\n      case \"Point\":\n      case \"LineString\":\n      case \"Polygon\":\n        if (\n          callback(\n            feature(geometry, properties, { bbox: bbox, id: id }),\n            featureIndex,\n            0\n          ) === false\n        )\n          return false;\n        return;\n    }\n\n    var geomType;\n\n    // Callback for multi-geometry\n    switch (type) {\n      case \"MultiPoint\":\n        geomType = \"Point\";\n        break;\n      case \"MultiLineString\":\n        geomType = \"LineString\";\n        break;\n      case \"MultiPolygon\":\n        geomType = \"Polygon\";\n        break;\n    }\n\n    for (\n      var multiFeatureIndex = 0;\n      multiFeatureIndex < geometry.coordinates.length;\n      multiFeatureIndex++\n    ) {\n      var coordinate = geometry.coordinates[multiFeatureIndex];\n      var geom = {\n        type: geomType,\n        coordinates: coordinate,\n      };\n      if (\n        callback(feature(geom, properties), featureIndex, multiFeatureIndex) ===\n        false\n      )\n        return false;\n    }\n  });\n}\n\n/**\n * Callback for flattenReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback flattenReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature} currentFeature The current Feature being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n */\n\n/**\n * Reduce flattened features in any GeoJSON object, similar to Array.reduce().\n *\n * @name flattenReduce\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON object\n * @param {Function} callback a method that takes (previousValue, currentFeature, featureIndex, multiFeatureIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var features = turf.featureCollection([\n *     turf.point([26, 37], {foo: 'bar'}),\n *     turf.multiPoint([[40, 30], [36, 53]], {hello: 'world'})\n * ]);\n *\n * turf.flattenReduce(features, function (previousValue, currentFeature, featureIndex, multiFeatureIndex) {\n *   //=previousValue\n *   //=currentFeature\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   return currentFeature\n * });\n */\nfunction flattenReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  flattenEach(\n    geojson,\n    function (currentFeature, featureIndex, multiFeatureIndex) {\n      if (\n        featureIndex === 0 &&\n        multiFeatureIndex === 0 &&\n        initialValue === undefined\n      )\n        previousValue = currentFeature;\n      else\n        previousValue = callback(\n          previousValue,\n          currentFeature,\n          featureIndex,\n          multiFeatureIndex\n        );\n    }\n  );\n  return previousValue;\n}\n\n/**\n * Callback for segmentEach\n *\n * @callback segmentEachCallback\n * @param {Feature<LineString>} currentSegment The current Segment being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n * @param {number} segmentIndex The current index of the Segment being processed.\n * @returns {void}\n */\n\n/**\n * Iterate over 2-vertex line segment in any GeoJSON object, similar to Array.forEach()\n * (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON\n * @param {Function} callback a method that takes (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex)\n * @returns {void}\n * @example\n * var polygon = turf.polygon([[[-50, 5], [-40, -10], [-50, -10], [-40, 5], [-50, 5]]]);\n *\n * // Iterate over GeoJSON by 2-vertex segments\n * turf.segmentEach(polygon, function (currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n *   //=currentSegment\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   //=segmentIndex\n * });\n *\n * // Calculate the total number of segments\n * var total = 0;\n * turf.segmentEach(polygon, function () {\n *     total++;\n * });\n */\nfunction segmentEach(geojson, callback) {\n  flattenEach(geojson, function (feature, featureIndex, multiFeatureIndex) {\n    var segmentIndex = 0;\n\n    // Exclude null Geometries\n    if (!feature.geometry) return;\n    // (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n    var type = feature.geometry.type;\n    if (type === \"Point\" || type === \"MultiPoint\") return;\n\n    // Generate 2-vertex line segments\n    var previousCoords;\n    var previousFeatureIndex = 0;\n    var previousMultiIndex = 0;\n    var prevGeomIndex = 0;\n    if (\n      coordEach(\n        feature,\n        function (\n          currentCoord,\n          coordIndex,\n          featureIndexCoord,\n          multiPartIndexCoord,\n          geometryIndex\n        ) {\n          // Simulating a meta.coordReduce() since `reduce` operations cannot be stopped by returning `false`\n          if (\n            previousCoords === undefined ||\n            featureIndex > previousFeatureIndex ||\n            multiPartIndexCoord > previousMultiIndex ||\n            geometryIndex > prevGeomIndex\n          ) {\n            previousCoords = currentCoord;\n            previousFeatureIndex = featureIndex;\n            previousMultiIndex = multiPartIndexCoord;\n            prevGeomIndex = geometryIndex;\n            segmentIndex = 0;\n            return;\n          }\n          var currentSegment = lineString(\n            [previousCoords, currentCoord],\n            feature.properties\n          );\n          if (\n            callback(\n              currentSegment,\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex,\n              segmentIndex\n            ) === false\n          )\n            return false;\n          segmentIndex++;\n          previousCoords = currentCoord;\n        }\n      ) === false\n    )\n      return false;\n  });\n}\n\n/**\n * Callback for segmentReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback segmentReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature<LineString>} currentSegment The current Segment being processed.\n * @param {number} featureIndex The current index of the Feature being processed.\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed.\n * @param {number} geometryIndex The current index of the Geometry being processed.\n * @param {number} segmentIndex The current index of the Segment being processed.\n */\n\n/**\n * Reduce 2-vertex line segment in any GeoJSON object, similar to Array.reduce()\n * (Multi)Point geometries do not contain segments therefore they are ignored during this operation.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson any GeoJSON\n * @param {Function} callback a method that takes (previousValue, currentSegment, currentIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {void}\n * @example\n * var polygon = turf.polygon([[[-50, 5], [-40, -10], [-50, -10], [-40, 5], [-50, 5]]]);\n *\n * // Iterate over GeoJSON by 2-vertex segments\n * turf.segmentReduce(polygon, function (previousSegment, currentSegment, featureIndex, multiFeatureIndex, geometryIndex, segmentIndex) {\n *   //= previousSegment\n *   //= currentSegment\n *   //= featureIndex\n *   //= multiFeatureIndex\n *   //= geometryIndex\n *   //= segmentIndex\n *   return currentSegment\n * });\n *\n * // Calculate the total number of segments\n * var initialValue = 0\n * var total = turf.segmentReduce(polygon, function (previousValue) {\n *     previousValue++;\n *     return previousValue;\n * }, initialValue);\n */\nfunction segmentReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  var started = false;\n  segmentEach(\n    geojson,\n    function (\n      currentSegment,\n      featureIndex,\n      multiFeatureIndex,\n      geometryIndex,\n      segmentIndex\n    ) {\n      if (started === false && initialValue === undefined)\n        previousValue = currentSegment;\n      else\n        previousValue = callback(\n          previousValue,\n          currentSegment,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex,\n          segmentIndex\n        );\n      started = true;\n    }\n  );\n  return previousValue;\n}\n\n/**\n * Callback for lineEach\n *\n * @callback lineEachCallback\n * @param {Feature<LineString>} currentLine The current LineString|LinearRing being processed\n * @param {number} featureIndex The current index of the Feature being processed\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed\n * @param {number} geometryIndex The current index of the Geometry being processed\n */\n\n/**\n * Iterate over line or ring coordinates in LineString, Polygon, MultiLineString, MultiPolygon Features or Geometries,\n * similar to Array.forEach.\n *\n * @name lineEach\n * @param {Geometry|Feature<LineString|Polygon|MultiLineString|MultiPolygon>} geojson object\n * @param {Function} callback a method that takes (currentLine, featureIndex, multiFeatureIndex, geometryIndex)\n * @example\n * var multiLine = turf.multiLineString([\n *   [[26, 37], [35, 45]],\n *   [[36, 53], [38, 50], [41, 55]]\n * ]);\n *\n * turf.lineEach(multiLine, function (currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=currentLine\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n * });\n */\nfunction lineEach(geojson, callback) {\n  // validation\n  if (!geojson) throw new Error(\"geojson is required\");\n\n  flattenEach(geojson, function (feature, featureIndex, multiFeatureIndex) {\n    if (feature.geometry === null) return;\n    var type = feature.geometry.type;\n    var coords = feature.geometry.coordinates;\n    switch (type) {\n      case \"LineString\":\n        if (callback(feature, featureIndex, multiFeatureIndex, 0, 0) === false)\n          return false;\n        break;\n      case \"Polygon\":\n        for (\n          var geometryIndex = 0;\n          geometryIndex < coords.length;\n          geometryIndex++\n        ) {\n          if (\n            callback(\n              lineString(coords[geometryIndex], feature.properties),\n              featureIndex,\n              multiFeatureIndex,\n              geometryIndex\n            ) === false\n          )\n            return false;\n        }\n        break;\n    }\n  });\n}\n\n/**\n * Callback for lineReduce\n *\n * The first time the callback function is called, the values provided as arguments depend\n * on whether the reduce method has an initialValue argument.\n *\n * If an initialValue is provided to the reduce method:\n *  - The previousValue argument is initialValue.\n *  - The currentValue argument is the value of the first element present in the array.\n *\n * If an initialValue is not provided:\n *  - The previousValue argument is the value of the first element present in the array.\n *  - The currentValue argument is the value of the second element present in the array.\n *\n * @callback lineReduceCallback\n * @param {*} previousValue The accumulated value previously returned in the last invocation\n * of the callback, or initialValue, if supplied.\n * @param {Feature<LineString>} currentLine The current LineString|LinearRing being processed.\n * @param {number} featureIndex The current index of the Feature being processed\n * @param {number} multiFeatureIndex The current index of the Multi-Feature being processed\n * @param {number} geometryIndex The current index of the Geometry being processed\n */\n\n/**\n * Reduce features in any GeoJSON object, similar to Array.reduce().\n *\n * @name lineReduce\n * @param {Geometry|Feature<LineString|Polygon|MultiLineString|MultiPolygon>} geojson object\n * @param {Function} callback a method that takes (previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex)\n * @param {*} [initialValue] Value to use as the first argument to the first call of the callback.\n * @returns {*} The value that results from the reduction.\n * @example\n * var multiPoly = turf.multiPolygon([\n *   turf.polygon([[[12,48],[2,41],[24,38],[12,48]], [[9,44],[13,41],[13,45],[9,44]]]),\n *   turf.polygon([[[5, 5], [0, 0], [2, 2], [4, 4], [5, 5]]])\n * ]);\n *\n * turf.lineReduce(multiPoly, function (previousValue, currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n *   //=previousValue\n *   //=currentLine\n *   //=featureIndex\n *   //=multiFeatureIndex\n *   //=geometryIndex\n *   return currentLine\n * });\n */\nfunction lineReduce(geojson, callback, initialValue) {\n  var previousValue = initialValue;\n  lineEach(\n    geojson,\n    function (currentLine, featureIndex, multiFeatureIndex, geometryIndex) {\n      if (featureIndex === 0 && initialValue === undefined)\n        previousValue = currentLine;\n      else\n        previousValue = callback(\n          previousValue,\n          currentLine,\n          featureIndex,\n          multiFeatureIndex,\n          geometryIndex\n        );\n    }\n  );\n  return previousValue;\n}\n\n/**\n * Finds a particular 2-vertex LineString Segment from a GeoJSON using `@turf/meta` indexes.\n *\n * Negative indexes are permitted.\n * Point & MultiPoint will always return null.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson Any GeoJSON Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.featureIndex=0] Feature Index\n * @param {number} [options.multiFeatureIndex=0] Multi-Feature Index\n * @param {number} [options.geometryIndex=0] Geometry Index\n * @param {number} [options.segmentIndex=0] Segment Index\n * @param {Object} [options.properties={}] Translate Properties to output LineString\n * @param {BBox} [options.bbox={}] Translate BBox to output LineString\n * @param {number|string} [options.id={}] Translate Id to output LineString\n * @returns {Feature<LineString>} 2-vertex GeoJSON Feature LineString\n * @example\n * var multiLine = turf.multiLineString([\n *     [[10, 10], [50, 30], [30, 40]],\n *     [[-10, -10], [-50, -30], [-30, -40]]\n * ]);\n *\n * // First Segment (defaults are 0)\n * turf.findSegment(multiLine);\n * // => Feature<LineString<[[10, 10], [50, 30]]>>\n *\n * // First Segment of 2nd Multi Feature\n * turf.findSegment(multiLine, {multiFeatureIndex: 1});\n * // => Feature<LineString<[[-10, -10], [-50, -30]]>>\n *\n * // Last Segment of Last Multi Feature\n * turf.findSegment(multiLine, {multiFeatureIndex: -1, segmentIndex: -1});\n * // => Feature<LineString<[[-50, -30], [-30, -40]]>>\n */\nfunction findSegment(geojson, options) {\n  // Optional Parameters\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var segmentIndex = options.segmentIndex || 0;\n\n  // Find FeatureIndex\n  var properties = options.properties;\n  var geometry;\n\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n\n  // Find SegmentIndex\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n      if (segmentIndex < 0) segmentIndex = coords.length + segmentIndex - 1;\n      return lineString(\n        [coords[segmentIndex], coords[segmentIndex + 1]],\n        properties,\n        options\n      );\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[geometryIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          coords[geometryIndex][segmentIndex],\n          coords[geometryIndex][segmentIndex + 1],\n        ],\n        properties,\n        options\n      );\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (segmentIndex < 0)\n        segmentIndex = coords[multiFeatureIndex].length + segmentIndex - 1;\n      return lineString(\n        [\n          coords[multiFeatureIndex][segmentIndex],\n          coords[multiFeatureIndex][segmentIndex + 1],\n        ],\n        properties,\n        options\n      );\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (segmentIndex < 0)\n        segmentIndex =\n          coords[multiFeatureIndex][geometryIndex].length - segmentIndex - 1;\n      return lineString(\n        [\n          coords[multiFeatureIndex][geometryIndex][segmentIndex],\n          coords[multiFeatureIndex][geometryIndex][segmentIndex + 1],\n        ],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\n\n/**\n * Finds a particular Point from a GeoJSON using `@turf/meta` indexes.\n *\n * Negative indexes are permitted.\n *\n * @param {FeatureCollection|Feature|Geometry} geojson Any GeoJSON Feature or Geometry\n * @param {Object} [options={}] Optional parameters\n * @param {number} [options.featureIndex=0] Feature Index\n * @param {number} [options.multiFeatureIndex=0] Multi-Feature Index\n * @param {number} [options.geometryIndex=0] Geometry Index\n * @param {number} [options.coordIndex=0] Coord Index\n * @param {Object} [options.properties={}] Translate Properties to output Point\n * @param {BBox} [options.bbox={}] Translate BBox to output Point\n * @param {number|string} [options.id={}] Translate Id to output Point\n * @returns {Feature<Point>} 2-vertex GeoJSON Feature Point\n * @example\n * var multiLine = turf.multiLineString([\n *     [[10, 10], [50, 30], [30, 40]],\n *     [[-10, -10], [-50, -30], [-30, -40]]\n * ]);\n *\n * // First Segment (defaults are 0)\n * turf.findPoint(multiLine);\n * // => Feature<Point<[10, 10]>>\n *\n * // First Segment of the 2nd Multi-Feature\n * turf.findPoint(multiLine, {multiFeatureIndex: 1});\n * // => Feature<Point<[-10, -10]>>\n *\n * // Last Segment of last Multi-Feature\n * turf.findPoint(multiLine, {multiFeatureIndex: -1, coordIndex: -1});\n * // => Feature<Point<[-30, -40]>>\n */\nfunction findPoint(geojson, options) {\n  // Optional Parameters\n  options = options || {};\n  if (!isObject(options)) throw new Error(\"options is invalid\");\n  var featureIndex = options.featureIndex || 0;\n  var multiFeatureIndex = options.multiFeatureIndex || 0;\n  var geometryIndex = options.geometryIndex || 0;\n  var coordIndex = options.coordIndex || 0;\n\n  // Find FeatureIndex\n  var properties = options.properties;\n  var geometry;\n\n  switch (geojson.type) {\n    case \"FeatureCollection\":\n      if (featureIndex < 0)\n        featureIndex = geojson.features.length + featureIndex;\n      properties = properties || geojson.features[featureIndex].properties;\n      geometry = geojson.features[featureIndex].geometry;\n      break;\n    case \"Feature\":\n      properties = properties || geojson.properties;\n      geometry = geojson.geometry;\n      break;\n    case \"Point\":\n    case \"MultiPoint\":\n      return null;\n    case \"LineString\":\n    case \"Polygon\":\n    case \"MultiLineString\":\n    case \"MultiPolygon\":\n      geometry = geojson;\n      break;\n    default:\n      throw new Error(\"geojson is invalid\");\n  }\n\n  // Find Coord Index\n  if (geometry === null) return null;\n  var coords = geometry.coordinates;\n  switch (geometry.type) {\n    case \"Point\":\n      return point(coords, properties, options);\n    case \"MultiPoint\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      return point(coords[multiFeatureIndex], properties, options);\n    case \"LineString\":\n      if (coordIndex < 0) coordIndex = coords.length + coordIndex;\n      return point(coords[coordIndex], properties, options);\n    case \"Polygon\":\n      if (geometryIndex < 0) geometryIndex = coords.length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[geometryIndex].length + coordIndex;\n      return point(coords[geometryIndex][coordIndex], properties, options);\n    case \"MultiLineString\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (coordIndex < 0)\n        coordIndex = coords[multiFeatureIndex].length + coordIndex;\n      return point(coords[multiFeatureIndex][coordIndex], properties, options);\n    case \"MultiPolygon\":\n      if (multiFeatureIndex < 0)\n        multiFeatureIndex = coords.length + multiFeatureIndex;\n      if (geometryIndex < 0)\n        geometryIndex = coords[multiFeatureIndex].length + geometryIndex;\n      if (coordIndex < 0)\n        coordIndex =\n          coords[multiFeatureIndex][geometryIndex].length - coordIndex;\n      return point(\n        coords[multiFeatureIndex][geometryIndex][coordIndex],\n        properties,\n        options\n      );\n  }\n  throw new Error(\"geojson is invalid\");\n}\n\nexport { coordAll, coordEach, coordReduce, featureEach, featureReduce, findPoint, findSegment, flattenEach, flattenReduce, geomEach, geomReduce, lineEach, lineReduce, propEach, propReduce, segmentEach, segmentReduce };\n",
    "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n",
    "\n// import HttpFileSystem from '@mesh-3d/meteolib/Source/Util/HttpFileSystem/HttpFileSystem'\n// import FileInfo from '@mesh-3d/meteolib/Source/Util/HttpFileSystem/FileInfo'\n// import '@mesh-3d/meteolib/Source/Util/ExtendMethod'\n\nconst { HttpFileSystem, FileInfo } = MeteoLib\n\nfunction extractDatetime(data) {\n    var timeRegex = data.timeRegex;\n    if (!timeRegex) {\n        timeRegex = 'yyyyMMddhhmm';\n    }\n    var regex = timeRegex;\n    regex = regex.replace(\"yyyy\", \"\\\\d{4}\");\n    regex = regex.replace(\"MM\", \"\\\\d{2}\");\n    regex = regex.replace(\"dd\", \"\\\\d{2}\");\n    regex = regex.replace(\"hh\", \"\\\\d{2}\");\n    regex = regex.replace(\"mm\", \"\\\\d{2}\");\n    regex = regex.replace(\"ss\", \"\\\\d{2}\");\n    regex = new RegExp(regex);\n    var time = regex.exec(data.fileName);\n    if (!time || !time.length) {\n        time = regex.exec('20' + data.fileName);\n    }\n    if (!time || !time.length) {\n        time = null;\n    } else {\n        time = parseDate(time[0], timeRegex);\n    }\n    if (data.timeZone) {\n        time = time.add('h', data.timeZone)\n    }\n    data.datetime = time;\n    return time;\n}\n\n/**\n * \n * @param {HfsFileLoader} loader \n * @private\n */\nfunction executeRead(loader) {\n    if (loader._fileList.length == 0) {\n        loader.isLoading = false\n        return;\n    }\n\n    var fileInfo = loader._fileList.shift()\n    var options = loader._readOptionsList.shift() || {}\n    var { offset, length, responseType, encoding } = options;\n    var deferred = loader._deferredList.shift()\n\n    if (!fileInfo || fileInfo._aborted) {\n        if (deferred) {\n            delete deferred.resolve\n            delete deferred.reject\n        }\n        executeRead(loader);\n        return;\n    }\n\n    //指示文件正在加载\n    fileInfo.isLoading = true;\n    //指示加载器正在加载文件\n    loader.isLoading = true;\n    //设置当前正在加载的文件信息\n    loader.currentFileInfo = fileInfo\n\n    loader.hfs.readFile(fileInfo, offset, length, responseType, encoding).then(res => {\n        fileInfo.loaded = true;\n        fileInfo.isLoading = false;\n\n        if (!fileInfo._aborted) {\n            deferred.resolve(res);\n        }\n\n        fileInfo = null;\n        loader.currentFileInfo = null\n        delete deferred.resolve\n        delete deferred.reject\n\n        executeRead(loader);\n\n    }).otherwise(reason => {\n        fileInfo.isLoading = false;\n        fileInfo = null;\n        loader.currentFileInfo = null\n\n        deferred.reject(reason);\n        executeRead(loader)\n    })\n}\n\n/**\n * hfs文件加载器，内部会自动排队，逐个文件地执行读取\n * @example\nvar hfsLoader = new HfsFileLoader({\n    baseUrl: 'http://39.107.107.142:18880/hfs',\n    auth: {\n        uid: 'admin',\n        pwd: 'Adnin@123456'\n    }\n})\nhfsLoader.hfs.getFiles('GZData', 'ECMWF_LR/RH/850', '.000').then(files => {\n    console.log(files);\n    var promises = files.map(file => {\n        return hfsLoader.load(file)\n    })\n    Promise.all(promises).then(fileBuffers => {\n        console.log(fileBuffers);\n    })\n})\n */\nexport default class HfsFileLoader {\n    /**\n     *hfs文件加载器，内部会自动排队，逐个文件地执行读取 \n     * @param {{\n     *  baseUrl:string\n     *  auth: {\n     *      uid: string\n     *      pwd: string\n     *  }\n     * }} config \n     * @example\nvar hfsLoader = new HfsFileLoader({\n    baseUrl: 'http://39.107.107.142:18880/hfs',\n    auth: {\n        uid: 'admin',\n        pwd: 'Adnin@123456'\n    }\n})\nhfsLoader.hfs.getFiles('GZData', 'ECMWF_LR/RH/850', '.000').then(files => {\n    console.log(files);\n    var promises = files.map(file => {\n        return hfsLoader.load(file)\n    })\n    Promise.all(promises).then(fileBuffers => {\n        console.log(fileBuffers);\n    })\n})\n     */\n    constructor(config) {\n        this.hfs = new HttpFileSystem({\n            config: config\n        })\n        this._fileList = [];\n        this._readOptionsList = [];\n        this._deferredList = [];\n        this.isLoading = false;\n        /**\n         * @type {FileInfo}\n         */\n        this.currentFileInfo = null\n    }\n\n    /**\n     * 读取文件数据，如果加载器正在读取文件则排队等待\n     * @param {FileInfo} fileInfo \n     * @param {object} [options] \n     * @param {Number} [options.offset=0] 可选，开始读取的位置（字节数）\n     * @param {Number} [options.length] 可选，读取的字节数 \n     * @param {'arrayBuffer'|'blob'|'json'|'text'|'xml'|'image'} [options.responseType=\"arrayBuffer\"]\n     * @param {String} [options.encoding]\n     * @returns \n     */\n    readFile(fileInfo, options) {\n        if (this._fileList.includes(fileInfo)) {\n            return;\n        }\n        this._fileList.push(fileInfo);\n        this._readOptionsList.push(options);\n        var deferred = {}\n        this._deferredList.push(deferred);\n        fileInfo._aborted = false\n\n        var readPromise = new Promise((resolve, reject) => {\n            deferred.resolve = resolve\n            deferred.reject = reject\n        });\n\n        if (!this.isLoading) {\n            executeRead(this);\n        } else {\n            //指示文件正在排队等待\n            fileInfo.isWaiting = true;\n        }\n\n        return readPromise;\n    }\n\n    /**\n     * 获取文件列表\n    * @param {object} options\n    * @param {String} options.dir 根目录名称\n    * @param {String} options.path 相对路径\n    * @param {String} [options.ext] 可选，如\"*.png\"等\n    * @param {String} [options.startTime] 可选，开始时间\n    * @param {String} [options.endTime] 可选，结束时间\n    * @param {String} [options.timeRegex] 可选，按文件名中的时间筛选，指定时间格式\n    * @param {Boolean} [options.timeZone=0] 时区，0表示北京时间（BTC），8表示世界时间（UTC）\n    * @param {Boolean} [options.fromDb=true] 可选，从数据库中检索\n    *@return {Promise<FileInfo[]>}\n    */\n    getFiles(options) {\n        var { dir, path, ext, startTime, endTime, timeRegex, fromDb, timeZone } = options\n        return new Promise((resolve, reject) => {\n            this.hfs.getFiles(dir, path, ext, startTime, endTime, timeRegex, fromDb).then(files => {\n                if (fromDb == false) {\n                    files = files.map(file => {\n                        file = {\n                            fileName: file,\n                            dir: dir,\n                            path: path,\n                            size: 0\n                        }\n                        file.timeZone = options.timeZone;\n                        file.timeRegex = options.timeRegex;\n                        extractDatetime(file)\n                        return file;\n                    })\n                } else {\n                    files.forEach(file => {\n                        if (file.datetime) {\n                            file.datetime = new Date(file.datetime)\n                            if (data.timeZone) {\n                                file.datetime.add('h', data.timeZone)\n                            }\n                        }\n                    })\n                }\n\n                resolve(files);\n\n            }).otherwise(reject)\n        });\n    }\n\n    /**\n     * 取消读取，如果还没开始读取，则直接退出排队；如果已经开始读取则在读到文件后不处理\n     * @param {FileInfo} fileInfo \n     */\n    cancelRead(fileInfo) {\n        if (!fileInfo.isLoading) {\n            var idx = this._fileList.indexOf(fileInfo)\n            this._fileList.splice(idx, 1);\n        } else {\n            fileInfo._aborted = true;\n        }\n    }\n}",
    "import HfsFileLoader from  \"./HfsFileLoader.js\";\n\nimport * as rasterSampler from  \"./rasterSampler.js\";\n\nimport * as terrainSampler from  \"./terrainSampler.js\";\n\nimport splitLine from  \"./splitLine.js\";\n\nimport IHfsFileLayer from  \"./layers/IHfsFileLayer.js\";\n\nimport MicapsECLayer from  \"./layers/MicapsECLayer.js\";\n\nimport PUPRadarLayer from  \"./layers/PUPRadarLayer.js\";\n\nimport SateCloudLayer from  \"./layers/SateCloudLayer.js\";\n\nimport SwanRadarLayer from  \"./layers/SwanRadarLayer.js\";\n\nimport MicapsUpAirLayer from  \"./layers/MicapsUpAirLayer.js\";\n\nimport SurfLayer from  \"./layers/SurfLayer.js\";\n\nimport GeoGridLayer from  \"./layers/GeoGridLayer.js\";\n\nimport VectorLayerGroup from  \"./layers/VectorLayerGroup.js\";\n\n\nimport {\n    Earth, LocalSkyBox, LocalSkyBoxAnimation,\n    ILayer, ImageTileLayer, TiandituLayer, TiandituImgLayer, TiandituTerLayer, TiandituVecLayer,\n    Vector2dLayer, HighlightPolygonLayer, SealandVec2dLayer,\n    HighlightMarkerLayer, LabelVec2dLayer, CountryVec2dLayer,\n    // Vector2RasterLayer\n    Vector3dLayer,\n    C3DTilesLayer, OsgbLayer,\n    GeoMesh, GeoPolygonMesh, GeoPolylineMesh, GeoWaterMesh,\n    GeoPolylineGeometry, GeoPolygonGeometry,\n    ExtrudedPolygonGeometry, SolidWireframeGeometry, VectorPolygonGeometry,\n    SolidWireframeMaterial,\n    interactive, getPoint, getLine, getPolyline, getRactangle, pickPosition\n} from  \"../node_modules/@mesh-3d/earth/index.js\";\n\n\nimport {\n    MeshVisualizer, CameraUtils, GeometryUtils, RendererUtils\n} from  \"../node_modules/@mesh-3d/core/index.js\";\n\n\nimport {\n    computeArea,\n    defineProperty,\n    determinant, esExtends, GenericWorker,\n    geojsonHelper, ImageUtils, isTypedArray,\n    lineBufferDir3, MathUtils, matrix4LookAt,\n    mergeBuffers, parseDefines,\n    decodeGeojson, decodeGeojsonAsync, decodeGeojsonCoords, decodeGeojsonCoordsAsync, decodeObject,\n    encodeGeojson, encodeGeojsonCoords, encodeObject, encodeObjectValues,\n    Path, save, saveArrayBuffer, saveString,\n    stringToArrayBuffer, StringUtil, triangulate,\n    traverse, getPaddedBuffer, getPaddedBufferSize\n} from  \"../node_modules/@mesh-3d/utils/index.js\";\n\n\nexport {\n    HfsFileLoader,\n    rasterSampler,\n    terrainSampler,\n    splitLine,\n    IHfsFileLayer,\n    MicapsECLayer,\n    PUPRadarLayer,\n    SateCloudLayer,\n    SwanRadarLayer,\n    MicapsUpAirLayer,\n    SurfLayer,\n    GeoGridLayer,\n    VectorLayerGroup,\n\n    //core\n\n    MeshVisualizer, CameraUtils, GeometryUtils, RendererUtils,\n\n    //earth\n\n    Earth, LocalSkyBox, LocalSkyBoxAnimation,\n    ILayer, ImageTileLayer, TiandituLayer, TiandituImgLayer, TiandituTerLayer, TiandituVecLayer,\n    Vector2dLayer, HighlightPolygonLayer, SealandVec2dLayer,\n    HighlightMarkerLayer, LabelVec2dLayer, CountryVec2dLayer,\n    // Vector2RasterLayer\n    Vector3dLayer,\n    C3DTilesLayer, OsgbLayer,\n    GeoMesh, GeoPolygonMesh, GeoPolylineMesh, GeoWaterMesh,\n    GeoPolylineGeometry, GeoPolygonGeometry,\n    ExtrudedPolygonGeometry, SolidWireframeGeometry, VectorPolygonGeometry,\n    SolidWireframeMaterial,\n    interactive, getPoint, getLine, getPolyline, getRactangle, pickPosition\n\n    //utils\n    , computeArea,\n    defineProperty,\n    determinant, esExtends, GenericWorker,\n    geojsonHelper, ImageUtils, isTypedArray,\n    lineBufferDir3, MathUtils, matrix4LookAt,\n    mergeBuffers, parseDefines,\n    decodeGeojson, decodeGeojsonAsync, decodeGeojsonCoords, decodeGeojsonCoordsAsync, decodeObject,\n    encodeGeojson, encodeGeojsonCoords, encodeObject, encodeObjectValues,\n    Path, save, saveArrayBuffer, saveString,\n    stringToArrayBuffer, StringUtil, triangulate,\n    traverse, getPaddedBuffer, getPaddedBufferSize\n}",
    "import ImageTileLayer from  \"../../node_modules/@mesh-3d/earth/Source/layers/imagery/ImageTileLayer.js\";\n\n\nfunction createSymbolImage(options) {\n    options = options || {};\n\n    var cv = document.createElement('canvas')\n    cv.width = 64;\n    cv.height = 64;\n    var ctx = cv.getContext('2d');\n    ctx.fillStyle = options.bgColor || \"#00061a\"//\"#394252\"\n    ctx.fillRect(0, 0, cv.width, cv.height)\n\n    ctx.fillStyle = options.lightColor || '#5076b1'\n\n    var size = 1\n    ctx.fillRect(0, 0, size, size)\n    ctx.fillRect(63, 0, size, size)\n    ctx.fillRect(0, 63, size, size)\n    ctx.fillRect(63, 63, size, size)\n\n    var xSize = 16, ySize = 16;\n    var dx = cv.width / (xSize + 1)\n    var dy = cv.height / (ySize + 1)\n    var y = dy, x = dx;\n    for (let i = 0; i < ySize; i++) {\n        ctx.fillRect(x, 0, size, size)\n        ctx.fillRect(x, cv.height, size, size)\n        x += dx\n    }\n    for (let i = 0; i < xSize; i++) {\n        ctx.fillRect(0, y, size, size)\n        ctx.fillRect(cv.width, y, size, size)\n        y += dy\n    }\n\n    ctx.fillStyle = options.darkColor || '#435a7c'\n\n    y = 0, x = 0;\n    var off = 4, size = 1\n    for (let i = 0; i < ySize; i++) {\n        x = 0;\n        for (let j = 0; j < xSize; j++) {\n            ctx.fillRect(x + off, y + off, size, size)\n            x += dx;\n        }\n        y += dy;\n    }\n    return cv;\n}\n\nfunction createGridImage(options) {\n    var symbol = createSymbolImage(options)\n\n    var cv = document.createElement('canvas')\n    cv.width = 256;\n    cv.height = 256;\n    var ctx = cv.getContext('2d');\n    var y = 0\n    for (let i = 0; i <= 4; i++) {\n        var x = 0;\n        for (let j = 0; j <= 4; j++) {\n            ctx.drawImage(symbol, x, y)\n            x += 64;\n        }\n        y += 64\n    }\n\n    return cv;\n}\n\nexport default class GeoGridLayer extends ImageTileLayer {\n    constructor(options) {\n        options = options || {}\n\n        super(options)\n\n        var gridImg = options.gridImage || createGridImage({\n            bgColor: options.bgColor,\n            lightColor: options.lightColor,\n            darkColor: options.darkColor\n        })\n        var ready = false;\n        var deferred = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deferred.resolve = resolve;\n            deferred.reject = reject;\n        })\n        \n        Object.defineProperties(this, {\n            ready: {\n                get() {\n                    return ready\n                }\n            }\n        })\n\n        if (typeof gridImg != 'string') {\n            ready = true;\n            deferred.resolve(this)\n        }\n\n        var provider = new Cesium.GridImageryProvider({\n            minimumLevel: options.minimumLevel,\n            maximumLevel: options.maximumLevel\n        })\n\n        provider.requestImage = function (x, y, level, request) {\n            if (ready) return gridImg;\n            return Cesium.Resource.fetchImage(gridImg).then((img) => {\n                gridImg = img\n                ready = true\n                deferred.resolve(this)\n                return img\n            }).otherwise(deferred.reject)\n\n        }\n\n        this.provider = provider\n    }\n\n}",
    "// import HfsFileLoader from \"../HfsFileLoader\";\n// import '@mesh-3d/meteolib/Source/Util/ExtendMethod'\n// import FileInfo from \"@mesh-3d/meteolib/Source/Util/HttpFileSystem/FileInfo\";\n\n/**\n * \n * @param {SateCloudLayer} layer \n */\nfunction setCurrentFile(layer) {\n    if (layer.fileList.length == 1) {\n        layer._currentFile = layer.fileList[0]\n    } else {\n        for (let i = 1; i < layer.fileList.length; i++) {\n            const a = layer.fileList[i - 1], b = layer.fileList[i];\n            var dB = b.datetime - layer.currentTime\n            var dA = a.datetime - layer.currentTime\n            if (dB == 0) {//b.datetime == layer.currentTime\n                layer._currentFile = b;\n                layer._currentIndex = i\n                break\n            } else if (dA == 0) {//a.datetime == layer.currentTime\n                layer._currentFile = a;\n                layer._currentIndex = i - 1\n                break\n            } else if (dB < 0) {//a.datetime < layer.currentTime < b.datetime \n                dA = Math.abs(dA)\n                dB = Math.abs(dB)\n                layer._currentFile = dA <= dB ? a : b;\n                layer._currentIndex = dA <= dB ? i - 1 : i;\n                break;\n            }\n        }\n    }\n}\n\n//保存上次查询的时间范围\nvar _startTime, _endTime;\n\nexport default class IHfsFileLayer {\n    /**\n     * \n     * @param {HfsFileLoader} fileLoader \n     * @param {{\n     *  dir: string;\n     *  path: string;\n     *  ext: string;\n     *  fromDb: boolean;\n     *  timeRegex: string;\n     * }} options \n     */\n    constructor(fileLoader, options) {\n        options = options || {}\n        this._fileLoader = fileLoader;\n        this.options = Object.assign({\n            dir: 'GZData',\n            path: '',\n            fromDb: false,\n            timeRegex: 'yyyyMMddhhmmss'\n        }, options)\n        /**\n         * @type {FileInfo[]}\n         */\n        this.fileList = [];\n        this.timeList = []\n        this.isLoading = false;\n        this.earth = null;\n        this.colorMap = null\n        this.rectangle = null\n        this.name = '未命名图层'\n        this.zIndex = options.zIndex || 3\n\n        this._currentTime = null\n        /**\n         * @type {FileInfo}\n         * @private\n         */\n        this._currentFile = null;\n        this._currentIndex = -1;\n        this._show = true;\n    }\n\n    //可读可写属性\n\n    get currentTime() {\n        return this._currentTime\n    }\n    set currentTime(val) {\n        if (this._currentTime != val) {\n            this._currentTime = val;\n            setCurrentFile(this);\n            this.updateLayer()\n        }\n    }\n\n    get show() {\n        return this._show\n    }\n    set show(val) {\n        if (this._show != val) {\n            this._show = val;\n        }\n    }\n\n    //只读属性\n\n    get currentFile() {\n        return this._currentFile\n    }\n    get channelPath() {\n        return this.options.path\n    }\n    get latestTime() {\n        if (!this.timeList || !this.timeList.length) return null;\n        return this.timeList[this.timeList.length - 1]\n    }\n\n    updateList(startTime, endTime) {\n        if (this.isLoading) {\n            return this._listPromise\n        }\n        this.isLoading = true;\n\n        var timeRegex = this.options.timeRegex\n        if (startTime instanceof Date) {\n            startTime = startTime.format(timeRegex)\n        }\n        if (endTime instanceof Date) {\n            endTime = endTime.format(timeRegex)\n        }\n\n        if (startTime) {\n            _startTime = startTime;\n        }\n        if (endTime) {\n            _endTime = endTime;\n        }\n\n        this._listPromise = this._fileLoader.getFiles(Object.assign({}, this.options, {\n            path: this.channelPath,\n            startTime: _startTime,\n            endTime: _endTime\n        })).then(files => {\n            //按时间降序排序\n            files.sort((a, b) => {\n                return a.datetime - b.datetime;\n            })\n            this.fileList.slice(0)\n            this.timeList.slice(0)\n            for (const file of files) {\n                this.fileList.push(file)\n                this.timeList.push(file.datetime)\n            }\n            this.isLoading = false\n            this._listPromise = null\n            this.onListUpdate(this);\n            return this;\n        }).catch(err => {\n            this.isLoading = false\n            this._listPromise = null\n            this.onError(err)\n        })\n        return this._listPromise;\n    }\n    load(earth) {\n        this.earth = earth;\n        return this.updateList()\n    }\n\n    //子类需要实现的接口\n\n    updateLayer(layer) { }\n    unload(earth) {\n        this.earth = null;\n        throw new Error('IHfsFileLayer：卸载方法未实现')\n    }\n    onError(err) { }\n    onListUpdate(layer) { }\n}",
    "/**\n * micaps格点格式的EC数值模式图层\n */\n\n// import GridDataImageryProvider from '@mesh-3d/meteolib/Source/Scene/GridDataImageryProvider'\n// import RasterImageGenerator from '@mesh-3d/meteolib/Source/Render/RasterImageGenerator'\n// import GridData from '@mesh-3d/meteolib/Source/Data/Micaps/GridData'\nconst { GridDataImageryProvider, RasterImageGenerator, GridData } = MeteoLib\nimport HfsFileLoader from \"../HfsFileLoader\";\nimport IHfsFileLayer from \"./IHfsFileLayer\";\n\nfunction removeImageryLayer(layer) {\n    var { imageryLayer, earth } = layer;\n    if (imageryLayer) {\n        earth.imageryLayers.remove(imageryLayer)\n        imageryLayer.imageryProvider.destroy()\n        layer.imageryLayer = null\n    }\n}\n\n/**\n * micaps格点格式的EC数值模式图层\n */\nexport default class MicapsECLayer extends IHfsFileLayer {\n    /**\n     *  micaps格点格式的EC数值模式图层\n     * @param {HfsFileLoader}  fileLoader\n     */\n    constructor(fileLoader) {\n        super(fileLoader, {\n            dir: 'GZData',\n            path: \"ECMWF_LR\",\n            ext: '*.000',\n            timeRegex: 'yyyyMMddhh',\n            zIndex: 4\n        })\n\n        this._element = 'TMP'\n        this._level = '850'\n        this._forecastTime = '000';\n\n        this._lastFile = null\n\n        this.rectangle = Cesium.Rectangle.fromDegrees(105, 24, 112, 32)\n        this.imageryOptions = {\n            // minimumLevel: 1,\n            maximumLevel: 6,\n\n            isoLine: true,\n            lineColorType: 'single',\n            lineColor: 'rgba(40,40,40,0.8)',\n\n            isoValue: true,\n            // isoValueColor: Cesium.Color.fromBytes(0, 0, 0),\n            // isoValueBackColor: Cesium.Color.TRANSPARENT,\n            // isoValueStroke: true,\n            // isoValueStrokeWidth: 4,\n            // isoValueStrokeColor: Cesium.Color.fromBytes(228, 228, 228),\n            // isoValueFontSize: 12,\n            // isoValueFontFamily: 'heiti',\n            // isoValuePadding: 0,\n\n            point: false,\n            maxSamplePointLevel: 6,\n            value: false,\n\n            fill: true,\n            interpolate: false,\n            rectangle: this.rectangle,\n\n        }\n\n        this.ready = false;\n        var deffered = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deffered.resolve = resolve\n            deffered.reject = reject\n        })\n        this._deffered = deffered\n\n        var imageryLayer = null;\n        var gridData = new GridData()\n        Object.defineProperties(this, {\n            gridData: {\n                enumerable: false,\n                get() {\n                    return gridData;\n                }\n            },\n            imageryLayer: {\n                enumerable: false,\n                get() {\n                    return imageryLayer\n                },\n                set(val) {\n                    imageryLayer = val\n                }\n            }\n        })\n\n    }\n\n    get show() {\n        return this._show\n    }\n    set show(val) {\n        if (this.imageryLayer) {\n            this._show = val\n            this.imageryLayer.show = val\n        }\n    }\n\n    get channelPath() {\n        return [this.options.path, this.element, this.level].join('/')\n    }\n\n    //要素\n    get element() {\n        return this._element\n    }\n    set element(val) {\n        if (this._element != val) {\n            this._element = val;\n            this.updateList()\n        }\n    }\n\n    //层次\n    get level() {\n        return this._level\n    }\n    set level(val) {\n        if (this._level != val) {\n            this._level = val;\n            this.updateList()\n        }\n    }\n\n    //预报时间\n    get forecastTime() {\n        return this._forecastTime\n    }\n    set forecastTime(val) {\n        if (this._forecastTime != val) {\n            this._forecastTime = val;\n            this.options.ext = '*.' + val\n            this.updateList()\n        }\n    }\n\n    get showIsoLine() {\n        return this.imageryOptions.isoLine\n    }\n    set showIsoLine(val) {\n        if (this.imageryOptions.isoLine != val) {\n            this.imageryOptions.isoLine = val\n            this.updateImageryLayer()\n        }\n    }\n\n    get fill() {\n        return this.imageryOptions.fill\n    }\n    set fill(val) {\n        if (this.imageryOptions.fill != val) {\n            this.imageryOptions.fill = val\n            this.updateImageryLayer()\n        }\n    }\n\n    get interpolate() {\n        return this.imageryOptions.interpolate\n    }\n    set interpolate(val) {\n        if (this.imageryOptions.interpolate != val) {\n            this.imageryOptions.interpolate = val\n            this.updateImageryLayer()\n        }\n    }\n\n    get clipperLayer() {\n        return this.imageryOptions.clipperLayer;\n    }\n    set clipperLayer(val) {\n        if (val.provider) {\n            val = val.provider\n        }\n        if (this.imageryOptions.clipperLayer != val) {\n            this.imageryOptions.clipperLayer = val;\n        }\n    }\n\n    /**\n     * 基于当前时次的数据重新绘制\n     */\n    updateImageryLayer() {\n        var { imageryLayer, earth, currentFile } = this;\n        /**\n        * @type {GridData}\n        * @private\n        */\n        var gridData = this.gridData\n\n        removeImageryLayer(this)\n\n        if (gridData.familyName) {\n            var element = gridData.element\n            /**\n             * @type {RasterImageGenerator}\n             */\n            var imageGenerator = RasterImageGenerator.find(element);\n            var colorMap = imageGenerator.colorMap;\n\n            var breaks = []\n            var { isolineStartValue, isolineEndValue, isolineSpace } = gridData\n            for (let num = isolineStartValue; num <= isolineEndValue; num += isolineSpace) {\n                breaks.push(num);\n            }\n\n            var provider = new GridDataImageryProvider(Object.assign({}, this.imageryOptions, {\n                colorMap: colorMap,\n                dataArray: gridData.dataArray,\n                width: gridData.width,\n                height: gridData.height,\n                breaks: breaks,\n                dataRectangle: Cesium.Rectangle.fromDegrees(gridData.bbox[0], gridData.bbox[1], gridData.bbox[2], gridData.bbox[3])\n            }))\n\n\n            imageryLayer = earth.imageryLayers.addImageryProvider(provider)\n            imageryLayer.show = this._show\n\n            this.name = currentFile.fileName\n            this.colorMap = colorMap\n            this.imageryLayer = imageryLayer\n\n            //调整图层顺序\n            provider.zIndex = this.zIndex;\n            earth.updateOrder()\n\n            this.ready = true\n            this._deffered.resolve(this)\n\n        } else {\n            var err = new Error('数据名称为空')\n            this.onError(err)\n            this.ready = false\n            this._deffered.resolve(err)\n        }\n    }\n\n    updateLayer() {\n        let currentFile = this.currentFile;\n        if (!currentFile) {\n            return\n        }\n\n        /**\n         * @type {GridData}\n         * @private\n         */\n        var gridData = this.gridData\n        if (this._lastFile == this.currentFile) {\n            this.updateImageryLayer();\n\n        } else {\n            var _fileLoader = this._fileLoader;\n            _fileLoader.readFile(currentFile).then(buf => {\n                if (gridData.loadByteArray(buf)) {\n                    this.updateImageryLayer()\n                } else {\n                    this.onError(new Error('格点数据解析失败'))\n                }\n            }).catch(err => {\n                removeImageryLayer(this)\n                this.onError(err)\n                this.ready = false\n                this._deffered.resolve(err)\n            })\n        }\n    }\n\n    unload() {\n        removeImageryLayer(this)\n    }\n}",
    "\n/**\n * 高空填图图层\n */\n\n// import MeteoLib from \"@mesh-3d/meteolib-wdv\";\n// import CesiumVectorTile from \"cesiumvectortile\";\n\nimport * as turf from  \"../../node_modules/@turf/helpers/dist/es/index.js\";\n\nimport IHfsFileLayer from  \"./IHfsFileLayer.js\";\n\n\nfunction removeImageryLayer(layer) {\n    var { imageryLayer, earth } = layer;\n    if (imageryLayer) {\n        earth.imageryLayers.remove(imageryLayer)\n        imageryLayer.imageryProvider.destroy()\n        layer.imageryLayer = null\n    }\n}\n\n/**\n    *获取风场符号\n    *@param {Number}speed 风速\n    *@param {Number}dir 风向\n    *@return {Canvas}\n    */\nfunction getWindSymbol(speed, dir, layer) {\n    var windSymbolType = layer.windSymbolType;\n    var level = computeWindLevel(speed);\n    var meteoSign = layer.meteoSign;\n    var windSymbols = layer.windSymbols;\n    if (!windSymbols) {\n        windSymbols = {};\n    }\n    if (!windSymbols[windSymbolType]) {\n        windSymbols[windSymbolType] = {};\n    }\n    layer.windSymbols = windSymbols;\n\n    if (!windSymbols[windSymbolType][level]) {\n        var canvas = document.createElement('canvas');\n        canvas.width = Cesium.defaultValue(layer.windSymbolSize, 64);\n        canvas.height = Cesium.defaultValue(layer.windSymbolSize, 64);\n        var ctx = canvas.getContext(\"2d\");\n\n        if (windSymbolType == 'arrow') {\n            var percent = level / 12.0;\n            var arrowLength = percent * canvas.width;\n\n            var top = (canvas.height - arrowLength);\n            var left = arrowLength * 0.125;\n            var lines = [\n                [\n                    { x: left, y: canvas.height },\n                    { x: left, y: top }\n                ],\n                [\n                    { x: left - arrowLength * 0.125, y: top + arrowLength * 0.25 },\n                    { x: left, y: top }\n                ],\n                [\n                    { x: left + arrowLength * 0.125, y: top + arrowLength * 0.25 },\n                    { x: left, y: top }\n                ]\n            ]\n            ctx.lineWidth = layer.meteoSign.lineWidth;\n            ctx.strokeStyle = layer.style.fontColor;\n\n            lines.forEach(function (line) {\n                ctx.beginPath();\n                ctx.moveTo(line[0].x, line[0].y);\n                ctx.lineTo(line[1].x, line[1].y);\n                ctx.stroke();\n            })\n\n        } else {\n            var symbol = meteoSign.GetWindCanvas(speed);\n            ctx.drawImage(symbol, 0, 0, canvas.width, canvas.height)\n        }\n        canvas._symbolLeft = left;\n        windSymbols[windSymbolType][level] = canvas;\n    }\n    if (windSymbols[windSymbolType][level]) {\n        var symbol = windSymbols[windSymbolType][level];\n\n        //\"-\":canvas的角度顺时针为正，而风向是逆时针为正;\n        //风向符号绘制时箭头向上，而micaps格点格式的风向数据，向西为0，向南为90\n        var angle = Cesium.Math.toRadians(dir - 180)// + 90);\n        if (windSymbolType !== 'arrow') {\n            angle += Math.PI;\n        }\n        var cv = document.createElement('canvas');\n        cv.width = symbol.width * 2;\n        cv.height = symbol.height * 2;\n        var ctx1 = cv.getContext('2d');\n        var xpos = cv.width / 2;\n        var ypos = cv.height / 2;\n\n        //旋转图\n        ctx1.translate(xpos, ypos);\n        ctx1.rotate(angle);\n        ctx1.translate(-xpos, -ypos);\n        ctx1.drawImage(\n            symbol,\n            xpos - (symbol._symbolLeft ? symbol._symbolLeft : 0),\n            ypos - symbol.height\n        );\n        return cv;\n    }\n\n}\n/** \n     *数据加载并解析完成后，回调此函数，获取站点符号。在外部或子类中重写此函数，可实现自定义站点填图符号\n     *@param {Object}station 站点至少包含以下属性，更多要素，参考{@link MeteoLib.Data.Micaps.StationData}中资料代码的注释\n     *@param {String}station.stationId 站号\n     *@param {String}station.longitude 经度\n     *@param {String}station.latitude  纬度\n     * @param {MicapsUpAirLayer} layer\n     *@return {Image|Canvas}\n     */\nfunction getSymbol(station, layer) {\n\n    const { defined,\n        Color,\n        writeTextToCanvas\n    } = Cesium;\n\n    var T = station[\"601\"];//温度\n    var H = station[\"421\"];//位势高度(探空)\n    var Q = station[\"805\"];//湿度\n    var TTd = station[\"803\"];//温度露点差\n    var windDir = station[\"201\"];//风向\n    var windSpeed = station[\"203\"];//风速\n    var id = station[\"stationId\"];//ID\n    var Td;\n    if (defined(T) && defined(TTd)) {\n        Td = T - TTd;\n    }\n    try {\n        if (typeof T != 'undefined') {\n            T = T.toFixed(0);\n        }\n        if (typeof Q != 'undefined') {\n            Q = Q.toFixed(0);\n        }\n        if (typeof TTd != 'undefined') {\n            TTd = TTd.toFixed(0);\n        }\n        if (typeof H != 'undefined') {\n            H = H.toFixed(0);\n        }\n        if (typeof Td != 'undefined') {\n            Td = Td.toFixed(0);\n        }\n        T = Number.pad(T, 4, ' ');\n        H = Number.pad(H, 4, ' ');\n        Q = Number.pad(Q, 4, ' ');\n        TTd = Number.pad(TTd, 4, ' ');\n        Td = Number.pad(Td, 4, ' ');\n\n        var style = layer.style;\n        var opts = {\n            fill: true,\n            font: \"bold \" + style.fontSize + 'px ' + style.fontFamily,\n            stroke: style.labelStroke,\n            strokeWidth: style.labelStrokeWidth,\n            strokeColor:\n                typeof style.labelStrokeColor == 'string' ?\n                    Color.fromCssColorString(style.labelStrokeColor) :\n                    style.labelStrokeColor,\n            fillColor: typeof style.fontColor == 'string' ?\n                Color.fromCssColorString(style.fontColor) :\n                style.fontColor\n        };\n\n        opts.fillColor = Color.RED;\n        T = writeTextToCanvas(T, opts)\n        opts.fillColor = typeof style.fontColor == 'string' ?\n            Color.fromCssColorString(style.fontColor) :\n            style.fontColor;\n\n        H = writeTextToCanvas(H, opts)\n        TTd = writeTextToCanvas(TTd, opts)\n        Q = writeTextToCanvas(Q, opts)\n        Td = writeTextToCanvas(Td, opts)\n        id = writeTextToCanvas(id, opts)\n\n        var cv = document.createElement('canvas');\n        var width = id.width * 3;\n        var height = id.height * 4;\n        cv.width = width,\n            cv.height = height;\n        var ctx = cv.getContext('2d')\n        //第一行\n        if (T.height) ctx.drawImage(T, width / 3.0 - T.width, 0);\n        if (H.height) ctx.drawImage(H, width * 2 / 3.0, 0);\n        //第二行\n        if (TTd.height) ctx.drawImage(TTd, width / 3.0 - TTd.width, height / 3.0);\n        if (Q.height) ctx.drawImage(Q, width * 2 / 3.0, height / 3.0);\n        //第三行\n        if (Td.height) ctx.drawImage(Td, width / 3.0 - Td.width, height * 2 / 3.0);\n        ctx.drawImage(id, width * 2 / 3.0, height * 2 / 3.0);\n\n        if (windDir && windSpeed) {\n            var wind = getWindSymbol(windSpeed, windDir, layer);\n\n            var newH = Math.max(wind.height, cv.height);\n            var newW = Math.max(wind.width, cv.width);\n            var newCv = document.createElement(\"canvas\");\n            newCv.height = newH;\n            newCv.width = newW;\n            ctx = newCv.getContext('2d');\n\n            if (cv.width && cv.height)\n                ctx.drawImage(cv, (newW - cv.width) / 2, (newH - cv.height) / 2);\n\n            if (wind.width && wind.height)\n                ctx.drawImage(wind,\n                    (newW - wind.width) / 2,\n                    (newH - wind.height) / 2)\n\n            // ctx.drawImage(cv, (newW - cv.width) / 2, (newH - cv.height) / 2);\n\n            // ctx.drawImage(wind,\n            //     (newW - wind.width) / 2,\n            //     (newH - wind.height) / 2)\n        }\n        ctx.fillStyle = style.fontColor.toCssColorString()\n        ctx.fillRect(ctx.canvas.width / 2 - 2, ctx.canvas.height / 2 - 2, 4, 4);\n        return ctx.canvas;\n    } catch (e) {\n        console.log(e)\n    }\n}\n\nfunction computeWindLevel(speed) {\n    var level = 1;\n    //1级风\n    if (speed <= 1.5) {\n        level = 1;\n    }\n    //2级风\n    else if (speed <= 3.3) {\n        level = 2;\n    }\n    //3级风\n    else if (speed <= 5.4) {\n        level = 3;\n    }\n    //4级风\n    else if (speed <= 7.9) {\n        level = 4;\n    }\n    //5级风\n    else if (speed <= 10.7) {\n        level = 5;\n    }\n    //6级风\n    else if (speed <= 13.8) {\n        level = 6;\n    }\n    //7级风\n    else if (speed <= 17.1) {\n        level = 7;\n    }\n    //8级风\n    else if (speed <= 20.7) {\n        level = 8;\n    }\n    //9级风\n    else if (speed <= 24.4) {\n        level = 9;\n    }\n    //10级风\n    else if (speed <= 28.4) {\n        level = 10;\n    }\n    //11级风\n    else if (speed <= 32.6) {\n        level = 11;\n    }\n    //12级风\n    else {\n        level = 12;\n    }\n    return level;\n}\n\n/**\n* 站点数据转成geojson\n*@param {MeteoLib.Data.Micaps.StationData}stationData\n*@return {Geojson}\n*/\nfunction toGeojson(stationData, layer) {\n    var stationIds = Object.keys(stationData.stationDataMap);\n    var pts = [];\n\n    stationIds.forEach(function (id) {\n\n        var st = stationData.stationDataMap[id];\n\n        st.stationId = id;\n\n        st.longitude = st[\"1\"];\n        st.latitude = st[\"2\"];\n        delete st[\"1\"], delete st['2'];\n        st.symbol = getSymbol(st, layer);\n\n        var pt = turf.point([st.longitude, st.latitude], st)\n        pts.push(pt);\n    })\n\n    if (pts.length > 0) {\n        pts = turf.featureCollection(pts);\n        pts.name = stationData.description + \"_\" + stationData.level + stationData.levelDescription;\n        return pts;\n    }\n    return null;\n}\n\n/**\n * 高空填图图层\n */\nexport default class MicapsUpAirLayer extends IHfsFileLayer {\n    constructor(fileLoader) {\n        super(fileLoader, {\n            dir: 'LNData',\n            path: \"UPPER_AIR/PLOT/\",\n            ext: '*.000',\n            timeRegex: 'yyyyMMddhhmmss',\n            zIndex: 7\n        })\n        this._level = '100'\n\n        this.ready = false;\n        var deffered = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deffered.resolve = resolve\n            deffered.reject = reject\n        })\n        this._deffered = deffered\n\n        var meteoSign = new MeteoLib.MeteoSign();\n        /**\n         * @type {MeteoLib.MeteoSign}\n         */\n        this.meteoSign = meteoSign;\n        meteoSign.lineWidth = 3;\n        meteoSign.size = 64;\n        meteoSign.color = \"black\";\n\n        this.style = {\n            showLabel: true,\n            fontColor: Cesium.Color.BLACK,\n            labelStroke: false,\n            labelStrokeWidth: 4,\n            labelStrokeColor: Cesium.Color.BLACK,\n            showMarker: false,\n            labelPropertyName: \"text\",\n            outlineColor: Cesium.Color.BLACK\n        }\n        this._windSymbolType = \"windShaft\";//windShaft,arrow\n        this._windSymbolSize = 32;\n        this.windSymbols = {};\n\n        var _featureCollection = null;\n        var imageryLayer = null;\n        var _stationData = new MeteoLib.StationData()\n\n        Object.defineProperties(this, {\n            _featureCollection: {\n                enumerable: false,\n                get() {\n                    return _featureCollection\n                },\n                set(val) {\n                    _featureCollection = val\n                }\n            },\n            _stationData: {\n                enumerable: false,\n                get() {\n                    return _stationData\n                }\n            },\n            imageryLayer: {\n                enumerable: false,\n                get() {\n                    return imageryLayer\n                },\n                set(val) {\n                    imageryLayer = val\n                }\n            }\n        })\n\n    }\n\n    get show(){\n        return  this._show\n    }\n    set show(val) {\n        if (this.imageryLayer) {\n            this._show = val\n            this.imageryLayer.show = val\n        }\n    }\n\n    get channelPath() {\n        return this.options.path + this.level\n    }\n\n    get level() {\n        return this._level\n    }\n    set level(val) {\n        if (this._level != val) {\n            this._level = val\n            this.updateList()\n        }\n    }\n\n    get windSymbolType() {\n        return this._windSymbolType\n    }\n    set windSymbolType(val) {\n        if (this._windSymbolType != val) {\n            this._windSymbolType = val\n            this.windSymbols = {}\n            this.updateImageryLayer()\n        }\n    }\n\n    get windSymbolSize() {\n        return this._windSymbolSize\n    }\n    set windSymbolSize(val) {\n        if (this._windSymbolSize != val) {\n            this._windSymbolSize = val\n            this.windSymbols = {}\n            this.updateImageryLayer()\n        }\n    }\n\n    get symbolSize() {\n        return this.meteoSign.size\n    }\n    set symbolSize(val) {\n        if (this.meteoSign.size != val) {\n            this.meteoSign.size = val\n            this.windSymbols = {}\n            this.updateImageryLayer()\n        }\n    }\n\n    updateImageryLayer() {\n        var { imageryLayer, earth, currentFile } = this;\n\n        /**\n         * @type {MeteoLib.StationData}\n         * @private\n         */\n         var stationData = this._stationData;\n        var fcs = toGeojson(stationData, this)\n        this._featureCollection = fcs;\n\n        if (fcs && fcs.features.length > 1) {\n            var provider = new CesiumVectorTile.VectorTileImageryProvider({\n                source: fcs,\n                defaultStyle: this.style,\n                minimumLevel: 3,\n                styleFilter: function (feature, style) {\n                    if (feature.properties.lineWidth) {\n                        style.lineWidth = feature.properties.lineWidth;\n                    } else if (Cesium.defined(feature.properties.symbol)) {\n                        style.markerImage = feature.properties.symbol;\n                        if (style.markerImage) {\n                            style.pointSize = 64;\n                            style.showMarker = true;\n                        } else {\n                            style.showMarker = false;\n                        }\n                    }\n                    return style;\n                }\n            })\n\n            imageryLayer = earth.imageryLayers.addImageryProvider(provider)\n            imageryLayer.show = this._show\n\n            this.name = currentFile.fileName\n            this.imageryLayer = imageryLayer\n\n            //调整图层顺序\n            provider.zIndex = this.zIndex;\n            earth.updateOrder()\n\n            this.ready = true\n            this._deffered.resolve(this)\n        }\n        else {\n            this.error(new Error(\"高空填图数据文件为空，不包含任何站点数据\"))\n            return;\n        }\n\n    }\n\n    updateLayer() {\n        let currentFile = this.currentFile;\n        if (!currentFile) {\n            return\n        }\n\n        /**\n         * @type {MeteoLib.StationData}\n         * @private\n         */\n        var stationData = this._stationData\n        if (this._lastFile == this.currentFile) {\n            this.updateImageryLayer();\n\n        } else {\n            var _fileLoader = this._fileLoader;\n            _fileLoader.readFile(currentFile).then(buf => {\n                if (stationData.loadByteArray(buf)) {\n                    this.updateImageryLayer()\n                } else {\n                    this.onError(new Error('高空填图数据解析失败'))\n                }\n            }).catch(err => {\n                removeImageryLayer(this)\n                this.onError(err)\n                this.ready = false\n                this._deffered.resolve(err)\n            })\n        }\n    }\n\n    unload() {\n        removeImageryLayer(this)\n    }\n}",
    "/**\n * 单站雷达PUP产品图层\n */\n\n// import PupProductFormat from '@mesh-3d/meteolib/Source/Data/PUP/PupProductFormat'\n// import RasterImageGenerator from '@mesh-3d/meteolib/Source/Render/RasterImageGenerator'\n// import CoordinateHelper from '@mesh-3d/meteolib/Source/Data/Radar/CoordinateHelper';\n// import MyLatLng from '@mesh-3d/meteolib/Source/Data/Radar/MyLatLng'\nconst { PupProductFormat, RasterImageGenerator, CoordinateHelper, MyLatLng } = MeteoLib;\nimport HfsFileLoader from \"../HfsFileLoader\";\nimport IHfsFileLayer from \"./IHfsFileLayer\";\n\nfunction removeImageryLayer(layer) {\n    var { imageryLayer, earth } = layer;\n    if (imageryLayer) {\n        earth.imageryLayers.remove(imageryLayer)\n        imageryLayer.imageryProvider.destroy()\n        layer.imageryLayer = null\n    }\n}\n\n/**\n * 获取产品名称\n * @param {*}} code \n * @returns \n */\nfunction getDataName(code) {\n\n    //基本反射率  19  /R/19\n    //基本反射率  20  /R/20\n    //基本速度    26  /V/26\n    //基本速度    27  /V/27\n    //组合反射率  37  /CR/37\n    //组合反射率  38  /CR/38\n    //回波顶高    41  /ET/41\n    //风廓线      48  /VWP/48\n    //风暴相对平均径向速度 56 /SRM/56\n    //垂直积分液态含水量  57 /VIL/57\n    //风暴追踪信息    58  /STI/58\n    //冰雹指数        59  /HI/59 \n    //中尺度气旋      60  /M/60\n    //龙卷漩涡特征    61  /TVS/61\n    //一小时累积降水  78  /OHP/78\n    //三小时累积降水  79  /THP/79\n    //风暴总累计降水  80  /STP/80\n    //CAPPI反射率     110 /CAR/110\n\n    var dataName = \"\";\n    switch (code) {\n        case 36:\n        case 37:\n        case 38: dataName = \"CR\";\n            break;\n        case 41: dataName = \"ET\";\n            break;\n        case 57: dataName = \"VIL\";\n            break;\n        default:\n            return undefined;\n    }\n    return dataName;\n}\n\n/**\n * 获取产品分辨率，单位为km\n * @param {*} code \n * @returns \n */\nfunction getResolution(code) {\n    switch (code) {\n        case 37:\n            return 0.54;\n        case 36:\n        case 38:\n        case 41:\n        case 57:\n            return 2.2;\n        default:\n            return undefined;\n    }\n\n}\n\n\n/**\n* 雷达局部坐标转经纬高度（等距离投影时使用）\n* @param {any} centerWC\n* @param {any} srcLC\n* @param {any} resultCartographic\n*@private\n*/\nfunction radarCoordinatesToCartographicEquidistance(centerWC, srcLC, ellipsoid, resultCartographic) {\n    const { Cartographic, Ellipsoid } = Cesium, _Math = Cesium.Math\n    if (ellipsoid instanceof Cartographic) {\n        resultCartographic = ellipsoid;\n        ellipsoid = null\n    }\n    if (!ellipsoid) {\n        ellipsoid = Ellipsoid.WGS84;\n    }\n    if (!resultCartographic) {\n        resultCartographic = new Cartographic()\n    }\n    resultCartographic = Cartographic.fromCartesian(centerWC);\n    var cn = new MyLatLng(\n        _Math.toDegrees(resultCartographic.longitude),\n        _Math.toDegrees(resultCartographic.latitude)\n    );\n    var length = Math.sqrt(Math.pow(srcLC.x, 2) + Math.pow(srcLC.y, 2));\n    var angle = _Math.toDegrees(Math.atan2(srcLC.x, srcLC.y));\n    var lonlat = CoordinateHelper.getMyLatLng(cn, length / 1000.0, angle);\n    resultCartographic.longitude = _Math.toRadians(lonlat.m_Longitude);\n    resultCartographic.latitude = _Math.toRadians(lonlat.m_Latitude);\n    resultCartographic.height = 0;\n    return resultCartographic;\n\n}\n\n/**\n * 计算产品四至范围\n * @param {*} pupProduct \n * @returns \n */\nfunction computeViewRectangle(pupProduct) {\n    const { Cartesian3, Rectangle } = Cesium, _Math = Cesium.Math;\n\n    var packet = pupProduct.productSymbology.layers[0].packets[0];\n\n    var width = packet.numberOfRows,\n        height = width;\n\n    var cnLon = pupProduct.productDescription.longitude;\n    var cnLat = pupProduct.productDescription.latitude;\n    var cnH = pupProduct.productDescription.height * 0.3048; //英尺转米\n    var res = getResolution(pupProduct.msgHeader.code);\n\n    var xDistance = width * res / 4 + 36,\n        yDistance = height * res / 4 + 30;\n\n    var cn = Cartesian3.fromDegrees(cnLon, cnLat, cnH);\n    var west = 190, south = 190, east = -190, north = -190;\n    var xs = [xDistance, -xDistance];\n    var ys = [yDistance, -yDistance];\n    for (var i = 0; i < xs.length; i++) {\n        for (var j = 0; j < ys.length; j++) {\n            var lc = new Cartesian3(xs[i] * 1000, ys[j] * 1000, 0);\n            var lonlat = radarCoordinatesToCartographicEquidistance(cn, lc);\n            west = Math.min(west, lonlat.longitude);\n            east = Math.max(east, lonlat.longitude);\n            south = Math.min(south, lonlat.latitude);\n            north = Math.max(north, lonlat.latitude);\n        }\n    }\n\n    return new Rectangle(west, south, east, north);\n\n}\n\n/**\n * 获取产品图生成工具\n * @param {*} code \n * @returns \n */\nfunction getImageGenerator(code) {\n    var dataName = getDataName(code);\n\n    var imageGenerator = null;\n    if (dataName == \"CR\") {\n        imageGenerator = RasterImageGenerator.Radar.R;\n    } else if (dataName == \"ET\") {\n        imageGenerator = RasterImageGenerator.Radar.ET;\n    } else if (dataName == \"VIL\") {\n        imageGenerator = RasterImageGenerator.Radar.VIL;\n    }\n    return imageGenerator\n}\n\n/**\n * 单站雷达PUP产品图层\n */\nexport default class PUPRadarLayer extends IHfsFileLayer {\n    /**\n     * 单站雷达PUP产品图层\n     * @param {HfsFileLoader}  fileLoader\n     */\n    constructor(fileLoader) {\n        super(fileLoader, {\n            dir: 'GZData',\n            path: \"SINGLERADAR/PRODUCTS\",\n            ext: '*.851',\n            zIndex: 6,\n            timeRegex: 'yyyyMMdd.hhmmss'\n        })\n\n        this._station = '贵阳'\n        this._prodCode = 'CR/38'\n\n        var _pupProduct = new PupProductFormat()\n\n        this.ready = false;\n        var deffered = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deffered.resolve = resolve\n            deffered.reject = reject\n        })\n        this._deffered = deffered\n\n        var imageryLayer = null;\n        Object.defineProperties(this, {\n            _pupProduct:{\n                enumerable: false,\n                get(){\n                    return _pupProduct\n                }\n            },\n            imageryLayer: {\n                enumerable: false,\n                get() {\n                    return imageryLayer\n                },\n                set(val) {\n                    imageryLayer = val\n                }\n            }\n        })\n\n    }\n\n    get show(){\n        return  this._show\n    }\n    set show(val) {\n        if (this.imageryLayer) {\n            this._show = val\n            this.imageryLayer.show = val\n        }\n    }\n\n    get channelPath() {\n        return [this.options.path, this.station, this.prodCode].join('/');\n    }\n\n    //雷达站点名称\n    get station() {\n        return this._station\n    }\n    set station(val) {\n        if (this._station != val) {\n            this._station = val;\n            this.updateList()\n        }\n    }\n\n    /**\n     * 产品代码:\n     * * 组合反射率： CR/38\n     * * 回波顶高：ET/41\n     * * 垂直积分液态含水量：VIL/57\n     */\n    get prodCode() {\n        return this._prodCode\n    }\n    set prodCode(val) {\n        if (this._prodCode != val) {\n            this._prodCode = val;\n            this.updateList()\n        }\n    }\n\n\n    /**\n     * 基于当前时次的数据重新绘制\n     */\n    updateImageryLayer() {\n        var { imageryLayer, earth, currentFile } = this;\n        /**\n         * @type {PupProductFormat}\n         * @private\n         */\n        var pupProduct = this._pupProduct\n\n        removeImageryLayer(this)\n\n        /**\n         * @type {RasterImageGenerator}\n         */\n        var imageGenerator = getImageGenerator(pupProduct.msgHeader.code);\n        var colorMap = imageGenerator.colorMap;\n        var rectangle = computeViewRectangle(pupProduct);\n        var packet = pupProduct.productSymbology.layers[0].packets[0];\n        var width = packet.numberOfRows, height = width;\n        var data = packet.colorCodes;\n\n        var oldSelectColorByIndex = imageGenerator.selectColorByIndex;\n        imageGenerator.selectColorByIndex = true;\n\n        var image = imageGenerator.generate(data, width, height);\n\n        imageGenerator.selectColorByIndex = oldSelectColorByIndex;\n\n        var provider = new Cesium.SingleTileImageryProvider({\n            url: image,\n            rectangle: rectangle\n        })\n\n        imageryLayer = earth.imageryLayers.addImageryProvider(provider)\n        imageryLayer.show = this._show\n\n        this.name = currentFile.fileName\n        this.colorMap = colorMap\n        this.imageryLayer = imageryLayer\n\n        //调整图层顺序\n        provider.zIndex = this.zIndex;\n        earth.updateOrder()\n\n        this.ready = true\n        this._deffered.resolve(this)\n\n    }\n\n    updateLayer() {\n        let currentFile = this.currentFile;\n        if (!currentFile) {\n            return\n        }\n\n        /**\n         * @type {PupProductFormat}\n         * @private\n         */\n        var pupProduct = this._pupProduct\n        if (this._lastFile == this.currentFile) {\n            this.updateImageryLayer();\n\n        } else {\n            var _fileLoader = this._fileLoader;\n            _fileLoader.readFile(currentFile).then(buf => {\n                if (pupProduct.loadByteArray(buf)) {\n                    this.updateImageryLayer()\n                } else {\n                    this.onError(new Error('PUP雷达产品数据解析失败'))\n                }\n            }).catch(err => {\n                removeImageryLayer(this)\n                this.onError(err)\n                this.ready = false\n                this._deffered.resolve(err)\n            })\n        }\n    }\n\n    unload() {\n        removeImageryLayer(this)\n    }\n}",
    "/**\n * 卫星云图图层\n */\n\n// import AwxSateImageryProvider from \"@mesh-3d/meteolib/Source/Scene/AwxSateImageryProvider\";\nconst { AwxSateImageryProvider } = MeteoLib;\nimport HfsFileLoader from \"../HfsFileLoader\";\nimport IHfsFileLayer from \"./IHfsFileLayer\";\n\nexport default class SateCloudLayer extends IHfsFileLayer {\n    /**\n     *   \n     * @param {HfsFileLoader}  fileLoader\n     */\n    constructor(fileLoader) {\n        super(fileLoader, {\n            dir: 'GZData',\n            path: \"SATELLITE/FY4A/L1/CHINA/\",\n            ext: '*.awx',\n            zIndex: 2\n        })\n\n        this._channel = 'C001'\n\n        this.ready = false;\n        var deffered = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deffered.resolve = resolve\n            deffered.reject = reject\n        })\n        this._deffered = deffered\n\n        var imageryLayer = null;\n        Object.defineProperties(this, {\n            imageryLayer: {\n                enumerable: false,\n                get() {\n                    return imageryLayer\n                },\n                set(val) {\n                    imageryLayer = val\n                }\n            }\n        })\n\n    }\n\n    get show(){\n        return  this._show\n    }\n    set show(val) {\n        if (this.imageryLayer) {\n            this._show = val\n            this.imageryLayer.show = val\n        }\n    }\n\n    get channelPath() {\n        return this.options.path + this.channel\n    }\n\n    /**\n     * 可见光：C002\n     * 红外：C012\n     * 水汽：C008\n     */\n    get channel() {\n        return this._channel\n    }\n    set channel(val) {\n        if (this._channel != val) {\n            this._channel = val;\n            this.updateList()\n        }\n    }\n\n    updateLayer() {\n        let currentFile = this._currentFile;\n        if (!currentFile) {\n            return\n        }\n        var { imageryLayer, earth, channelPath, options } = this;\n        if (imageryLayer) {\n            earth.imageryLayers.remove(imageryLayer)\n            imageryLayer.imageryProvider.destroy()\n            this.imageryLayer = imageryLayer = null\n        }\n\n        var fileName = currentFile.fileName;\n        var iPrvovider = new AwxSateImageryProvider({\n            url: this._fileLoader.hfs.getUrl({\n                dir: options.dir,\n                path: channelPath\n            }),\n            fileName: fileName\n        })\n        imageryLayer = earth.imageryLayers.addImageryProvider(iPrvovider);\n        imageryLayer.show = this._show\n\n        iPrvovider.readyPromise.then(() => {\n            var imageGenerator = iPrvovider.imageGenerator\n            this.colorMap = imageGenerator.colorMap\n            this.rectangle = iPrvovider._dataRectangle\n\n            this.ready = true\n            this._deffered.resolve(this)\n\n        }).otherwise(reason => {\n            this._deffered.reject(reason)\n        })\n\n        this.imageryLayer = imageryLayer\n        this.name = currentFile.fileName\n\n        //调整图层顺序\n        iPrvovider.zIndex = this.zIndex;\n        earth.updateOrder()\n\n    }\n\n    unload() {\n        var { imageryLayer, earth } = this;\n        if (imageryLayer) {\n            earth.imageryLayers.remove(imageryLayer)\n            imageryLayer.imageryProvider.destroy()\n            imageryLayer = null\n        }\n    }\n}",
    "\n/**\n * 地面监测要素图层\n */\n\n// import { GridDataImageryProvider,RasterImageGenerator, Interpolate } from \"@mesh-3d/meteolib-wdv\";\nconst { GridDataImageryProvider, RasterImageGenerator, Interpolate, GridDataColorMap } = MeteoLib\nimport IHfsFileLayer from \"./IHfsFileLayer\";\n\n/**\n * \n * @param {object[]} dataset \n */\nfunction computeBBox(dataset) {\n    var bbox = [180, 90, -180, -90]\n    for (const row of dataset) {\n        var { Lon, Lat } = row;\n        bbox[0] = Math.min(Lon, bbox[0])\n        bbox[1] = Math.min(Lat, bbox[1])\n        bbox[2] = Math.max(Lon, bbox[2])\n        bbox[3] = Math.max(Lat, bbox[3])\n    }\n    return bbox\n}\n\nfunction updateInterpDataset(dataset, fieldName, bbox, numX, numY) {\n    var xs = [], ys = [], vals = [];\n    dataset.forEach(function (data) {\n        var lon = parseFloat(data.Lon),\n            lat = parseFloat(data.Lat);\n        var v = parseFloat(data[fieldName]);\n\n        xs.push(lon);\n        ys.push(lat);\n        vals.push(v);\n    })\n    var s = [xs, ys, vals];\n\n    var gridXY = Interpolate.CreateGridXY_Num(bbox[0], bbox[1], bbox[2], bbox[3], numX, numY);\n    var result = Interpolate.Interpolation_IDW_Neighbor(s, gridXY[0], gridXY[1], 8);\n    result.reverse();\n\n    var dataArray = new Float32Array(numX * numY);\n    var idx = 0;\n\n    for (var i = 0; i < numY; i++) {\n        for (var j = 0; j < numX; j++) {\n            var v = result[i][j]\n            dataArray[idx++] = v;\n        }\n    }\n\n    return dataArray\n}\n\nfunction removePointsLayer(layer) {\n    var { points, earth } = layer;\n    while (points.length) {\n        var entity = points.shift()\n        earth.entities.remove(entity)\n    }\n}\n\nfunction removeImageryLayer(layer) {\n    var { imageryLayer, earth } = layer;\n    if (imageryLayer) {\n        earth.imageryLayers.remove(imageryLayer)\n        imageryLayer.imageryProvider.destroy()\n        layer.imageryLayer = null\n    }\n}\n\n/**\n * 地面监测要素图层\n */\nexport default class SurfLayer extends IHfsFileLayer {\n    constructor(fileLoader) {\n        super(fileLoader, {\n            dir: 'GZData',\n            path: 'surf',\n            ext: '*.json',\n            timeRegex: 'yyyyMMddhhmmss',\n            zIndex: 8\n        })\n\n        this._element = \"MAX_PRE_1h\";\n        this._textField = \"Station_Name\"\n\n        this._interpWidth = 256;\n        this._interpHeight = 256;\n\n        //色斑图和等值线显示配置\n        this.imageryOptions = {\n            // clipperLayer: clipperLayer,\n            zIndex: 9,\n\n            //原始数据点显示设置\n            point: false,\n            pointSize: 2,\n            pointColor: Cesium.Color.fromBytes(128, 128, 128),\n\n            pointDensity: 5, //指示点的密度，值越大越稀疏\n            maximumPointDensity: 8, //指示当自动分级（pointDensity为0或者不设置）时点的密度，值越大越稀疏\n\n            //原始数据点数值显示设置\n            value: false,\n            valueColor: Cesium.Color.fromBytes(128, 128, 128),\n            valueBackColor: Cesium.Color.TRANSPARENT,\n            valueStroke: true,\n            valueStrokeWidth: 1,\n            valueStrokeColor: Cesium.Color.WHITE,\n            valueFontSize: 9,\n            //valueFontFamily: 'kaiti',\n            valuePadding: 0,\n\n            //等值线数值显示设置\n            isoValue: true,\n            isoValueColor: Cesium.Color.fromBytes(0, 0, 0),\n            isoValueBackColor: Cesium.Color.TRANSPARENT,\n            isoValueStroke: true,\n            isoValueStrokeWidth: 4,\n            isoValueStrokeColor: Cesium.Color.fromBytes(228, 228, 228),\n            isoValueFontSize: 12,\n            isoValueFontFamily: 'heiti',\n            isoValuePadding: 0,\n\n            //等值线显示设置\n            isoLine: true,\n            // lineColor: Cesium.Color.WHITE,\n            lineWidth: 1,\n            lineDash: [5, 0, 5, 0], //虚线样式，不设置则为实线\n            lineColorType: \"single\",\n\n            //栅格色斑图数据显示设置\n            fill: true,\n            // colorMap: this._colorMap,\n            interpolate: true,\n\n            // dataArray: dataArray,\n            // width: width,\n            // height: height,\n            // breaks: breaks,\n            maximumLevel: 8,\n            // rectangle: rectangle\n        }\n\n        //点显示配置\n        this._showPoint = true;\n        this._showText = false;\n        this._showValue = true;\n\n        this._pointGraphics = {\n            pixelSize: 10,\n            outlineWidth: 1.5\n        };\n        this._labelGraphics = {\n            horizontalOrigin: Cesium.HorizontalOrigin.CENTER,\n            verticalOrigin: Cesium.VerticalOrigin.BOTTOM,\n            font: '20px sans-serif',\n            fillColor: Cesium.Color.BLACK,\n            pixelOffset: new Cesium.Cartesian2(0, -8)\n        };\n        this._disableDepthTestDistance = null\n\n        this.ready = false;\n        var deffered = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deffered.resolve = resolve\n            deffered.reject = reject\n        })\n        this._deffered = deffered\n\n        var imageGeneratorPRE = new RasterImageGenerator({\n            name: 'PRE',\n            colorMap: [\n                [-0.99999, 1, [212, 255, 192, 255], '0~1'],\n                [1, 2, [166, 240, 145, 255], '1~2'],\n                [2, 4, [59, 166, 10, 255], '2~4'],\n                [4, 6, [94, 182, 254, 255], '4~6'],\n                [6, 8, [0, 2, 245, 255], '6~8'],\n                [8, 10, [2, 112, 75, 255], '8~10'],\n                [10, 20, [254, 1, 242, 255], '10~20'],\n                [20, 50, [218, 79, 12, 255], '20~50'],\n                [50, 65535, [120, 1, 0, 255], '>50']\n            ]\n        })\n        var imageGeneratorRHU = new RasterImageGenerator({\n            name: 'RHU',\n            colorMap: [\n                [-20, 0, [213, 6, 55, 255], '-20~0'],\n                [0, 10, [231, 0, 0, 255], '0~10'],\n                [10, 20, [252, 38, 3, 255], '10~20'],\n                [20, 30, [247, 79, 20, 255], '20~30'],\n                [30, 40, [249, 250, 212, 255], '30~40'],\n                [40, 50, [238, 252, 202, 255], '40~50'],\n                [50, 60, [64, 73, 202, 255], '50~60'],\n                [60, 70, [84, 64, 182, 255], '60~70'],\n                [70, 80, [70, 33, 164, 255], '70~80'],\n                [80, 90, [51, 13, 128, 255], '80~90'],\n                [90, 100, [8, 0, 0, 255], '90~100']\n            ]\n        })\n        var imageGeneratorTEM = new RasterImageGenerator({\n            name: 'TEM',\n            colorMap: [\n                [-66666666, -30, [0, 0, 255, 255], '<-30'],\n                [-30, -28, [0, 20, 255, 255], '-30~-28'],\n                [-28, -24, [0, 70, 255, 255], '-28~-24'],\n                [-24, -22, [0, 100, 255, 255], '-24~-22'],\n                [-22, -20, [0, 170, 255, 255], '-22~-20'],\n                [-20, -18, [0, 200, 255, 255], '-20~-18'],\n                [-18, -16, [0, 230, 255, 255], '-18~-16'],\n                [-16, -14, [0, 255, 245, 255], '-16~-14'],\n                [-14, -12, [0, 255, 215, 255], '-14~-12'],\n                [-12, -10, [0, 255, 175, 255], '-12~-10'],\n                [-10, -8, [0, 255, 145, 255], '-10~-8'],\n                [-8, -6, [0, 255, 110, 255], '-8~-6'],\n                [-6, -4, [0, 255, 80, 255], '-6~-4'],\n                [-4, -2, [0, 255, 45, 255], '-4~-2'],\n                [-2, 0, [0, 255, 15, 255], '-2~0'],\n                [0, 2, [20, 255, 0, 255], '0~2'],\n                [2, 4, [50, 255, 0, 255], '2~4'],\n                [4, 6, [90, 255, 0, 255], '4~6'],\n                [6, 8, [120, 255, 0, 255], '6~8'],\n                [8, 10, [155, 255, 0, 255], '8~10'],\n                [10, 12, [185, 255, 0, 255], '10~ 12'],\n                [12, 14, [220, 255, 0, 255], '12~14'],\n                [14, 16, [255, 255, 0, 255], '14~16'],\n                [16, 18, [255, 225, 0, 255], '16~ 18'],\n                [18, 20, [255, 195, 0, 255], '18~20'],\n                [20, 22, [255, 160, 0, 255], '20~ 22'],\n                [22, 24, [255, 130, 0, 255], '20~ 22'],\n                [24, 26, [255, 100, 0, 255], '24~ 26'],\n                [26, 28, [255, 65, 0, 255], '26~ 28'],\n                [28, 30, [255, 45, 0, 255], '28~ 30'],\n                [30, 33, [255, 37, 0, 255], '30~ 33'],\n                [33, 35, [255, 20, 0, 255], '33~35'],\n                [35, 666666666, [255, 0, 0, 255], '35>']\n            ]\n        })\n\n        var imageryLayer = null, _dataset, _dataArray, points = [];\n        Object.defineProperties(this, {\n            _dataArray: {\n                enumerable: false,\n                get() {\n                    return _dataArray;\n                },\n                set(val) {\n                    _dataArray = val\n                }\n            },\n            _dataset: {\n                enumerable: false,\n                get() {\n                    return _dataset\n                },\n                set(val) {\n                    _dataset = val\n                }\n            },\n            imageGenerator: {\n                get() {\n                    var imageGenerator = imageGeneratorPRE;\n                    switch (this._element) {\n                        case 'TEM':\n                            imageGenerator = imageGeneratorTEM\n                            break;\n                        case 'RHU':\n                            imageGenerator = imageGeneratorRHU\n                            break;\n                        default:\n                            break;\n                    }\n                    imageGenerator.ready = true\n                    return imageGenerator;\n                }\n            },\n            imageryLayer: {\n                enumerable: false,\n                get() {\n                    return imageryLayer\n                },\n                set(val) {\n                    imageryLayer = val\n                }\n            },\n            points: {\n                enumerable: false,\n                get() {\n                    return points;\n                }\n            }\n        })\n\n    }\n\n    get element() {\n        return this._element\n    }\n    set element(val) {\n        if (this._element != val) {\n            this._element = val\n            this.updateImageryLayer()\n        }\n    }\n\n    get showIsoLine() {\n        return this.imageryOptions.isoLine\n    }\n    set showIsoLine(val) {\n        if (this.imageryOptions.isoLine != val) {\n            this.imageryOptions.isoLine = val\n            this.updateImageryLayer()\n        }\n    }\n\n    get fill() {\n        return this.imageryOptions.fill\n    }\n    set fill(val) {\n        if (this.imageryOptions.fill != val) {\n            this.imageryOptions.fill = val\n            this.updateImageryLayer()\n        }\n    }\n\n    get showPoint() {\n        return this._showPoint\n    }\n    set showPoint(val) {\n        if (this._showPoint != val) {\n            this._showPoint = val\n            this.points.forEach(pt => {\n                pt.point.show = val\n            })\n        }\n    }\n\n    get showText() {\n        return this._showText\n    }\n    set showText(val) {\n        if (this._showText != val) {\n            this._showText = val\n            this.updatePointLayer()\n        }\n    }\n\n    get showValue() {\n        return this._showValue\n    }\n    set showValue(val) {\n        if (this._showValue != val) {\n            this._showValue = val\n            this.updatePointLayer()\n        }\n    }\n\n    get textField() {\n        return this._textField\n    }\n    set textField(val) {\n        if (this._textField != val) {\n            this._textField = val\n            this.updatePointLayer()\n        }\n    }\n\n    updatePointLayer() {\n\n        const { defined, Cartesian3, Color } = Cesium;\n\n        const earth = this.earth;\n        /**\n         * @type {RasterImageGenerator}\n         */\n        var imageGenerator = this.imageGenerator;\n        var colorMap = imageGenerator.colorMap;\n        var pointGraphics = this._pointGraphics,\n            labelGraphics = this._labelGraphics,\n            pointVisible = this._showPoint,\n            textVisible = this._showText,\n            valueVisible = this._showValue,\n            valueField = this.element,\n            textField = this.textField,\n\n            disableDepthTestDistance = this._disableDepthTestDistance;\n\n        var points = this.points;\n        while (points.length) {\n            var entity = points.shift()\n            earth.entities.remove(entity)\n        }\n\n        this._dataset.DS.forEach(function (data) {\n            var lon = parseFloat(data.Lon),\n                lat = parseFloat(data.Lat);\n            var v = parseFloat(data[valueField]);\n\n            var color = GridDataColorMap.getColor(v, colorMap);\n            color = Color.fromBytes.apply(null, color);\n\n            var point = Object.assign(pointGraphics, {\n                color: color,\n                show: pointVisible,\n                disableDepthTestDistance: disableDepthTestDistance\n            })\n\n            var label = Object.assign(labelGraphics, {\n                text: \"\",\n                disableDepthTestDistance: disableDepthTestDistance\n            })\n            if (textVisible && textField && defined(data[textField])) {\n                label.text += data[textField] + \"\\r\\n\"\n            }\n            if (valueVisible && valueField && defined(data[valueField])) {\n                label.text += data[valueField];\n            }\n            label.show = textVisible || valueVisible;\n\n            var pt = earth.entities.add({\n                position: Cartesian3.fromDegrees(lon, lat),\n                point: point,\n                label: label\n            });\n            pt.stationData = data;\n\n            points.push(pt);\n\n        })\n    }\n\n    /**\n     * 基于当前时次的数据重新绘制\n     */\n    updateImageryLayer() {\n        var { imageryLayer, earth, currentFile } = this;\n\n        removeImageryLayer(this)\n\n        /**\n         * @type {RasterImageGenerator}\n         */\n        var imageGenerator = this.imageGenerator;\n        var colorMap = imageGenerator.colorMap;\n        var bbox = this.bbox;\n        var rectangle = Cesium.Rectangle.fromDegrees(bbox[0], bbox[1], bbox[2], bbox[3])\n\n        var breaks = [];\n        //生成等值线数值\n        for (var index = 1; index < colorMap.length; index++) {\n            var item = colorMap[index];\n            breaks.push(item[0])\n        }\n\n        var provider = new GridDataImageryProvider(Object.assign({}, this.imageryOptions, {\n            colorMap: colorMap,\n            dataArray: this._dataArray,\n            width: this._interpWidth,\n            height: this._interpHeight,\n            breaks: breaks,\n            dataRectangle: rectangle\n        }))\n\n        imageryLayer = earth.imageryLayers.addImageryProvider(provider)\n        imageryLayer.show = this._show\n\n        this.name = currentFile.fileName\n        this.colorMap = colorMap\n        this.imageryLayer = imageryLayer\n\n        //调整图层顺序\n        provider.zIndex = this.zIndex;\n        earth.updateOrder()\n\n        this.ready = true\n        this._deffered.resolve(this)\n\n    }\n\n    updateLayer() {\n        let currentFile = this.currentFile;\n        if (!currentFile) {\n            return\n        }\n        this.ready = false\n\n        if (this._lastFile == this.currentFile) {\n            this.updateImageryLayer();\n            this.updatePointLayer()\n        } else {\n\n            var _fileLoader = this._fileLoader;\n            _fileLoader.readFile(currentFile, {\n                responseType: 'json'\n            }).then(dataset => {\n                this._dataset = dataset;\n                var bbox = computeBBox(dataset.DS);\n                this._dataArray = updateInterpDataset(dataset.DS, this.element, bbox, this._interpWidth, this._interpWidth);\n                this.bbox = bbox;\n\n                if (this.imageGenerator.ready) {\n                    this.updateImageryLayer()\n                    this.updatePointLayer()\n                } else {\n                    return new Promise((resolve, rejcect) => {\n                        this.imageGenerator.readyPromise.then(() => {\n                            this.updateImageryLayer();\n                            this.updatePointLayer()\n                            resolve();\n                        }).otherwise(rejcect)\n                    })\n                }\n\n            }).catch(err => {\n                console.error(err);\n                removeImageryLayer(this)\n                removePointsLayer(this)\n                this.onError(err)\n                this.ready = false\n                this._deffered.resolve(err)\n            })\n        }\n    }\n\n    unload() {\n        removeImageryLayer(this)\n        removePointsLayer(this)\n    }\n}",
    "\n\n/**\n * micaps格点格式的EC数值模式图层\n */\n\n// import RasterImageGenerator from '@mesh-3d/meteolib/Source/Render/RasterImageGenerator'\n// import SwanRadar from '@mesh-3d/meteolib/Source/Data/SWAN/SwanRadar'\nconst { RasterImageGenerator, SwanRadar } = MeteoLib;\nimport HfsFileLoader from \"../HfsFileLoader\";\nimport IHfsFileLayer from \"./IHfsFileLayer\";\n\nfunction removeImageryLayer(layer) {\n    var { imageryLayer, earth } = layer;\n    if (imageryLayer) {\n        earth.imageryLayers.remove(imageryLayer)\n        imageryLayer.imageryProvider.destroy()\n        layer.imageryLayer = null\n    }\n}\n\n/**\n * swan格点格式的雷达拼图图层\n */\nexport default class SwanRadarLayer extends IHfsFileLayer {\n    /**\n     *  swan格点格式的雷达拼图图层\n     * @param {HfsFileLoader}  fileLoader\n     */\n    constructor(fileLoader) {\n        super(fileLoader, {\n            dir: 'GZData',\n            path: \"SWAN_PRODUCT/LOCAL/NCRAD/TDMOSAIC\",\n            ext: '*.BZ2',\n            timeRegex: 'yyyyMMddhhmmss',\n            zIndex: 6\n        })\n\n        this._level = 0\n        this._lastFile = null\n        this._levelCount = 1;\n\n        this.ready = false;\n        var deffered = {}\n        this.readyPromise = new Promise((resolve, reject) => {\n            deffered.resolve = resolve\n            deffered.reject = reject\n        })\n        this._deffered = deffered\n\n        var imageryLayer = null;\n        var swanRadar = null\n        Object.defineProperties(this, {\n            swanRadar: {\n                enumerable: false,\n                get() {\n                    return swanRadar;\n                },\n                set(val) {\n                    swanRadar = val\n                }\n            },\n            imageryLayer: {\n                enumerable: false,\n                get() {\n                    return imageryLayer\n                },\n                set(val) {\n                    imageryLayer = val\n                }\n            }\n        })\n\n    }\n\n    get show(){\n        return  this._show\n    }\n    set show(val) {\n        if (this.imageryLayer) {\n            this._show = val\n            this.imageryLayer.show = val\n        }\n    }\n\n    get channelPath() {\n        return this.options.path\n    }\n\n    //层次\n\n    get levelCount() {\n        return this._levelCount;\n    }\n    set levelCount(val) {\n        this._levelCount = val;\n    }\n\n    get level() {\n        return this._level\n    }\n    set level(val) {\n        if (this._level != val) {\n            this._level = val;\n            if (this._lastFile && this.swanRadar) {\n                this.updateImageryLayer()\n            }\n        }\n    }\n\n    /**\n     * 基于当前时次的数据重新绘制\n     */\n    updateImageryLayer() {\n        var { imageryLayer, earth, currentFile } = this;\n        /**\n        * @type {SwanRadar}\n        * @private\n        */\n        var swanRadar = this.swanRadar, header = swanRadar.header\n\n        removeImageryLayer(this)\n\n        /**\n         * @type {RasterImageGenerator}\n         */\n        var imageGenerator = RasterImageGenerator.Radar.R;\n        var colorMap = imageGenerator.colorMap;\n\n        var width = header.LonNumGrids, height = header.LatNumGrids;\n        var length = header.LatNumGrids * header.LonNumGrids;\n        var offset = this.level * length;\n        var data = new Float32Array(swanRadar.data.buffer, offset, length);\n        var rectangle = swanRadar.rectangle\n\n        var image = imageGenerator.generate(data, width, height);\n\n        var provider = new Cesium.SingleTileImageryProvider({\n            url: image,\n            rectangle: rectangle\n        });\n\n        imageryLayer = earth.imageryLayers.addImageryProvider(provider)\n        imageryLayer.show = this._show\n\n        this.name = currentFile.fileName\n        this.colorMap = colorMap\n        this.imageryLayer = imageryLayer\n        this.rectangle = rectangle;\n        this.levelCount = header.ZNumGrids\n\n        //调整图层顺序\n        provider.zIndex = this.zIndex;\n        earth.updateOrder()\n\n        this.ready = true\n        this._deffered.resolve(this)\n\n    }\n\n    updateLayer() {\n        let currentFile = this.currentFile;\n        if (!currentFile) {\n            return\n        }\n\n        if (this.swanRadar && this._lastFile == currentFile) {\n            this.updateImageryLayer();\n\n        } else {\n            var _fileLoader = this._fileLoader;\n            _fileLoader.readFile(currentFile).then(buf => {\n                return new Promise((resolve, reject) => {\n                    SwanRadar.load(buf, currentFile.fileName).then(resolve).otherwise(reject);\n                })\n            }).then((swanRadar) => {\n                this.swanRadar = swanRadar;\n                this.updateImageryLayer()\n            }).catch(err => {\n                console.error(err);\n                removeImageryLayer(this)\n                this.onError(err)\n                this.ready = false\n                this._deffered.resolve(err)\n            })\n        }\n    }\n\n    unload() {\n        removeImageryLayer(this)\n    }\n}",
    "\nimport {\n    HighlightPolygonLayer, SealandVec2dLayer,\n    HighlightMarkerLayer, LabelVec2dLayer, CountryVec2dLayer\n} from  \"../../node_modules/@mesh-3d/earth/Source/layers/vector/Vector2dLayer.js\";\n\n\n/**\n * 矢量图层组：国界、省界、市界、项目所在市的县界、行政区地名、自然地名、居民地地名\n */\nexport default class VectorLayerGroup {\n    constructor(options) {\n        this._theme = options.theme || 'dark'\n        this._geoDataServerUrl = options.url || './Assets' //`${location.protocol}//${location.hostname}:8668`\n        this._show = true;\n    }\n\n    get show() {\n        return this._show;\n    }\n    set show(val) {\n        if (this._show != val) {\n            var { sealandLayer,\n                provinceLayer,\n                countyLayer,\n                placeNameLayer,\n                placeName2Layer,\n                placeName3Layer,\n                countryLayer\n            } = this;\n\n            sealandLayer && (sealandLayer.show = val);\n            provinceLayer && (provinceLayer.show = val);\n            countyLayer && (countyLayer.show = val);\n            placeNameLayer && (placeNameLayer.show = val);\n            placeName2Layer && (placeName2Layer.show = val);\n            placeName3Layer && (placeName3Layer.show = val);\n            countryLayer && (countryLayer.show = val);\n        }\n    }\n\n    load(earth) {\n        var sealandLayer\n        var provinceLayer\n        var countyLayer\n        var placeNameLayer\n        var placeName2Layer\n        var placeName3Layer\n        var countryLayer\n\n        sealandLayer = new SealandVec2dLayer({\n            source: geoDataServerUrl + '/vectorData/geojson/sealand.geojson',\n            theme: theme\n        })\n\n        var readyPromise = sealandLayer.provider.readyPromise.then(() => {\n            provinceLayer = new HighlightPolygonLayer({\n                source: geoDataServerUrl + '/vectorData/shp/边界数据2017版/BOUA省级行政区域.shp',\n                focusAdminNames: ['52'],\n                focusPropertyName: '省域代码',\n                theme: theme\n            })\n            return provinceLayer.provider.readyPromise\n        }).then(() => {\n            countyLayer = new HighlightPolygonLayer({\n                source: geoDataServerUrl + '/vectorData/shp/铜仁市/县界（铜仁）/县界（铜仁）.shp',\n                focusAdminNames: ['520621'],\n                focusPropertyName: 'PAC',\n                theme: theme,\n                minimumLevel: 6\n            })\n            return countyLayer.provider.readyPromise\n        }).then(() => {\n            placeNameLayer = new HighlightMarkerLayer({\n                source: geoDataServerUrl + '/vectorData/geojson/placeName.geojson',\n                focusAdminNames: ['贵州'],\n                focusPropertyName: 'NAME',\n                theme: theme\n            })\n            return placeNameLayer.provider.readyPromise\n        }).then(() => {\n            placeName2Layer = new LabelVec2dLayer({\n                source: geoDataServerUrl + '/vectorData/shp/边界数据2017版/AGNP居民地地名.shp',\n                minimumLevel: 12\n            })\n            return placeName2Layer.provider.readyPromise\n        }).then(() => {\n            placeName3Layer = new LabelVec2dLayer({\n                source: geoDataServerUrl + '/vectorData/shp/边界数据2017版/AANP自然地名.shp',\n                minimumLevel: 12\n            })\n            return placeName3Layer.provider.readyPromise\n        }).then(() => {\n            countryLayer = new CountryVec2dLayer({\n                source: geoDataServerUrl + '/vectorData/shp/边界数据2017版/BOUL国界线.shp',\n                theme: theme\n            })\n            return countryLayer.provider.readyPromise\n        }).then(() => {\n            earth.addLayer(sealandLayer)\n            earth.addLayer(provinceLayer)\n            earth.addLayer(countyLayer)\n            earth.addLayer(placeNameLayer)\n            earth.addLayer(placeName2Layer)\n            earth.addLayer(placeName3Layer)\n            earth.addLayer(countryLayer)\n\n            sealandLayer.show=this.show\n            provinceLayer.show=this.show\n            countyLayer.show=this.show\n            placeNameLayer.show=this.show\n            placeName2Layer.show=this.show\n            placeName3Layer.show=this.show\n            countryLayer.show=this.show\n        })\n\n        Object.defineProperties(this, {\n            sealandLayer: {\n                get() {\n                    return sealandLayer\n                }\n            },\n            provinceLayer: {\n                get() {\n                    return provinceLayer\n                }\n            },\n            countyLayer: {\n                get() {\n                    return countyLayer\n                }\n            },\n            placeNameLayer: {\n                get() {\n                    return placeNameLayer\n                }\n            },\n            placeName2Layer: {\n                get() {\n                    return placeName2Layer\n                }\n            },\n            placeName3Layer: {\n                get() {\n                    return placeName3Layer\n                }\n            },\n            countryLayer: {\n                get() {\n                    return countryLayer\n                }\n            }\n        })\n\n        return readyPromise;\n    }\n}",
    "import splitLine from  \"./splitLine.js\";\n\n// import RasterDataset from \"@mesh-3d/meteolib/Source/Data/RasterDataset/RasterDataset\";\nimport GenericWorker from  \"../node_modules/@mesh-3d/utils/Source/GenericWorker.js\";\n\nconst { RasterDataset } = MeteoLib\n \n/**\n * \n * @param {Cesium.Cartographic[]} line \n * @param {RasterDataset}dataset \n * @param {object}[options]\n * @param {(progress:number)=>void} [options.onProgress]\n * @param {number}[options.interval]\n * @param {'degrees'|'radians'|'miles'|'kilometers'|'meters'} [options.units='meters'] \n */\nexport function lineSample(line, dataset, options) {\n\n    options = options || {};\n    var onProgress = options.onProgress;\n\n    var sampleLine = splitLine(line, options.units, options.interval)\n\n    //分批进行采样，避免页面卡顿\n    var batch = [], batches = [batch], batchSize = 100;\n    sampleLine.positions.forEach(p => {\n        if (batch.length == batchSize) {\n            batch = [];\n            batches.push(batch)\n        }\n        batch.push(p);\n    })\n\n    var worker = new GenericWorker(batches, batch => {\n        for (const p of batch) {\n            p.value = dataset.selectPoint(0, p.longitude, p.latitude)\n        }\n    })\n\n    return worker.run(onProgress).then(() => {\n        sampleLine.values = sampleLine.positions.map(p => {\n            var val = p.value;\n            delete p.value\n            return val\n        })\n        return sampleLine\n    })\n}",
    "\nimport * as turf from  \"../node_modules/@turf/helpers/dist/es/index.js\";\n\nimport along from  \"../node_modules/@turf/along/dist/es/index.js\";\n\nimport distance from  \"../node_modules/@turf/distance/dist/es/index.js\";\n\n \n/**\n * 细分线段，如果未给定间距（interval），则默认拆分64段\n * @param {Cesium.Cartographic[]} line \n * @param {'degrees'|'radians'|'miles'|'kilometers'|'meters'} [units='meters'] \n * @param {number} [interval] \n * @returns \n */\nexport default function splitLine(line, units, interval) {\n    const { Cartographic } = Cesium, _Math = Cesium.Math;\n\n    interval = interval;\n    units = units || 'meters';\n    var computeUnits = units == 'meters' ? 'kilometers' : units;\n    var distScale = units == 'meters' ? 1000 : 1;\n    //计算线段总距离\n\n    var coordinates = line.map(p => {\n        return [_Math.toDegrees(p.longitude), _Math.toDegrees(p.latitude)]\n    })\n    var lineString = turf.lineString(coordinates)\n    var lineDist = distance(coordinates[0], coordinates[1], { units: computeUnits });\n\n    //拆分成多个线段\n    var positions = [line[0]], distances = [0];\n    var num = 64;\n    if (interval && interval > 0) {\n        interval = interval / distScale\n        num = lineDist / interval;\n    } else {\n        interval = lineDist / num\n    }\n    if (num % 1 == 0) num -= 1;\n    for (let i = 1; i < num; i++) {\n        var d = i * interval;\n        var p = along(lineString, d, { units: computeUnits })\n        distances.push(d * distScale)\n        var pointCoord = p.geometry.coordinates\n        positions.push(Cartographic.fromDegrees(pointCoord[0], pointCoord[1]))\n    }\n    positions.push(line[1]), distances.push(lineDist * distScale)\n\n    interval *= distScale;\n\n    return {\n        positions,\n        distances,\n        units,\n        interval,\n        start: {\n            /**\n             * 经度，单位为角度\n             * @type {number} \n             */\n            longitude: coordinates[0][0],\n            /**\n             * 纬度，单位为角度\n             * @type {number} \n             */\n            latitude: coordinates[0][1]\n        },\n        stop: {\n            /**\n             * 经度，单位为角度\n             * @type {number} \n             */\n            longitude: coordinates[1][0],\n            /**\n             * 纬度，单位为角度\n             * @type {number} \n             */\n            latitude: coordinates[1][1]\n        },\n        /**\n         * @type {number[]}\n         */\n        values: []\n    }\n}",
    "\nimport GenericWorker from  \"../node_modules/@mesh-3d/utils/Source/GenericWorker.js\";\n\nimport splitLine from  \"./splitLine.js\";\n\n\n/**\n * 从给定地形数据源中导出指定矩形范围内的地形高度数据\n * @param {Cesium.Rectangle} rectangle \n * @param {Cesium.TerrainProvider} terrainProvider \n * @param {object} options \n * @param {(progress:number)=>void} [options.onProgress]\n * @param {number} [options.tileSize=128]\n * @param {number} [options.level=13]\n * @param {number} [options.maxWidth=14000]\n * @param {number} [options.maxHeight=14000]\n * @returns {Promise<{\n *  width: number;\n *  height: number;\n *  data: Float32Array;\n *  bbox:number[]\n * }>}\n */\nexport async function rectangleSample(rectangle, terrainProvider, options) {\n    const { Rectangle, Cartesian2, Cartographic } = Cesium, _Math = Cesium.Math;\n    options = options || {}\n    var tileSize = options.tileSize || 128;\n    var level = options.level || 13;\n    var maxWidth = options.maxWidth || 14000\n    var maxHeight = options.maxHeight || 14000\n    var onProgress = options.onProgress\n\n    var nw = Rectangle.northwest(rectangle)\n    var se = Rectangle.southeast(rectangle)\n    var startTile = terrainProvider.tilingScheme.positionToTileXY(nw, level, {})\n    var endTile = terrainProvider.tilingScheme.positionToTileXY(se, level, {})\n    var tileNum = Cartesian2.subtract(endTile, startTile, {})\n\n    var width = tileNum.x * tileSize\n    var height = tileNum.y * tileSize\n    if (width > maxWidth || height > maxHeight) {\n        throw new Error('范围太大，请调整范围')\n    }\n\n    var buffer = new Float32Array(width * height);\n    var tiles = [];\n\n    for (let y = startTile.y; y < endTile.y; y++) {\n        for (let x = startTile.x; x <= endTile.x; x++) {\n            tiles.push({\n                x, y\n            })\n        }\n    }\n\n    var worker = new GenericWorker(tiles, tile => {\n        return new Promise((resolve, reject) => {\n            terrainProvider.requestTileGeometry(tile.x, tile.y, level)\n                .then(terrainData => {\n                    var tileRect = terrainProvider.tilingScheme.tileXYToRectangle(tile.x, tile.y, level)\n                    var deltX = tileRect.width / (tileSize - 1);\n                    var deltY = tileRect.height / (tileSize - 1);\n                    var y0 = (tile.y - startTile.y) * tileSize\n                    var x0 = (tile.x - startTile.x) * tileSize\n                    for (var i = 0; i < tileSize; i++) {\n                        var y = y0 + i;\n                        for (var j = 0; j < tileSize; j++) {\n                            var x = x0 + j;\n                            var index = y * width + x;\n                            var position = new Cartographic(\n                                tileRect.west + j * deltX,\n                                tileRect.north - i * deltY\n                            );\n                            var height = terrainData.interpolateHeight(tileRect, position.longitude, position.latitude);\n                            buffer[index] = height;\n                        }\n                    }\n                    resolve()\n                }).otherwise(err => {\n                    resolve()\n                })\n        })\n    })\n\n    await worker.run(onProgress)\n\n    return {\n        width: width,\n        height: height,\n        data: buffer,\n        bbox: [\n            _Math.toDegrees(rectangle.west),\n            _Math.toDegrees(rectangle.south),\n            _Math.toDegrees(rectangle.east),\n            _Math.toDegrees(rectangle.north)\n        ]\n    }\n}\n\n/**\n * 生成地形剖面数据\n * @param {Cesium.Cartographic[]} line \n * @param {Cesium.CesiumTerrainProvider} terrainProvider \n * @param {object}[options]\n * @param {(progress:number)=>void} [options.onProgress]\n * @param {number}[options.interval]\n * @param {number}[options.level=13]\n * @param {'degrees'|'radians'|'miles'|'kilometers'|'meters'} [options.units='meters'] \n */\nexport async function lineSample(line, terrainProvider, options) {\n    const { sampleTerrain } = Cesium;\n    options = options || {}\n    var level = options.level || 13;\n    var onProgress = options.onProgress\n    var sampleLine = splitLine(line, options.units, options.interval);\n    var positions = sampleLine.positions\n\n    //按点所在瓦片分批次\n    var byTiles = [], tiles = {};\n    for (const position of positions) {\n        var tile = terrainProvider.tilingScheme.positionToTileXY(position, level)\n        tile = [tile.x, tile.y].join(',')\n        var idx = tiles[tile]\n        if (idx == undefined) {\n            idx = byTiles.length;\n            tiles[tile] = idx\n            byTiles[idx] = []\n        }\n        byTiles[idx].push(position)\n    }\n\n    //开始逐个批次采样\n    var worker = new GenericWorker(byTiles, samplePositions => {\n        return new Promise(resolve => {\n            sampleTerrain(terrainProvider, level, samplePositions)\n                .then(resolve).otherwise(resolve)\n        })\n    })\n    await worker.run(onProgress)\n\n    sampleLine.values = positions.map(p => {\n        return p.height\n    })\n    return sampleLine;\n}\n",
    "function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "var superPropBase = require(\"./superPropBase.js\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "var setPrototypeOf = require(\"./setPrototypeOf.js\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nmodule.exports = _interopRequireDefault;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "var _typeof = require(\"@babel/runtime/helpers/typeof\")[\"default\"];\n\nvar assertThisInitialized = require(\"./assertThisInitialized.js\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  } else if (call !== void 0) {\n    throw new TypeError(\"Derived constructors may only return object or undefined\");\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "var getPrototypeOf = require(\"./getPrototypeOf.js\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n\n    module.exports[\"default\"] = module.exports, module.exports.__esModule = true;\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\nmodule.exports[\"default\"] = module.exports, module.exports.__esModule = true;",
    "module.exports = require(\"regenerator-runtime\");\n",
    "'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n",
    "/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\n// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\nif (typeof Symbol !== 'undefined' && Symbol.species != null &&\n    Buffer[Symbol.species] === Buffer) {\n  Object.defineProperty(Buffer, Symbol.species, {\n    value: null,\n    configurable: true,\n    enumerable: false,\n    writable: false\n  })\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayLike(value)\n  }\n\n  if (value == null) {\n    throw TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nBuffer.prototype.__proto__ = Uint8Array.prototype\nBuffer.__proto__ = Uint8Array\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  buf.__proto__ = Buffer.prototype\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      buf = Buffer.from(buf)\n    }\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n        : (firstByte > 0xBF) ? 2\n          : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  newBuf.__proto__ = Buffer.prototype\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (var i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n",
    "/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n",
    "/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n"
  ]
}