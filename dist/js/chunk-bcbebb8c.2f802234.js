(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bcbebb8c"],{"12ba":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"relative",width:"100%",height:"100%",overflow:"hidden"}},[a("div",{staticStyle:{width:"100%",height:"100%"},attrs:{id:"numModelPage"}}),a("div",{staticStyle:{position:"absolute",width:"300px",top:"99px","z-index":"10",color:"#fff"}},[a("div",{staticClass:"numericalModel-info"},[a("div",{staticClass:"numericalModel-card"},[a("div",{staticClass:"numericalModel-card-header"},[a("div",{staticStyle:{display:"flex","align-items":"center"}},[a("p",[e._v(e._s(e.name))])])]),a("div",{staticClass:"numericalModel-card-body"},[a("div",{staticClass:"bounding-box"},[a("span",[e._v("要素")]),a("div",{staticStyle:{flex:"1",display:"flex"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.numbericalModelELE.Layer.selectValue,expression:"numbericalModelELE.Layer.selectValue"}],staticStyle:{width:"153px",height:"34px",border:"none","background-color":"#286989"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.numbericalModelELE.Layer,"selectValue",t.target.multiple?a:a[0])},function(t){e.ecLayer.element=e.numbericalModelELE.Layer.selectValue,e.drawColorMap()}]}},e._l(e.numbericalModelELE.Layer.element,(function(t,i){return a("option",{key:i,domProps:{value:t.value}},[e._v(" "+e._s(t.text)+" ")])})),0)])]),a("div",{staticClass:"bounding-box"},[a("span",[e._v("层次")]),a("div",{staticStyle:{flex:"1",display:"flex"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.numbericalModelELE.Layer.leveValue,expression:"numbericalModelELE.Layer.leveValue"}],staticStyle:{width:"153px",height:"34px",border:"none","background-color":"#286989"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.numbericalModelELE.Layer,"leveValue",t.target.multiple?a:a[0])},function(t){e.dataBox.visibleLevelId=e.numbericalModelELE.Layer.leveValue}]}},e._l(e.dataBox.levelIds,(function(t,i){return a("option",{key:i+t,domProps:{value:t.value}},[e._v(" "+e._s(t.label)+" ")])})),0)])]),a("div",{staticClass:"bounding-box"},[a("span",[e._v("叠加云图")]),a("div",{staticStyle:{flex:"1",display:"flex"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.sateLayerIsShow,expression:"sateLayerIsShow"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.sateLayerIsShow)?e._i(e.sateLayerIsShow,null)>-1:e.sateLayerIsShow},on:{change:[function(t){var a=e.sateLayerIsShow,i=t.target,n=!!i.checked;if(Array.isArray(a)){var s=null,o=e._i(a,s);i.checked?o<0&&(e.sateLayerIsShow=a.concat([s])):o>-1&&(e.sateLayerIsShow=a.slice(0,o).concat(a.slice(o+1)))}else e.sateLayerIsShow=n},function(t){e.sateLayer.show=e.sateLayerIsShow}]}})])])])])])]),e._m(0),a("div",{staticClass:"billboardBox"},e._l(e.billboard,(function(t,i){return a("div",{key:i,staticClass:"billboard",class:{selectBillboard:i===e.num},on:{click:function(t){return e.showAsideLeft(i)}}},[a("i",{class:t.icon}),a("span",[e._v(e._s(t.name))])])})),0),a("div",{staticClass:"compass",style:{transform:"rotate(-"+e.heading+"rad)","-webkit-transform":"rotate(-"+e.heading+"rad)","-moz-transform":"rotate(-"+e.heading+"rad)"}},[a("p",{staticStyle:{"padding-bottom":"20px",color:"#fff"}},[e._v("N")]),a("svg",{staticClass:"icon",attrs:{t:"1634176780501",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6575",width:"100",height:"99"}},[a("path",{attrs:{d:"M512 5.171717l0.010343 462.713536H512a46.545455 46.545455 0 0 0-46.545455 46.545454H418.909091L512 5.171717z",fill:"#FFA930","p-id":"6576"}}),a("path",{attrs:{d:"M605.090909 514.430707l-93.090909 509.269333V560.976162a46.545455 46.545455 0 0 0 46.545455-46.545455h46.545454z",fill:"#C4C1BC","p-id":"6577"}}),a("path",{attrs:{d:"M512 5.171717l93.090909 509.25899H558.545455a46.545455 46.545455 0 0 0-46.545455-46.545454V5.171717z",fill:"#DE8200","p-id":"6578"}}),a("path",{attrs:{d:"M465.454545 514.430707a46.545455 46.545455 0 0 0 46.535112 46.545455L512 1023.70004l-93.090909-509.269333H465.454545z",fill:"#D8D8D8","p-id":"6579"}})])]),e.timeLineIsShow?a("div",{staticClass:"aside-right-footer"},[a("div",{staticClass:"timeRange",on:{click:function(t){if(t.target!==t.currentTarget)return null;e.timeChooseShow=!e.timeChooseShow}}},[e._v(" 时间范围 "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.timeChooseShow,expression:"timeChooseShow"}],staticClass:"timeChoose"},[a("div",{staticStyle:{"text-align":"left",display:"flex","justify-content":"space-between"}},[e._v(" 选择时间范围 "),a("i",{staticClass:"iconfont icon-guanbi1",staticStyle:{"padding-right":"10px",cursor:"pointer"},on:{click:function(t){e.timeChooseShow=!1}}})]),a("el-date-picker",{attrs:{"prefix-icon":"el-icon-date",type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},on:{change:function(t){return e.getTimeRange(e.value1)}},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}})],1)]),a("div",{staticClass:"timeLine"},[a("div",{staticStyle:{position:"absolute",color:"#fff","z-index":"30",top:"-32px",width:"180px",height:"32px","line-height":"32px","text-align":"center",background:"rgb(41, 128, 185)"}},[e._v(" 日期："+e._s(e.yearDate)+" ")]),a("div",{staticClass:"timeBackMask"},[a("div",{staticClass:"timeBack"},[e._l(e.timeLineData,(function(t,i){return a("div",{key:i,staticClass:"text",staticStyle:{cursor:"pointer"},style:{backgroundColor:i>=e.insert&&i<e.colorShowIndex+e.insert?"#2980b9":""},on:{click:function(t){e.value2=i,e.updateTime(e.value2)}}},[a("p",[e._v(e._s(t))]),a("p",{staticClass:"line"})])})),a("el-slider",{attrs:{max:e.maxProcessNum,"show-tooltip":!1},on:{change:function(t){return e.updateTime(e.value2)}},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],2)])])]):e._e()])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"headerBanner"},[a("p",{staticClass:"header-text"},[e._v("铜仁市梵净山保护区梯度气象监测系统")])])}];function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}a("159b");var o=a("23b0"),r=a("0834"),l={data:function(){var e;return e={sateLayerIsShow:!1,earth:void 0,value1:10,name:"数值模式",element:"TMP",level:850,ecLayer:void 0,showIsoLine:!0,fill:!0,cityLayer:void 0,clipperLayer:void 0,numbericalModelELE:void 0,index:void 0,dataBox:{levelIds:""},billboard:[{name:"梯度监测",icon:"iconfont icon-zhandianxinxi"},{name:"实况监测",icon:"iconfont icon-shikuangjiance"},{name:"数值模式",icon:"iconfont icon-shuzhimoshi"},{name:"监测告警",icon:"iconfont icon-jiancegaojing"}],billboardSelect:!0,num:"",yearDate:""},s(e,"earth",void 0),s(e,"timeLineIsShow",!0),s(e,"heading",0),s(e,"timeChooseShow",!1),s(e,"value1",0),s(e,"timeLineData",[]),s(e,"maxProcessNum",100),s(e,"value2",0),s(e,"colorShowIndex",0),s(e,"insert",void 0),s(e,"canvas",void 0),s(e,"ctx",void 0),s(e,"sateLayer",void 0),e},created:function(){this.numbericalModelELE=ElementChoose.numbericalModel},mounted:function(){var e=this,t=document.querySelector("#numModelPage"),a=this.earth=new Earth({container:t,timeline:!1,animation:!1,infoBox:!1,selectionIndicator:!0,geocoder:!1,creditContainer:document.createElement("div")});a.globe.showGroundAtmosphere=!1,a.scene.fog.enabled=!1,a.depthTestAgainstTerrain=!0,this.showAsideLeft(2),this.earth.viewer.scene.preRender.addEventListener((function(){e.heading=e.earth.viewer.camera.heading})),document.querySelector(".cesium-viewer-toolbar").style.top="150px",this.canvas=document.createElement("canvas"),this.canvas.width=100,this.canvas.height=0,this.canvas.style.position="absolute",this.canvas.style.right="100px",this.canvas.style.bottom="53px",this.canvas.style.zIndex=10,this.ctx=this.canvas.getContext("2d"),this.ctx.font="12px Verdana",this.ctx.strokeStyle="#fff",document.querySelector("#numModelPage").appendChild(this.canvas),this.numModel(),this.stateCludeMap()},methods:{stateCludeMap:function(){var e=this;this.sateLayer=new SateCloudLayer(hfsLoader),this.sateLayer.channel="C002",this.sateLayer.load(this.earth).then((function(){e.sateLayer.currentTime=e.sateLayer.latestTime,e.sateLayer.show=!1}))},dealTimeLineDate:function(e){var t=this,a=21-e.length,i=Object.assign([],e);if(e.length<=15?this.insert=3:e.length<=10?this.insert=6:e.length<=5?this.insert=8:e.length<=1?this.insert=10:this.insert=0,21!=a)for(var n=this.insert,s=i[0],o=new Date(s).getHours(),r=i[i.length-1],l=new Date(r).getHours(),c=0;c<a;c++)c<this.insert?(o-=n,o<0&&(o=24+o),o<10&&(o="0"+o),i.unshift("".concat(o,":00"))):(l=+l+n,l>=24&&(l=0),l<10&&(l="0"+l),i.push("".concat(l,":00")));else for(var d=0,h=0;h<21;h++)d=+d+1,d<10&&(d="0"+d),i.push("".concat(d,":00"));this.timeLineData=[],i.forEach((function(a,i){var n;if(i>=t.insert&&i<e.length+t.insert){var s=new Date(a),o=s.getHours(),r=s.getMinutes();o<10&&(o="0"+o),r<10&&(r="0"+r),n=o+":"+r,t.timeLineData.push(n)}else t.timeLineData.push(a)})),this.maxProcessNum=this.timeLineData.length},showYear:function(){var e=new Date(this.ecLayer.currentTime),t=e.getFullYear(),a=e.getMonth()+1,i=e.getDate();this.yearDate=t+"-"+a+"-"+i},updateTime:function(e){this.ecLayer.currentTime=this.ecLayer.timeList[e-this.insert],this.showYear()},drawColorMap:function(){var e=this;this.ecLayer.onChange=function(t){if(null!=t){e.ctx.clearRect(0,0,1e3,1e3),t.length>=256?e.canvas.height=t.length+20:e.canvas.height=10*t.length+10;for(var a=t.length-1;a>=0;a--)t.length>=256?(e.ctx.fillStyle="rgba("+t[a][2][0]+","+t[a][2][1]+","+t[a][2][2]+","+t[a][2][3]+")",e.ctx.fillRect(2,t.length-a-1+10,20,1),0!=a&&a!=t.length-1&&a%20!=0||(e.ctx.font="12px Verdana",e.ctx.strokeStyle="#44D7B6",e.ctx.strokeText(t[t.length-a-1][3],27,a+15))):(e.ctx.fillStyle="rgba("+t[a][2][0]+","+t[a][2][1]+","+t[a][2][2]+","+t[a][2][3]+")",e.ctx.fillRect(2,10*(t.length-a-1)+10,20,10),0!=a&&a%3!=0&&a!=t.length-1||(e.ctx.font="12px Verdana",e.ctx.strokeStyle="#44D7B6 ",e.ctx.strokeText(t[t.length-1-a][3],27,10*a+20)))}}},showAsideLeft:function(e){this.num=e,0==e?this.$router.push({path:"/",name:"gis",params:{gisIndex:e}}):2!=e&&this.$router.push({path:"/index",name:"index",params:{gisIndex:e}})},numModel:function(){var e=this;this.ecLayer=new MicapsECLayer(hfsLoader),this.ecLayer.load(this.earth).then((function(){e.ecLayer.currentTime=e.ecLayer.timeList[0],e.drawColorMap(),e.colorShowIndex=e.ecLayer.timeList.length,e.dealTimeLineDate(e.ecLayer.timeList),e.showYear(e.ecLayer.timeList[0])}));for(var t=this.earth,a=t.addLocalScene({}),i=1e5,n=10,s=i/n,l=[108.52284055410892,27.642245321364133,108.85578708890267,28.106139815822313],c=[],d=0;d<n;d++)c.push({height:s*(d+.25)});var h=new o["a"]({rectangle:l,levels:c,upAxis:"y",boxHeight:i+.25*s,granularity:.05,lineColor:"lightblue"});a.add(h.root),t.flyTo(h),t.onHomeClick.addEventListener((function(e){t.flyTo(h),e.cancel=!0}));var u=new MeteoLib.RasterImageGenerator({name:"TEM",colorMap:[[-66666666,-30,[0,0,255,255],"<-30"],[-30,-28,[0,20,255,255],"-30~-28"],[-28,-24,[0,70,255,255],"-28~-24"],[-24,-22,[0,100,255,255],"-24~-22"],[-22,-20,[0,170,255,255],"-22~-20"],[-20,-18,[0,200,255,255],"-20~-18"],[-18,-16,[0,230,255,255],"-18~-16"],[-16,-14,[0,255,245,255],"-16~-14"],[-14,-12,[0,255,215,255],"-14~-12"],[-12,-10,[0,255,175,255],"-12~-10"],[-10,-8,[0,255,145,255],"-10~-8"],[-8,-6,[0,255,110,255],"-8~-6"],[-6,-4,[0,255,80,255],"-6~-4"],[-4,-2,[0,255,45,255],"-4~-2"],[-2,0,[0,255,15,255],"-2~0"],[0,2,[20,255,0,255],"0~2"],[2,4,[50,255,0,255],"2~4"],[4,6,[90,255,0,255],"4~6"],[6,8,[120,255,0,255],"6~8"],[8,10,[155,255,0,255],"8~10"],[10,12,[185,255,0,255],"10~ 12"],[12,14,[220,255,0,255],"12~14"],[14,16,[255,255,0,255],"14~16"],[16,18,[255,225,0,255],"16~ 18"],[18,20,[255,195,0,255],"18~20"],[20,22,[255,160,0,255],"20~ 22"],[22,24,[255,130,0,255],"20~ 22"],[24,26,[255,100,0,255],"24~ 26"],[26,28,[255,65,0,255],"26~ 28"],[28,30,[255,45,0,255],"28~ 30"],[30,33,[255,37,0,255],"30~ 33"],[33,35,[255,20,0,255],"33~35"],[35,666666666,[255,0,0,255],"35>"]]});hfsLoader.readFile({dir:"GZData",path:"SURF",fileName:"SURF_CHN_MUL_HOR/surf_20201030050000.json"},{responseType:"json"}).then((function(e){var t=Object(r["a"])(e.DS,l);Object(r["b"])(t,"TEM",l,256,256).then((function(e){var t=u.generate(e,256,256);h.levels.forEach((function(e){e.setImage(t)}))}))})),this.dataBox=h}}},c=l,d=(a("8ae6"),a("5c41"),a("2877")),h=Object(d["a"])(c,i,n,!1,null,"73ad4757",null);t["default"]=h.exports},"369c":function(e,t,a){},5348:function(e,t,a){},"5c41":function(e,t,a){"use strict";a("5348")},"8ae6":function(e,t,a){"use strict";a("369c")}}]);
//# sourceMappingURL=chunk-bcbebb8c.2f802234.js.map